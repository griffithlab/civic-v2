<nz-select nzShowSearch
  nzServerSearch
  [formControl]="formControl"
  [formlyAttributes]="field"
  [nzPlaceHolder]="!to.placeholder ? null : to.placeholder"
  [nzNotFoundContent]="variantLoader"
  [nzShowArrow]="false"
  (nzOnSearch)="to.onSearch($event)">
  <ng-container *ngrxLet="this.variants$ as variants">
    <nz-option *ngFor="let opt of variants"
      nzCustomContent
      [nzValue]="opt.variant">
      {{ opt.label}}
    </nz-option>
  </ng-container>
</nz-select>
<ng-template #variantLoader>
  <!-- prompt user to enter search string if none entered, or it is of insufficient length -->
  <ng-container [ngSwitch]="to.searchLength >= 0 && to.searchLength >= to.minSearchLength">
    <div *ngSwitchCase="false"
      class="ant-form-item-explain">
      Enter a Variant name to search CIViC Variant.
    </div>
    <!-- if valid search, but no results returned, show notice -->
    <div *ngSwitchCase="true"
      class="ant-form-item-explain">
      No Variant found in CIViC that matches {{ to.searchString }}
    </div>
  </ng-container>
</ng-template>
