<ng-container *ngIf="!formControl.value?.id; else geneListItem">
  <nz-select #focusInput
    nzShowSearch
    nzServerSearch
    [formControl]="formControl"
    [formlyAttributes]="field"
    [nzPlaceHolder]="!to.placeholder ? null : to.placeholder"
    [nzNotFoundContent]="sourceLoader"
    (nzOnSearch)="onSearch$.next($event)">
    <nz-option *ngFor="let opt of geneOpts$ | async"
      nzCustomContent
      [nzLabel]="opt.tooltip"
      [nzValue]="opt.gene">
      <span [innerHtml]="opt.label | highlightTypeahead: this.to.searchString"></span>
      <ng-container *ngIf="opt.gene.geneAliases.length > 0">
        <span nz-typography nzType="secondary"> - Aliases:
          <span [innerHtml]="opt.gene.geneAliases.join(', ') | highlightTypeahead: this.to.searchString"></span>
        </span>
      </ng-container>
    </nz-option>
  </nz-select>
  <ng-template #sourceLoader>
    No gene found in CIViC that matches the string provided.
  </ng-template>
</ng-container>
<ng-template #geneListItem>
  <cvc-gene-tag [gene]="formControl.value"></cvc-gene-tag>
</ng-template>
