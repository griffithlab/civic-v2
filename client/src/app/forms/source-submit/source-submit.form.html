<nz-spin nzTip="Submitting"
  [nzSpinning]="this.loading">
  <form nz-form
    [formGroup]="formGroup"
    (ngSubmit)="submitSourceSuggestion(formModel)"
    nzLayout="vertical">
    <ng-container *ngTemplateOutlet="formMessages"></ng-container>

    <formly-form [form]="formGroup"
      [fields]="formFields"
      [model]="formModel"
      [options]="formOptions"
      (modelChange)="formModel = $event"></formly-form>

    <ng-container *ngTemplateOutlet="formMessages"></ng-container>
  </form>

  <ng-template #formMessages>
    <nz-form-item *ngIf="this.errorMessages.length > 0">
      <cvc-form-errors-alert [errors]="this.errorMessages">
      </cvc-form-errors-alert>
    </nz-form-item>
    <ng-container *ngIf="this.success">
      <nz-alert nzType="success"
        nzMessage="Source Suggestion Submitted"
        [nzDescription]="successMessage"
        nzShowIcon></nz-alert>
      <ng-template #successMessage
        nzSize="small">
        <p>
          Thank You! Your source will now appear in the
          <a routerLink="['/curation', 'source-suggestions']">
          Source Suggestion curation queue.</a>
        </p>
      </ng-template>
    </ng-container>
  </ng-template>
</nz-spin>

<!-- <div nz-row>
     <div nz-col
     nzSpan="24">
     <ngx-json-viewer *ngIf="formModel"
     [json]="formModel"></ngx-json-viewer>
     </div>
     </div> -->
