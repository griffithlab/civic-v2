<ng-container *ngIf="unfilteredCount$ | ngrxPush as unfilteredCount; else noRevisions">
  <nz-row [nzGutter]="16">
    <nz-col nzSpan="18">
      <nz-space nzDirection="vertical">
        <nz-space-item>
          <cvc-revision-list [revisions]="revisions$ | ngrxPush" (revisionSetSelectedEvent)="onRevisionSetSelected($event)" (revisionMutationCompleted)="refresh()"></cvc-revision-list>
        </nz-space-item>
        <ng-container *ngrxLet="pageInfo$ as pageInfo">
          <nz-space-item  *ngIf="pageInfo?.hasNextPage">
            <button nz-button nzBlock nzType="default" (click)="loadMore(pageInfo?.endCursor)">Load More</button>
          </nz-space-item>
        </ng-container>
      </nz-space>
    </nz-col>
    <nz-col nzSpan="6">
      <nz-space nzDirection="vertical" *ngIf="this.filteredSet">
        <nz-space-item>
        <nz-row >
          <nz-tag nzMode="closeable" (nzOnClose)="onSetFilterClearClicked()">Group: {{this.filteredSet}}</nz-tag>
        </nz-row>
        </nz-space-item>
      </nz-space>
      <cvc-participant-list listTitle="Revision Status" [preselectedOption]="this.selectableStatuses[0]" [participantList]="selectableStatuses" (participantSelectedEvent)="onStatusSelected($event)">
        <ng-template #itemTemplate let-status>
          <span>{{status.displayName}}</span>
        </ng-template>
      </cvc-participant-list>
      <cvc-participant-list listTitle="Revisors" [participantList]="uniqueRevisors$ | ngrxPush" (participantSelectedEvent)="onRevisorSelected($event)">
        <ng-template #itemTemplate let-user>
          <nz-avatar *ngIf="user.profileImagePath; else noAvatar" nz-comment-avatar [nzSrc]="user.profileImagePath">
          </nz-avatar>
          <ng-template #noAvatar>
              <nz-avatar nz-comment-avatar [nzText]="user.username.charAt(0) | uppercase"></nz-avatar>
          </ng-template>
          <span>{{user.username}}</span>
        </ng-template>
      </cvc-participant-list>
      <cvc-participant-list listTitle="Fields Revised" [participantList]="revisionFields$ | ngrxPush" (participantSelectedEvent)="onFieldNameSelected($event)">
        <ng-template #itemTemplate let-field>
          <span>{{field.displayName}}</span>
        </ng-template>
      </cvc-participant-list>
      <cvc-participant-list listTitle="Resolvers" [participantList]="uniqueResolvers$ | ngrxPush" (participantSelectedEvent)="onResolverSelected($event)">
        <ng-template #itemTemplate let-user>
          <nz-avatar *ngIf="user.profileImagePath; else noAvatar" nz-comment-avatar [nzSrc]="user.profileImagePath">
          </nz-avatar>
          <ng-template #noAvatar>
              <nz-avatar nz-comment-avatar [nzText]="user.username.charAt(0) | uppercase"></nz-avatar>
          </ng-template>
          <span>{{user.username}}</span>
        </ng-template>
      </cvc-participant-list>
    </nz-col>
  </nz-row>
</ng-container>
<ng-template #noRevisions>
  <ng-container *ngIf="isLoading$ | ngrxPush as isLoading; else noneFound">
    <nz-row nzJustify="center">
        <i nz-icon nzType="loading" style="font-size: 32px;"></i>
    </nz-row>
  </ng-container>
  <ng-template #noneFound>
    <nz-empty nzNotFoundImage="simple" nzNotFoundContent="Entity has no Revisions"></nz-empty>
  </ng-template>
</ng-template>
