<ng-container *ngIf="{ value: data$ | ngrxPush } as data">
  <nz-table #variantGroupsTable
    [nzData]="(variantGroups$ | ngrxPush)"
    [nzLoading]="(isLoading$ | ngrxPush)"
    [nzFrontPagination]="false"
    [nzShowPagination]="false">
    <thead (nzSortOrderChange)="onSortChanged($event)">
      <tr>
        <th nzWidth="20%"
          [nzColumnKey]="sortColumns.Name"
          [nzSortFn]="true">
          Name
        </th>
        <th nzWidth="30%">
          Variants
        </th>
        <th nzWidth="30%">
          Genes
        </th>
        <th nzWidth="10%"
          [nzColumnKey]="sortColumns.VariantCount"
          [nzSortFn]="true">
          <i nz-icon
            nzType="civic:variant"
            nz-tooltip
            nzTooltipTitle="Variant Count"></i>
        </th>
        <th nzWidth="10%"
          [nzColumnKey]="sortColumns.EvidenceItemCount"
          [nzSortFn]="true">
          <i nz-icon
            nzType="civic:evidence"
            nz-tooltip
            nzTooltipTitle="Evidence Count"></i>
        </th>
      </tr>
      <tr>
        <th>
          <cvc-clearable-input-filter [(inputModel)]="nameInput"
            placeholderText="Name"
            [onInputChanged]="textInputCallback"></cvc-clearable-input-filter>
        </th>
        <th>
          <cvc-clearable-input-filter [(inputModel)]="variantNameInput"
            placeholderText="Variant Name"
            [onInputChanged]="textInputCallback"></cvc-clearable-input-filter>
        </th>
        <th>
          <cvc-clearable-input-filter [(inputModel)]="geneNameInput"
            placeholderText="Gene Name"
            [onInputChanged]="textInputCallback"></cvc-clearable-input-filter>
        </th>
        <th>
        </th>
        <th>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let vg of variantGroupsTable.data">
        <td>
          <cvc-variant-group-tag [variantgroup]="vg"></cvc-variant-group-tag>
        </td>
        <td>
          <p nz-typography>
            <span *ngFor="let variant of vg.variantNames; last as isLast">
                        {{ variant }}{{ isLast ? '' : ', ' }}
                      </span>
          </p>
        </td>
        <td>
          <p nz-typography>
            <span *ngFor="let gene of vg.geneNames; last as isLast">
                        {{ gene }}{{ isLast ? '' : ', ' }}
                      </span>
          </p>
        </td>
        <td>
          {{ vg.variantCount }}
        </td>
        <td>
          {{ vg.evidenceItemCount }}
        </td>
      </tr>
      <!-- Load More button row -->
      <ng-container *ngrxLet="pageInfo$ as pageInfo">
        <tr *ngIf="pageInfo.hasNextPage">
          <td colspan="7">
            <button *ngIf="pageInfo.hasNextPage"
              (click)="loadMore(pageInfo.endCursor)"
              nz-button
              nzBlock>Load More</button>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </nz-table>
</ng-container>
