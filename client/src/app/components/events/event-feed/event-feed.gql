query EventFeed (
    $subject: SubscribableQueryInput
    $first: Int,
    $last: Int,
    $before: String,
    $after: String,
    $originatingUserId: Int,
    $organizationId: Int,
    $eventType: EventAction
){
events (
    subject: $subject,
    first: $first,
    last: $last,
    before: $before,
    after: $after,
    originatingUserId: $originatingUserId,
    organizationId: $organizationId
    eventType: $eventType
) { ...eventFeed }

}
fragment eventFeed on EventConnection {
    pageInfo {
        startCursor
        endCursor
        hasNextPage
        hasPreviousPage
    }
    eventTypes
    uniqueParticipants {
        id
        displayName
        role
        profileImagePath(size: 32)
    }
    participatingOrganizations {
        id
        name
        profileImagePath(size: 32)
    }
    edges {
        cursor
        node {
            ...eventFeedNode
        }
    }
}

fragment eventFeedNode on Event {
    id
    action
    createdAt
    organization {
        id
        name
        profileImagePath(size: 32)
    }
    originatingUser {
        id
        username
        displayName
        role
        profileImagePath(size: 32)
    }
    subject {
        name
        id
        ... on Source {
            citation
            sourceType
        }
        ... on EvidenceItem {
            status
        }
        ... on Assertion {
            status
        }
        __typename
    }
    originatingObject {
        id
        name
        __typename
        ... on Revision {
            id
        }
        ... on Comment {
            id
        }
        ... on Flag {
            id
        }
    }
}
