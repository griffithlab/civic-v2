<nz-card
  [nzTitle]="cardTitle"
  [nzExtra]="cardExtra"
  nzSize="small">
  <nz-row [nzGutter]="[8, 8]">
    <!-- ACTIVITY FEED COLUMN -->
    <nz-col [nzSpan]="cvcShowFilters() ? 20 : 24">
      <div
        *ngFor="let activity of activity$ | ngrxPush"
        class="feed-row">
        {{ activity.user.displayName }} {{ activity.verbiage }}
        {{ activity.subject.name }} for {{ activity.organization.name }}
      </div>
      <!-- <pre>cvcScope: {{ cvcScope() | json }}</pre>
          <pre>feedSettings: {{ feedSetting$ | ngrxPush | json }} </pre>
          <pre>feedFilters: {{ feedFilter$ | ngrxPush | json }} </pre> -->
    </nz-col>
    <!-- FEED FILTERS COLUMN -->
    <nz-col [nzSpan]="cvcShowFilters() ? 4 : 0">
      <!-- NOTE: setting nzSpan to 0 hides the filters column rather than removing it
           from the DOM as with *ngIf. This causes cvc-activity-feed-filters'
           feedFilter$ to emit, which is required to fire off an initial query -->
      <cvc-activity-feed-filters
        [cvcShowFilters]="cvcShowFilters()"
        (cvcFiltersChange)="feedFilter$.next($event)"
        [cvcFilters]="cvcFilters()">
      </cvc-activity-feed-filters>
    </nz-col>
  </nz-row>
</nz-card>
<ng-template #cardTitle>
  {{ cvcTitle() }}
  <cvc-activity-feed-counts></cvc-activity-feed-counts>
</ng-template>
<ng-template #cardExtra>
  <cvc-activity-feed-settings
    (cvcSettingsChange)="feedSetting$.next($event)"
    [cvcSettings]="cvcSettings()">
  </cvc-activity-feed-settings>
</ng-template>
