<nz-card
  [nzTitle]="cardTitle"
  [nzExtra]="cardExtra"
  nzSize="small"
  style="width: 100%">
  <nz-row [nzGutter]="[16, 8]">
    <!-- ACTIVITY FEED COLUMN -->
    <nz-col [nzSpan]="cvcShowFilters() ? 18 : 24">
      <div
        style="border: 1px solid green"
        cvcAutoHeightDiv="40"
        cvcAutoHeightTarget="viewport">
        @if (scrollDatasource) {
          <cvc-activity-feed-item
            *uiScroll="let edge of scrollDatasource"
            [cvcActivity]="edge.node"></cvc-activity-feed-item>
        }
      </div>
    </nz-col>
    <!-- FEED FILTERS COLUMN -->
    <nz-col [nzSpan]="cvcShowFilters() ? 6 : 0">
      <!-- NOTE: setting nzSpan to 0 hides the filters column rather than removing it
           from the DOM as with *ngIf. This causes cvc-activity-feed-filters'
           feedFilter$ to emit, which is required to fire off an initial query -->
      <cvc-activity-feed-filters
        (cvcFiltersChange)="feedFilter$.next($event)"
        [cvcFilterOptions]="feedFilterOptions()"
        [cvcFilters]="cvcFilters()">
      </cvc-activity-feed-filters>
      <!-- <pre>feedFilter$: {{ feedFilter$ | ngrxPush | json }}</pre> -->
    </nz-col>
  </nz-row>
</nz-card>
<ng-template #cardTitle>
  {{ cvcTitle() }}
  <cvc-activity-feed-counts
    [cvcFeedCounts]="counts()"></cvc-activity-feed-counts>
</ng-template>
<ng-template #cardExtra>
  <cvc-activity-feed-settings
    (cvcSettingsChange)="feedSetting$.next($event)"
    [cvcSettings]="cvcSettings()">
  </cvc-activity-feed-settings>
</ng-template>
