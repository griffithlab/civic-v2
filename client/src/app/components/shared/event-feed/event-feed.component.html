<ng-container *ngIf="events$ | ngrxPush as events">
  <nz-card [nzTitle]="cardTitle"
    id="card-content">
    <ng-template #cardTitle>
      <i nz-icon
        [nzType]="iconNameForSubscribableEntity(subscribable.entityType)"
        *ngIf="subscribable"></i> {{ subscribableName }} Events
    </ng-template>
    <nz-row [nzGutter]="16">
      <nz-col nzSpan="20">
        <ng-container *ngIf="events.length">
          <cvc-event-timeline [events]="events"></cvc-event-timeline>
        </ng-container>
        <nz-timeline *ngIf="events.length">
        </nz-timeline>
        <ng-container *ngIf="pageInfo$ | ngrxPush as pageInfo">
          <div nz-list-load-more
            *ngIf="pageInfo.hasNextPage">
            <button nz-button
              nzType="link"
              nzSize="small"
              nzBlock
              (click)="fetchMore(pageInfo.endCursor)">Load More
            </button>
          </div>
        </ng-container>
      </nz-col>
      <nz-col nzSpan="4">
        <cvc-participant-list listTitle="Participants"
          [participantList]="participants$ | ngrxPush"
          (participantSelectedEvent)="onParticipantSelected($event)">
          <ng-template #itemTemplate
            let-user>
            <cvc-user-pill [user]="user"></cvc-user-pill>
          </ng-template>
        </cvc-participant-list>
        <nz-divider></nz-divider>
        <cvc-participant-list listTitle="Organizations"
          [participantList]="organizations$ | ngrxPush"
          (participantSelectedEvent)="onOrganizationSelected($event)">
          <ng-template #itemTemplate
            let-org>
            <cvc-org-pill [org]="org"></cvc-org-pill>
          </ng-template>
        </cvc-participant-list>
      </nz-col>
    </nz-row>
  </nz-card>
</ng-container>
