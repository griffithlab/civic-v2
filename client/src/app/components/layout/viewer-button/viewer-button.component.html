<ng-container *ngIf="viewer$ | ngrxPush as viewer">
  <nz-space nzAlign="center" nzSize="middle">
    <nz-space-item routerLink="/users/{{viewer.id}}/notifications">
        <div class="topMenuIcon" nz-tooltip nzTooltipTitle="You have {{viewer.notifications.unreadCount}} unread notification(s).">
          <i nz-icon nzType="bell" nzTheme="outline" ></i>
          <nz-badge class="notificationBadge" nzColor="blue" [nzShowDot]="viewer.notifications.unreadCount > 0">
          </nz-badge>
        </div>
    </nz-space-item>
    <nz-space-item>
      <div class="topMenuIcon" nz-dropdown nzTrigger="click" [nzDropdownMenu]="addMenu" nzPlacement="bottomRight">
        <i nz-icon nzType="plus" nzTheme="outline" ></i>
        <i class="topMenuSecondary" nz-icon nzType="caret-down" nzTheme="outline" ></i>
        <nz-dropdown-menu #addMenu="nzDropdownMenu">
          <ul nz-menu>
            <li nz-menu-item>
                <a routerLink="/evidence/add/submit">
                  Add Evidence
                </a>
              </li>
            <li nz-menu-item>
                <a routerLink="/assertions/add/submit">
                  Add Assertion
                </a>
              </li>
            <li nz-menu-item>
                <a routerLink="/assertions/add/submit">
                  Suggest Source
                </a>
              </li>
          </ul>
        </nz-dropdown-menu>
      </div>
    </nz-space-item>
    <nz-space-item>
      <div class="topMenuIcon" nz-dropdown nzTrigger="click" [nzDropdownMenu]="userMenu" nzPlacement="bottomRight">
        <cvc-user-avatar [user]="viewer" size="small"></cvc-user-avatar>
        <i nz-icon class="topMenuSecondary" nzType="caret-down" nzTheme="outline" ></i>
        <nz-dropdown-menu #userMenu="nzDropdownMenu">
          <ul nz-menu>
            <li nz-menu-item>Signed In as <strong>{{viewer.username}}</strong></li>
            <li nz-menu-divider></li>
            <li nz-menu-item>
                <a routerLink="/users/{{viewer.id}}">
                  Your Profile
                </a>
              </li>
            <li nz-menu-divider></li>
            <li nz-menu-item (click)="signOut()">Sign Out</li>
          </ul>
        </nz-dropdown-menu>
      </div>
    </nz-space-item>
  </nz-space>
</ng-container>