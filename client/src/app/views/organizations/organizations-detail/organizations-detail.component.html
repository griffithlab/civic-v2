<ng-container *ngIf="organization$ | ngrxPush as organization">
  <cvc-section-navigation [displayName]="organization.name">
  </cvc-section-navigation>
  <nz-page-header class="site-page-header">
    <nz-page-header-title>
      <nz-space nzDirection="horizontal"
        nzSize="small">
        <i nz-icon nzType="civic:organization" *nzSpaceItem></i>
        <span routerLink="/organizatons/{{organization.id}}" *nzSpaceItem>
          {{ organization.name }}
        </span>
        <cvc-link-tag [href]="organization.url" *nzSpaceItem>
          Organization Website
        </cvc-link-tag>
      </nz-space>
    </nz-page-header-title>

    <nz-page-header-content>
      <cvc-tab-navigation [tabs]="tabs"></cvc-tab-navigation>
      <div class="content">
        <nz-space>
          <nz-row [nzGutter]="16" *nzSpaceItem>
            <nz-row>
              <nz-col [nzSpan]="2">
                <img
                  nz-image
                  width="121px"
                  height="121px"
                  nzSrc="{{ organization.profileImagePath }}"
                  alt=""
                />
              </nz-col>
              <nz-col [nzSpan]="18">
                <nz-row>
                  <p nz-typography><b>Description: </b>{{ organization.description }}</p>
                </nz-row>
                <nz-row *ngIf="organization.subGroups.length == 0; else hasSubGroups" >
                  <cvc-stats-card [stats]="organization.orgStatsHash" header="Organization Statistics"></cvc-stats-card>
                </nz-row>
                <ng-template #hasSubGroups>
                  <nz-row>
                    <cvc-stats-card [stats]="organization.orgStatsHash" header="Organization Statistics (Excl. Child Organizations)"></cvc-stats-card>
                  </nz-row>
                  <nz-row>
                    <cvc-stats-card [stats]="organization.orgAndSuborgsStatsHash" header="Organization Statistics (Incl. Child Organizations)"></cvc-stats-card>
                  </nz-row>
                </ng-template>
              </nz-col>
              <nz-col [nzSpan]="4">
                <nz-list *ngIf="organization.subGroups.length > 0" nzBordered nzSize="small">
                  <nz-list-header>Child Organizations: </nz-list-header>
                  <nz-list-item *ngFor="let suborg of organization.subGroups">
                    <cvc-organization-tag [org]="suborg"></cvc-organization-tag>
                  </nz-list-item>
                </nz-list>
              </nz-col>
            </nz-row>
          </nz-row>
        </nz-space>
        <router-outlet></router-outlet>
      </div>
    </nz-page-header-content>
  </nz-page-header>
</ng-container>
