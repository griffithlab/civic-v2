"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[8717],{7701:(U,O,i)=>{i.d(O,{j:()=>L});var e=i(5e3),u=i(9808),v=i(325),M=i(8481),t=i(3610),f=i(4850),Z=i(712),h=i(7484),y=i(647),b=i(6550),S=i(3098),I=i(6949);function g(r,c){if(1&r&&(e._UZ(0,"i",7),e._uU(1)),2&r){const p=e.oxw().ngIf;e.xp6(1),e.hij(" ",p.name," ")}}function x(r,c){if(1&r&&(e.TgZ(0,"cvc-link-tag",9),e._uU(1),e.qZA()),2&r){const p=e.oxw(2).ngIf;e.Q6J("href",p.url),e.xp6(1),e.hij(" ",p.soid," ")}}function V(r,c){if(1&r&&e.YNc(0,x,2,2,"cvc-link-tag",8),2&r){const p=e.oxw().ngIf;e.Q6J("ngIf","N/A"!=p.soid)}}function F(r,c){if(1&r&&(e.ynx(0),e.TgZ(1,"nz-card",2),e.YNc(2,g,2,1,"ng-template",null,3,e.W1O),e.YNc(4,V,1,1,"ng-template",null,4,e.W1O),e.TgZ(6,"nz-descriptions",5),e.TgZ(7,"nz-descriptions-item",6),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&r){const p=c.ngIf,m=e.MAs(3),J=e.MAs(5);e.xp6(1),e.Q6J("nzTitle",m)("nzExtra",J),e.xp6(5),e.Q6J("nzColumn",2),e.xp6(2),e.hij(" ",p.variantCount," ")}}let Y=(()=>{class r{constructor(p){this.gql=p}ngOnInit(){if(null==this.variantTypeId)throw new Error("cvc-variant-type-popover requires valid variantTypeId input.");this.variantType$=this.gql.watch({variantTypeId:this.variantTypeId}).valueChanges.pipe((0,f.U)(({data:p})=>p.variantTypePopover))}}return r.\u0275fac=function(p){return new(p||r)(e.Y36(Z.tw_))},r.\u0275cmp=e.Xpm({type:r,selectors:[["cvc-variant-type-popover"]],inputs:{variantTypeId:"variantTypeId"},decls:3,vars:3,consts:[["id","popover-content"],[4,"ngIf"],["nzBordered","false","id","card-content",3,"nzTitle","nzExtra"],["cardTitle",""],["linkout",""],["nzSize","small","nzBordered","true",3,"nzColumn"],["nzTitle","Variants","nzSpan","2"],["nz-icon","","nzType","civic-varianttype",1,"variant-type-tag-icon"],["tooltip","View on SequenceOntology.org",3,"href",4,"ngIf"],["tooltip","View on SequenceOntology.org",3,"href"]],template:function(p,m){1&p&&(e.TgZ(0,"div",0),e.YNc(1,F,9,4,"ng-container",1),e.ALo(2,"ngrxPush"),e.qZA()),2&p&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,m.variantType$)))},directives:[u.O5,h.bd,y.Ls,b.l,S.R7,S.uj],pipes:[I.fM],styles:["[_nghost-%COMP%]{display:block;margin:-8px -12px}[_nghost-%COMP%]     .ant-card-body{padding:0;margin-top:1px}[_nghost-%COMP%]     .ant-descriptions-view{border:none}[_nghost-%COMP%]     #entity-child-counts{border-top:1px solid #f0f0f0;padding:8px}[_nghost-%COMP%]     #entity-child-counts nz-space{width:100%}[_nghost-%COMP%]     #entity-child-counts nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     #entity-child-counts nz-space-item:last-child nz-tag{margin-right:0}.popover-text[_ngcontent-%COMP%]{width:100%;padding:8px;border-bottom:1px solid #f0f0f0}#popover-content[_ngcontent-%COMP%]{min-width:350px;max-width:500px;min-height:125px}"]}),r})();function _(r,c){}function Q(r,c){if(1&r&&(e.ynx(0),e.TgZ(1,"a",5),e.YNc(2,_,0,0,"ng-template",6),e.qZA(),e.BQk()),2&r){const p=e.oxw(),m=e.MAs(2);e.xp6(1),e.MGl("routerLink","/variant-types/",p.variantType.id,""),e.xp6(1),e.Q6J("ngTemplateOutlet",m)}}function C(r,c){}function N(r,c){if(1&r&&(e.TgZ(0,"nz-tag",9),e.YNc(1,C,0,0,"ng-template",6),e.qZA()),2&r){e.oxw();const p=e.MAs(2);e.oxw();const m=e.MAs(8);e.Q6J("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",p),e.xp6(1),e.Q6J("ngTemplateOutlet",m)}}function P(r,c){if(1&r&&e._UZ(0,"cvc-variant-type-popover",10),2&r){const p=e.oxw(2);e.Q6J("variantTypeId",p.variantType.id)}}function T(r,c){if(1&r&&(e.YNc(0,N,2,3,"nz-tag",7),e.YNc(1,P,1,1,"ng-template",null,8,e.W1O)),2&r){const p=e.oxw(),m=e.MAs(6);e.Q6J("ngIf",p.enablePopover)("ngIfElse",m)}}function E(r,c){}function R(r,c){if(1&r&&e.YNc(0,E,0,0,"ng-template",6),2&r){e.oxw();const p=e.MAs(2);e.Q6J("ngTemplateOutlet",p)}}function $(r,c){}function B(r,c){if(1&r&&(e.TgZ(0,"nz-tag"),e.YNc(1,$,0,0,"ng-template",6),e.qZA()),2&r){e.oxw();const p=e.MAs(8);e.xp6(1),e.Q6J("ngTemplateOutlet",p)}}function A(r,c){if(1&r&&(e._UZ(0,"i",11),e._uU(1)),2&r){const p=e.oxw();e.xp6(1),e.hij(" ",p.variantType.name,"\n")}}let L=(()=>{class r{constructor(){this.linked=!0,this.enablePopover=!0}ngOnInit(){if(void 0===this.variantType)throw new Error("cvc-variant-type-tag requires LinkableVariantType input, none supplied.")}}return r.\u0275fac=function(p){return new(p||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["cvc-variant-type-tag"]],inputs:{variantType:"variantType",linked:"linked",enablePopover:"enablePopover"},decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["tag",""],["unlinked",""],["noPopover",""],["tagContent",""],[3,"routerLink"],[3,"ngTemplateOutlet"],["nz-popover","","nzPopoverPlacement","right","nzPopoverTrigger","hover",3,"nzPopoverMouseEnterDelay","nzPopoverContent",4,"ngIf","ngIfElse"],["variantTypePopover",""],["nz-popover","","nzPopoverPlacement","right","nzPopoverTrigger","hover",3,"nzPopoverMouseEnterDelay","nzPopoverContent"],[3,"variantTypeId"],["nz-icon","","nzType","civic-varianttype","nzTheme","twotone","nzTwotoneColor","#33B358"]],template:function(p,m){if(1&p&&(e.YNc(0,Q,3,2,"ng-container",0),e.YNc(1,T,3,2,"ng-template",null,1,e.W1O),e.YNc(3,R,1,1,"ng-template",null,2,e.W1O),e.YNc(5,B,2,1,"ng-template",null,3,e.W1O),e.YNc(7,A,2,1,"ng-template",null,4,e.W1O)),2&p){const J=e.MAs(4);e.Q6J("ngIf",m.linked)("ngIfElse",J)}},directives:[u.O5,v.yS,u.tP,M.j,t.lU,Y,y.Ls],styles:["[_nghost-%COMP%]{display:block}"]}),r})()},8645:(U,O,i)=>{i.d(O,{M:()=>I});var e=i(9808),u=i(325),v=i(8481),M=i(7484),t=i(3630),f=i(3098),Z=i(6949),h=i(647),y=i(5e3);let b=(()=>{class g{}return g.\u0275fac=function(V){return new(V||g)},g.\u0275mod=y.oAB({type:g}),g.\u0275inj=y.cJS({imports:[[e.ez,Z.WG,h.PV,M.vh,f.q6,t.X]]}),g})();var S=i(3610);let I=(()=>{class g{}return g.\u0275fac=function(V){return new(V||g)},g.\u0275mod=y.oAB({type:g}),g.\u0275inj=y.cJS({imports:[[e.ez,u.Bz,h.PV,v.X,S.$6,b]]}),g})()},8717:(U,O,i)=>{i.r(O),i.d(O,{VariantsReviseModule:()=>Zt});var e=i(9808),u=i(325),v=i(373),M=i(1059),t=i(5e3),f=i(712),Z=i(8992),h=i(1945),y=i(647);function b(n,s){if(1&n&&(t.ynx(0),t._UZ(1,"cvc-section-navigation",1),t.TgZ(2,"nz-page-header",2),t.TgZ(3,"nz-page-header-title",3),t._uU(4," REVISE "),t._UZ(5,"i",4),t._uU(6),t.qZA(),t.TgZ(7,"nz-page-header-subtitle"),t._uU(8),t.qZA(),t.TgZ(9,"nz-page-header-content"),t.TgZ(10,"div",5),t._UZ(11,"router-outlet"),t.qZA(),t.qZA(),t.qZA(),t.BQk()),2&n){const o=s.ngIf;t.xp6(1),t.Q6J("displayName",o.name),t.xp6(5),t.hij(" ",o.name," "),t.xp6(2),t.hij(" ",o.name," ")}}let S=(()=>{class n{constructor(o,a){this.gql=o,this.route=a,this.routeSub=this.route.params.subscribe(l=>{let d=this.gql.watch({variantId:+l.variantId}).valueChanges;this.loading$=d.pipe((0,v.j)("loading"),(0,M.O)(!0)),this.variant$=d.pipe((0,v.j)("data","variant")),this.commentsTotal$=this.variant$.pipe((0,v.j)("comments","totalCount")),this.flagsTotal$=this.variant$.pipe((0,v.j)("flags","totalCount")),this.revisionsTotal$=this.variant$.pipe((0,v.j)("revisions","totalCount"))})}ngOnDestroy(){this.routeSub.unsubscribe()}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(f.iJT),t.Y36(u.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cvc-variants-revise"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"displayName"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzType","civic:variant"],[1,"content"]],template:function(o,a){1&o&&(t.YNc(0,b,12,3,"ng-container",0),t.ALo(1,"async")),2&o&&t.Q6J("ngIf",t.lcZ(1,1,a.variant$))},directives:[e.O5,Z.I,h.$O,h.u9,y.Ls,h.yG,h.u5,u.lC],pipes:[e.Ov],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),n})();var I=i(6559),g=i(1317),x=i(4038),V=i(8269),F=i(2752),Y=i(6904),_=i(8776),Q=i(6042),C=i(1894),N=i(2359),P=i(4546),T=i(3075),E=i(5109),R=i(8929),$=i(591),B=i(5284),A=i(7625),L=i(537),r=i(9169);let c=(()=>{class n{constructor(o,a){this.suggestVariantRevisionGQL=o,this.networkErrorService=a,this.destroy$=new R.xQ,this.isSubmitting$=new $.X(!1),this.submitSuccess$=new $.X(!1),this.submitError$=new $.X([])}suggest(o){this.storeObj={id:o.id,__typename:(0,B.e)("Variant")},this.isSubmitting$.next(!0),this.suggestVariantRevisionGQL.mutate({input:o},{update:(a,{data:{suggestVariantRevision:l}})=>{a.modify({id:a.identify(this.storeObj),fields:{revisions:(d=[])=>l.variant.revisions}})}}).pipe((0,A.R)(this.destroy$),(0,L.x)(()=>{this.isSubmitting$.next(!1)})).subscribe({error:a=>{a.graphQLErrors.length>0?this.submitError$.next(a.graphQLErrors.map(l=>l.message)):a.networkError&&this.networkErrorService.networkError$.next(a.networkError)},complete:()=>{this.submitError$.next([]),this.submitSuccess$.next(!0),this.networkErrorService.networkError$.next(void 0)}})}cleanup(){this.submitError$.next([]),this.submitSuccess$.next(!1),this.isSubmitting$.next(!1),this.networkErrorService.networkError$.next(void 0)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.\u0275fac=function(o){return new(o||n)(t.LFG(f.Xft),t.LFG(r.Y))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var p=i(8054),m=i(6949),J=i(7701);function D(n,s){if(1&n&&(t.TgZ(0,"nz-option",6),t._uU(1),t.qZA()),2&n){const o=s.$implicit;t.hYB("nzLabel","",o.name," (",o.soid,")"),t.Q6J("nzValue",o),t.xp6(1),t.AsE(" ",o.name," (",o.soid,") ")}}function G(n,s){if(1&n&&(t.ynx(0),t.YNc(1,D,2,5,"nz-option",5),t.BQk()),2&n){const o=s.ngrxLet;t.xp6(1),t.Q6J("ngForOf",o)}}function X(n,s){1&n&&t._uU(0," No variant type found in CIViC that matches the string provided. ")}function W(n,s){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"nz-select",2),t.NdJ("nzOnSearch",function(l){return t.CHM(o),t.oxw().to.onSearch(l)}),t.YNc(2,G,2,1,"ng-container",3),t.qZA(),t.YNc(3,X,1,0,"ng-template",null,4,t.W1O),t.BQk()}if(2&n){const o=t.MAs(4),a=t.oxw();t.xp6(1),t.Q6J("formControl",a.formControl)("formlyAttributes",a.field)("nzPlaceHolder",a.to.placeholder?a.to.placeholder:null)("nzNotFoundContent",o)("nzShowArrow",a.to.showArrow)("nzFilterOption",a.to.filterOption),t.xp6(1),t.Q6J("ngrxLet",a.variantTypes$)}}function k(n,s){if(1&n&&t._UZ(0,"cvc-variant-type-tag",7),2&n){const o=t.oxw();t.Q6J("variantType",o.formControl.value)}}const H={name:"variant-type-input",component:(()=>{class n extends _.fS{constructor(o){super(),this.variantTypeTypeaheadQuery=o,this.destroy$=new R.xQ,this.defaultOptions={templateOptions:{placeholder:"Search Variant Types",showArrow:!1,onSearch:()=>{},minLengthSearch:1,optionList:[]}}}ngOnInit(){this.queryRef=this.variantTypeTypeaheadQuery.watch({name:""}),this.variantTypes$=this.queryRef.valueChanges.pipe((0,A.R)(this.destroy$),(0,v.j)("data","variantTypeTypeahead"))}ngAfterViewInit(){this.to.onSearch=o=>{var a;this.to.fieldValue=o,this.to.fieldLength=o.length,!(o.length<this.to.minLengthSearch||o.length>this.to.maxLength)&&(null===(a=this.queryRef)||void 0===a||a.refetch({name:o}))}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(f.BnY))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cvc-variant-type-input"]],features:[t.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["drugListItem",""],["nzShowSearch","","nzServerSearch","",3,"formControl","formlyAttributes","nzPlaceHolder","nzNotFoundContent","nzShowArrow","nzFilterOption","nzOnSearch"],[4,"ngrxLet"],["sourceLoader",""],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzCustomContent","",3,"nzLabel","nzValue"],[3,"variantType"]],template:function(o,a){if(1&o&&(t.YNc(0,W,5,7,"ng-container",0),t.YNc(1,k,1,1,"ng-template",null,1,t.W1O)),2&o){const l=t.MAs(2);t.Q6J("ngIf",!(null!=a.formControl.value&&a.formControl.value.id))("ngIfElse",l)}},directives:[e.O5,p.Vq,T.JJ,T.oH,_.VQ,m.eJ,e.sg,p.Ip,J.j],styles:[""]}),n})()};var K=i(8645);const q={types:[H]};let tt=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[e.ez,T.UX,m.WG,_.X0.forChild(q),p.LV,K.M]]}),n})(),et=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[c],imports:[[e.ez,u.Bz,T.UX,E.s,P.U5,N.L,C.Jb,Q.sL,_.X0.forChild(),Y.A,F.B,V.R,x.v,g.$,tt]]}),n})();var w=i(8144),j=i(7484);let nt=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[e.ez,j.vh,C.Jb,w.zf,I.H0,et]]}),n})();var z=i(5517),ot=i(444);function it(n){switch(n){case"GRCH37":return"GRCh37 (hg19)";case"GRCH38":return"GRCh38 (hg38)";case"NCBI36":return"NCBI36 (hg18)";default:return n}}var at=i(9350),rt=i(2993),st=i(1014),pt=i(7815),lt=i(2643),ct=i(6874),gt=i(2683);function dt(n,s){if(1&n&&(t.TgZ(0,"nz-form-item"),t._UZ(1,"cvc-form-errors-alert",3),t.qZA()),2&n){const o=t.oxw().ngIf;t.xp6(1),t.Q6J("errors",o)}}function mt(n,s){if(1&n&&(t.ynx(0),t.YNc(1,dt,2,1,"nz-form-item",1),t.BQk()),2&n){const o=s.ngIf;t.xp6(1),t.Q6J("ngIf",o.length>0)}}function ut(n,s){1&n&&(t.TgZ(0,"p"),t._uU(1,"View it on the "),t.TgZ(2,"a",7),t._uU(3,"Revisions Page"),t.qZA(),t._uU(4," or suggest another revision below."),t.qZA())}function vt(n,s){if(1&n&&(t.ynx(0),t._UZ(1,"nz-alert",4),t.YNc(2,ut,5,0,"ng-template",5,6,t.W1O),t.BQk()),2&n){const o=t.MAs(3);t.xp6(1),t.Q6J("nzDescription",o)}}function ft(n,s){if(1&n){const o=t.EpF();t.TgZ(0,"nz-form-item"),t.TgZ(1,"nz-form-control"),t.TgZ(2,"cvc-form-buttons"),t.TgZ(3,"cvc-org-selector-btn-group",8),t.NdJ("selectedOrgChange",function(l){return t.CHM(o),t.oxw().mostRecentOrg=l}),t.TgZ(4,"button",9),t._uU(5," Suggest Revision "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const o=t.oxw();t.xp6(3),t.Q6J("selectedOrg",o.mostRecentOrg),t.xp6(1),t.Q6J("disabled",!o.formGroup.valid)}}let ht=(()=>{class n{constructor(o,a,l){this.revisionService=o,this.viewerService=a,this.revisableFieldsGQL=l,this.destroy$=new R.xQ,this.formGroup=new T.cw({}),this.formOptions={},this.viewerService.viewer$.pipe((0,A.R)(this.destroy$)).subscribe(d=>{this.organizations=d.organizations,this.mostRecentOrg=d.mostRecentOrg}),this.submitError$=this.revisionService.submitError$,this.isSubmitting$=this.revisionService.isSubmitting$,this.submitSuccess$=this.revisionService.submitSuccess$,this.formFields=[{key:"id",type:"input",hide:!0},{key:"fields.description",type:"textarea",templateOptions:{label:"Description",placeholder:"Enter a description for this variant.",required:!1}},{key:"fields.sources",type:"multi-field",templateOptions:{label:"Sources",addText:"Add another Source"},fieldArray:{type:"source-input",templateOptions:{required:!0}}},{key:"fields.variantAliases",type:"multi-field",templateOptions:{label:"Variant Aliases",addText:"Add an Alias"},fieldArray:{type:"input",templateOptions:{required:!0,placeholder:"Add Alias"}}},{key:"fields.hgvsDescriptions",type:"multi-field",templateOptions:{label:"HGVS Descriptions",addText:"Add an HGVS Description"},fieldArray:{type:"input",templateOptions:{required:!0,placeholder:"Enter an HGVS string"}}},{key:"fields.clinvarIds",type:"multi-field",templateOptions:{label:"ClinVar IDs",addText:"Add a ClinVar ID"},fieldArray:{type:"input",templateOptions:{required:!0,placeholder:"Enter a ClinVar ID"}}},{key:"fields.variantTypes",type:"multi-field",templateOptions:{label:"Variant Types",addText:"Add a Variant Type"},fieldArray:{type:"variant-type-input",templateOptions:{required:!0}}},{template:"<h3>Primary Coordinates</h3>"},{key:"fields.referenceBuild",type:"select",defaultValue:f.JDX.Grch37,templateOptions:{label:"Reference Build",required:!1,options:(0,ot.o6)(f.JDX).map((d,$t)=>({value:d,label:it(d)}))}},{key:"fields.ensemblVersion",type:"input",templateOptions:{label:"Ensembl Version"},validators:{validation:["ensembl"]}},{key:"fields.fivePrimeCoordinates.chromosome",type:"select",defaultValue:void 0,templateOptions:{label:"Chromosome",required:!1,options:z.aP}},{key:"fields.fivePrimeCoordinates.start",type:"input",templateOptions:{label:"Start"},validators:{validation:["integer"]}},{key:"fields.fivePrimeCoordinates.stop",type:"input",templateOptions:{label:"Stop"},validators:{validation:["integer"]}},{key:"fields.fivePrimeCoordinates.representativeTranscript",type:"input",templateOptions:{label:"Representative Transcript"}},{template:"<h3>Secondary Coordinates</h3>"},{key:"fields.threePrimeCoordinates.chromosome",type:"select",defaultValue:void 0,templateOptions:{label:"Chromosome",required:!1,options:z.aP}},{key:"fields.threePrimeCoordinates.start",type:"input",templateOptions:{label:"Start"},validators:{validation:["integer"]}},{key:"fields.threePrimeCoordinates.stop",type:"input",templateOptions:{label:"Stop"},validators:{validation:["integer"]}},{key:"fields.threePrimeCoordinates.representativeTranscript",type:"input",templateOptions:{label:"Representative Transcript"}},{key:"comment",type:"comment-textarea",templateOptions:{label:"Comment",placeholder:"Please enter a comment describing your revision.",required:!0,minLength:10}}],this.submitSuccess$.pipe((0,A.R)(this.destroy$)).subscribe(d=>{d&&this.formOptions.resetModel&&this.formOptions.resetModel()})}ngOnInit(){this.revisableFieldsGQL.fetch({variantId:this.variantId}).subscribe(({data:{variant:o}})=>{o?this.formModel=this.toFormModel(o):console.error("Could not retrieve variant."),this.formOptions.updateInitialValue&&this.formOptions.updateInitialValue()})}selectOrg(o){this.mostRecentOrg=o}submitRevision(o){this.revisionService.suggest(this.toRevisionInput(o))}toFormModel(o){var a,l;return{id:o.id,fields:Object.assign(Object.assign({},o),{referenceBases:null===(a=o.fivePrimeCoordinates)||void 0===a?void 0:a.referenceBases,variantBases:null===(l=o.fivePrimeCoordinates)||void 0===l?void 0:l.variantBases}),comment:"",organizationId:void 0}}toRevisionInput(o){const a=o.fields;return Object.assign(Object.assign({},o),{fields:{name:a.name,geneId:a.gene.id,ensemblVersion:+a.ensemblVersion,description:z.xt(a.description),clinvarIds:z.Zg(a.clinvarIds),primaryCoordinates:z._$(a.fivePrimeCoordinates),secondaryCoordinates:z._$(a.threePrimeCoordinates),referenceBases:z.xt(a.referenceBases),variantBases:z.xt(a.variantBases),referenceBuild:z.dh(a.referenceBuild),hgvsDescriptions:a.hgvsDescriptions,sourceIds:o.fields.sources.map(l=>+l.id),variantTypeIds:o.fields.variantTypes.map(l=>+l.id),aliases:o.fields.variantAliases},organizationId:void 0===this.mostRecentOrg?void 0:this.mostRecentOrg.id})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.revisionService.cleanup()}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(c),t.Y36(at.a),t.Y36(f.nnL))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cvc-variant-revise-form"]],inputs:{variantId:"variantId"},decls:8,vars:14,consts:[["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[4,"ngIf"],[3,"form","fields","model","options","modelChange"],[3,"errors"],["nzType","success","nzMessage","Suggested Revision Submitted","nzShowIcon","",3,"nzDescription"],["nzSize","small"],["successMessage",""],["routerLink","../../revisions"],[3,"selectedOrg","selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"]],template:function(o,a){1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return a.submitRevision(a.formModel)}),t.YNc(1,mt,2,1,"ng-container",1),t.ALo(2,"async"),t.YNc(3,vt,4,1,"ng-container",1),t.ALo(4,"async"),t.TgZ(5,"formly-form",2),t.NdJ("modelChange",function(d){return a.formModel=d}),t.qZA(),t.YNc(6,ft,6,2,"nz-form-item",1),t.ALo(7,"async"),t.qZA()),2&o&&(t.Q6J("formGroup",a.formGroup),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,8,a.submitError$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(4,10,a.submitSuccess$)),t.xp6(2),t.Q6J("form",a.formGroup)("fields",a.formFields)("model",a.formModel)("options",a.formOptions),t.xp6(1),t.Q6J("ngIf",!t.lcZ(7,12,a.submitSuccess$)))},directives:[T._Y,T.JL,P.Lr,T.sg,e.O5,C.SK,P.Nx,rt.V,N.r,u.yS,_.T7,C.t3,P.Fd,st.Z,pt.q,Q.ix,lt.dQ,ct.m,gt.w],pipes:[e.Ov],styles:[""]}),n})();function yt(n,s){if(1&n&&(t.ynx(0),t._UZ(1,"cvc-variant-revise-form",8),t.BQk()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("variantId",o.variantId)}}function Tt(n,s){1&n&&t._uU(0,"Loading Variant...")}const zt=function(){return{rows:1}};function Ct(n,s){1&n&&t._UZ(0,"nz-skeleton",9),2&n&&t.Q6J("nzParagraph",t.DdM(1,zt))}const xt=function(){return{rows:3}};function Vt(n,s){1&n&&t._UZ(0,"nz-skeleton",9),2&n&&t.Q6J("nzParagraph",t.DdM(1,xt))}const _t=function(){return{rows:4}};function Ot(n,s){1&n&&t._UZ(0,"nz-skeleton",9),2&n&&t.Q6J("nzParagraph",t.DdM(1,_t))}const St=function(){return{rows:5}};function It(n,s){1&n&&t._UZ(0,"nz-skeleton",9),2&n&&t.Q6J("nzParagraph",t.DdM(1,St))}const Pt=[{path:"",component:S,data:{breadcrumb:"Revise"},children:[{path:"",redirectTo:"suggest",pathMatch:"full"},{path:"suggest",component:(()=>{class n{constructor(o){this.route=o,this.routeParams$=this.route.params.subscribe(a=>{this.variantId=+a.variantId})}ngOnDestroy(){this.routeParams$.unsubscribe()}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(u.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cvc-variants-suggest"]],decls:12,vars:3,consts:[[3,"nzGutter"],["nzSpan","16"],[4,"ngIf","ngIfElse"],["loadingVariant",""],["nzSpan","8"],["nzTitle","Instructions","nz-type","inner"],["nzDirection","vertical",2,"width","100%"],[3,"nzParagraph",4,"nzSpaceItem"],[3,"variantId"],[3,"nzParagraph"]],template:function(o,a){if(1&o&&(t.TgZ(0,"nz-row",0),t.TgZ(1,"nz-col",1),t.YNc(2,yt,2,1,"ng-container",2),t.YNc(3,Tt,1,0,"ng-template",null,3,t.W1O),t.qZA(),t.TgZ(5,"nz-col",4),t.TgZ(6,"nz-card",5),t.TgZ(7,"nz-space",6),t.YNc(8,Ct,1,2,"nz-skeleton",7),t.YNc(9,Vt,1,2,"nz-skeleton",7),t.YNc(10,Ot,1,2,"nz-skeleton",7),t.YNc(11,It,1,2,"nz-skeleton",7),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){const l=t.MAs(4);t.Q6J("nzGutter",16),t.xp6(2),t.Q6J("ngIf",a.variantId)("ngIfElse",l)}},directives:[C.SK,C.t3,e.O5,ht,j.bd,w.NU,w.$1,I.ng],styles:[""]}),n})(),data:{breadcrumb:"Suggest Revision"}}]}];let At=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.Bz.forChild(Pt),nt],u.Bz]}),n})();var Mt=i(5630);let Zt=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[e.ez,At,h.KJ,y.PV,Mt.D]]}),n})()}}]);