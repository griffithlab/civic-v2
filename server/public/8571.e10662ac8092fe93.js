"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[8571],{8616:(Z,f,n)=>{n.d(f,{u:()=>O});var a=n(5e3),l=n(685),p=n(1912),T=n(3618),E=n(647);function e(d,m){1&d&&(a.TgZ(0,"span"),a._uU(1," You must be logged in to view this page. "),a.qZA())}function u(d,m){1&d&&a._UZ(0,"cvc-login-button")}function g(d,m){1&d&&(a.TgZ(0,"nz-typography",4),a._UZ(1,"i",5),a.qZA())}let O=(()=>{class d{}return d.\u0275fac=function(h){return new(h||d)},d.\u0275cmp=a.Xpm({type:d,selectors:[["cvc-login-prompt"]],decls:7,vars:3,consts:[[3,"nzNotFoundImage","nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["emptyImage",""],["nzType","secondary"],["nz-icon","","nzType","login","nzTheme","outline",2,"font-size","50pt"]],template:function(h,A){if(1&h&&(a.TgZ(0,"nz-empty",0),a.YNc(1,e,2,0,"ng-template",null,1,a.W1O),a.YNc(3,u,1,0,"ng-template",null,2,a.W1O),a.qZA(),a.YNc(5,g,2,0,"ng-template",null,3,a.W1O)),2&h){const y=a.MAs(2),I=a.MAs(4),v=a.MAs(6);a.Q6J("nzNotFoundImage",v)("nzNotFoundContent",y)("nzNotFoundFooter",I)}},directives:[l.p9,p.s,T.ZU,E.Ls],styles:["[_nghost-%COMP%]{display:inline-block}"]}),d})()},9386:(Z,f,n)=>{n.d(f,{a:()=>u});var a=n(9808),l=n(1844),p=n(685),T=n(647),E=n(3618),e=n(5e3);let u=(()=>{class g{}return g.\u0275fac=function(d){return new(d||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[a.ez,l.B,p.Xo,T.PV,E.ZJ]]}),g})()},8571:(Z,f,n)=>{n.r(f),n.d(f,{EvidenceReviseModule:()=>Ne});var a=n(9808),l=n(325),p=n(373),T=n(1059),E=n(4850),e=n(5e3),u=n(712),g=n(9350),O=n(8992),d=n(8144),m=n(3618),h=n(3193),A=n(8664),y=n(1945),I=n(647),v=n(1894),F=n(8616),R=n(6949);function U(t,s){if(1&t&&(e.TgZ(0,"span",12),e.TgZ(1,"strong"),e._uU(2),e.qZA(),e._uU(3," Parents:"),e.qZA()),2&t){const i=e.oxw(2).ngIf;e.xp6(2),e.Oqu(i.name)}}function D(t,s){if(1&t&&(e.TgZ(0,"span",13),e.TgZ(1,"a",14),e._UZ(2,"cvc-gene-tag",15),e.qZA(),e.TgZ(3,"a",14),e._UZ(4,"cvc-variant-tag",16),e.qZA(),e.qZA()),2&t){const i=e.oxw(2).ngIf;e.xp6(1),e.MGl("routerLink","/genes/",i.gene.id,""),e.xp6(1),e.Q6J("gene",i.gene),e.xp6(1),e.MGl("routerLink","/variants/",i.variant.id,""),e.xp6(1),e.Q6J("variant",i.variant)}}function J(t,s){1&t&&(e.TgZ(0,"nz-space",9),e.YNc(1,U,4,1,"span",10),e.YNc(2,D,5,4,"span",11),e.qZA())}function N(t,s){1&t&&(e.TgZ(0,"div"),e._UZ(1,"router-outlet"),e.qZA())}function b(t,s){1&t&&(e.TgZ(0,"nz-row",17),e.TgZ(1,"div",18),e._UZ(2,"cvc-login-prompt"),e.qZA(),e.qZA())}function Q(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"cvc-section-navigation",1),e.YNc(2,J,3,0,"ng-template",null,2,e.W1O),e.TgZ(4,"nz-page-header",3),e.TgZ(5,"nz-page-header-title",4),e._uU(6," REVISE "),e._UZ(7,"i",5),e._uU(8),e.qZA(),e.TgZ(9,"nz-page-header-content"),e.TgZ(10,"div",6),e.YNc(11,N,2,0,"div",7),e.ALo(12,"ngrxPush"),e.YNc(13,b,3,0,"ng-template",null,8,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&t){const i=s.ngIf,o=e.MAs(3),c=e.MAs(14),r=e.oxw();e.xp6(1),e.Q6J("displayName",i.name)("relationsTpl",o),e.xp6(7),e.hij(" ",i.name," "),e.xp6(3),e.Q6J("ngIf",e.lcZ(12,5,r.isSignedIn$))("ngIfElse",c)}}let Y=(()=>{class t{constructor(i,o,c){this.gql=i,this.route=o,this.viewerService=c,this.routeSub=this.route.params.subscribe(r=>{let z=this.gql.watch({evidenceId:+r.evidenceId}).valueChanges;this.loading$=z.pipe((0,p.j)("loading"),(0,T.O)(!0)),this.evidence$=z.pipe((0,p.j)("data","evidenceItem")),this.commentsTotal$=this.evidence$.pipe((0,p.j)("comments","totalCount")),this.flagsTotal$=this.evidence$.pipe((0,p.j)("flags","totalCount")),this.revisionsTotal$=this.evidence$.pipe((0,p.j)("revisions","totalCount"))})}ngOnInit(){this.isSignedIn$=this.viewerService.viewer$.pipe((0,E.U)(i=>i.signedIn))}ngOnDestroy(){this.routeSub.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(u.pHu),e.Y36(l.gz),e.Y36(g.a))},t.\u0275cmp=e.Xpm({type:t,selectors:[["cvc-evidence-revise"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"displayName","relationsTpl"],["evidenceRelations",""],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzType","civic:evidence"],[1,"content"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["nzDirection","horizontal"],["nz-typography","","class","label",4,"nzSpaceItem"],["class","tags",4,"nzSpaceItem"],["nz-typography","",1,"label"],[1,"tags"],[3,"routerLink"],[3,"gene"],[3,"variant"],["nzSpan","24","nzJustify","center"],["nz-col","","nzSpan","6"]],template:function(i,o){1&i&&(e.YNc(0,Q,15,7,"ng-container",0),e.ALo(1,"async")),2&i&&e.Q6J("ngIf",e.lcZ(1,1,o.evidence$))},directives:[a.O5,O.I,d.NU,d.$1,m.ZU,l.yS,h.H,A.I,y.$O,y.u9,I.Ls,y.u5,l.lC,v.SK,v.t3,F.u],pipes:[a.Ov,R.fM],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),t})();var $=n(7484),B=n(6559),W=n(3773),V=n(8390),j=n(4375),G=n(7008),K=n(1825),S=n(8776),X=n(6042),_=n(2359),x=n(4546),H=n(5109),M=n(4182),w=n(5743),k=n(5452),q=n(5457),ee=n(8006),te=n(7075),ne=n(7695),ie=n(7462),oe=n(3594),ae=n(3643),se=n(1135),L=n(7525),re=n(2789),ce=n(5932),de=n(3416),le=n(2480),ge=n(1830),pe=n(4581),me=n(5926),ve=n(5472);let ue=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[],imports:[[a.ez,l.Bz,M.UX,H.s,x.U5,_.L,v.Jb,X.sL,L.j,S.X0,K.A,G.B,j.R,ne.C,te.l,V.N,W.g,k.C,w.W,q.$,ee.I,ie.o,oe.q,ae.q,se.C,re.o,ce.A,de.g,le.r,ge.S,pe.e,me.J,ve.r]]}),t})(),fe=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[a.ez,R.WG,v.Jb,$.vh,B.H0,d.zf,ue]]}),t})();var P=n(6738),he=n(8929),C=n(7625),ye=n(6123),ze=n(6064),Te=n(9169),Ee=n(822);function Oe(t,s){1&t&&e.GkF(0)}function Me(t,s){1&t&&e.GkF(0)}function Ie(t,s){if(1&t&&(e.ynx(0),e.TgZ(1,"nz-form-item"),e._UZ(2,"cvc-form-errors-alert",6),e.qZA(),e.BQk()),2&t){const i=e.oxw(2);e.xp6(2),e.Q6J("errors",i.errorMessages)}}function Re(t,s){1&t&&(e.TgZ(0,"p"),e._uU(1,"View it on the "),e.TgZ(2,"a",10),e._uU(3,"Revisions Page"),e.qZA(),e._uU(4," or suggest another revision below."),e.qZA())}function xe(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"nz-alert",7),e.YNc(2,Re,5,0,"ng-template",8,9,e.W1O),e.BQk()),2&t){const i=e.MAs(3);e.xp6(1),e.Q6J("nzDescription",i)}}function Pe(t,s){if(1&t&&(e.YNc(0,Ie,3,1,"ng-container",5),e.YNc(1,xe,4,1,"ng-container",5)),2&t){const i=e.oxw();e.Q6J("ngIf",i.errorMessages.length>0),e.xp6(1),e.Q6J("ngIf",i.success)}}let Ce=(()=>{class t{constructor(i,o,c){this.suggestRevisionGQL=i,this.networkErrorService=o,this.revisableFieldsGQL=c,this.formGroup=new M.cw({}),this.formOptions={formState:new ze._},this.success=!1,this.errorMessages=[],this.loading=!1,this.suggestRevisionMutator=new ye.U(o),this.formFields=[{key:"fields",wrappers:["form-container"],templateOptions:{label:"Suggest Evidence Item Revision Form"},fieldGroup:[{key:"id",type:"input",hide:!0},{key:"variant",type:"multi-field",wrappers:["form-field"],templateOptions:{label:"Variant",addText:"Specify a Variant",maxCount:1},fieldArray:{type:"variant-input",templateOptions:{required:!0}}},{key:"description",type:"cvc-textarea",templateOptions:{label:"Evidence Statement",helpText:'Your original description of evidence from published literature detailing the association or lack of association between a variant and its predictive, prognostic, diagnostic, predisposing, functional or oncogenic value. Data constituting personal or identifying information should not be entered (e.g. <a href="https://www.hipaajournal.com/what-is-protected-health-information/" target="_blank">protected health information (PHI) as defined by HIPAA</a> in the U.S. and/or comparable laws in your jurisdiction).',placeholder:"No description provided",required:!0}},{key:"source",type:"multi-field",wrappers:["form-field"],templateOptions:{label:"Source",helpText:"CIViC accepts PubMed or ASCO Abstracts sources. Please provide the source of the support for your evidence here.",addText:"Specify a Source",maxCount:1},fieldArray:{type:"source-input",templateOptions:{required:!0}}},{key:"variantOrigin",type:"variant-origin-select",templateOptions:{required:!0}},{key:"evidenceType",type:"evidence-type-select",templateOptions:{required:!0}},{key:"clinicalSignificance",type:"clinical-significance-select",templateOptions:{required:!0}},{key:"disease",type:"disease-array",templateOptions:{maxCount:1}},{key:"evidenceLevel",type:"evidence-level-select",templateOptions:{required:!0}},{key:"evidenceDirection",type:"evidence-direction-select",templateOptions:{required:!0}},{key:"drugs",type:"drug-array"},{key:"drugInteractionType",type:"drug-interaction-select"},{key:"phenotypes",type:"phenotype-array"},{key:"evidenceRating",type:"rating-input",templateOptions:{label:"Rating",helpText:"Please rate your evidence on a scale of one to five stars. Use the star rating descriptions for guidance.",required:!0}},{key:"comment",type:"comment-textarea",templateOptions:{label:"Comment",helpText:"Please provide any additional comments you wish to make about this evidence item. This comment will appear as the first comment in this item's comment thread.",placeholder:"Please enter a comment describing your revision.",required:!0,minLength:10}},{key:"organization",type:"org-submit-button",templateOptions:{submitLabel:"Submit Evidence Item Revision",submitSize:"large"}}]}]}ngOnInit(){this.destroy$=new he.xQ}ngAfterViewInit(){this.revisableFieldsGQL.fetch({evidenceId:this.evidenceId}).subscribe(({data:{evidenceItem:i}})=>{i&&(this.formModel=this.toFormModel(i))},i=>{console.error("Error retrieving evidenceItem."),console.error(i)},()=>{this.formOptions.updateInitialValue&&this.formOptions.updateInitialValue(),this.formGroup.markAllAsTouched();const i=this.formGroup.get("fields.comment");i&&i.markAsUntouched()})}toFormModel(i){var o,c;return{fields:Object.assign(Object.assign({},i),{variant:[i.variant],source:[i.source],drugs:i.drugs.length>0?i.drugs:[],disease:[i.disease],comment:null===(o=this.formModel)||void 0===o?void 0:o.fields.comment,drugInteractionType:i.drugInteractionType,organization:null===(c=this.formModel)||void 0===c?void 0:c.fields.organization,evidenceRating:i.evidenceRating})}}submitRevision(i){let o=this.toRevisionInput(i);if(o){let c=this.suggestRevisionMutator.mutate(this.suggestRevisionGQL,{input:o});c.submitSuccess$.pipe((0,C.R)(this.destroy$)).subscribe(r=>{r&&(this.success=!0)}),c.submitError$.pipe((0,C.R)(this.destroy$)).subscribe(r=>{r&&(this.errorMessages=r,this.success=!1)}),c.isSubmitting$.pipe((0,C.R)(this.destroy$)).subscribe(r=>{this.loading=r})}}toRevisionInput(i){var o,c;if(i){const r=i.fields;return{id:r.id,comment:r.comment,fields:{variantOrigin:r.variantOrigin,description:P.xt(r.description),variantId:r.variant[0].id,sourceId:r.source[0].id,evidenceType:r.evidenceType,evidenceDirection:r.evidenceDirection,clinicalSignificance:r.clinicalSignificance,diseaseId:P.uP(null===(o=r.disease[0])||void 0===o?void 0:o.id),evidenceLevel:r.evidenceLevel,phenotypeIds:r.phenotypes.map(z=>z.id),rating:r.evidenceRating,drugIds:r.drugs.map(z=>z.id),drugInteractionType:P.uP(r.drugInteractionType)},organizationId:null===(c=i.fields.organization)||void 0===c?void 0:c.id}}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(u.Vj7),e.Y36(Te.Y),e.Y36(u.Q_P))},t.\u0275cmp=e.Xpm({type:t,selectors:[["cvc-evidence-revise-form"]],inputs:{evidenceId:"evidenceId"},decls:7,vars:8,consts:[["nzTip","Submitting",3,"nzSpinning"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[4,"ngTemplateOutlet"],[3,"form","fields","model","options","modelChange"],["formMessages",""],[4,"ngIf"],[3,"errors"],["nzType","success","nzMessage","Suggested Revision Submitted","nzShowIcon","",3,"nzDescription"],["nzSize","small"],["successMessage",""],["routerLink","../../revisions"]],template:function(i,o){if(1&i&&(e.TgZ(0,"nz-spin",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){return o.submitRevision(o.formModel)}),e.YNc(2,Oe,1,0,"ng-container",2),e.TgZ(3,"formly-form",3),e.NdJ("modelChange",function(r){return o.formModel=r}),e.qZA(),e.YNc(4,Me,1,0,"ng-container",2),e.qZA(),e.qZA(),e.YNc(5,Pe,2,2,"ng-template",null,4,e.W1O)),2&i){const c=e.MAs(6);e.Q6J("nzSpinning",o.loading),e.xp6(1),e.Q6J("formGroup",o.formGroup),e.xp6(1),e.Q6J("ngTemplateOutlet",c),e.xp6(1),e.Q6J("form",o.formGroup)("fields",o.formFields)("model",o.formModel)("options",o.formOptions),e.xp6(1),e.Q6J("ngTemplateOutlet",c)}},directives:[L.W,M._Y,M.JL,x.Lr,M.sg,a.tP,S.T7,a.O5,v.SK,x.Nx,Ee.V,_.r,l.yS],styles:[""]}),t})();function Ze(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"cvc-evidence-revise-form",2),e.BQk()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("evidenceId",i.evidenceId)}}function Ae(t,s){1&t&&e._uU(0,"Loading Evidence...")}const Se=[{path:"",component:Y,data:{breadcrumb:"Revise"},children:[{path:"",redirectTo:"suggest",pathMatch:"full"},{path:"suggest",component:(()=>{class t{constructor(i){this.route=i,this.routeParams$=this.route.params.subscribe(o=>{this.evidenceId=+o.evidenceId})}ngOnDestroy(){this.routeParams$.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(l.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["cvc-evidence-suggest"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loadingEvidence",""],[3,"evidenceId"]],template:function(i,o){if(1&i&&(e.YNc(0,Ze,2,1,"ng-container",0),e.YNc(1,Ae,1,0,"ng-template",null,1,e.W1O)),2&i){const c=e.MAs(2);e.Q6J("ngIf",o.evidenceId)("ngIfElse",c)}},directives:[a.O5,Ce],styles:[""]}),t})(),data:{breadcrumb:"Suggest Revision"}}]}];let _e=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.Bz.forChild(Se),fe],l.Bz]}),t})();var Le=n(5630),Fe=n(3309),Ue=n(4867),De=n(4623),Je=n(9386);let Ne=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[a.ez,_e,y.KJ,d.zf,I.PV,m.ZJ,d.zf,Fe.U,Ue.Q,Le.D,De.K,Je.a,R.WG,v.Jb]]}),t})()}}]);