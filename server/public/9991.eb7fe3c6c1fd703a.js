"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[9991],{28719:(j,u,e)=>{e.d(u,{r:()=>O});var z,T=e(31635),t=e(73664),d=e(71226),m=e(69145),l=e(49894),y=e(24608),v=e(2615),_=e(74222),f=e(41305),h=e(52096),E=e(72200),C=e(84341),g=e(50513),p=e(16389),I=e(25930),D=e(35154),M=e(1177),P=e(97685),B=e(21011),R=e(61774);const x=["confirmModal"];function L(a,r){if(1&a){const n=t.RV6();t.j41(0,"button",5),t.bIt("click",function(){v.eBV(n);const i=t.XpG(2);return v.Njj(i.moderate(i.evidenceStatuses.Accepted))}),t.EFF(1),t.k0s()}if(2&a){const n=t.XpG().ngrxLet,o=t.XpG();t.Y8G("nzTooltipTrigger",n.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==n.mostRecentOrg?null:n.mostRecentOrg.name)),t.R7$(),t.SpI(" Accept ",o.entityTypeDisplay," ")}}function S(a,r){if(1&a){const n=t.RV6();t.qex(0),t.j41(1,"nz-spin",2),t.DNE(2,L,2,3,"button",3),t.EFF(3," \xa0 "),t.j41(4,"button",4),t.bIt("click",function(){v.eBV(n);const i=t.XpG();return v.Njj(i.moderate(i.evidenceStatuses.Rejected))}),t.EFF(5),t.k0s()(),t.bVm()}if(2&a){const n=r.ngrxLet,o=t.XpG();t.R7$(),t.Y8G("nzSpinning",o.isSubmitting),t.R7$(),t.Y8G("ngIf",n.canModerate),t.R7$(2),t.Y8G("nzTooltipTrigger",n.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==n.mostRecentOrg?null:n.mostRecentOrg.name)),t.R7$(),t.SpI(" Reject ",o.entityTypeDisplay," ")}}function U(a,r){if(1&a&&(t.j41(0,"span",7),t.EFF(1),t.j41(2,"strong"),t.EFF(3),t.k0s(),t.EFF(4," ."),t.k0s()),2&a){const n=t.XpG(2).$implicit,o=t.XpG();t.R7$(),t.Lme(" You will be ",n.action.toLowerCase(),"ing this ",o.entityTypeDisplay," on behalf of "),t.R7$(2),t.SpI(" ",n.organization)}}function A(a,r){1&a&&t.DNE(0,U,5,3,"span",9)}function W(a,r){if(1&a){const n=t.RV6();t.j41(0,"textarea",11),t.mxI("ngModelChange",function(i){v.eBV(n);const s=t.XpG(3);return t.DH7(s.confirmationComment,i)||(s.confirmationComment=i),v.Njj(i)}),t.k0s()}if(2&a){const n=t.XpG(3);t.R50("ngModel",n.confirmationComment)}}function G(a,r){1&a&&t.DNE(0,W,1,1,"textarea",10)}function K(a,r){if(1&a&&(t.j41(0,"nz-space",6),t.nVh(1,A,1,0,"span",7),t.nVh(2,G,1,0,"textarea",8),t.k0s()),2&a){const n=r.$implicit;t.R7$(),t.vxM(n.organization?1:-1),t.R7$(),t.vxM("Reject"==n.action?2:-1)}}let O=(class F{constructor(r,n,o,i,s){this.revertEvidenceGQL=r,this.revertAssertionGQL=n,this.networkErrorService=o,this.viewerService=i,this.modal=s,this.onModerated=new t.bkB,this.evidenceStatuses=m.YSN,this.isSubmitting=!1,this.showConfirm=!1,this.moderateAssertionMutator=new d.E(this.networkErrorService),this.moderateEvidenceMutator=new d.E(this.networkErrorService),this.viewer$=this.viewerService.viewer$}ngOnInit(){if(void 0===this.entityId)throw new Error("Must pass in an id to the CvcEntitySubscriptionButtonComponent");if(void 0===this.entityType)throw new Error("Must pass in an entityType to the CvcEntitySubscriptionButtonComponent");this.entityTypeDisplay="EvidenceItem"===this.entityType?"Evidence Item":"Assertion",this.viewer$.pipe((0,y.E)("mostRecentOrg"),(0,l.s)(this)).subscribe(r=>this.mostRecentOrg=r)}moderate(r){const n=r.replace(/ED$/,""),o=n.charAt(0)+n.slice(1).toLowerCase();this.modal.confirm({nzTitle:`${o} This ${this.entityTypeDisplay}`,nzOkText:o,nzCancelText:"Cancel",nzContent:this.modalContents,nzData:{action:o,organization:this.mostRecentOrg?.name},nzOnOk:()=>{this.submit(r)}})}submit(r){let n;this.isSubmitting=!0,n="EvidenceItem"===this.entityType?this.moderateEvidenceMutator.mutate(this.revertEvidenceGQL,{input:{evidenceItemId:this.entityId,organizationId:this.mostRecentOrg?.id,newStatus:r,comment:this.confirmationComment}}):this.moderateAssertionMutator.mutate(this.revertAssertionGQL,{input:{assertionId:this.entityId,organizationId:this.mostRecentOrg?.id,newStatus:r,comment:this.confirmationComment}}),n.submitSuccess$.pipe((0,l.s)(this)).subscribe(o=>{o&&(this.isSubmitting=!1,this.showConfirm=!1,this.onModerated.emit(r))}),n.submitError$.pipe((0,l.s)(this)).subscribe(o=>{o&&(this.isSubmitting=!1,this.showConfirm=!1,this.onModerated.emit(o))}),n.isSubmitting$.pipe((0,l.s)(this)).subscribe(o=>{this.isSubmitting=o})}static#t=z=()=>(this.\u0275fac=function(n){return new(n||F)(t.rXU(m.m9R),t.rXU(m.mqi),t.rXU(_.N),t.rXU(f.q),t.rXU(h.N_))},this.\u0275cmp=t.VBU({type:F,selectors:[["cvc-moderate-entity-buttons"]],viewQuery:function(n,o){if(1&n&&t.GBs(x,5),2&n){let i;t.mGM(i=t.lsd())&&(o.modalContents=i.first)}},inputs:{entityType:"entityType",entityId:"entityId"},outputs:{onModerated:"onModerated"},standalone:!1,decls:3,vars:1,consts:[["confirmModal",""],[4,"ngrxLet"],[3,"nzSpinning"],["nzType","primary","nzSize","large","nz-button","","nz-tooltip","",3,"nzTooltipTrigger","nzTooltipTitle","click",4,"ngIf"],["nzDanger","","nzType","primary","nzSize","large","nz-button","","nz-tooltip","",3,"click","nzTooltipTrigger","nzTooltipTitle"],["nzType","primary","nzSize","large","nz-button","","nz-tooltip","",3,"click","nzTooltipTrigger","nzTooltipTitle"],["nzDirection","vertical"],["nz-typography",""],["nz-input","","rows","4","placeholder","Please provide a reason for rejection.",3,"ngModel"],["nz-typography","",4,"nzSpaceItem"],["nz-input","","rows","4","placeholder","Please provide a reason for rejection.",3,"ngModel","ngModelChange",4,"nzSpaceItem"],["nz-input","","rows","4","placeholder","Please provide a reason for rejection.",3,"ngModelChange","ngModel"]],template:function(n,o){1&n&&t.DNE(0,S,6,5,"ng-container",1)(1,K,3,2,"ng-template",null,0,t.C5r),2&n&&t.Y8G("ngrxLet",o.viewer$)},dependencies:[E.bT,C.me,C.BC,C.vS,g.a,p.c,I.p,D.LH,M.a,P.U5,P.Dq,B.Sy,R.Nj],styles:["[_nghost-%COMP%]{display:block}.center[_ngcontent-%COMP%]{display:flex;justify-content:center}"],changeDetection:0}),this)},z());O=(0,T.Cg)([(0,l.d)()],O)},40078:(j,u,e)=>{e.d(u,{U:()=>C});var T=e(72200),t=e(84341),d=e(50513),m=e(97529),l=e(97685),y=e(1177),v=e(35154),_=e(19448),f=e(21011),h=e(2615),E=e(73664);let C=(()=>{var g;class p{static#t=g=()=>(this.\u0275fac=function(M){return new(M||p)},this.\u0275mod=E.$C({type:p}),this.\u0275inj=h.G2t({imports:[T.MD,t.YN,t.X1,d.Z,v.Qt,y.V,l.pc,m.f3,_.g,f.j]}))}return g(),p})()},40590:(j,u,e)=>{e.d(u,{W:()=>C});var T=e(72200),t=e(50513),d=e(41951),m=e(35154),l=e(52096),y=e(1177),v=e(97685),_=e(84341),f=e(21011),h=e(2615),E=e(73664);let C=(()=>{var g;class p{static#t=g=()=>(this.\u0275fac=function(M){return new(M||p)},this.\u0275mod=E.$C({type:p}),this.\u0275inj=h.G2t({imports:[T.MD,_.YN,_.X1,t.Z,d.Y3,m.Qt,l.U6,f.j,y.V,v.pc]}))}return g(),p})()},81263:(j,u,e)=>{e.d(u,{L:()=>O});var z,T=e(31635),t=e(73664),d=e(71226),m=e(69145),l=e(49894),y=e(21413),v=e(24608),_=e(2615),f=e(74222),h=e(41305),E=e(84341),C=e(50513),g=e(16389),p=e(25930),I=e(41951),D=e(35154),M=e(52096),P=e(21011),B=e(1177),R=e(97685);function x(a,r){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&a){const n=t.XpG();t.R7$(),t.SpI("Revert this ",n.entityType," to Submitted?")}}function L(a,r){if(1&a&&(t.j41(0,"span",7),t.EFF(1),t.j41(2,"strong"),t.EFF(3),t.k0s(),t.EFF(4,". Please supply a reason below. "),t.k0s()),2&a){const n=t.XpG(3);t.R7$(),t.SpI(" You will be reverting this ",n.entityType," on behalf of "),t.R7$(2),t.SpI(" ",n.mostRecentOrg.name)}}function S(a,r){1&a&&t.DNE(0,L,5,2,"span",10)}function U(a,r){if(1&a&&(t.j41(0,"span",7),t.EFF(1),t.k0s()),2&a){const n=t.XpG(3);t.R7$(),t.SpI(" Please supply a reason for reverting this ",n.entityType," below. ")}}function A(a,r){1&a&&t.DNE(0,U,2,1,"span",10)}function W(a,r){if(1&a){const n=t.RV6();t.j41(0,"textarea",11),t.mxI("ngModelChange",function(i){_.eBV(n);const s=t.XpG(2);return t.DH7(s.revertComment,i)||(s.revertComment=i),_.Njj(i)}),t.EFF(1,"      "),t.k0s()}if(2&a){const n=t.XpG(2);t.R50("ngModel",n.revertComment)}}function G(a,r){if(1&a){const n=t.RV6();t.j41(0,"span",12)(1,"button",13),t.bIt("click",function(){_.eBV(n);const i=t.XpG(2);return _.Njj(i.revert())}),t.EFF(2," Revert "),t.k0s(),t.EFF(3," \xa0 "),t.j41(4,"button",14),t.bIt("click",function(){_.eBV(n);const i=t.XpG(2);return _.Njj(i.showConfirm=!1)}),t.EFF(5," Cancel "),t.k0s()()}if(2&a){const n=t.XpG(2);t.R7$(),t.Y8G("disabled",!n.revertComment||n.revertComment.length<10)("nzTooltipTrigger",n.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==n.mostRecentOrg?null:n.mostRecentOrg.name))}}function K(a,r){if(1&a&&(t.j41(0,"nz-spin",5)(1,"nz-space",6),t.nVh(2,S,1,0,"span",7)(3,A,1,0,"span",7),t.DNE(4,W,2,1,"textarea",8)(5,G,6,3,"span",9),t.k0s()()),2&a){const n=t.XpG();t.Y8G("nzSpinning",n.isSubmitting),t.R7$(2),t.vxM(n.mostRecentOrg?2:3)}}let O=(class b{constructor(r,n,o,i){this.revertEvidenceGQL=r,this.revertAssertionGQL=n,this.networkErrorService=o,this.viewerService=i,this.onReverted=new t.bkB,this.isSubmitting=!1,this.showConfirm=!1,this.destroy$=new y.B,this.revertAssertionMutator=new d.E(this.networkErrorService),this.revertEvidenceMutator=new d.E(this.networkErrorService),this.viewer$=this.viewerService.viewer$}revert(){let r;this.isSubmitting=!0,r="EvidenceItem"===this.entityType?this.revertEvidenceMutator.mutate(this.revertEvidenceGQL,{input:{evidenceItemId:this.entityId,organizationId:this.mostRecentOrg?.id,newStatus:m.YSN.Submitted,comment:this.revertComment}}):this.revertAssertionMutator.mutate(this.revertAssertionGQL,{input:{assertionId:this.entityId,organizationId:this.mostRecentOrg?.id,newStatus:m.YSN.Submitted,comment:this.revertComment}}),r.submitSuccess$.pipe((0,l.s)(this)).subscribe(n=>{n&&(this.isSubmitting=!1,this.showConfirm=!1,this.onReverted.emit(!0))}),r.submitError$.pipe((0,l.s)(this)).subscribe(n=>{n&&(this.isSubmitting=!1,this.showConfirm=!1,this.onReverted.emit(n))}),r.isSubmitting$.pipe((0,l.s)(this)).subscribe(n=>{this.isSubmitting=n})}handleConfirmModalCancel(){this.showConfirm=!1}ngOnInit(){if(void 0===this.entityId)throw new Error("Must pass in an id to the CvcEntitySubscriptionButtonComponent");if(void 0===this.entityType)throw new Error("Must pass in an entityType to the CvcEntitySubscriptionButtonComponent");this.viewer$.pipe((0,v.E)("mostRecentOrg"),(0,l.s)(this)).subscribe(r=>this.mostRecentOrg=r)}static#t=z=()=>(this.\u0275fac=function(n){return new(n||b)(t.rXU(m.m9R),t.rXU(m.mqi),t.rXU(f.N),t.rXU(h.q))},this.\u0275cmp=t.VBU({type:b,selectors:[["cvc-revert-entity-button"]],inputs:{entityType:"entityType",entityId:"entityId"},outputs:{onReverted:"onReverted"},standalone:!1,decls:7,vars:5,consts:[["confirmModalTitle",""],["confirmModalContent",""],["nz-button","","nz-tooltip","Revert to Submitted","nzSize","small",3,"click","nzLoading"],["nz-icon","","nzType","undo"],[3,"nzVisibleChange","nzOnCancel","nzVisible","nzContent","nzTitle","nzFooter"],[3,"nzSpinning"],["nzDirection","vertical"],["nz-typography",""],["nz-input","","rows","4","placeholder","Please provide a reason for reverting.",3,"ngModel","ngModelChange",4,"nzSpaceItem"],["class","modal-footer-buttons",4,"nzSpaceItem"],["nz-typography","",4,"nzSpaceItem"],["nz-input","","rows","4","placeholder","Please provide a reason for reverting.",3,"ngModelChange","ngModel"],[1,"modal-footer-buttons"],["nzType","primary","nz-button","","nz-tooltip","",3,"click","disabled","nzTooltipTrigger","nzTooltipTitle"],["nz-button","",3,"click"]],template:function(n,o){if(1&n){const i=t.RV6();t.j41(0,"button",2),t.bIt("click",function(){return _.eBV(i),_.Njj(o.showConfirm=!0)}),t.nrm(1,"i",3),t.k0s(),t.j41(2,"nz-modal",4),t.mxI("nzVisibleChange",function(c){return _.eBV(i),t.DH7(o.showConfirm,c)||(o.showConfirm=c),_.Njj(c)}),t.bIt("nzOnCancel",function(){return _.eBV(i),_.Njj(o.handleConfirmModalCancel())}),t.DNE(3,x,2,1,"ng-template",null,0,t.C5r),t.k0s(),t.DNE(5,K,6,2,"ng-template",null,1,t.C5r)}if(2&n){const i=t.sdS(4),s=t.sdS(6);t.Y8G("nzLoading",o.isSubmitting),t.R7$(2),t.R50("nzVisible",o.showConfirm),t.Y8G("nzContent",s)("nzTitle",i)("nzFooter",null)}},dependencies:[E.me,E.BC,E.vS,C.a,g.c,p.p,I.Dn,D.LH,M.F2,P.Sy,B.a,R.U5,R.Dq],styles:["[_nghost-%COMP%]{display:block}.modal-footer-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),this)},z());O=(0,T.Cg)([(0,l.d)()],O)},86073:(j,u,e)=>{e.d(u,{h:()=>r});var T=e(40505),t=e(73664),d=e(72200),m=e(38132),l=e(41951),y=e(75699),v=e(1236),_=e(96354),f=e(5964),h=e(69199),E=e(69145),C=e(25703),g=e(62e3),p=e(47679),I=e(61774),D=e(83075);function M(n,o){if(1&n&&(t.nrm(0,"i",7),t.nI1(1,"entityColor"),t.EFF(2)),2&n){const i=t.XpG().ngIf;t.Y8G("nzTwotoneColor",t.bMT(1,2,"VariantType")),t.R7$(2),t.SpI(" ",i.name," ")}}function P(n,o){if(1&n&&(t.j41(0,"cvc-link-tag",9),t.EFF(1),t.k0s()),2&n){const i=t.XpG(2).ngIf;t.Y8G("href",i.url),t.R7$(),t.SpI(" ",i.soid," ")}}function B(n,o){if(1&n&&t.DNE(0,P,2,2,"cvc-link-tag",8),2&n){const i=t.XpG().ngIf;t.Y8G("ngIf","N/A"!=i.soid)}}function R(n,o){if(1&n&&(t.qex(0),t.j41(1,"nz-card",4),t.DNE(2,M,3,4,"ng-template",null,0,t.C5r)(4,B,1,1,"ng-template",null,1,t.C5r),t.j41(6,"nz-descriptions",5)(7,"nz-descriptions-item",6),t.EFF(8),t.k0s()()(),t.bVm()),2&n){const i=o.ngIf,s=t.sdS(3),c=t.sdS(5);t.R7$(),t.Y8G("nzTitle",s)("nzExtra",c),t.R7$(5),t.Y8G("nzColumn",2),t.R7$(2),t.SpI(" ",i.variantCount," ")}}let z=(()=>{var n;class o{constructor(s){this.gql=s}ngOnInit(){if(null==this.variantTypeId)throw new Error("cvc-variant-type-popover requires valid variantTypeId input.");this.variantType$=this.gql.watch({variantTypeId:this.variantTypeId}).valueChanges.pipe((0,_.T)(({data:s})=>s?.variantTypePopover),(0,f.p)(h.kP))}static#t=n=()=>(this.\u0275fac=function(c){return new(c||o)(t.rXU(E.l_P))},this.\u0275cmp=t.VBU({type:o,selectors:[["cvc-variant-type-popover"]],inputs:{variantTypeId:"variantTypeId"},standalone:!1,decls:3,vars:3,consts:[["cardTitle",""],["linkout",""],["id","popover-content"],[4,"ngIf"],["nzBordered","false","id","card-content",3,"nzTitle","nzExtra"],["nzSize","small","nzBordered","true",3,"nzColumn"],["nzTitle","Variants","nzSpan","2"],["nz-icon","","nzTheme","twotone","nzType","civic-varianttype",3,"nzTwotoneColor"],["tooltip","View on SequenceOntology.org",3,"href",4,"ngIf"],["tooltip","View on SequenceOntology.org",3,"href"]],template:function(c,V){1&c&&(t.j41(0,"div",2),t.DNE(1,R,9,4,"ng-container",3),t.nI1(2,"ngrxPush"),t.k0s()),2&c&&(t.R7$(),t.Y8G("ngIf",t.bMT(2,1,V.variantType$)))},dependencies:[d.bT,l.Dn,C.cK,g.xA,g.gr,p.a,I.L9,D.R],styles:["[_nghost-%COMP%]{display:block;margin:-8px -12px}[_nghost-%COMP%]     .ant-card-body{padding:0;margin-top:1px}[_nghost-%COMP%]     .ant-descriptions-view{border:none;border-top:1px solid #f0f0f0}.popover-text[_ngcontent-%COMP%]{width:100%;padding:8px;border-bottom:1px solid #f0f0f0}#popover-content[_ngcontent-%COMP%]{max-width:500px;max-height:700px;overflow:auto}"]}))}return n(),o})();function x(n,o){}function L(n,o){if(1&n&&(t.qex(0),t.j41(1,"a",6),t.DNE(2,x,0,0,"ng-template",7),t.k0s(),t.bVm()),2&n){const i=t.XpG(),s=t.sdS(2);t.R7$(),t.Y8G("routerLink",i.variantType.link),t.R7$(),t.Y8G("ngTemplateOutlet",s)}}function S(n,o){}function U(n,o){if(1&n&&t.nrm(0,"cvc-variant-type-popover",9),2&n){const i=t.XpG(2);t.Y8G("variantTypeId",i.variantType.id)}}function A(n,o){if(1&n&&(t.j41(0,"nz-tag",8),t.DNE(1,S,0,0,"ng-template",7),t.k0s(),t.DNE(2,U,1,1,"ng-template",null,4,t.C5r)),2&n){const i=t.sdS(3),s=t.XpG(),c=t.sdS(8);t.Y8G("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",s.enablePopover?i:void 0),t.R7$(),t.Y8G("ngTemplateOutlet",c)}}function W(n,o){}function G(n,o){if(1&n&&t.DNE(0,W,0,0,"ng-template",7),2&n){t.XpG();const i=t.sdS(2);t.Y8G("ngTemplateOutlet",i)}}function K(n,o){}function O(n,o){if(1&n&&(t.j41(0,"nz-tag"),t.DNE(1,K,0,0,"ng-template",7),t.k0s()),2&n){t.XpG();const i=t.sdS(8);t.R7$(),t.Y8G("ngTemplateOutlet",i)}}function a(n,o){if(1&n&&(t.nrm(0,"i",10),t.EFF(1)),2&n){const i=t.XpG();t.Y8G("nzTwotoneColor",i.iconColor),t.R7$(),t.SpI(" ",i.variantType.name,"\n")}}let r=(()=>{var n;class o{set variantType(s){if(!s)throw new Error("variant-type-tag variantType Input requires LinkableVariantType.");this._variantType=s}get variantType(){return this._variantType}idFunction(){return this.variantType.id}constructor(){this.linked=!0,this.enablePopover=!0,this.iconColor=(0,T.P)("VariantType")}static#t=n=()=>(this.\u0275fac=function(c){return new(c||o)},this.\u0275cmp=t.VBU({type:o,selectors:[["cvc-variant-type-tag"]],inputs:{variantType:"variantType",linked:"linked",enablePopover:"enablePopover"},standalone:!1,decls:9,vars:2,consts:[["tag",""],["unlinked",""],["noPopover",""],["tagContent",""],["variantTypePopover",""],[4,"ngIf","ngIfElse"],[3,"routerLink"],[3,"ngTemplateOutlet"],["nz-popover","",3,"nzPopoverMouseEnterDelay","nzPopoverContent"],[3,"variantTypeId"],["nz-icon","","nzType","civic-varianttype","nzTheme","twotone",3,"nzTwotoneColor"]],template:function(c,V){if(1&c&&t.DNE(0,L,3,2,"ng-container",5)(1,A,4,3,"ng-template",null,0,t.C5r)(3,G,1,1,"ng-template",null,1,t.C5r)(5,O,2,1,"ng-template",null,2,t.C5r)(7,a,2,2,"ng-template",null,3,t.C5r),2&c){const $=t.sdS(4);t.Y8G("ngIf",V.linked)("ngIfElse",$)}},dependencies:[d.bT,d.T3,m.Wk,l.Dn,y.s,v.L_,z],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}))}return n(),o})()}}]);