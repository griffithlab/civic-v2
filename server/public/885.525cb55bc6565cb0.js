"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[885],{8616:(D,V,e)=>{e.d(V,{u:()=>n});var s=e(5e3),h=e(685),x=e(1912),t=e(3618),M=e(647);function T(c,y){1&c&&(s.TgZ(0,"span"),s._uU(1," You must be logged in to view this page. "),s.qZA())}function v(c,y){1&c&&s._UZ(0,"cvc-login-button")}function g(c,y){1&c&&(s.TgZ(0,"nz-typography",4),s._UZ(1,"i",5),s.qZA())}let n=(()=>{class c{}return c.\u0275fac=function(_){return new(_||c)},c.\u0275cmp=s.Xpm({type:c,selectors:[["cvc-login-prompt"]],decls:7,vars:3,consts:[[3,"nzNotFoundImage","nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["emptyImage",""],["nzType","secondary"],["nz-icon","","nzType","login","nzTheme","outline",2,"font-size","50pt"]],template:function(_,S){if(1&_&&(s.TgZ(0,"nz-empty",0),s.YNc(1,T,2,0,"ng-template",null,1,s.W1O),s.YNc(3,v,1,0,"ng-template",null,2,s.W1O),s.qZA(),s.YNc(5,g,2,0,"ng-template",null,3,s.W1O)),2&_){const P=s.MAs(2),C=s.MAs(4),I=s.MAs(6);s.Q6J("nzNotFoundImage",I)("nzNotFoundContent",P)("nzNotFoundFooter",C)}},directives:[h.p9,x.s,t.ZU,M.Ls],styles:["[_nghost-%COMP%]{display:inline-block}"]}),c})()},9386:(D,V,e)=>{e.d(V,{a:()=>v});var s=e(9808),h=e(1844),x=e(685),t=e(647),M=e(3618),T=e(5e3);let v=(()=>{class g{}return g.\u0275fac=function(c){return new(c||g)},g.\u0275mod=T.oAB({type:g}),g.\u0275inj=T.cJS({imports:[[s.ez,h.B,x.Xo,t.PV,M.ZJ]]}),g})()},4181:(D,V,e)=>{e.d(V,{O:()=>q});var s=e(9808),h=e(6123),x=e(8776),t=e(8929),M=e(591),T=e(373),v=e(4850),g=e(7625),n=e(5e3),c=e(712),y=e(9169),_=e(8054),S=e(4182),P=e(8664),C=e(822),I=e(6042),U=e(2643),$=e(2683),E=e(647),N=e(6949),O=e(8926);function Y(i,m){if(1&i&&(n.TgZ(0,"nz-option",6),n._UZ(1,"span",7),n.ALo(2,"highlightTypeahead"),n.qZA()),2&i){const a=m.$implicit,l=n.oxw(2);n.Q6J("nzValue",a.variant),n.xp6(1),n.Q6J("innerHtml",n.xi3(2,2,a.label,l.to.searchString),n.oJD)}}function G(i,m){1&i&&n._uU(0," No variant found in CIViC that matches the string provided. ")}function J(i,m){if(1&i){const a=n.EpF();n.ynx(0),n.TgZ(1,"nz-select",3),n.NdJ("nzOnSearch",function(p){return n.CHM(a),n.oxw().to.onSearch(p)}),n.YNc(2,Y,3,5,"nz-option",4),n.ALo(3,"ngrxPush"),n.qZA(),n.YNc(4,G,1,0,"ng-template",null,5,n.W1O),n.BQk()}if(2&i){const a=n.MAs(5),l=n.oxw(),p=n.MAs(4);n.xp6(1),n.Q6J("formControl",l.formControl)("formlyAttributes",l.field)("nzPlaceHolder",l.to.placeholder?l.to.placeholder:null)("nzDropdownRender",l.to.allowCreate?p:null)("nzNotFoundContent",a)("nzShowArrow",l.to.showArrow),n.xp6(1),n.Q6J("ngForOf",n.lcZ(3,7,l.variants$))}}function B(i,m){if(1&i&&n._UZ(0,"cvc-variant-tag",8),2&i){const a=n.oxw();n.Q6J("variant",a.formControl.value)}}function w(i,m){if(1&i&&n._UZ(0,"cvc-form-errors-alert",12),2&i){const a=n.oxw(4);n.Q6J("errors",a.errorMessages)}}function R(i,m){if(1&i){const a=n.EpF();n.TgZ(0,"button",13),n.NdJ("click",function(){n.CHM(a);const p=n.oxw(4);return p.addVariant(p.to.searchString)}),n._UZ(1,"i",14),n._uU(2,"No Existing CIViC Variant\xa0"),n.TgZ(3,"strong"),n._uU(4),n.qZA(),n._uU(5,"\xa0found. Create A New Variant? "),n.qZA()}if(2&i){const a=n.oxw(4);n.Q6J("nzLoading",a.loading),n.xp6(4),n.Oqu(a.to.searchString)}}function W(i,m){if(1&i&&(n.ynx(0),n.YNc(1,w,1,1,"cvc-form-errors-alert",10),n.YNc(2,R,6,2,"button",11),n.BQk()),2&i){const a=n.oxw(3);n.xp6(1),n.Q6J("ngIf",a.errorMessages.length>0),n.xp6(1),n.Q6J("ngIf",0==a.errorMessages.length)}}function K(i,m){if(1&i&&(n.ynx(0),n.YNc(1,W,3,2,"ng-container",9),n.BQk()),2&i){const a=n.oxw(2);n.xp6(1),n.Q6J("ngIf",""!==a.to.searchString)}}function j(i,m){if(1&i&&(n.YNc(0,K,2,1,"ng-container",9),n.ALo(1,"ngrxPush")),2&i){const a=n.oxw();n.Q6J("ngIf",n.lcZ(1,1,a.displayAdd$))}}const X={name:"variant-input",component:(()=>{class i extends x.fS{constructor(a,l,p){super(),this.variantTypeaheadQuery=a,this.networkErrorService=l,this.addVariantGQL=p,this.destroy$=new t.xQ,this.success=!1,this.errorMessages=[],this.loading=!1,this.displayAdd$=new M.X(!1),this.addVariantMutator=new h.U(l),this.defaultOptions={templateOptions:{placeholder:"Search Variants",showArrow:!1,onSearch:()=>{},minLengthSearch:1,optionList:[],allowCreate:!0},expressionProperties:{"templateOptions.geneId":(A,nt,Z)=>{var L,F;let b=null===(F=null===(L=null==Z?void 0:Z.parent)||void 0===L?void 0:L.parent)||void 0===F?void 0:F.model;if(b&&b.gene&&b.gene[0])return b.gene[0].id}}}}ngOnInit(){this.queryRef=this.variantTypeaheadQuery.watch({name:"zzzz"}),this.variants$=this.queryRef.valueChanges.pipe((0,T.j)("data","variants","nodes"),(0,v.U)(a=>a.map(p=>({value:p.id,label:p.name,variant:p}))))}ngAfterViewInit(){this.to.onSearch=a=>{a.length<this.to.minLengthSearch||(this.to.searchString=a,this.errorMessages=[],this.queryRef.refetch({name:a,geneId:this.to.geneId}).then(l=>{this.displayAdd$.next(0==l.data.variants.nodes.filter(p=>p.name.toUpperCase()==a.toUpperCase()).length)}))}}addVariant(a){if(a&&""!=a&&this.to.geneId){let l=this.addVariantMutator.mutate(this.addVariantGQL,{name:a,geneId:this.to.geneId},{},p=>{var A;null===(A=this.field.formControl)||void 0===A||A.setValue({id:p.addVariant.variant.id,name:p.addVariant.variant.name}),this.to.searchString="",this.to.searchLength=0});l.submitSuccess$.pipe((0,g.R)(this.destroy$)).subscribe(p=>{p&&(this.success=!0)}),l.submitError$.pipe((0,g.R)(this.destroy$)).subscribe(p=>{p&&(this.errorMessages=p,this.success=!1)}),l.isSubmitting$.pipe((0,g.R)(this.destroy$)).subscribe(p=>{this.loading=p})}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.displayAdd$.complete()}}return i.\u0275fac=function(a){return new(a||i)(n.Y36(c._eC),n.Y36(y.Y),n.Y36(c.LUc))},i.\u0275cmp=n.Xpm({type:i,selectors:[["cvc-variant-input-type"]],features:[n.qOj],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["variantListItem",""],["addVariantTmpl",""],["nzShowSearch","","nzServerSearch","",3,"formControl","formlyAttributes","nzPlaceHolder","nzDropdownRender","nzNotFoundContent","nzShowArrow","nzOnSearch"],["nzCustomContent","",3,"nzValue",4,"ngFor","ngForOf"],["sourceLoader",""],["nzCustomContent","",3,"nzValue"],[3,"innerHtml"],[3,"variant"],[4,"ngIf"],[3,"errors",4,"ngIf"],["nz-button","","nzSize","small",3,"nzLoading","click",4,"ngIf"],[3,"errors"],["nz-button","","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","plus","nzTheme","outline"]],template:function(a,l){if(1&a&&(n.YNc(0,J,6,9,"ng-container",0),n.YNc(1,B,1,1,"ng-template",null,1,n.W1O),n.YNc(3,j,2,3,"ng-template",null,2,n.W1O)),2&a){const p=n.MAs(2);n.Q6J("ngIf",!(null!=l.formControl.value&&l.formControl.value.id))("ngIfElse",p)}},directives:[s.O5,_.Vq,S.JJ,S.oH,x.VQ,s.sg,_.Ip,P.I,C.V,I.ix,U.dQ,$.w,E.Ls],pipes:[N.fM,O.A],styles:[""],changeDetection:0}),i})()};var H=e(4867),Q=e(7008),k=e(9444);let q=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[s.ez,S.UX,N.WG,x.X0.forChild({types:[X]}),_.LV,I.sL,E.PV,H.Q,Q.B,k.s]]}),i})()},885:(D,V,e)=>{e.r(V),e.d(V,{VariantGroupsAddModule:()=>it});var s=e(9808),h=e(325),x=e(4850),t=e(5e3),M=e(9350),T=e(8992),v=e(1945),g=e(647),n=e(1894),c=e(8616),y=e(6949);function _(o,d){1&o&&(t.TgZ(0,"div"),t._UZ(1,"router-outlet"),t.qZA())}function S(o,d){1&o&&(t.TgZ(0,"nz-row",7),t.TgZ(1,"div",8),t._UZ(2,"cvc-login-prompt"),t.qZA(),t.qZA())}let P=(()=>{class o{constructor(r){this.viewerService=r}ngOnInit(){this.isSignedIn$=this.viewerService.viewer$.pipe((0,x.U)(r=>r.signedIn))}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(M.a))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-variant-groups-add-view"]],decls:13,vars:4,consts:[["displayName","New"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzType","civic:evidence"],[1,"content"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["nzSpan","24","nzJustify","center"],["nz-col","","nzSpan","6"]],template:function(r,u){if(1&r&&(t._UZ(0,"cvc-section-navigation",0),t.TgZ(1,"nz-page-header",1),t.TgZ(2,"nz-page-header-title",2),t._UZ(3,"i",3),t._uU(4," Add New Variant Group "),t.qZA(),t.TgZ(5,"nz-page-header-subtitle"),t._uU(6," Submit and review new Variant Groups "),t.qZA(),t.TgZ(7,"nz-page-header-content"),t.TgZ(8,"div",4),t.YNc(9,_,2,0,"div",5),t.ALo(10,"ngrxPush"),t.YNc(11,S,3,0,"ng-template",null,6,t.W1O),t.qZA(),t.qZA(),t.qZA()),2&r){const f=t.MAs(12);t.xp6(9),t.Q6J("ngIf",t.lcZ(10,2,u.isSignedIn$))("ngIfElse",f)}},directives:[T.I,v.$O,v.u9,g.Ls,v.yG,v.u5,s.O5,h.lC,n.SK,n.t3,c.u],pipes:[y.fM],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),o})();var C=e(8776),I=e(7462),U=e(4181),$=e(8390),E=e(8979),N=e(4623),O=e(4182),Y=e(5109),G=e(4546),J=e(2359),B=e(6042),w=e(7525),R=e(7008),W=e(5472),K=e(3773),j=e(3022),tt=e(4889);let X=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[s.ez,O.UX,h.Bz,C.X0,G.U5,J.L,n.Jb,B.sL,w.j,C.X0,I.o,U.O,$.N,E.N,N.K,R.B,W.r,K.g,U.O,j.e,tt.E,Y.s]]}),o})(),H=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[s.ez,X]]}),o})();var Q=e(3077),k=e(6123),q=e(8929),i=e(7625),m=e(712),a=e(9169),l=e(822);function p(o,d){1&o&&t.GkF(0)}function A(o,d){if(1&o){const r=t.EpF();t.TgZ(0,"formly-form",4),t.NdJ("modelChange",function(f){return t.CHM(r),t.oxw().formModel=f}),t.qZA()}if(2&o){const r=t.oxw();t.Q6J("form",r.formGroup)("fields",r.formFields)("model",r.formModel)}}function nt(o,d){if(1&o&&(t.TgZ(0,"nz-form-item"),t._UZ(1,"cvc-form-errors-alert",6),t.qZA()),2&o){const r=t.oxw(2);t.xp6(1),t.Q6J("errors",r.errorMessages)}}function Z(o,d){if(1&o&&(t.TgZ(0,"p"),t._uU(1,"View "),t.TgZ(2,"a",10),t._uU(3,"its details"),t.qZA(),t._uU(4,"."),t.qZA()),2&o){const r=t.oxw(3);t.xp6(2),t.MGl("routerLink","/variant-groups/",r.newId,"/summary")}}function L(o,d){if(1&o&&(t.ynx(0),t._UZ(1,"nz-alert",7),t.YNc(2,Z,5,1,"ng-template",8,9,t.W1O),t.BQk()),2&o){const r=t.MAs(3);t.xp6(1),t.Q6J("nzDescription",r)}}function F(o,d){if(1&o&&(t.YNc(0,nt,2,1,"nz-form-item",5),t.YNc(1,L,4,1,"ng-container",5)),2&o){const r=t.oxw();t.Q6J("ngIf",r.errorMessages.length>0),t.xp6(1),t.Q6J("ngIf",r.success)}}let b=(()=>{class o{constructor(r,u){this.submitVariantGroupGQL=r,this.networkErrorService=u,this.destroy$=new q.xQ,this.formGroup=new O.cw({}),this.success=!1,this.errorMessages=[],this.loading=!1,this.submitVariantGroupMutator=new k.U(u),this.formFields=[{key:"fields",wrappers:["form-container"],templateOptions:{label:"Add Variant Group Form"},fieldGroup:[{key:"name",type:"input",wrappers:["form-field"],templateOptions:{label:"Variant Group Name",required:!0}},{key:"description",type:"cvc-textarea",templateOptions:{label:"Description",helpText:"A brief description of this new variant group.",placeholder:"No description provided",required:!0}},{key:"sources",type:"multi-field",wrappers:["form-field"],templateOptions:{label:"Source",helpText:"Add any sources upon which your description depends.",addText:"Add a Source"},fieldArray:{type:"source-input",templateOptions:{hideLabel:!0,required:!0}}},{key:"variants",type:"multi-field",wrappers:["form-field"],templateOptions:{label:"Variants",required:!0,helpText:"Specify the variants that comprise this Variant Group.",addText:"Add a Variant "},fieldArray:{type:"variant-input",templateOptions:{hideLabel:!0,required:!0,allowCreate:!1}}},{key:"comment",type:"comment-textarea",templateOptions:{label:"Comment",helpText:"Please provide any additional comments you wish to make about this evidence item. This comment will appear as the first comment in this item's comment thread.",placeholder:"Please enter a comment describing your revision.",required:!0,minLength:10}},{key:"cancel",type:"cancel-button"},{key:"organization",type:"org-submit-button",templateOptions:{submitLabel:"Create Variant Group",submitSize:"large"}}]}]}submitVariantGroup(r){let u=this.toSubmitInput(r);if(u){let f=this.submitVariantGroupMutator.mutate(this.submitVariantGroupGQL,{input:u},{},z=>{this.newId=z.submitVariantGroup.variantGroup.id});f.submitSuccess$.pipe((0,i.R)(this.destroy$)).subscribe(z=>{z&&(this.success=!0)}),f.submitError$.pipe((0,i.R)(this.destroy$)).subscribe(z=>{z&&(this.errorMessages=z,this.success=!1)}),f.isSubmitting$.pipe((0,i.R)(this.destroy$)).subscribe(z=>{this.loading=z})}}toSubmitInput(r){var u;if(r)return{description:r.fields.description,name:r.fields.name,organizationId:null===(u=r.fields.organization)||void 0===u?void 0:u.id,sourceIds:r.fields.sources?r.fields.sources.map(f=>f.id).filter(Q.$):[],variantIds:r.fields.variants.map(f=>f.id).filter(Q.$)}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(m.tji),t.Y36(a.Y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-variant-group-submit-form"]],decls:5,vars:3,consts:[["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[4,"ngTemplateOutlet"],[3,"form","fields","model","modelChange",4,"ngIf"],["formMessages",""],[3,"form","fields","model","modelChange"],[4,"ngIf"],[3,"errors"],["nzType","success","nzMessage","Variant Group Submitted","nzShowIcon","",3,"nzDescription"],["nzSize","small"],["successMessage",""],[3,"routerLink"]],template:function(r,u){if(1&r&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return u.submitVariantGroup(u.formModel)}),t.YNc(1,p,1,0,"ng-container",1),t.YNc(2,A,1,3,"formly-form",2),t.qZA(),t.YNc(3,F,2,2,"ng-template",null,3,t.W1O)),2&r){const f=t.MAs(4);t.Q6J("formGroup",u.formGroup),t.xp6(1),t.Q6J("ngTemplateOutlet",f),t.xp6(1),t.Q6J("ngIf",!u.success)}},directives:[O._Y,O.JL,G.Lr,O.sg,s.tP,s.O5,C.T7,n.SK,G.Nx,l.V,J.r,h.yS],styles:[""]}),o})();const et=[{path:"",component:P,children:[{path:"",redirectTo:"submit",pathMatch:"full"},{path:"submit",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-variant-groups-submit-page"]],decls:1,vars:0,template:function(r,u){1&r&&t._UZ(0,"cvc-variant-group-submit-form")},directives:[b],styles:[""]}),o})(),data:{breadcrumb:"Submit New Variant Groups"}}]}];let ot=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[h.Bz.forChild(et),H],h.Bz]}),o})();var rt=e(9386),at=e(5630);let it=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[s.ez,ot,v.KJ,g.PV,at.D,rt.a,n.Jb,y.WG]]}),o})()}}]);