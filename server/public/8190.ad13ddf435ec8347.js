"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[8190],{7948:(nn,j,i)=>{i.d(j,{m:()=>K});var e=i(5e3),s=i(9808),x=i(125),t=i(9297),n=i(3193),u=i(8664),R=i(9810),Q=i(9001),J=i(2826),Y=i(5749),w=i(8481),F=i(647);function P(m,U){if(1&m&&(e.ynx(0),e._UZ(1,"span",2),e.BQk()),2&m){const L=e.oxw().$implicit;e.xp6(1),e.Q6J("innerHtml",L.text,e.oJD)}}function N(m,U){if(1&m&&(e.ynx(0),e._UZ(1,"cvc-user-tag",3),e.BQk()),2&m){const L=e.oxw().$implicit;e.xp6(1),e.Q6J("user",L)}}const $=function(m,U){return{id:m,name:U}};function G(m,U){if(1&m&&(e.TgZ(0,"span"),e._UZ(1,"cvc-revision-tag",6),e.qZA()),2&m){const L=e.oxw(2).$implicit;e.xp6(1),e.Q6J("revision",e.WLB(1,$,L.entityId,L.displayName))}}function C(m,U){if(1&m&&(e.TgZ(0,"span"),e._UZ(1,"cvc-gene-tag",7),e.qZA()),2&m){const L=e.oxw(2).$implicit;e.xp6(1),e.Q6J("gene",e.WLB(1,$,L.entityId,L.displayName))}}function I(m,U){if(1&m&&(e.TgZ(0,"span"),e._UZ(1,"cvc-variant-tag",8),e.qZA()),2&m){const L=e.oxw(2).$implicit;e.xp6(1),e.Q6J("variant",e.WLB(1,$,L.entityId,L.displayName))}}function p(m,U){if(1&m&&(e.TgZ(0,"span"),e._UZ(1,"cvc-variant-group-tag",9),e.qZA()),2&m){const L=e.oxw(2).$implicit;e.xp6(1),e.Q6J("variantgroup",e.WLB(1,$,L.entityId,L.displayName))}}const f=function(m,U,L){return{id:m,name:U,status:L}};function z(m,U){if(1&m&&(e.TgZ(0,"span"),e._UZ(1,"cvc-evidence-tag",10),e.qZA()),2&m){const L=e.oxw(2).$implicit;e.xp6(1),e.Q6J("evidence",e.kEZ(1,f,L.entityId,L.displayName,L.status))}}function S(m,U){if(1&m&&(e.TgZ(0,"span"),e._UZ(1,"cvc-assertion-tag",11),e.qZA()),2&m){const L=e.oxw(2).$implicit;e.xp6(1),e.Q6J("assertion",e.kEZ(1,f,L.entityId,L.displayName,L.status))}}function y(m,U){if(1&m&&(e.TgZ(0,"span"),e._UZ(1,"cvc-organization-tag",12),e.qZA()),2&m){const L=e.oxw(2).$implicit;e.xp6(1),e.Q6J("org",e.WLB(1,$,L.entityId,L.displayName))}}function b(m,U){if(1&m&&(e.TgZ(0,"span"),e.TgZ(1,"nz-tag"),e._UZ(2,"i",13),e._uU(3),e.qZA(),e.qZA()),2&m){const L=e.oxw(2).$implicit;e.xp6(2),e.MGl("nzType","civic-",L.displayName.slice(0,-1),""),e.xp6(1),e.hij(" ",L.displayName,"")}}function V(m,U){if(1&m&&(e.ynx(0),e.ynx(1,4),e.YNc(2,G,2,4,"span",5),e.YNc(3,C,2,4,"span",5),e.YNc(4,I,2,4,"span",5),e.YNc(5,p,2,4,"span",5),e.YNc(6,z,2,5,"span",5),e.YNc(7,S,2,5,"span",5),e.YNc(8,y,2,4,"span",5),e.YNc(9,b,4,2,"span",5),e.BQk(),e.BQk()),2&m){const L=e.oxw().$implicit;e.xp6(1),e.Q6J("ngSwitch",L.tagType),e.xp6(1),e.Q6J("ngSwitchCase","REVISION"),e.xp6(1),e.Q6J("ngSwitchCase","GENE"),e.xp6(1),e.Q6J("ngSwitchCase","VARIANT"),e.xp6(1),e.Q6J("ngSwitchCase","VARIANT_GROUP"),e.xp6(1),e.Q6J("ngSwitchCase","EVIDENCE_ITEM"),e.xp6(1),e.Q6J("ngSwitchCase","ASSERTION"),e.xp6(1),e.Q6J("ngSwitchCase","ORGANIZATION"),e.xp6(1),e.Q6J("ngSwitchCase","ROLE")}}function O(m,U){if(1&m&&(e.ynx(0),e.YNc(1,P,2,1,"ng-container",1),e.YNc(2,N,2,1,"ng-container",1),e.YNc(3,V,10,9,"ng-container",1),e.BQk()),2&m){const L=U.$implicit;e.xp6(1),e.Q6J("ngIf","CommentTextSegment"==L.__typename),e.xp6(1),e.Q6J("ngIf","User"==L.__typename),e.xp6(1),e.Q6J("ngIf","CommentTagSegment"==L.__typename)}}let K=(()=>{class m{ngOnInit(){if(void 0===this.commentBodySegments)throw new Error("Must pass a list of comment body segments into comment body component.")}}return m.\u0275fac=function(L){return new(L||m)},m.\u0275cmp=e.Xpm({type:m,selectors:[["cvc-comment-body"]],inputs:{commentBodySegments:"commentBodySegments"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"innerHtml"],[3,"user"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"revision"],[3,"gene"],[3,"variant"],[3,"variantgroup"],[3,"evidence"],[3,"assertion"],[3,"org"],["nz-icon","","nzTheme","twotone","nzTwotoneColor","#A0D8F5",3,"nzType"]],template:function(L,E){1&L&&e.YNc(0,O,4,3,"ng-container",0),2&L&&e.Q6J("ngForOf",E.commentBodySegments)},directives:[s.sg,s.O5,x.I,s.RF,s.n9,t.p,n.H,u.I,R.u,Q.O,J.w,Y.m,w.j,F.Ls],styles:[""]}),m})()},3801:(nn,j,i)=>{i.d(j,{D:()=>An});var e=i(712),s=i(4850),x=i(373),t=i(5e3),n=i(9808),u=i(1894),R=i(8144),Q=i(7484),J=i(3762),Y=i(6042),w=i(2683),F=i(1344),P=i(6699),N=i(7948),$=i(8625);function G(T,W){if(1&T&&t._UZ(0,"nz-avatar",4),2&T){const g=t.oxw();t.Q6J("nzSrc",g.comment.commenter.profileImagePath)}}function C(T,W){1&T&&t._UZ(0,"nz-avatar",5)}let I=(()=>{class T{ngOnInit(){if(void 0===this.comment)throw new Error("Must pass a comment into comment display component.")}}return T.\u0275fac=function(g){return new(g||T)},T.\u0275cmp=t.Xpm({type:T,selectors:[["cvc-comment-display"]],inputs:{comment:"comment"},decls:7,vars:7,consts:[[3,"nzAuthor","nzDatetime"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],[3,"commentBodySegments"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","","nzIcon","civic:curator"]],template:function(g,M){if(1&g&&(t.TgZ(0,"nz-comment",0),t.ALo(1,"timeago"),t.YNc(2,G,1,1,"nz-avatar",1),t.YNc(3,C,1,0,"ng-template",null,2,t.W1O),t.TgZ(5,"nz-comment-content"),t._UZ(6,"cvc-comment-body",3),t.qZA(),t.qZA()),2&g){const D=t.MAs(4);t.Q6J("nzAuthor",M.comment.commenter.displayName)("nzDatetime",t.lcZ(1,5,M.comment.createdAt)),t.xp6(2),t.Q6J("ngIf",M.comment.commenter.profileImagePath)("ngIfElse",D),t.xp6(4),t.Q6J("commentBodySegments",M.comment.parsedComment)}},directives:[F.WE,n.O5,P.Dz,F.DA,F.Y4,N.m],pipes:[$.wr],styles:[""]}),T})();var p=i(8929),f=i(7625),z=i(6123),S=i(9350),y=i(9169),b=i(2359),V=i(4182),O=i(4546),K=i(822),m=i(9383),U=i(7525),L=i(9180),E=i(8227),H=i(2643),A=i(1793);function X(T,W){if(1&T){const g=t.EpF();t.TgZ(0,"nz-alert",7),t.NdJ("nzOnClose",function(){return t.CHM(g),t.oxw().onSuccessBannerClose()}),t.qZA()}}function tn(T,W){if(1&T&&(t.TgZ(0,"nz-form-item"),t._UZ(1,"cvc-form-errors-alert",8),t.qZA()),2&T){const g=t.oxw();t.xp6(1),t.Q6J("errors",g.errorMessages)}}let cn=(()=>{class T{constructor(g,M,D){this.viewerService=g,this.addCommentGql=M,this.networkErrorService=D,this.commentAddedEvent=new t.vpe,this.destroy$=new p.xQ,this.success=!1,this.errorMessages=[],this.loading=!1,this.viewerService.viewer$.pipe((0,f.R)(this.destroy$)).subscribe(en=>{this.organizations=en.organizations,this.mostRecentOrg=en.mostRecentOrg}),this.addCommentMutator=new z.U(D)}selectOrg(g){this.mostRecentOrg=g}submitComment(){if(this.commentText){this.errorMessages=[];let M=this.addCommentMutator.mutate(this.addCommentGql,{input:{body:this.commentText,subject:this.subject,organizationId:void 0===this.mostRecentOrg?void 0:this.mostRecentOrg.id}});M.submitSuccess$.pipe((0,f.R)(this.destroy$)).subscribe(D=>{D&&(this.resetForm(),this.success=!0)}),M.submitError$.pipe((0,f.R)(this.destroy$)).subscribe(D=>{D&&(this.errorMessages=D,this.success=!1)}),M.isSubmitting$.pipe((0,f.R)(this.destroy$)).subscribe(D=>{this.loading=D})}}resetForm(){this.commentText="",this.commentAddedEvent.emit()}onSuccessBannerClose(){this.resetForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return T.\u0275fac=function(g){return new(g||T)(t.Y36(S.a),t.Y36(e.iGM),t.Y36(y.Y))},T.\u0275cmp=t.Xpm({type:T,selectors:[["cvc-comment-add-form"]],inputs:{subject:"subject"},outputs:{commentAddedEvent:"commentAddedEvent"},decls:12,vars:6,consts:[["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[4,"ngIf"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[3,"selectedOrg","selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"],["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose"],[3,"errors"]],template:function(g,M){1&g&&(t.TgZ(0,"nz-card"),t.YNc(1,X,1,0,"nz-alert",0),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return M.submitComment()}),t.YNc(3,tn,2,1,"nz-form-item",2),t.TgZ(4,"cvc-comment-input-form",3),t.NdJ("commentChange",function(en){return M.commentText=en}),t.qZA(),t.TgZ(5,"nz-spin",4),t.TgZ(6,"nz-form-item"),t.TgZ(7,"nz-form-control"),t.TgZ(8,"cvc-form-buttons"),t.TgZ(9,"cvc-org-selector-btn-group",5),t.NdJ("selectedOrgChange",function(en){return M.mostRecentOrg=en}),t.TgZ(10,"button",6),t._uU(11," Add Comment "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&g&&(t.xp6(1),t.Q6J("ngIf",M.success),t.xp6(2),t.Q6J("ngIf",M.errorMessages.length>0),t.xp6(1),t.Q6J("comment",M.commentText),t.xp6(1),t.Q6J("nzSpinning",M.loading),t.xp6(4),t.Q6J("selectedOrg",M.mostRecentOrg),t.xp6(1),t.Q6J("disabled",M.loading||!(void 0!==M.commentText&&M.commentText.length>=10)))},directives:[Q.bd,n.O5,b.r,V._Y,V.JL,V.F,O.Lr,u.SK,O.Nx,K.V,m.b,U.W,u.t3,O.Fd,L.Z,E.q,Y.ix,H.dQ,A.m,w.w],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2}),T})();var rn=i(8747),_n=i(647),ln=i(6949),k=i(9058);function on(T,W){if(1&T){const g=t.EpF();t.TgZ(0,"div",18),t.TgZ(1,"button",19),t.NdJ("click",function(){t.CHM(g);const D=t.oxw().ngIf;return t.oxw(3).onLoadMore(D.startCursor)}),t._uU(2,"Load older comments "),t.qZA(),t.qZA()}}function an(T,W){if(1&T&&(t.TgZ(0,"nz-list-header"),t.YNc(1,on,3,0,"div",17),t.qZA()),2&T){const g=W.ngIf;t.xp6(1),t.Q6J("ngIf",g.hasPreviousPage)}}function dn(T,W){if(1&T&&(t.TgZ(0,"nz-list-item"),t._UZ(1,"cvc-comment-display",20),t.qZA()),2&T){const g=W.$implicit;t.xp6(1),t.Q6J("comment",g)}}function un(T,W){if(1&T&&(t.TgZ(0,"nz-card",13),t.TgZ(1,"nz-list",14),t.ALo(2,"ngrxPush"),t.ALo(3,"ngrxPush"),t.YNc(4,an,2,1,"nz-list-header",15),t.ALo(5,"ngrxPush"),t.YNc(6,dn,2,1,"ng-template",null,16,t.W1O),t.qZA(),t.qZA()),2&T){const g=t.MAs(7),M=t.oxw(2);t.xp6(1),t.Q6J("nzDataSource",t.lcZ(2,4,M.comments$))("nzLoading",t.lcZ(3,6,M.loading$))("nzRenderItem",g),t.xp6(3),t.Q6J("ngIf",t.lcZ(5,8,M.pageInfo$))}}function vn(T,W){if(1&T){const g=t.EpF();t.TgZ(0,"cvc-comment-add-form",21),t.NdJ("commentAddedEvent",function(){return t.CHM(g),t.oxw(2).refreshList()}),t.qZA()}if(2&T){const g=t.oxw(2);t.Q6J("subject",g.commentable)}}function fn(T,W){if(1&T&&t._UZ(0,"nz-avatar",24),2&T){const g=t.oxw().$implicit;t.Q6J("nzSrc",g.profileImagePath)}}function Cn(T,W){if(1&T&&(t._UZ(0,"nz-avatar",25),t.ALo(1,"uppercase")),2&T){const g=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,g.displayName.charAt(0)))}}function zn(T,W){if(1&T&&(t.YNc(0,fn,1,1,"nz-avatar",22),t.YNc(1,Cn,2,3,"ng-template",null,23,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&T){const g=W.$implicit,M=t.MAs(2);t.Q6J("ngIf",g.profileImagePath)("ngIfElse",M),t.xp6(4),t.Oqu(g.displayName)}}function Tn(T,W){if(1&T&&t._UZ(0,"nz-avatar",24),2&T){const g=t.oxw().$implicit;t.Q6J("nzSrc",g.profileImagePath)}}function pn(T,W){if(1&T&&(t._UZ(0,"nz-avatar",25),t.ALo(1,"uppercase")),2&T){const g=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,g.displayName.charAt(0)))}}function gn(T,W){if(1&T&&(t.YNc(0,Tn,1,1,"nz-avatar",22),t.YNc(1,pn,2,3,"ng-template",null,23,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&T){const g=W.$implicit,M=t.MAs(2);t.Q6J("ngIf",g.profileImagePath)("ngIfElse",M),t.xp6(4),t.Oqu(g.displayName)}}function xn(T,W){if(1&T&&(t._UZ(0,"nz-avatar",26),t.TgZ(1,"span"),t._uU(2),t.qZA()),2&T){const g=W.$implicit;t.MGl("nzIcon","civic-",g.tag.displayName,""),t.xp6(2),t.hij("",g.tag.displayName,"s")}}function hn(T,W){if(1&T&&(t._UZ(0,"i",27),t.ALo(1,"iconNameForSubscribableEntity"),t.TgZ(2,"span"),t._uU(3),t.qZA()),2&T){const g=W.$implicit;t.Q6J("nzType",t.lcZ(1,2,g.tag.tagType)),t.xp6(3),t.Oqu(g.tag.displayName)}}function mn(T,W){if(1&T){const g=t.EpF();t.ynx(0),t.TgZ(1,"nz-row",2),t.TgZ(2,"nz-col",3),t.TgZ(3,"nz-space",4),t.YNc(4,un,8,10,"nz-card",5),t.YNc(5,vn,1,1,"cvc-comment-add-form",6),t.qZA(),t.qZA(),t.TgZ(6,"nz-col",7),t.TgZ(7,"cvc-participant-list",8),t.NdJ("participantSelectedEvent",function(D){return t.CHM(g),t.oxw().onCommenterSelected(D)}),t.ALo(8,"ngrxPush"),t.YNc(9,zn,5,3,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(11,"cvc-participant-list",10),t.NdJ("participantSelectedEvent",function(D){return t.CHM(g),t.oxw().onMentionedUserSelected(D)}),t.ALo(12,"ngrxPush"),t.YNc(13,gn,5,3,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(15,"cvc-participant-list",11),t.NdJ("participantSelectedEvent",function(D){return t.CHM(g),t.oxw().onMentionedRoleSelected(D)}),t.ALo(16,"ngrxPush"),t.YNc(17,xn,3,2,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(19,"cvc-participant-list",12),t.NdJ("participantSelectedEvent",function(D){return t.CHM(g),t.oxw().onMentionedEntitySelected(D)}),t.ALo(20,"ngrxPush"),t.YNc(21,hn,4,4,"ng-template",null,9,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&T){const g=t.oxw();t.xp6(1),t.Q6J("nzGutter",16),t.xp6(6),t.Q6J("participantList",t.lcZ(8,5,g.commenters$)),t.xp6(4),t.Q6J("participantList",t.lcZ(12,7,g.mentionedUsers$)),t.xp6(4),t.Q6J("participantList",t.lcZ(16,9,g.mentionedRoles$)),t.xp6(4),t.Q6J("participantList",t.lcZ(20,11,g.mentionedEntities$))}}function yn(T,W){if(1&T){const g=t.EpF();t.TgZ(0,"cvc-comment-add-form",21),t.NdJ("commentAddedEvent",function(){return t.CHM(g),t.oxw().refreshList()}),t.qZA()}if(2&T){const g=t.oxw();t.Q6J("subject",g.commentable)}}let An=(()=>{class T{constructor(g){this.gql=g,this.pageSize=5}ngOnInit(){this.queryRef$=this.gql.watch({subject:this.commentable,last:this.pageSize,sortBy:{column:e.h01.Created,direction:e.SrV.Asc}});let g=this.queryRef$.valueChanges;this.pageInfo$=g.pipe((0,s.U)(({data:M})=>M.comments.pageInfo)),this.loading$=g.pipe((0,s.U)(({loading:M})=>M)),this.comments$=g.pipe((0,s.U)(({data:M})=>M.comments.edges.map(D=>D.node))),this.commenters$=g.pipe((0,s.U)(({data:M})=>M.comments.uniqueCommenters)),this.mentionedUsers$=g.pipe((0,s.U)(({data:M})=>M.comments.mentionedUsers)),this.mentionedRoles$=g.pipe((0,s.U)(({data:M})=>M.comments.mentionedRoles.map(D=>({id:`${D.entityId}-${D.tagType}`,tag:D})))),this.mentionedEntities$=g.pipe((0,s.U)(({data:M})=>M.comments.mentionedEntities.map(D=>({id:`${D.entityId}-${D.tagType}`,tag:D})))),this.unfilteredCount$=g.pipe((0,x.j)("data","comments","unfilteredCountForSubject"))}onLoadMore(g){this.queryRef$.fetchMore({variables:{last:this.pageSize,before:g}})}onCommenterSelected(g){this.queryRef$.refetch({originatingUserId:null==g?void 0:g.id})}onMentionedUserSelected(g){this.queryRef$.refetch({mentionedUserId:null==g?void 0:g.id})}onMentionedRoleSelected(g){if(g){let M=e.i44[g.tag.displayName[0].toUpperCase()+g.tag.displayName.slice(1)];this.queryRef$.refetch({mentionedRole:M})}else this.queryRef$.refetch({mentionedRole:void 0})}onMentionedEntitySelected(g){this.queryRef$.refetch(g?{mentionedEntity:{entityType:g.tag.tagType,id:g.tag.entityId}}:{mentionedEntity:void 0})}refreshList(){this.queryRef$.refetch()}}return T.\u0275fac=function(g){return new(g||T)(t.Y36(e.iST))},T.\u0275cmp=t.Xpm({type:T,selectors:[["cvc-comment-list"]],inputs:{commentable:"commentable"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noComments",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical",2,"width","100%"],["nzTitle","Comments",4,"nzSpaceItem"],["id","addComment",3,"subject","commentAddedEvent",4,"nzSpaceItem"],["nzSpan","6"],["listTitle","Commenters",3,"participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Mentioned Users",3,"participantList","participantSelectedEvent"],["listTitle","Mentioned Roles",3,"participantList","participantSelectedEvent"],["listTitle","Mentioned Entities",3,"participantList","participantSelectedEvent"],["nzTitle","Comments"],["nzSize","small","nzItemLayout","horizontal",3,"nzDataSource","nzLoading","nzRenderItem"],[4,"ngIf"],["comment",""],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","link","nzSize","small","nzBlock","",3,"click"],[3,"comment"],["id","addComment",3,"subject","commentAddedEvent"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],[3,"nzIcon"],["nz-icon","",3,"nzType"]],template:function(g,M){if(1&g&&(t.YNc(0,mn,23,13,"ng-container",0),t.ALo(1,"ngrxPush"),t.YNc(2,yn,1,1,"ng-template",null,1,t.W1O)),2&g){const D=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,M.unfilteredCount$))("ngIfElse",D)}},directives:[n.O5,u.SK,u.t3,R.NU,R.$1,Q.bd,J.n_,J.t4,Y.ix,w.w,J.AA,I,cn,rn.l,P.Dz,_n.Ls],pipes:[ln.fM,n.gd,k.j],styles:["[_nghost-%COMP%]{display:block}nz-list-header[_ngcontent-%COMP%]{padding:0;margin:0}nz-list-header[_ngcontent-%COMP%]   [nz-list-load-more][_ngcontent-%COMP%]{margin-top:-.5em;padding-bottom:.5em}"]}),T})()},2278:(nn,j,i)=>{i.d(j,{l:()=>H});var e=i(9808),s=i(1894),x=i(7484),t=i(3762),n=i(6699),u=i(8144),R=i(6949),Q=i(6559),J=i(1150),Y=i(1344),w=i(8625),F=i(7026),P=i(8909),N=i(5e3);let $=(()=>{class A{}return A.\u0275fac=function(tn){return new(tn||A)},A.\u0275mod=N.oAB({type:A}),A.\u0275inj=N.cJS({imports:[[e.ez,Y.YM,n.Rt,w.$L.forChild({formatter:{useClass:F.x,provide:w.KP}}),P.m]]}),A})();var G=i(4182),C=i(8776),I=i(4546),p=i(7008),f=i(1825),z=i(4375),S=i(6042),y=i(4623),b=i(868),V=i(7525),O=i(4921),K=i(4509),m=i(2359);let U=(()=>{class A{}return A.\u0275fac=function(tn){return new(tn||A)},A.\u0275mod=N.oAB({type:A}),A.\u0275inj=N.cJS({imports:[[e.ez,G.UX,R.WG,S.sL,x.vh,b.we,I.U5,V.j,O.Gl,m.L,G.u5,C.X0,p.B,f.A,z.R,P.m,y.K,K.w]]}),A})();var L=i(647),E=i(9444);let H=(()=>{class A{}return A.\u0275fac=function(tn){return new(tn||A)},A.\u0275mod=N.oAB({type:A}),A.\u0275inj=N.cJS({imports:[[e.ez,R.WG,S.sL,s.Jb,x.vh,t.Ph,L.PV,E.s,n.Rt,u.zf,Q.H0,U,J.N,$]]}),A})()},7036:(nn,j,i)=>{i.d(j,{L:()=>pt});var e=i(712),s=i(373),x=i(4850),t=i(5e3),n=i(9808),u=i(1894),R=i(8144),Q=i(8929),J=i(7625),Y=i(9350),w=i(2359),F=i(7484),P=i(7948),N=i(5737),$=i(6123),G=i(9169),C=i(6949),I=i(404),p=i(6042),f=i(2643),z=i(2683),S=i(3610),y=i(647),b=i(4182),V=i(4546),O=i(9383),K=i(7525),m=i(9180),U=i(8227),L=i(1793);function E(r,v){if(1&r){const c=t.EpF();t.TgZ(0,"nz-alert",4),t.NdJ("nzOnClose",function(){return t.CHM(c),t.oxw().onSuccessBannerClose()}),t.qZA()}}function H(r,v){}function A(r,v){1&r&&t.YNc(0,H,0,0,"ng-template")}function X(r,v){if(1&r&&(t.ynx(0),t.YNc(1,A,1,0,void 0,9),t.BQk()),2&r){t.oxw(2);const c=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",c)}}function tn(r,v){if(1&r&&(t.ynx(0),t.YNc(1,X,2,1,"ng-container",5),t.BQk()),2&r){const c=t.oxw().ngrxLet,d=t.MAs(5),Z=t.oxw();t.xp6(1),t.Q6J("ngIf",c.isEditor||c.isAdmin||Z.flag.flaggingUser.id===c.id)("ngIfElse",d)}}function cn(r,v){}function rn(r,v){1&r&&t.YNc(0,cn,0,0,"ng-template")}function _n(r,v){if(1&r&&(t.TgZ(0,"span",10),t.YNc(1,rn,1,0,void 0,9),t.qZA()),2&r){t.oxw();const c=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",c)}}function ln(r,v){}function k(r,v){1&r&&t.YNc(0,ln,0,0,"ng-template")}function on(r,v){if(1&r&&(t.TgZ(0,"span",11),t.YNc(1,k,1,0,void 0,9),t.qZA()),2&r){t.oxw();const c=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",c)}}function an(r,v){if(1&r){const c=t.EpF();t.TgZ(0,"button",13),t.NdJ("nzPopoverVisibleChange",function(Z){return t.CHM(c),t.oxw(3).flagResolvePopoverVisible=Z})("click",function(){t.CHM(c);const Z=t.oxw(3);return Z.flagResolvePopoverVisible=!Z.flagResolvePopoverVisible}),t._uU(1," Resolve Flag "),t._UZ(2,"i",14),t.qZA()}if(2&r){const c=t.oxw(2).ngrxLet,d=t.oxw(),Z=t.MAs(3),q=t.MAs(5);t.Q6J("nzPopoverTitle",Z)("nzPopoverVisible",d.flagResolvePopoverVisible)("nzPopoverContent",q)("nzPopoverTrigger",void 0)("disabled",!c.signedIn||c.isCurator&&d.flag.flaggingUser.id!=c.id)}}function dn(r,v){if(1&r&&t.YNc(0,an,3,5,"button",12),2&r){const c=t.oxw(2);t.Q6J("ngIf",!c.success)}}function un(r,v){if(1&r&&(t.ynx(0),t.YNc(1,tn,2,2,"ng-container",5),t.YNc(2,_n,2,1,"ng-template",null,6,t.W1O),t.YNc(4,on,2,1,"ng-template",null,7,t.W1O),t.YNc(6,dn,1,1,"ng-template",null,8,t.W1O),t.BQk()),2&r){const c=v.ngrxLet,d=t.MAs(3);t.xp6(1),t.Q6J("ngIf",c.signedIn)("ngIfElse",d)}}const vn=function(){return{float:"right"}};function fn(r,v){if(1&r){const c=t.EpF();t._uU(0," Resolve Flag "),t.TgZ(1,"span",15),t.TgZ(2,"i",16),t.NdJ("click",function(){t.CHM(c);const Z=t.oxw();return Z.flagResolvePopoverVisible=!1,Z.errorMessages=[]}),t.qZA(),t.qZA()}2&r&&(t.xp6(1),t.Q6J("ngStyle",t.DdM(1,vn)))}function Cn(r,v){if(1&r&&t._UZ(0,"nz-alert",25),2&r){t.oxw();const c=t.MAs(2);t.Q6J("nzDescription",c)}}function zn(r,v){if(1&r&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&r){const c=v.$implicit;t.xp6(1),t.hij(" ",c," ")}}function Tn(r,v){if(1&r&&(t.TgZ(0,"ul"),t.YNc(1,zn,2,1,"li",26),t.qZA()),2&r){const c=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",c.errorMessages)}}function pn(r,v){if(1&r){const c=t.EpF();t.YNc(0,Cn,1,1,"nz-alert",17),t.YNc(1,Tn,2,1,"ng-template",null,18,t.W1O),t.TgZ(3,"nz-card",19),t.TgZ(4,"form",20),t.NdJ("ngSubmit",function(){return t.CHM(c),t.oxw().resolveFlag()}),t.TgZ(5,"cvc-comment-input-form",21),t.NdJ("commentChange",function(Z){return t.CHM(c),t.oxw().comment=Z}),t.qZA(),t.TgZ(6,"nz-spin",22),t.TgZ(7,"nz-form-item"),t.TgZ(8,"nz-form-control"),t.TgZ(9,"cvc-form-buttons"),t.TgZ(10,"cvc-org-selector-btn-group",23),t.NdJ("selectedOrgChange",function(Z){return t.CHM(c),t.oxw().onOrgSelected(Z)}),t.TgZ(11,"button",24),t._uU(12," Resolve "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const c=t.oxw();t.Q6J("ngIf",c.errorMessages.length>0),t.xp6(5),t.Q6J("comment",c.comment),t.xp6(1),t.Q6J("nzSpinning",c.loading),t.xp6(5),t.Q6J("disabled",!(void 0!==c.comment&&c.comment.length>=10))}}let gn=(()=>{class r{constructor(c,d,Z){this.gql=c,this.viewerService=d,this.networkErrorService=Z,this.errorMessages=[],this.loading=!1,this.success=!1,this.flagResolvePopoverVisible=!1,this.destroy$=new Q.xQ,this.resolveFlagMutator=new $.U(Z)}ngOnInit(){if(void 0===this.flag)throw new Error("Must pass a Flag in to resolve component.");this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(c=>{this.selectedOrg=c.mostRecentOrg})}onOrgSelected(c){this.selectedOrg=c}resolveFlag(){var c;if(this.comment){this.errorMessages=[];let d=this.resolveFlagMutator.mutate(this.gql,{input:{id:this.flag.id,comment:this.comment,organizationId:null===(c=this.selectedOrg)||void 0===c?void 0:c.id}});d.submitSuccess$.pipe((0,J.R)(this.destroy$)).subscribe(Z=>{Z&&(this.flagResolvePopoverVisible=!1,this.success=!0,this.flagResolvedCallback&&this.flagResolvedCallback())}),d.submitError$.pipe((0,J.R)(this.destroy$)).subscribe(Z=>{Z.length>0&&(this.success=!1,this.errorMessages=Z)}),d.isSubmitting$.pipe((0,J.R)(this.destroy$)).subscribe(Z=>{this.loading=Z})}}onSuccessBannerClose(){this.success=!1,this.flagResolvedCallback&&this.flagResolvedCallback()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return r.\u0275fac=function(c){return new(c||r)(t.Y36(e.EwB),t.Y36(Y.a),t.Y36(G.Y))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cvc-flag-resolve-form"]],inputs:{flag:"flag",flagResolvedCallback:"flagResolvedCallback"},decls:6,vars:2,consts:[["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],[4,"ngrxLet"],["flagResolvePopoverTitleTemplate",""],["flagResolvePopoverContentTemplate",""],["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["noPermissions",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to resolve flag."],["nz-tooltip","","nzTooltipTitle","If you are not an editor, you can only resolve flags you opened."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click",4,"ngIf"],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click"],["nz-icon","","nzType","caret-down","nzTheme","outline"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription",4,"ngIf"],["errorContents",""],["nzType","inner",2,"width","300px"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[3,"selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription"],[4,"ngFor","ngForOf"]],template:function(c,d){1&c&&(t.YNc(0,E,1,0,"nz-alert",0),t.YNc(1,un,8,2,"ng-container",1),t.YNc(2,fn,3,2,"ng-template",null,2,t.W1O),t.YNc(4,pn,13,4,"ng-template",null,3,t.W1O)),2&c&&(t.Q6J("ngIf",d.success),t.xp6(1),t.Q6J("ngrxLet",d.viewer$))},directives:[n.O5,w.r,C.eJ,n.tP,I.SY,p.ix,f.dQ,z.w,S.lU,y.Ls,n.PC,n.sg,F.bd,b._Y,b.JL,b.F,V.Lr,O.b,K.W,u.SK,V.Nx,u.t3,V.Fd,m.Z,U.q,L.m],styles:[""]}),r})();var xn=i(3618),hn=i(125),mn=i(4590),yn=i(685),An=i(8625);function T(r,v){if(1&r){const c=t.EpF();t.TgZ(0,"nz-alert",5),t.NdJ("nzOnClose",function(){const q=t.CHM(c).$implicit;return t.oxw().onErrorBannerClose(q)}),t.qZA()}2&r&&t.Q6J("nzMessage",v.$implicit)}function W(r,v){if(1&r){const c=t.EpF();t.TgZ(0,"nz-alert",6),t.NdJ("nzOnClose",function(){return t.CHM(c),t.oxw().onSuccessBannerClose()}),t.qZA()}if(2&r){const c=t.oxw();t.MGl("nzMessage","Revision(s) successfully ",c.success,".")}}function g(r,v){if(1&r&&t._UZ(0,"cvc-comment-body",15),2&r){const c=t.oxw(2).$implicit;t.Q6J("commentBodySegments",c.openComment.parsedComment)}}function M(r,v){if(1&r&&(t.ynx(0),t._UZ(1,"cvc-flag-resolve-form",16),t.BQk()),2&r){const c=t.oxw(2).$implicit,d=t.oxw(2);t.xp6(1),t.Q6J("flag",c)("flagResolvedCallback",d.flagResolvedCallback)}}function D(r,v){if(1&r&&(t.ynx(0),t._UZ(1,"cvc-comment-body",15),t.BQk()),2&r){const c=t.oxw(3).$implicit;t.xp6(1),t.Q6J("commentBodySegments",c.resolutionComment.parsedComment)}}function en(r,v){if(1&r&&t._UZ(0,"cvc-user-tag",21),2&r){const c=t.oxw(3).$implicit;t.Q6J("user",c.resolvingUser)}}function On(r,v){if(1&r&&(t.TgZ(0,"nz-row"),t.TgZ(1,"nz-col",17),t.YNc(2,D,2,1,"ng-container",18),t.qZA(),t.TgZ(3,"nz-col",19),t._uU(4," Resolved By "),t.YNc(5,en,1,1,"cvc-user-tag",20),t._uU(6),t.ALo(7,"timeago"),t.qZA(),t.qZA()),2&r){const c=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngIf",c.resolutionComment),t.xp6(3),t.Q6J("ngIf",void 0!==c.resolvingUser),t.xp6(1),t.hij(" ",t.lcZ(7,3,c.resolvedAt)," ")}}function En(r,v){if(1&r&&(t._UZ(0,"i",22),t._uU(1)),2&r){const c=t.oxw(2).$implicit;t.xp6(1),t.hij(" FID",c.id," ")}}function Mn(r,v){if(1&r&&(t.TgZ(0,"span"),t.TgZ(1,"span",26),t._uU(2,"Flagged By"),t.qZA(),t._UZ(3,"cvc-user-tag",21),t.TgZ(4,"span",26),t._uU(5),t.ALo(6,"timeago"),t.qZA(),t.qZA()),2&r){const c=t.oxw(3).$implicit;t.xp6(3),t.Q6J("user",c.flaggingUser),t.xp6(2),t.Oqu(t.lcZ(6,2,c.createdAt))}}function Ln(r,v){if(1&r&&t._UZ(0,"cvc-status-tag",27),2&r){const c=t.oxw(3).$implicit;t.Q6J("status",c.state)}}function Rn(r,v){1&r&&(t.TgZ(0,"nz-space",23),t.YNc(1,Mn,7,4,"span",24),t.YNc(2,Ln,1,1,"cvc-status-tag",25),t.qZA())}function In(r,v){if(1&r&&(t.TgZ(0,"nz-card",10),t.YNc(1,g,1,1,"cvc-comment-body",11),t._UZ(2,"nz-divider"),t.YNc(3,M,2,2,"ng-container",3),t.YNc(4,On,8,5,"ng-template",null,12,t.W1O),t.YNc(6,En,2,1,"ng-template",null,13,t.W1O),t.YNc(8,Rn,3,0,"ng-template",null,14,t.W1O),t.qZA()),2&r){const c=t.MAs(5),d=t.MAs(7),Z=t.MAs(9),q=t.oxw().$implicit;t.Q6J("nzTitle",d)("nzExtra",Z),t.xp6(1),t.Q6J("ngIf",q.openComment),t.xp6(2),t.Q6J("ngIf","OPEN"==q.state)("ngIfElse",c)}}function sn(r,v){1&r&&(t.ynx(0),t.YNc(1,In,10,5,"nz-card",9),t.BQk())}function Sn(r,v){if(1&r&&(t.ynx(0),t.TgZ(1,"nz-space",7),t.YNc(2,sn,2,0,"ng-container",8),t.qZA(),t.BQk()),2&r){const c=t.oxw();t.xp6(2),t.Q6J("ngForOf",c.flags)}}function Fn(r,v){1&r&&t._UZ(0,"nz-empty",28)}let bn=(()=>{class r{constructor(c){this.viewerService=c,this.isLoading=!1,this.success=!1,this.destroy$=new Q.xQ}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(c=>{this.mostRecentOrg=c.mostRecentOrg})}setupMutationResultHandlers(c,d){c.submitSuccess$.pipe((0,J.R)(this.destroy$)).subscribe(Z=>{Z&&(this.isLoading=!1,this.errors=void 0,this.success=d)}),c.submitError$.pipe((0,J.R)(this.destroy$)).subscribe(Z=>{Z.length>0&&(this.isLoading=!1,this.success=!1,this.errors=Z)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(c){var d;this.errors=null===(d=this.errors)||void 0===d?void 0:d.filter(Z=>Z!=c)}onSuccessBannerClose(){this.success=!1}}return r.\u0275fac=function(c){return new(c||r)(t.Y36(Y.a))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cvc-flag-list"]],inputs:{flags:"flags",flagResolvedCallback:"flagResolvedCallback"},decls:6,vars:4,consts:[["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],["nzTitle","Flags",1,"card-list"],[4,"ngIf","ngIfElse"],["noFlags",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose"],["nzDirection","vertical"],[4,"ngFor","ngForOf"],["nzType","inner",3,"nzTitle","nzExtra",4,"nzSpaceItem"],["nzType","inner",3,"nzTitle","nzExtra"],[3,"commentBodySegments",4,"ngIf"],["flagResolved",""],["flagCardHeaderTitle",""],["flagCardHeaderExtra",""],[3,"commentBodySegments"],[3,"flag","flagResolvedCallback"],["nzSpan","16"],[4,"ngIf"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"user"],["nz-icon","","nzType","civic:flag"],["nzSize","small"],[4,"nzSpaceItem"],[3,"status",4,"nzSpaceItem"],["nz-typography","","nzType","secondary"],[3,"status"],["nzNotFoundImage","simple","nzNotFoundContent","No Flags matching filters"]],template:function(c,d){if(1&c&&(t.YNc(0,T,1,1,"nz-alert",0),t.YNc(1,W,1,1,"nz-alert",1),t.TgZ(2,"nz-card",2),t.YNc(3,Sn,3,1,"ng-container",3),t.YNc(4,Fn,1,0,"ng-template",null,4,t.W1O),t.qZA()),2&c){const Z=t.MAs(5);t.Q6J("ngForOf",d.errors),t.xp6(1),t.Q6J("ngIf",d.success),t.xp6(2),t.Q6J("ngIf",d.flags&&d.flags.length>0)("ngIfElse",Z)}},directives:[n.sg,w.r,n.O5,F.bd,R.NU,R.$1,P.m,N.g,gn,u.SK,u.t3,xn.ZU,hn.I,y.Ls,z.w,mn.h,yn.p9],pipes:[An.wr],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}),r})();var Pn=i(1243);function Nn(r,v){if(1&r){const c=t.EpF();t.TgZ(0,"nz-alert",8),t.NdJ("nzOnClose",function(){return t.CHM(c),t.oxw().onSuccessBannerClose()}),t.qZA()}}function Qn(r,v){if(1&r&&t._UZ(0,"nz-alert",9),2&r){t.oxw();const c=t.MAs(4);t.Q6J("nzDescription",c)}}function Jn(r,v){if(1&r&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&r){const c=v.$implicit;t.xp6(1),t.hij(" ",c," ")}}function Un(r,v){if(1&r&&(t.TgZ(0,"ul"),t.YNc(1,Jn,2,1,"li",10),t.qZA()),2&r){const c=t.oxw();t.xp6(1),t.Q6J("ngForOf",c.errorMessages)}}function Yn(r,v){}function Dn(r,v){1&r&&t.YNc(0,Yn,0,0,"ng-template")}function Bn(r,v){if(1&r&&(t.ynx(0),t.YNc(1,Dn,1,0,void 0,15),t.BQk()),2&r){t.oxw();const c=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",c)}}function $n(r,v){}function wn(r,v){1&r&&t.YNc(0,$n,0,0,"ng-template")}function Wn(r,v){if(1&r&&(t.TgZ(0,"span",16),t.YNc(1,wn,1,0,void 0,15),t.qZA()),2&r){t.oxw();const c=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",c)}}function jn(r,v){if(1&r&&(t.TgZ(0,"button",17),t._uU(1),t.ALo(2,"enumToTitle"),t.qZA()),2&r){const c=t.oxw().ngrxLet,d=t.oxw();t.Q6J("disabled",!(void 0!==d.comment&&d.comment.length>=10&&c.signedIn)),t.xp6(1),t.hij(" Flag ",t.lcZ(2,2,d.flaggable.entityType)," ")}}function Vn(r,v){if(1&r){const c=t.EpF();t.ynx(0),t.TgZ(1,"cvc-form-buttons"),t.TgZ(2,"cvc-org-selector-btn-group",11),t.NdJ("selectedOrgChange",function(Z){return t.CHM(c),t.oxw().onOrgSelected(Z)}),t.YNc(3,Bn,2,1,"ng-container",12),t.YNc(4,Wn,2,1,"ng-template",null,13,t.W1O),t.YNc(6,jn,3,4,"ng-template",null,14,t.W1O),t.qZA(),t.qZA(),t.BQk()}if(2&r){const c=v.ngrxLet,d=t.MAs(5);t.xp6(3),t.Q6J("ngIf",c.signedIn)("ngIfElse",d)}}let Kn=(()=>{class r{constructor(c,d,Z){this.gql=c,this.viewerService=d,this.networkErrorService=Z,this.errorMessages=[],this.success=!1,this.loading=!1,this.comment="",this.destroy$=new Q.xQ,this.addFlagMutator=new $.U(Z)}ngOnInit(){if(this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(c=>{this.selectedOrg=c.mostRecentOrg}),void 0===this.flaggable)throw new Error("Must pass a flagggable into flag add component")}onOrgSelected(c){this.selectedOrg=c}submitFlag(){var c;this.errorMessages=[];let d={comment:this.comment,subject:this.flaggable,organizationId:null===(c=this.selectedOrg)||void 0===c?void 0:c.id},Z=this.addFlagMutator.mutate(this.gql,{input:d});Z.submitSuccess$.pipe((0,J.R)(this.destroy$)).subscribe(q=>{q&&(this.flagAddedCallback&&this.flagAddedCallback(),this.success=!0,this.comment="")}),Z.submitError$.pipe((0,J.R)(this.destroy$)).subscribe(q=>{q.length>0&&(this.errorMessages=q)}),Z.isSubmitting$.pipe((0,J.R)(this.destroy$)).subscribe(q=>{this.loading=q})}onSuccessBannerClose(){this.success=!1}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return r.\u0275fac=function(c){return new(c||r)(t.Y36(e.B0s),t.Y36(Y.a),t.Y36(G.Y))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cvc-flag-add-form"]],inputs:{flaggable:"flaggable",flagAddedCallback:"flagAddedCallback"},decls:11,vars:5,consts:[["nzType","inner"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription",4,"ngIf"],["errorContents",""],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[4,"ngrxLet"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription"],[4,"ngFor","ngForOf"],[3,"selectedOrgChange"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to flag entity."],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"]],template:function(c,d){1&c&&(t.TgZ(0,"nz-card",0),t.YNc(1,Nn,1,0,"nz-alert",1),t.YNc(2,Qn,1,1,"nz-alert",2),t.YNc(3,Un,2,1,"ng-template",null,3,t.W1O),t.TgZ(5,"form",4),t.NdJ("ngSubmit",function(){return d.submitFlag()}),t.TgZ(6,"cvc-comment-input-form",5),t.NdJ("commentChange",function(q){return d.comment=q}),t.qZA(),t.TgZ(7,"nz-spin",6),t.TgZ(8,"nz-form-item"),t.TgZ(9,"nz-form-control"),t.YNc(10,Vn,8,2,"ng-container",7),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&c&&(t.xp6(1),t.Q6J("ngIf",d.success),t.xp6(1),t.Q6J("ngIf",d.errorMessages.length>0),t.xp6(4),t.Q6J("comment",d.comment),t.xp6(1),t.Q6J("nzSpinning",d.loading),t.xp6(3),t.Q6J("ngrxLet",d.viewer$))},directives:[F.bd,n.O5,w.r,n.sg,b._Y,b.JL,b.F,V.Lr,O.b,K.W,u.SK,V.Nx,u.t3,V.Fd,C.eJ,m.Z,U.q,n.tP,I.SY,p.ix,f.dQ,L.m,z.w],pipes:[Pn.I],styles:[""]}),r})();var Gn=i(8747),Hn=i(6699);function qn(r,v){if(1&r&&(t._UZ(0,"cvc-flag-list",13),t.ALo(1,"ngrxPush")),2&r){const c=t.oxw(2);t.Q6J("flags",t.lcZ(1,2,c.flags$))("flagResolvedCallback",c.refresh)}}function kn(r,v){if(1&r){const c=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(c);const Z=t.oxw(2).ngrxLet;return t.oxw(2).loadMore(null==Z?null:Z.endCursor)}),t._uU(1,"Load More"),t.qZA()}}function Xn(r,v){1&r&&(t.ynx(0),t.YNc(1,kn,2,0,"button",15),t.BQk())}function nt(r,v){if(1&r&&(t.ynx(0),t.YNc(1,Xn,2,0,"ng-container",14),t.BQk()),2&r){const c=v.ngrxLet;t.xp6(1),t.Q6J("ngIf",null==c?null:c.hasNextPage)}}function tt(r,v){if(1&r&&t._UZ(0,"cvc-flag-add-form",17),2&r){const c=t.oxw(2);t.Q6J("flaggable",c.flaggable)("flagAddedCallback",c.refresh)}}function et(r,v){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&r){const c=v.$implicit;t.xp6(1),t.Oqu(c.displayName)}}function ot(r,v){if(1&r&&t._UZ(0,"nz-avatar",20),2&r){const c=t.oxw().$implicit;t.Q6J("nzSrc",c.profileImagePath)}}function it(r,v){if(1&r&&(t._UZ(0,"nz-avatar",21),t.ALo(1,"uppercase")),2&r){const c=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,c.username.charAt(0)))}}function at(r,v){if(1&r&&(t.YNc(0,ot,1,1,"nz-avatar",18),t.YNc(1,it,2,3,"ng-template",null,19,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&r){const c=v.$implicit,d=t.MAs(2);t.Q6J("ngIf",c.profileImagePath)("ngIfElse",d),t.xp6(4),t.Oqu(c.username)}}function st(r,v){if(1&r&&t._UZ(0,"nz-avatar",20),2&r){const c=t.oxw().$implicit;t.Q6J("nzSrc",c.profileImagePath)}}function ct(r,v){if(1&r&&(t._UZ(0,"nz-avatar",21),t.ALo(1,"uppercase")),2&r){const c=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,c.username.charAt(0)))}}function rt(r,v){if(1&r&&(t.YNc(0,st,1,1,"nz-avatar",18),t.YNc(1,ct,2,3,"ng-template",null,19,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&r){const c=v.$implicit,d=t.MAs(2);t.Q6J("ngIf",c.profileImagePath)("ngIfElse",d),t.xp6(4),t.Oqu(c.username)}}function _t(r,v){if(1&r){const c=t.EpF();t.ynx(0),t.TgZ(1,"nz-row",2),t.TgZ(2,"nz-col",3),t.TgZ(3,"nz-space",4),t.YNc(4,qn,2,4,"cvc-flag-list",5),t.YNc(5,nt,2,1,"ng-container",6),t.YNc(6,tt,1,2,"cvc-flag-add-form",7),t.qZA(),t.qZA(),t.TgZ(7,"nz-col",8),t.TgZ(8,"cvc-participant-list",9),t.NdJ("participantSelectedEvent",function(Z){return t.CHM(c),t.oxw().onStateSelected(Z)}),t.YNc(9,et,2,1,"ng-template",null,10,t.W1O),t.qZA(),t.TgZ(11,"cvc-participant-list",11),t.NdJ("participantSelectedEvent",function(Z){return t.CHM(c),t.oxw().onFlaggingUsersSelected(Z)}),t.ALo(12,"ngrxPush"),t.YNc(13,at,5,3,"ng-template",null,10,t.W1O),t.qZA(),t.TgZ(15,"cvc-participant-list",12),t.NdJ("participantSelectedEvent",function(Z){return t.CHM(c),t.oxw().onResolvingUsersSelected(Z)}),t.ALo(16,"ngrxPush"),t.YNc(17,rt,5,3,"ng-template",null,10,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&r){const c=t.oxw();t.xp6(1),t.Q6J("nzGutter",16),t.xp6(4),t.Q6J("ngrxLet",c.pageInfo$),t.xp6(3),t.Q6J("preselectedOption",c.selectableStates[0])("participantList",c.selectableStates),t.xp6(3),t.Q6J("participantList",t.lcZ(12,6,c.uniqueFlaggingUsers$)),t.xp6(4),t.Q6J("participantList",t.lcZ(16,8,c.uniqueResolvingUsers$))}}function lt(r,v){if(1&r&&t._UZ(0,"cvc-flag-add-form",17),2&r){const c=t.oxw();t.Q6J("flaggable",c.flaggable)("flagAddedCallback",c.refresh)}}let pt=(()=>{class r{constructor(c){this.gql=c,this.defaultPageSize=5,this.selectableStates=[{id:1,displayName:"Open",value:e.BQZ.Open},{id:2,displayName:"Resolved",value:e.BQZ.Resolved}]}ngOnInit(){if(null==this.flaggable)throw new Error("Must pass a flaggable into flag list");this.queryRef=this.gql.watch({first:this.defaultPageSize,flaggable:this.flaggable,state:e.BQZ.Open}),this.refresh=()=>{this.queryRef.refetch()},this.results$=this.queryRef.valueChanges,this.flags$=this.results$.pipe((0,s.j)("data","flags","edges"),(0,x.U)(c=>c.map(d=>d.node))),this.pageInfo$=this.results$.pipe((0,s.j)("data","flags","pageInfo")),this.unfilteredCount$=this.results$.pipe((0,s.j)("data","flags","unfilteredCountForSubject")),this.uniqueFlaggingUsers$=this.results$.pipe((0,x.U)(({data:c})=>{var d;return null===(d=c.flags)||void 0===d?void 0:d.uniqueFlaggingUsers})),this.uniqueResolvingUsers$=this.results$.pipe((0,x.U)(({data:c})=>{var d;return null===(d=c.flags)||void 0===d?void 0:d.uniqueResolvingUsers}))}onFlaggingUsersSelected(c){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},flaggingUserId:c?c.id:void 0})}onResolvingUsersSelected(c){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},resolvingUserId:c?c.id:void 0})}onStateSelected(c){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},state:c?c.value:void 0})}loadMore(c){var d;null===(d=this.queryRef)||void 0===d||d.fetchMore({variables:{first:this.defaultPageSize,after:c}})}}return r.\u0275fac=function(c){return new(c||r)(t.Y36(e.rzy))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cvc-flag-list-and-filter"]],inputs:{flaggable:"flaggable"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noFlags",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"flags","flagResolvedCallback",4,"nzSpaceItem"],[4,"ngrxLet"],[3,"flaggable","flagAddedCallback",4,"nzSpaceItem"],["nzSpan","6"],["listTitle","Flag State",3,"preselectedOption","participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Flagging Users",3,"participantList","participantSelectedEvent"],["listTitle","Resolving Users",3,"participantList","participantSelectedEvent"],[3,"flags","flagResolvedCallback"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[3,"flaggable","flagAddedCallback"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"]],template:function(c,d){if(1&c&&(t.YNc(0,_t,19,10,"ng-container",0),t.ALo(1,"ngrxPush"),t.YNc(2,lt,1,2,"ng-template",null,1,t.W1O)),2&c){const Z=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,d.unfilteredCount$))("ngIfElse",Z)}},directives:[n.O5,u.SK,u.t3,R.NU,R.$1,bn,C.eJ,p.ix,f.dQ,z.w,Kn,Gn.l,Hn.Dz],pipes:[C.fM,n.gd],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}),r})()},8168:(nn,j,i)=>{i.d(j,{Y:()=>s});var e=i(5e3);let s=(()=>{class x{constructor(){}}return x.\u0275fac=function(n){return new(n||x)},x.\u0275dir=e.lG2({type:x,selectors:[["","cvcFlaggableOptions",""]]}),x})()},5623:(nn,j,i)=>{i.d(j,{o:()=>G});var e=i(5e3),s=i(8168),x=i(9808),t=i(4401),n=i(647),u=i(404);const R=["cvcFlaggable",""];function Q(C,I){1&C&&e.Hsn(0)}function J(C,I){1&C&&e.GkF(0)}function Y(C,I){if(1&C&&(e.ynx(0),e.YNc(1,J,1,0,"ng-container",2),e.BQk()),2&C){e.oxw();const p=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",p)}}function w(C,I){if(1&C&&(e.TgZ(0,"a",6),e._UZ(1,"i",7),e.qZA()),2&C){e.oxw();const p=e.MAs(5);e.xp6(1),e.Q6J("nzTooltipTitle",p)}}function F(C,I){if(1&C&&e._uU(0),2&C){const p=e.oxw(2);e.hij(" ",p.flags," open flags ")}}function P(C,I){1&C&&e.GkF(0)}function N(C,I){if(1&C&&(e.ynx(0),e.TgZ(1,"nz-ribbon",3),e.YNc(2,w,2,1,"ng-template",null,4,e.W1O),e.YNc(4,F,1,1,"ng-template",null,5,e.W1O),e.YNc(6,P,1,0,"ng-container",2),e.qZA(),e.BQk()),2&C){const p=e.MAs(3);e.oxw();const f=e.MAs(1);e.xp6(1),e.Q6J("nzText",p),e.xp6(5),e.Q6J("ngTemplateOutlet",f)}}const $=["*"];let G=(()=>{class C{constructor(p){this.renderer=p}ngOnChanges(){this.flags&&0===this.flags?this.removeFlagged():this.addFlagged()}ngAfterViewInit(){this.flags&&0===this.flags?this.removeFlagged():this.addFlagged()}addFlagged(){this.flaggedChild&&this.renderer.addClass(this.flaggedChild.nativeElement,"flaggedChild")}removeFlagged(){this.flaggedChild&&this.renderer.removeClass(this.flaggedChild.nativeElement,"flaggedChild")}}return C.\u0275fac=function(p){return new(p||C)(e.Y36(e.Qsj))},C.\u0275cmp=e.Xpm({type:C,selectors:[["","cvcFlaggable",""]],contentQueries:function(p,f,z){if(1&p&&e.Suo(z,s.Y,5,e.SBq),2&p){let S;e.iGM(S=e.CRH())&&(f.flaggedChild=S.first)}},inputs:{flags:"flags",entity:"entity"},features:[e.TTD],attrs:R,ngContentSelectors:$,decls:4,vars:2,consts:[["flaggedContent",""],[4,"ngIf"],[4,"ngTemplateOutlet"],["nzPlacement","start","nzColor","#ff3333",3,"nzText"],["flaggedText",""],["flaggedTooltip",""],["routerLink","flags",2,"color","#FFF"],["nz-icon","","nzType","flag","nzTheme","fill","nz-tooltip","","nzTooltipPlacement","top","nzTooltipColor","#FF3333",3,"nzTooltipTitle"]],template:function(p,f){1&p&&(e.F$t(),e.YNc(0,Q,1,0,"ng-template",null,0,e.W1O),e.YNc(2,Y,2,1,"ng-container",1),e.YNc(3,N,7,2,"ng-container",1)),2&p&&(e.xp6(2),e.Q6J("ngIf",0===f.flags),e.xp6(1),e.Q6J("ngIf",f.flags))},directives:[x.O5,x.tP,t.F9,n.Ls,u.SY],styles:[""]}),C})()},1835:(nn,j,i)=>{i.d(j,{i:()=>ln});var e=i(9808),s=i(7484),x=i(3762),t=i(1894),n=i(5e3);let u=(()=>{class k{}return k.\u0275fac=function(an){return new(an||k)},k.\u0275mod=n.oAB({type:k}),k.\u0275inj=n.cJS({imports:[[e.ez,t.Jb]]}),k})();var R=i(8144);let Q=(()=>{class k{}return k.\u0275fac=function(an){return new(an||k)},k.\u0275mod=n.oAB({type:k}),k.\u0275inj=n.cJS({imports:[[e.ez,s.vh,x.Ph,t.Jb,R.zf]]}),k})();var J=i(9779),Y=i(1825),w=i(8481),F=i(3618),P=i(6699),N=i(8625),$=i(7345),G=i(3580),C=i(8018),I=i(6286),p=i(4867),f=i(8645),z=i(5482),S=i(685),y=i(3172),b=i(6114),V=i(5737),O=i(404),K=i(6042),m=i(2359),U=i(6949),L=i(647),E=i(3610),H=i(1047),A=i(4182),X=i(9444),tn=i(3098),cn=i(7026),rn=i(4509),_n=i(8909);let ln=(()=>{class k{}return k.\u0275fac=function(an){return new(an||k)},k.\u0275mod=n.oAB({type:k}),k.\u0275inj=n.cJS({imports:[[e.ez,t.Jb,x.Ph,s.vh,R.zf,w.X,F.ZJ,P.Rt,S.Xo,b.Wr,V.S,O.cg,x.Ph,E.$6,L.PV,H.o7,tn.q6,V.S,A.u5,N.$L.forChild({formatter:{useClass:cn.x,provide:N.KP}}),Y.A,Q,J.s,u,$.W,G.Q,C.e,I.y,p.Q,f.M,y.x,rn.w,X.s,_n.m,z.cD,K.sL,m.L,U.WG]]}),k})()},8291:(nn,j,i)=>{i.d(j,{a:()=>fe});var e=i(712),s=i(373),x=i(4850),t=i(1059),n=i(5e3),u=i(325),R=i(9808),Q=i(1894),J=i(8144),Y=i(8929),w=i(6123),F=i(7625),P=i(9350),N=i(9169),$=i(2359),G=i(6949),C=i(7484),I=i(5482),p=i(3762);const f=["itemTemplate"],z=function(o){return{$implicit:o}};function S(o,_){if(1&o&&(n.TgZ(0,"nz-list-item",9),n.TgZ(1,"span",10),n.GkF(2,11),n.qZA(),n.qZA()),2&o){const a=_.$implicit,l=n.oxw();n.xp6(2),n.Q6J("ngTemplateOutlet",l.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,z,a))}}function y(o,_){if(1&o&&n._UZ(0,"nz-list-empty",12),2&o){const a=n.oxw();n.MGl("nzNoResult","No ",a.entityType,"")}}function b(o,_){if(1&o&&(n.TgZ(0,"nz-list-item",14),n.TgZ(1,"span",10),n.GkF(2,11),n.qZA(),n.qZA()),2&o){const a=_.$implicit,l=n.oxw(3);n.xp6(2),n.Q6J("ngTemplateOutlet",l.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,z,a))}}function V(o,_){if(1&o&&n._UZ(0,"nz-list-empty",12),2&o){const a=n.oxw(3);n.MGl("nzNoResult","No ",a.entityType," Removed")}}function O(o,_){if(1&o&&(n.TgZ(0,"nz-list",2),n.YNc(1,b,3,4,"nz-list-item",13),n.YNc(2,V,1,1,"nz-list-empty",4),n.qZA()),2&o){const a=n.oxw(2);n.MGl("nzHeader","Removed ",a.entityType,""),n.xp6(1),n.Q6J("ngForOf",a.diffObject.removedObjects),n.xp6(1),n.Q6J("ngIf",0===a.diffObject.removedObjects.length)}}function K(o,_){1&o&&(n.ynx(0),n.YNc(1,O,3,3,"nz-list",7),n.BQk())}function m(o,_){if(1&o&&(n.TgZ(0,"nz-list-item",16),n.TgZ(1,"span",10),n.GkF(2,11),n.qZA(),n.qZA()),2&o){const a=_.$implicit,l=n.oxw(2);n.xp6(2),n.Q6J("ngTemplateOutlet",l.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,z,a))}}function U(o,_){if(1&o&&n._UZ(0,"nz-list-empty",12),2&o){const a=n.oxw(2);n.MGl("nzNoResult","No ",a.entityType," Added")}}function L(o,_){if(1&o&&(n.TgZ(0,"nz-list",2),n.YNc(1,m,3,4,"nz-list-item",15),n.YNc(2,U,1,1,"nz-list-empty",4),n.qZA()),2&o){const a=n.oxw();n.MGl("nzHeader","Added ",a.entityType,""),n.xp6(1),n.Q6J("ngForOf",a.diffObject.addedObjects),n.xp6(1),n.Q6J("ngIf",0===a.diffObject.addedObjects.length)}}function E(o,_){if(1&o&&(n.TgZ(0,"nz-list-item",18),n.TgZ(1,"span",10),n.GkF(2,11),n.qZA(),n.qZA()),2&o){const a=_.$implicit,l=n.oxw(3);n.xp6(2),n.Q6J("ngTemplateOutlet",l.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,z,a))}}function H(o,_){if(1&o&&n._UZ(0,"nz-list-empty",12),2&o){const a=n.oxw(3);n.MGl("nzNoResult","No ",a.entityType," Kept")}}function A(o,_){if(1&o&&(n.TgZ(0,"nz-list",2),n.YNc(1,E,3,4,"nz-list-item",17),n.YNc(2,H,1,1,"nz-list-empty",4),n.qZA()),2&o){const a=n.oxw(2);n.MGl("nzHeader","Kept ",a.entityType,""),n.xp6(1),n.Q6J("ngForOf",a.diffObject.keptObjects),n.xp6(1),n.Q6J("ngIf",0===a.diffObject.keptObjects.length)}}function X(o,_){1&o&&(n.ynx(0),n.YNc(1,A,3,3,"nz-list",7),n.BQk())}function tn(o,_){if(1&o&&(n.TgZ(0,"nz-list-item",19),n.TgZ(1,"span",10),n.GkF(2,11),n.qZA(),n.qZA()),2&o){const a=_.$implicit,l=n.oxw();n.xp6(2),n.Q6J("ngTemplateOutlet",l.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,z,a))}}function cn(o,_){if(1&o&&n._UZ(0,"nz-list-empty",12),2&o){const a=n.oxw();n.MGl("nzNoResult","No ",a.entityType,"")}}let rn=(()=>{class o{constructor(){}ngOnInit(){if(void 0===this.diffObject)throw new Error("Must specify a diffObject.");if(void 0===this.entityType)throw new Error("Must specify an entityType.")}}return o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["cvc-revision-list-diff"]],contentQueries:function(a,l,h){if(1&a&&n.Suo(h,f,5),2&a){let B;n.iGM(B=n.CRH())&&(l.itemTemplateRef=B.first)}},inputs:{diffObject:"diffObject",entityType:"entityType"},decls:14,vars:12,consts:[[3,"nzGutter"],[3,"nzSpan"],["nzBordered","","nzType","inner","nzSize","small",3,"nzHeader"],["ngClass","current",4,"ngFor","ngForOf"],[3,"nzNoResult",4,"ngIf"],["nzDirection","vertical"],[4,"ngIf"],["nzBordered","","nzType","inner","nzSize","small",3,"nzHeader",4,"nzSpaceItem"],["ngClass","suggested",4,"ngFor","ngForOf"],["ngClass","current"],["nz-typography",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"nzNoResult"],["ngClass","removed",4,"ngFor","ngForOf"],["ngClass","removed"],["ngClass","added",4,"ngFor","ngForOf"],["ngClass","added"],["ngClass","kept",4,"ngFor","ngForOf"],["ngClass","kept"],["ngClass","suggested"]],template:function(a,l){1&a&&(n.TgZ(0,"nz-row",0),n.TgZ(1,"nz-col",1),n.TgZ(2,"nz-list",2),n.YNc(3,S,3,4,"nz-list-item",3),n.YNc(4,y,1,1,"nz-list-empty",4),n.qZA(),n.qZA(),n.TgZ(5,"nz-col",1),n.TgZ(6,"nz-space",5),n.YNc(7,K,2,0,"ng-container",6),n.YNc(8,L,3,3,"nz-list",7),n.YNc(9,X,2,0,"ng-container",6),n.qZA(),n.qZA(),n.TgZ(10,"nz-col",1),n.TgZ(11,"nz-list",2),n.YNc(12,tn,3,4,"nz-list-item",8),n.YNc(13,cn,1,1,"nz-list-empty",4),n.qZA(),n.qZA(),n.qZA()),2&a&&(n.Q6J("nzGutter",16),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(1),n.MGl("nzHeader","Original ",l.entityType," List"),n.xp6(1),n.Q6J("ngForOf",l.diffObject.currentObjects),n.xp6(1),n.Q6J("ngIf",0===l.diffObject.currentObjects.length),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.Q6J("ngIf",l.diffObject.currentObjects.length>0),n.xp6(2),n.Q6J("ngIf",l.diffObject.currentObjects.length>0),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(1),n.MGl("nzHeader","Revised ",l.entityType," List"),n.xp6(1),n.Q6J("ngForOf",l.diffObject.suggestedObjects),n.xp6(1),n.Q6J("ngIf",0===l.diffObject.suggestedObjects.length))},directives:[Q.SK,Q.t3,p.n_,R.sg,p.AA,R.mk,R.tP,R.O5,p.I2,J.NU,J.$1],styles:["[_nghost-%COMP%]{display:block}nz-list[_ngcontent-%COMP%]   .kept[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{background-color:#f6ffed;color:#135200}nz-list[_ngcontent-%COMP%]   .removed[_ngcontent-%COMP%]{background-color:#fff1f0;color:#820014}nz-list[_ngcontent-%COMP%]   .suggested[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-space[_ngcontent-%COMP%]{width:100%}"]}),o})();var _n=i(6906),ln=i(4022),k=i(7469),on=i(8481),an=i(7701),dn=i(7956),un=i(8664);let vn=(()=>{class o{constructor(){}ngOnInit(){if(void 0===this.left)throw new Error("Must provide a left side of the diff.");if(void 0===this.right)throw new Error("Must provide a right side of the diff.");if(void 0===this.entityType)throw new Error("Must provide a diff.")}}return o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["cvc-revision-value-diff"]],inputs:{currentValue:"currentValue",suggestedValue:"suggestedValue",left:"left",right:"right",entityType:"entityType"},decls:15,vars:10,consts:[[3,"nzGutter"],[3,"nzSpan"],[3,"innerHtml"],[1,"diff","suggested"],[1,"background"]],template:function(a,l){1&a&&(n.TgZ(0,"nz-row",0),n.TgZ(1,"nz-col",1),n.TgZ(2,"h4"),n._uU(3),n.qZA(),n._UZ(4,"div",2),n.qZA(),n.TgZ(5,"nz-col",1),n.TgZ(6,"h4"),n._uU(7),n.qZA(),n._UZ(8,"div",2),n.qZA(),n.TgZ(9,"nz-col",1),n.TgZ(10,"h4"),n._uU(11),n.qZA(),n.TgZ(12,"div",3),n.TgZ(13,"div",4),n._uU(14),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&a&&(n.Q6J("nzGutter",16),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.hij("Original ",l.entityType,""),n.xp6(1),n.Q6J("innerHtml",l.left,n.oJD),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.hij("",l.entityType," Diff"),n.xp6(1),n.Q6J("innerHtml",l.right,n.oJD),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.hij("Revised ",l.entityType,""),n.xp6(3),n.hij(" ",l.suggestedValue," "))},directives:[Q.SK,Q.t3],styles:[":host{display:block}.diff{overflow:auto;width:100%}.diff .background{padding:4px 8px}.diff.insertions .background{background:#f6ffed;color:#237804}.diff.deletions .background{background:#fff1f0;color:#a8071a}.diff.suggested .background,.diff.original .background{background:#f0f5ff;color:#10239e}.diff del,.diff ins{text-decoration:none}.diff del strong{font-weight:400;background:#fcc}.diff ins strong{font-weight:400;background:#9f9}.diff .del{font-weight:400;background:#fee;color:#b00}.diff .ins{font-weight:400;background:#dfd;color:#080}ul{list-style:none}\n"],encapsulation:2}),o})();var fn=i(5737),Cn=i(7948),zn=i(3618),Tn=i(125),pn=i(647),gn=i(2683),xn=i(3610),hn=i(4590),mn=i(6042),yn=i(6114),An=i(404),T=i(685),W=i(2643),g=i(9383),M=i(8227),D=i(1793),en=i(3098),On=i(1243),En=i(8625);function Mn(o,_){if(1&o){const a=n.EpF();n.TgZ(0,"nz-alert",4),n.NdJ("nzOnClose",function(){const B=n.CHM(a).$implicit;return n.oxw().onErrorBannerClose(B)}),n.qZA()}2&o&&n.Q6J("nzMessage",_.$implicit)}function Ln(o,_){if(1&o){const a=n.EpF();n.TgZ(0,"nz-alert",5),n.NdJ("nzOnClose",function(){return n.CHM(a),n.oxw().onSuccessBannerClose()}),n.qZA()}if(2&o){const a=n.oxw();n.MGl("nzMessage","Revision(s) successfully ",a.success,".")}}function Rn(o,_){1&o&&n._UZ(0,"cvc-source-tag",20),2&o&&n.Q6J("source",_.$implicit)}function In(o,_){if(1&o&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",18),n.YNc(2,Rn,1,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&o){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}const sn=function(o,_){return{id:o,name:_}};function Sn(o,_){if(1&o&&n._UZ(0,"cvc-disease-tag",22),2&o){const a=_.$implicit;n.Q6J("disease",n.WLB(1,sn,a.id,a.displayName))}}function Fn(o,_){if(1&o&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",21),n.YNc(2,Sn,1,4,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&o){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function bn(o,_){if(1&o&&n._UZ(0,"cvc-drug-tag",24),2&o){const a=_.$implicit;n.Q6J("drug",n.WLB(1,sn,a.id,a.displayName))}}function Pn(o,_){if(1&o&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",23),n.YNc(2,bn,1,4,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&o){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function Nn(o,_){if(1&o&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&o){const a=_.$implicit;n.xp6(1),n.hij(" ",a.displayName," ")}}function Qn(o,_){if(1&o&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",25),n.YNc(2,Nn,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&o){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function Jn(o,_){if(1&o&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&o){const a=_.$implicit;n.xp6(1),n.hij(" ",a.displayName," ")}}function Un(o,_){if(1&o&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",26),n.YNc(2,Jn,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&o){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function Yn(o,_){if(1&o&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&o){const a=_.$implicit;n.xp6(1),n.hij(" ",a.displayName," ")}}function Dn(o,_){if(1&o&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",27),n.YNc(2,Yn,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&o){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function Bn(o,_){if(1&o&&n._UZ(0,"cvc-variant-type-tag",29),2&o){const a=_.$implicit;n.Q6J("variantType",n.WLB(1,sn,a.id,a.displayName))}}function $n(o,_){if(1&o&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",28),n.YNc(2,Bn,1,4,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&o){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function wn(o,_){if(1&o&&n._UZ(0,"cvc-phenotype-tag",31),2&o){const a=_.$implicit;n.Q6J("phenotype",n.WLB(1,sn,a.id,a.displayName))}}function Wn(o,_){if(1&o&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",30),n.YNc(2,wn,1,4,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&o){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function jn(o,_){if(1&o&&n._UZ(0,"cvc-variant-tag",33),2&o){const a=_.$implicit;n.Q6J("variant",n.WLB(1,sn,a.id,a.displayName))}}function Vn(o,_){if(1&o&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",32),n.YNc(2,jn,1,4,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&o){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function Kn(o,_){if(1&o&&n._UZ(0,"cvc-variant-tag",33),2&o){const a=_.$implicit;n.Q6J("variant",n.WLB(1,sn,a.id,a.displayName))}}function Gn(o,_){if(1&o&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",34),n.YNc(2,Kn,1,4,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&o){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function Hn(o,_){1&o&&n._UZ(0,"cvc-source-tag",20),2&o&&n.Q6J("source",_.$implicit)}function qn(o,_){if(1&o&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",35),n.YNc(2,Hn,1,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&o){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function kn(o,_){if(1&o&&(n.ynx(0),n._UZ(1,"cvc-revision-value-diff",36),n.BQk()),2&o){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("currentValue",a.currentValue)("suggestedValue",a.suggestedValue)("left",a.linkoutData.diffValue.left)("right",a.linkoutData.diffValue.right)("entityType",a.linkoutData.name)}}function Xn(o,_){if(1&o&&(n.ynx(0),n._UZ(1,"cvc-comment-body",40),n.BQk()),2&o){const a=n.oxw(2).$implicit;n.xp6(1),n.Q6J("commentBodySegments",a.resolutionComment.parsedComment)}}function nt(o,_){if(1&o&&n._UZ(0,"cvc-user-tag",41),2&o){const a=n.oxw(2).$implicit;n.Q6J("user",a.resolver)}}function tt(o,_){if(1&o&&(n.ynx(0),n._UZ(1,"nz-divider"),n.TgZ(2,"nz-row"),n.TgZ(3,"nz-col",37),n.YNc(4,Xn,2,1,"ng-container",15),n.qZA(),n.TgZ(5,"nz-col",38),n._uU(6),n.ALo(7,"enumToTitle"),n.YNc(8,nt,1,1,"cvc-user-tag",39),n._uU(9),n.ALo(10,"timeago"),n.qZA(),n.qZA(),n.BQk()),2&o){const a=n.oxw().$implicit;n.xp6(4),n.Q6J("ngIf",a.resolutionComment),n.xp6(2),n.hij(" ",n.lcZ(7,4,a.status)," By "),n.xp6(2),n.Q6J("ngIf",void 0!==a.resolver),n.xp6(1),n.hij(" ",n.lcZ(10,6,a.resolvedAt)," ")}}function et(o,_){if(1&o&&(n.TgZ(0,"span"),n._UZ(1,"i",43),n._uU(2),n.TgZ(3,"span"),n._uU(4),n.qZA(),n.qZA()),2&o){const a=n.oxw(2).$implicit;n.xp6(2),n.hij(" RID",a.id," "),n.xp6(2),n.hij("",a.linkoutData.name," Updated")}}function ot(o,_){if(1&o&&n._UZ(0,"i",46),2&o){n.oxw();const a=n.MAs(3);n.Q6J("nzPopoverContent",a)}}function it(o,_){if(1&o&&n._UZ(0,"cvc-comment-body",40),2&o){const a=n.oxw(3).$implicit;n.Q6J("commentBodySegments",a.creationComment.parsedComment)}}function at(o,_){1&o&&(n.ynx(0),n.YNc(1,ot,1,1,"i",44),n.YNc(2,it,1,1,"ng-template",null,45,n.W1O),n.BQk())}function st(o,_){if(1&o&&(n.TgZ(0,"nz-space"),n.YNc(1,et,5,2,"span",42),n.YNc(2,at,4,0,"ng-container",15),n.qZA()),2&o){const a=n.oxw().$implicit;n.xp6(2),n.Q6J("ngIf",a.creationComment)}}function ct(o,_){if(1&o&&(n.ynx(0),n.TgZ(1,"span",53),n._uU(2,"Submitted By"),n.qZA(),n._UZ(3,"cvc-user-tag",41),n.BQk()),2&o){const a=n.oxw(3).$implicit;n.xp6(3),n.Q6J("user",a.revisor)}}function rt(o,_){1&o&&(n.TgZ(0,"span",53),n._uU(1,"Submitted"),n.qZA())}function _t(o,_){if(1&o&&(n.TgZ(0,"span"),n.YNc(1,ct,4,1,"ng-container",51),n.YNc(2,rt,2,0,"ng-template",null,52,n.W1O),n.TgZ(4,"span",53),n._uU(5),n.ALo(6,"timeago"),n.qZA(),n.qZA()),2&o){const a=n.MAs(3),l=n.oxw(2).$implicit;n.xp6(1),n.Q6J("ngIf",l.revisor)("ngIfElse",a),n.xp6(4),n.Oqu(n.lcZ(6,3,l.createdAt))}}function lt(o,_){if(1&o&&n._UZ(0,"cvc-status-tag",54),2&o){const a=n.oxw(2).$implicit;n.Q6J("status",a.status)}}function pt(o,_){1&o&&n._UZ(0,"nz-divider",55)}function r(o,_){if(1&o){const a=n.EpF();n.TgZ(0,"a",56),n.NdJ("click",function(){n.CHM(a);const h=n.oxw(2).$implicit;return n.oxw(3).onChangesetSelected(h.revisionsetId)}),n._uU(1,"Show Group"),n.qZA()}}function v(o,_){1&o&&n._UZ(0,"nz-divider",55)}function c(o,_){1&o&&n._UZ(0,"label",59),2&o&&n.Q6J("nzDisabled",!0)}function d(o,_){1&o&&n._UZ(0,"label",62),2&o&&n.Q6J("nzDisabled",!0)}function Z(o,_){if(1&o){const a=n.EpF();n.TgZ(0,"label",63),n.NdJ("nzCheckedChange",function(h){n.CHM(a);const B=n.oxw(5).$implicit;return n.oxw(3).onRevisionCheckboxClicked(h,B.id)}),n.qZA()}}function q(o,_){if(1&o&&(n.YNc(0,d,1,1,"label",60),n.YNc(1,Z,1,0,"ng-template",null,61,n.W1O)),2&o){const a=n.MAs(2),l=n.oxw(4).$implicit,h=n.oxw(2).ngrxLet;n.Q6J("ngIf",h.isCurator&&h.id!=(null==l.revisor?null:l.revisor.id))("ngIfElse",a)}}function gt(o,_){if(1&o&&(n.TgZ(0,"span"),n.YNc(1,c,1,1,"label",57),n.YNc(2,q,3,2,"ng-template",null,58,n.W1O),n.qZA()),2&o){const a=n.MAs(3),l=n.oxw(5).ngrxLet;n.xp6(1),n.Q6J("ngIf",!l.signedIn)("ngIfElse",a)}}function mt(o,_){1&o&&(n.ynx(0),n.YNc(1,v,1,0,"nz-divider",49),n.YNc(2,gt,4,2,"span",42),n.BQk())}function dt(o,_){if(1&o&&(n.TgZ(0,"nz-space",47),n.NdJ("click",function(l){return l.stopPropagation()}),n.YNc(1,_t,7,5,"span",42),n.YNc(2,lt,1,1,"cvc-status-tag",48),n.YNc(3,pt,1,0,"nz-divider",49),n.YNc(4,r,2,0,"a",50),n.YNc(5,mt,3,0,"ng-container",15),n.qZA()),2&o){const a=n.oxw().$implicit;n.xp6(5),n.Q6J("ngIf","NEW"===a.status)}}function ut(o,_){if(1&o&&(n.TgZ(0,"nz-collapse-panel",11),n.ynx(1,12),n.YNc(2,In,4,1,"ng-container",13),n.YNc(3,Fn,4,1,"ng-container",13),n.YNc(4,Pn,4,1,"ng-container",13),n.YNc(5,Qn,4,1,"ng-container",13),n.YNc(6,Un,4,1,"ng-container",13),n.YNc(7,Dn,4,1,"ng-container",13),n.YNc(8,$n,4,1,"ng-container",13),n.YNc(9,Wn,4,1,"ng-container",13),n.YNc(10,Vn,4,1,"ng-container",13),n.YNc(11,Gn,4,1,"ng-container",13),n.YNc(12,qn,4,1,"ng-container",13),n.YNc(13,kn,2,5,"ng-container",14),n.BQk(),n.YNc(14,tt,11,8,"ng-container",15),n.YNc(15,st,3,1,"ng-template",null,16,n.W1O),n.YNc(17,dt,6,1,"ng-template",null,17,n.W1O),n.qZA()),2&o){const a=_.$implicit,l=n.MAs(16),h=n.MAs(18);n.Q6J("nzHeader",l)("nzExtra",h)("nzActive",!0),n.xp6(1),n.Q6J("ngSwitch",a.fieldName),n.xp6(1),n.Q6J("ngSwitchCase","source_ids"),n.xp6(1),n.Q6J("ngSwitchCase","disease_id"),n.xp6(1),n.Q6J("ngSwitchCase","drug_ids"),n.xp6(1),n.Q6J("ngSwitchCase","variant_alias_ids"),n.xp6(1),n.Q6J("ngSwitchCase","clinvar_entry_ids"),n.xp6(1),n.Q6J("ngSwitchCase","hgvs_expression_ids"),n.xp6(1),n.Q6J("ngSwitchCase","variant_type_ids"),n.xp6(1),n.Q6J("ngSwitchCase","phenotype_ids"),n.xp6(1),n.Q6J("ngSwitchCase","variant_id"),n.xp6(1),n.Q6J("ngSwitchCase","variant_ids"),n.xp6(1),n.Q6J("ngSwitchCase","source_id"),n.xp6(2),n.Q6J("ngIf","NEW"!==a.status)}}function vt(o,_){if(1&o&&(n.TgZ(0,"nz-collapse",9),n.YNc(1,ut,19,16,"nz-collapse-panel",10),n.qZA()),2&o){const a=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",a.untypedRevisons)}}function ft(o,_){1&o&&n._UZ(0,"nz-empty",64)}function Ct(o,_){if(1&o&&(n.ynx(0),n.TgZ(1,"nz-card",6),n.YNc(2,vt,2,1,"nz-collapse",7),n.YNc(3,ft,1,0,"ng-template",null,8,n.W1O),n.qZA(),n.BQk()),2&o){const a=n.MAs(4),l=n.oxw(),h=n.MAs(4);n.xp6(1),n.Q6J("nzExtra",h),n.xp6(1),n.Q6J("ngIf",l.revisions&&l.revisions.length>0)("ngIfElse",a)}}function zt(o,_){}function Tt(o,_){1&o&&n.YNc(0,zt,0,0,"ng-template")}function xt(o,_){if(1&o&&(n.ynx(0),n.YNc(1,Tt,1,0,void 0,73),n.BQk()),2&o){n.oxw();const a=n.MAs(5);n.xp6(1),n.Q6J("ngTemplateOutlet",a)}}function ht(o,_){}function yt(o,_){1&o&&n.YNc(0,ht,0,0,"ng-template")}function At(o,_){if(1&o&&(n.TgZ(0,"span",74),n.YNc(1,yt,1,0,void 0,73),n.qZA()),2&o){n.oxw();const a=n.MAs(5);n.xp6(1),n.Q6J("ngTemplateOutlet",a)}}function Zt(o,_){if(1&o){const a=n.EpF();n.TgZ(0,"button",75),n.NdJ("nzPopoverVisibleChange",function(h){return n.CHM(a),n.oxw(7).validationPopoverVisible=h})("click",function(){n.CHM(a);const h=n.oxw(7);return h.validationPopoverVisible=!h.validationPopoverVisible}),n._uU(1," Review Selected Revisions "),n._UZ(2,"i",76),n.qZA()}if(2&o){const a=n.oxw(2).ngrxLet,l=n.MAs(7),h=n.MAs(9),B=n.oxw(5);n.Q6J("nzPopoverTitle",l)("nzPopoverVisible",B.validationPopoverVisible)("nzPopoverContent",h)("nzPopoverTrigger",void 0)("disabled",0===B.selectedRevisionIds.length||!a.signedIn)}}function Ot(o,_){if(1&o&&(n.TgZ(0,"span"),n.YNc(1,xt,2,1,"ng-container",51),n.YNc(2,At,2,1,"ng-template",null,71,n.W1O),n.YNc(4,Zt,3,5,"ng-template",null,72,n.W1O),n.qZA()),2&o){const a=n.MAs(3),l=n.oxw().ngrxLet;n.xp6(1),n.Q6J("ngIf",l.signedIn)("ngIfElse",a)}}function Et(o,_){if(1&o&&n._UZ(0,"i",78),2&o){n.oxw(4);const a=n.MAs(3);n.Q6J("nzPopoverContent",a)}}function Mt(o,_){1&o&&(n.ynx(0),n.YNc(1,Et,1,1,"i",77),n.BQk())}const Lt=function(){return{float:"right"}};function Rt(o,_){if(1&o){const a=n.EpF();n._uU(0," Review Selected Revisions "),n.TgZ(1,"span",79),n.TgZ(2,"i",80),n.NdJ("click",function(){return n.CHM(a),n.oxw(6).validationPopoverVisible=!1}),n.qZA(),n.qZA()}2&o&&(n.xp6(1),n.Q6J("ngStyle",n.DdM(1,Lt)))}function It(o,_){if(1&o){const a=n.EpF();n.TgZ(0,"cvc-comment-input-form",83),n.NdJ("commentChange",function(h){return n.CHM(a),n.oxw(7).revisionComment=h}),n.qZA()}if(2&o){const a=n.oxw(7);n.Q6J("comment",a.revisionComment)}}function St(o,_){if(1&o){const a=n.EpF();n.TgZ(0,"span"),n.TgZ(1,"cvc-org-selector-btn-group",84),n.NdJ("selectedOrgChange",function(h){return n.CHM(a),n.oxw(8).mostRecentOrg=h}),n.TgZ(2,"button",85),n.NdJ("click",function(){return n.CHM(a),n.oxw(8).onRejectRevisionsClicked()}),n._uU(3," Reject Revision "),n.qZA(),n.qZA(),n.qZA()}if(2&o){const a=n.oxw(8);n.xp6(1),n.Q6J("selectedOrg",a.mostRecentOrg),n.xp6(1),n.Q6J("nzLoading",a.isLoading)("disabled",void 0===a.revisionComment||a.revisionComment.length<10)}}function Ft(o,_){if(1&o){const a=n.EpF();n.TgZ(0,"span"),n.TgZ(1,"cvc-org-selector-btn-group",84),n.NdJ("selectedOrgChange",function(h){return n.CHM(a),n.oxw(8).mostRecentOrg=h}),n.TgZ(2,"button",86),n.NdJ("click",function(){return n.CHM(a),n.oxw(8).onAcceptRevisionClicked()}),n._uU(3," Accept Revision "),n.qZA(),n.qZA(),n.qZA()}if(2&o){const a=n.oxw(4).ngrxLet,l=n.oxw(4);n.xp6(1),n.Q6J("selectedOrg",l.mostRecentOrg),n.xp6(1),n.Q6J("nzLoading",l.isLoading)("disabled",!(0==a&&(void 0===l.revisionComment||""===l.revisionComment||l.revisionComment.length>=10)))}}function bt(o,_){if(1&o&&n._UZ(0,"i",88),2&o){n.oxw(6);const a=n.MAs(3);n.Q6J("nzPopoverContent",a)}}function Pt(o,_){if(1&o&&(n.TgZ(0,"span"),n.YNc(1,bt,1,1,"i",87),n.qZA()),2&o){const a=n.oxw(4).ngrxLet;n.xp6(1),n.Q6J("ngIf",a>0)}}function Nt(o,_){1&o&&(n.TgZ(0,"span"),n.TgZ(1,"nz-space"),n.YNc(2,St,4,3,"span",42),n.YNc(3,Ft,4,3,"span",42),n.YNc(4,Pt,2,1,"span",42),n.qZA(),n.qZA())}function Qt(o,_){1&o&&(n.TgZ(0,"nz-space",81),n.YNc(1,It,1,1,"cvc-comment-input-form",82),n.YNc(2,Nt,5,0,"span",42),n.qZA())}function Jt(o,_){if(1&o&&(n.ynx(0),n.TgZ(1,"div",66),n.TgZ(2,"div",67),n.TgZ(3,"nz-space",68),n.YNc(4,Ot,6,2,"span",42),n.YNc(5,Mt,2,0,"ng-container",15),n.qZA(),n.YNc(6,Rt,3,2,"ng-template",null,69,n.W1O),n.YNc(8,Qt,3,0,"ng-template",null,70,n.W1O),n.qZA(),n.qZA(),n.BQk()),2&o){const a=n.oxw().ngrxLet;n.xp6(5),n.Q6J("ngIf",a>0)}}function Ut(o,_){if(1&o&&(n.ynx(0),n.YNc(1,Jt,10,1,"ng-container",2),n.BQk()),2&o){const a=n.oxw(4);n.xp6(1),n.Q6J("ngrxLet",a.viewer$)}}function Yt(o,_){if(1&o&&(n.TgZ(0,"nz-list-item"),n._uU(1),n.qZA()),2&o){const a=_.$implicit;n.xp6(1),n.Oqu(a)}}function Dt(o,_){if(1&o&&(n.TgZ(0,"nz-card",90),n.TgZ(1,"nz-list",91),n.YNc(2,Yt,2,1,"nz-list-item",92),n.qZA(),n.qZA()),2&o){const a=n.oxw(3).ngrxLet;n.xp6(2),n.Q6J("ngForOf",a)}}function Bt(o,_){if(1&o&&(n.TgZ(0,"span"),n.YNc(1,Dt,3,1,"nz-card",89),n.qZA()),2&o){const a=n.oxw(2).ngrxLet;n.xp6(1),n.Q6J("ngIf",a.length>0)}}function $t(o,_){if(1&o&&(n.TgZ(0,"nz-descriptions-item",97),n._uU(1),n.qZA()),2&o){const a=_.$implicit;n.Q6J("nzTitle",a.fieldName),n.xp6(1),n.Oqu(a.error)}}function wt(o,_){if(1&o&&(n.TgZ(0,"nz-card",94),n.TgZ(1,"nz-descriptions",95),n.YNc(2,$t,2,2,"nz-descriptions-item",96),n.qZA(),n.qZA()),2&o){const a=n.oxw(4).ngrxLet;n.xp6(2),n.Q6J("ngForOf",a)}}function Wt(o,_){if(1&o&&(n.TgZ(0,"span"),n.YNc(1,wt,3,1,"nz-card",93),n.qZA()),2&o){const a=n.oxw(3).ngrxLet;n.xp6(1),n.Q6J("ngIf",a.length>0)}}function jt(o,_){1&o&&(n.TgZ(0,"nz-space",81),n.YNc(1,Bt,2,1,"span",42),n.YNc(2,Wt,2,1,"span",42),n.qZA())}function Vt(o,_){if(1&o&&(n.ynx(0),n.YNc(1,Ut,2,1,"ng-container",2),n.YNc(2,jt,3,0,"ng-template",null,65,n.W1O),n.BQk()),2&o){const a=n.oxw(3);n.xp6(1),n.Q6J("ngrxLet",a.totalErrorCount$)}}function Kt(o,_){if(1&o&&(n.ynx(0),n.YNc(1,Vt,4,1,"ng-container",2),n.BQk()),2&o){const a=n.oxw(2);n.xp6(1),n.Q6J("ngrxLet",a.genericErrors$)}}function Gt(o,_){if(1&o&&n.YNc(0,Kt,2,1,"ng-container",2),2&o){const a=n.oxw();n.Q6J("ngrxLet",a.validationErrors$)}}let Ht=(()=>{class o{constructor(a,l,h,B,Zn){this.viewerService=a,this.networkErrorService=l,this.acceptRevisionsGql=h,this.rejectRevisionsGql=B,this.validationGql=Zn,this.selectedRevisionIds=[],this.isLoading=!1,this.success=!1,this.validationPopoverVisible=!1,this.destroy$=new Y.xQ,this.revisionSetSelectedEvent=new n.vpe,this.revisionMutationCompleted=new n.vpe,this.acceptRevisionsMutator=new w.U(l),this.rejectRevisionsMutator=new w.U(l)}ngOnChanges(a){this.untypedRevisons=this.revisions,this.selectedRevisionIds=[],this.queryRef&&this.queryRef.refetch({ids:this.selectedRevisionIds})}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(a=>{this.mostRecentOrg=a.mostRecentOrg}),this.queryRef=this.validationGql.watch({ids:[]}),this.genericErrors$=this.queryRef.valueChanges.pipe((0,x.U)(({data:a})=>a.validateRevisionsForAcceptance.genericErrors)),this.validationErrors$=this.queryRef.valueChanges.pipe((0,x.U)(({data:a})=>a.validateRevisionsForAcceptance.validationErrors)),this.totalErrorCount$=this.queryRef.valueChanges.pipe((0,x.U)(({data:a})=>a.validateRevisionsForAcceptance.genericErrors.length+a.validateRevisionsForAcceptance.validationErrors.length),(0,t.O)(0)),this.untypedRevisons=this.revisions}onChangesetSelected(a){this.revisionSetSelectedEvent.emit(a)}onRevisionCheckboxClicked(a,l){a?this.selectedRevisionIds.push(l):this.selectedRevisionIds=this.selectedRevisionIds.filter(h=>h!=l),this.queryRef.refetch({ids:this.selectedRevisionIds})}setupMutationResultHandlers(a,l){a.submitSuccess$.pipe((0,F.R)(this.destroy$)).subscribe(h=>{h&&(this.isLoading=!1,this.revisionMutationCompleted.emit(),this.errors=void 0,this.success=l,this.validationPopoverVisible=!1,this.selectedRevisionIds=[])}),a.submitError$.pipe((0,F.R)(this.destroy$)).subscribe(h=>{h.length>0&&(this.isLoading=!1,this.success=!1,this.errors=h,this.validationPopoverVisible=!1,this.selectedRevisionIds=[])})}onRejectRevisionsClicked(){var a;if(this.revisionComment&&""!==this.revisionComment){this.isLoading=!0;let l=this.rejectRevisionsMutator.mutate(this.rejectRevisionsGql,{input:{ids:this.selectedRevisionIds,organizationId:null===(a=this.mostRecentOrg)||void 0===a?void 0:a.id,comment:this.revisionComment}});this.setupMutationResultHandlers(l,"rejected")}}onAcceptRevisionClicked(){var a;this.isLoading=!0;let l=this.acceptRevisionsMutator.mutate(this.acceptRevisionsGql,{input:{ids:this.selectedRevisionIds,organizationId:null===(a=this.mostRecentOrg)||void 0===a?void 0:a.id,comment:""===this.revisionComment?void 0:this.revisionComment}});this.setupMutationResultHandlers(l,"accepted")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(a){var l;this.errors=null===(l=this.errors)||void 0===l?void 0:l.filter(h=>h!=a)}onSuccessBannerClose(){this.success=!1}}return o.\u0275fac=function(a){return new(a||o)(n.Y36(P.a),n.Y36(N.Y),n.Y36(e.ti),n.Y36(e.VZq),n.Y36(e.Qzn))},o.\u0275cmp=n.Xpm({type:o,selectors:[["cvc-revision-list"]],inputs:{revisions:"revisions"},outputs:{revisionSetSelectedEvent:"revisionSetSelectedEvent",revisionMutationCompleted:"revisionMutationCompleted"},features:[n.TTD],decls:5,vars:3,consts:[["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],[4,"ngrxLet"],["moderationButtons",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose"],["nzTitle","Revisions",1,"card-list",3,"nzExtra"],["class","revision-list",4,"ngIf","ngIfElse"],["noRevisions",""],[1,"revision-list"],[3,"nzHeader","nzExtra","nzActive",4,"ngFor","ngForOf"],[3,"nzHeader","nzExtra","nzActive"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"],["revCardHeaderTitle",""],["revCardHeaderExtra",""],["entityType","Sources",3,"diffObject"],["itemTemplate",""],[3,"source"],["entityType","Disease",3,"diffObject"],[3,"disease"],["entityType","Drugs",3,"diffObject"],[3,"drug"],["entityType","Variant Aliases",3,"diffObject"],["entityType","ClinVar Entries",3,"diffObject"],["entityType","HGVS Expressions",3,"diffObject"],["entityType","Variant Types",3,"diffObject"],[3,"variantType"],["entityType","Phenotypes",3,"diffObject"],[3,"phenotype"],["entityType","Variant",3,"diffObject"],[3,"variant"],["entityType","Variants",3,"diffObject"],["entityType","Source",3,"diffObject"],[3,"currentValue","suggestedValue","left","right","entityType"],["nzSpan","16"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"commentBodySegments"],[3,"user"],[4,"nzSpaceItem"],["nz-icon","","nzType","civic:revision"],["nz-popover","","nz-icon","","nzType","comment","nzTheme","outline",3,"nzPopoverContent",4,"nzSpaceItem"],["creationCommentTemplate",""],["nz-popover","","nz-icon","","nzType","comment","nzTheme","outline",3,"nzPopoverContent"],["nzSize","small",3,"click"],[3,"status",4,"nzSpaceItem"],["nzType","vertical",4,"nzSpaceItem"],["nz-button","","nzType","link",3,"click",4,"nzSpaceItem"],[4,"ngIf","ngIfElse"],["noRevisor",""],["nz-typography","","nzType","secondary"],[3,"status"],["nzType","vertical"],["nz-button","","nzType","link",3,"click"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions.",3,"nzDisabled",4,"ngIf","ngIfElse"],["loggedIn",""],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions.",3,"nzDisabled"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Curators may only reject their own revisions.",3,"nzDisabled",4,"ngIf","ngIfElse"],["canRevise",""],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Curators may only reject their own revisions.",3,"nzDisabled"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Select Revision for Acceptance/Rejection",3,"nzCheckedChange"],["nzNotFoundImage","simple","nzNotFoundContent","No Revisions matching filters"],["validationErrorTemplate",""],["nz-row","",2,"margin-top","1em"],["nz-col","","nzSpan","24",2,"text-align","right"],["nzDirection","horizontal"],["validationPopoverTitleTemplate",""],["validationPopoverContentTemplate",""],["notSignedIn",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click"],["nz-icon","","nzType","caret-down","nzTheme","outline"],["nz-icon","","nzType","exclamation-circle","nzTheme","twotone","nzTwotoneColor","red","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent",4,"nzSpaceItem"],["nz-icon","","nzType","exclamation-circle","nzTheme","twotone","nzTwotoneColor","red","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzDirection","vertical"],[3,"comment","commentChange",4,"nzSpaceItem"],[3,"comment","commentChange"],[3,"selectedOrg","selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzSize","small","nzDanger","",3,"nzLoading","disabled","click"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzSize","small",3,"nzLoading","disabled","click"],["nz-icon","","nzTwotoneColor","red","nzType","exclamation-circle","nzTheme","twotone","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent",4,"ngIf"],["nz-icon","","nzTwotoneColor","red","nzType","exclamation-circle","nzTheme","twotone","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent"],["nzTitle","Errors",4,"ngIf"],["nzTitle","Errors"],["nzSize","small"],[4,"ngFor","ngForOf"],["nzTitle","Validation Errors",4,"ngIf"],["nzTitle","Validation Errors"],["nzBordered",""],[3,"nzTitle",4,"ngFor","ngForOf"],[3,"nzTitle"]],template:function(a,l){1&a&&(n.YNc(0,Mn,1,1,"nz-alert",0),n.YNc(1,Ln,1,1,"nz-alert",1),n.YNc(2,Ct,5,3,"ng-container",2),n.YNc(3,Gt,1,1,"ng-template",null,3,n.W1O)),2&a&&(n.Q6J("ngForOf",l.errors),n.xp6(1),n.Q6J("ngIf",l.success),n.xp6(1),n.Q6J("ngrxLet",l.viewer$))},directives:[R.sg,$.r,R.O5,G.eJ,C.bd,I.yH,I.Zv,R.RF,R.n9,rn,_n.T,ln.n,k.u,on.j,an.j,dn.i,un.I,R.ED,vn,fn.g,Q.SK,Q.t3,Cn.m,zn.ZU,Tn.I,J.NU,J.$1,pn.Ls,gn.w,xn.lU,hn.h,mn.ix,yn.Ie,An.SY,T.p9,R.tP,W.dQ,R.PC,g.b,M.q,D.m,p.n_,p.AA,en.R7,en.uj],pipes:[On.I,En.wr],styles:["[_nghost-%COMP%]{display:block}nz-list[_ngcontent-%COMP%]   .kept[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{background-color:#f6ffed;color:#135200}nz-list[_ngcontent-%COMP%]   .removed[_ngcontent-%COMP%]{background-color:#fff1f0;color:#820014}nz-list[_ngcontent-%COMP%]   .suggested[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}"]}),o})();var qt=i(8747),kt=i(6699);function Xt(o,_){if(1&o){const a=n.EpF();n.TgZ(0,"cvc-revision-list",14),n.NdJ("revisionSetSelectedEvent",function(h){return n.CHM(a),n.oxw(2).onRevisionSetSelected(h)})("revisionMutationCompleted",function(){return n.CHM(a),n.oxw(2).refresh()}),n.ALo(1,"ngrxPush"),n.qZA()}if(2&o){const a=n.oxw(2);n.Q6J("revisions",n.lcZ(1,1,a.revisions$))}}function ne(o,_){if(1&o){const a=n.EpF();n.TgZ(0,"button",17),n.NdJ("click",function(){n.CHM(a);const h=n.oxw(2).ngrxLet;return n.oxw(2).loadMore(null==h?null:h.endCursor)}),n._uU(1,"Load More"),n.qZA()}}function te(o,_){1&o&&(n.ynx(0),n.YNc(1,ne,2,0,"button",16),n.BQk())}function ee(o,_){if(1&o&&(n.ynx(0),n.YNc(1,te,2,0,"ng-container",15),n.BQk()),2&o){const a=_.ngrxLet;n.xp6(1),n.Q6J("ngIf",null==a?null:a.hasNextPage)}}function oe(o,_){if(1&o){const a=n.EpF();n.TgZ(0,"nz-row"),n.TgZ(1,"nz-tag",19),n.NdJ("nzOnClose",function(){return n.CHM(a),n.oxw(3).onSetFilterClearClicked()}),n._uU(2),n.qZA(),n.qZA()}if(2&o){const a=n.oxw(3);n.xp6(2),n.hij("Group: ",a.filteredSet,"")}}function ie(o,_){1&o&&(n.TgZ(0,"nz-space",4),n.YNc(1,oe,3,1,"nz-row",18),n.qZA())}function ae(o,_){if(1&o&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&o){const a=_.$implicit;n.xp6(1),n.Oqu(a.displayName)}}function se(o,_){if(1&o&&n._UZ(0,"nz-avatar",22),2&o){const a=n.oxw().$implicit;n.Q6J("nzSrc",a.profileImagePath)}}function ce(o,_){if(1&o&&(n._UZ(0,"nz-avatar",23),n.ALo(1,"uppercase")),2&o){const a=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,a.username.charAt(0)))}}function re(o,_){if(1&o&&(n.YNc(0,se,1,1,"nz-avatar",20),n.YNc(1,ce,2,3,"ng-template",null,21,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&o){const a=_.$implicit,l=n.MAs(2);n.Q6J("ngIf",a.profileImagePath)("ngIfElse",l),n.xp6(4),n.Oqu(a.username)}}function _e(o,_){if(1&o&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&o){const a=_.$implicit;n.xp6(1),n.Oqu(a.displayName)}}function le(o,_){if(1&o&&n._UZ(0,"nz-avatar",22),2&o){const a=n.oxw().$implicit;n.Q6J("nzSrc",a.profileImagePath)}}function pe(o,_){if(1&o&&(n._UZ(0,"nz-avatar",23),n.ALo(1,"uppercase")),2&o){const a=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,a.username.charAt(0)))}}function ge(o,_){if(1&o&&(n.YNc(0,le,1,1,"nz-avatar",20),n.YNc(1,pe,2,3,"ng-template",null,21,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&o){const a=_.$implicit,l=n.MAs(2);n.Q6J("ngIf",a.profileImagePath)("ngIfElse",l),n.xp6(4),n.Oqu(a.username)}}function me(o,_){if(1&o){const a=n.EpF();n.ynx(0),n.TgZ(1,"nz-row",2),n.TgZ(2,"nz-col",3),n.TgZ(3,"nz-space",4),n.YNc(4,Xt,2,3,"cvc-revision-list",5),n.YNc(5,ee,2,1,"ng-container",6),n.qZA(),n.qZA(),n.TgZ(6,"nz-col",7),n.YNc(7,ie,2,0,"nz-space",8),n.TgZ(8,"cvc-participant-list",9),n.NdJ("participantSelectedEvent",function(h){return n.CHM(a),n.oxw().onStatusSelected(h)}),n.YNc(9,ae,2,1,"ng-template",null,10,n.W1O),n.qZA(),n.TgZ(11,"cvc-participant-list",11),n.NdJ("participantSelectedEvent",function(h){return n.CHM(a),n.oxw().onRevisorSelected(h)}),n.ALo(12,"ngrxPush"),n.YNc(13,re,5,3,"ng-template",null,10,n.W1O),n.qZA(),n.TgZ(15,"cvc-participant-list",12),n.NdJ("participantSelectedEvent",function(h){return n.CHM(a),n.oxw().onFieldNameSelected(h)}),n.ALo(16,"ngrxPush"),n.YNc(17,_e,2,1,"ng-template",null,10,n.W1O),n.qZA(),n.TgZ(19,"cvc-participant-list",13),n.NdJ("participantSelectedEvent",function(h){return n.CHM(a),n.oxw().onResolverSelected(h)}),n.ALo(20,"ngrxPush"),n.YNc(21,ge,5,3,"ng-template",null,10,n.W1O),n.qZA(),n.qZA(),n.qZA(),n.BQk()}if(2&o){const a=n.oxw();n.xp6(1),n.Q6J("nzGutter",16),n.xp6(4),n.Q6J("ngrxLet",a.pageInfo$),n.xp6(2),n.Q6J("ngIf",a.filteredSet),n.xp6(1),n.Q6J("preselectedOption",a.selectableStatuses[0])("participantList",a.selectableStatuses),n.xp6(3),n.Q6J("participantList",n.lcZ(12,8,a.uniqueRevisors$)),n.xp6(4),n.Q6J("participantList",n.lcZ(16,10,a.revisionFields$)),n.xp6(4),n.Q6J("participantList",n.lcZ(20,12,a.uniqueResolvers$))}}function de(o,_){1&o&&(n.ynx(0),n.TgZ(1,"nz-row",25),n._UZ(2,"i",26),n.qZA(),n.BQk())}function ue(o,_){1&o&&n._UZ(0,"nz-empty",27)}function ve(o,_){if(1&o&&(n.YNc(0,de,3,0,"ng-container",0),n.ALo(1,"ngrxPush"),n.YNc(2,ue,1,0,"ng-template",null,24,n.W1O)),2&o){const a=n.MAs(3),l=n.oxw();n.Q6J("ngIf",n.lcZ(1,2,l.isLoading$))("ngIfElse",a)}}let fe=(()=>{class o{constructor(a,l){this.gql=a,this.route=l,this.filteredSet=void 0,this.selectableStatuses=[{id:4,displayName:"New",value:e.FJi.New},{id:1,displayName:"Accepted",value:e.FJi.Accepted},{id:2,displayName:"Rejected",value:e.FJi.Rejected},{id:3,displayName:"Superseded",value:e.FJi.Superseded}],this.defaultPageSize=10}ngOnInit(){this.routeSub=this.route.params.subscribe(a=>{this.queryRef=this.gql.watch({first:this.defaultPageSize,subject:{id:this.id,entityType:this.entityType},status:e.FJi.New});let l=this.queryRef.valueChanges;this.revisions$=l.pipe((0,s.j)("data","revisions","edges"),(0,x.U)(h=>h.map(B=>B.node))),this.isLoading$=l.pipe((0,x.U)(h=>h.loading),(0,t.O)(!0)),this.pageInfo$=l.pipe((0,s.j)("data","revisions","pageInfo")),this.uniqueRevisors$=l.pipe((0,x.U)(({data:h})=>{var B;return null===(B=h.revisions)||void 0===B?void 0:B.uniqueRevisors})),this.uniqueResolvers$=l.pipe((0,x.U)(({data:h})=>{var B;return null===(B=h.revisions)||void 0===B?void 0:B.uniqueResolvers})),this.revisionFields$=l.pipe((0,x.U)(({data:h})=>{var B;return null===(B=h.revisions)||void 0===B?void 0:B.revisedFieldNames.map((Zn,Ce)=>Object.assign(Object.assign({},Zn),{id:Ce}))})),this.unfilteredCount$=l.pipe((0,s.j)("data","revisions","unfilteredCountForSubject"))})}ngOnDestroy(){var a;null===(a=this.routeSub)||void 0===a||a.unsubscribe()}onFieldNameSelected(a){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},fieldName:a?a.name:void 0})}onRevisorSelected(a){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},originatingUserId:a?a.id:void 0})}onResolverSelected(a){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},resolvingUserId:a?a.id:void 0})}onStatusSelected(a){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},status:a?a.value:void 0})}onRevisionSetSelected(a){this.filteredSet=a,this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},revisionsetId:a||void 0})}onSetFilterClearClicked(){this.filteredSet=void 0,this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},revisionsetId:void 0})}refresh(){this.queryRef.refetch()}loadMore(a){var l;null===(l=this.queryRef)||void 0===l||l.fetchMore({variables:{first:this.defaultPageSize,after:a}})}}return o.\u0275fac=function(a){return new(a||o)(n.Y36(e.L5n),n.Y36(u.gz))},o.\u0275cmp=n.Xpm({type:o,selectors:[["cvc-revisions-list-and-filter"]],inputs:{id:"id",entityType:"entityType"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noRevisions",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"revisions","revisionSetSelectedEvent","revisionMutationCompleted",4,"nzSpaceItem"],[4,"ngrxLet"],["nzSpan","6"],["nzDirection","vertical",4,"ngIf"],["listTitle","Revision Status",3,"preselectedOption","participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Revisors",3,"participantList","participantSelectedEvent"],["listTitle","Fields Revised",3,"participantList","participantSelectedEvent"],["listTitle","Resolvers",3,"participantList","participantSelectedEvent"],[3,"revisions","revisionSetSelectedEvent","revisionMutationCompleted"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[4,"nzSpaceItem"],["nzMode","closeable",3,"nzOnClose"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["noneFound",""],["nzJustify","center"],["nz-icon","","nzType","loading",2,"font-size","32px"],["nzNotFoundImage","simple","nzNotFoundContent","Entity has no Revisions"]],template:function(a,l){if(1&a&&(n.YNc(0,me,23,14,"ng-container",0),n.ALo(1,"ngrxPush"),n.YNc(2,ve,4,4,"ng-template",null,1,n.W1O)),2&a){const h=n.MAs(3);n.Q6J("ngIf",n.lcZ(1,2,l.unfilteredCount$))("ngIfElse",h)}},directives:[R.O5,Q.SK,Q.t3,J.NU,J.$1,Ht,G.eJ,mn.ix,W.dQ,gn.w,on.j,qt.l,kt.Dz,pn.Ls,T.p9],pipes:[G.fM,R.gd],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}),o})()},2914:(nn,j,i)=>{i.d(j,{U:()=>G});var e=i(9808),s=i(6949),x=i(1894),t=i(3762),n=i(7484),u=i(8144),R=i(8481),Q=i(3618),J=i(1150),Y=i(6699),w=i(1835),F=i(685),P=i(6042),N=i(647),$=i(5e3);let G=(()=>{class C{}return C.\u0275fac=function(p){return new(p||C)},C.\u0275mod=$.oAB({type:C}),C.\u0275inj=$.cJS({imports:[[e.ez,s.WG,x.Jb,t.Ph,n.vh,u.zf,R.X,Q.ZJ,Y.Rt,F.Xo,P.sL,N.PV,J.N,w.i]]}),C})()},759:(nn,j,i)=>{i.d(j,{N:()=>V});var e=i(373),s=i(5e3),x=i(712),t=i(3618),n=i(9808),u=i(325),R=i(6699),Q=i(3610),J=i(6265),Y=i(3762),w=i(2937);function F(O,K){1&O&&(s.ynx(0),s._uU(1,", "),s.BQk())}function P(O,K){if(1&O&&(s.ynx(0),s._uU(1),s.ALo(2,"eventVerbiage"),s.YNc(3,F,2,0,"ng-container",10),s.BQk()),2&O){const m=K.$implicit,U=K.last;s.xp6(1),s.hij(" ",s.Dn7(2,2,m.action,"contributor-card",m.count),""),s.xp6(2),s.Q6J("ngIf",!U)}}function N(O,K){if(1&O&&(s.TgZ(0,"nz-list",8),s.TgZ(1,"nz-list-item"),s._uU(2," Contributions: "),s.YNc(3,P,4,6,"ng-container",9),s.qZA(),s.TgZ(4,"nz-list-item"),s._uU(5),s.ALo(6,"date"),s.qZA(),s.qZA()),2&O){const m=s.oxw(2).$implicit;s.xp6(3),s.Q6J("ngForOf",m.uniqueActions),s.xp6(2),s.hij(" Last Contribution: ",s.lcZ(6,2,m.lastActionDate)," ")}}function $(O,K){if(1&O&&(s.TgZ(0,"cvc-user-popover",6),s.YNc(1,N,7,4,"ng-template",null,7,s.W1O),s.qZA()),2&O){const m=s.oxw().$implicit;s.Q6J("userId",m.user.id)}}function G(O,K){if(1&O&&(s.TgZ(0,"a",3),s._UZ(1,"nz-avatar",4),s.YNc(2,$,3,1,"ng-template",null,5,s.W1O),s.qZA()),2&O){const m=K.$implicit,U=s.MAs(3);s.MGl("routerLink","/users/",m.user.id,""),s.xp6(1),s.Q6J("nzSize",14)("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",U)("nzSrc",m.user.profileImagePath)}}function C(O,K){if(1&O&&(s.ynx(0),s.YNc(1,G,4,5,"a",2),s.BQk()),2&O){const m=s.oxw();s.xp6(1),s.Q6J("ngForOf",m.sortedContributors)}}function I(O,K){1&O&&s._uU(0," None\n")}let p=(()=>{class O{ngOnInit(){if(void 0===this.contributors)throw new Error("Must pass a list of contributors into the contributor stack");this.sortedContributors=this.contributors.slice(),this.sortedContributors.sort((m,U)=>U.totalActionCount-m.totalActionCount)}}return O.\u0275fac=function(m){return new(m||O)},O.\u0275cmp=s.Xpm({type:O,selectors:[["cvc-contributor-stack"]],inputs:{contributors:"contributors"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noContributors",""],["class","avatar",3,"routerLink",4,"ngFor","ngForOf"],[1,"avatar",3,"routerLink"],["nz-popover","","nzPopoverTrigger","hover","nzPopoverPlacement","bottomRight","nzIcon","user","nzSize","small",3,"nzSize","nzPopoverMouseEnterDelay","nzPopoverContent","nzSrc"],["curatorPopover",""],[3,"userId"],["additionalMetadata",""],["nzHeader","Activity"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(m,U){if(1&m&&(s.YNc(0,C,2,1,"ng-container",0),s.YNc(1,I,1,0,"ng-template",null,1,s.W1O)),2&m){const L=s.MAs(2);s.Q6J("ngIf",U.sortedContributors&&U.sortedContributors.length>0)("ngIfElse",L)}},directives:[n.O5,n.sg,u.yS,R.Dz,Q.lU,J.q,Y.n_,Y.AA],pipes:[w.R,n.uU],styles:[""]}),O})();var f=i(6949);function z(O,K){if(1&O&&(s.ynx(0),s._UZ(1,"cvc-contributor-stack",5),s.BQk()),2&O){const m=K.ngIf;s.xp6(1),s.Q6J("contributors",m)}}function S(O,K){1&O&&s._uU(0," None ")}function y(O,K){if(1&O&&(s.ynx(0),s._UZ(1,"cvc-contributor-stack",5),s.BQk()),2&O){const m=K.ngIf;s.xp6(1),s.Q6J("contributors",m)}}function b(O,K){1&O&&s._uU(0," None ")}let V=(()=>{class O{constructor(m){this.gql=m}ngOnInit(){if(void 0===this.subscribable)throw new Error("Must pass a subscribable into ContributorAvatars component.");let m=this.gql.watch({subscribable:this.subscribable}).valueChanges;this.curators$=m.pipe((0,e.j)("data","contributors","curators")),this.editors$=m.pipe((0,e.j)("data","contributors","editors"))}}return O.\u0275fac=function(m){return new(m||O)(s.Y36(x.kQf))},O.\u0275cmp=s.Xpm({type:O,selectors:[["cvc-contributor-avatars"]],inputs:{subscribable:"subscribable"},decls:14,vars:8,consts:[["nz-typography","","nzType","secondary",1,"role-group-label"],[1,"role-group"],[4,"ngIf","ngIfElse"],["noCurators",""],["noEditors",""],[3,"contributors"]],template:function(m,U){if(1&m&&(s.TgZ(0,"span",0),s._uU(1,"Curators:"),s.qZA(),s.TgZ(2,"div",1),s.YNc(3,z,2,1,"ng-container",2),s.ALo(4,"ngrxPush"),s.YNc(5,S,1,0,"ng-template",null,3,s.W1O),s.qZA(),s.TgZ(7,"span",0),s._uU(8,"Editors:"),s.qZA(),s.TgZ(9,"div",1),s.YNc(10,y,2,1,"ng-container",2),s.ALo(11,"ngrxPush"),s.YNc(12,b,1,0,"ng-template",null,4,s.W1O),s.qZA()),2&m){const L=s.MAs(6),E=s.MAs(13);s.xp6(3),s.Q6J("ngIf",s.lcZ(4,4,U.curators$))("ngIfElse",L),s.xp6(7),s.Q6J("ngIf",s.lcZ(11,6,U.editors$))("ngIfElse",E)}},directives:[t.ZU,n.O5,p],pipes:[f.fM],styles:["[_nghost-%COMP%]{display:inline-block}.role-group-label[_ngcontent-%COMP%]{margin-left:12px}.role-group[_ngcontent-%COMP%]{display:inline-block}.role-group[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{display:inline-block;margin-left:2px}"]}),O})()},5750:(nn,j,i)=>{i.d(j,{Z:()=>F});var e=i(9808),s=i(6949),x=i(3618),t=i(325),n=i(6699),u=i(3610),R=i(9444),Q=i(3762),J=i(6081),Y=i(5e3);let w=(()=>{class P{}return P.\u0275fac=function($){return new($||P)},P.\u0275mod=Y.oAB({type:P}),P.\u0275inj=Y.cJS({imports:[[e.ez,t.Bz,n.Rt,u.$6,Q.Ph,R.s,J.J]]}),P})(),F=(()=>{class P{}return P.\u0275fac=function($){return new($||P)},P.\u0275mod=Y.oAB({type:P}),P.\u0275inj=Y.cJS({imports:[[e.ez,s.WG,x.ZJ,w]]}),P})()},9077:(nn,j,i)=>{i.d(j,{Q:()=>C});var e=i(6123),s=i(712),x=i(8929),t=i(4850),n=i(7625),u=i(5e3),R=i(9169),Q=i(9808),J=i(6042),Y=i(2643),w=i(2683),F=i(404),P=i(647),N=i(6949);function $(I,p){if(1&I){const f=u.EpF();u.ynx(0),u.TgZ(1,"button",2),u.NdJ("click",function(){return u.CHM(f),u.oxw().unsubscribe()}),u._UZ(2,"i",3),u.qZA(),u.BQk()}if(2&I){const f=u.oxw();u.xp6(1),u.Q6J("nzLoading",f.isSubmitting)}}function G(I,p){if(1&I){const f=u.EpF();u.TgZ(0,"button",4),u.NdJ("click",function(){return u.CHM(f),u.oxw().subscribe()}),u._UZ(1,"i",5),u.qZA()}if(2&I){const f=u.oxw();u.Q6J("nzLoading",f.isSubmitting)}}let C=(()=>{class I{constructor(f,z,S,y){this.isSubscribedGQL=f,this.unsubscribeMutation=z,this.subscribeMutation=S,this.networkErrorService=y,this.isSubmitting=!1,this.destroy$=new x.xQ,this.unsubscribeMutator=new e.U(y),this.subscribeMutator=new e.U(y)}ngOnInit(){if(void 0===this.viewer)throw new Error("Must pass in a viewer to the CvcEntitySubscriptionButtonComponent");if(void 0===this.typename)throw new Error("Must pass in a typename to the CvcEntitySubscriptionButtonComponent");if(void 0===this.subscribableId)throw new Error("Must pass in a subscribableId to the CvcEntitySubscriptionButtonComponent");this.subscribable={id:this.subscribableId,entityType:s.o71[this.typename]},this.queryRef=this.isSubscribedGQL.watch({subscribable:this.subscribable}),this.existingSubscription$=this.queryRef.valueChanges.pipe((0,t.U)(({data:z})=>z.subscriptionForEntity))}subscribe(){this.subscribable&&(this.isSubmitting=!0,this.subscribeMutator.mutate(this.subscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,n.R)(this.destroy$)).subscribe(z=>{var S;z&&(null===(S=this.queryRef)||void 0===S||S.refetch(),this.isSubmitting=!1)}))}unsubscribe(){this.subscribable&&(this.isSubmitting=!0,this.unsubscribeMutator.mutate(this.unsubscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,n.R)(this.destroy$)).subscribe(z=>{var S;z&&(null===(S=this.queryRef)||void 0===S||S.refetch(),this.isSubmitting=!1)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return I.\u0275fac=function(f){return new(f||I)(u.Y36(s.A4J),u.Y36(s.m$d),u.Y36(s.jMx),u.Y36(R.Y))},I.\u0275cmp=u.Xpm({type:I,selectors:[["cvc-entity-subscription-button"]],inputs:{viewer:"viewer",typename:"typename",subscribableId:"subscribableId"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noSub",""],["nz-button","","nz-tooltip","Unsubscribe","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","bell","nzTheme","fill"],["nz-button","","nz-tooltip","Subscribe","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","bell","nzTheme","outline"]],template:function(f,z){if(1&f&&(u.YNc(0,$,3,1,"ng-container",0),u.ALo(1,"ngrxPush"),u.YNc(2,G,2,1,"ng-template",null,1,u.W1O)),2&f){const S=u.MAs(3);u.Q6J("ngIf",u.lcZ(1,2,z.existingSubscription$))("ngIfElse",S)}},directives:[Q.O5,J.ix,Y.dQ,w.w,F.SY,P.Ls],pipes:[N.fM],styles:["[_nghost-%COMP%]{display:block}"]}),I})()},4609:(nn,j,i)=>{i.d(j,{g:()=>R});var e=i(9808),s=i(6042),x=i(6949),t=i(647),n=i(404),u=i(5e3);let R=(()=>{class Q{}return Q.\u0275fac=function(Y){return new(Y||Q)},Q.\u0275mod=u.oAB({type:Q}),Q.\u0275inj=u.cJS({imports:[[e.ez,s.sL,t.PV,n.cg,x.WG]]}),Q})()},8747:(nn,j,i)=>{i.d(j,{l:()=>G});var e=i(5e3),s=i(9808),x=i(7484),t=i(3762),n=i(6042),u=i(2643),R=i(2683),Q=i(647);const J=["itemTemplate"],Y=function(C){return{$implicit:C}};function w(C,I){if(1&C){const p=e.EpF();e.TgZ(0,"nz-list-item",5),e.NdJ("click",function(){e.CHM(p);const z=e.oxw().$implicit;return e.oxw(2).onParticipantSelected(z)}),e.GkF(1,6),e.qZA()}if(2&C){const p=e.oxw().$implicit,f=e.oxw(2);e.ekj("selected-participant",p.id==(null==f.selectedItem?null:f.selectedItem.id)),e.xp6(1),e.Q6J("ngTemplateOutlet",f.itemTemplateRef||null)("ngTemplateOutletContext",e.VKq(4,Y,p))}}function F(C,I){if(1&C&&(e.ynx(0),e.YNc(1,w,2,6,"nz-list-item",4),e.BQk()),2&C){const p=I.index,f=e.oxw(2);e.xp6(1),e.Q6J("ngIf",p+1<=f.defaultListSize)}}function P(C,I){if(1&C){const p=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){return e.CHM(p),e.oxw(2).onExpandClicked()}),e._UZ(1,"i",8),e._uU(2," Expand "),e.qZA()}}function N(C,I){if(1&C){const p=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){return e.CHM(p),e.oxw(2).onCollapseClicked()}),e._UZ(1,"i",9),e._uU(2," Collapse "),e.qZA()}}function $(C,I){if(1&C&&(e.ynx(0),e.TgZ(1,"nz-card",1),e.TgZ(2,"nz-list"),e.YNc(3,F,2,1,"ng-container",2),e.qZA(),e.YNc(4,P,3,0,"button",3),e.YNc(5,N,3,0,"button",3),e.qZA(),e.BQk()),2&C){const p=e.oxw();e.xp6(1),e.Q6J("nzTitle",p.listTitle),e.xp6(2),e.Q6J("ngForOf",p.participantList),e.xp6(1),e.Q6J("ngIf",p.participantList.length>p.defaultListSize),e.xp6(1),e.Q6J("ngIf",p.isExpanded)}}let G=(()=>{class C{constructor(){this.defaultListSize=5,this.participantSelectedEvent=new e.vpe,this.isExpanded=!1}ngOnInit(){this.preselectedOption&&(this.selectedItem=this.preselectedOption)}onParticipantSelected(p){var f;this.selectedItem=p.id==(null===(f=this.selectedItem)||void 0===f?void 0:f.id)?void 0:p,this.participantSelectedEvent.emit(this.selectedItem)}onExpandClicked(){this.originalDefaultListSize=this.defaultListSize,this.defaultListSize=this.participantList.length,this.isExpanded=!0}onCollapseClicked(){this.originalDefaultListSize&&(this.defaultListSize=this.originalDefaultListSize,this.isExpanded=!1)}}return C.\u0275fac=function(p){return new(p||C)},C.\u0275cmp=e.Xpm({type:C,selectors:[["cvc-participant-list"]],contentQueries:function(p,f,z){if(1&p&&e.Suo(z,J,5),2&p){let S;e.iGM(S=e.CRH())&&(f.itemTemplateRef=S.first)}},inputs:{participantList:"participantList",listTitle:"listTitle",defaultListSize:"defaultListSize",preselectedOption:"preselectedOption"},outputs:{participantSelectedEvent:"participantSelectedEvent"},decls:1,vars:1,consts:[[4,"ngIf"],["nz-type","inner",2,"margin-bottom","1em",3,"nzTitle"],[4,"ngFor","ngForOf"],["nz-button","","nzType","default","nzSize","small",3,"click",4,"ngIf"],["nzSize","small","class","participant-list-item",3,"selected-participant","click",4,"ngIf"],["nzSize","small",1,"participant-list-item",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-button","","nzType","default","nzSize","small",3,"click"],["nz-icon","","nzType","vertical-align-bottom"],["nz-icon","","nzType","vertical-align-top"]],template:function(p,f){1&p&&e.YNc(0,$,6,4,"ng-container",0),2&p&&e.Q6J("ngIf",f.participantList&&f.participantList.length>0)},directives:[s.O5,x.bd,t.n_,s.sg,t.AA,s.tP,n.ix,u.dQ,R.w,Q.Ls],styles:[".participant-list-item[_ngcontent-%COMP%]:hover{border:1px solid #40a9ff;cursor:pointer}.participant-list-item[_ngcontent-%COMP%]{padding:2px;margin:2px}.selected-participant[_ngcontent-%COMP%]{background:#40a9ff;color:#fff}"]}),C})()},4590:(nn,j,i)=>{i.d(j,{h:()=>w});var e=i(5e3),s=i(9808),x=i(8481),t=i(647);function n(F,P){1&F&&e._UZ(0,"i",7)}function u(F,P){1&F&&e._UZ(0,"i",8)}function R(F,P){1&F&&e._UZ(0,"i",9)}function Q(F,P){1&F&&e._UZ(0,"i",10)}function J(F,P){1&F&&e._UZ(0,"i",10)}function Y(F,P){if(1&F&&(e.TgZ(0,"nz-tag",1),e.ynx(1,2),e.YNc(2,n,1,0,"i",3),e.YNc(3,u,1,0,"i",4),e.YNc(4,R,1,0,"i",5),e.YNc(5,Q,1,0,"i",6),e.YNc(6,J,1,0,"i",6),e.BQk(),e._uU(7),e.ALo(8,"titlecase"),e.qZA()),2&F){const N=e.oxw();e.Q6J("nzColor",N.tagStatus),e.xp6(1),e.Q6J("ngSwitch",N.tagStatus),e.xp6(1),e.Q6J("ngSwitchCase","success"),e.xp6(1),e.Q6J("ngSwitchCase","error"),e.xp6(1),e.Q6J("ngSwitchCase","warning"),e.xp6(1),e.Q6J("ngSwitchCase","processing"),e.xp6(1),e.Q6J("ngSwitchCase","default"),e.xp6(1),e.hij(" ",e.lcZ(8,8,N.status),"\n")}}let w=(()=>{class F{constructor(){this.statusColorMap={ACCEPTED:"success",REJECTED:"error",SUBMITTED:"warning",NEW:"processing",SUPERSEDED:"default",OPEN:"error",RESOLVED:"default"}}set status(N){this._status=N,N&&(this.tagStatus=this.statusColorMap[N])}get status(){return this._status}ngOnInit(){if(void 0===this.status)throw new Error("Must pass a valid EvidenceStatus or RevisionStatus to cvc-status-tag component")}}return F.\u0275fac=function(N){return new(N||F)},F.\u0275cmp=e.Xpm({type:F,selectors:[["cvc-status-tag"]],inputs:{status:"status"},decls:1,vars:1,consts:[[3,"nzColor",4,"ngIf"],[3,"nzColor"],[3,"ngSwitch"],["nz-icon","","nzType","check-circle",4,"ngSwitchCase"],["nz-icon","","nzType","close-circle",4,"ngSwitchCase"],["nz-icon","","nzType","exclamation-circle",4,"ngSwitchCase"],["nz-icon","",4,"ngSwitchCase"],["nz-icon","","nzType","check-circle"],["nz-icon","","nzType","close-circle"],["nz-icon","","nzType","exclamation-circle"],["nz-icon",""]],template:function(N,$){1&N&&e.YNc(0,Y,9,10,"nz-tag",0),2&N&&e.Q6J("ngIf",$.tagStatus)},directives:[s.O5,x.j,s.RF,s.n9,t.Ls],pipes:[s.rS],styles:[""]}),F})()},9810:(nn,j,i)=>{i.d(j,{u:()=>I});var e=i(5e3),s=i(9808),x=i(325),t=i(8481),n=i(3610),u=i(647);function R(p,f){}function Q(p,f){if(1&p&&(e.ynx(0),e.TgZ(1,"a",5),e.YNc(2,R,0,0,"ng-template",6),e.qZA(),e.BQk()),2&p){const z=e.oxw(),S=e.MAs(2);e.xp6(1),e.MGl("routerLink","/variant-groups/",z.variantgroup.id,""),e.xp6(1),e.Q6J("ngTemplateOutlet",S)}}function J(p,f){}function Y(p,f){if(1&p&&(e.TgZ(0,"nz-tag",9),e.YNc(1,J,0,0,"ng-template",6),e.qZA()),2&p){e.oxw();const z=e.MAs(2);e.oxw();const S=e.MAs(8);e.Q6J("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",z),e.xp6(1),e.Q6J("ngTemplateOutlet",S)}}function w(p,f){1&p&&(e.TgZ(0,"p"),e._uU(1,"variantgroup popover here"),e.qZA())}function F(p,f){if(1&p&&(e.YNc(0,Y,2,3,"nz-tag",7),e.YNc(1,w,2,0,"ng-template",null,8,e.W1O)),2&p){const z=e.oxw(),S=e.MAs(4);e.Q6J("ngIf",z.enablePopover)("ngIfElse",S)}}function P(p,f){}function N(p,f){if(1&p&&(e.TgZ(0,"nz-tag"),e.YNc(1,P,0,0,"ng-template",6),e.qZA()),2&p){e.oxw();const z=e.MAs(8);e.xp6(1),e.Q6J("ngTemplateOutlet",z)}}function $(p,f){}function G(p,f){if(1&p&&e.YNc(0,$,0,0,"ng-template",6),2&p){e.oxw();const z=e.MAs(2);e.Q6J("ngTemplateOutlet",z)}}function C(p,f){if(1&p&&(e._UZ(0,"i",10),e._uU(1)),2&p){const z=e.oxw();e.xp6(1),e.hij(" ",z.variantgroup.name,"\n")}}let I=(()=>{class p{constructor(){this.linked=!0,this.enablePopover=!0}ngOnInit(){if(void 0===this.variantgroup)throw new Error("Must pass a LinkableVariantgroup into the variantgroup tag component")}}return p.\u0275fac=function(z){return new(z||p)},p.\u0275cmp=e.Xpm({type:p,selectors:[["cvc-variant-group-tag"]],inputs:{variantgroup:"variantgroup",linked:"linked",enablePopover:"enablePopover"},decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["tag",""],["noPopover",""],["unlinked",""],["tagContent",""],[3,"routerLink"],[3,"ngTemplateOutlet"],["nz-popover","","nzPopoverTrigger","hover",3,"nzPopoverMouseEnterDelay","nzPopoverContent",4,"ngIf","ngIfElse"],["popoverContent",""],["nz-popover","","nzPopoverTrigger","hover",3,"nzPopoverMouseEnterDelay","nzPopoverContent"],["nz-icon","","nzType","civic-variantgroup","nzTheme","twotone","nzTwotoneColor","#33B358"]],template:function(z,S){if(1&z&&(e.YNc(0,Q,3,2,"ng-container",0),e.YNc(1,F,3,2,"ng-template",null,1,e.W1O),e.YNc(3,N,2,1,"ng-template",null,2,e.W1O),e.YNc(5,G,1,1,"ng-template",null,3,e.W1O),e.YNc(7,C,2,1,"ng-template",null,4,e.W1O)),2&z){const y=e.MAs(6);e.Q6J("ngIf",S.linked)("ngIfElse",y)}},directives:[s.O5,x.yS,s.tP,t.j,n.lU,u.Ls],styles:["[_nghost-%COMP%]{display:block}"]}),p})()},7701:(nn,j,i)=>{i.d(j,{j:()=>L});var e=i(6654),s=i(5e3),x=i(9808),t=i(325),n=i(8481),u=i(3610),R=i(4850),Q=i(712),J=i(7484),Y=i(647),w=i(6550),F=i(3098),P=i(6949);function N(E,H){if(1&E&&(s._UZ(0,"i",7),s._uU(1)),2&E){const A=s.oxw().ngIf;s.xp6(1),s.hij(" ",A.name," ")}}function $(E,H){if(1&E&&(s.TgZ(0,"cvc-link-tag",9),s._uU(1),s.qZA()),2&E){const A=s.oxw(2).ngIf;s.Q6J("href",A.url),s.xp6(1),s.hij(" ",A.soid," ")}}function G(E,H){if(1&E&&s.YNc(0,$,2,2,"cvc-link-tag",8),2&E){const A=s.oxw().ngIf;s.Q6J("ngIf","N/A"!=A.soid)}}function C(E,H){if(1&E&&(s.ynx(0),s.TgZ(1,"nz-card",2),s.YNc(2,N,2,1,"ng-template",null,3,s.W1O),s.YNc(4,G,1,1,"ng-template",null,4,s.W1O),s.TgZ(6,"nz-descriptions",5),s.TgZ(7,"nz-descriptions-item",6),s._uU(8),s.qZA(),s.qZA(),s.qZA(),s.BQk()),2&E){const A=H.ngIf,X=s.MAs(3),tn=s.MAs(5);s.xp6(1),s.Q6J("nzTitle",X)("nzExtra",tn),s.xp6(5),s.Q6J("nzColumn",2),s.xp6(2),s.hij(" ",A.variantCount," ")}}let I=(()=>{class E{constructor(A){this.gql=A}ngOnInit(){if(null==this.variantTypeId)throw new Error("cvc-variant-type-popover requires valid variantTypeId input.");this.variantType$=this.gql.watch({variantTypeId:this.variantTypeId}).valueChanges.pipe((0,R.U)(({data:A})=>A.variantTypePopover))}}return E.\u0275fac=function(A){return new(A||E)(s.Y36(Q.tw_))},E.\u0275cmp=s.Xpm({type:E,selectors:[["cvc-variant-type-popover"]],inputs:{variantTypeId:"variantTypeId"},decls:3,vars:3,consts:[["id","popover-content"],[4,"ngIf"],["nzBordered","false","id","card-content",3,"nzTitle","nzExtra"],["cardTitle",""],["linkout",""],["nzSize","small","nzBordered","true",3,"nzColumn"],["nzTitle","Variants","nzSpan","2"],["nz-icon","","nzType","civic-varianttype",1,"variant-type-tag-icon"],["tooltip","View on SequenceOntology.org",3,"href",4,"ngIf"],["tooltip","View on SequenceOntology.org",3,"href"]],template:function(A,X){1&A&&(s.TgZ(0,"div",0),s.YNc(1,C,9,4,"ng-container",1),s.ALo(2,"ngrxPush"),s.qZA()),2&A&&(s.xp6(1),s.Q6J("ngIf",s.lcZ(2,1,X.variantType$)))},directives:[x.O5,J.bd,Y.Ls,w.l,F.R7,F.uj],pipes:[P.fM],styles:["[_nghost-%COMP%]{display:block;margin:-8px -12px}[_nghost-%COMP%]     .ant-card-body{padding:0;margin-top:1px}[_nghost-%COMP%]     .ant-descriptions-view{border:none}[_nghost-%COMP%]     #entity-child-counts{border-top:1px solid #f0f0f0;padding:8px}[_nghost-%COMP%]     #entity-child-counts nz-space{width:100%}[_nghost-%COMP%]     #entity-child-counts nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     #entity-child-counts nz-space-item:last-child nz-tag{margin-right:0}.popover-text[_ngcontent-%COMP%]{width:100%;padding:8px;border-bottom:1px solid #f0f0f0}#popover-content[_ngcontent-%COMP%]{min-width:350px;max-width:500px;min-height:125px}"]}),E})();function p(E,H){}function f(E,H){if(1&E&&(s.ynx(0),s.TgZ(1,"a",5),s.YNc(2,p,0,0,"ng-template",6),s.qZA(),s.BQk()),2&E){const A=s.oxw(),X=s.MAs(2);s.xp6(1),s.MGl("routerLink","/variant-types/",A.variantType.id,""),s.xp6(1),s.Q6J("ngTemplateOutlet",X)}}function z(E,H){}function S(E,H){if(1&E&&(s.TgZ(0,"nz-tag",9),s.YNc(1,z,0,0,"ng-template",6),s.qZA()),2&E){s.oxw();const A=s.MAs(2);s.oxw();const X=s.MAs(8);s.Q6J("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",A),s.xp6(1),s.Q6J("ngTemplateOutlet",X)}}function y(E,H){if(1&E&&s._UZ(0,"cvc-variant-type-popover",10),2&E){const A=s.oxw(2);s.Q6J("variantTypeId",A.variantType.id)}}function b(E,H){if(1&E&&(s.YNc(0,S,2,3,"nz-tag",7),s.YNc(1,y,1,1,"ng-template",null,8,s.W1O)),2&E){const A=s.oxw(),X=s.MAs(6);s.Q6J("ngIf",A.enablePopover)("ngIfElse",X)}}function V(E,H){}function O(E,H){if(1&E&&s.YNc(0,V,0,0,"ng-template",6),2&E){s.oxw();const A=s.MAs(2);s.Q6J("ngTemplateOutlet",A)}}function K(E,H){}function m(E,H){if(1&E&&(s.TgZ(0,"nz-tag"),s.YNc(1,K,0,0,"ng-template",6),s.qZA()),2&E){s.oxw();const A=s.MAs(8);s.xp6(1),s.Q6J("ngTemplateOutlet",A)}}function U(E,H){if(1&E&&(s._UZ(0,"i",11),s._uU(1)),2&E){const A=s.oxw();s.xp6(1),s.hij(" ",A.variantType.name,"\n")}}let L=(()=>{class E extends e.a{constructor(){super(),this.linked=!0,this.enablePopover=!0}idFunction(){return this.variantType.id}ngOnInit(){if(void 0===this.variantType)throw new Error("cvc-variant-type-tag requires LinkableVariantType input, none supplied.")}}return E.\u0275fac=function(A){return new(A||E)},E.\u0275cmp=s.Xpm({type:E,selectors:[["cvc-variant-type-tag"]],inputs:{variantType:"variantType",linked:"linked",enablePopover:"enablePopover"},features:[s.qOj],decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["tag",""],["unlinked",""],["noPopover",""],["tagContent",""],[3,"routerLink"],[3,"ngTemplateOutlet"],["nz-popover","","nzPopoverPlacement","right","nzPopoverTrigger","hover",3,"nzPopoverMouseEnterDelay","nzPopoverContent",4,"ngIf","ngIfElse"],["variantTypePopover",""],["nz-popover","","nzPopoverPlacement","right","nzPopoverTrigger","hover",3,"nzPopoverMouseEnterDelay","nzPopoverContent"],[3,"variantTypeId"],["nz-icon","","nzType","civic-varianttype","nzTheme","twotone","nzTwotoneColor","#33B358"]],template:function(A,X){if(1&A&&(s.YNc(0,f,3,2,"ng-container",0),s.YNc(1,b,3,2,"ng-template",null,1,s.W1O),s.YNc(3,O,1,1,"ng-template",null,2,s.W1O),s.YNc(5,m,2,1,"ng-template",null,3,s.W1O),s.YNc(7,U,2,1,"ng-template",null,4,s.W1O)),2&A){const tn=s.MAs(4);s.Q6J("ngIf",X.linked)("ngIfElse",tn)}},directives:[x.O5,t.yS,x.tP,n.j,u.lU,I,Y.Ls],styles:["[_nghost-%COMP%]{display:block}"]}),E})()},1243:(nn,j,i)=>{i.d(j,{I:()=>s});var e=i(5e3);let s=(()=>{class x{transform(n){if(n){let R=n.toLowerCase().replace(/_/g," ").split(" ");for(var u=0;u<R.length;u++)R[u]=R[u].charAt(0).toUpperCase()+R[u].slice(1);return R.join(" ")}return""}}return x.\u0275fac=function(n){return new(n||x)},x.\u0275pipe=e.Yjl({name:"enumToTitle",type:x,pure:!0}),x})()},9383:(nn,j,i)=>{i.d(j,{b:()=>f});var e=i(5e3),s=i(8929),x=i(712),t=i(4850),n=i(7625),u=i(1059),R=i(9350),Q=i(6949),J=i(868),Y=i(4921),w=i(4182),F=i(9808),P=i(7525),N=i(7948);function $(z,S){if(1&z&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.BQk()),2&z){const y=S.$implicit;e.xp6(2),e.Oqu(y.displayName)}}function G(z,S){1&z&&(e.ynx(0),e._UZ(1,"nz-spin",8),e.BQk())}function C(z,S){if(1&z&&(e.ynx(0),e._UZ(1,"cvc-comment-body",9),e.BQk()),2&z){const y=S.ngIf;e.xp6(1),e.Q6J("commentBodySegments",y)}}const I=function(){return["#","@","$"]};function p(z,S){if(1&z){const y=e.EpF();e.ynx(0),e.TgZ(1,"nz-tabset",1),e.TgZ(2,"nz-tab",2),e.TgZ(3,"nz-mention",3),e.NdJ("nzOnSearchChange",function(V){return e.CHM(y),e.oxw().onSearchChange(V)})("nzOnSelect",function(){return e.CHM(y),e.oxw().suggestions=[]}),e.TgZ(4,"textarea",4),e.NdJ("ngModelChange",function(V){return e.CHM(y),e.oxw().commentText=V})("ngModelChange",function(V){return e.CHM(y),e.oxw().onCommentChanged(V)}),e.qZA(),e.YNc(5,$,3,1,"ng-container",5),e.qZA(),e.qZA(),e.TgZ(6,"nz-tab",6),e.NdJ("nzClick",function(){return e.CHM(y),e.oxw().onPreviewButtonClicked()}),e.YNc(7,G,2,0,"ng-container",7),e.ALo(8,"ngrxPush"),e.YNc(9,C,2,1,"ng-container",7),e.ALo(10,"ngrxPush"),e.qZA(),e.qZA(),e.BQk()}if(2&z){const y=S.ngrxLet,b=e.oxw();e.xp6(1),e.Q6J("nzAnimated",!1),e.xp6(2),e.Q6J("nzSuggestions",b.suggestions)("nzPrefix",e.DdM(13,I))("nzValueWith",b.autoCompleteValueFor),e.xp6(1),e.Q6J("placeholder",y&&y.canCurate?"Enter comment (minimum length 10. Use @ to mention users; # to link entities)":"Please sign in")("ngModel",b.commentText),e.uIk("disabled",!y||!y.canCurate||null),e.xp6(3),e.Q6J("ngIf",e.lcZ(8,9,b.previewLoading$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(10,11,b.previewComment$))}}let f=(()=>{class z{constructor(y,b,V,O){this.previewCommentGql=y,this.userTypeaheadGql=b,this.entityTypeaheadGql=V,this.viewerService=O,this.commentChange=new e.vpe,this.destroy$=new s.xQ,this.suggestions=[],this.roleSuggestions=[{displayName:"admins",value:"admins"},{displayName:"editors",value:"editors"}]}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.commentText=this.comment,this.userTypeaheadQueryRef$=this.userTypeaheadGql.watch({queryTerm:""}),this.userTypeaheadQueryRef$.valueChanges.pipe((0,t.U)(({data:y})=>y.userTypeahead),(0,n.R)(this.destroy$)).subscribe(y=>this.suggestions=y.map(b=>({displayName:b.username,value:b.username}))),this.entityTypeaheadQueryRef$=this.entityTypeaheadGql.watch({queryTerm:""}),this.entityTypeaheadQueryRef$.valueChanges.pipe((0,t.U)(({data:y})=>y.entityTypeahead),(0,n.R)(this.destroy$)).subscribe(y=>this.suggestions=y.map(b=>({displayName:b.displayName,value:this.tagForEntityTypeAndId(b.tagType,b.entityId)})))}ngOnChanges(){this.commentText=this.comment}autoCompleteValueFor(y){return y.value}tagForEntityTypeAndId(y,b){switch(y){case x.mpB.Gene:return`GID${b}`;case x.mpB.Variant:return`VID${b}`;case x.mpB.VariantGroup:return`VGID${b}`;case x.mpB.EvidenceItem:return`EID${b}`;case x.mpB.Assertion:return`AID${b}`;case x.mpB.Revision:return`RID${b}`;case x.mpB.Role:return Object.keys(x.i44)[b]}}resetForm(){this.commentText=""}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreviewButtonClicked(){this.commentText&&(this.previewComment$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,t.U)(({data:y})=>y.previewCommentText)),this.previewLoading$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,t.U)(({loading:y})=>y),(0,u.O)(!0)))}onSearchChange({value:y,prefix:b}){"@"===b?this.userTypeaheadQueryRef$.refetch({queryTerm:y}):"$"==b?this.suggestions=this.roleSuggestions.filter(V=>V.value.startsWith(y)):this.entityTypeaheadQueryRef$.refetch({queryTerm:y})}onCommentChanged(y){this.commentChange.emit(y)}}return z.\u0275fac=function(y){return new(y||z)(e.Y36(x.mII),e.Y36(x.vMt),e.Y36(x.GYx),e.Y36(R.a))},z.\u0275cmp=e.Xpm({type:z,selectors:[["cvc-comment-input-form"]],inputs:{comment:"comment"},outputs:{commentChange:"commentChange"},features:[e.TTD],decls:1,vars:1,consts:[[4,"ngrxLet"],[3,"nzAnimated"],["nzTitle","Write"],["nzNotFoundContent","No matches...",3,"nzSuggestions","nzPrefix","nzValueWith","nzOnSearchChange","nzOnSelect"],["nzMentionTrigger","","nz-input","","rows","4",2,"width","100%",3,"placeholder","ngModel","ngModelChange"],[4,"nzMentionSuggestion"],["nzTitle","Preview",3,"nzClick"],[4,"ngIf"],["nzTip","Loading..."],[3,"commentBodySegments"]],template:function(y,b){1&y&&e.YNc(0,p,11,14,"ng-container",0),2&y&&e.Q6J("ngrxLet",b.viewer$)},directives:[Q.eJ,J.xH,J.xw,Y.YW,Y.jO,w.Fj,w.JJ,w.On,Y.O3,F.O5,P.W,N.m],pipes:[Q.fM],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2}),z})()}}]);