"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[2076],{9213:(P,C,e)=>{e.d(C,{l:()=>E});var p=e(177),u=e(1951),I=e(4438);let E=(()=>{class f{static{this.\u0275fac=function(y){return new(y||f)}}static{this.\u0275mod=I.$C({type:f})}static{this.\u0275inj=I.G2t({imports:[p.MD,u.Y3]})}}return f})()},2261:(P,C,e)=>{e.d(C,{h:()=>s});var p=e(4438),u=e(7670),I=e(1672),E=e(1951),f=e(7391);function v(M,m){1&M&&(p.j41(0,"span"),p.EFF(1," You must be logged in to view this page. "),p.k0s())}function h(M,m){1&M&&p.nrm(0,"cvc-login-button")}function y(M,m){1&M&&(p.j41(0,"nz-typography",4),p.nrm(1,"i",5),p.k0s())}let s=(()=>{class M{static{this.\u0275fac=function(t){return new(t||M)}}static{this.\u0275cmp=p.VBU({type:M,selectors:[["cvc-login-prompt"]],decls:7,vars:3,consts:[["contentTpl",""],["footerTpl",""],["emptyImage",""],[3,"nzNotFoundImage","nzNotFoundContent","nzNotFoundFooter"],["nzType","secondary"],["nz-icon","","nzType","login","nzTheme","outline",2,"font-size","50pt"]],template:function(t,F){if(1&t&&(p.j41(0,"nz-empty",3),p.DNE(1,v,2,0,"ng-template",null,0,p.C5r)(3,h,1,0,"ng-template",null,1,p.C5r),p.k0s(),p.DNE(5,y,2,0,"ng-template",null,2,p.C5r)),2&t){const l=p.sdS(2),b=p.sdS(4),D=p.sdS(6);p.Y8G("nzNotFoundImage",D)("nzNotFoundContent",l)("nzNotFoundFooter",b)}},dependencies:[u.z,I.RW,E.Dn,f.Di],styles:["[_nghost-%COMP%]{display:inline-block}"]})}}return M})()},3688:(P,C,e)=>{e.d(C,{A:()=>h});var p=e(177),u=e(400),I=e(1672),E=e(1951),f=e(7391),v=e(4438);let h=(()=>{class y{static{this.\u0275fac=function(m){return new(m||y)}}static{this.\u0275mod=v.$C({type:y})}static{this.\u0275inj=v.G2t({imports:[p.MD,u.a,I._v,E.Y3,f.kT]})}}return y})()},3988:(P,C,e)=>{e.d(C,{d:()=>G});var p=e(1635),u=e(9417),I=e(1226),E=e(8269),f=e(7593),v=e(1653),h=e(9894);const M=(0,e(7480).A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"New Assertion"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"molecularProfileId",type:"molecular-profile-select",props:{required:!0,watchVariantMolecularProfileId:!0}}]},{wrappers:["form-row"],props:{formRowOptions:{responsive:{xs:24,lg:12,xl:8,xxl:6}}},fieldGroup:[{key:"assertionType",type:"type-select",props:{required:!0}},{key:"assertionDirection",type:"direction-select",props:{required:!0}},{key:"significance",type:"significance-select",props:{required:!0}},{key:"diseaseId",type:"disease-select",props:{}},{key:"therapyIds",type:"therapy-multi-select",props:{}},{key:"therapyInteractionType",type:"interaction-select",props:{}},{key:"variantOrigin",type:"origin-select",props:{required:!0}},{key:"phenotypeIds",type:"phenotype-multi-select",props:{}},{key:"ampLevel",type:"amp-category-select",props:{colSpan:8}},{key:"acmgCodeIds",type:"acmg-code-multi-select",props:{colSpan:8}},{key:"clingenCodeIds",type:"clingen-code-multi-select",props:{colSpan:8}},{key:"nccnGuidelineId",type:"nccn-guideline-select",props:{}},{key:"nccnGuidelineVersion",type:"nccn-guideline-version-input",props:{}},{key:"fdaRegulatoryApproval",type:"fda-regulatory-approval-checkbox",props:{}},{key:"fdaCompanionTest",type:"fda-companion-test-checkbox",props:{}}]},{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{xs:24},{md:24,lg:8},{md:24,lg:16}]}},fieldGroup:[{key:"evidenceItemIds",type:"evidence-multi-select",props:{required:!0,isMultiSelect:!0}},{key:"summary",type:"textarea",wrappers:["form-field"],props:{tooltip:"A short, one sentence summary of the Assertion",placeholder:"Enter an Assertion Summary",label:"Assertion Summary",required:!0}},{key:"description",type:"base-textarea",wrappers:["form-field"],props:{tooltip:"A complete, original description of this Assertion. Limited to one paragraph.",placeholder:"Enter an Assertion Statement",label:"Assertion Statement",required:!0,rows:5}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",required:!0}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Assertion",align:"right"}}]}]}],E.S);var m=e(4438),n=e(9145),t=e(4222),F=e(8927),l=e(1188),b=e(8524),D=e(8721);const S=R=>["/assertions",R,"summary"];function T(R,g){if(1&R&&(m.EFF(0," View your submitted Assertion "),m.j41(1,"a",4),m.EFF(2,"here"),m.k0s(),m.EFF(3,". You will be redirected shortly. ")),2&R){const _=m.XpG();m.R7$(),m.Y8G("routerLink",m.eq3(1,S,_.newAssertionId))}}let G=class B{constructor(g,_){this.submitAssertionGQL=g,this.networkErrorService=_,this.form=new u.J3({}),this.model=E.S,this.fields=M,this.state=new f.o,this.options={formState:this.state},this.submitAssertionMutator=new I.E(_)}onSubmit(g){let _=(0,v.fR)(g);_&&(this.mutationState=this.submitAssertionMutator.mutate(this.submitAssertionGQL,{input:_},void 0,a=>{this.newAssertionId=a.submitAssertion?.assertion.id,this.newAssertionUrl=`/assertions/${this.newAssertionId}/summary`}))}ngAfterViewInit(){this.state.formReady$.next(!0)}ngOnDestroy(){this.options.formState.onDestroy()}static{this.\u0275fac=function(_){return new(_||B)(m.rXU(n.B_h),m.rXU(t.N))}}static{this.\u0275cmp=m.VBU({type:B,selectors:[["cvc-assertion-submit-form"]],decls:5,vars:8,consts:[["success",""],["entityType","Assertion",3,"mutationState","redirectUrl","successMessage"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"],[3,"routerLink"]],template:function(_,a){if(1&_){const r=m.RV6();m.j41(0,"cvc-form-submission-status-display",1),m.DNE(1,T,4,3,"ng-template",null,0,m.C5r),m.j41(3,"form",2),m.bIt("ngSubmit",function(){return m.eBV(r),m.Njj(a.onSubmit(a.model))}),m.j41(4,"formly-form",3),m.bIt("modelChange",function(o){return m.eBV(r),m.Njj(a.model=o)}),m.k0s()()()}if(2&_){const r=m.sdS(2);m.Y8G("mutationState",a.mutationState)("redirectUrl",a.newAssertionUrl)("successMessage",r),m.R7$(3),m.Y8G("formGroup",a.form),m.R7$(),m.Y8G("form",a.form)("fields",a.fields)("model",a.model)("options",a.options)}},dependencies:[F.CA,l.Wk,u.qT,u.cb,u.j4,b.aF,D.G],encapsulation:2,changeDetection:0})}};G=(0,p.Cg)([(0,h.d)()],G)},7242:(P,C,e)=>{e.d(C,{Z:()=>s});var p=e(177),u=e(8927),I=e(513),E=e(8168),f=e(776),v=e(5316),h=e(1188),y=e(4438);let s=(()=>{class M{static{this.\u0275fac=function(t){return new(t||M)}}static{this.\u0275mod=y.$C({type:M})}static{this.\u0275inj=y.G2t({imports:[p.MD,u.PQ,I.Zw,h.iI,E.m,v.P,f.s]})}}return M})()},1724:(P,C,e)=>{e.d(C,{y:()=>y});var p=e(177),u=e(8927),I=e(513),E=e(8168),f=e(776),v=e(5316),h=e(4438);let y=(()=>{class s{static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275mod=h.$C({type:s})}static{this.\u0275inj=h.G2t({imports:[p.MD,u.PQ,I.Zw,E.m,v.P,f.s]})}}return s})()},6905:(P,C,e)=>{e.d(C,{_:()=>g});var p=e(1635),u=e(9417),I=e(1226),E=e(9447),f=e(5540),v=e(9894);const m=(0,e(7480).A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Evidence Item"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"molecularProfileId",type:"molecular-profile-select",props:{required:!0,tooltip:"A single variant (Simple Molecular Profile) or a combination of variants (Complex Molecular Profile) relevant to the curated evidence.",watchVariantMolecularProfileId:!0}},{key:"sourceId",type:"source-select",props:{required:!0}}]},{wrappers:["form-row"],props:{formRowOptions:{responsive:{xs:24,lg:12,xl:8,xxl:6}}},fieldGroup:[{key:"evidenceType",type:"type-select",props:{required:!0}},{key:"evidenceDirection",type:"direction-select",props:{required:!0}},{key:"significance",type:"significance-select",props:{required:!0}},{key:"diseaseId",type:"disease-select",props:{}},{key:"therapyIds",type:"therapy-multi-select",props:{}},{key:"therapyInteractionType",type:"interaction-select",props:{}},{key:"evidenceLevel",type:"level-select",props:{required:!0}},{key:"rating",type:"rating",props:{required:!0}},{key:"variantOrigin",type:"origin-select",props:{required:!0}},{key:"phenotypeIds",type:"phenotype-multi-select",props:{}}]},{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"description",type:"base-textarea",props:{tooltip:"Your original description of evidence from published literature detailing the association or lack of association between a variant and its predictive, prognostic, diagnostic, predisposing, functional or oncogenic value. ",placeholder:"Enter an Evidence Statement",extraType:"description",description:'Data constituting personal or identifying information should not be entered (e.g. <a href="https://www.hipaajournal.com/what-is-protected-health-information/" target="_blank">protected health information (PHI) as defined by HIPAA</a> in the U.S. and/or comparable laws in your jurisdiction).',label:"Evidence Statement",required:!0,colSpan:24}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Evidence Item Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{featureId:void 0,variantId:void 0,significance:void 0,description:void 0,diseaseId:void 0,drugIds:[],therapyInteractionType:void 0,evidenceDirection:void 0,evidenceLevel:void 0,evidenceType:void 0,molecularProfileId:void 0,phenotypeIds:[],rating:void 0,sourceId:void 0,variantOrigin:void 0},comment:void 0,organizationId:void 0});var n=e(4438),t=e(9145),F=e(4222),l=e(177),b=e(8927),D=e(8524),S=e(8721);function T(_,a){if(1&_&&(n.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or you can view them "),n.j41(1,"a",4),n.EFF(2,"here."),n.k0s()),2&_){const r=n.XpG();n.R7$(),n.FS9("href",r.url,n.B4B)}}function G(_,a){if(1&_){const r=n.RV6();n.j41(0,"form",5),n.bIt("ngSubmit",function(){n.eBV(r);const o=n.XpG();return n.Njj(o.onSubmit(o.model))}),n.j41(1,"formly-form",6),n.bIt("modelChange",function(o){n.eBV(r);const d=n.XpG();return n.Njj(d.model=o)}),n.k0s()()}if(2&_){const r=n.XpG();n.Y8G("formGroup",r.form),n.R7$(),n.Y8G("form",r.form)("fields",r.fields)("model",r.model)("options",r.options)}}function R(_,a){1&_&&n.EFF(0," Loading Evidence Item... ")}let g=class V{constructor(a,r,i,o){this.revisableFieldsGQL=a,this.submitRevisionsGQL=r,this.networkErrorService=i,this.cdr=o,this.form=new u.J3({}),this.fields=m,this.state=new E.D,this.state.formMode="revise",this.options={formState:this.state},this.reviseEvidenceMutator=new I.E(i)}ngOnInit(){this.url=`/evidence/${this.evidenceId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({evidenceId:this.evidenceId}).pipe((0,v.s)(this)).subscribe({next:({data:{evidenceItem:a}})=>{a&&(this.model={id:a.id,fields:(0,f.LC)(a)},this.cdr.detectChanges())},error:a=>{console.error("Error retrieving evidenceItem."),console.error(a)},complete:()=>{this.state.formReady$.next(!0),console.log("evidence item retrieved.")}})}onSubmit(a){if(!this.evidenceId)return;let r=(0,f.ep)(this.evidenceId,a);r&&(this.mutationState=this.reviseEvidenceMutator.mutate(this.submitRevisionsGQL,{input:r}))}ngOnDestroy(){this.options.formState.onDestroy()}static{this.\u0275fac=function(r){return new(r||V)(n.rXU(t.V1_),n.rXU(t.m7j),n.rXU(F.N),n.rXU(n.gRc))}}static{this.\u0275cmp=n.VBU({type:V,selectors:[["cvc-evidence-revise-form"]],inputs:{evidenceId:"evidenceId"},decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Evidence Item",3,"mutationState","successMessage","redirectUrl"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(r,i){if(1&r&&(n.j41(0,"cvc-form-submission-status-display",2),n.DNE(1,T,3,1,"ng-template",null,0,n.C5r)(3,G,2,5,"form",3)(4,R,1,0,"ng-template",null,1,n.C5r),n.k0s()),2&r){const o=n.sdS(2),d=n.sdS(5);n.Y8G("mutationState",i.mutationState)("successMessage",o)("redirectUrl",i.url),n.R7$(3),n.Y8G("ngIf",i.model)("ngIfElse",d)}},dependencies:[l.bT,b.CA,u.qT,u.cb,u.j4,D.aF,S.G],encapsulation:2,changeDetection:0})}};g=(0,p.Cg)([(0,v.d)()],g)},432:(P,C,e)=>{e.d(C,{Q:()=>y});var p=e(177),u=e(8927),I=e(513),E=e(8168),f=e(776),v=e(5316),h=e(4438);let y=(()=>{class s{static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275mod=h.$C({type:s})}static{this.\u0275inj=h.G2t({imports:[p.MD,u.PQ,I.Zw,E.m,v.P,f.s]})}}return s})()},958:(P,C,e)=>{e.d(C,{m:()=>a});var p=e(1635),u=e(9417),I=e(9894),E=e(1226),f=e(5741);const n=(0,e(7480).A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Gene"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"description",type:"base-textarea",wrappers:["form-field"],props:{tooltip:"User-defined summary of the clinical relevance of this Gene.",placeholder:"Enter a Gene Summary",label:"Gene Summary",required:!1,rows:5}},{key:"sourceIds",type:"source-multi-select",wrappers:["form-field"],props:{}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",placeholder:"Please enter a comment describing your revisions.",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Gene Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{description:void 0,sourceIds:void 0},comment:void 0,organizationId:void 0});var t=e(4438),F=e(9145),l=e(4222),b=e(177),D=e(8927),S=e(8524),T=e(8721);const G=()=>({});function R(r,i){if(1&r&&(t.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),t.j41(1,"a",4),t.EFF(2,"here."),t.k0s()),2&r){const o=t.XpG();t.R7$(),t.FS9("href",o.url,t.B4B)}}function g(r,i){if(1&r){const o=t.RV6();t.j41(0,"form",5),t.bIt("ngSubmit",function(){t.eBV(o);const c=t.XpG();return t.Njj(c.onSubmit(c.model))}),t.j41(1,"formly-form",6),t.bIt("modelChange",function(c){t.eBV(o);const O=t.XpG();return t.Njj(O.model=c)}),t.k0s()()}if(2&r){const o=t.XpG();t.Y8G("formGroup",o.form),t.R7$(),t.Y8G("form",o.form)("fields",o.fields)("model",o.model)("options",t.lJ4(5,G))}}function _(r,i){1&r&&t.EFF(0," Loading Gene... ")}let a=class x{constructor(i,o,d,c){this.revisableFieldsGQL=i,this.submitRevisionsGQL=o,this.networkErrorService=d,this.cdr=c,this.form=new u.J3({}),this.fields=n,this.reviseEvidenceMutator=new E.E(d)}ngOnInit(){this.url=`/features/${this.featureId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({featureId:this.featureId}).pipe((0,I.s)(this)).subscribe({next:({data:{feature:i}})=>{var r;i&&(this.model={id:i.id,fields:(r=i,{description:r.description,sourceIds:r.sources.map(i=>i.id)})},this.cdr.detectChanges())},error:i=>{console.error("Error retrieving Gene."),console.error(i)},complete:()=>{}})}onSubmit(i){if(!this.featureId)return;let o=function h(r,i){const o=i.fields;if(i.comment)return{id:r,fields:{description:f.q2(o.description),sourceIds:o.sourceIds||[]},organizationId:i.organizationId,comment:i.comment}}(this.featureId,i);o&&(this.mutationState=this.reviseEvidenceMutator.mutate(this.submitRevisionsGQL,{input:o}))}static{this.\u0275fac=function(o){return new(o||x)(t.rXU(F.WgR),t.rXU(F.Fll),t.rXU(l.N),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:x,selectors:[["cvc-gene-revise-form"]],inputs:{featureId:"featureId"},decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Gene",3,"redirectUrl","mutationState","successMessage"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(o,d){if(1&o&&(t.j41(0,"cvc-form-submission-status-display",2),t.DNE(1,R,3,1,"ng-template",null,0,t.C5r)(3,g,2,6,"form",3)(4,_,1,0,"ng-template",null,1,t.C5r),t.k0s()),2&o){const c=t.sdS(2),O=t.sdS(5);t.Y8G("redirectUrl",d.url)("mutationState",d.mutationState)("successMessage",c),t.R7$(3),t.Y8G("ngIf",d.model)("ngIfElse",O)}},dependencies:[b.bT,D.CA,u.qT,u.cb,u.j4,S.aF,T.G],encapsulation:2,changeDetection:0})}};a=(0,p.Cg)([(0,I.d)()],a)},6404:(P,C,e)=>{e.d(C,{v:()=>y});var p=e(177),u=e(8927),I=e(513),E=e(8168),f=e(776),v=e(5316),h=e(4438);let y=(()=>{class s{static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275mod=h.$C({type:s})}static{this.\u0275inj=h.G2t({imports:[p.MD,u.PQ,I.Zw,E.m,v.P,f.s]})}}return s})()},2276:(P,C,e)=>{e.d(C,{v:()=>i});var p=e(1635),u=e(9417),I=e(9894),E=e(1226),f=e(5741),y=e(7480),s=e(5676);const m=(0,y.A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Variant"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{xs:24,md:12,lg:8},{xs:24,md:12,lg:8},{xs:24,lg:8}]}},fieldGroup:[{key:"featureId",type:"feature-select",props:{description:"Enter an Entrez Gene for this Variant",required:!0,canChangeFeatureType:!1}},{key:"name",type:"base-input",props:{placeholder:"Enter a name for this Variant",description:"Enter the name of the Variant according to the <a href='https://civic.readthedocs.io/en/latest/model/variants/name.html#curating-variant-names' target='blank'>Variant Curation SOP</a>",label:"Name",required:!0,rows:1}},{key:"aliases",type:"tag-multi-input",props:{label:"Aliases",description:"List any aliases commonly used to refer to this Variant",placeholder:"Enter Alias and hit return"}}]},{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{xs:24,lg:12,xl:6,xxl:8},{xs:24,lg:12,xl:6,xxl:8},{xs:24,xl:12,xxl:8}]}},fieldGroup:[{key:"hgvsDescriptions",type:"tag-multi-input",props:{label:"HGVS Descriptions",description:"Enter any HGVS nomenclature descriptions of this Variant",tooltip:"Human Genome Variation Society nomenclature descriptions",placeholder:"Enter HGVS and hit return"}},{key:"variantTypeIds",type:"variant-type-multi-select"},{key:"clinvarIds",type:"clinvar-multi-input",wrappers:["form-field"],props:{label:"ClinVar IDs"}}]},{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{wrappers:["form-card"],props:{formCardOptions:{title:"Coordinates",size:"small"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{responsive:{xs:24,md:12,lg:8,xxl:6}}},fieldGroup:[{key:"referenceBuild",type:"reference-build-select"},{key:"ensemblVersion",type:"base-input",validators:{nccnVersionNumber:{expression:o=>!o.value||/^\d{2,3}$/.test(o.value),message:(o,d)=>`"${d.formControl?.value}" does not appear to be an Ensembl version number`}},props:{label:"Ensembl Version",description:"Enter a valid Ensembl database version (e.g. 75)"}},{key:"referenceBases",type:"base-input",validators:{nccnVersionNumber:{expression:o=>!o.value||/^[ACTG\\]+$/.test(o.value),message:(o,d)=>`"${d.formControl?.value}" contains invalid characters.`}},props:{label:"Reference Bases",description:"The nucleotide(s) of the reference genome affected by the variant. Only used for SNVs and Indels (otherwise leave blank)"}},{key:"variantBases",type:"base-input",validators:{nccnVersionNumber:{expression:o=>!o.value||/^[ACTG\\]+$/.test(o.value),message:(o,d)=>`"${d.formControl?.value}" contains invalid characters.`}},props:{label:"Variant Bases",description:"The nucleotide(s) of the variant allele. Only used for SNVs and Indels (otherwise leave blank)"}},{key:"chromosome",type:"base-select",props:{label:"Chromosome",options:f.Kd,description:"Specify the chromosome in which this variant occurs (e.g. 17)."}},{key:"start",type:"base-input",validators:{isNumeric:{expression:o=>!o.value||/^\d+$/.test(o.value),message:(o,d)=>"Start coordinate must be numeric"}},props:{label:"Start",description:"Enter the left/first coordinate of this variant. Must be \u2264 the Stop coordinate. Coordinate must be compatible with the selected reference build."}},{key:"stop",type:"base-input",validators:{isNumeric:{expression:o=>!o.value||/^\d+$/.test(o.value),message:(o,d)=>"Stop coordinate must be numeric"}},props:{label:"Stop",description:"Provide the right/second coordinate of this variant. Must be \u2265 the Start coordinate. Coordinate must be compatible with the selected reference build."}},{key:"representativeTranscript",type:"base-input",props:{label:"Representative Transcript",description:"Specify a transcript ID, including version number (e.g. ENST00000348159.4, the canonical transcript defined by Ensembl)."},validators:{isTranscriptId:{expression:s.t_,message:"Representative Transcript must be a valid, human, versioned, Ensembl transcript ID"}}}]}]}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",placeholder:"Please enter a comment describing your revisions.",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Variant Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{name:void 0,aliases:void 0,hgvsDescriptions:void 0,clinvarIds:void 0,variantTypeIds:void 0,referenceBuild:void 0,ensemblVersion:void 0,chromosome:void 0,start:void 0,stop:void 0,representativeTranscript:void 0,featureId:void 0,referenceBases:void 0,variantBases:void 0},comment:void 0,organizationId:void 0});let F=o=>"NONE FOUND"==o[0]?{noneFound:!0}:"N/A"==o[0]?{notApplicable:!0}:{ids:o.map(d=>+d)};var l=e(4438),b=e(9145),D=e(4222),S=e(177),T=e(8927),G=e(8524),R=e(8721);const g=()=>({});function _(o,d){if(1&o&&(l.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),l.j41(1,"a",4),l.EFF(2,"here."),l.k0s()),2&o){const c=l.XpG();l.R7$(),l.FS9("href",c.url,l.B4B)}}function a(o,d){if(1&o){const c=l.RV6();l.j41(0,"form",5),l.bIt("ngSubmit",function(){l.eBV(c);const A=l.XpG();return l.Njj(A.onSubmit(A.model))}),l.j41(1,"formly-form",6),l.bIt("modelChange",function(A){l.eBV(c);const L=l.XpG();return l.Njj(L.model=A)}),l.k0s()()}if(2&o){const c=l.XpG();l.Y8G("formGroup",c.form),l.R7$(),l.Y8G("form",c.form)("fields",c.fields)("model",c.model)("options",l.lJ4(5,g))}}function r(o,d){1&o&&l.EFF(0," Loading Variant... ")}let i=class U{constructor(d,c,O,A){this.revisableFieldsGQL=d,this.submitRevisionsGQL=c,this.networkErrorService=O,this.cdr=A,this.form=new u.J3({}),this.fields=m,this.reviseVariantMutator=new E.E(O)}ngOnInit(){this.url=`/variants/${this.variantId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({variantId:this.variantId}).pipe((0,I.s)(this)).subscribe({next:({data:{variant:d}})=>{var o;d&&"GeneVariant"==d.__typename&&(this.model={id:d.id,fields:(o=d,{name:o.name,aliases:o.variantAliases,hgvsDescriptions:o.hgvsDescriptions,clinvarIds:o.clinvarIds,variantTypeIds:o.variantTypes.map(d=>d.id),referenceBuild:o.coordinates?.referenceBuild,ensemblVersion:o.coordinates?.ensemblVersion,chromosome:o.coordinates?.chromosome,start:o.coordinates?.start,stop:o.coordinates?.stop,referenceBases:o.coordinates?.referenceBases,variantBases:o.coordinates?.variantBases,representativeTranscript:o.coordinates?.representativeTranscript,featureId:o.feature.id})},this.cdr.detectChanges())},error:d=>{console.error("Error retrieving Variant."),console.error(d)},complete:()=>{}})}onSubmit(d){if(!this.variantId)return;let c=function t(o,d){const c=d.fields;if(d.comment&&c.name&&c.featureId)return{id:o,fields:{name:c.name,aliases:c.aliases||[],hgvsDescriptions:c.hgvsDescriptions||[],clinvarIds:F(c.clinvarIds||[]),variantTypeIds:c.variantTypeIds||[],coordinates:{chromosome:c.chromosome,start:c.start?+c.start:void 0,stop:c.stop?+c.stop:void 0,representativeTranscript:c.representativeTranscript,ensemblVersion:c.ensemblVersion?+c.ensemblVersion:void 0,referenceBuild:c.referenceBuild,referenceBases:f.q2(c.referenceBases),variantBases:f.q2(c.variantBases)},featureId:c.featureId},organizationId:d.organizationId,comment:d.comment}}(this.variantId,d);c&&(this.mutationState=this.reviseVariantMutator.mutate(this.submitRevisionsGQL,{input:c}))}static{this.\u0275fac=function(c){return new(c||U)(l.rXU(b.$Pl),l.rXU(b.QVS),l.rXU(D.N),l.rXU(l.gRc))}}static{this.\u0275cmp=l.VBU({type:U,selectors:[["cvc-gene-variant-revise-form"]],inputs:{variantId:"variantId"},decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Variant",3,"redirectUrl","mutationState","successMessage"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(c,O){if(1&c&&(l.j41(0,"cvc-form-submission-status-display",2),l.DNE(1,_,3,1,"ng-template",null,0,l.C5r)(3,a,2,6,"form",3)(4,r,1,0,"ng-template",null,1,l.C5r),l.k0s()),2&c){const A=l.sdS(2),L=l.sdS(5);l.Y8G("redirectUrl",O.url)("mutationState",O.mutationState)("successMessage",A),l.R7$(3),l.Y8G("ngIf",O.model)("ngIfElse",L)}},dependencies:[S.bT,T.CA,u.qT,u.cb,u.j4,G.aF,R.G],encapsulation:2,changeDetection:0})}};i=(0,p.Cg)([(0,I.d)()],i)},7064:(P,C,e)=>{e.d(C,{q:()=>y});var p=e(177),u=e(8927),I=e(513),E=e(8168),f=e(776),v=e(5316),h=e(4438);let y=(()=>{class s{static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275mod=h.$C({type:s})}static{this.\u0275inj=h.G2t({imports:[p.MD,u.PQ,I.Zw,E.m,v.P,f.s]})}}return s})()},4514:(P,C,e)=>{e.d(C,{k:()=>_});var p=e(1635),u=e(9417),I=e(9894),E=e(1226),f=e(5741);const n=(0,e(7480).A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Molecular Profile"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{md:24,lg:16},{md:24,lg:8},{xs:24}]}},fieldGroup:[{key:"description",type:"textarea",wrappers:["form-field"],props:{placeholder:"Enter a Molecular Profile Description",label:"Molecular Profile Description",description:"Provide a summary of the clinical relevance of this Molecular Profile. The Molecular Profile Summary should be a synthesis of the existing Evidence Statements for this profile. Basic information on recurrence rates and biological/functional impact of the variants may be included, but the focus should be on the clinical impact (i.e. predictive, prognostic, diagnostic, or predisposing relevance).",required:!1,rows:5}},{key:"aliases",type:"tag-multi-input",wrappers:["form-field"],props:{label:"Aliases"},expressions:{"props.disabled":a=>a.options?.formState.isSimpleMp,"props.description":a=>a.options?.formState.isSimpleMp?"Simple Molecular Profiles inherit their Aliases from the corresponding Variant.":"List any aliases commonly used to refer to this Molecular Profile"}},{key:"sourceIds",type:"source-multi-select",wrappers:["form-field"],props:{}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",required:!0}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{description:void 0,sourceIds:void 0,aliases:void 0},comment:void 0,organizationId:void 0});var t=e(4438),F=e(9145),l=e(4222),b=e(177),D=e(8927),S=e(8524),T=e(8721);function G(a,r){if(1&a&&(t.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),t.j41(1,"a",4),t.EFF(2,"here."),t.k0s()),2&a){const i=t.XpG();t.R7$(),t.FS9("href",i.url,t.B4B)}}function R(a,r){if(1&a){const i=t.RV6();t.j41(0,"form",5),t.bIt("ngSubmit",function(){t.eBV(i);const d=t.XpG();return t.Njj(d.onSubmit(d.model))}),t.j41(1,"formly-form",6),t.bIt("modelChange",function(d){t.eBV(i);const c=t.XpG();return t.Njj(c.model=d)}),t.k0s()()}if(2&a){const i=t.XpG();t.Y8G("formGroup",i.form),t.R7$(),t.Y8G("form",i.form)("fields",i.fields)("model",i.model)("options",i.options)}}function g(a,r){1&a&&t.EFF(0," Loading Molecular Profile... ")}let _=class z{constructor(r,i,o,d){this.revisableFieldsGQL=r,this.submitRevisionsGQL=i,this.cdr=o,this.form=new u.J3({}),this.options={formState:{isSimpleMp:void 0}},this.fields=n,this.reviseEvidenceMutator=new E.E(d)}ngOnInit(){this.url=`/molecular-profiles/${this.molecularProfileId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({molecularProfileId:this.molecularProfileId}).pipe((0,I.s)(this)).subscribe({next:({data:{molecularProfile:r}})=>{var a;r&&(this.options.formState.isSimpleMp=!r.isComplex,this.model={id:r.id,fields:(a=r,{description:a.description,sourceIds:a.sources.map(r=>r.id),aliases:a.molecularProfileAliases})},this.cdr.detectChanges())},error:r=>{console.error("Error retrieving MolecularProfile."),console.error(r)},complete:()=>{}})}onSubmit(r){if(!this.molecularProfileId)return;let i=function h(a,r){const i=r.fields;if(r.comment)return{id:a,fields:{description:f.q2(i.description),sourceIds:i.sourceIds||[],aliases:i.aliases||[]},organizationId:r.organizationId,comment:r.comment}}(this.molecularProfileId,r);i&&(this.mutationState=this.reviseEvidenceMutator.mutate(this.submitRevisionsGQL,{input:i}))}static{this.\u0275fac=function(i){return new(i||z)(t.rXU(F.UK$),t.rXU(F.$rM),t.rXU(t.gRc),t.rXU(l.N))}}static{this.\u0275cmp=t.VBU({type:z,selectors:[["cvc-mp-revise-form"]],inputs:{molecularProfileId:"molecularProfileId"},decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Molecular Profile",3,"redirectUrl","mutationState","successMessage"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(i,o){if(1&i&&(t.j41(0,"cvc-form-submission-status-display",2),t.DNE(1,G,3,1,"ng-template",null,0,t.C5r)(3,R,2,5,"form",3)(4,g,1,0,"ng-template",null,1,t.C5r),t.k0s()),2&i){const d=t.sdS(2),c=t.sdS(5);t.Y8G("redirectUrl",o.url)("mutationState",o.mutationState)("successMessage",d),t.R7$(3),t.Y8G("ngIf",o.model)("ngIfElse",c)}},dependencies:[b.bT,D.CA,u.qT,u.cb,u.j4,S.aF,T.G],encapsulation:2,changeDetection:0})}};_=(0,p.Cg)([(0,I.d)()],_)},7238:(P,C,e)=>{e.d(C,{h:()=>h});var p=e(177),u=e(8927),I=e(513),E=e(8168),f=e(5316),v=e(4438);let h=(()=>{class y{static{this.\u0275fac=function(m){return new(m||y)}}static{this.\u0275mod=v.$C({type:y})}static{this.\u0275inj=v.G2t({imports:[p.MD,u.PQ,I.Zw,E.m,f.P]})}}return y})()},7526:(P,C,e)=>{e.d(C,{T:()=>T});var p=e(1635),u=e(9417),I=e(1226),E=e(3038),f=e(9894),v=e(1413);const y=[{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Variant Group"}},fieldGroup:[{key:"name",type:"base-input",props:{label:"Variant Group Name",required:!0}},{key:"description",type:"base-textarea",props:{tooltip:"User-defined summary of the clinical relevance of this Variant Group.",placeholder:"Enter a Variant Group Summary",label:"Variant Group Summary",required:!0,rows:5}},{key:"sourceIds",type:"source-multi-select",wrappers:["form-field"],props:{required:!1}},{key:"variantIds",type:"variant-multi-select",props:{label:"Variants",required:!0,requireFeature:!1,showManagerBtn:!0}}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"textarea",props:{label:"Comment",required:!0}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Variant Group Revision",align:"right"}}]}]}];var s=e(4438),M=e(9145),m=e(4222),n=e(177),t=e(8927),F=e(8524),l=e(8721);function b(G,R){if(1&G&&(s.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or you may view them "),s.j41(1,"a",4),s.EFF(2,"here."),s.k0s()),2&G){const g=s.XpG();s.R7$(),s.FS9("href",g.url,s.B4B)}}function D(G,R){if(1&G){const g=s.RV6();s.j41(0,"form",5),s.bIt("ngSubmit",function(){s.eBV(g);const a=s.XpG();return s.Njj(a.onSubmit(a.model))}),s.j41(1,"formly-form",6),s.bIt("modelChange",function(a){s.eBV(g);const r=s.XpG();return s.Njj(r.model=a)}),s.k0s()()}if(2&G){const g=s.XpG();s.Y8G("formGroup",g.form),s.R7$(),s.Y8G("form",g.form)("fields",g.fields)("model",g.model)("options",g.options)}}function S(G,R){1&G&&s.EFF(0," Loading Variant Group... ")}let T=class j{constructor(R,g,_,a){this.revisableFieldsGQL=R,this.submitRevisionsGQL=g,this.networkErrorService=_,this.cdr=a,this.form=new u.J3({}),this.fields=y,this.state={formReady$:new v.B},this.options={formState:this.state},this.reviseAssertionMutator=new I.E(this.networkErrorService)}onSubmit(R){if(console.log("------ Variant Group Suggestion Added ------"),console.log(R),!this.variantGroupId)return;let g=(0,E.t9)(this.variantGroupId,R);g&&(this.mutationState=this.reviseAssertionMutator.mutate(this.submitRevisionsGQL,{input:g}))}ngOnInit(){this.url=`/variant-groups/${this.variantGroupId}/revisions`}ngOnDestroy(){}ngAfterViewInit(){this.revisableFieldsGQL.fetch({variantGroupId:this.variantGroupId}).pipe((0,f.s)(this)).subscribe({next:({data:{variantGroup:R}})=>{R&&(this.model={id:R.id,fields:(0,E.G_)(R)},this.cdr.detectChanges())},error:R=>{console.error("Error retrieving variantgroupItem."),console.error(R)},complete:()=>{this.state.formReady$.next(!0)}})}static{this.\u0275fac=function(g){return new(g||j)(s.rXU(M.FEq),s.rXU(M.IxG),s.rXU(m.N),s.rXU(s.gRc))}}static{this.\u0275cmp=s.VBU({type:j,selectors:[["cvc-variantgroup-revise-form"]],inputs:{variantGroupId:"variantGroupId"},decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Variant Group",3,"mutationState","redirectUrl","successMessage"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(g,_){if(1&g&&(s.j41(0,"cvc-form-submission-status-display",2),s.DNE(1,b,3,1,"ng-template",null,0,s.C5r)(3,D,2,5,"form",3)(4,S,1,0,"ng-template",null,1,s.C5r),s.k0s()),2&g){const a=s.sdS(2),r=s.sdS(5);s.Y8G("mutationState",_.mutationState)("redirectUrl",_.url)("successMessage",a),s.R7$(3),s.Y8G("ngIf",_.model)("ngIfElse",r)}},dependencies:[n.bT,t.CA,u.qT,u.cb,u.j4,F.aF,l.G]})}};T=(0,p.Cg)([(0,f.d)()],T)},3038:(P,C,e)=>{e.d(C,{G_:()=>u,bI:()=>E,t9:()=>I});var p=e(5741);function u(f){return{description:f.description,sourceIds:f.sources.map(v=>v.id),variantIds:f.variants.nodes.map(v=>v.id),name:f.name}}function I(f,v){let h=E(v);if(h)return delete h.organizationId,{id:f,fields:{...h,description:p.q2(h.description)},organizationId:v.organizationId,comment:v.comment}}function E(f){const v=f.fields;if(![v.name,f.comment].find(y=>void 0===y))return{description:v.description,sourceIds:v.sourceIds||[],name:v.name,variantIds:v.variantIds||[],organizationId:f.organizationId}}}}]);