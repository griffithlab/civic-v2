"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[262],{664:(Y,U,e)=>{e.d(U,{D:()=>Pt});var n=e(9145),O=e(6354),h=e(4608),t=e(3953),o=e(177),L=e(513),A=e(6389),P=e(7529),N=e(5703),B=e(2617),S=e(5103),G=e(9438),$=e(7685),j=e(1635),b=e(1226),D=e(9894),z=e(1305),I=e(4222),u=e(9417),v=e(5930),y=e(8927),F=e(2983),W=e(3617),k=e(5154),r=e(9449),g=e(1939),p=e(5566);function s(a,d){if(1&a){const i=t.RV6();t.j41(0,"nz-alert",6),t.bIt("nzOnClose",function(){t.eBV(i);const _=t.XpG();return t.Njj(_.onSuccessBannerClose())}),t.k0s()}}function m(a,d){if(1&a&&(t.j41(0,"nz-form-item"),t.nrm(1,"cvc-form-errors-alert",7),t.k0s()),2&a){const i=t.XpG();t.R7$(),t.Y8G("errors",i.errorMessages)}}let f=class tt{constructor(d,i,c){this.viewerService=d,this.addCommentGql=i,this.networkErrorService=c,this.commentAddedEvent=new t.bkB,this.success=!1,this.errorMessages=[],this.loading=!1,this.viewerService.viewer$.pipe((0,D.s)(this)).subscribe(_=>{this.mostRecentOrg=_.mostRecentOrg}),this.addCommentMutator=new b.E(this.networkErrorService)}submitComment(){if(this.commentText){this.errorMessages=[];let i=this.addCommentMutator.mutate(this.addCommentGql,{input:{body:this.commentText,subject:this.subject,organizationId:void 0===this.mostRecentOrg?void 0:this.mostRecentOrg.id}});i.submitSuccess$.pipe((0,D.s)(this)).subscribe(c=>{c&&(this.resetForm(),this.success=!0)}),i.submitError$.pipe((0,D.s)(this)).subscribe(c=>{c&&(this.errorMessages=c,this.success=!1)}),i.isSubmitting$.pipe((0,D.s)(this)).subscribe(c=>{this.loading=c})}}resetForm(){this.commentText="",this.commentAddedEvent.emit()}onSuccessBannerClose(){this.resetForm()}static#t=this.\u0275fac=function(i){return new(i||tt)(t.rXU(z.q),t.rXU(n.hj),t.rXU(I.N))};static#n=this.\u0275cmp=t.VBU({type:tt,selectors:[["cvc-comment-add-form"]],inputs:{subject:"subject"},outputs:{commentAddedEvent:"commentAddedEvent"},decls:11,vars:7,consts:[["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[4,"ngIf"],[3,"commentChange","comment"],["nzTip","Submitting",3,"nzSpinning"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small","nz-tooltip","",3,"disabled","nzTooltipTrigger","nzTooltipTitle"],["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose"],[3,"errors"]],template:function(i,c){1&i&&(t.j41(0,"nz-card"),t.DNE(1,s,1,0,"nz-alert",0),t.j41(2,"form",1),t.bIt("ngSubmit",function(){return c.submitComment()}),t.DNE(3,m,2,1,"nz-form-item",2),t.j41(4,"cvc-comment-input-form",3),t.mxI("commentChange",function(x){return t.DH7(c.commentText,x)||(c.commentText=x),x}),t.k0s(),t.j41(5,"nz-spin",4)(6,"nz-form-item")(7,"nz-form-control")(8,"cvc-form-buttons")(9,"button",5),t.EFF(10," Add Comment "),t.k0s()()()()()()()),2&i&&(t.R7$(),t.Y8G("ngIf",c.success),t.R7$(2),t.Y8G("ngIf",c.errorMessages.length>0),t.R7$(),t.R50("comment",c.commentText),t.R7$(),t.Y8G("nzSpinning",c.loading),t.R7$(4),t.Y8G("disabled",c.loading||!(void 0!==c.commentText&&c.commentText.length>=10))("nzTooltipTrigger",c.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==c.mostRecentOrg?null:c.mostRecentOrg.name)))},dependencies:[o.bT,u.qT,u.cb,L.aO,A.c,v.p,N.cK,P.Uq,P.e,y.CA,y.Ls,y.zS,F.a,W.Y,k.LH,u.cV,r.j,g.l,p.K],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2})};f=(0,j.Cg)([(0,D.d)()],f);var R=e(9365),M=e(6864),Z=e(7391),Q=e(2874),V=e(1774),q=e(4126),C=e(8139);function K(a,d){if(1&a&&t.nrm(0,"nz-avatar",5),2&a){const i=t.XpG().ngrxLet;t.Y8G("nzSrc",i.commenter.profileImagePath)}}function l(a,d){1&a&&t.nrm(0,"nz-avatar",6)}function T(a,d){if(1&a){const i=t.RV6();t.j41(0,"nz-comment-action")(1,"span",7),t.bIt("nzOnConfirm",function(){t.eBV(i);const _=t.XpG().ngrxLet,x=t.XpG(),nt=t.r8f(0);return t.Njj(x.deleteComment(_.id,null==nt.mostRecentOrg?null:nt.mostRecentOrg.id))}),t.k0s()()}}function E(a,d){1&a&&(t.j41(0,"span",4)(1,"i"),t.EFF(2," This comment has been deleted. "),t.k0s()())}function X(a,d){1&a&&(t.j41(0,"span",4)(1,"i"),t.EFF(2,"No Comment Provided"),t.k0s()())}function H(a,d){if(1&a&&t.nrm(0,"cvc-comment-body",8),2&a){const i=t.XpG(2).ngrxLet;t.Y8G("commentBodySegments",i.parsedComment)}}function J(a,d){if(1&a&&t.DNE(0,X,3,0,"span",4)(1,H,1,1,"cvc-comment-body",8),2&a){const i=t.XpG().ngrxLet;t.vxM(0==i.parsedComment.length?0:1)}}function et(a,d){if(1&a&&(t.j41(0,"nz-comment",2),t.nI1(1,"timeAgo"),t.DNE(2,K,1,1,"nz-avatar",3)(3,l,1,0,"ng-template",null,0,t.C5r)(5,T,2,0,"nz-comment-action"),t.j41(6,"nz-comment-content"),t.DNE(7,E,3,0,"span",4)(8,J,2,1),t.k0s()()),2&a){const i=d.ngrxLet,c=t.sdS(4);t.XpG();const _=t.r8f(0);t.Y8G("nzAuthor",i.commenter.displayName)("nzDatetime",t.bMT(1,6,i.createdAt)),t.R7$(2),t.Y8G("ngIf",i.commenter.profileImagePath)("ngIfElse",c),t.R7$(3),t.vxM(_&&_.signedIn&&_.id==i.commenter.id&&i.id&&!i.deleted?5:-1),t.R7$(2),t.vxM(i.deleted?7:8)}}let ot=(()=>{class a{constructor(i,c,_){this.viewerService=i,this.networkErrorService=c,this.deleteCommentGql=_,this.comment=t.hFB.required(),this.viewer$=this.viewerService.viewer$}ngOnInit(){if(void 0===this.comment)throw new Error("Must pass a comment into comment display component.")}deleteComment(i,c){new b.E(this.networkErrorService).mutate(this.deleteCommentGql,{input:{commentId:i,organizationId:c}})}static#t=this.\u0275fac=function(c){return new(c||a)(t.rXU(z.q),t.rXU(I.N),t.rXU(n.hGs))};static#n=this.\u0275cmp=t.VBU({type:a,selectors:[["cvc-comment-display"]],inputs:{comment:[1,"comment"]},decls:3,vars:4,consts:[["noAvatar",""],[3,"nzAuthor","nzDatetime",4,"ngrxLet"],[3,"nzAuthor","nzDatetime"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["nz-typography","","nzType","secondary"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","","nzIcon","civic:curator"],["nz-tooltip","","nz-popconfirm","","nzPopconfirmPlacement","right","nzPopconfirmTitle","Delete This Comment?","nzTooltipTitle","Delete","nz-icon","","nzType","delete",3,"nzOnConfirm"],[3,"commentBodySegments"]],template:function(c,_){1&c&&(t.SS7(0),t.nI1(1,"ngrxPush"),t.DNE(2,et,9,8,"nz-comment",1)),2&c&&(t.bH3(t.bMT(1,1,_.viewer$)),t.R7$(2),t.Y8G("ngrxLet",_.comment()))},dependencies:[o.bT,M.fL,M.sf,M.OW,M.fS,G.PM,Z.Di,S.Dn,k.LH,Q.PV,V.Nj,q.p,V.L9,C.N],encapsulation:2})}return a})();var it=e(4493);const w=()=>[];function at(a,d){if(1&a&&(t.j41(0,"nz-card",10),t.nrm(1,"cvc-comment-display",11),t.k0s()),2&a){const i=t.XpG(2);t.R7$(),t.Y8G("comment",i.creationComment)}}function ct(a,d){1&a&&(t.qex(0),t.j41(1,"nz-row",6)(2,"nz-col",7)(3,"nz-space",8),t.DNE(4,at,2,1,"nz-card",9),t.k0s()()(),t.bVm()),2&a&&(t.R7$(),t.Y8G("nzGutter",16))}function st(a,d){if(1&a){const i=t.RV6();t.j41(0,"div",24)(1,"button",25),t.bIt("click",function(){t.eBV(i);const _=t.XpG().ngIf,x=t.XpG(3);return t.Njj(x.onLoadMore(_.startCursor))}),t.EFF(2," Load older comments "),t.k0s()()}}function rt(a,d){if(1&a&&(t.j41(0,"nz-list-header"),t.DNE(1,st,3,0,"div",23),t.k0s()),2&a){const i=d.ngIf;t.R7$(),t.Y8G("ngIf",i.hasPreviousPage)}}function mt(a,d){if(1&a&&(t.j41(0,"nz-list-item"),t.nrm(1,"cvc-comment-display",11),t.k0s()),2&a){const i=d.$implicit;t.R7$(),t.Y8G("comment",i)}}function lt(a,d){if(1&a&&(t.j41(0,"nz-card",21)(1,"nz-list",22),t.nI1(2,"ngrxPush"),t.nI1(3,"ngrxPush"),t.DNE(4,rt,2,1,"nz-list-header",4),t.nI1(5,"ngrxPush"),t.DNE(6,mt,2,1,"ng-template",null,1,t.C5r),t.k0s()()),2&a){const i=t.sdS(7),c=t.XpG(2);t.R7$(),t.Y8G("nzDataSource",t.bMT(2,4,c.comments$))("nzLoading",t.bMT(3,6,c.loading$))("nzRenderItem",i),t.R7$(3),t.Y8G("ngIf",t.bMT(5,8,c.pageInfo$))}}function _t(a,d){if(1&a){const i=t.RV6();t.j41(0,"cvc-comment-add-form",26),t.bIt("commentAddedEvent",function(){t.eBV(i);const _=t.XpG(2);return t.Njj(_.refreshList())}),t.k0s()}if(2&a){const i=t.XpG(2);t.Y8G("subject",i.commentable)}}function pt(a,d){if(1&a&&t.nrm(0,"nz-avatar",29),2&a){const i=t.XpG().$implicit;t.Y8G("nzSrc",i.profileImagePath)}}function dt(a,d){if(1&a&&(t.nrm(0,"nz-avatar",30),t.nI1(1,"uppercase")),2&a){const i=t.XpG().$implicit;t.Y8G("nzText",t.bMT(1,1,i.displayName.charAt(0)))}}function Ct(a,d){if(1&a&&(t.DNE(0,pt,1,1,"nz-avatar",28)(1,dt,2,3,"ng-template",null,3,t.C5r),t.j41(3,"span"),t.EFF(4),t.k0s()),2&a){const i=d.$implicit,c=t.sdS(2);t.Y8G("ngIf",i.profileImagePath)("ngIfElse",c),t.R7$(4),t.JRh(i.displayName)}}function ut(a,d){if(1&a){const i=t.RV6();t.j41(0,"cvc-participant-list",27),t.nI1(1,"ngrxPush"),t.bIt("participantSelectedEvent",function(_){t.eBV(i);const x=t.XpG(2);return t.Njj(x.onCommenterSelected(_))}),t.DNE(2,Ct,5,3,"ng-template",null,2,t.C5r),t.k0s()}if(2&a){const i=t.XpG(2);t.Y8G("participantList",t.bMT(1,1,i.commenters$)||t.lJ4(3,w))}}function zt(a,d){if(1&a&&t.nrm(0,"nz-avatar",29),2&a){const i=t.XpG().$implicit;t.Y8G("nzSrc",i.profileImagePath)}}function gt(a,d){if(1&a&&(t.nrm(0,"nz-avatar",30),t.nI1(1,"uppercase")),2&a){const i=t.XpG().$implicit;t.Y8G("nzText",t.bMT(1,1,i.displayName.charAt(0)))}}function ft(a,d){if(1&a&&(t.DNE(0,zt,1,1,"nz-avatar",28)(1,gt,2,3,"ng-template",null,3,t.C5r),t.j41(3,"span"),t.EFF(4),t.k0s()),2&a){const i=d.$implicit,c=t.sdS(2);t.Y8G("ngIf",i.profileImagePath)("ngIfElse",c),t.R7$(4),t.JRh(i.displayName)}}function vt(a,d){if(1&a){const i=t.RV6();t.j41(0,"cvc-participant-list",31),t.nI1(1,"ngrxPush"),t.bIt("participantSelectedEvent",function(_){t.eBV(i);const x=t.XpG(2);return t.Njj(x.onMentionedUserSelected(_))}),t.DNE(2,ft,5,3,"ng-template",null,2,t.C5r),t.k0s()}if(2&a){const i=t.XpG(2);t.Y8G("participantList",t.bMT(1,1,i.mentionedUsers$)||t.lJ4(3,w))}}function ht(a,d){if(1&a&&(t.nrm(0,"nz-avatar",33),t.j41(1,"span"),t.EFF(2),t.k0s()),2&a){const i=d.$implicit;t.Mz_("nzIcon","civic-",i.tag.displayName,""),t.R7$(2),t.SpI("",i.tag.displayName,"s")}}function Tt(a,d){if(1&a){const i=t.RV6();t.j41(0,"cvc-participant-list",32),t.nI1(1,"ngrxPush"),t.bIt("participantSelectedEvent",function(_){t.eBV(i);const x=t.XpG(2);return t.Njj(x.onMentionedRoleSelected(_))}),t.DNE(2,ht,3,3,"ng-template",null,2,t.C5r),t.k0s()}if(2&a){const i=t.XpG(2);t.Y8G("participantList",t.bMT(1,1,i.mentionedRoles$)||t.lJ4(3,w))}}function Et(a,d){if(1&a&&(t.nrm(0,"i",35),t.nI1(1,"iconNameForSubscribableEntity"),t.j41(2,"span"),t.EFF(3),t.k0s()),2&a){const i=d.$implicit;t.Y8G("nzType",t.bMT(1,2,i.tag.tagType)),t.R7$(3),t.JRh(i.tag.displayName)}}function yt(a,d){if(1&a){const i=t.RV6();t.j41(0,"cvc-participant-list",34),t.nI1(1,"ngrxPush"),t.bIt("participantSelectedEvent",function(_){t.eBV(i);const x=t.XpG(2);return t.Njj(x.onMentionedEntitySelected(_))}),t.DNE(2,Et,4,4,"ng-template",null,2,t.C5r),t.k0s()}if(2&a){const i=t.XpG(2);t.Y8G("participantList",t.bMT(1,1,i.mentionedEntities$)||t.lJ4(3,w))}}function Ot(a,d){1&a&&(t.qex(0),t.j41(1,"nz-row",6)(2,"nz-col",12)(3,"nz-space",8),t.DNE(4,lt,8,10,"nz-card",13)(5,_t,1,1,"cvc-comment-add-form",14),t.k0s()(),t.j41(6,"nz-col",15)(7,"nz-space",16),t.DNE(8,ut,4,4,"cvc-participant-list",17)(9,vt,4,4,"cvc-participant-list",18)(10,Tt,4,4,"cvc-participant-list",19)(11,yt,4,4,"cvc-participant-list",20),t.k0s()()(),t.bVm()),2&a&&(t.R7$(),t.Y8G("nzGutter",16))}function Dt(a,d){if(1&a){const i=t.RV6();t.j41(0,"cvc-comment-add-form",26),t.bIt("commentAddedEvent",function(){t.eBV(i);const _=t.XpG();return t.Njj(_.refreshList())}),t.k0s()}if(2&a){const i=t.XpG();t.Y8G("subject",i.commentable)}}let Pt=(()=>{class a{constructor(i){this.gql=i,this.pageSize=5}ngOnInit(){this.queryRef$=this.gql.watch({subject:this.commentable,last:this.pageSize,sortBy:{column:n.G_G.Created,direction:n.UEL.Asc}});let i=this.queryRef$.valueChanges;this.pageInfo$=i.pipe((0,O.T)(({data:c})=>c.comments.pageInfo)),this.loading$=i.pipe((0,O.T)(({loading:c})=>c)),this.comments$=i.pipe((0,O.T)(({data:c})=>c.comments.edges.map(_=>_.node))),this.commenters$=i.pipe((0,O.T)(({data:c})=>c.comments.uniqueCommenters)),this.mentionedUsers$=i.pipe((0,O.T)(({data:c})=>c.comments.mentionedUsers)),this.mentionedRoles$=i.pipe((0,O.T)(({data:c})=>c.comments.mentionedRoles.map(_=>({id:`${_.entityId}-${_.tagType}`,tag:_})))),this.mentionedEntities$=i.pipe((0,O.T)(({data:c})=>c.comments.mentionedEntities.map(_=>({id:`${_.entityId}-${_.tagType}`,tag:_})))),this.unfilteredCount$=i.pipe((0,h.E)("data","comments","unfilteredCountForSubject"))}onLoadMore(i){this.queryRef$.fetchMore({variables:{last:this.pageSize,before:i}})}onCommenterSelected(i){this.queryRef$.refetch({originatingUserId:i?.id})}onMentionedUserSelected(i){this.queryRef$.refetch({mentionedUserId:i?.id})}onMentionedRoleSelected(i){if(i){let c=n.gG1[i.tag.displayName[0].toUpperCase()+i.tag.displayName.slice(1)];this.queryRef$.refetch({mentionedRole:c})}else this.queryRef$.refetch({mentionedRole:void 0})}onMentionedEntitySelected(i){this.queryRef$.refetch(i?{mentionedEntity:{entityType:i.tag.tagType,id:i.tag.entityId}}:{mentionedEntity:void 0})}refreshList(){this.queryRef$.refetch()}static#t=this.\u0275fac=function(c){return new(c||a)(t.rXU(n.y5X))};static#n=this.\u0275cmp=t.VBU({type:a,selectors:[["cvc-comment-list"]],inputs:{commentable:"commentable",creationComment:"creationComment"},decls:5,vars:5,consts:[["noComments",""],["comment",""],["itemTemplate",""],["noAvatar",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"nzGutter"],["nzSpan","24"],["nzDirection","vertical",2,"width","100%"],["nzTitle","Submission Comment",4,"nzSpaceItem"],["nzTitle","Submission Comment"],[3,"comment"],["nzSpan","18"],["nzTitle","Comments",4,"nzSpaceItem"],["id","addComment",3,"subject","commentAddedEvent",4,"nzSpaceItem"],["nzSpan","6"],["nzDirection","vertical"],["listTitle","Commenters",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Mentioned Users",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Mentioned Roles",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Mentioned Entities",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["nzTitle","Comments"],["nzSize","small","nzItemLayout","horizontal",3,"nzDataSource","nzLoading","nzRenderItem"],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","link","nzSize","small","nzBlock","",3,"click"],["id","addComment",3,"commentAddedEvent","subject"],["listTitle","Commenters",3,"participantSelectedEvent","participantList"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["listTitle","Mentioned Users",3,"participantSelectedEvent","participantList"],["listTitle","Mentioned Roles",3,"participantSelectedEvent","participantList"],[3,"nzIcon"],["listTitle","Mentioned Entities",3,"participantSelectedEvent","participantList"],["nz-icon","",3,"nzType"]],template:function(c,_){if(1&c&&(t.DNE(0,ct,5,1,"ng-container",4)(1,Ot,12,1,"ng-container",5),t.nI1(2,"ngrxPush"),t.DNE(3,Dt,1,1,"ng-template",null,0,t.C5r)),2&c){const x=t.sdS(4);t.Y8G("ngIf",_.creationComment),t.R7$(),t.Y8G("ngIf",t.bMT(2,3,_.unfilteredCount$))("ngIfElse",x)}},dependencies:[o.bT,L.aO,A.c,P.Uq,P.e,N.cK,B.eE,B.Xo,B.lQ,S.Dn,G.PM,$.U5,$.Dq,f,R.T,ot,o.Pc,V.L9,it.g],styles:["[_nghost-%COMP%]{display:block}nz-list-header[_ngcontent-%COMP%]{padding:0;margin:0}nz-list-header[_ngcontent-%COMP%]   [nz-list-load-more][_ngcontent-%COMP%]{margin-top:-.5em;padding-bottom:.5em}"]})}return a})()},4873:(Y,U,e)=>{e.d(U,{A:()=>R});var n=e(177),O=e(7529),h=e(5703),t=e(2617),o=e(9438),L=e(7685),A=e(1912),P=e(2968),N=e(6864),B=e(7169),S=e(4917),G=e(7391),$=e(5103),j=e(5154),b=e(2874),D=e(3953);let z=(()=>{class M{static#t=this.\u0275fac=function(V){return new(V||M)};static#n=this.\u0275mod=D.$C({type:M});static#e=this.\u0275inj=D.G2t({imports:[n.MD,N.sC,o.Yb,G.kT,$.Y3,j.Qt,b.g9,B.W,S.i]})}return M})();var I=e(9417),u=e(8524),v=e(8927),y=e(4308),F=e(3842),W=e(8492),k=e(5128),r=e(3617),g=e(513),p=e(3069),s=e(2983),m=e(9541);let f=(()=>{class M{static#t=this.\u0275fac=function(V){return new(V||M)};static#n=this.\u0275mod=D.$C({type:M});static#e=this.\u0275inj=D.G2t({imports:[n.MD,I.X1,g.Zw,h.Ti,m.hM,v.PQ,s.V,p.$f,r.$,j.Qt,I.YN,u.qy,W.M,F.k,B.W,k.K,y.I]})}return M})(),R=(()=>{class M{static#t=this.\u0275fac=function(V){return new(V||M)};static#n=this.\u0275mod=D.$C({type:M});static#e=this.\u0275inj=D.G2t({imports:[n.MD,g.Zw,O.f3,h.Ti,t.rD,$.Y3,S.i,o.Yb,L.pc,A.i3,f,P.K,z]})}return M})()},9365:(Y,U,e)=>{e.d(U,{T:()=>D});var n=e(3953),O=e(177),h=e(5703),t=e(2617),o=e(5103),L=e(513),A=e(6389),P=e(5930);const N=["itemTemplate"],B=z=>({$implicit:z});function S(z,I){if(1&z){const u=n.RV6();n.j41(0,"nz-list-item",5),n.bIt("click",function(){n.eBV(u);const y=n.XpG().$implicit,F=n.XpG(2);return n.Njj(F.onParticipantSelected(y))}),n.eu8(1,6),n.k0s()}if(2&z){const u=n.XpG().$implicit,v=n.XpG(2);n.AVh("selected-participant",u.id==(null==v.selectedItem?null:v.selectedItem.id)),n.R7$(),n.Y8G("ngTemplateOutlet",v.itemTemplateRef||null)("ngTemplateOutletContext",n.eq3(4,B,u))}}function G(z,I){if(1&z&&(n.qex(0),n.DNE(1,S,2,6,"nz-list-item",4),n.bVm()),2&z){const u=I.index,v=n.XpG(2);n.R7$(),n.Y8G("ngIf",u+1<=v.defaultListSize)}}function $(z,I){if(1&z){const u=n.RV6();n.j41(0,"button",7),n.bIt("click",function(){n.eBV(u);const y=n.XpG(2);return n.Njj(y.onExpandClicked())}),n.nrm(1,"i",8),n.EFF(2," Expand "),n.k0s()}}function j(z,I){if(1&z){const u=n.RV6();n.j41(0,"button",7),n.bIt("click",function(){n.eBV(u);const y=n.XpG(2);return n.Njj(y.onCollapseClicked())}),n.nrm(1,"i",9),n.EFF(2," Collapse "),n.k0s()}}function b(z,I){if(1&z&&(n.qex(0),n.j41(1,"nz-card",1)(2,"nz-list"),n.DNE(3,G,2,1,"ng-container",2),n.k0s(),n.DNE(4,$,3,0,"button",3)(5,j,3,0,"button",3),n.k0s(),n.bVm()),2&z){const u=n.XpG();n.R7$(),n.Y8G("nzTitle",u.listTitle),n.R7$(2),n.Y8G("ngForOf",u.participantList),n.R7$(),n.Y8G("ngIf",u.participantList.length>u.defaultListSize),n.R7$(),n.Y8G("ngIf",u.isExpanded)}}let D=(()=>{class z{constructor(){this.defaultListSize=5,this.participantSelectedEvent=new n.bkB,this.isExpanded=!1}ngOnInit(){this.preselectedOption&&(this.selectedItem=this.preselectedOption)}onParticipantSelected(u){this.selectedItem=u.id==this.selectedItem?.id?void 0:u,this.participantSelectedEvent.emit(this.selectedItem)}onExpandClicked(){this.originalDefaultListSize=this.defaultListSize,this.defaultListSize=this.participantList.length,this.isExpanded=!0}onCollapseClicked(){this.originalDefaultListSize&&(this.defaultListSize=this.originalDefaultListSize,this.isExpanded=!1)}static#t=this.\u0275fac=function(v){return new(v||z)};static#n=this.\u0275cmp=n.VBU({type:z,selectors:[["cvc-participant-list"]],contentQueries:function(v,y,F){if(1&v&&n.wni(F,N,5),2&v){let W;n.mGM(W=n.lsd())&&(y.itemTemplateRef=W.first)}},inputs:{participantList:"participantList",listTitle:"listTitle",defaultListSize:"defaultListSize",preselectedOption:"preselectedOption"},outputs:{participantSelectedEvent:"participantSelectedEvent"},decls:1,vars:1,consts:[[4,"ngIf"],["nz-type","inner",2,"margin-bottom","1em",3,"nzTitle"],[4,"ngFor","ngForOf"],["nz-button","","nzType","default","nzSize","small",3,"click",4,"ngIf"],["nzSize","small","class","participant-list-item",3,"selected-participant","click",4,"ngIf"],["nzSize","small",1,"participant-list-item",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-button","","nzType","default","nzSize","small",3,"click"],["nz-icon","","nzType","vertical-align-bottom"],["nz-icon","","nzType","vertical-align-top"]],template:function(v,y){1&v&&n.DNE(0,b,6,4,"ng-container",0),2&v&&n.Y8G("ngIf",y.participantList&&y.participantList.length>0)},dependencies:[O.Sq,O.bT,O.T3,h.cK,t.eE,t.lQ,o.Dn,L.aO,A.c,P.p],styles:[".participant-list-item[_ngcontent-%COMP%]:hover{border:1px solid #40a9ff;cursor:pointer}.participant-list-item[_ngcontent-%COMP%]{padding:2px;margin:2px}.selected-participant[_ngcontent-%COMP%]{background:#40a9ff;color:#fff}"]})}return z})()},2968:(Y,U,e)=>{e.d(U,{K:()=>A});var n=e(177),O=e(5703),h=e(2617),t=e(5103),o=e(513),L=e(3953);let A=(()=>{class P{static#t=this.\u0275fac=function(S){return new(S||P)};static#n=this.\u0275mod=L.$C({type:P});static#e=this.\u0275inj=L.G2t({imports:[n.MD,O.Ti,h.rD,t.Y3,o.Zw]})}return P})()},5566:(Y,U,e)=>{e.d(U,{K:()=>r});var n=e(3953),O=e(1413),h=e(9145),t=e(5964),o=e(6977),L=e(6354),A=e(9172),P=e(4608),N=e(9199),B=e(1305),S=e(177),G=e(9417),$=e(1774),j=e(9541),b=e(2983),D=e(3069),z=e(1011),I=e(4126);const u=()=>["#","@","$"],v=()=>({minRows:4,maxRows:100});function y(g,p){if(1&g&&(n.qex(0),n.j41(1,"span"),n.EFF(2),n.k0s(),n.bVm()),2&g){const s=p.$implicit;n.R7$(2),n.JRh(s.displayName)}}function F(g,p){1&g&&(n.qex(0),n.nrm(1,"nz-spin",8),n.bVm())}function W(g,p){if(1&g&&(n.qex(0),n.nrm(1,"cvc-comment-body",9),n.bVm()),2&g){const s=p.ngIf;n.R7$(),n.Y8G("commentBodySegments",s)}}function k(g,p){if(1&g){const s=n.RV6();n.qex(0),n.j41(1,"nz-tabset",1)(2,"nz-tab",2)(3,"nz-mention",3),n.bIt("nzOnSearchChange",function(f){n.eBV(s);const R=n.XpG();return n.Njj(R.onSearchChange(f))})("nzOnSelect",function(){n.eBV(s);const f=n.XpG();return n.Njj(f.suggestions=[])}),n.j41(4,"textarea",4),n.mxI("ngModelChange",function(f){n.eBV(s);const R=n.XpG();return n.DH7(R.commentText,f)||(R.commentText=f),n.Njj(f)}),n.bIt("ngModelChange",function(f){n.eBV(s);const R=n.XpG();return n.Njj(R.onCommentChanged(f))}),n.k0s(),n.DNE(5,y,3,1,"ng-container",5),n.k0s()(),n.j41(6,"nz-tab",6),n.bIt("nzClick",function(){n.eBV(s);const f=n.XpG();return n.Njj(f.onPreviewButtonClicked())}),n.DNE(7,F,2,0,"ng-container",7),n.nI1(8,"ngrxPush"),n.DNE(9,W,2,1,"ng-container",7),n.nI1(10,"ngrxPush"),n.k0s()(),n.bVm()}if(2&g){const s=p.ngrxLet,m=n.XpG();n.R7$(),n.Y8G("nzAnimated",!1),n.R7$(2),n.Y8G("nzSuggestions",m.suggestions)("nzPrefix",n.lJ4(14,u))("nzValueWith",m.autoCompleteValueFor),n.R7$(),n.Y8G("placeholder",s&&s.canCurate?"Enter comment (minimum length 10. Use @ to mention users; # to link entities)":"Please sign in")("nzAutosize",n.lJ4(15,v)),n.R50("ngModel",m.commentText),n.BMQ("disabled",!s||!s.canCurate||null),n.R7$(3),n.Y8G("ngIf",n.bMT(8,10,m.previewLoading$)),n.R7$(2),n.Y8G("ngIf",n.bMT(10,12,m.previewComment$))}}let r=(()=>{class g{constructor(s,m,f,R){this.previewCommentGql=s,this.userTypeaheadGql=m,this.entityTypeaheadGql=f,this.viewerService=R,this.commentChange=new n.bkB,this.destroy$=new O.B,this.suggestions=[],this.roleSuggestions=[{displayName:"admins",value:"admins"},{displayName:"editors",value:"editors"}]}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.commentText=this.comment,this.userTypeaheadQueryRef$=this.userTypeaheadGql.watch({queryTerm:""}),this.userTypeaheadQueryRef$.valueChanges.pipe((0,P.E)("data","userTypeahead"),(0,t.p)(N.kP),(0,o.Q)(this.destroy$)).subscribe(s=>this.suggestions=s.map(m=>({displayName:m.username,value:m.username}))),this.entityTypeaheadQueryRef$=this.entityTypeaheadGql.watch({queryTerm:""}),this.entityTypeaheadQueryRef$.valueChanges.pipe((0,P.E)("data","entityTypeahead"),(0,t.p)(N.kP),(0,o.Q)(this.destroy$)).subscribe(s=>this.suggestions=s.map(m=>({displayName:m.displayName,value:this.tagForEntityTypeAndId(m.tagType,m.entityId)})))}ngOnChanges(){this.commentText=this.comment}autoCompleteValueFor(s){return s.value}tagForEntityTypeAndId(s,m){switch(s){case h.lBA.Feature:return`FID${m}`;case h.lBA.Variant:return`VID${m}`;case h.lBA.VariantGroup:return`VGID${m}`;case h.lBA.EvidenceItem:return`EID${m}`;case h.lBA.Assertion:return`AID${m}`;case h.lBA.Revision:return`RID${m}`;case h.lBA.MolecularProfile:return`MPID${m}`;case h.lBA.Role:return Object.keys(h.gG1)[m]}}resetForm(){this.commentText=""}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreviewButtonClicked(){this.commentText&&(this.previewComment$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,P.E)("data","previewCommentText"),(0,t.p)(N.kP)),this.previewLoading$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,L.T)(({loading:s})=>s),(0,A.Z)(!0)))}onSearchChange({value:s,prefix:m}){"@"===m?this.userTypeaheadQueryRef$.refetch({queryTerm:s}):"$"==m?this.suggestions=this.roleSuggestions.filter(f=>f.value.startsWith(s)):this.entityTypeaheadQueryRef$.refetch({queryTerm:s})}onCommentChanged(s){this.commentChange.emit(s)}static#t=this.\u0275fac=function(m){return new(m||g)(n.rXU(h.WGp),n.rXU(h.bPL),n.rXU(h.paL),n.rXU(B.q))};static#n=this.\u0275cmp=n.VBU({type:g,selectors:[["cvc-comment-input-form"]],inputs:{comment:"comment"},outputs:{commentChange:"commentChange"},features:[n.OA$],decls:1,vars:1,consts:[[4,"ngrxLet"],[3,"nzAnimated"],["nzTitle","Write"],["nzNotFoundContent","No matches...",3,"nzOnSearchChange","nzOnSelect","nzSuggestions","nzPrefix","nzValueWith"],["nzMentionTrigger","","nz-input","",2,"width","100%",3,"ngModelChange","placeholder","nzAutosize","ngModel"],[4,"nzMentionSuggestion"],["nzTitle","Preview",3,"nzClick"],[4,"ngIf"],["nzTip","Loading..."],[3,"commentBodySegments"]],template:function(m,f){1&m&&n.DNE(0,k,11,16,"ng-container",0),2&m&&n.Y8G("ngrxLet",f.viewer$)},dependencies:[S.bT,G.me,G.BC,$.Nj,j.JZ,j.rE,b.a,D.O2,D.sJ,D.yZ,z.Sy,z.c9,G.vS,I.p,$.L9],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2})}return g})()},6864:(Y,U,e)=>{e.d(U,{OW:()=>u,fL:()=>F,fS:()=>y,sC:()=>k,sf:()=>I});var n=e(3953),O=e(6939),h=e(1413),t=e(6977),o=e(7806),L=e(8203);const A=["*"];function P(r,g){1&r&&n.SdG(0)}const N=[[["nz-avatar","nz-comment-avatar",""]],[["nz-comment-content"]],"*"],B=["nz-avatar[nz-comment-avatar]","nz-comment-content","*"];function S(r,g){if(1&r&&(n.qex(0),n.EFF(1),n.bVm()),2&r){const p=n.XpG(2);n.R7$(),n.JRh(p.nzAuthor)}}function G(r,g){if(1&r&&(n.j41(0,"span",4),n.DNE(1,S,2,1,"ng-container",8),n.k0s()),2&r){const p=n.XpG();n.R7$(),n.Y8G("nzStringTemplateOutlet",p.nzAuthor)}}function $(r,g){if(1&r&&(n.qex(0),n.EFF(1),n.bVm()),2&r){const p=n.XpG(2);n.R7$(),n.JRh(p.nzDatetime)}}function j(r,g){if(1&r&&(n.j41(0,"span",5),n.DNE(1,$,2,1,"ng-container",8),n.k0s()),2&r){const p=n.XpG();n.R7$(),n.Y8G("nzStringTemplateOutlet",p.nzDatetime)}}function b(r,g){}function D(r,g){if(1&r&&(n.j41(0,"li")(1,"span"),n.DNE(2,b,0,0,"ng-template",9),n.k0s()()),2&r){const p=g.$implicit;n.R7$(2),n.Y8G("nzCommentActionHost",p.content)}}function z(r,g){if(1&r&&(n.j41(0,"ul",6),n.Z7z(1,D,3,1,"li",null,n.fX1),n.k0s()),2&r){const p=n.XpG();n.R7$(),n.Dyx(p.actions)}}let I=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#n=this.\u0275dir=n.FsC({type:r,selectors:[["nz-avatar","nz-comment-avatar",""]],exportAs:["nzCommentAvatar"],standalone:!0})}return r})(),u=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#n=this.\u0275dir=n.FsC({type:r,selectors:[["nz-comment-content"],["","nz-comment-content",""]],hostAttrs:[1,"ant-comment-content-detail"],exportAs:["nzCommentContent"],standalone:!0})}return r})(),v=(()=>{class r extends O.I3{constructor(p,s){super(p,s)}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}ngAfterViewInit(){this.attach(this.nzCommentActionHost)}static#t=this.\u0275fac=function(s){return new(s||r)(n.rXU(n.OM3),n.rXU(n.c1b))};static#n=this.\u0275dir=n.FsC({type:r,selectors:[["","nzCommentActionHost",""]],inputs:{nzCommentActionHost:"nzCommentActionHost"},exportAs:["nzCommentActionHost"],standalone:!0,features:[n.Vt3]})}return r})(),y=(()=>{class r{get content(){return this.contentPortal}constructor(p){this.viewContainerRef=p,this.contentPortal=null}ngOnInit(){this.contentPortal=new O.VA(this.implicitContent,this.viewContainerRef)}static#t=this.\u0275fac=function(s){return new(s||r)(n.rXU(n.c1b))};static#n=this.\u0275cmp=n.VBU({type:r,selectors:[["nz-comment-action"]],viewQuery:function(s,m){if(1&s&&n.GBs(n.C4Q,7),2&s){let f;n.mGM(f=n.lsd())&&(m.implicitContent=f.first)}},exportAs:["nzCommentAction"],standalone:!0,features:[n.aNF],ngContentSelectors:A,decls:1,vars:0,template:function(s,m){1&s&&(n.NAR(),n.DNE(0,P,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}return r})(),F=(()=>{class r{constructor(p,s){this.cdr=p,this.directionality=s,this.dir="ltr",this.destroy$=new h.B}ngOnInit(){this.directionality.change?.pipe((0,t.Q)(this.destroy$)).subscribe(p=>{this.dir=p,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(s){return new(s||r)(n.rXU(n.gRc),n.rXU(L.dS,8))};static#n=this.\u0275cmp=n.VBU({type:r,selectors:[["nz-comment"]],contentQueries:function(s,m,f){if(1&s&&n.wni(f,y,4),2&s){let R;n.mGM(R=n.lsd())&&(m.actions=R)}},hostVars:4,hostBindings:function(s,m){2&s&&n.AVh("ant-comment",!0)("ant-comment-rtl","rtl"===m.dir)},inputs:{nzAuthor:"nzAuthor",nzDatetime:"nzDatetime"},exportAs:["nzComment"],standalone:!0,features:[n.aNF],ngContentSelectors:B,decls:11,vars:3,consts:[[1,"ant-comment-inner"],[1,"ant-comment-avatar"],[1,"ant-comment-content"],[1,"ant-comment-content-author"],[1,"ant-comment-content-author-name"],[1,"ant-comment-content-author-time"],[1,"ant-comment-actions"],[1,"ant-comment-nested"],[4,"nzStringTemplateOutlet"],[3,"nzCommentActionHost"]],template:function(s,m){1&s&&(n.NAR(N),n.j41(0,"div",0)(1,"div",1),n.SdG(2),n.k0s(),n.j41(3,"div",2)(4,"div",3),n.DNE(5,G,2,1,"span",4)(6,j,2,1,"span",5),n.k0s(),n.SdG(7,1),n.DNE(8,z,3,0,"ul",6),n.k0s()(),n.j41(9,"div",7),n.SdG(10,2),n.k0s()),2&s&&(n.R7$(5),n.vxM(m.nzAuthor?5:-1),n.R7$(),n.vxM(m.nzDatetime?6:-1),n.R7$(2),n.vxM(null!=m.actions&&m.actions.length?8:-1))},dependencies:[o.C,o.m,v],encapsulation:2,changeDetection:0})}return r})(),k=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#n=this.\u0275mod=n.$C({type:r});static#e=this.\u0275inj=n.G2t({imports:[F]})}return r})()},2874:(Y,U,e)=>{e.d(U,{PV:()=>Q,g9:()=>q});var n=e(4707),O=e(851),h=e(7987),t=e(177),o=e(3953),L=e(1413),A=e(6977),P=e(1594),N=e(980),B=e(513),S=e(713),G=e(6042),$=e(6841),j=e(7806),b=e(5463),D=e(317),z=e(6914),I=e(5103),u=e(5154),v=e(8203),y=e(6389),F=e(5930);const W=["okBtn"],k=["cancelBtn"];function r(C,K){1&C&&(o.j41(0,"div",6),o.nrm(1,"span",14),o.k0s())}function g(C,K){if(1&C&&(o.qex(0),o.j41(1,"span",16),o.nrm(2,"span",17),o.k0s(),o.bVm()),2&C){const l=K.$implicit;o.R7$(2),o.Y8G("nzType",l||"exclamation-circle")}}function p(C,K){if(1&C&&(o.qex(0),o.DNE(1,g,3,1,"ng-container",10),o.j41(2,"div",15),o.EFF(3),o.k0s(),o.bVm()),2&C){const l=o.XpG(2);o.R7$(),o.Y8G("nzStringTemplateOutlet",l.nzIcon),o.R7$(2),o.JRh(l.nzTitle)}}function s(C,K){if(1&C&&o.EFF(0),2&C){const l=o.XpG(2);o.SpI(" ",l.nzCancelText," ")}}function m(C,K){1&C&&(o.EFF(0),o.nI1(1,"nzI18n")),2&C&&o.SpI(" ",o.bMT(1,1,"Modal.cancelText")," ")}function f(C,K){if(1&C&&o.EFF(0),2&C){const l=o.XpG(2);o.SpI(" ",l.nzOkText," ")}}function R(C,K){1&C&&(o.EFF(0),o.nI1(1,"nzI18n")),2&C&&o.SpI(" ",o.bMT(1,1,"Modal.okText")," ")}function M(C,K){if(1&C){const l=o.RV6();o.j41(0,"div",4)(1,"div",5),o.DNE(2,r,2,0,"div",6),o.j41(3,"div",7)(4,"div")(5,"div",8)(6,"div",9),o.DNE(7,p,4,2,"ng-container",10),o.k0s(),o.j41(8,"div",11)(9,"button",12,1),o.bIt("click",function(){o.eBV(l);const E=o.XpG();return o.Njj(E.onCancel())}),o.DNE(11,s,1,1)(12,m,2,3),o.k0s(),o.j41(13,"button",13,2),o.bIt("click",function(){o.eBV(l);const E=o.XpG();return o.Njj(E.onConfirm())}),o.DNE(15,f,1,1)(16,R,2,3),o.k0s()()()()()()()}if(2&C){const l=o.XpG();o.AVh("ant-popover-rtl","rtl"===l.dir),o.Y8G("cdkTrapFocusAutoCapture",null!==l.nzAutoFocus)("ngClass",l._classMap)("ngStyle",l.nzOverlayStyle)("@.disabled",!(null==l.noAnimation||!l.noAnimation.nzNoAnimation))("nzNoAnimation",null==l.noAnimation?null:l.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),o.R7$(2),o.vxM(l.nzPopconfirmShowArrow?2:-1),o.R7$(5),o.Y8G("nzStringTemplateOutlet",l.nzTitle),o.R7$(2),o.Y8G("nzSize","small"),o.BMQ("cdkFocusInitial","cancel"===l.nzAutoFocus||null),o.R7$(2),o.vxM(l.nzCancelText?11:12),o.R7$(2),o.Y8G("nzSize","small")("nzType","danger"!==l.nzOkType?l.nzOkType:"primary")("nzDanger",l.nzOkDanger||"danger"===l.nzOkType)("nzLoading",l.confirmLoading)("disabled",l.nzOkDisabled),o.BMQ("cdkFocusInitial","ok"===l.nzAutoFocus||null),o.R7$(2),o.vxM(l.nzOkText?15:16)}}let Q=(()=>{class C extends u.ME{getProxyPropertyMap(){return{nzOkText:["nzOkText",()=>this.nzOkText],nzOkType:["nzOkType",()=>this.nzOkType],nzOkDanger:["nzOkDanger",()=>this.nzOkDanger],nzOkDisabled:["nzOkDisabled",()=>this.nzOkDisabled],nzCancelText:["nzCancelText",()=>this.nzCancelText],nzBeforeConfirm:["nzBeforeConfirm",()=>this.nzBeforeConfirm],nzCondition:["nzCondition",()=>this.nzCondition],nzIcon:["nzIcon",()=>this.nzIcon],nzPopconfirmShowArrow:["nzPopconfirmShowArrow",()=>this.nzPopconfirmShowArrow],nzPopconfirmBackdrop:["nzBackdrop",()=>this.nzPopconfirmBackdrop],nzAutoFocus:["nzAutoFocus",()=>this.nzAutofocus],...super.getProxyPropertyMap()}}constructor(){super(V),this._nzModuleName="popconfirm",this.trigger="click",this.placement="top",this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzPopconfirmBackdrop=!1,this.nzAutofocus=null,this.visibleChange=new o.bkB,this.nzOnCancel=new o.bkB,this.nzOnConfirm=new o.bkB}createComponent(){super.createComponent(),this.component.nzOnCancel.pipe((0,A.Q)(this.destroy$)).subscribe(()=>{this.nzOnCancel.emit()}),this.component.nzOnConfirm.pipe((0,A.Q)(this.destroy$)).subscribe(()=>{this.nzOnConfirm.emit()})}static#t=this.\u0275fac=function(T){return new(T||C)};static#n=this.\u0275dir=o.FsC({type:C,selectors:[["","nz-popconfirm",""]],hostVars:2,hostBindings:function(T,E){2&T&&o.AVh("ant-popover-open",E.visible)},inputs:{arrowPointAtCenter:[2,"nzPopconfirmArrowPointAtCenter","arrowPointAtCenter",o.L39],title:[0,"nzPopconfirmTitle","title"],directiveTitle:[0,"nz-popconfirm","directiveTitle"],trigger:[0,"nzPopconfirmTrigger","trigger"],placement:[0,"nzPopconfirmPlacement","placement"],origin:[0,"nzPopconfirmOrigin","origin"],mouseEnterDelay:[0,"nzPopconfirmMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:[0,"nzPopconfirmMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:[0,"nzPopconfirmOverlayClassName","overlayClassName"],overlayStyle:[0,"nzPopconfirmOverlayStyle","overlayStyle"],visible:[0,"nzPopconfirmVisible","visible"],nzOkText:"nzOkText",nzOkType:"nzOkType",nzOkDisabled:[2,"nzOkDisabled","nzOkDisabled",o.L39],nzOkDanger:[2,"nzOkDanger","nzOkDanger",o.L39],nzCancelText:"nzCancelText",nzBeforeConfirm:"nzBeforeConfirm",nzIcon:"nzIcon",nzCondition:[2,"nzCondition","nzCondition",o.L39],nzPopconfirmShowArrow:[2,"nzPopconfirmShowArrow","nzPopconfirmShowArrow",o.L39],nzPopconfirmBackdrop:"nzPopconfirmBackdrop",nzAutofocus:"nzAutofocus"},outputs:{visibleChange:"nzPopconfirmVisibleChange",nzOnCancel:"nzOnCancel",nzOnConfirm:"nzOnConfirm"},exportAs:["nzPopconfirm"],standalone:!0,features:[o.GFd,o.Vt3]})}return(0,n.Cg)([(0,G.H4)()],C.prototype,"nzPopconfirmBackdrop",void 0),(0,n.Cg)([(0,G.H4)()],C.prototype,"nzAutofocus",void 0),C})(),V=(()=>{class C extends u.VJ{constructor(l,T,E,X,H){super(l,E,H),this.elementRef=T,this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzOkType="primary",this.nzOkDanger=!1,this.nzOkDisabled=!1,this.nzAutoFocus=null,this.nzBeforeConfirm=null,this.nzOnCancel=new L.B,this.nzOnConfirm=new L.B,this._trigger="click",this.elementFocusedBeforeModalWasOpened=null,this._prefix="ant-popover",this.confirmLoading=!1,this.document=X}ngOnDestroy(){super.ngOnDestroy(),this.nzOnCancel.complete(),this.nzOnConfirm.complete()}show(){this.nzCondition?this.onConfirm():(this.capturePreviouslyFocusedElement(),super.show())}hide(){super.hide(),this.restoreFocus()}handleConfirm(){this.nzOnConfirm.next(),super.hide()}onCancel(){this.nzOnCancel.next(),super.hide()}onConfirm(){if(this.nzBeforeConfirm){const l=(0,D.cG)(this.nzBeforeConfirm()).pipe((0,P.$)());this.confirmLoading=!0,l.pipe((0,N.j)(()=>{this.confirmLoading=!1,this.cdr.markForCheck()}),(0,A.Q)(this.nzVisibleChange),(0,A.Q)(this.destroy$)).subscribe(T=>{T&&this.handleConfirm()})}else this.handleConfirm()}capturePreviouslyFocusedElement(){this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement)}restoreFocus(){const l=this.elementFocusedBeforeModalWasOpened;if(l&&"function"==typeof l.focus){const T=this.document.activeElement,E=this.elementRef.nativeElement;(!T||T===this.document.body||T===E||E.contains(T))&&l.focus()}}static#t=this.\u0275fac=function(T){return new(T||C)(o.rXU(o.gRc),o.rXU(o.aKT),o.rXU(v.dS,8),o.rXU(t.qQ,8),o.rXU($.z,9))};static#n=this.\u0275cmp=o.VBU({type:C,selectors:[["nz-popconfirm"]],viewQuery:function(T,E){if(1&T&&(o.GBs(W,5,o.aKT),o.GBs(k,5,o.aKT)),2&T){let X;o.mGM(X=o.lsd())&&(E.okBtn=X),o.mGM(X=o.lsd())&&(E.cancelBtn=X)}},exportAs:["nzPopconfirmComponent"],standalone:!0,features:[o.Vt3,o.aNF],decls:2,vars:6,consts:[["overlay","cdkConnectedOverlay"],["cancelBtn",""],["okBtn",""],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"overlayOutsideClick","detach","positionChange","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","nzArrowPointAtCenter"],["cdkTrapFocus","",1,"ant-popover",3,"cdkTrapFocusAutoCapture","ngClass","ngStyle","nzNoAnimation"],[1,"ant-popover-content"],[1,"ant-popover-arrow"],[1,"ant-popover-inner"],[1,"ant-popover-inner-content"],[1,"ant-popover-message"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-buttons"],["nz-button","",3,"click","nzSize"],["nz-button","",3,"click","nzSize","nzType","nzDanger","nzLoading","disabled"],[1,"ant-popover-arrow-content"],[1,"ant-popover-message-title"],[1,"ant-popover-message-icon"],["nz-icon","","nzTheme","fill",3,"nzType"]],template:function(T,E){if(1&T){const X=o.RV6();o.DNE(0,M,17,20,"ng-template",3,0,o.C5r),o.bIt("overlayOutsideClick",function(J){return o.eBV(X),o.Njj(E.onClickOutside(J))})("detach",function(){return o.eBV(X),o.Njj(E.hide())})("positionChange",function(J){return o.eBV(X),o.Njj(E.onPositionChange(J))})}2&T&&o.Y8G("cdkConnectedOverlayHasBackdrop",E.nzBackdrop)("cdkConnectedOverlayOrigin",E.origin)("cdkConnectedOverlayPositions",E._positions)("cdkConnectedOverlayOpen",E._visible)("cdkConnectedOverlayPush",E.cdkConnectedOverlayPush)("nzArrowPointAtCenter",E.nzArrowPointAtCenter)},dependencies:[h.z_,h.WB,b.$_,b.vT,O.Pd,O.kB,t.YU,t.B3,$.z,j.C,j.m,I.Y3,I.Dn,B.Zw,B.aO,y.c,F.p,z.bP,z.Vc],encapsulation:2,data:{animation:[S.uX]},changeDetection:0})}return C})(),q=(()=>{class C{static#t=this.\u0275fac=function(T){return new(T||C)};static#n=this.\u0275mod=o.$C({type:C});static#e=this.\u0275inj=o.G2t({imports:[V]})}return C})()}}]);