"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[6471],{8909:(A,O,t)=>{t.d(O,{m:()=>c});var d=t(9808),g=t(9401),u=t(8369),n=t(209),v=t(4867),r=t(5080),m=t(3309),s=t(7345),a=t(9476),E=t(8481),f=t(647),p=t(5e3);let c=(()=>{class P{}return P.\u0275fac=function(y){return new(y||P)},P.\u0275mod=p.oAB({type:P}),P.\u0275inj=p.cJS({imports:[[d.ez,E.X,f.PV,g.y,u.W,n.i,v.Q,r.G,m.U,s.W,a.L]]}),P})()},4271:(A,O,t)=>{t.d(O,{M:()=>I});var d=t(9808),g=t(6949),u=t(3868),n=t(7345),v=t(7484),r=t(4546),m=t(3762),s=t(8625),a=t(4182),E=t(1825),f=t(6042),p=t(4375),c=t(2359),P=t(404),D=t(9444),y=t(4509),C=t(7525),T=t(5e3);let W=(()=>{class l{}return l.\u0275fac=function(R){return new(R||l)},l.\u0275mod=T.oAB({type:l}),l.\u0275inj=T.cJS({imports:[[d.ez,a.u5,a.UX,g.WG,r.U5,f.sL,v.vh,c.L,P.cg,C.j,E.A,p.R,D.s,y.w]]}),l})();var V=t(9779),S=t(8144),J=t(1894),j=t(8481),G=t(3618),F=t(6699),Y=t(3580),X=t(8018),H=t(6286),U=t(4867),B=t(8645),L=t(685),$=t(3172),K=t(6114),x=t(5737),Z=t(647),N=t(3610),i=t(1047);let h=(()=>{class l{}return l.\u0275fac=function(R){return new(R||l)},l.\u0275mod=T.oAB({type:l}),l.\u0275inj=T.cJS({imports:[[d.ez,a.UX,g.WG,f.sL,r.U5,a.u5,c.L,v.vh,N.$6,Z.PV,P.cg,C.j,y.w,p.R,E.A]]}),l})();var o=t(7026),e=t(8909);let _=(()=>{class l{}return l.\u0275fac=function(R){return new(R||l)},l.\u0275mod=T.oAB({type:l}),l.\u0275inj=T.cJS({imports:[[d.ez,J.Jb,m.Ph,v.vh,S.zf,j.X,G.ZJ,F.Rt,L.Xo,K.Wr,x.S,P.cg,m.Ph,N.$6,Z.PV,i.o7,a.u5,s.$L.forChild({formatter:{useClass:o.x,provide:s.KP}}),E.A,V.s,n.W,Y.Q,X.e,H.y,U.Q,B.M,$.x,f.sL,c.L,g.WG,h,x.S,e.m]]}),l})();var M=t(1150);let I=(()=>{class l{}return l.\u0275fac=function(R){return new(R||l)},l.\u0275mod=T.oAB({type:l}),l.\u0275inj=T.cJS({imports:[[d.ez,a.u5,g.WG,s.$L.forChild({formatter:{useClass:o.x,provide:s.KP}}),f.sL,r.U5,u.aF,f.sL,n.W,m.Ph,v.vh,W,_,L.Xo,M.N,F.Rt,S.zf]]}),l})()},4682:(A,O,t)=>{t.d(O,{m:()=>m});var d=t(9808),g=t(404),u=t(3618),n=t(4401),v=t(647),r=t(5e3);let m=(()=>{class s{}return s.\u0275fac=function(E){return new(E||s)},s.\u0275mod=r.oAB({type:s}),s.\u0275inj=r.cJS({imports:[[d.ez,v.PV,n.mS,g.cg,u.ZJ]]}),s})()},9401:(A,O,t)=>{t.d(O,{y:()=>m});var d=t(9808),g=t(8481),u=t(647),n=t(325),v=t(9444),r=t(5e3);let m=(()=>{class s{}return s.\u0275fac=function(E){return new(E||s)},s.\u0275mod=r.oAB({type:s}),s.\u0275inj=r.cJS({imports:[[d.ez,n.Bz,v.s,g.X,u.PV]]}),s})()},1150:(A,O,t)=>{t.d(O,{N:()=>m});var d=t(9808),g=t(7484),u=t(3762),n=t(647),v=t(6042),r=t(5e3);let m=(()=>{class s{}return s.\u0275fac=function(E){return new(E||s)},s.\u0275mod=r.oAB({type:s}),s.\u0275inj=r.cJS({imports:[[d.ez,g.vh,u.Ph,n.PV,v.sL]]}),s})()},3172:(A,O,t)=>{t.d(O,{x:()=>v});var d=t(9808),g=t(8481),u=t(647),n=t(5e3);let v=(()=>{class r{}return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[[d.ez,g.X,u.PV]]}),r})()},6081:(A,O,t)=>{t.d(O,{J:()=>p});var d=t(9808),g=t(3630),u=t(3098),n=t(7484),v=t(6949),r=t(897),m=t(9476),s=t(5473),a=t(5737),E=t(1894),f=t(5e3);let p=(()=>{class c{}return c.\u0275fac=function(D){return new(D||c)},c.\u0275mod=f.oAB({type:c}),c.\u0275inj=f.cJS({imports:[[d.ez,v.WG,E.Jb,n.vh,u.q6,a.S,g.X,r.$,m.L,s.H]]}),c})()},7345:(A,O,t)=>{t.d(O,{W:()=>s});var d=t(9808),g=t(325),u=t(3610),n=t(8481),v=t(647),r=t(6081),m=t(5e3);let s=(()=>{class a{}return a.\u0275fac=function(f){return new(f||a)},a.\u0275mod=m.oAB({type:a}),a.\u0275inj=m.cJS({imports:[[d.ez,g.Bz,r.J,u.$6,n.X,v.PV]]}),a})()},5080:(A,O,t)=>{t.d(O,{G:()=>m});var d=t(9808),g=t(325),u=t(3610),n=t(8481),v=t(647),r=t(5e3);let m=(()=>{class s{}return s.\u0275fac=function(E){return new(E||s)},s.\u0275mod=r.oAB({type:s}),s.\u0275inj=r.cJS({imports:[[d.ez,g.Bz,u.$6,n.X,v.PV]]}),s})()},8645:(A,O,t)=>{t.d(O,{M:()=>p});var d=t(9808),g=t(325),u=t(8481),n=t(7484),v=t(3630),r=t(3098),m=t(6949),s=t(647),a=t(5e3);let E=(()=>{class c{}return c.\u0275fac=function(D){return new(D||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[[d.ez,m.WG,s.PV,n.vh,r.q6,v.X]]}),c})();var f=t(3610);let p=(()=>{class c{}return c.\u0275fac=function(D){return new(D||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[[d.ez,g.Bz,s.PV,u.X,f.$6,E]]}),c})()},4509:(A,O,t)=>{t.d(O,{w:()=>y});var d=t(9808),g=t(4182),u=t(7484),n=t(4546),v=t(7008),r=t(1825),m=t(4375),s=t(6042),a=t(4623),E=t(868),f=t(6949),p=t(8909),c=t(7525),P=t(4921),D=t(5e3);let y=(()=>{class C{}return C.\u0275fac=function(W){return new(W||C)},C.\u0275mod=D.oAB({type:C}),C.\u0275inj=D.cJS({imports:[[d.ez,g.UX,f.WG,s.sL,u.vh,E.we,n.U5,c.j,P.Gl,g.u5,v.B,r.A,m.R,p.m,a.K]]}),C})()},4921:(A,O,t)=>{t.d(O,{YW:()=>x,Gl:()=>N,O3:()=>U,jO:()=>K});var d=t(226),g=t(2845),u=t(9808),n=t(5e3),v=t(4182),r=t(647),m=t(8929),s=t(2916),a=t(6787),E=t(3753),f=t(655),p=t(1159),c=t(7429),P=t(1059),D=t(7545),y=t(6950),C=t(1721);const T=["items"];function W(i,h){1&i&&n.GkF(0)}const V=function(i){return{$implicit:i}};function S(i,h){if(1&i&&(n.ynx(0),n.YNc(1,W,1,0,"ng-container",8),n.BQk()),2&i){const o=n.oxw().$implicit,e=n.oxw(2);n.xp6(1),n.Q6J("ngTemplateOutlet",e.suggestionTemplate)("ngTemplateOutletContext",n.VKq(2,V,o))}}function J(i,h){if(1&i&&n._uU(0),2&i){const o=n.oxw().$implicit,e=n.oxw(2);n.Oqu(e.nzValueWith(o))}}function j(i,h){if(1&i){const o=n.EpF();n.TgZ(0,"li",4,5),n.NdJ("click",function(){const M=n.CHM(o).$implicit;return n.oxw(2).selectSuggestion(M)}),n.YNc(2,S,2,4,"ng-container",6),n.YNc(3,J,1,1,"ng-template",null,7,n.W1O),n.qZA()}if(2&i){const o=h.index,e=n.MAs(4),_=n.oxw(2);n.ekj("focus",o===_.activeIndex),n.xp6(2),n.Q6J("ngIf",_.suggestionTemplate)("ngIfElse",e)}}function G(i,h){1&i&&(n.TgZ(0,"span"),n._UZ(1,"i",11),n.qZA())}function F(i,h){if(1&i&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&i){const o=n.oxw(3);n.xp6(1),n.Oqu(o.nzNotFoundContent)}}function Y(i,h){if(1&i&&(n.TgZ(0,"li",9),n.YNc(1,G,2,0,"span",10),n.YNc(2,F,2,1,"span",10),n.qZA()),2&i){const o=n.oxw(2);n.xp6(1),n.Q6J("ngIf",o.nzLoading),n.xp6(1),n.Q6J("ngIf",!o.nzLoading)}}function X(i,h){if(1&i&&(n.TgZ(0,"ul",1),n.YNc(1,j,5,4,"li",2),n.YNc(2,Y,3,2,"li",3),n.qZA()),2&i){const o=n.oxw();n.xp6(1),n.Q6J("ngForOf",o.filteredSuggestions),n.xp6(1),n.Q6J("ngIf",0===o.filteredSuggestions.length)}}const H=["*"];let U=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275dir=n.lG2({type:i,selectors:[["","nzMentionSuggestion",""]],exportAs:["nzMentionSuggestion"]}),i})();let L=(()=>{class i{constructor(){this.triggerChange$=new m.xQ}triggerChanged(){return this.triggerChange$.asObservable()}registerTrigger(o){this.trigger!==o&&(this.trigger=o,this.triggerChange$.next(o))}ngOnDestroy(){this.triggerChange$.complete()}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=n.Yz7({token:i,factory:i.\u0275fac}),i})();const $={provide:v.JU,useExisting:(0,n.Gpc)(()=>K),multi:!0};let K=(()=>{class i{constructor(o,e){this.el=o,this.nzMentionService=e,this.onChange=()=>{},this.onTouched=()=>{},this.onFocusin=new n.vpe,this.onBlur=new n.vpe,this.onInput=new n.vpe,this.onKeydown=new n.vpe,this.onClick=new n.vpe}completeEvents(){this.onFocusin.complete(),this.onBlur.complete(),this.onInput.complete(),this.onKeydown.complete(),this.onClick.complete()}focus(o){this.el.nativeElement.focus(),this.el.nativeElement.setSelectionRange(o,o)}insertMention(o){const e=this.el.nativeElement.value,_=`${o.mention} `,M=[e.slice(0,o.startPos+1),_,e.slice(o.endPos,e.length)].join("");this.el.nativeElement.value=M,this.focus(o.startPos+_.length+1),this.onChange(M),this.value=M}writeValue(o){this.value=o,this.el.nativeElement.value="string"==typeof o?o:""}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}ngAfterViewInit(){this.nzMentionService.registerTrigger(this)}ngOnDestroy(){this.completeEvents()}}return i.\u0275fac=function(o){return new(o||i)(n.Y36(n.SBq),n.Y36(L))},i.\u0275dir=n.lG2({type:i,selectors:[["input","nzMentionTrigger",""],["textarea","nzMentionTrigger",""]],hostAttrs:["autocomplete","off"],hostBindings:function(o,e){1&o&&n.NdJ("focusin",function(){return e.onFocusin.emit()})("blur",function(){return e.onBlur.emit()})("input",function(M){return e.onInput.emit(M)})("keydown",function(M){return e.onKeydown.emit(M)})("click",function(M){return e.onClick.emit(M)})},exportAs:["nzMentionTrigger"],features:[n._Bn([$])]}),i})(),x=(()=>{class i{constructor(o,e,_,M,I,l){this.ngZone=o,this.ngDocument=e,this.cdr=_,this.overlay=M,this.viewContainerRef=I,this.nzMentionService=l,this.nzValueWith=z=>z,this.nzPrefix="@",this.nzLoading=!1,this.nzNotFoundContent="\u65e0\u5339\u914d\u7ed3\u679c\uff0c\u8f7b\u6572\u7a7a\u683c\u5b8c\u6210\u8f93\u5165",this.nzPlacement="bottom",this.nzSuggestions=[],this.nzOnSelect=new n.vpe,this.nzOnSearchChange=new n.vpe,this.isOpen=!1,this.filteredSuggestions=[],this.suggestionTemplate=null,this.activeIndex=-1,this.previousValue=null,this.cursorMention=null,this.overlayRef=null}set suggestionChild(o){o&&(this.suggestionTemplate=o)}get triggerNativeElement(){return this.trigger.el.nativeElement}get focusItemElement(){var o;const e=null===(o=this.items)||void 0===o?void 0:o.toArray();return e&&e[this.activeIndex]?e[this.activeIndex].nativeElement:null}ngOnInit(){this.nzMentionService.triggerChanged().subscribe(o=>{this.trigger=o,this.bindTriggerEvents(),this.closeDropdown(),this.overlayRef=null})}ngOnChanges(o){o.hasOwnProperty("nzSuggestions")&&this.isOpen&&(this.previousValue=null,this.activeIndex=-1,this.resetDropdown(!1))}ngAfterViewInit(){this.items.changes.pipe((0,P.O)(this.items),(0,D.w)(()=>{const o=this.items.toArray();return new s.y(e=>this.ngZone.runOutsideAngular(()=>(0,a.T)(...o.map(_=>(0,E.R)(_.nativeElement,"mousedown"))).subscribe(e)))})).subscribe(o=>{o.preventDefault()})}ngOnDestroy(){this.closeDropdown()}closeDropdown(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.overlayRef.detach(),this.overlayOutsideClickSubscription.unsubscribe(),this.isOpen=!1,this.cdr.markForCheck())}openDropdown(){this.attachOverlay(),this.isOpen=!0,this.cdr.markForCheck()}getMentions(){return this.trigger?(0,C.qR)(this.trigger.value,this.nzPrefix):[]}selectSuggestion(o){const e=this.nzValueWith(o);this.trigger.insertMention({mention:e,startPos:this.cursorMentionStart,endPos:this.cursorMentionEnd}),this.nzOnSelect.emit(o),this.closeDropdown(),this.activeIndex=-1}handleInput(o){const e=o.target;this.trigger.onChange(e.value),this.trigger.value=e.value,this.resetDropdown()}handleKeydown(o){const e=o.keyCode;if(this.isOpen&&e===p.K5&&-1!==this.activeIndex&&this.filteredSuggestions.length)this.selectSuggestion(this.filteredSuggestions[this.activeIndex]),o.preventDefault();else if(e===p.oh||e===p.SV)this.resetDropdown(),o.stopPropagation();else{if(this.isOpen&&(e===p.Mf||e===p.hY))return void this.closeDropdown();this.isOpen&&e===p.LH&&(this.setPreviousItemActive(),o.preventDefault(),o.stopPropagation()),this.isOpen&&e===p.JH&&(this.setNextItemActive(),o.preventDefault(),o.stopPropagation())}}handleClick(){this.resetDropdown()}bindTriggerEvents(){this.trigger.onInput.subscribe(o=>this.handleInput(o)),this.trigger.onKeydown.subscribe(o=>this.handleKeydown(o)),this.trigger.onClick.subscribe(()=>this.handleClick())}suggestionsFilter(o,e){const _=o.substring(1);if(this.previousValue===o&&o!==this.cursorMention[0])return;this.previousValue=o,e&&this.nzOnSearchChange.emit({value:this.cursorMention.substring(1),prefix:this.cursorMention[0]});const M=_.toLowerCase();this.filteredSuggestions=this.nzSuggestions.filter(I=>this.nzValueWith(I).toLowerCase().includes(M))}resetDropdown(o=!0){if(this.resetCursorMention(),"string"!=typeof this.cursorMention||!this.canOpen())return void this.closeDropdown();this.suggestionsFilter(this.cursorMention,o);const e=this.filteredSuggestions.indexOf(this.cursorMention.substring(1));this.activeIndex=e>=0?e:0,this.openDropdown()}setNextItemActive(){this.activeIndex=this.activeIndex+1<=this.filteredSuggestions.length-1?this.activeIndex+1:0,this.cdr.markForCheck(),this.scrollToFocusItem()}setPreviousItemActive(){this.activeIndex=this.activeIndex-1<0?this.filteredSuggestions.length-1:this.activeIndex-1,this.cdr.markForCheck(),this.scrollToFocusItem()}scrollToFocusItem(){this.focusItemElement&&this.focusItemElement.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}canOpen(){const o=this.triggerNativeElement;return!o.readOnly&&!o.disabled}resetCursorMention(){const o=this.triggerNativeElement.value.replace(/[\r\n]/g," ")||"",e=this.triggerNativeElement.selectionStart,_="string"==typeof this.nzPrefix?[this.nzPrefix]:this.nzPrefix;let M=_.length;for(;M>=0;){const I=o.lastIndexOf(_[M],e),l=o.indexOf(" ",e)>-1?o.indexOf(" ",e):o.length,z=o.substring(I,l);if(!(I>0&&" "!==o[I-1]||I<0||z.includes(_[M],1)||z.includes(" ")))return this.cursorMention=z,this.cursorMentionStart=I,void(this.cursorMentionEnd=l);this.cursorMention=null,this.cursorMentionStart=-1,this.cursorMentionEnd=-1,M--}}updatePositions(){const o=(0,C.Ly)(this.triggerNativeElement,this.cursorMentionStart),e=o.top-this.triggerNativeElement.getBoundingClientRect().height-this.triggerNativeElement.scrollTop+("bottom"===this.nzPlacement?o.height-6:-6);this.positionStrategy.withDefaultOffsetX(o.left-this.triggerNativeElement.scrollLeft).withDefaultOffsetY(e),"bottom"===this.nzPlacement&&this.positionStrategy.withPositions([...y.fG]),"top"===this.nzPlacement&&this.positionStrategy.withPositions([...y.A7]),this.positionStrategy.apply()}subscribeOverlayOutsideClick(){return(0,a.T)(this.overlayRef.outsidePointerEvents(),(0,E.R)(this.ngDocument,"touchend")).subscribe(o=>{var e;const _=o.target;this.isOpen&&_!==this.trigger.el.nativeElement&&!(null===(e=this.overlayRef)||void 0===e?void 0:e.overlayElement.contains(_))&&this.closeDropdown()})}attachOverlay(){this.overlayRef||(this.portal=new c.UE(this.suggestionsTemp,this.viewContainerRef),this.overlayRef=this.overlay.create(this.getOverlayConfig())),this.overlayRef&&!this.overlayRef.hasAttached()&&(this.overlayRef.attach(this.portal),this.overlayOutsideClickSubscription=this.subscribeOverlayOutsideClick()),this.updatePositions()}getOverlayConfig(){return new g.X_({positionStrategy:this.getOverlayPosition(),scrollStrategy:this.overlay.scrollStrategies.reposition(),disposeOnNavigation:!0})}getOverlayPosition(){const o=[new g.tR({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new g.tR({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"})];return this.positionStrategy=this.overlay.position().flexibleConnectedTo(this.trigger.el).withPositions(o).withFlexibleDimensions(!1).withPush(!1),this.positionStrategy}}return i.\u0275fac=function(o){return new(o||i)(n.Y36(n.R0b),n.Y36(u.K0,8),n.Y36(n.sBO),n.Y36(g.aV),n.Y36(n.s_b),n.Y36(L))},i.\u0275cmp=n.Xpm({type:i,selectors:[["nz-mention"]],contentQueries:function(o,e,_){if(1&o&&n.Suo(_,U,5,n.Rgc),2&o){let M;n.iGM(M=n.CRH())&&(e.suggestionChild=M.first)}},viewQuery:function(o,e){if(1&o&&(n.Gf(n.Rgc,5),n.Gf(T,5,n.SBq)),2&o){let _;n.iGM(_=n.CRH())&&(e.suggestionsTemp=_.first),n.iGM(_=n.CRH())&&(e.items=_)}},inputs:{nzValueWith:"nzValueWith",nzPrefix:"nzPrefix",nzLoading:"nzLoading",nzNotFoundContent:"nzNotFoundContent",nzPlacement:"nzPlacement",nzSuggestions:"nzSuggestions"},outputs:{nzOnSelect:"nzOnSelect",nzOnSearchChange:"nzOnSearchChange"},exportAs:["nzMention"],features:[n._Bn([L]),n.TTD],ngContentSelectors:H,decls:3,vars:0,consts:[["suggestions",""],[1,"ant-mention-dropdown"],["class","ant-mention-dropdown-item",3,"focus","click",4,"ngFor","ngForOf"],["class","ant-mention-dropdown-notfound ant-mention-dropdown-item",4,"ngIf"],[1,"ant-mention-dropdown-item",3,"click"],["items",""],[4,"ngIf","ngIfElse"],["defaultSuggestion",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-mention-dropdown-notfound","ant-mention-dropdown-item"],[4,"ngIf"],["nz-icon","","nzType","loading"]],template:function(o,e){1&o&&(n.F$t(),n.Hsn(0),n.YNc(1,X,3,2,"ng-template",null,0,n.W1O))},directives:[u.sg,u.O5,u.tP,r.Ls],encapsulation:2,changeDetection:0}),(0,f.gn)([(0,C.yF)()],i.prototype,"nzLoading",void 0),i})(),N=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[d.vT,u.ez,v.u5,g.U8,r.PV]]}),i})()}}]);