"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[2379],{8164:(I,h,t)=>{t.d(h,{Z:()=>o});var e=t(6895),f=t(9116),n=t(9676),v=t(5106),r=t(2635),s=t(6616),p=t(317),a=t(9597),c=t(767),d=t(4650);class o{}o.\u0275fac=function(E){return new(E||o)},o.\u0275mod=d.oAB({type:o}),o.\u0275inj=d.cJS({imports:[e.ez,f.Bz,r._N,r.pP,s.sL,a.L,v.S,n.g,c.Q,p.s]})},634:(I,h,t)=>{t.d(h,{l:()=>D});var e=t(655),f=t(4006),n=t(6123),v=t(9637),r=t(7404),s=t(9933),p=t(3327);const d=(0,t(3612).Z)([{wrappers:["form-layout"],props:{submitLabel:"Submit Evidence Item",showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{title:"New Evidence Item"},fieldGroup:[{key:"molecularProfileId",type:"molecular-profile-select",props:{required:!0,tooltip:"A single variant (Simple Molecular Profile) or a combination of variants (Complex Molecular Profile) relevant to the curated evidence.",watchVariantMolecularProfileId:!0}},{key:"sourceId",type:"source-select",props:{required:!0}},{key:"evidenceType",type:"type-select",props:{required:!0}},{key:"evidenceDirection",type:"direction-select",props:{required:!0}},{key:"significance",type:"significance-select",props:{required:!0}},{key:"diseaseId",type:"disease-select",props:{}},{key:"therapyIds",type:"therapy-multi-select",props:{}},{key:"therapyInteractionType",type:"interaction-select",props:{}},{key:"evidenceLevel",type:"level-select",props:{required:!0}},{key:"rating",type:"rating",props:{required:!0}},{key:"variantOrigin",type:"origin-select",props:{required:!0}},{key:"phenotypeIds",type:"phenotype-multi-select",props:{}},{key:"description",type:"textarea",wrappers:["form-field"],props:{tooltip:"Your original description of evidence from published literature detailing the association or lack of association between a variant and its predictive, prognostic, diagnostic, predisposing, functional or oncogenic value. ",placeholder:"Enter an Evidence Statement",extraType:"description",description:'Data constituting personal or identifying information should not be entered (e.g. <a href="https://www.hipaajournal.com/what-is-protected-health-information/" target="_blank">protected health information (PHI) as defined by HIPAA</a> in the U.S. and/or comparable laws in your jurisdiction).',label:"Evidence Statement",required:!0,colSpan:24}}]},{wrappers:["form-footer"],fieldGroup:[{key:"comment",type:"textarea",props:{label:"Comment",required:!1,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Evidence Item"}}]}]}],p.C);var _,o=t(4004),y=t(9300),E=t(3240),i=t(4650),T=t(7630),S=t(9169),P=t(6895),O=t(9116),A=t(9597),M=t(6212),q=t(6704),L=t(7830),$=t(3392),w=t(2635);const x=function(m){return["/evidence",m,"summary"]};function F(m,u){if(1&m&&(i._uU(0," View your new EID "),i.TgZ(1,"a",5),i._uU(2,"here"),i.qZA(),i._uU(3,". You will be redirected shortly. ")),2&m){const l=i.oxw();i.xp6(1),i.Q6J("routerLink",i.VKq(1,x,l.newEvidenceId))}}function b(m,u){if(1&m&&i._UZ(0,"nz-alert",8),2&m){i.oxw();const l=i.MAs(3);i.Q6J("nzMessage",l)}}function U(m,u){if(1&m&&(i.TgZ(0,"p")(1,"strong"),i._uU(2," Evidence for this Molecular Profile has already been curated from this Source. Please double check that your Evidence has not already been entered. "),i.qZA()(),i._UZ(3,"cvc-evidence-table",9)),2&m){const l=i.oxw(2);i.xp6(3),i.Q6J("molecularProfileId",l.selectedMpId)("sourceId",l.selectedSourceId)}}function R(m,u){if(1&m&&(i.ynx(0),i.YNc(1,b,1,1,"nz-alert",6),i.YNc(2,U,4,2,"ng-template",null,7,i.W1O),i._UZ(4,"br"),i.BQk()),2&m){const l=u.ngIf;i.xp6(1),i.Q6J("ngIf",l>0)}}let D=((_=class{constructor(u,l,g){this.submitEvidenceGQL=u,this.existingEvidenceGQL=l,this.networkErrorService=g,this.form=new f.nJ({}),this.fields=d,this.model={fields:{}},this.state=new v._,this.options={formState:this.state},this.submitEvidenceMutator=new n.U(g)}ngOnInit(){this.countQueryRef=this.existingEvidenceGQL.watch({molecularProfileId:0,sourceId:0}),this.existingEvidenceCount$=this.countQueryRef?.valueChanges.pipe((0,o.U)(u=>u.data?.evidenceItems?.totalCount),(0,y.h)(E.ep),(0,s.t)(this))}ngAfterViewInit(){this.state.formReady$.next(!0)}onSubmit(u){const l=(0,r.I9)(u);l&&(this.mutationState=this.submitEvidenceMutator.mutate(this.submitEvidenceGQL,{input:l},void 0,g=>{this.newEvidenceId=g.submitEvidence?.evidenceItem.id,this.newEvidenceUrl=`/evidence/${this.newEvidenceId}/summary`}))}onModelChange(u){u.fields.sourceId&&u.fields.molecularProfileId?(u.fields.sourceId!=this.selectedSourceId||u.fields.molecularProfileId!=this.selectedMpId)&&(this.selectedSourceId=u.fields.sourceId,this.selectedMpId=u.fields.molecularProfileId,this.countQueryRef?.refetch({molecularProfileId:u.fields.molecularProfileId,sourceId:u.fields.sourceId})):this.countQueryRef?.refetch({molecularProfileId:0,sourceId:0})}ngOnDestroy(){this.options.formState.onDestroy()}}).\u0275fac=function(u){return new(u||_)(i.Y36(T.WFw),i.Y36(T.vxe),i.Y36(S.Y))},_.\u0275cmp=i.Xpm({type:_,selectors:[["cvc-evidence-submit-form"]],decls:7,vars:11,consts:[["entityType","Evidence Item",3,"mutationState","redirectUrl","successMessage"],["success",""],[4,"ngIf"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[2,"width","100%",3,"form","fields","model","options","modelChange"],[3,"routerLink"],["nzType","warning",3,"nzMessage",4,"ngIf"],["duplicateEvidenceAlert",""],["nzType","warning",3,"nzMessage"],["cvcHeight","150",3,"molecularProfileId","sourceId"]],template:function(u,l){if(1&u&&(i.TgZ(0,"cvc-form-submission-status-display",0),i.YNc(1,F,4,3,"ng-template",null,1,i.W1O),i.YNc(3,R,5,1,"ng-container",2),i.ALo(4,"ngrxPush"),i.TgZ(5,"form",3),i.NdJ("ngSubmit",function(){return l.onSubmit(l.model)}),i.TgZ(6,"formly-form",4),i.NdJ("modelChange",function(C){return l.model=C,l.onModelChange(C)}),i.qZA()()()),2&u){const g=i.MAs(2);i.Q6J("mutationState",l.mutationState)("redirectUrl",l.newEvidenceUrl)("successMessage",g),i.xp6(3),i.Q6J("ngIf",i.lcZ(4,9,l.existingEvidenceCount$)),i.xp6(2),i.Q6J("formGroup",l.form),i.xp6(1),i.Q6J("form",l.form)("fields",l.fields)("model",l.model)("options",l.options)}},dependencies:[P.O5,O.rH,A.r,f._Y,f.JL,f.sg,M.T7,q.Lr,L.F,$.a,w.fM],encapsulation:2,changeDetection:0}),_);D=(0,e.gn)([(0,s.c)()],D)},3327:(I,h,t)=>{t.d(h,{C:()=>f,w:()=>e});const e={geneId:void 0,variantId:void 0,significance:void 0,description:void 0,diseaseId:void 0,therapyIds:void 0,therapyInteractionType:void 0,evidenceDirection:void 0,evidenceLevel:void 0,evidenceType:void 0,molecularProfileId:void 0,phenotypeIds:void 0,rating:void 0,sourceId:void 0,variantOrigin:void 0},f={clientMutationId:void 0,fields:e,comment:void 0,organizationId:void 0}},5451:(I,h,t)=>{t.d(h,{lG:()=>p,yQ:()=>r});var e=t(915),f=t(7630),n=t(7579),v=t(444),r=(()=>{return(a=r||(r={})).EVIDENCE="Evidence",a.ASSERTION="Assertion",r;var a})();class p{constructor(c){this.formReady$=new n.x,this.formLayout="vertical",this.validStates=new Map,this.typeOption$=new n.x,this.requiresTherapy$=new n.x,this.requiresDisease$=new n.x,this.requiresAcmgCode$=new n.x,this.requiresAmpLevel$=new n.x,this.requiresClingenCode$=new n.x,this.allowsFdaApproval$=new n.x,this.getTypeOptions=()=>this.entityName==r.ASSERTION?(0,v.o6)(f.uBv).map(d=>d):(0,v.o6)(f.kqt).map(d=>d),this.getSignificanceOptions=d=>this.validStates.get(d)?.significance||[],this.getInteractionOptions=()=>(0,v.o6)(f.wkr).map(d=>d),this.isValidSignificanceOption=(d,o)=>{const y=this.validStates.get(d);return!y||y.significance.includes(o)},this.getDirectionOptions=d=>this.validStates.get(d)?.entityDirection||[],this.isValidDirectionOption=(d,o)=>{const y=this.validStates.get(d);return!y||y.entityDirection.includes(o)},this.requiresTherapy=d=>{const o=this.validStates.get(d);return void 0===o||o.requiresTherapy},this.requiresDisease=d=>{const o=this.validStates.get(d);return void 0===o||o.requiresDisease},this.requiresAcmgCodes=d=>{const o=this.validStates.get(d);return void 0===o||o.requiresAcmgCodes},this.requiresAmpLevel=d=>{const o=this.validStates.get(d);return void 0===o||o.requiresAmpLevel},this.requiresClingenCodes=d=>{const o=this.validStates.get(d);return void 0===o||o.requiresClingenCodes},this.allowsFdaApproval=d=>{const o=this.validStates.get(d);return void 0===o||o.allowsFdaApproval},this.getOptionsFromEnums=d=>0===d.length?[]:d.map(o=>({value:o,label:(0,e.E)(o)})),this.fields={},this.options={},this.enums={},this.requires={},this.entityName=c,this.pluralNames=new Map,this.pluralNames.set(r.ASSERTION,"Assertions"),this.pluralNames.set(r.EVIDENCE,"Evidence")}onDestroy(){}}},9637:(I,h,t)=>{t.d(h,{_:()=>s});var e=t(7630),f=t(9933),n=t(1135),v=t(3327),r=t(5451);class s extends r.lG{constructor(){super(r.yQ.EVIDENCE);const a=v.w;this.fields={molecularProfileId$:new n.X(a.molecularProfileId),variantId$:new n.X(a.variantId),variantMolecularProfile$:new n.X(void 0),geneId$:new n.X(a.geneId),evidenceType$:new n.X(a.evidenceType),evidenceLevel$:new n.X(a.evidenceLevel),evidenceDirection$:new n.X(a.evidenceDirection),significance$:new n.X(a.significance),variantOrigin$:new n.X(a.variantOrigin),diseaseId$:new n.X(a.diseaseId),therapyIds$:new n.X(a.therapyIds),therapyInteractionType$:new n.X(a.therapyInteractionType),rating$:new n.X(a.rating),phenotypeIds$:new n.X(a.phenotypeIds),sourceId$:new n.X(a.sourceId)},this.enums={entityType$:new n.X(this.getTypeOptions()),significance$:new n.X([]),direction$:new n.X([]),interaction$:new n.X(this.getInteractionOptions())},this.requires={requiresDisease$:new n.X(!1),requiresTherapy$:new n.X(!1),requiresTherapyInteractionType$:new n.X(!1),requiresClingenCodes$:new n.X(!1),requiresAcmgCodes$:new n.X(!1),requiresAmpLevel$:new n.X(!1),allowsFdaApproval$:new n.X(!1)},this.fields.evidenceType$.pipe((0,f.t)(this,"onDestroy")).subscribe(c=>{if(!c)return Object.entries(this.requires).forEach(([d,o])=>{o.next(!1)}),this.enums.significance$.next([]),void this.enums.direction$.next([]);this.enums.significance$.next(this.getSignificanceOptions(c)),this.enums.direction$.next(this.getDirectionOptions(c)),this.requires.requiresDisease$.next(this.requiresDisease(c)),this.requires.requiresTherapy$.next(this.requiresTherapy(c)),this.requires.requiresTherapyInteractionType$.next(this.requiresTherapy(c)),this.requires.requiresClingenCodes$.next(this.requiresClingenCodes(c)),this.requires.requiresAcmgCodes$.next(this.requiresAcmgCodes(c)),this.requires.allowsFdaApproval$.next(this.allowsFdaApproval(c))}),this.fields.therapyIds$.pipe((0,f.t)(this,"onDestroy")).subscribe(c=>{this.requires.requiresTherapyInteractionType$.next(!!c&&c.length>1)}),this.validStates.set(e.kqt.Predictive,{entityType:e.kqt.Predictive,significance:[e.y1h.Sensitivityresponse,e.y1h.Resistance,e.y1h.AdverseResponse,e.y1h.ReducedSensitivity,e.y1h.Na],entityDirection:[e.tI1.Supports,e.tI1.DoesNotSupport],requiresDisease:!0,requiresTherapy:!0,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(e.kqt.Diagnostic,{entityType:e.kqt.Diagnostic,significance:[e.y1h.Positive,e.y1h.Negative],entityDirection:[e.tI1.Supports,e.tI1.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(e.kqt.Prognostic,{entityType:e.kqt.Prognostic,significance:[e.y1h.BetterOutcome,e.y1h.PoorOutcome,e.y1h.Na],entityDirection:[e.tI1.Supports,e.tI1.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(e.kqt.Oncogenic,{entityType:e.kqt.Oncogenic,significance:[e.y1h.Oncogenicity,e.y1h.Protectiveness],entityDirection:[e.tI1.Supports,e.tI1.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(e.kqt.Predisposing,{entityType:e.kqt.Predisposing,significance:[e.y1h.Predisposition,e.y1h.Protectiveness],entityDirection:[e.tI1.Supports,e.tI1.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(e.kqt.Functional,{entityType:e.kqt.Functional,significance:[e.y1h.GainOfFunction,e.y1h.LossOfFunction,e.y1h.UnalteredFunction,e.y1h.Neomorphic,e.y1h.DominantNegative,e.y1h.Unknown],entityDirection:[e.tI1.Supports,e.tI1.DoesNotSupport],requiresDisease:!1,requiresTherapy:!1,requiresAcmgCodes:!1,requiresClingenCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1})}}},3612:(I,h,t)=>{function e(f,n){const v=(s,p)=>{let a;for(let c of s)if(c.fieldGroup)a=v(c.fieldGroup,p);else if(c.key===p){a=c;break}return a},r=(s,p)=>{for(let a of Object.keys(p))if(p[a]instanceof Object&&!Array.isArray(p[a]))r(s,p[a]);else{const c=v(s,a);c&&(c.defaultValue=p[a])}return s};return r(f,n)}t.d(h,{Z:()=>e})},7404:(I,h,t)=>{t.d(h,{Ct:()=>n,I9:()=>v,ux:()=>f});var e=t(9289);function f(r){return{significance:r.significance,description:r.description,diseaseId:r.disease?.id,therapyIds:r.therapies.map(s=>s.id),therapyInteractionType:r.therapyInteractionType,evidenceDirection:r.evidenceDirection,evidenceLevel:r.evidenceLevel,evidenceType:r.evidenceType,molecularProfileId:r.molecularProfile.id,phenotypeIds:r.phenotypes.map(s=>s.id),rating:r.evidenceRating,sourceId:r.source.id,variantOrigin:r.variantOrigin}}function n(r,s){let p=v(s);if(p)return{id:r,comment:p.comment,organizationId:p.organizationId,fields:p.fields}}function v(r){const s=r.fields;if(![s.molecularProfileId,s.variantOrigin,s.sourceId,s.evidenceType,s.significance,s.evidenceLevel,s.evidenceDirection,s.rating].find(a=>void 0===a))return{fields:{molecularProfileId:s.molecularProfileId,variantOrigin:s.variantOrigin,sourceId:s.sourceId,evidenceType:s.evidenceType,significance:s.significance,evidenceLevel:s.evidenceLevel,evidenceDirection:s.evidenceDirection,rating:s.rating,description:e.xt(s.description),diseaseId:e.uP(s.diseaseId),phenotypeIds:s.phenotypeIds?s.phenotypeIds:[],therapyIds:s.therapyIds?s.therapyIds:[],therapyInteractionType:e.uP(s.therapyInteractionType)},organizationId:r.organizationId,comment:r.comment}}}}]);