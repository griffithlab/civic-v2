"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[262],{9365:(Z,U,e)=>{e.d(U,{T:()=>D});var n=e(54438),y=e(60177),h=e(25703),t=e(12617),o=e(41951),B=e(50513),A=e(16389),P=e(25930);const N=["itemTemplate"],S=u=>({$implicit:u});function G(u,I){if(1&u){const z=n.RV6();n.j41(0,"nz-list-item",5),n.bIt("click",function(){n.eBV(z);const T=n.XpG().$implicit,b=n.XpG(2);return n.Njj(b.onParticipantSelected(T))}),n.eu8(1,6),n.k0s()}if(2&u){const z=n.XpG().$implicit,v=n.XpG(2);n.AVh("selected-participant",z.id==(null==v.selectedItem?null:v.selectedItem.id)),n.R7$(),n.Y8G("ngTemplateOutlet",v.itemTemplateRef||null)("ngTemplateOutletContext",n.eq3(4,S,z))}}function $(u,I){if(1&u&&(n.qex(0),n.DNE(1,G,2,6,"nz-list-item",4),n.bVm()),2&u){const z=I.index,v=n.XpG(2);n.R7$(),n.Y8G("ngIf",z+1<=v.defaultListSize)}}function j(u,I){if(1&u){const z=n.RV6();n.j41(0,"button",7),n.bIt("click",function(){n.eBV(z);const T=n.XpG(2);return n.Njj(T.onExpandClicked())}),n.nrm(1,"i",8),n.EFF(2," Expand "),n.k0s()}}function F(u,I){if(1&u){const z=n.RV6();n.j41(0,"button",7),n.bIt("click",function(){n.eBV(z);const T=n.XpG(2);return n.Njj(T.onCollapseClicked())}),n.nrm(1,"i",9),n.EFF(2," Collapse "),n.k0s()}}function k(u,I){if(1&u&&(n.qex(0),n.j41(1,"nz-card",1)(2,"nz-list"),n.DNE(3,$,2,1,"ng-container",2),n.k0s(),n.DNE(4,j,3,0,"button",3)(5,F,3,0,"button",3),n.k0s(),n.bVm()),2&u){const z=n.XpG();n.R7$(),n.Y8G("nzTitle",z.listTitle),n.R7$(2),n.Y8G("ngForOf",z.participantList),n.R7$(),n.Y8G("ngIf",z.participantList.length>z.defaultListSize),n.R7$(),n.Y8G("ngIf",z.isExpanded)}}let D=(()=>{class u{constructor(){this.defaultListSize=5,this.participantSelectedEvent=new n.bkB,this.isExpanded=!1}ngOnInit(){this.preselectedOption&&(this.selectedItem=this.preselectedOption)}onParticipantSelected(z){this.selectedItem=z.id==this.selectedItem?.id?void 0:z,this.participantSelectedEvent.emit(this.selectedItem)}onExpandClicked(){this.originalDefaultListSize=this.defaultListSize,this.defaultListSize=this.participantList.length,this.isExpanded=!0}onCollapseClicked(){this.originalDefaultListSize&&(this.defaultListSize=this.originalDefaultListSize,this.isExpanded=!1)}static{this.\u0275fac=function(v){return new(v||u)}}static{this.\u0275cmp=n.VBU({type:u,selectors:[["cvc-participant-list"]],contentQueries:function(v,T,b){if(1&v&&n.wni(b,N,5),2&v){let W;n.mGM(W=n.lsd())&&(T.itemTemplateRef=W.first)}},inputs:{participantList:"participantList",listTitle:"listTitle",defaultListSize:"defaultListSize",preselectedOption:"preselectedOption"},outputs:{participantSelectedEvent:"participantSelectedEvent"},standalone:!1,decls:1,vars:1,consts:[[4,"ngIf"],["nz-type","inner",2,"margin-bottom","1em",3,"nzTitle"],[4,"ngFor","ngForOf"],["nz-button","","nzType","default","nzSize","small",3,"click",4,"ngIf"],["nzSize","small","class","participant-list-item",3,"selected-participant","click",4,"ngIf"],["nzSize","small",1,"participant-list-item",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-button","","nzType","default","nzSize","small",3,"click"],["nz-icon","","nzType","vertical-align-bottom"],["nz-icon","","nzType","vertical-align-top"]],template:function(v,T){1&v&&n.DNE(0,k,6,4,"ng-container",0),2&v&&n.Y8G("ngIf",T.participantList&&T.participantList.length>0)},dependencies:[y.Sq,y.bT,y.T3,h.cK,t.eE,t.lQ,o.Dn,B.aO,A.c,P.p],styles:[".participant-list-item[_ngcontent-%COMP%]:hover{border:1px solid #40a9ff;cursor:pointer}.participant-list-item[_ngcontent-%COMP%]{padding:2px;margin:2px}.selected-participant[_ngcontent-%COMP%]{background:#40a9ff;color:#fff}"]})}}return u})()},14873:(Z,U,e)=>{e.d(U,{A:()=>R});var n=e(60177),y=e(97529),h=e(25703),t=e(12617),o=e(29438),B=e(97685),A=e(61912),P=e(72968),N=e(86864),S=e(77169),G=e(64917),$=e(7391),j=e(41951),F=e(35154),k=e(72874),D=e(54438);let u=(()=>{class M{static{this.\u0275fac=function(K){return new(K||M)}}static{this.\u0275mod=D.$C({type:M})}static{this.\u0275inj=D.G2t({imports:[n.MD,N.sC,o.Yb,$.kT,j.Y3,F.Qt,k.g9,S.W,G.i]})}}return M})();var I=e(89417),z=e(8524),v=e(38927),T=e(34308),b=e(23842),W=e(68492),Y=e(25128),s=e(23617),f=e(50513),_=e(3069),r=e(82983),m=e(9541);let g=(()=>{class M{static{this.\u0275fac=function(K){return new(K||M)}}static{this.\u0275mod=D.$C({type:M})}static{this.\u0275inj=D.G2t({imports:[n.MD,I.X1,f.Zw,h.Ti,m.hM,v.PQ,r.V,_.$f,s.$,F.Qt,I.YN,z.qy,W.M,b.k,S.W,Y.K,T.I]})}}return M})(),R=(()=>{class M{static{this.\u0275fac=function(K){return new(K||M)}}static{this.\u0275mod=D.$C({type:M})}static{this.\u0275inj=D.G2t({imports:[n.MD,f.Zw,y.f3,h.Ti,t.rD,j.Y3,G.i,o.Yb,B.pc,A.i3,g,P.K,u]})}}return M})()},20664:(Z,U,e)=>{e.d(U,{D:()=>Mt});var n=e(69145),y=e(96354),h=e(24608),t=e(54438),o=e(60177),B=e(50513),A=e(16389),P=e(97529),N=e(25703),S=e(12617),G=e(41951),$=e(29438),j=e(97685),F=e(31635),k=e(71226),D=e(49894),u=e(41305),I=e(74222),z=e(89417),v=e(25930),T=e(38927),b=e(82983),W=e(23617),Y=e(35154),s=e(19449),f=e(41939),_=e(65566);function r(a,d){if(1&a){const i=t.RV6();t.j41(0,"nz-alert",6),t.bIt("nzOnClose",function(){t.eBV(i);const p=t.XpG();return t.Njj(p.onSuccessBannerClose())}),t.k0s()}}function m(a,d){if(1&a&&(t.j41(0,"nz-form-item"),t.nrm(1,"cvc-form-errors-alert",7),t.k0s()),2&a){const i=t.XpG();t.R7$(),t.Y8G("errors",i.errorMessages)}}let g=class et{constructor(d,i,c){this.viewerService=d,this.addCommentGql=i,this.networkErrorService=c,this.commentAddedEvent=new t.bkB,this.success=!1,this.errorMessages=[],this.loading=!1,this.viewerService.viewer$.pipe((0,D.s)(this)).subscribe(p=>{this.mostRecentOrg=p.mostRecentOrg}),this.addCommentMutator=new k.E(this.networkErrorService)}submitComment(){if(this.commentText){this.errorMessages=[];let i=this.addCommentMutator.mutate(this.addCommentGql,{input:{body:this.commentText,subject:this.subject,organizationId:void 0===this.mostRecentOrg?void 0:this.mostRecentOrg.id}});i.submitSuccess$.pipe((0,D.s)(this)).subscribe(c=>{c&&(this.resetForm(),this.success=!0)}),i.submitError$.pipe((0,D.s)(this)).subscribe(c=>{c&&(this.errorMessages=c,this.success=!1)}),i.isSubmitting$.pipe((0,D.s)(this)).subscribe(c=>{this.loading=c})}}resetForm(){this.commentText="",this.commentAddedEvent.emit()}onSuccessBannerClose(){this.resetForm()}static{this.\u0275fac=function(i){return new(i||et)(t.rXU(u.q),t.rXU(n.hj),t.rXU(I.N))}}static{this.\u0275cmp=t.VBU({type:et,selectors:[["cvc-comment-add-form"]],inputs:{subject:"subject"},outputs:{commentAddedEvent:"commentAddedEvent"},standalone:!1,decls:11,vars:7,consts:[["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[4,"ngIf"],[3,"commentChange","comment"],["nzTip","Submitting",3,"nzSpinning"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small","nz-tooltip","",3,"disabled","nzTooltipTrigger","nzTooltipTitle"],["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose"],[3,"errors"]],template:function(i,c){1&i&&(t.j41(0,"nz-card"),t.DNE(1,r,1,0,"nz-alert",0),t.j41(2,"form",1),t.bIt("ngSubmit",function(){return c.submitComment()}),t.DNE(3,m,2,1,"nz-form-item",2),t.j41(4,"cvc-comment-input-form",3),t.mxI("commentChange",function(x){return t.DH7(c.commentText,x)||(c.commentText=x),x}),t.k0s(),t.j41(5,"nz-spin",4)(6,"nz-form-item")(7,"nz-form-control")(8,"cvc-form-buttons")(9,"button",5),t.EFF(10," Add Comment "),t.k0s()()()()()()()),2&i&&(t.R7$(),t.Y8G("ngIf",c.success),t.R7$(2),t.Y8G("ngIf",c.errorMessages.length>0),t.R7$(),t.R50("comment",c.commentText),t.R7$(),t.Y8G("nzSpinning",c.loading),t.R7$(4),t.Y8G("disabled",c.loading||!(void 0!==c.commentText&&c.commentText.length>=10))("nzTooltipTrigger",c.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==c.mostRecentOrg?null:c.mostRecentOrg.name)))},dependencies:[o.bT,z.qT,z.cb,B.aO,A.c,v.p,N.cK,P.Uq,P.e,T.CA,T.Ls,T.zS,b.a,W.Y,Y.LH,z.cV,s.j,f.l,_.K],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2})}};g=(0,F.Cg)([(0,D.d)()],g);var R=e(9365),M=e(86864),nt=e(7391),H=e(72874),K=e(61774),C=e(4126),V=e(8139);function l(a,d){if(1&a&&t.nrm(0,"nz-avatar",5),2&a){const i=t.XpG().ngrxLet;t.Y8G("nzSrc",i.commenter.profileImagePath)}}function O(a,d){1&a&&t.nrm(0,"nz-avatar",6)}function E(a,d){if(1&a){const i=t.RV6();t.j41(0,"nz-comment-action")(1,"span",7),t.bIt("nzOnConfirm",function(){t.eBV(i);const p=t.XpG().ngrxLet,x=t.XpG(),it=t.r8f(0);return t.Njj(x.deleteComment(p.id,null==it.mostRecentOrg?null:it.mostRecentOrg.id))}),t.k0s()()}}function X(a,d){1&a&&(t.j41(0,"span",4)(1,"i"),t.EFF(2," This comment has been deleted. "),t.k0s()())}function w(a,d){1&a&&(t.j41(0,"span",4)(1,"i"),t.EFF(2,"No Comment Provided"),t.k0s()())}function q(a,d){if(1&a&&t.nrm(0,"cvc-comment-body",8),2&a){const i=t.XpG(2).ngrxLet;t.Y8G("commentBodySegments",i.parsedComment)}}function Q(a,d){if(1&a&&t.DNE(0,w,3,0,"span",4)(1,q,1,1,"cvc-comment-body",8),2&a){const i=t.XpG().ngrxLet;t.vxM(0==i.parsedComment.length?0:1)}}function L(a,d){if(1&a&&(t.j41(0,"nz-comment",2),t.nI1(1,"timeAgo"),t.DNE(2,l,1,1,"nz-avatar",3)(3,O,1,0,"ng-template",null,0,t.C5r)(5,E,2,0,"nz-comment-action"),t.j41(6,"nz-comment-content"),t.DNE(7,X,3,0,"span",4)(8,Q,2,1),t.k0s()()),2&a){const i=d.ngrxLet,c=t.sdS(4);t.XpG();const p=t.r8f(0);t.Y8G("nzAuthor",i.commenter.displayName)("nzDatetime",t.bMT(1,6,i.createdAt)),t.R7$(2),t.Y8G("ngIf",i.commenter.profileImagePath)("ngIfElse",c),t.R7$(3),t.vxM(p&&p.signedIn&&(null==p.user?null:p.user.id)==i.commenter.id&&i.id&&!i.deleted?5:-1),t.R7$(2),t.vxM(i.deleted?7:8)}}let J=(()=>{class a{constructor(i,c,p){this.viewerService=i,this.networkErrorService=c,this.deleteCommentGql=p,this.comment=t.hFB.required(),this.viewer$=this.viewerService.viewer$}ngOnInit(){if(void 0===this.comment)throw new Error("Must pass a comment into comment display component.")}deleteComment(i,c){new k.E(this.networkErrorService).mutate(this.deleteCommentGql,{input:{commentId:i,organizationId:c}})}static{this.\u0275fac=function(c){return new(c||a)(t.rXU(u.q),t.rXU(I.N),t.rXU(n.hGs))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["cvc-comment-display"]],inputs:{comment:[1,"comment"]},standalone:!1,decls:3,vars:4,consts:[["noAvatar",""],[3,"nzAuthor","nzDatetime",4,"ngrxLet"],[3,"nzAuthor","nzDatetime"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["nz-typography","","nzType","secondary"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","","nzIcon","civic:curator"],["nz-tooltip","","nz-popconfirm","","nzPopconfirmPlacement","right","nzPopconfirmTitle","Delete This Comment?","nzTooltipTitle","Delete","nz-icon","","nzType","delete",3,"nzOnConfirm"],[3,"commentBodySegments"]],template:function(c,p){1&c&&(t.SS7(0),t.nI1(1,"ngrxPush"),t.DNE(2,L,9,8,"nz-comment",1)),2&c&&(t.bH3(t.bMT(1,1,p.viewer$)),t.R7$(2),t.Y8G("ngrxLet",p.comment()))},dependencies:[o.bT,M.fL,M.sf,M.OW,M.fS,$.PM,nt.Di,G.Dn,Y.LH,H.PV,K.Nj,C.p,K.L9,V.N],encapsulation:2})}}return a})();var at=e(14493);const tt=()=>[];function ct(a,d){if(1&a&&(t.j41(0,"nz-card",10),t.nrm(1,"cvc-comment-display",11),t.k0s()),2&a){const i=t.XpG(2);t.R7$(),t.Y8G("comment",i.creationComment)}}function rt(a,d){1&a&&(t.qex(0),t.j41(1,"nz-row",6)(2,"nz-col",7)(3,"nz-space",8),t.DNE(4,ct,2,1,"nz-card",9),t.k0s()()(),t.bVm()),2&a&&(t.R7$(),t.Y8G("nzGutter",16))}function st(a,d){if(1&a){const i=t.RV6();t.j41(0,"div",24)(1,"button",25),t.bIt("click",function(){t.eBV(i);const p=t.XpG().ngIf,x=t.XpG(3);return t.Njj(x.onLoadMore(p.startCursor))}),t.EFF(2," Load older comments "),t.k0s()()}}function mt(a,d){if(1&a&&(t.j41(0,"nz-list-header"),t.DNE(1,st,3,0,"div",23),t.k0s()),2&a){const i=d.ngIf;t.R7$(),t.Y8G("ngIf",i.hasPreviousPage)}}function lt(a,d){if(1&a&&(t.j41(0,"nz-list-item"),t.nrm(1,"cvc-comment-display",11),t.k0s()),2&a){const i=d.$implicit;t.R7$(),t.Y8G("comment",i)}}function pt(a,d){if(1&a&&(t.j41(0,"nz-card",21)(1,"nz-list",22),t.nI1(2,"ngrxPush"),t.nI1(3,"ngrxPush"),t.DNE(4,mt,2,1,"nz-list-header",4),t.nI1(5,"ngrxPush"),t.DNE(6,lt,2,1,"ng-template",null,1,t.C5r),t.k0s()()),2&a){const i=t.sdS(7),c=t.XpG(2);t.R7$(),t.Y8G("nzDataSource",t.bMT(2,4,c.comments$))("nzLoading",t.bMT(3,6,c.loading$))("nzRenderItem",i),t.R7$(3),t.Y8G("ngIf",t.bMT(5,8,c.pageInfo$))}}function _t(a,d){if(1&a){const i=t.RV6();t.j41(0,"cvc-comment-add-form",26),t.bIt("commentAddedEvent",function(){t.eBV(i);const p=t.XpG(2);return t.Njj(p.refreshList())}),t.k0s()}if(2&a){const i=t.XpG(2);t.Y8G("subject",i.commentable)}}function dt(a,d){if(1&a&&t.nrm(0,"nz-avatar",29),2&a){const i=t.XpG().$implicit;t.Y8G("nzSrc",i.profileImagePath)}}function Ct(a,d){if(1&a&&(t.nrm(0,"nz-avatar",30),t.nI1(1,"uppercase")),2&a){const i=t.XpG().$implicit;t.Y8G("nzText",t.bMT(1,1,i.displayName.charAt(0)))}}function zt(a,d){if(1&a&&(t.DNE(0,dt,1,1,"nz-avatar",28)(1,Ct,2,3,"ng-template",null,3,t.C5r),t.j41(3,"span"),t.EFF(4),t.k0s()),2&a){const i=d.$implicit,c=t.sdS(2);t.Y8G("ngIf",i.profileImagePath)("ngIfElse",c),t.R7$(4),t.JRh(i.displayName)}}function ut(a,d){if(1&a){const i=t.RV6();t.j41(0,"cvc-participant-list",27),t.nI1(1,"ngrxPush"),t.bIt("participantSelectedEvent",function(p){t.eBV(i);const x=t.XpG(2);return t.Njj(x.onCommenterSelected(p))}),t.DNE(2,zt,5,3,"ng-template",null,2,t.C5r),t.k0s()}if(2&a){const i=t.XpG(2);t.Y8G("participantList",t.bMT(1,1,i.commenters$)||t.lJ4(3,tt))}}function ft(a,d){if(1&a&&t.nrm(0,"nz-avatar",29),2&a){const i=t.XpG().$implicit;t.Y8G("nzSrc",i.profileImagePath)}}function gt(a,d){if(1&a&&(t.nrm(0,"nz-avatar",30),t.nI1(1,"uppercase")),2&a){const i=t.XpG().$implicit;t.Y8G("nzText",t.bMT(1,1,i.displayName.charAt(0)))}}function vt(a,d){if(1&a&&(t.DNE(0,ft,1,1,"nz-avatar",28)(1,gt,2,3,"ng-template",null,3,t.C5r),t.j41(3,"span"),t.EFF(4),t.k0s()),2&a){const i=d.$implicit,c=t.sdS(2);t.Y8G("ngIf",i.profileImagePath)("ngIfElse",c),t.R7$(4),t.JRh(i.displayName)}}function ht(a,d){if(1&a){const i=t.RV6();t.j41(0,"cvc-participant-list",31),t.nI1(1,"ngrxPush"),t.bIt("participantSelectedEvent",function(p){t.eBV(i);const x=t.XpG(2);return t.Njj(x.onMentionedUserSelected(p))}),t.DNE(2,vt,5,3,"ng-template",null,2,t.C5r),t.k0s()}if(2&a){const i=t.XpG(2);t.Y8G("participantList",t.bMT(1,1,i.mentionedUsers$)||t.lJ4(3,tt))}}function Tt(a,d){if(1&a&&(t.nrm(0,"nz-avatar",33),t.j41(1,"span"),t.EFF(2),t.k0s()),2&a){const i=d.$implicit;t.Mz_("nzIcon","civic-",i.tag.displayName,""),t.R7$(2),t.SpI("",i.tag.displayName,"s")}}function Et(a,d){if(1&a){const i=t.RV6();t.j41(0,"cvc-participant-list",32),t.nI1(1,"ngrxPush"),t.bIt("participantSelectedEvent",function(p){t.eBV(i);const x=t.XpG(2);return t.Njj(x.onMentionedRoleSelected(p))}),t.DNE(2,Tt,3,3,"ng-template",null,2,t.C5r),t.k0s()}if(2&a){const i=t.XpG(2);t.Y8G("participantList",t.bMT(1,1,i.mentionedRoles$)||t.lJ4(3,tt))}}function yt(a,d){if(1&a&&(t.nrm(0,"i",35),t.nI1(1,"iconNameForSubscribableEntity"),t.j41(2,"span"),t.EFF(3),t.k0s()),2&a){const i=d.$implicit;t.Y8G("nzType",t.bMT(1,2,i.tag.tagType)),t.R7$(3),t.JRh(i.tag.displayName)}}function Ot(a,d){if(1&a){const i=t.RV6();t.j41(0,"cvc-participant-list",34),t.nI1(1,"ngrxPush"),t.bIt("participantSelectedEvent",function(p){t.eBV(i);const x=t.XpG(2);return t.Njj(x.onMentionedEntitySelected(p))}),t.DNE(2,yt,4,4,"ng-template",null,2,t.C5r),t.k0s()}if(2&a){const i=t.XpG(2);t.Y8G("participantList",t.bMT(1,1,i.mentionedEntities$)||t.lJ4(3,tt))}}function Dt(a,d){1&a&&(t.qex(0),t.j41(1,"nz-row",6)(2,"nz-col",12)(3,"nz-space",8),t.DNE(4,pt,8,10,"nz-card",13)(5,_t,1,1,"cvc-comment-add-form",14),t.k0s()(),t.j41(6,"nz-col",15)(7,"nz-space",16),t.DNE(8,ut,4,4,"cvc-participant-list",17)(9,ht,4,4,"cvc-participant-list",18)(10,Et,4,4,"cvc-participant-list",19)(11,Ot,4,4,"cvc-participant-list",20),t.k0s()()(),t.bVm()),2&a&&(t.R7$(),t.Y8G("nzGutter",16))}function Pt(a,d){if(1&a){const i=t.RV6();t.j41(0,"cvc-comment-add-form",26),t.bIt("commentAddedEvent",function(){t.eBV(i);const p=t.XpG();return t.Njj(p.refreshList())}),t.k0s()}if(2&a){const i=t.XpG();t.Y8G("subject",i.commentable)}}let Mt=(()=>{class a{constructor(i){this.gql=i,this.pageSize=5}ngOnInit(){this.queryRef$=this.gql.watch({subject:this.commentable,last:this.pageSize,sortBy:{column:n.G_G.Created,direction:n.UEL.Asc}});let i=this.queryRef$.valueChanges;this.pageInfo$=i.pipe((0,y.T)(({data:c})=>c.comments.pageInfo)),this.loading$=i.pipe((0,y.T)(({loading:c})=>c)),this.comments$=i.pipe((0,y.T)(({data:c})=>c.comments.edges.map(p=>p.node))),this.commenters$=i.pipe((0,y.T)(({data:c})=>c.comments.uniqueCommenters)),this.mentionedUsers$=i.pipe((0,y.T)(({data:c})=>c.comments.mentionedUsers)),this.mentionedRoles$=i.pipe((0,y.T)(({data:c})=>c.comments.mentionedRoles.map(p=>({id:`${p.entityId}-${p.tagType}`,tag:p})))),this.mentionedEntities$=i.pipe((0,y.T)(({data:c})=>c.comments.mentionedEntities.map(p=>({id:`${p.entityId}-${p.tagType}`,tag:p})))),this.unfilteredCount$=i.pipe((0,h.E)("data","comments","unfilteredCountForSubject"))}onLoadMore(i){this.queryRef$.fetchMore({variables:{last:this.pageSize,before:i}})}onCommenterSelected(i){this.queryRef$.refetch({originatingUserId:i?.id})}onMentionedUserSelected(i){this.queryRef$.refetch({mentionedUserId:i?.id})}onMentionedRoleSelected(i){if(i){let c=n.gG1[i.tag.displayName[0].toUpperCase()+i.tag.displayName.slice(1)];this.queryRef$.refetch({mentionedRole:c})}else this.queryRef$.refetch({mentionedRole:void 0})}onMentionedEntitySelected(i){this.queryRef$.refetch(i?{mentionedEntity:{entityType:i.tag.tagType,id:i.tag.entityId}}:{mentionedEntity:void 0})}refreshList(){this.queryRef$.refetch()}static{this.\u0275fac=function(c){return new(c||a)(t.rXU(n.y5X))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["cvc-comment-list"]],inputs:{commentable:"commentable",creationComment:"creationComment"},standalone:!1,decls:5,vars:5,consts:[["noComments",""],["comment",""],["itemTemplate",""],["noAvatar",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"nzGutter"],["nzSpan","24"],["nzDirection","vertical",2,"width","100%"],["nzTitle","Submission Comment",4,"nzSpaceItem"],["nzTitle","Submission Comment"],[3,"comment"],["nzSpan","18"],["nzTitle","Comments",4,"nzSpaceItem"],["id","addComment",3,"subject","commentAddedEvent",4,"nzSpaceItem"],["nzSpan","6"],["nzDirection","vertical"],["listTitle","Commenters",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Mentioned Users",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Mentioned Roles",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Mentioned Entities",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["nzTitle","Comments"],["nzSize","small","nzItemLayout","horizontal",3,"nzDataSource","nzLoading","nzRenderItem"],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","link","nzSize","small","nzBlock","",3,"click"],["id","addComment",3,"commentAddedEvent","subject"],["listTitle","Commenters",3,"participantSelectedEvent","participantList"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["listTitle","Mentioned Users",3,"participantSelectedEvent","participantList"],["listTitle","Mentioned Roles",3,"participantSelectedEvent","participantList"],[3,"nzIcon"],["listTitle","Mentioned Entities",3,"participantSelectedEvent","participantList"],["nz-icon","",3,"nzType"]],template:function(c,p){if(1&c&&(t.DNE(0,rt,5,1,"ng-container",4)(1,Dt,12,1,"ng-container",5),t.nI1(2,"ngrxPush"),t.DNE(3,Pt,1,1,"ng-template",null,0,t.C5r)),2&c){const x=t.sdS(4);t.Y8G("ngIf",p.creationComment),t.R7$(),t.Y8G("ngIf",t.bMT(2,3,p.unfilteredCount$))("ngIfElse",x)}},dependencies:[o.bT,B.aO,A.c,P.Uq,P.e,N.cK,S.eE,S.Xo,S.lQ,G.Dn,$.PM,j.U5,j.Dq,g,R.T,J,o.Pc,K.L9,at.g],styles:["[_nghost-%COMP%]{display:block}nz-list-header[_ngcontent-%COMP%]{padding:0;margin:0}nz-list-header[_ngcontent-%COMP%]   [nz-list-load-more][_ngcontent-%COMP%]{margin-top:-.5em;padding-bottom:.5em}"]})}}return a})()},65566:(Z,U,e)=>{e.d(U,{K:()=>s});var n=e(54438),y=e(21413),h=e(69145),t=e(5964),o=e(56977),B=e(96354),A=e(99172),P=e(24608),N=e(69199),S=e(41305),G=e(60177),$=e(89417),j=e(61774),F=e(9541),k=e(82983),D=e(3069),u=e(21011),I=e(4126);const z=()=>["#","@","$"],v=()=>({minRows:4,maxRows:100});function T(f,_){if(1&f&&(n.qex(0),n.j41(1,"span"),n.EFF(2),n.k0s(),n.bVm()),2&f){const r=_.$implicit;n.R7$(2),n.JRh(r.displayName)}}function b(f,_){1&f&&(n.qex(0),n.nrm(1,"nz-spin",8),n.bVm())}function W(f,_){if(1&f&&(n.qex(0),n.nrm(1,"cvc-comment-body",9),n.bVm()),2&f){const r=_.ngIf;n.R7$(),n.Y8G("commentBodySegments",r)}}function Y(f,_){if(1&f){const r=n.RV6();n.qex(0),n.j41(1,"nz-tabset",1)(2,"nz-tab",2)(3,"nz-mention",3),n.bIt("nzOnSearchChange",function(g){n.eBV(r);const R=n.XpG();return n.Njj(R.onSearchChange(g))})("nzOnSelect",function(){n.eBV(r);const g=n.XpG();return n.Njj(g.suggestions=[])}),n.j41(4,"textarea",4),n.mxI("ngModelChange",function(g){n.eBV(r);const R=n.XpG();return n.DH7(R.commentText,g)||(R.commentText=g),n.Njj(g)}),n.bIt("ngModelChange",function(g){n.eBV(r);const R=n.XpG();return n.Njj(R.onCommentChanged(g))}),n.k0s(),n.DNE(5,T,3,1,"ng-container",5),n.k0s()(),n.j41(6,"nz-tab",6),n.bIt("nzClick",function(){n.eBV(r);const g=n.XpG();return n.Njj(g.onPreviewButtonClicked())}),n.DNE(7,b,2,0,"ng-container",7),n.nI1(8,"ngrxPush"),n.DNE(9,W,2,1,"ng-container",7),n.nI1(10,"ngrxPush"),n.k0s()(),n.bVm()}if(2&f){const r=_.ngrxLet,m=n.XpG();n.R7$(),n.Y8G("nzAnimated",!1),n.R7$(2),n.Y8G("nzSuggestions",m.suggestions)("nzPrefix",n.lJ4(14,z))("nzValueWith",m.autoCompleteValueFor),n.R7$(),n.Y8G("placeholder",r&&r.canCurate?"Enter comment (minimum length 10. Use @ to mention users; # to link entities)":"Please sign in")("nzAutosize",n.lJ4(15,v)),n.R50("ngModel",m.commentText),n.BMQ("disabled",!r||!r.canCurate||null),n.R7$(3),n.Y8G("ngIf",n.bMT(8,10,m.previewLoading$)),n.R7$(2),n.Y8G("ngIf",n.bMT(10,12,m.previewComment$))}}let s=(()=>{class f{constructor(r,m,g,R){this.previewCommentGql=r,this.userTypeaheadGql=m,this.entityTypeaheadGql=g,this.viewerService=R,this.commentChange=new n.bkB,this.destroy$=new y.B,this.suggestions=[],this.roleSuggestions=[{displayName:"admins",value:"admins"},{displayName:"editors",value:"editors"}]}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.commentText=this.comment,this.userTypeaheadQueryRef$=this.userTypeaheadGql.watch({queryTerm:""}),this.userTypeaheadQueryRef$.valueChanges.pipe((0,P.E)("data","userTypeahead"),(0,t.p)(N.kP),(0,o.Q)(this.destroy$)).subscribe(r=>this.suggestions=r.map(m=>({displayName:m.username,value:m.username}))),this.entityTypeaheadQueryRef$=this.entityTypeaheadGql.watch({queryTerm:""}),this.entityTypeaheadQueryRef$.valueChanges.pipe((0,P.E)("data","entityTypeahead"),(0,t.p)(N.kP),(0,o.Q)(this.destroy$)).subscribe(r=>this.suggestions=r.map(m=>({displayName:m.displayName,value:this.tagForEntityTypeAndId(m.tagType,m.entityId)})))}ngOnChanges(){this.commentText=this.comment}autoCompleteValueFor(r){return r.value}tagForEntityTypeAndId(r,m){switch(r){case h.lBA.Feature:return`FID${m}`;case h.lBA.Variant:return`VID${m}`;case h.lBA.VariantGroup:return`VGID${m}`;case h.lBA.EvidenceItem:return`EID${m}`;case h.lBA.Assertion:return`AID${m}`;case h.lBA.Revision:return`RID${m}`;case h.lBA.MolecularProfile:return`MPID${m}`;case h.lBA.Role:return Object.keys(h.gG1)[m]}}resetForm(){this.commentText=""}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreviewButtonClicked(){this.commentText&&(this.previewComment$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,P.E)("data","previewCommentText"),(0,t.p)(N.kP)),this.previewLoading$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,B.T)(({loading:r})=>r),(0,A.Z)(!0)))}onSearchChange({value:r,prefix:m}){"@"===m?this.userTypeaheadQueryRef$.refetch({queryTerm:r}):"$"==m?this.suggestions=this.roleSuggestions.filter(g=>g.value.startsWith(r)):this.entityTypeaheadQueryRef$.refetch({queryTerm:r})}onCommentChanged(r){this.commentChange.emit(r)}static{this.\u0275fac=function(m){return new(m||f)(n.rXU(h.WGp),n.rXU(h.bPL),n.rXU(h.paL),n.rXU(S.q))}}static{this.\u0275cmp=n.VBU({type:f,selectors:[["cvc-comment-input-form"]],inputs:{comment:"comment"},outputs:{commentChange:"commentChange"},standalone:!1,features:[n.OA$],decls:1,vars:1,consts:[[4,"ngrxLet"],[3,"nzAnimated"],["nzTitle","Write"],["nzNotFoundContent","No matches...",3,"nzOnSearchChange","nzOnSelect","nzSuggestions","nzPrefix","nzValueWith"],["nzMentionTrigger","","nz-input","",2,"width","100%",3,"ngModelChange","placeholder","nzAutosize","ngModel"],[4,"nzMentionSuggestion"],["nzTitle","Preview",3,"nzClick"],[4,"ngIf"],["nzTip","Loading..."],[3,"commentBodySegments"]],template:function(m,g){1&m&&n.DNE(0,Y,11,16,"ng-container",0),2&m&&n.Y8G("ngrxLet",g.viewer$)},dependencies:[G.bT,$.me,$.BC,j.Nj,F.JZ,F.rE,k.a,D.O2,D.sJ,D.yZ,u.Sy,u.c9,$.vS,I.p,j.L9],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2})}}return f})()},72874:(Z,U,e)=>{e.d(U,{PV:()=>nt,g9:()=>K});var n=e(31635),y=e(11225),h=e(47987),t=e(60177),o=e(54438),B=e(21413),A=e(56977),P=e(61594),N=e(70980),S=e(50513),G=e(40713),$=e(66376),j=e(26841),F=e(57806),k=e(65463),D=e(70317),u=e(59965),I=e(41951),z=e(35154),v=e(16389),T=e(25930);const b=["okBtn"],W=["cancelBtn"];function Y(C,V){1&C&&(o.j41(0,"div",6),o.nrm(1,"span",14),o.k0s())}function s(C,V){if(1&C&&(o.qex(0),o.j41(1,"span",17),o.nrm(2,"nz-icon",18),o.k0s(),o.bVm()),2&C){const l=V.$implicit;o.R7$(2),o.Y8G("nzType",l||"exclamation-circle")}}function f(C,V){if(1&C&&(o.qex(0),o.DNE(1,s,3,1,"ng-container",15),o.j41(2,"div",16),o.EFF(3),o.k0s(),o.bVm()),2&C){const l=o.XpG(2);o.R7$(),o.Y8G("nzStringTemplateOutlet",l.nzIcon),o.R7$(2),o.JRh(l.nzTitle)}}function _(C,V){if(1&C&&o.EFF(0),2&C){const l=o.XpG(2);o.SpI(" ",l.nzCancelText," ")}}function r(C,V){1&C&&(o.EFF(0),o.nI1(1,"nzI18n")),2&C&&o.SpI(" ",o.bMT(1,1,"Modal.cancelText")," ")}function m(C,V){if(1&C&&o.EFF(0),2&C){const l=o.XpG(2);o.SpI(" ",l.nzOkText," ")}}function g(C,V){1&C&&(o.EFF(0),o.nI1(1,"nzI18n")),2&C&&o.SpI(" ",o.bMT(1,1,"Modal.okText")," ")}function R(C,V){if(1&C){const l=o.RV6();o.j41(0,"div",4)(1,"div",5),o.DNE(2,Y,2,0,"div",6),o.j41(3,"div",7)(4,"div")(5,"div",8)(6,"div",9),o.DNE(7,f,4,2,"ng-container",10),o.k0s(),o.j41(8,"div",11)(9,"button",12,1),o.bIt("click",function(){o.eBV(l);const E=o.XpG();return o.Njj(E.onCancel())}),o.DNE(11,_,1,1)(12,r,2,3),o.k0s(),o.j41(13,"button",13,2),o.bIt("click",function(){o.eBV(l);const E=o.XpG();return o.Njj(E.onConfirm())}),o.DNE(15,m,1,1)(16,g,2,3),o.k0s()()()()()()()}if(2&C){const l=o.XpG();o.Aen(l.nzOverlayStyle),o.HbH(l._classMap),o.AVh("ant-popover-rtl","rtl"===l.dir),o.Y8G("cdkTrapFocusAutoCapture",null!==l.nzAutoFocus)("@.disabled",!(null==l.noAnimation||!l.noAnimation.nzNoAnimation))("nzNoAnimation",null==l.noAnimation?null:l.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),o.R7$(2),o.vxM(l.nzPopconfirmShowArrow?2:-1),o.R7$(5),o.Y8G("nzStringTemplateOutlet",l.nzTitle)("nzStringTemplateOutletContext",l.nzTitleContext),o.R7$(2),o.Y8G("nzSize","small"),o.BMQ("cdkFocusInitial","cancel"===l.nzAutoFocus||null),o.R7$(2),o.vxM(l.nzCancelText?11:12),o.R7$(2),o.Y8G("nzSize","small")("nzType","danger"!==l.nzOkType?l.nzOkType:"primary")("nzDanger",l.nzOkDanger||"danger"===l.nzOkType)("nzLoading",l.confirmLoading)("disabled",l.nzOkDisabled),o.BMQ("cdkFocusInitial","ok"===l.nzAutoFocus||null),o.R7$(2),o.vxM(l.nzOkText?15:16)}}let nt=(()=>{let V,E,C=z.ME,l=[],O=[],X=[],w=[];return class ot extends C{static{const Q="function"==typeof Symbol&&Symbol.metadata?Object.create(C[Symbol.metadata]??null):void 0;V=[(0,$.H4)()],E=[(0,$.H4)()],(0,n.G4)(null,null,V,{kind:"field",name:"nzPopconfirmBackdrop",static:!1,private:!1,access:{has:L=>"nzPopconfirmBackdrop"in L,get:L=>L.nzPopconfirmBackdrop,set:(L,J)=>{L.nzPopconfirmBackdrop=J}},metadata:Q},l,O),(0,n.G4)(null,null,E,{kind:"field",name:"nzAutofocus",static:!1,private:!1,access:{has:L=>"nzAutofocus"in L,get:L=>L.nzAutofocus,set:(L,J)=>{L.nzAutofocus=J}},metadata:Q},X,w),Q&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Q})}_nzModuleName="popconfirm";arrowPointAtCenter;title;titleContext=null;directiveTitle;trigger="click";placement="top";origin;mouseEnterDelay;mouseLeaveDelay;overlayClassName;overlayStyle;visible;nzOkText;nzOkType;nzOkDisabled;nzOkDanger;nzCancelText;nzBeforeConfirm;nzIcon;nzCondition=!1;nzPopconfirmShowArrow=!0;nzPopconfirmBackdrop=(0,n.zF)(this,l,!1);nzAutofocus=((0,n.zF)(this,O),(0,n.zF)(this,X,null));directiveContent=((0,n.zF)(this,w),null);content=null;overlayClickable;visibleChange=new o.bkB;nzOnCancel=new o.bkB;nzOnConfirm=new o.bkB;getProxyPropertyMap(){return{nzOkText:["nzOkText",()=>this.nzOkText],nzOkType:["nzOkType",()=>this.nzOkType],nzOkDanger:["nzOkDanger",()=>this.nzOkDanger],nzOkDisabled:["nzOkDisabled",()=>this.nzOkDisabled],nzCancelText:["nzCancelText",()=>this.nzCancelText],nzBeforeConfirm:["nzBeforeConfirm",()=>this.nzBeforeConfirm],nzCondition:["nzCondition",()=>this.nzCondition],nzIcon:["nzIcon",()=>this.nzIcon],nzPopconfirmShowArrow:["nzPopconfirmShowArrow",()=>this.nzPopconfirmShowArrow],nzPopconfirmBackdrop:["nzBackdrop",()=>this.nzPopconfirmBackdrop],nzPopconfirmContext:["nzTitleContext",()=>this.titleContext],nzAutoFocus:["nzAutoFocus",()=>this.nzAutofocus],...super.getProxyPropertyMap()}}constructor(){super(H)}createComponent(){super.createComponent(),this.component.nzOnCancel.pipe((0,A.Q)(this.destroy$)).subscribe(()=>{this.nzOnCancel.emit()}),this.component.nzOnConfirm.pipe((0,A.Q)(this.destroy$)).subscribe(()=>{this.nzOnConfirm.emit()})}static \u0275fac=function(L){return new(L||ot)};static \u0275dir=o.FsC({type:ot,selectors:[["","nz-popconfirm",""]],hostVars:2,hostBindings:function(L,J){2&L&&o.AVh("ant-popover-open",J.visible)},inputs:{arrowPointAtCenter:[2,"nzPopconfirmArrowPointAtCenter","arrowPointAtCenter",o.L39],title:[0,"nzPopconfirmTitle","title"],titleContext:[0,"nzPopconfirmTitleContext","titleContext"],directiveTitle:[0,"nz-popconfirm","directiveTitle"],trigger:[0,"nzPopconfirmTrigger","trigger"],placement:[0,"nzPopconfirmPlacement","placement"],origin:[0,"nzPopconfirmOrigin","origin"],mouseEnterDelay:[0,"nzPopconfirmMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:[0,"nzPopconfirmMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:[0,"nzPopconfirmOverlayClassName","overlayClassName"],overlayStyle:[0,"nzPopconfirmOverlayStyle","overlayStyle"],visible:[0,"nzPopconfirmVisible","visible"],nzOkText:"nzOkText",nzOkType:"nzOkType",nzOkDisabled:[2,"nzOkDisabled","nzOkDisabled",o.L39],nzOkDanger:[2,"nzOkDanger","nzOkDanger",o.L39],nzCancelText:"nzCancelText",nzBeforeConfirm:"nzBeforeConfirm",nzIcon:"nzIcon",nzCondition:[2,"nzCondition","nzCondition",o.L39],nzPopconfirmShowArrow:[2,"nzPopconfirmShowArrow","nzPopconfirmShowArrow",o.L39],nzPopconfirmBackdrop:"nzPopconfirmBackdrop",nzAutofocus:"nzAutofocus"},outputs:{visibleChange:"nzPopconfirmVisibleChange",nzOnCancel:"nzOnCancel",nzOnConfirm:"nzOnConfirm"},exportAs:["nzPopconfirm"],features:[o.Vt3]})}})(),H=(()=>{class C extends z.VJ{elementRef;okBtn;cancelBtn;nzCancelText;nzCondition=!1;nzPopconfirmShowArrow=!0;nzIcon;nzOkText;nzOkType="primary";nzOkDanger=!1;nzOkDisabled=!1;nzAutoFocus=null;nzBeforeConfirm=null;nzOnCancel=new B.B;nzOnConfirm=new B.B;_trigger="click";elementFocusedBeforeModalWasOpened=null;document=(0,o.WQX)(t.qQ);_prefix="ant-popover";confirmLoading=!1;constructor(l){super(),this.elementRef=l}ngOnDestroy(){super.ngOnDestroy(),this.nzOnCancel.complete(),this.nzOnConfirm.complete()}show(){this.nzCondition?this.onConfirm():(this.capturePreviouslyFocusedElement(),super.show())}hide(){super.hide(),this.restoreFocus()}handleConfirm(){this.nzOnConfirm.next(),super.hide()}onCancel(){this.nzOnCancel.next(),super.hide()}onConfirm(){if(this.nzBeforeConfirm){const l=(0,D.cG)(this.nzBeforeConfirm()).pipe((0,P.$)());this.confirmLoading=!0,l.pipe((0,N.j)(()=>{this.confirmLoading=!1,this.cdr.markForCheck()}),(0,A.Q)(this.nzVisibleChange),(0,A.Q)(this.destroy$)).subscribe(O=>{O&&this.handleConfirm()})}else this.handleConfirm()}capturePreviouslyFocusedElement(){this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement)}restoreFocus(){const l=this.elementFocusedBeforeModalWasOpened;if(l&&"function"==typeof l.focus){const O=this.document.activeElement,E=this.elementRef.nativeElement;(!O||O===this.document.body||O===E||E.contains(O))&&l.focus()}}static \u0275fac=function(O){return new(O||C)(o.rXU(o.aKT))};static \u0275cmp=o.VBU({type:C,selectors:[["nz-popconfirm"]],viewQuery:function(O,E){if(1&O&&(o.GBs(b,5,o.aKT),o.GBs(W,5,o.aKT)),2&O){let X;o.mGM(X=o.lsd())&&(E.okBtn=X),o.mGM(X=o.lsd())&&(E.cancelBtn=X)}},exportAs:["nzPopconfirmComponent"],features:[o.Vt3],decls:2,vars:6,consts:[["overlay","cdkConnectedOverlay"],["cancelBtn",""],["okBtn",""],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"overlayOutsideClick","detach","positionChange","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","nzArrowPointAtCenter"],["cdkTrapFocus","",1,"ant-popover",3,"cdkTrapFocusAutoCapture","nzNoAnimation"],[1,"ant-popover-content"],[1,"ant-popover-arrow"],[1,"ant-popover-inner"],[1,"ant-popover-inner-content"],[1,"ant-popover-message"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[1,"ant-popover-buttons"],["nz-button","",3,"click","nzSize"],["nz-button","",3,"click","nzSize","nzType","nzDanger","nzLoading","disabled"],[1,"ant-popover-arrow-content"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-message-title"],[1,"ant-popover-message-icon"],["nzTheme","fill",3,"nzType"]],template:function(O,E){if(1&O){const X=o.RV6();o.DNE(0,R,17,23,"ng-template",3,0,o.C5r),o.bIt("overlayOutsideClick",function(q){return o.eBV(X),o.Njj(E.onClickOutside(q))})("detach",function(){return o.eBV(X),o.Njj(E.hide())})("positionChange",function(q){return o.eBV(X),o.Njj(E.onPositionChange(q))})}2&O&&o.Y8G("cdkConnectedOverlayHasBackdrop",E.nzBackdrop)("cdkConnectedOverlayOrigin",E.origin)("cdkConnectedOverlayPositions",E._positions)("cdkConnectedOverlayOpen",E._visible)("cdkConnectedOverlayPush",E.cdkConnectedOverlayPush)("nzArrowPointAtCenter",E.nzArrowPointAtCenter)},dependencies:[h.z_,h.WB,k.$_,k.vT,y.Pd,y.kB,j.z,F.C,F.m,I.Y3,I.Dn,S.Zw,S.aO,v.c,T.p,u.bP,u.Vc],encapsulation:2,data:{animation:[G.uX]},changeDetection:0})}return C})(),K=(()=>{class C{static \u0275fac=function(O){return new(O||C)};static \u0275mod=o.$C({type:C});static \u0275inj=o.G2t({imports:[H]})}return C})()},72968:(Z,U,e)=>{e.d(U,{K:()=>A});var n=e(60177),y=e(25703),h=e(12617),t=e(41951),o=e(50513),B=e(54438);let A=(()=>{class P{static{this.\u0275fac=function(G){return new(G||P)}}static{this.\u0275mod=B.$C({type:P})}static{this.\u0275inj=B.G2t({imports:[n.MD,y.Ti,h.rD,t.Y3,o.Zw]})}}return P})()},86864:(Z,U,e)=>{e.d(U,{OW:()=>z,fL:()=>b,fS:()=>T,sC:()=>Y,sf:()=>I});var n=e(54438),y=e(76939),h=e(21413),t=e(56977),o=e(57806),B=e(28203);const A=["*"];function P(s,f){1&s&&n.SdG(0)}const N=[[["nz-avatar","nz-comment-avatar",""]],[["nz-comment-content"]],"*"],S=["nz-avatar[nz-comment-avatar]","nz-comment-content","*"];function G(s,f){if(1&s&&(n.qex(0),n.EFF(1),n.bVm()),2&s){const _=n.XpG(2);n.R7$(),n.JRh(_.nzAuthor)}}function $(s,f){if(1&s&&(n.j41(0,"span",4),n.DNE(1,G,2,1,"ng-container",8),n.k0s()),2&s){const _=n.XpG();n.R7$(),n.Y8G("nzStringTemplateOutlet",_.nzAuthor)}}function j(s,f){if(1&s&&(n.qex(0),n.EFF(1),n.bVm()),2&s){const _=n.XpG(2);n.R7$(),n.JRh(_.nzDatetime)}}function F(s,f){if(1&s&&(n.j41(0,"span",5),n.DNE(1,j,2,1,"ng-container",8),n.k0s()),2&s){const _=n.XpG();n.R7$(),n.Y8G("nzStringTemplateOutlet",_.nzDatetime)}}function k(s,f){}function D(s,f){if(1&s&&(n.j41(0,"li")(1,"span"),n.DNE(2,k,0,0,"ng-template",9),n.k0s()()),2&s){const _=f.$implicit;n.R7$(2),n.Y8G("nzCommentActionHost",_.content)}}function u(s,f){if(1&s&&(n.j41(0,"ul",6),n.Z7z(1,D,3,1,"li",null,n.fX1),n.k0s()),2&s){const _=n.XpG();n.R7$(),n.Dyx(_.actions)}}let I=(()=>{class s{static \u0275fac=function(r){return new(r||s)};static \u0275dir=n.FsC({type:s,selectors:[["nz-avatar","nz-comment-avatar",""]],exportAs:["nzCommentAvatar"]})}return s})(),z=(()=>{class s{static \u0275fac=function(r){return new(r||s)};static \u0275dir=n.FsC({type:s,selectors:[["nz-comment-content"],["","nz-comment-content",""]],hostAttrs:[1,"ant-comment-content-detail"],exportAs:["nzCommentContent"]})}return s})(),v=(()=>{class s extends y.I3{nzCommentActionHost;constructor(_,r){super(_,r)}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}ngAfterViewInit(){this.attach(this.nzCommentActionHost)}static \u0275fac=function(r){return new(r||s)(n.rXU(n.OM3),n.rXU(n.c1b))};static \u0275dir=n.FsC({type:s,selectors:[["","nzCommentActionHost",""]],inputs:{nzCommentActionHost:"nzCommentActionHost"},exportAs:["nzCommentActionHost"],features:[n.Vt3]})}return s})(),T=(()=>{class s{viewContainerRef;implicitContent;contentPortal=null;get content(){return this.contentPortal}constructor(_){this.viewContainerRef=_}ngOnInit(){this.contentPortal=new y.VA(this.implicitContent,this.viewContainerRef)}static \u0275fac=function(r){return new(r||s)(n.rXU(n.c1b))};static \u0275cmp=n.VBU({type:s,selectors:[["nz-comment-action"]],viewQuery:function(r,m){if(1&r&&n.GBs(n.C4Q,7),2&r){let g;n.mGM(g=n.lsd())&&(m.implicitContent=g.first)}},exportAs:["nzCommentAction"],ngContentSelectors:A,decls:1,vars:0,template:function(r,m){1&r&&(n.NAR(),n.DNE(0,P,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}return s})(),b=(()=>{class s{cdr;directionality;nzAuthor;nzDatetime;dir="ltr";destroy$=new h.B;actions;constructor(_,r){this.cdr=_,this.directionality=r}ngOnInit(){this.directionality.change?.pipe((0,t.Q)(this.destroy$)).subscribe(_=>{this.dir=_,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(r){return new(r||s)(n.rXU(n.gRc),n.rXU(B.dS))};static \u0275cmp=n.VBU({type:s,selectors:[["nz-comment"]],contentQueries:function(r,m,g){if(1&r&&n.wni(g,T,4),2&r){let R;n.mGM(R=n.lsd())&&(m.actions=R)}},hostVars:4,hostBindings:function(r,m){2&r&&n.AVh("ant-comment",!0)("ant-comment-rtl","rtl"===m.dir)},inputs:{nzAuthor:"nzAuthor",nzDatetime:"nzDatetime"},exportAs:["nzComment"],ngContentSelectors:S,decls:11,vars:3,consts:[[1,"ant-comment-inner"],[1,"ant-comment-avatar"],[1,"ant-comment-content"],[1,"ant-comment-content-author"],[1,"ant-comment-content-author-name"],[1,"ant-comment-content-author-time"],[1,"ant-comment-actions"],[1,"ant-comment-nested"],[4,"nzStringTemplateOutlet"],[3,"nzCommentActionHost"]],template:function(r,m){1&r&&(n.NAR(N),n.j41(0,"div",0)(1,"div",1),n.SdG(2),n.k0s(),n.j41(3,"div",2)(4,"div",3),n.DNE(5,$,2,1,"span",4)(6,F,2,1,"span",5),n.k0s(),n.SdG(7,1),n.DNE(8,u,3,0,"ul",6),n.k0s()(),n.j41(9,"div",7),n.SdG(10,2),n.k0s()),2&r&&(n.R7$(5),n.vxM(m.nzAuthor?5:-1),n.R7$(),n.vxM(m.nzDatetime?6:-1),n.R7$(2),n.vxM(null!=m.actions&&m.actions.length?8:-1))},dependencies:[o.C,o.m,v],encapsulation:2,changeDetection:0})}return s})(),Y=(()=>{class s{static \u0275fac=function(r){return new(r||s)};static \u0275mod=n.$C({type:s});static \u0275inj=n.G2t({imports:[b]})}return s})()}}]);