"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[8592],{7525:(D,E,e)=>{e.d(E,{h:()=>M});var l=e(6814),d=e(551),h=e(9212);let M=(()=>{class m{}return m.\u0275fac=function(_){return new(_||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[l.ez,d.PV]}),m})()},8178:(D,E,e)=>{e.d(E,{u:()=>t});var l=e(9212),d=e(9512),h=e(804),M=e(551),m=e(2392);function c(p,a){1&p&&(l.TgZ(0,"span"),l._uU(1," You must be logged in to view this page. "),l.qZA())}function _(p,a){1&p&&l._UZ(0,"cvc-login-button")}function g(p,a){1&p&&(l.TgZ(0,"nz-typography",4),l._UZ(1,"i",5),l.qZA())}let t=(()=>{class p{}return p.\u0275fac=function(n){return new(n||p)},p.\u0275cmp=l.Xpm({type:p,selectors:[["cvc-login-prompt"]],decls:7,vars:3,consts:[[3,"nzNotFoundImage","nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["emptyImage",""],["nzType","secondary"],["nz-icon","","nzType","login","nzTheme","outline",2,"font-size","50pt"]],template:function(n,o){if(1&n&&(l.TgZ(0,"nz-empty",0),l.YNc(1,c,2,0,"ng-template",null,1,l.W1O)(3,_,1,0,"ng-template",null,2,l.W1O),l.qZA(),l.YNc(5,g,2,0,"ng-template",null,3,l.W1O)),2&n){const L=l.MAs(2),F=l.MAs(4),R=l.MAs(6);l.Q6J("nzNotFoundImage",R)("nzNotFoundContent",L)("nzNotFoundFooter",F)}},dependencies:[d.s,h.p9,M.Ls,m.ZU],styles:["[_nghost-%COMP%]{display:inline-block}"]}),p})()},8603:(D,E,e)=>{e.d(E,{a:()=>_});var l=e(6814),d=e(5163),h=e(804),M=e(551),m=e(2392),c=e(9212);let _=(()=>{class g{}return g.\u0275fac=function(p){return new(p||g)},g.\u0275mod=c.oAB({type:g}),g.\u0275inj=c.cJS({imports:[l.ez,d.B,h.Xo,M.PV,m.ZJ]}),g})()},6288:(D,E,e)=>{e.d(E,{u:()=>C});var l=e(655),d=e(6223),h=e(2024),M=e(9348),m=e(9182),c=e(2190),_=e(1791);const p=(0,e(7570).Z)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"New Assertion"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"molecularProfileId",type:"molecular-profile-select",props:{required:!0,watchVariantMolecularProfileId:!0}}]},{wrappers:["form-row"],props:{formRowOptions:{responsive:{xs:24,lg:12,xl:8,xxl:6}}},fieldGroup:[{key:"assertionType",type:"type-select",props:{required:!0}},{key:"assertionDirection",type:"direction-select",props:{required:!0}},{key:"significance",type:"significance-select",props:{required:!0}},{key:"diseaseId",type:"disease-select",props:{}},{key:"therapyIds",type:"therapy-multi-select",props:{}},{key:"therapyInteractionType",type:"interaction-select",props:{}},{key:"variantOrigin",type:"origin-select",props:{required:!0}},{key:"phenotypeIds",type:"phenotype-multi-select",props:{}},{key:"ampLevel",type:"amp-category-select",props:{colSpan:8}},{key:"acmgCodeIds",type:"acmg-code-multi-select",props:{colSpan:8}},{key:"clingenCodeIds",type:"clingen-code-multi-select",props:{colSpan:8}},{key:"nccnGuidelineId",type:"nccn-guideline-select",props:{}},{key:"nccnGuidelineVersion",type:"nccn-guideline-version-input",props:{}},{key:"fdaRegulatoryApproval",type:"fda-regulatory-approval-checkbox",props:{}},{key:"fdaCompanionTest",type:"fda-companion-test-checkbox",props:{}}]},{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{xs:24},{md:24,lg:8},{md:24,lg:16}]}},fieldGroup:[{key:"evidenceItemIds",type:"evidence-multi-select",props:{required:!0,isMultiSelect:!0}},{key:"summary",type:"textarea",wrappers:["form-field"],props:{tooltip:"A short, one sentence summary of the Assertion",placeholder:"Enter an Assertion Summary",label:"Assertion Summary",required:!0}},{key:"description",type:"base-textarea",wrappers:["form-field"],props:{tooltip:"A complete, original description of this Assertion. Limited to one paragraph.",placeholder:"Enter an Assertion Statement",label:"Assertion Statement",required:!0,rows:5}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",required:!0}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Assertion",align:"right"}}]}]}],M.J);var O,a=e(9212),n=e(313),o=e(7473),L=e(3599),F=e(4190),R=e(5545),S=e(9928);const T=y=>["/assertions",y,"summary"];function I(y,f){if(1&y&&(a._uU(0," View your submitted Assertion "),a.TgZ(1,"a",4),a._uU(2,"here"),a.qZA(),a._uU(3,". You will be redirected shortly. ")),2&y){const u=a.oxw();a.xp6(),a.Q6J("routerLink",a.VKq(1,T,u.newAssertionId))}}let C=((O=class{constructor(f,u){this.submitAssertionGQL=f,this.networkErrorService=u,this.form=new d.nJ({}),this.model=M.J,this.fields=p,this.state=new m._,this.options={formState:this.state},this.submitAssertionMutator=new h.U(u)}onSubmit(f){let u=(0,c.XU)(f);u&&(this.mutationState=this.submitAssertionMutator.mutate(this.submitAssertionGQL,{input:u},void 0,i=>{this.newAssertionId=i.submitAssertion?.assertion.id,this.newAssertionUrl=`/assertions/${this.newAssertionId}/summary`}))}ngAfterViewInit(){this.state.formReady$.next(!0)}ngOnDestroy(){this.options.formState.onDestroy()}}).\u0275fac=function(f){return new(f||O)(a.Y36(n.LLl),a.Y36(o.Y))},O.\u0275cmp=a.Xpm({type:O,selectors:[["cvc-assertion-submit-form"]],decls:5,vars:8,consts:[["entityType","Assertion",3,"mutationState","redirectUrl","successMessage"],["success",""],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[3,"form","fields","model","options","modelChange"],[3,"routerLink"]],template:function(f,u){if(1&f&&(a.TgZ(0,"cvc-form-submission-status-display",0),a.YNc(1,I,4,3,"ng-template",null,1,a.W1O),a.TgZ(3,"form",2),a.NdJ("ngSubmit",function(){return u.onSubmit(u.model)}),a.TgZ(4,"formly-form",3),a.NdJ("modelChange",function(r){return u.model=r}),a.qZA()()()),2&f){const i=a.MAs(2);a.Q6J("mutationState",u.mutationState)("redirectUrl",u.newAssertionUrl)("successMessage",i),a.xp6(3),a.Q6J("formGroup",u.form),a.xp6(),a.Q6J("form",u.form)("fields",u.fields)("model",u.model)("options",u.options)}},dependencies:[L.Lr,F.rH,d._Y,d.JL,d.sg,R.T7,S.F],encapsulation:2,changeDetection:0}),O);C=(0,l.gn)([(0,_.c)()],C)},1810:(D,E,e)=>{e.d(E,{E:()=>t});var l=e(6814),d=e(3599),h=e(2840),M=e(9208),m=e(279),c=e(1227),_=e(4190),g=e(9212);let t=(()=>{class p{}return p.\u0275fac=function(n){return new(n||p)},p.\u0275mod=g.oAB({type:p}),p.\u0275inj=g.cJS({imports:[l.ez,d.U5,h.sL,_.Bz,M.S,c.g,m.s]}),p})()},1986:(D,E,e)=>{e.d(E,{A:()=>g});var l=e(6814),d=e(3599),h=e(2840),M=e(9208),m=e(279),c=e(1227),_=e(9212);let g=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[l.ez,d.U5,h.sL,M.S,c.g,m.s]}),t})()},75:(D,E,e)=>{e.d(E,{r:()=>f});var l=e(655),d=e(6223),h=e(2024),M=e(7382),m=e(2114),c=e(1791);const a=(0,e(7570).Z)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Evidence Item"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"molecularProfileId",type:"molecular-profile-select",props:{required:!0,tooltip:"A single variant (Simple Molecular Profile) or a combination of variants (Complex Molecular Profile) relevant to the curated evidence.",watchVariantMolecularProfileId:!0}},{key:"sourceId",type:"source-select",props:{required:!0}}]},{wrappers:["form-row"],props:{formRowOptions:{responsive:{xs:24,lg:12,xl:8,xxl:6}}},fieldGroup:[{key:"evidenceType",type:"type-select",props:{required:!0}},{key:"evidenceDirection",type:"direction-select",props:{required:!0}},{key:"significance",type:"significance-select",props:{required:!0}},{key:"diseaseId",type:"disease-select",props:{}},{key:"therapyIds",type:"therapy-multi-select",props:{}},{key:"therapyInteractionType",type:"interaction-select",props:{}},{key:"evidenceLevel",type:"level-select",props:{required:!0}},{key:"rating",type:"rating",props:{required:!0}},{key:"variantOrigin",type:"origin-select",props:{required:!0}},{key:"phenotypeIds",type:"phenotype-multi-select",props:{}}]},{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"description",type:"base-textarea",props:{tooltip:"Your original description of evidence from published literature detailing the association or lack of association between a variant and its predictive, prognostic, diagnostic, predisposing, functional or oncogenic value. ",placeholder:"Enter an Evidence Statement",extraType:"description",description:'Data constituting personal or identifying information should not be entered (e.g. <a href="https://www.hipaajournal.com/what-is-protected-health-information/" target="_blank">protected health information (PHI) as defined by HIPAA</a> in the U.S. and/or comparable laws in your jurisdiction).',label:"Evidence Statement",required:!0,colSpan:24}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Evidence Item Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{featureId:void 0,variantId:void 0,significance:void 0,description:void 0,diseaseId:void 0,drugIds:[],therapyInteractionType:void 0,evidenceDirection:void 0,evidenceLevel:void 0,evidenceType:void 0,molecularProfileId:void 0,phenotypeIds:[],rating:void 0,sourceId:void 0,variantOrigin:void 0},comment:void 0,organizationId:void 0});var T,n=e(9212),o=e(313),L=e(7473),F=e(6814),R=e(3599),S=e(5545),O=e(9928);function I(u,i){if(1&u&&(n._uU(0," Revision(s) submitted! You will be redirected to the Revisions page or you can view them "),n.TgZ(1,"a",4),n._uU(2,"here."),n.qZA()),2&u){const r=n.oxw();n.xp6(),n.s9C("href",r.url,n.LSH)}}function C(u,i){if(1&u){const r=n.EpF();n.TgZ(0,"form",5),n.NdJ("ngSubmit",function(){n.CHM(r);const v=n.oxw();return n.KtG(v.onSubmit(v.model))}),n.TgZ(1,"formly-form",6),n.NdJ("modelChange",function(v){n.CHM(r);const P=n.oxw();return n.KtG(P.model=v)}),n.qZA()()}if(2&u){const r=n.oxw();n.Q6J("formGroup",r.form),n.xp6(),n.Q6J("form",r.form)("fields",r.fields)("model",r.model)("options",r.options)}}function y(u,i){1&u&&n._uU(0," Loading Evidence Item... ")}let f=((T=class{constructor(i,r,s,v){this.revisableFieldsGQL=i,this.submitRevisionsGQL=r,this.networkErrorService=s,this.cdr=v,this.form=new d.nJ({}),this.fields=a,this.state=new M._,this.state.formMode="revise",this.options={formState:this.state},this.reviseEvidenceMutator=new h.U(s)}ngOnInit(){this.url=`/evidence/${this.evidenceId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({evidenceId:this.evidenceId}).pipe((0,c.t)(this)).subscribe({next:({data:{evidenceItem:i}})=>{i&&(this.model={id:i.id,fields:(0,m.ux)(i)},this.cdr.detectChanges())},error:i=>{console.error("Error retrieving evidenceItem."),console.error(i)},complete:()=>{this.state.formReady$.next(!0),console.log("evidence item retrieved.")}})}onSubmit(i){if(!this.evidenceId)return;let r=(0,m.Ct)(this.evidenceId,i);r&&(this.mutationState=this.reviseEvidenceMutator.mutate(this.submitRevisionsGQL,{input:r}))}ngOnDestroy(){this.options.formState.onDestroy()}}).\u0275fac=function(i){return new(i||T)(n.Y36(o.Q_P),n.Y36(o.Vj7),n.Y36(L.Y),n.Y36(n.sBO))},T.\u0275cmp=n.Xpm({type:T,selectors:[["cvc-evidence-revise-form"]],inputs:{evidenceId:"evidenceId"},decls:6,vars:5,consts:[["entityType","Evidence Item",3,"mutationState","successMessage","redirectUrl"],["success",""],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["loadingModel",""],[3,"href"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[3,"form","fields","model","options","modelChange"]],template:function(i,r){if(1&i&&(n.TgZ(0,"cvc-form-submission-status-display",0),n.YNc(1,I,3,1,"ng-template",null,1,n.W1O)(3,C,2,5,"form",2)(4,y,1,0,"ng-template",null,3,n.W1O),n.qZA()),2&i){const s=n.MAs(2),v=n.MAs(5);n.Q6J("mutationState",r.mutationState)("successMessage",s)("redirectUrl",r.url),n.xp6(3),n.Q6J("ngIf",r.model)("ngIfElse",v)}},dependencies:[F.O5,R.Lr,d._Y,d.JL,d.sg,S.T7,O.F],encapsulation:2,changeDetection:0}),T);f=(0,l.gn)([(0,c.c)()],f)},6586:(D,E,e)=>{e.d(E,{C:()=>g});var l=e(6814),d=e(3599),h=e(2840),M=e(9208),m=e(279),c=e(1227),_=e(9212);let g=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[l.ez,d.U5,h.sL,M.S,c.g,m.s]}),t})()},8454:(D,E,e)=>{e.d(E,{$:()=>i});var l=e(655),d=e(6223),h=e(1791),M=e(2024),m=e(1022);const n=(0,e(7570).Z)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Gene"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"description",type:"base-textarea",wrappers:["form-field"],props:{tooltip:"User-defined summary of the clinical relevance of this Gene.",placeholder:"Enter a Gene Summary",label:"Gene Summary",required:!1,rows:5}},{key:"sourceIds",type:"source-multi-select",wrappers:["form-field"],props:{}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",placeholder:"Please enter a comment describing your revisions.",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Gene Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{description:void 0,sourceIds:void 0},comment:void 0,organizationId:void 0});var I,o=e(9212),L=e(313),F=e(7473),R=e(6814),S=e(3599),O=e(5545),T=e(9928);function C(r,s){if(1&r&&(o._uU(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),o.TgZ(1,"a",4),o._uU(2,"here."),o.qZA()),2&r){const v=o.oxw();o.xp6(),o.s9C("href",v.url,o.LSH)}}const y=()=>({});function f(r,s){if(1&r){const v=o.EpF();o.TgZ(0,"form",5),o.NdJ("ngSubmit",function(){o.CHM(v);const A=o.oxw();return o.KtG(A.onSubmit(A.model))}),o.TgZ(1,"formly-form",6),o.NdJ("modelChange",function(A){o.CHM(v);const x=o.oxw();return o.KtG(x.model=A)}),o.qZA()()}if(2&r){const v=o.oxw();o.Q6J("formGroup",v.form),o.xp6(),o.Q6J("form",v.form)("fields",v.fields)("model",v.model)("options",o.DdM(5,y))}}function u(r,s){1&r&&o._uU(0," Loading Gene... ")}let i=((I=class{constructor(s,v,P,A){this.revisableFieldsGQL=s,this.submitRevisionsGQL=v,this.networkErrorService=P,this.cdr=A,this.form=new d.nJ({}),this.fields=n,this.reviseEvidenceMutator=new M.U(P)}ngOnInit(){this.url=`/features/${this.featureId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({featureId:this.featureId}).pipe((0,h.t)(this)).subscribe({next:({data:{feature:s}})=>{var r;s&&(this.model={id:s.id,fields:(r=s,{description:r.description,sourceIds:r.sources.map(s=>s.id)})},this.cdr.detectChanges())},error:s=>{console.error("Error retrieving Gene."),console.error(s)},complete:()=>{}})}onSubmit(s){if(!this.featureId)return;let v=function _(r,s){const v=s.fields;if(s.comment)return{id:r,fields:{description:m.xt(v.description),sourceIds:v.sourceIds||[]},organizationId:s.organizationId,comment:s.comment}}(this.featureId,s);v&&(this.mutationState=this.reviseEvidenceMutator.mutate(this.submitRevisionsGQL,{input:v}))}}).\u0275fac=function(s){return new(s||I)(o.Y36(L.FOU),o.Y36(L.D9L),o.Y36(F.Y),o.Y36(o.sBO))},I.\u0275cmp=o.Xpm({type:I,selectors:[["cvc-gene-revise-form"]],inputs:{featureId:"featureId"},decls:6,vars:5,consts:[["entityType","Gene",3,"redirectUrl","mutationState","successMessage"],["success",""],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["loadingModel",""],[3,"href"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[3,"form","fields","model","options","modelChange"]],template:function(s,v){if(1&s&&(o.TgZ(0,"cvc-form-submission-status-display",0),o.YNc(1,C,3,1,"ng-template",null,1,o.W1O)(3,f,2,6,"form",2)(4,u,1,0,"ng-template",null,3,o.W1O),o.qZA()),2&s){const P=o.MAs(2),A=o.MAs(5);o.Q6J("redirectUrl",v.url)("mutationState",v.mutationState)("successMessage",P),o.xp6(3),o.Q6J("ngIf",v.model)("ngIfElse",A)}},dependencies:[R.O5,S.Lr,d._Y,d.JL,d.sg,O.T7,T.F],encapsulation:2,changeDetection:0}),I);i=(0,l.gn)([(0,h.c)()],i)},6012:(D,E,e)=>{e.d(E,{i:()=>g});var l=e(6814),d=e(3599),h=e(2840),M=e(9208),m=e(279),c=e(1227),_=e(9212);let g=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[l.ez,d.U5,h.sL,M.S,c.g,m.s]}),t})()},3821:(D,E,e)=>{e.d(E,{R:()=>u});var l=e(655),d=e(6223),h=e(1791),M=e(2024),m=e(1022);const n=(0,e(7570).Z)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Molecular Profile"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{md:24,lg:16},{md:24,lg:8},{xs:24}]}},fieldGroup:[{key:"description",type:"textarea",wrappers:["form-field"],props:{placeholder:"Enter a Molecular Profile Description",label:"Molecular Profile Description",description:"Provide a summary of the clinical relevance of this Molecular Profile. The Molecular Profile Summary should be a synthesis of the existing Evidence Statements for this profile. Basic information on recurrence rates and biological/functional impact of the variants may be included, but the focus should be on the clinical impact (i.e. predictive, prognostic, diagnostic, or predisposing relevance).",required:!1,rows:5}},{key:"aliases",type:"tag-multi-input",wrappers:["form-field"],props:{label:"Aliases",description:"List any aliases commonly used to refer to this Molecular Profile"}},{key:"sourceIds",type:"source-multi-select",wrappers:["form-field"],props:{}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",required:!0}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{description:void 0,sourceIds:void 0,aliases:void 0},comment:void 0,organizationId:void 0});var I,o=e(9212),L=e(313),F=e(7473),R=e(6814),S=e(3599),O=e(5545),T=e(9928);function C(i,r){if(1&i&&(o._uU(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),o.TgZ(1,"a",4),o._uU(2,"here."),o.qZA()),2&i){const s=o.oxw();o.xp6(),o.s9C("href",s.url,o.LSH)}}function y(i,r){if(1&i){const s=o.EpF();o.TgZ(0,"form",5),o.NdJ("ngSubmit",function(){o.CHM(s);const P=o.oxw();return o.KtG(P.onSubmit(P.model))}),o.TgZ(1,"formly-form",6),o.NdJ("modelChange",function(P){o.CHM(s);const A=o.oxw();return o.KtG(A.model=P)}),o.qZA()()}if(2&i){const s=o.oxw();o.Q6J("formGroup",s.form),o.xp6(),o.Q6J("form",s.form)("fields",s.fields)("model",s.model)("options",s.options)}}function f(i,r){1&i&&o._uU(0," Loading Molecular Profile... ")}let u=((I=class{constructor(r,s,v,P){this.revisableFieldsGQL=r,this.submitRevisionsGQL=s,this.cdr=v,this.form=new d.nJ({}),this.options={formState:{isSimpleMp:void 0}};const A=n[0]?.fieldGroup?.find(x=>"fields"==x.key)?.fieldGroup?.find(x=>"aliases"==x.key);if(A){const x=A.props?.description;A.expressions={"props.disabled":G=>G.options?.formState.isSimpleMp,"props.description":G=>G.options?.formState.isSimpleMp?"Simple Molecular Profiles inherit their Aliases from the corresponding Variant.":x}}this.fields=n,this.reviseEvidenceMutator=new M.U(P)}ngOnInit(){this.url=`/molecular-profiles/${this.molecularProfileId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({molecularProfileId:this.molecularProfileId}).pipe((0,h.t)(this)).subscribe({next:({data:{molecularProfile:r}})=>{var i;r&&(this.options.formState.isSimpleMp=!r.isComplex,this.model={id:r.id,fields:(i=r,{description:i.description,sourceIds:i.sources.map(r=>r.id),aliases:i.molecularProfileAliases})},this.cdr.detectChanges())},error:r=>{console.error("Error retrieving MolecularProfile."),console.error(r)},complete:()=>{}})}onSubmit(r){if(!this.molecularProfileId)return;let s=function _(i,r){const s=r.fields;if(r.comment)return{id:i,fields:{description:m.xt(s.description),sourceIds:s.sourceIds||[],aliases:s.aliases||[]},organizationId:r.organizationId,comment:r.comment}}(this.molecularProfileId,r);s&&(this.mutationState=this.reviseEvidenceMutator.mutate(this.submitRevisionsGQL,{input:s}))}}).\u0275fac=function(r){return new(r||I)(o.Y36(L.pR8),o.Y36(L.T1I),o.Y36(o.sBO),o.Y36(F.Y))},I.\u0275cmp=o.Xpm({type:I,selectors:[["cvc-mp-revise-form"]],inputs:{molecularProfileId:"molecularProfileId"},decls:6,vars:5,consts:[["entityType","Molecular Profile",3,"redirectUrl","mutationState","successMessage"],["success",""],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["loadingModel",""],[3,"href"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[3,"form","fields","model","options","modelChange"]],template:function(r,s){if(1&r&&(o.TgZ(0,"cvc-form-submission-status-display",0),o.YNc(1,C,3,1,"ng-template",null,1,o.W1O)(3,y,2,5,"form",2)(4,f,1,0,"ng-template",null,3,o.W1O),o.qZA()),2&r){const v=o.MAs(2),P=o.MAs(5);o.Q6J("redirectUrl",s.url)("mutationState",s.mutationState)("successMessage",v),o.xp6(3),o.Q6J("ngIf",s.model)("ngIfElse",P)}},dependencies:[R.O5,S.Lr,d._Y,d.JL,d.sg,O.T7,T.F],encapsulation:2,changeDetection:0}),I);u=(0,l.gn)([(0,h.c)()],u)},9138:(D,E,e)=>{e.d(E,{A:()=>_});var l=e(6814),d=e(3599),h=e(2840),M=e(9208),m=e(1227),c=e(9212);let _=(()=>{class g{}return g.\u0275fac=function(p){return new(p||g)},g.\u0275mod=c.oAB({type:g}),g.\u0275inj=c.cJS({imports:[l.ez,d.U5,h.sL,M.S,m.g]}),g})()},2480:(D,E,e)=>{e.d(E,{L:()=>I});var l=e(655),d=e(6223),h=e(2024),M=e(8597),m=e(1791),c=e(8645);const g=[{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Variant Group"}},fieldGroup:[{key:"name",type:"base-input",props:{label:"Variant Group Name",required:!0}},{key:"description",type:"base-textarea",props:{tooltip:"User-defined summary of the clinical relevance of this Variant Group.",placeholder:"Enter a Variant Group Summary",label:"Variant Group Summary",required:!0,rows:5}},{key:"sourceIds",type:"source-multi-select",wrappers:["form-field"],props:{required:!1}},{key:"variantIds",type:"variant-multi-select",props:{label:"Variants",required:!0,requireGene:!1,showManagerBtn:!0}}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"textarea",props:{label:"Comment",required:!0}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Variant Group Revision",align:"right"}}]}]}];var R,t=e(9212),p=e(313),a=e(7473),n=e(6814),o=e(3599),L=e(5545),F=e(9928);function S(C,y){if(1&C&&(t._uU(0," Revision(s) submitted! You will be redirected to the Revisions page or you may view them "),t.TgZ(1,"a",4),t._uU(2,"here."),t.qZA()),2&C){const f=t.oxw();t.xp6(),t.s9C("href",f.url,t.LSH)}}function O(C,y){if(1&C){const f=t.EpF();t.TgZ(0,"form",5),t.NdJ("ngSubmit",function(){t.CHM(f);const i=t.oxw();return t.KtG(i.onSubmit(i.model))}),t.TgZ(1,"formly-form",6),t.NdJ("modelChange",function(i){t.CHM(f);const r=t.oxw();return t.KtG(r.model=i)}),t.qZA()()}if(2&C){const f=t.oxw();t.Q6J("formGroup",f.form),t.xp6(),t.Q6J("form",f.form)("fields",f.fields)("model",f.model)("options",f.options)}}function T(C,y){1&C&&t._uU(0," Loading Variant Group... ")}let I=((R=class{constructor(y,f,u,i){this.revisableFieldsGQL=y,this.submitRevisionsGQL=f,this.networkErrorService=u,this.cdr=i,this.form=new d.nJ({}),this.fields=g,this.state={formReady$:new c.x},this.options={formState:this.state},this.reviseAssertionMutator=new h.U(this.networkErrorService)}onSubmit(y){if(console.log("------ Variant Group Suggestion Added ------"),console.log(y),!this.variantGroupId)return;let f=(0,M.Vk)(this.variantGroupId,y);f&&(this.mutationState=this.reviseAssertionMutator.mutate(this.submitRevisionsGQL,{input:f}))}ngOnInit(){this.url=`/variant-groups/${this.variantGroupId}/revisions`}ngOnDestroy(){}ngAfterViewInit(){this.revisableFieldsGQL.fetch({variantGroupId:this.variantGroupId}).pipe((0,m.t)(this)).subscribe({next:({data:{variantGroup:y}})=>{y&&(this.model={id:y.id,fields:(0,M.ND)(y)},this.cdr.detectChanges())},error:y=>{console.error("Error retrieving variantgroupItem."),console.error(y)},complete:()=>{this.state.formReady$.next(!0)}})}}).\u0275fac=function(y){return new(y||R)(t.Y36(p.q2A),t.Y36(p.aw3),t.Y36(a.Y),t.Y36(t.sBO))},R.\u0275cmp=t.Xpm({type:R,selectors:[["cvc-variantgroup-revise-form"]],inputs:{variantGroupId:"variantGroupId"},decls:6,vars:5,consts:[["entityType","Variant Group",3,"mutationState","redirectUrl","successMessage"],["success",""],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["loadingModel",""],[3,"href"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[3,"form","fields","model","options","modelChange"]],template:function(y,f){if(1&y&&(t.TgZ(0,"cvc-form-submission-status-display",0),t.YNc(1,S,3,1,"ng-template",null,1,t.W1O)(3,O,2,5,"form",2)(4,T,1,0,"ng-template",null,3,t.W1O),t.qZA()),2&y){const u=t.MAs(2),i=t.MAs(5);t.Q6J("mutationState",f.mutationState)("redirectUrl",f.url)("successMessage",u),t.xp6(3),t.Q6J("ngIf",f.model)("ngIfElse",i)}},dependencies:[n.O5,o.Lr,d._Y,d.JL,d.sg,L.T7,F.F]}),R);I=(0,l.gn)([(0,m.c)()],I)},8597:(D,E,e)=>{e.d(E,{ND:()=>d,Vk:()=>h,t3:()=>M});var l=e(1022);function d(m){return{description:m.description,sourceIds:m.sources.map(c=>c.id),variantIds:m.variants.nodes.map(c=>c.id),name:m.name}}function h(m,c){let _=M(c);if(_)return delete _.organizationId,{id:m,fields:{..._,description:l.xt(_.description)},organizationId:c.organizationId,comment:c.comment}}function M(m){const c=m.fields;if(![c.name,m.comment].find(g=>void 0===g))return{description:c.description,sourceIds:c.sourceIds||[],name:c.name,variantIds:c.variantIds||[],organizationId:m.organizationId}}}}]);