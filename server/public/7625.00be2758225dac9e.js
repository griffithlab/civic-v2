"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[7625],{1218:(A,x,n)=>{n.d(x,{i:()=>p});var _=n(6814),v=n(4190),u=n(5695),i=n(7417),z=n(551),m=n(1855),T=n(2524),S=n(3640),C=n(3146),h=n(5879);let p=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=h.oAB({type:g}),g.\u0275inj=h.cJS({imports:[_.ez,v.Bz,S.mS,u.X,i.$6,z.PV,m.f,T.s,C.C]}),g})()},1106:(A,x,n)=>{n.d(x,{L:()=>l});var _=n(6814),v=n(4190),u=n(5695),i=n(551),z=n(95),m=n(6067),T=n(8125),S=n(2962),C=n(4293),h=n(5879);let p=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[_.ez,S.vh,z.Jb,T.q6,m.X,C.H]}),s})();var g=n(7417);let l=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[_.ez,v.Bz,u.X,i.PV,g.$6,p]}),s})()},7950:(A,x,n)=>{n.d(x,{x:()=>g});var _=n(6814),v=n(366),u=n(5695),i=n(7417),z=n(3396),m=n(1106),T=n(5956),S=n(7528),C=n(6061),h=n(3717),p=n(5879);let g=(()=>{class l{}return l.\u0275fac=function(f){return new(f||l)},l.\u0275mod=p.oAB({type:l}),l.\u0275inj=p.cJS({imports:[_.ez,u.X,i.$6,v.$,C.N,z.Q,m.L,T.U,S.Q,h.M]}),l})()},6282:(A,x,n)=>{n.d(x,{O:()=>j});var _=n(655),v=n(4632),u=n(313),i=n(1791),z=n(5619),m=n(8645),T=n(5676),S=n(7398),C=n(3997),h=n(812),p=n(836),g=n(2181),l=n(3620),s=n(2460),f=n(4223),t=n(5879),O=n(951),y=n(6814),P=n(6223),F=n(4190),U=n(2840),D=n(855),b=n(1958),J=n(2962),L=n(551),B=n(7417),Z=n(9691),I=n(3740),R=n(5695),K=n(6109),W=n(4997),Y=n(9857),V=n(3489),w=n(6753),H=n(4764),M=n(8516),Q=n(9775),N=n(4138),$=n(9773),X=n(2024),q=n(7473),k=n(2669),tt=n(3903),nt=n(824),G=n(2574),et=n(6943),ot=n(5883);function at(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"nz-alert",6),t.NdJ("nzOnClose",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSuccessBannerClose())}),t.qZA()}}function rt(o,a){if(1&o&&t._UZ(0,"cvc-form-errors-alert",7),2&o){const e=t.oxw();t.Q6J("errors",e.errorMessages)}}function ct(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"textarea",8),t.NdJ("ngModelChange",function(r){t.CHM(e);const d=t.oxw();return t.KtG(d.reason=r)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("ngModel",e.reason)}}function lt(o,a){1&o&&t._UZ(0,"nz-option",13)}function st(o,a){1&o&&t._UZ(0,"nz-option",14)}function it(o,a){1&o&&t._UZ(0,"nz-option",15)}function gt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"nz-select",9),t.NdJ("ngModelChange",function(r){t.CHM(e);const d=t.oxw();return t.KtG(d.newStatus=r)}),t.YNc(1,lt,1,0,"nz-option",10),t.YNc(2,st,1,0,"nz-option",11),t.YNc(3,it,1,0,"nz-option",12),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("ngModel",e.newStatus),t.xp6(1),t.Q6J("ngIf","NEW"==e.currentStatus),t.xp6(1),t.Q6J("ngIf","NEW"!=e.currentStatus),t.xp6(1),t.Q6J("ngIf","NEW"==e.currentStatus)}}function ut(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"nz-spin",16)(1,"cvc-form-buttons")(2,"button",17),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.updateSourceSuggestionStatus())}),t._uU(3," Update Source Suggestion status "),t.qZA()()()}if(2&o){const e=t.oxw();t.Q6J("nzSpinning",e.loading),t.xp6(2),t.Q6J("disabled",e.loading)}}let pt=(()=>{class o{constructor(e,c,r){this.viewerService=e,this.networkErrorService=c,this.updateSuggestionStatusGql=r,this.commentAddedEvent=new t.vpe,this.destroy$=new m.x,this.success=!1,this.errorMessages=[],this.loading=!1,this.viewerService.viewer$.pipe((0,$.R)(this.destroy$)).subscribe(d=>{this.organizations=d.organizations,this.mostRecentOrg=d.mostRecentOrg}),this.sourceSuggestionStatusMutator=new X.U(c)}selectOrg(e){this.mostRecentOrg=e}updateSourceSuggestionStatus(){if(this.newStatus){let e=this.sourceSuggestionStatusMutator.mutate(this.updateSuggestionStatusGql,{input:{id:this.sourceSuggestionId,newStatus:this.newStatus,reason:this.reason,organizationId:this.mostRecentOrg?.id}});e.submitSuccess$.pipe((0,$.R)(this.destroy$)).subscribe(c=>{this.resetForm(),this.success=!0}),e.submitError$.pipe((0,$.R)(this.destroy$)).subscribe(c=>{c&&(this.errorMessages=c)}),e.isSubmitting$.pipe((0,$.R)(this.destroy$)).subscribe(c=>{this.loading=c})}}resetForm(){this.commentText=""}onSuccessBannerClose(){this.resetForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(O.a),t.Y36(q.Y),t.Y36(u.wRZ))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-update-source-suggestion-form"]],inputs:{sourceSuggestionId:"sourceSuggestionId",currentStatus:"currentStatus"},outputs:{commentAddedEvent:"commentAddedEvent"},decls:7,vars:2,consts:[["nzDirection","vertical"],["nzBanner","","nzMessage","Status Updated","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],[3,"errors",4,"ngIf"],["rows","4","nz-input","",3,"ngModel","ngModelChange",4,"nzSpaceItem"],["nzPlaceHolder","New Status","required","true",3,"ngModel","ngModelChange",4,"nzSpaceItem"],["nzTip","Submitting",3,"nzSpinning",4,"nzSpaceItem"],["nzBanner","","nzMessage","Status Updated","nzType","success","nzCloseable","",3,"nzOnClose"],[3,"errors"],["rows","4","nz-input","",3,"ngModel","ngModelChange"],["nzPlaceHolder","New Status","required","true",3,"ngModel","ngModelChange"],["nzValue","CURATED","nzLabel","Curated",4,"ngIf"],["nzValue","NEW","nzLabel","New",4,"ngIf"],["nzValue","REJECTED","nzLabel","Rejected",4,"ngIf"],["nzValue","CURATED","nzLabel","Curated"],["nzValue","NEW","nzLabel","New"],["nzValue","REJECTED","nzLabel","Rejected"],["nzTip","Submitting",3,"nzSpinning"],["type","submit","nz-button","","nzType","primary","nzSize","small",3,"disabled","click"]],template:function(e,c){1&e&&(t.TgZ(0,"nz-card")(1,"nz-space",0),t.YNc(2,at,1,0,"nz-alert",1),t.YNc(3,rt,1,1,"cvc-form-errors-alert",2),t.YNc(4,ct,1,1,"textarea",3),t.YNc(5,gt,4,4,"nz-select",4),t.YNc(6,ut,4,2,"nz-spin",5),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngIf",c.success),t.xp6(1),t.Q6J("ngIf",c.errorMessages.length))},dependencies:[y.O5,P.Fj,P.JJ,P.Q7,U.ix,D.w,b.dQ,J.bd,k.W,tt.r,nt.Zp,Z.Ip,Z.Vq,G.NU,G.$1,P.On,et.V,ot.Z],encapsulation:2}),o})();var E,dt=n(356),mt=n(2606),_t=n(8091),vt=n(2616);function Ct(o,a){}function zt(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"nz-card",6),t.YNc(2,Ct,0,0,"ng-template",7),t.qZA(),t.BQk()),2&o){t.oxw();const e=t.MAs(8),c=t.MAs(10),r=t.MAs(4);t.xp6(1),t.Q6J("nzTitle",e)("nzExtra",c),t.xp6(1),t.Q6J("ngTemplateOutlet",r)}}function Tt(o,a){}const ft=function(o){return{height:o}};function ht(o,a){if(1&o&&(t.TgZ(0,"div",8)(1,"nz-card",9),t.YNc(2,Tt,0,0,"ng-template",7),t.qZA()()),2&o){const e=t.oxw(),c=t.MAs(8),r=t.MAs(10),d=t.MAs(4);t.Q6J("ngStyle",t.VKq(4,ft,e.cvcHeight)),t.xp6(1),t.Q6J("nzTitle",c)("nzExtra",r),t.xp6(1),t.Q6J("ngTemplateOutlet",d)}}function St(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"cvc-clearable-input-filter",29),t.NdJ("inputModelChange",function(r){t.CHM(e);const d=t.oxw(2);return t.KtG(d.submitterInput=r)})("inputModelChange",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.filterChange$.next())}),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("inputModel",e.submitterInput)}}function xt(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"nz-tag",51),t._uU(2),t.ALo(3,"lowercase"),t.qZA(),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,e.status)," ")}}function Mt(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"nz-tag",52),t._uU(2),t.ALo(3,"lowercase"),t.qZA(),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,e.status)," ")}}function yt(o,a){if(1&o&&t._UZ(0,"i",55),2&o){const e=t.oxw(2).$implicit,c=t.oxw(2);t.Q6J("nzTooltipTitle",c.isScrolling?"":e.reason)}}function It(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"nz-tag",53),t.YNc(2,yt,1,1,"i",54),t._uU(3),t.ALo(4,"lowercase"),t.qZA(),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",e.reason&&""!=e.reason),t.xp6(1),t.hij(" ",t.lcZ(4,2,e.status)," ")}}function Pt(o,a){if(1&o&&t._UZ(0,"cvc-source-tag",56),2&o){const e=t.oxw().$implicit;t.Q6J("source",e.source)}}function Zt(o,a){if(1&o&&t._UZ(0,"cvc-user-tag",57),2&o){const e=t.oxw().$implicit;t.Q6J("user",e.user)}}function At(o,a){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.source.displayType," ")}}function Ot(o,a){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.source.citationId," ")}}function Et(o,a){if(1&o&&t._UZ(0,"cvc-molecular-profile-tag",58),2&o){const e=t.oxw().$implicit;t.Q6J("molecularProfile",e.molecularProfile)}}function Ut(o,a){if(1&o&&t._UZ(0,"cvc-disease-tag",59),2&o){const e=t.oxw().$implicit;t.Q6J("disease",e.disease)("truncateLongName",!0)}}const Jt=function(o,a,e){return{molecularProfileId:o,sourceId:a,diseaseId:e}};function Qt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"nz-button-group")(1,"button",60),t._UZ(2,"i",61),t.qZA(),t.TgZ(3,"button",62),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.setFormInputs(r.id,r.status))}),t._UZ(4,"i",63),t.qZA()()}if(2&o){const e=t.oxw().$implicit,c=t.oxw(2),r=t.MAs(6);t.xp6(1),t.Q6J("queryParams",t.kEZ(7,Jt,null==e.molecularProfile?null:e.molecularProfile.id,null==e.source?null:e.source.id,null==e.disease?null:e.disease.id))("disabled",e.status!=c.status.New)("nzTooltipTitle",c.isScrolling?"":"Create Evidence with this Source")("nzTooltipMouseEnterDelay",1),t.xp6(2),t.Q6J("nzTooltipTitle",c.isScrolling?"":"Manage Source Suggestion")("nzTooltipMouseEnterDelay",1)("nzPopoverContent",r)}}function Nt(o,a){1&o&&(t.ynx(0),t._uU(1," -- "),t.BQk())}function Dt(o,a){if(1&o&&(t.TgZ(0,"tr",39)(1,"td",40),t.ynx(2,41),t.ALo(3,"lowercase"),t.YNc(4,xt,4,3,"ng-container",42),t.YNc(5,Mt,4,3,"ng-container",42),t.YNc(6,It,5,4,"ng-container",42),t.BQk(),t.qZA(),t.TgZ(7,"td",24),t.YNc(8,Pt,1,1,"cvc-source-tag",43),t.qZA(),t.TgZ(9,"td",44),t._UZ(10,"i",17),t.ALo(11,"entityColor"),t.qZA(),t.TgZ(12,"td"),t.YNc(13,Zt,1,1,"cvc-user-tag",45),t.qZA(),t.TgZ(14,"td"),t.YNc(15,At,2,1,"ng-container",46),t.qZA(),t.TgZ(16,"td"),t.YNc(17,Ot,2,1,"ng-container",46),t.qZA(),t.TgZ(18,"td"),t.YNc(19,Et,1,1,"cvc-molecular-profile-tag",47),t.qZA(),t.TgZ(20,"td"),t.YNc(21,Ut,1,2,"cvc-disease-tag",48),t.qZA(),t.TgZ(22,"td",49),t._uU(23),t.ALo(24,"date"),t.qZA(),t.TgZ(25,"td",50),t.YNc(26,Qt,5,11,"nz-button-group",46),t.YNc(27,Nt,2,0,"ng-container",46),t.qZA()()),2&o){const e=a.$implicit,c=t.oxw(2);t.xp6(2),t.Q6J("ngSwitch",t.lcZ(3,15,e.status)),t.xp6(2),t.Q6J("ngSwitchCase","curated"),t.xp6(1),t.Q6J("ngSwitchCase","new"),t.xp6(1),t.Q6J("ngSwitchCase","rejected"),t.xp6(2),t.Q6J("ngIf",e.source),t.xp6(1),t.Q6J("nzTooltipTitle",c.isScrolling?"":e.initialComment),t.xp6(1),t.Q6J("nzTwotoneColor",t.lcZ(11,17,"Comment")),t.xp6(3),t.Q6J("ngIf",e.user),t.xp6(2),t.Q6J("ngIf",e.source),t.xp6(2),t.Q6J("ngIf",e.source),t.xp6(2),t.Q6J("ngIf",e.molecularProfile),t.xp6(2),t.Q6J("ngIf",e.disease),t.xp6(2),t.hij(" ",t.lcZ(24,19,e.createdAt)," "),t.xp6(3),t.Q6J("ngIf",c.isSignedIn),t.xp6(1),t.Q6J("ngIf",!c.isSignedIn)}}const bt=function(){return[]},$t=function(){return{x:"680px",y:"800px"}},Ft=function(){return["descend","ascend",null]};function Lt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"nz-table",10,11),t.NdJ("cvcTableScrollOnScroll",function(r){t.CHM(e);const d=t.oxw();return t.KtG(d.scrollEvent$.next(r))}),t.ALo(2,"ngrxPush"),t.ALo(3,"ngrxPush"),t.ALo(4,"ngrxPush"),t.ALo(5,"ngrxPush"),t.TgZ(6,"thead",12),t.NdJ("nzSortOrderChange",function(r){t.CHM(e);const d=t.oxw();return t.KtG(d.sortChange$.next(r))}),t.TgZ(7,"tr",13)(8,"th",14),t._uU(9," Status "),t.qZA(),t.TgZ(10,"th",15),t._uU(11," Citation "),t.qZA(),t.TgZ(12,"th",16),t._UZ(13,"i",17),t.ALo(14,"entityColor"),t.qZA(),t.TgZ(15,"th",18),t._uU(16," Submitter "),t.qZA(),t.TgZ(17,"th",19),t._uU(18," Type "),t.qZA(),t.TgZ(19,"th",19),t._uU(20," ID "),t.qZA(),t.TgZ(21,"th",20),t._uU(22,"Molecular Profile"),t.qZA(),t.TgZ(23,"th",18),t._uU(24," Disease "),t.qZA(),t.TgZ(25,"th",21),t._uU(26," Submitted "),t.qZA(),t.TgZ(27,"th",22),t._uU(28," Actions "),t.qZA()(),t.TgZ(29,"tr",23)(30,"th",24)(31,"nz-select",25),t.NdJ("ngModelChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.filterChange$.next())})("ngModelChange",function(r){t.CHM(e);const d=t.oxw();return t.KtG(d.statusInput=r)}),t._UZ(32,"nz-option",26)(33,"nz-option",27)(34,"nz-option",28),t.qZA()(),t.TgZ(35,"th",24)(36,"cvc-clearable-input-filter",29),t.NdJ("inputModelChange",function(r){t.CHM(e);const d=t.oxw();return t.KtG(d.citationInput=r)})("inputModelChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.filterChange$.next())}),t.qZA()(),t._UZ(37,"th"),t.TgZ(38,"th"),t.YNc(39,St,1,1,"cvc-clearable-input-filter",30),t.qZA(),t.TgZ(40,"th")(41,"nz-select",31),t.NdJ("ngModelChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.filterChange$.next())})("ngModelChange",function(r){t.CHM(e);const d=t.oxw();return t.KtG(d.sourceTypeInput=r)}),t._UZ(42,"nz-option",32)(43,"nz-option",33),t.qZA()(),t.TgZ(44,"th")(45,"cvc-clearable-input-filter",34),t.NdJ("inputModelChange",function(r){t.CHM(e);const d=t.oxw();return t.KtG(d.citationIdInput=r)})("inputModelChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.filterChange$.next())}),t.qZA()(),t.TgZ(46,"th")(47,"cvc-clearable-input-filter",35),t.NdJ("inputModelChange",function(r){t.CHM(e);const d=t.oxw();return t.KtG(d.molecularProfileNameInput=r)})("inputModelChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.filterChange$.next())}),t.qZA()(),t.TgZ(48,"th")(49,"cvc-clearable-input-filter",36),t.NdJ("inputModelChange",function(r){t.CHM(e);const d=t.oxw();return t.KtG(d.diseaseNameInput=r)})("inputModelChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.filterChange$.next())}),t.qZA()(),t._UZ(50,"th")(51,"th",37),t.qZA()(),t.TgZ(52,"tbody"),t.YNc(53,Dt,28,21,"ng-template",38),t.qZA()()}if(2&o){const e=t.oxw();t.Q6J("nzData",t.lcZ(2,33,e.row$)||t.DdM(43,bt))("nzLoading",!t.lcZ(3,35,e.row$))("cvcAutoHeightTable",25)("nzVirtualItemSize",29)("cvcTableScrollQueryRef",e.queryRef)("cvcTableScrollPageInfo",t.lcZ(4,37,e.pageInfo$))("cvcTableScrollToIndex",t.lcZ(5,39,e.scrollIndex$))("nzVirtualForTrackBy",e.trackByIndex)("nzScroll",t.DdM(44,$t))("nzFrontPagination",!1)("nzShowPagination",!1),t.xp6(10),t.Q6J("nzColumnKey",e.sortColumns.Citation)("nzSortFn",!0),t.xp6(3),t.Q6J("nzTwotoneColor",t.lcZ(14,41,"Comment")),t.xp6(2),t.Q6J("nzColumnKey",e.sortColumns.Submitter)("nzSortFn",!0),t.xp6(2),t.Q6J("nzColumnKey",e.sortColumns.SourceType)("nzSortFn",!0),t.xp6(2),t.Q6J("nzColumnKey",e.sortColumns.CitationId)("nzSortFn",!0),t.xp6(4),t.Q6J("nzColumnKey",e.sortColumns.DiseaseName)("nzSortFn",!0),t.xp6(2),t.Q6J("nzColumnKey",e.sortColumns.CreatedAt)("nzSortDirections",t.DdM(45,Ft))("nzSortFn",!0),t.xp6(6),t.Q6J("nzDropdownMatchSelectWidth",!1)("ngModel",e.statusInput),t.xp6(5),t.Q6J("inputModel",e.citationInput),t.xp6(3),t.Q6J("ngIf",!e.submitterId),t.xp6(2),t.Q6J("ngModel",e.sourceTypeInput),t.xp6(4),t.Q6J("inputModel",e.citationIdInput),t.xp6(2),t.Q6J("inputModel",e.molecularProfileNameInput),t.xp6(2),t.Q6J("inputModel",e.diseaseNameInput)}}function Bt(o,a){if(1&o&&t._UZ(0,"cvc-update-source-suggestion-form",65),2&o){const e=t.oxw(2);t.Q6J("currentStatus",e.selectedStatus)("sourceSuggestionId",e.selectedSourceId)}}function Rt(o,a){if(1&o&&t.YNc(0,Bt,1,2,"cvc-update-source-suggestion-form",64),2&o){const e=t.oxw();t.Q6J("ngIf",e.selectedSourceId&&e.selectedStatus)}}function Kt(o,a){}function Wt(o,a){if(1&o&&(t.ynx(0),t.YNc(1,Kt,0,0,"ng-template",7),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngTemplateOutlet",e.cvcTitleTemplate)}}function Yt(o,a){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.cvcTitle," ")}}function Vt(o,a){if(1&o&&(t._UZ(0,"i",66),t.ALo(1,"entityColor"),t.YNc(2,Wt,2,1,"ng-container",46),t.YNc(3,Yt,2,1,"ng-container",46),t.TgZ(4,"span",67),t._UZ(5,"cvc-table-counts",68),t.qZA()),2&o){const e=t.oxw();t.Q6J("nzTwotoneColor",t.lcZ(1,4,"Source")),t.xp6(2),t.Q6J("ngIf",e.cvcTitleTemplate),t.xp6(1),t.Q6J("ngIf",e.cvcTitle),t.xp6(2),t.Q6J("cvcTableCountsConnection",e.connection$)}}function wt(o,a){1&o&&(t.TgZ(0,"nz-tag",71),t._UZ(1,"i",72),t.TgZ(2,"span"),t._uU(3,"Loading\u2026"),t.qZA()())}function Ht(o,a){if(1&o&&(t.YNc(0,wt,4,0,"nz-tag",69),t.ALo(1,"ngrxPush"),t._UZ(2,"cvc-no-more-rows",70),t.ALo(3,"ngrxPush")),2&o){const e=t.oxw();t.Q6J("ngIf",t.lcZ(1,2,e.moreLoading$)),t.xp6(2),t.Q6J("cvcShowTag",t.lcZ(3,4,e.noMoreRows$))}}let j=((E=class{set initialUserFilters(a){a&&Object.assign(this,a)}constructor(a,e,c){this.gql=a,this.viewerService=e,this.cdr=c,this.initialPageSize=35,this.isScrolling=!1,this.statusInput=u.F3s.New,this.sortColumns=u.jw9,this.status=u.F3s,this.showManageForm=!1,this.noMoreRows$=new z.X(!1),this.scrollEvent$=new z.X("stop"),this.sortChange$=new m.x,this.filterChange$=new m.x,this.scrollIndex$=new m.x,this.viewerService.viewer$.pipe((0,S.U)(r=>r.signedIn),(0,i.t)(this)).subscribe(r=>this.isSignedIn=r)}ngOnInit(){this.queryRef=this.gql.watch({first:this.initialPageSize,sourceId:this.sourceId,submitterId:this.submitterId,status:this.status.New,sortBy:{column:this.sortColumns.CreatedAt,direction:u.SrV.Desc}}),this.result$=this.queryRef.valueChanges,this.initialLoading$=this.result$.pipe((0,f.j)("loading"),(0,C.x)(),(0,h.o)(a=>!1!==a,!0)),this.moreLoading$=this.result$.pipe((0,f.j)("loading"),(0,C.x)(),(0,p.T)(2)),this.connection$=this.result$.pipe((0,f.j)("data","sourceSuggestions"),(0,g.h)(T.ep)),this.row$=this.connection$.pipe((0,f.j)("edges"),(0,g.h)(T.ep),(0,S.U)(a=>a.map(e=>e.node))),this.pageInfo$=this.connection$.pipe((0,f.j)("pageInfo"),(0,g.h)(T.ep)),this.sortChange$.pipe((0,i.t)(this)).subscribe(a=>{this.queryRef.refetch({sortBy:(0,v._)(a)})}),this.filterChange$.pipe((0,l.b)(500),(0,i.t)(this)).subscribe(()=>{this.refresh()}),this.scrollEvent$.pipe((0,S.U)(a=>"stop"!==a),(0,C.x)(),(0,i.t)(this)).subscribe(a=>{this.isScrolling=a,this.cdr.detectChanges()}),this.scrollEvent$.pipe((0,g.h)(a=>"bottom"===a),(0,s.M)(this.pageInfo$),(0,S.U)(([a,e])=>e),(0,i.t)(this)).subscribe(a=>{a.hasNextPage||(this.noMoreRows$.next(!0),this.cdr.detectChanges(),setInterval(()=>this.noMoreRows$.next(!1)))})}refresh(){this.queryRef.refetch({citationId:this.citationIdInput?+this.citationIdInput:void 0,sourceType:this.sourceTypeInput?this.sourceTypeInput:void 0,sourceId:this.sourceIdInput?+this.sourceIdInput:void 0,molecularProfileName:this.molecularProfileNameInput,diseaseName:this.diseaseNameInput,comment:this.commentInput,submitter:this.submitterInput,citation:this.citationInput,status:this.statusInput?this.statusInput:void 0}).then(()=>this.scrollIndex$.next(0)),this.cdr.detectChanges()}setFormInputs(a,e){this.selectedSourceId=a,this.selectedStatus=e,this.showManageForm=!0}closePopover(){this.showManageForm=!1}trackByIndex(a,e){return e?.id}}).\u0275fac=function(a){return new(a||E)(t.Y36(u.WRV),t.Y36(O.a),t.Y36(t.sBO))},E.\u0275cmp=t.Xpm({type:E,selectors:[["cvc-source-suggestions-table"]],inputs:{cvcHeight:"cvcHeight",sourceId:"sourceId",submitterId:"submitterId",cvcTitleTemplate:"cvcTitleTemplate",cvcTitle:"cvcTitle",initialPageSize:"initialPageSize",initialUserFilters:"initialUserFilters"},decls:11,vars:2,consts:[[4,"ngIf","ngIfElse"],["setHeightCard",""],["table",""],["manageSuggestionTemplate",""],["titleTemplate",""],["extraTemplate",""],["nzSize","small","cvcAutoHeightCard","","cvcAutoHeightTarget","viewport",3,"nzTitle","nzExtra"],[3,"ngTemplateOutlet"],[1,"card-container",3,"ngStyle"],["cvcAutoHeightCard","","nzSize","small",3,"nzTitle","nzExtra"],["nzSize","small","cvcTableScroll","",3,"nzData","nzLoading","cvcAutoHeightTable","nzVirtualItemSize","cvcTableScrollQueryRef","cvcTableScrollPageInfo","cvcTableScrollToIndex","nzVirtualForTrackBy","nzScroll","nzFrontPagination","nzShowPagination","cvcTableScrollOnScroll"],["virtualTable",""],[3,"nzSortOrderChange"],[1,"col-header-row"],["nzWidth","100px","nzLeft",""],["nzWidth","425px","nzLeft","",3,"nzColumnKey","nzSortFn"],["nzWidth","24px","nzAlign","center","nz-tooltip","","nzTooltipTitle","Submitter Comment"],["nz-icon","","nzTheme","twotone","nzType","civic-comment",3,"nzTwotoneColor"],["nzWidth","200px",3,"nzColumnKey","nzSortFn"],["nzWidth","80px",3,"nzColumnKey","nzSortFn"],["nzWidth","290px"],["nzWidth","90px","nzSortOrder","descend",3,"nzColumnKey","nzSortDirections","nzSortFn"],["nzWidth","70px","nzRight","","nzAlign","center"],[1,"filter-row"],["nzLeft",""],["nzAllowClear","","nzSize","small","nzPlaceHolder","Any",3,"nzDropdownMatchSelectWidth","ngModel","ngModelChange"],["nzValue","NEW","nzLabel","new"],["nzValue","CURATED","nzLabel","curated"],["nzValue","REJECTED","nzLabel","rejected"],[3,"inputModel","inputModelChange"],[3,"inputModel","inputModelChange",4,"ngIf"],["nzAllowClear","","nzSize","small","nzPlaceHolder","Any",3,"ngModel","ngModelChange"],["nzValue","PUBMED","nzLabel","PubMed"],["nzValue","ASCO","nzLabel","ASCO"],["placeholderText","ID",3,"inputModel","inputModelChange"],["placeholderText","Molecular Profile",3,"inputModel","inputModelChange"],["placeholderText","Disease",3,"inputModel","inputModelChange"],["nzRight",""],["nz-virtual-scroll",""],[1,"data-row"],["nzLeft","","nzAlign","center"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"source",4,"ngIf"],["nzAlign","center","nz-tooltip","","nzTooltipPlacement","top",3,"nzTooltipTitle"],[3,"user",4,"ngIf"],[4,"ngIf"],[3,"molecularProfile",4,"ngIf"],[3,"disease","truncateLongName",4,"ngIf"],["nzAlign","right"],["nzRight","","nzAlign","center",1,"button-cell"],["nzColor","green",1,"status-tag"],["nzColor","orange",1,"status-tag"],["nzColor","volcano",1,"status-tag"],["nz-icon","","nz-tooltip","","nzType","civic-comment",3,"nzTooltipTitle",4,"ngIf"],["nz-icon","","nz-tooltip","","nzType","civic-comment",3,"nzTooltipTitle"],[3,"source"],[3,"user"],[3,"molecularProfile"],[3,"disease","truncateLongName"],["routerLink","/evidence/add/submit","nz-button","","nzSize","small","nz-tooltip","",3,"queryParams","disabled","nzTooltipTitle","nzTooltipMouseEnterDelay"],["nz-icon","","nzType","civic-evidence"],["nz-button","","nzSize","small","nz-popover","","nzPopoverTitle","Manage Source Suggestion","nzPopoverPlacement","left","nzPopoverTrigger","click","nz-tooltip","","nzTooltipPlacement","top",3,"nzTooltipTitle","nzTooltipMouseEnterDelay","nzPopoverContent","click"],["nz-icon","","nzType","civic-source"],[3,"currentStatus","sourceSuggestionId",4,"ngIf"],[3,"currentStatus","sourceSuggestionId"],["nz-icon","","nzTheme","twotone","nzType","civic-source",3,"nzTwotoneColor"],[1,"table-info"],[3,"cvcTableCountsConnection"],["nzColor","processing",4,"ngIf"],[3,"cvcShowTag"],["nzColor","processing"],["nz-icon","","nzType","sync","nzSpin",""]],template:function(a,e){if(1&a&&(t.YNc(0,zt,3,3,"ng-container",0),t.YNc(1,ht,3,6,"ng-template",null,1,t.W1O),t.YNc(3,Lt,54,46,"ng-template",null,2,t.W1O),t.YNc(5,Rt,1,1,"ng-template",null,3,t.W1O),t.YNc(7,Vt,6,6,"ng-template",null,4,t.W1O),t.YNc(9,Ht,4,6,"ng-template",null,5,t.W1O)),2&a){const c=t.MAs(2);t.Q6J("ngIf",!e.cvcHeight)("ngIfElse",c)}},dependencies:[y.O5,y.tP,y.PC,y.RF,y.n9,P.JJ,P.On,F.rH,U.ix,U.fY,D.w,b.dQ,J.bd,L.Ls,B.lU,Z.Ip,Z.Vq,I.N8,I.qD,I.Uo,I._C,I.Om,I.p0,I.$Z,I.zu,I.qn,I.UX,R.j,K.SY,W.y,Y.B,V.H,w.D,H.q,M.p,Q.n,N.T,pt,dt.I,mt.p,y.i8,y.uU,_t.fM,vt.a],styles:["[_nghost-%COMP%]{display:block}nz-card[_ngcontent-%COMP%]:first-of-type     .ant-card-body{padding:0;margin-top:1px}.table-info[_ngcontent-%COMP%]{margin-left:.5rem}tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]{white-space:nowrap}tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell.align-right[_ngcontent-%COMP%]     .ant-table-column-title{text-align:right}tr.filter-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]{padding:3px 4px}tr.filter-row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   nz-filter-trigger[_ngcontent-%COMP%]     span.ant-dropdown-trigger{margin-left:0;padding-right:12px}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]{white-space:nowrap}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]   .anticon.attribute-icon[_ngcontent-%COMP%]{color:#595959}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell.overflow-ellipsis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell.button-cell[_ngcontent-%COMP%]{padding:0}tr.data-row[_ngcontent-%COMP%]   td.align-right[_ngcontent-%COMP%], tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%], tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%], tr.filter-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%]{text-align:right}.status-tag[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),E);j=(0,_.gn)([(0,i.c)()],j)},7240:(A,x,n)=>{n.d(x,{W:()=>H});var _=n(6814),v=n(6223),u=n(4190),i=n(3396),z=n(8527),m=n(7856),T=n(9154),S=n(2989),C=n(8641),h=n(8706),p=n(2524),g=n(9175),l=n(4742),s=n(9312),f=n(100),t=n(2962),O=n(3599),y=n(6545),P=n(2840),F=n(9382),U=n(2669),D=n(3903),b=n(824),J=n(9691),L=n(9543),B=n(2574),Z=n(5879);let I=(()=>{class M{}return M.\u0275fac=function(N){return new(N||M)},M.\u0275mod=Z.oAB({type:M}),M.\u0275inj=Z.cJS({imports:[_.ez,v.UX,P.sL,t.vh,F.we,O.U5,U.j,D.L,b.o7,J.LV,B.zf,v.u5,f.B,y.R,L.w]}),M})();var R=n(551),K=n(7417),W=n(3740),Y=n(5695),V=n(6109),w=n(2392);let H=(()=>{class M{}return M.\u0275fac=function(N){return new(N||M)},M.\u0275mod=Z.oAB({type:M}),M.\u0275inj=Z.cJS({imports:[_.ez,v.u5,u.Bz,P.sL,t.vh,R.PV,K.$6,J.LV,W.HQ,Y.X,V.cg,w.ZJ,s.w,S.T,T.y,g.n,l.c,m.k,i.Q,f.B,p.s,C.s,I,h.W,z.u]}),M})()},3641:(A,x,n)=>{n.d(x,{G:()=>f});var _=n(6814),v=n(4190),u=n(7417),i=n(5695),z=n(551),m=n(366),T=n(8641),S=n(7528),C=n(2524),h=n(2962),p=n(8125),g=n(5879);let l=(()=>{class t{}return t.\u0275fac=function(y){return new(y||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[_.ez,h.vh,p.q6,z.PV,T.s,S.Q,m.$,C.s]}),t})();var s=n(3146);let f=(()=>{class t{}return t.\u0275fac=function(y){return new(y||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[_.ez,v.Bz,u.$6,i.X,z.PV,l,C.s,s.C]}),t})()},3717:(A,x,n)=>{n.d(x,{M:()=>g});var _=n(6814),v=n(4190),u=n(5695),i=n(2962),z=n(6067),m=n(8125),T=n(551),S=n(2524),C=n(5879);let h=(()=>{class l{}return l.\u0275fac=function(f){return new(f||l)},l.\u0275mod=C.oAB({type:l}),l.\u0275inj=C.cJS({imports:[_.ez,T.PV,i.vh,m.q6,S.s,z.X]}),l})();var p=n(7417);let g=(()=>{class l{}return l.\u0275fac=function(f){return new(f||l)},l.\u0275mod=C.oAB({type:l}),l.\u0275inj=C.cJS({imports:[_.ez,v.Bz,T.PV,u.X,p.$6,h]}),l})()},4010:(A,x,n)=>{n.d(x,{F:()=>u});var v=n(5879);let u=(()=>{class i{transform(m,T="display-string"){return void 0===m?"":"display-string"===T?function _(i){switch(i){case"COMBINATION":return"Combination";case"SEQUENTIAL":return"Sequential";case"SUBSTITUTES":return"Substitutes";default:return i}}(m):`civic-${m.replace(/_/g,"").toLowerCase()}`}}return i.\u0275fac=function(m){return new(m||i)},i.\u0275pipe=v.Yjl({name:"therapyInteractionEnumDisplay",type:i,pure:!0}),i})()},684:(A,x,n)=>{n.d(x,{K:()=>h});var _=n(6814),v=n(5545),u=n(5879),i=n(6223),z=n(824);const T={name:"comment-textarea",component:(()=>{class p extends v.fS{constructor(){super(...arguments),this.defaultOptions={defaultValue:"",validation:{messages:{minlength:(l,s)=>`Comments must be at least ${s.templateOptions?.minLength} characters in length.`}},templateOptions:{rows:4}}}}return p.\u0275fac=function(){let g;return function(s){return(g||(g=u.n5z(p)))(s||p)}}(),p.\u0275cmp=u.Xpm({type:p,selectors:[["comment-textarea-type"]],features:[u.qOj],decls:1,vars:2,consts:[["nz-input","",3,"formControl","formlyAttributes"]],template:function(l,s){1&l&&u._UZ(0,"textarea",0),2&l&&u.Q6J("formControl",s.formControl)("formlyAttributes",s.field)},dependencies:[i.Fj,i.JJ,i.oH,v.JD,z.Zp],encapsulation:2,changeDetection:0}),p})(),wrappers:["form-field"]};var S=n(3599),C=n(7459);let h=(()=>{class p{}return p.\u0275fac=function(l){return new(l||p)},p.\u0275mod=u.oAB({type:p}),p.\u0275inj=u.cJS({imports:[_.ez,i.UX,v.X0.forChild({types:[T]}),C.u,S.U5,z.o7]}),p})()}}]);