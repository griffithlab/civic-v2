"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[2043],{7948:(W,N,e)=>{e.d(N,{m:()=>_});var t=e(5e3),f=e(9808),o=e(125),n=e(3579),y=e(3193),x=e(8664),D=e(112),S=e(9001),M=e(2826),Z=e(5749),I=e(8481),L=e(647);function P(a,u){if(1&a&&(t.ynx(0),t._UZ(1,"span",2),t.BQk()),2&a){const s=t.oxw().$implicit;t.xp6(1),t.Q6J("innerHtml",s.text,t.oJD)}}function A(a,u){if(1&a&&(t.ynx(0),t._UZ(1,"cvc-user-tag",3),t.BQk()),2&a){const s=t.oxw().$implicit;t.xp6(1),t.Q6J("user",s)}}const O=function(a,u,s){return{id:a,name:u,link:s}};function B(a,u){if(1&a&&(t.TgZ(0,"span"),t._UZ(1,"cvc-revision-tag",6),t.qZA()),2&a){const s=t.oxw(2).$implicit;t.xp6(1),t.Q6J("revision",t.kEZ(1,O,s.entityId,s.displayName,s.link))}}function $(a,u){if(1&a&&(t.TgZ(0,"span"),t._UZ(1,"cvc-gene-tag",7),t.qZA()),2&a){const s=t.oxw(2).$implicit;t.xp6(1),t.Q6J("gene",t.kEZ(1,O,s.entityId,s.displayName,s.link))}}function Q(a,u){if(1&a&&(t.TgZ(0,"span"),t._UZ(1,"cvc-variant-tag",8),t.qZA()),2&a){const s=t.oxw(2).$implicit;t.xp6(1),t.Q6J("variant",t.kEZ(1,O,s.entityId,s.displayName,s.link))}}function U(a,u){if(1&a&&(t.TgZ(0,"span"),t._UZ(1,"cvc-variant-group-tag",9),t.qZA()),2&a){const s=t.oxw(2).$implicit;t.xp6(1),t.Q6J("variantgroup",t.kEZ(1,O,s.entityId,s.displayName,s.link))}}const E=function(a,u,s,J){return{id:a,name:u,status:s,link:J}};function v(a,u){if(1&a&&(t.TgZ(0,"span"),t._UZ(1,"cvc-evidence-tag",10),t.qZA()),2&a){const s=t.oxw(2).$implicit;t.xp6(1),t.Q6J("evidence",t.l5B(1,E,s.entityId,s.displayName,s.status,s.link))}}function T(a,u){if(1&a&&(t.TgZ(0,"span"),t._UZ(1,"cvc-assertion-tag",11),t.qZA()),2&a){const s=t.oxw(2).$implicit;t.xp6(1),t.Q6J("assertion",t.l5B(1,E,s.entityId,s.displayName,s.status,s.link))}}const l=function(a,u){return{id:a,name:u}};function p(a,u){if(1&a&&(t.TgZ(0,"span"),t._UZ(1,"cvc-organization-tag",12),t.qZA()),2&a){const s=t.oxw(2).$implicit;t.xp6(1),t.Q6J("org",t.WLB(1,l,s.entityId,s.displayName))}}function z(a,u){if(1&a&&(t.TgZ(0,"span"),t.TgZ(1,"nz-tag"),t._UZ(2,"i",13),t._uU(3),t.qZA(),t.qZA()),2&a){const s=t.oxw(2).$implicit;t.xp6(2),t.MGl("nzType","civic-",s.displayName.slice(0,-1),""),t.xp6(1),t.hij(" ",s.displayName,"")}}function m(a,u){if(1&a&&(t.ynx(0),t.ynx(1,4),t.YNc(2,B,2,5,"span",5),t.YNc(3,$,2,5,"span",5),t.YNc(4,Q,2,5,"span",5),t.YNc(5,U,2,5,"span",5),t.YNc(6,v,2,6,"span",5),t.YNc(7,T,2,6,"span",5),t.YNc(8,p,2,4,"span",5),t.YNc(9,z,4,2,"span",5),t.BQk(),t.BQk()),2&a){const s=t.oxw().$implicit;t.xp6(1),t.Q6J("ngSwitch",s.tagType),t.xp6(1),t.Q6J("ngSwitchCase","REVISION"),t.xp6(1),t.Q6J("ngSwitchCase","GENE"),t.xp6(1),t.Q6J("ngSwitchCase","VARIANT"),t.xp6(1),t.Q6J("ngSwitchCase","VARIANT_GROUP"),t.xp6(1),t.Q6J("ngSwitchCase","EVIDENCE_ITEM"),t.xp6(1),t.Q6J("ngSwitchCase","ASSERTION"),t.xp6(1),t.Q6J("ngSwitchCase","ORGANIZATION"),t.xp6(1),t.Q6J("ngSwitchCase","ROLE")}}function C(a,u){if(1&a&&(t.ynx(0),t.YNc(1,P,2,1,"ng-container",1),t.YNc(2,A,2,1,"ng-container",1),t.YNc(3,m,10,9,"ng-container",1),t.BQk()),2&a){const s=u.$implicit;t.xp6(1),t.Q6J("ngIf","CommentTextSegment"==s.__typename),t.xp6(1),t.Q6J("ngIf","User"==s.__typename),t.xp6(1),t.Q6J("ngIf","CommentTagSegment"==s.__typename)}}let _=(()=>{class a{ngOnInit(){if(void 0===this.commentBodySegments)throw new Error("Must pass a list of comment body segments into comment body component.")}}return a.\u0275fac=function(s){return new(s||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["cvc-comment-body"]],inputs:{commentBodySegments:"commentBodySegments"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"innerHtml"],[3,"user"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"revision"],[3,"gene"],[3,"variant"],[3,"variantgroup"],[3,"evidence"],[3,"assertion"],[3,"org"],["nz-icon","","nzTheme","twotone","nzTwotoneColor","#A0D8F5",3,"nzType"]],template:function(s,J){1&s&&t.YNc(0,C,4,3,"ng-container",0),2&s&&t.Q6J("ngForOf",J.commentBodySegments)},directives:[f.sg,f.O5,o.I,f.RF,f.n9,n.p,y.H,x.I,D.u,S.O,M.w,Z.m,I.j,L.Ls],styles:[""]}),a})()},3801:(W,N,e)=>{e.d(N,{D:()=>ln});var t=e(712),f=e(4850),o=e(373),n=e(5e3),y=e(9808),x=e(1894),D=e(8144),S=e(7484),M=e(3762),Z=e(6042),I=e(2683),L=e(1344),P=e(6699),A=e(7948),O=e(8625);function B(c,d){if(1&c&&n._UZ(0,"nz-avatar",4),2&c){const i=n.oxw();n.Q6J("nzSrc",i.comment.commenter.profileImagePath)}}function $(c,d){1&c&&n._UZ(0,"nz-avatar",5)}let Q=(()=>{class c{ngOnInit(){if(void 0===this.comment)throw new Error("Must pass a comment into comment display component.")}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=n.Xpm({type:c,selectors:[["cvc-comment-display"]],inputs:{comment:"comment"},decls:7,vars:7,consts:[[3,"nzAuthor","nzDatetime"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],[3,"commentBodySegments"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","","nzIcon","civic:curator"]],template:function(i,r){if(1&i&&(n.TgZ(0,"nz-comment",0),n.ALo(1,"timeago"),n.YNc(2,B,1,1,"nz-avatar",1),n.YNc(3,$,1,0,"ng-template",null,2,n.W1O),n.TgZ(5,"nz-comment-content"),n._UZ(6,"cvc-comment-body",3),n.qZA(),n.qZA()),2&i){const g=n.MAs(4);n.Q6J("nzAuthor",r.comment.commenter.displayName)("nzDatetime",n.lcZ(1,5,r.comment.createdAt)),n.xp6(2),n.Q6J("ngIf",r.comment.commenter.profileImagePath)("ngIfElse",g),n.xp6(4),n.Q6J("commentBodySegments",r.comment.parsedComment)}},directives:[L.WE,y.O5,P.Dz,L.DA,L.Y4,A.m],pipes:[O.wr],styles:[""]}),c})();var U=e(8929),E=e(7625),v=e(6123),T=e(9350),l=e(9169),p=e(2359),z=e(3075),m=e(4546),C=e(822),_=e(9383),a=e(7525),u=e(9180),s=e(8227),J=e(2643),h=e(1793);function F(c,d){if(1&c){const i=n.EpF();n.TgZ(0,"nz-alert",7),n.NdJ("nzOnClose",function(){return n.CHM(i),n.oxw().onSuccessBannerClose()}),n.qZA()}}function Y(c,d){if(1&c&&(n.TgZ(0,"nz-form-item"),n._UZ(1,"cvc-form-errors-alert",8),n.qZA()),2&c){const i=n.oxw();n.xp6(1),n.Q6J("errors",i.errorMessages)}}let w=(()=>{class c{constructor(i,r,g){this.viewerService=i,this.addCommentGql=r,this.networkErrorService=g,this.commentAddedEvent=new n.vpe,this.destroy$=new U.xQ,this.success=!1,this.errorMessages=[],this.loading=!1,this.viewerService.viewer$.pipe((0,E.R)(this.destroy$)).subscribe(R=>{this.organizations=R.organizations,this.mostRecentOrg=R.mostRecentOrg}),this.addCommentMutator=new v.U(g)}selectOrg(i){this.mostRecentOrg=i}submitComment(){if(this.commentText){this.errorMessages=[];let r=this.addCommentMutator.mutate(this.addCommentGql,{input:{body:this.commentText,subject:this.subject,organizationId:void 0===this.mostRecentOrg?void 0:this.mostRecentOrg.id}});r.submitSuccess$.pipe((0,E.R)(this.destroy$)).subscribe(g=>{g&&(this.resetForm(),this.success=!0)}),r.submitError$.pipe((0,E.R)(this.destroy$)).subscribe(g=>{g&&(this.errorMessages=g,this.success=!1)}),r.isSubmitting$.pipe((0,E.R)(this.destroy$)).subscribe(g=>{this.loading=g})}}resetForm(){this.commentText="",this.commentAddedEvent.emit()}onSuccessBannerClose(){this.resetForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return c.\u0275fac=function(i){return new(i||c)(n.Y36(T.a),n.Y36(t.iGM),n.Y36(l.Y))},c.\u0275cmp=n.Xpm({type:c,selectors:[["cvc-comment-add-form"]],inputs:{subject:"subject"},outputs:{commentAddedEvent:"commentAddedEvent"},decls:12,vars:6,consts:[["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[4,"ngIf"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[3,"selectedOrg","selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"],["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose"],[3,"errors"]],template:function(i,r){1&i&&(n.TgZ(0,"nz-card"),n.YNc(1,F,1,0,"nz-alert",0),n.TgZ(2,"form",1),n.NdJ("ngSubmit",function(){return r.submitComment()}),n.YNc(3,Y,2,1,"nz-form-item",2),n.TgZ(4,"cvc-comment-input-form",3),n.NdJ("commentChange",function(R){return r.commentText=R}),n.qZA(),n.TgZ(5,"nz-spin",4),n.TgZ(6,"nz-form-item"),n.TgZ(7,"nz-form-control"),n.TgZ(8,"cvc-form-buttons"),n.TgZ(9,"cvc-org-selector-btn-group",5),n.NdJ("selectedOrgChange",function(R){return r.mostRecentOrg=R}),n.TgZ(10,"button",6),n._uU(11," Add Comment "),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&i&&(n.xp6(1),n.Q6J("ngIf",r.success),n.xp6(2),n.Q6J("ngIf",r.errorMessages.length>0),n.xp6(1),n.Q6J("comment",r.commentText),n.xp6(1),n.Q6J("nzSpinning",r.loading),n.xp6(4),n.Q6J("selectedOrg",r.mostRecentOrg),n.xp6(1),n.Q6J("disabled",r.loading||!(void 0!==r.commentText&&r.commentText.length>=10)))},directives:[S.bd,y.O5,p.r,z._Y,z.JL,z.F,m.Lr,x.SK,m.Nx,C.V,_.b,a.W,x.t3,m.Fd,u.Z,s.q,Z.ix,J.dQ,h.m,I.w],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2}),c})();var K=e(8747),G=e(647),H=e(6949),j=e(9058);function V(c,d){if(1&c){const i=n.EpF();n.TgZ(0,"div",18),n.TgZ(1,"button",19),n.NdJ("click",function(){n.CHM(i);const g=n.oxw().ngIf;return n.oxw(3).onLoadMore(g.startCursor)}),n._uU(2,"Load older comments "),n.qZA(),n.qZA()}}function b(c,d){if(1&c&&(n.TgZ(0,"nz-list-header"),n.YNc(1,V,3,0,"div",17),n.qZA()),2&c){const i=d.ngIf;n.xp6(1),n.Q6J("ngIf",i.hasPreviousPage)}}function X(c,d){if(1&c&&(n.TgZ(0,"nz-list-item"),n._UZ(1,"cvc-comment-display",20),n.qZA()),2&c){const i=d.$implicit;n.xp6(1),n.Q6J("comment",i)}}function q(c,d){if(1&c&&(n.TgZ(0,"nz-card",13),n.TgZ(1,"nz-list",14),n.ALo(2,"ngrxPush"),n.ALo(3,"ngrxPush"),n.YNc(4,b,2,1,"nz-list-header",15),n.ALo(5,"ngrxPush"),n.YNc(6,X,2,1,"ng-template",null,16,n.W1O),n.qZA(),n.qZA()),2&c){const i=n.MAs(7),r=n.oxw(2);n.xp6(1),n.Q6J("nzDataSource",n.lcZ(2,4,r.comments$))("nzLoading",n.lcZ(3,6,r.loading$))("nzRenderItem",i),n.xp6(3),n.Q6J("ngIf",n.lcZ(5,8,r.pageInfo$))}}function k(c,d){if(1&c){const i=n.EpF();n.TgZ(0,"cvc-comment-add-form",21),n.NdJ("commentAddedEvent",function(){return n.CHM(i),n.oxw(2).refreshList()}),n.qZA()}if(2&c){const i=n.oxw(2);n.Q6J("subject",i.commentable)}}function nn(c,d){if(1&c&&n._UZ(0,"nz-avatar",24),2&c){const i=n.oxw().$implicit;n.Q6J("nzSrc",i.profileImagePath)}}function tn(c,d){if(1&c&&(n._UZ(0,"nz-avatar",25),n.ALo(1,"uppercase")),2&c){const i=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,i.displayName.charAt(0)))}}function en(c,d){if(1&c&&(n.YNc(0,nn,1,1,"nz-avatar",22),n.YNc(1,tn,2,3,"ng-template",null,23,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&c){const i=d.$implicit,r=n.MAs(2);n.Q6J("ngIf",i.profileImagePath)("ngIfElse",r),n.xp6(4),n.Oqu(i.displayName)}}function on(c,d){if(1&c&&n._UZ(0,"nz-avatar",24),2&c){const i=n.oxw().$implicit;n.Q6J("nzSrc",i.profileImagePath)}}function mn(c,d){if(1&c&&(n._UZ(0,"nz-avatar",25),n.ALo(1,"uppercase")),2&c){const i=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,i.displayName.charAt(0)))}}function cn(c,d){if(1&c&&(n.YNc(0,on,1,1,"nz-avatar",22),n.YNc(1,mn,2,3,"ng-template",null,23,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&c){const i=d.$implicit,r=n.MAs(2);n.Q6J("ngIf",i.profileImagePath)("ngIfElse",r),n.xp6(4),n.Oqu(i.displayName)}}function an(c,d){if(1&c&&(n._UZ(0,"nz-avatar",26),n.TgZ(1,"span"),n._uU(2),n.qZA()),2&c){const i=d.$implicit;n.MGl("nzIcon","civic-",i.tag.displayName,""),n.xp6(2),n.hij("",i.tag.displayName,"s")}}function sn(c,d){if(1&c&&(n._UZ(0,"i",27),n.ALo(1,"iconNameForSubscribableEntity"),n.TgZ(2,"span"),n._uU(3),n.qZA()),2&c){const i=d.$implicit;n.Q6J("nzType",n.lcZ(1,2,i.tag.tagType)),n.xp6(3),n.Oqu(i.tag.displayName)}}function rn(c,d){if(1&c){const i=n.EpF();n.ynx(0),n.TgZ(1,"nz-row",2),n.TgZ(2,"nz-col",3),n.TgZ(3,"nz-space",4),n.YNc(4,q,8,10,"nz-card",5),n.YNc(5,k,1,1,"cvc-comment-add-form",6),n.qZA(),n.qZA(),n.TgZ(6,"nz-col",7),n.TgZ(7,"cvc-participant-list",8),n.NdJ("participantSelectedEvent",function(g){return n.CHM(i),n.oxw().onCommenterSelected(g)}),n.ALo(8,"ngrxPush"),n.YNc(9,en,5,3,"ng-template",null,9,n.W1O),n.qZA(),n.TgZ(11,"cvc-participant-list",10),n.NdJ("participantSelectedEvent",function(g){return n.CHM(i),n.oxw().onMentionedUserSelected(g)}),n.ALo(12,"ngrxPush"),n.YNc(13,cn,5,3,"ng-template",null,9,n.W1O),n.qZA(),n.TgZ(15,"cvc-participant-list",11),n.NdJ("participantSelectedEvent",function(g){return n.CHM(i),n.oxw().onMentionedRoleSelected(g)}),n.ALo(16,"ngrxPush"),n.YNc(17,an,3,2,"ng-template",null,9,n.W1O),n.qZA(),n.TgZ(19,"cvc-participant-list",12),n.NdJ("participantSelectedEvent",function(g){return n.CHM(i),n.oxw().onMentionedEntitySelected(g)}),n.ALo(20,"ngrxPush"),n.YNc(21,sn,4,4,"ng-template",null,9,n.W1O),n.qZA(),n.qZA(),n.qZA(),n.BQk()}if(2&c){const i=n.oxw();n.xp6(1),n.Q6J("nzGutter",16),n.xp6(6),n.Q6J("participantList",n.lcZ(8,5,i.commenters$)),n.xp6(4),n.Q6J("participantList",n.lcZ(12,7,i.mentionedUsers$)),n.xp6(4),n.Q6J("participantList",n.lcZ(16,9,i.mentionedRoles$)),n.xp6(4),n.Q6J("participantList",n.lcZ(20,11,i.mentionedEntities$))}}function _n(c,d){if(1&c){const i=n.EpF();n.TgZ(0,"cvc-comment-add-form",21),n.NdJ("commentAddedEvent",function(){return n.CHM(i),n.oxw().refreshList()}),n.qZA()}if(2&c){const i=n.oxw();n.Q6J("subject",i.commentable)}}let ln=(()=>{class c{constructor(i){this.gql=i,this.pageSize=5}ngOnInit(){this.queryRef$=this.gql.watch({subject:this.commentable,last:this.pageSize,sortBy:{column:t.h01.Created,direction:t.SrV.Asc}});let i=this.queryRef$.valueChanges;this.pageInfo$=i.pipe((0,f.U)(({data:r})=>r.comments.pageInfo)),this.loading$=i.pipe((0,f.U)(({loading:r})=>r)),this.comments$=i.pipe((0,f.U)(({data:r})=>r.comments.edges.map(g=>g.node))),this.commenters$=i.pipe((0,f.U)(({data:r})=>r.comments.uniqueCommenters)),this.mentionedUsers$=i.pipe((0,f.U)(({data:r})=>r.comments.mentionedUsers)),this.mentionedRoles$=i.pipe((0,f.U)(({data:r})=>r.comments.mentionedRoles.map(g=>({id:`${g.entityId}-${g.tagType}`,tag:g})))),this.mentionedEntities$=i.pipe((0,f.U)(({data:r})=>r.comments.mentionedEntities.map(g=>({id:`${g.entityId}-${g.tagType}`,tag:g})))),this.unfilteredCount$=i.pipe((0,o.j)("data","comments","unfilteredCountForSubject"))}onLoadMore(i){this.queryRef$.fetchMore({variables:{last:this.pageSize,before:i}})}onCommenterSelected(i){this.queryRef$.refetch({originatingUserId:null==i?void 0:i.id})}onMentionedUserSelected(i){this.queryRef$.refetch({mentionedUserId:null==i?void 0:i.id})}onMentionedRoleSelected(i){if(i){let r=t.i44[i.tag.displayName[0].toUpperCase()+i.tag.displayName.slice(1)];this.queryRef$.refetch({mentionedRole:r})}else this.queryRef$.refetch({mentionedRole:void 0})}onMentionedEntitySelected(i){this.queryRef$.refetch(i?{mentionedEntity:{entityType:i.tag.tagType,id:i.tag.entityId}}:{mentionedEntity:void 0})}refreshList(){this.queryRef$.refetch()}}return c.\u0275fac=function(i){return new(i||c)(n.Y36(t.iST))},c.\u0275cmp=n.Xpm({type:c,selectors:[["cvc-comment-list"]],inputs:{commentable:"commentable"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noComments",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical",2,"width","100%"],["nzTitle","Comments",4,"nzSpaceItem"],["id","addComment",3,"subject","commentAddedEvent",4,"nzSpaceItem"],["nzSpan","6"],["listTitle","Commenters",3,"participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Mentioned Users",3,"participantList","participantSelectedEvent"],["listTitle","Mentioned Roles",3,"participantList","participantSelectedEvent"],["listTitle","Mentioned Entities",3,"participantList","participantSelectedEvent"],["nzTitle","Comments"],["nzSize","small","nzItemLayout","horizontal",3,"nzDataSource","nzLoading","nzRenderItem"],[4,"ngIf"],["comment",""],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","link","nzSize","small","nzBlock","",3,"click"],[3,"comment"],["id","addComment",3,"subject","commentAddedEvent"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],[3,"nzIcon"],["nz-icon","",3,"nzType"]],template:function(i,r){if(1&i&&(n.YNc(0,rn,23,13,"ng-container",0),n.ALo(1,"ngrxPush"),n.YNc(2,_n,1,1,"ng-template",null,1,n.W1O)),2&i){const g=n.MAs(3);n.Q6J("ngIf",n.lcZ(1,2,r.unfilteredCount$))("ngIfElse",g)}},directives:[y.O5,x.SK,x.t3,D.NU,D.$1,S.bd,M.n_,M.t4,Z.ix,I.w,M.AA,Q,w,K.l,P.Dz,G.Ls],pipes:[H.fM,y.gd,j.j],styles:["[_nghost-%COMP%]{display:block}nz-list-header[_ngcontent-%COMP%]{padding:0;margin:0}nz-list-header[_ngcontent-%COMP%]   [nz-list-load-more][_ngcontent-%COMP%]{margin-top:-.5em;padding-bottom:.5em}"]}),c})()},2278:(W,N,e)=>{e.d(N,{l:()=>J});var t=e(9808),f=e(1894),o=e(7484),n=e(3762),y=e(6699),x=e(8144),D=e(6949),S=e(6559),M=e(1150),Z=e(1344),I=e(8625),L=e(7026),P=e(8909),A=e(5e3);let O=(()=>{class h{}return h.\u0275fac=function(Y){return new(Y||h)},h.\u0275mod=A.oAB({type:h}),h.\u0275inj=A.cJS({imports:[[t.ez,Z.YM,y.Rt,I.$L.forChild({formatter:{useClass:L.x,provide:I.KP}}),P.m]]}),h})();var B=e(3075),$=e(8776),Q=e(4546),U=e(7008),E=e(1825),v=e(4375),T=e(6042),l=e(4623),p=e(868),z=e(7525),m=e(4921),C=e(4509),_=e(2359);let a=(()=>{class h{}return h.\u0275fac=function(Y){return new(Y||h)},h.\u0275mod=A.oAB({type:h}),h.\u0275inj=A.cJS({imports:[[t.ez,B.UX,D.WG,T.sL,o.vh,p.we,Q.U5,z.j,m.Gl,_.L,B.u5,$.X0,U.B,E.A,v.R,P.m,l.K,C.w]]}),h})();var u=e(647),s=e(9444);let J=(()=>{class h{}return h.\u0275fac=function(Y){return new(Y||h)},h.\u0275mod=A.oAB({type:h}),h.\u0275inj=A.cJS({imports:[[t.ez,D.WG,T.sL,f.Jb,o.vh,n.Ph,u.PV,s.s,y.Rt,x.zf,S.H0,a,M.N,O]]}),h})()},9058:(W,N,e)=>{e.d(N,{j:()=>o});var t=e(712),f=e(5e3);let o=(()=>{class n{transform(x){switch(x){case"ASSERTION":case"Assertion":case t.o71.Assertion:return"civic:assertion";case"EVIDENCE_ITEM":case"EvidenceItem":case t.o71.EvidenceItem:return"civic:evidence";case"GENE":case"Gene":case t.o71.Gene:return"civic:gene";case t.o71.Revision:case"REVISION":case"Revision":return"civic:revision";case t.o71.Variant:case"VARIANT":case"Variant":return"civic:variant";case t.o71.VariantGroup:case"VARIANT_GROUP":case"VariantGroup":return"civic:variant-group";default:return console.log("String No icon name found for "+x),"border-outer"}}}return n.\u0275fac=function(x){return new(x||n)},n.\u0275pipe=f.Yjl({name:"iconNameForSubscribableEntity",type:n,pure:!0}),n})()},9383:(W,N,e)=>{e.d(N,{b:()=>E});var t=e(5e3),f=e(8929),o=e(712),n=e(4850),y=e(7625),x=e(1059),D=e(9350),S=e(6949),M=e(868),Z=e(4921),I=e(3075),L=e(9808),P=e(7525),A=e(7948);function O(v,T){if(1&v&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.BQk()),2&v){const l=T.$implicit;t.xp6(2),t.Oqu(l.displayName)}}function B(v,T){1&v&&(t.ynx(0),t._UZ(1,"nz-spin",8),t.BQk())}function $(v,T){if(1&v&&(t.ynx(0),t._UZ(1,"cvc-comment-body",9),t.BQk()),2&v){const l=T.ngIf;t.xp6(1),t.Q6J("commentBodySegments",l)}}const Q=function(){return["#","@","$"]};function U(v,T){if(1&v){const l=t.EpF();t.ynx(0),t.TgZ(1,"nz-tabset",1),t.TgZ(2,"nz-tab",2),t.TgZ(3,"nz-mention",3),t.NdJ("nzOnSearchChange",function(z){return t.CHM(l),t.oxw().onSearchChange(z)})("nzOnSelect",function(){return t.CHM(l),t.oxw().suggestions=[]}),t.TgZ(4,"textarea",4),t.NdJ("ngModelChange",function(z){return t.CHM(l),t.oxw().commentText=z})("ngModelChange",function(z){return t.CHM(l),t.oxw().onCommentChanged(z)}),t.qZA(),t.YNc(5,O,3,1,"ng-container",5),t.qZA(),t.qZA(),t.TgZ(6,"nz-tab",6),t.NdJ("nzClick",function(){return t.CHM(l),t.oxw().onPreviewButtonClicked()}),t.YNc(7,B,2,0,"ng-container",7),t.ALo(8,"ngrxPush"),t.YNc(9,$,2,1,"ng-container",7),t.ALo(10,"ngrxPush"),t.qZA(),t.qZA(),t.BQk()}if(2&v){const l=T.ngrxLet,p=t.oxw();t.xp6(1),t.Q6J("nzAnimated",!1),t.xp6(2),t.Q6J("nzSuggestions",p.suggestions)("nzPrefix",t.DdM(13,Q))("nzValueWith",p.autoCompleteValueFor),t.xp6(1),t.Q6J("placeholder",l&&l.canCurate?"Enter comment (minimum length 10. Use @ to mention users; # to link entities)":"Please sign in")("ngModel",p.commentText),t.uIk("disabled",!l||!l.canCurate||null),t.xp6(3),t.Q6J("ngIf",t.lcZ(8,9,p.previewLoading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(10,11,p.previewComment$))}}let E=(()=>{class v{constructor(l,p,z,m){this.previewCommentGql=l,this.userTypeaheadGql=p,this.entityTypeaheadGql=z,this.viewerService=m,this.commentChange=new t.vpe,this.destroy$=new f.xQ,this.suggestions=[],this.roleSuggestions=[{displayName:"admins",value:"admins"},{displayName:"editors",value:"editors"}]}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.commentText=this.comment,this.userTypeaheadQueryRef$=this.userTypeaheadGql.watch({queryTerm:""}),this.userTypeaheadQueryRef$.valueChanges.pipe((0,n.U)(({data:l})=>l.userTypeahead),(0,y.R)(this.destroy$)).subscribe(l=>this.suggestions=l.map(p=>({displayName:p.username,value:p.username}))),this.entityTypeaheadQueryRef$=this.entityTypeaheadGql.watch({queryTerm:""}),this.entityTypeaheadQueryRef$.valueChanges.pipe((0,n.U)(({data:l})=>l.entityTypeahead),(0,y.R)(this.destroy$)).subscribe(l=>this.suggestions=l.map(p=>({displayName:p.displayName,value:this.tagForEntityTypeAndId(p.tagType,p.entityId)})))}ngOnChanges(){this.commentText=this.comment}autoCompleteValueFor(l){return l.value}tagForEntityTypeAndId(l,p){switch(l){case o.mpB.Gene:return`GID${p}`;case o.mpB.Variant:return`VID${p}`;case o.mpB.VariantGroup:return`VGID${p}`;case o.mpB.EvidenceItem:return`EID${p}`;case o.mpB.Assertion:return`AID${p}`;case o.mpB.Revision:return`RID${p}`;case o.mpB.Role:return Object.keys(o.i44)[p]}}resetForm(){this.commentText=""}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreviewButtonClicked(){this.commentText&&(this.previewComment$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,n.U)(({data:l})=>l.previewCommentText)),this.previewLoading$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,n.U)(({loading:l})=>l),(0,x.O)(!0)))}onSearchChange({value:l,prefix:p}){"@"===p?this.userTypeaheadQueryRef$.refetch({queryTerm:l}):"$"==p?this.suggestions=this.roleSuggestions.filter(z=>z.value.startsWith(l)):this.entityTypeaheadQueryRef$.refetch({queryTerm:l})}onCommentChanged(l){this.commentChange.emit(l)}}return v.\u0275fac=function(l){return new(l||v)(t.Y36(o.mII),t.Y36(o.vMt),t.Y36(o.GYx),t.Y36(D.a))},v.\u0275cmp=t.Xpm({type:v,selectors:[["cvc-comment-input-form"]],inputs:{comment:"comment"},outputs:{commentChange:"commentChange"},features:[t.TTD],decls:1,vars:1,consts:[[4,"ngrxLet"],[3,"nzAnimated"],["nzTitle","Write"],["nzNotFoundContent","No matches...",3,"nzSuggestions","nzPrefix","nzValueWith","nzOnSearchChange","nzOnSelect"],["nzMentionTrigger","","nz-input","","rows","4",2,"width","100%",3,"placeholder","ngModel","ngModelChange"],[4,"nzMentionSuggestion"],["nzTitle","Preview",3,"nzClick"],[4,"ngIf"],["nzTip","Loading..."],[3,"commentBodySegments"]],template:function(l,p){1&l&&t.YNc(0,U,11,14,"ng-container",0),2&l&&t.Q6J("ngrxLet",p.viewer$)},directives:[S.eJ,M.xH,M.xw,Z.YW,Z.jO,I.Fj,I.JJ,I.On,Z.O3,L.O5,P.W,A.m],pipes:[S.fM],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2}),v})()},1344:(W,N,e)=>{e.d(N,{DA:()=>U,WE:()=>l,Y4:()=>E,YM:()=>z});var t=e(226),f=e(9808),o=e(5e3),n=e(969),y=e(7429),x=e(8929),D=e(7625);function S(m,C){1&m&&o.Hsn(0)}const M=["*"];function Z(m,C){if(1&m&&(o.ynx(0),o._uU(1),o.BQk()),2&m){const _=o.oxw(2);o.xp6(1),o.Oqu(_.nzAuthor)}}function I(m,C){if(1&m&&(o.TgZ(0,"span",8),o.YNc(1,Z,2,1,"ng-container",9),o.qZA()),2&m){const _=o.oxw();o.xp6(1),o.Q6J("nzStringTemplateOutlet",_.nzAuthor)}}function L(m,C){if(1&m&&(o.ynx(0),o._uU(1),o.BQk()),2&m){const _=o.oxw(2);o.xp6(1),o.Oqu(_.nzDatetime)}}function P(m,C){if(1&m&&(o.TgZ(0,"span",10),o.YNc(1,L,2,1,"ng-container",9),o.qZA()),2&m){const _=o.oxw();o.xp6(1),o.Q6J("nzStringTemplateOutlet",_.nzDatetime)}}function A(m,C){}function O(m,C){if(1&m&&(o.TgZ(0,"li"),o.TgZ(1,"span"),o.YNc(2,A,0,0,"ng-template",13),o.qZA(),o.qZA()),2&m){const _=C.$implicit;o.xp6(2),o.Q6J("nzCommentActionHost",_.content)}}function B(m,C){if(1&m&&(o.TgZ(0,"ul",11),o.YNc(1,O,3,1,"li",12),o.qZA()),2&m){const _=o.oxw();o.xp6(1),o.Q6J("ngForOf",_.actions)}}const $=[[["nz-avatar","nz-comment-avatar",""]],[["nz-comment-content"]],"*"],Q=["nz-avatar[nz-comment-avatar]","nz-comment-content","*"];let U=(()=>{class m{}return m.\u0275fac=function(_){return new(_||m)},m.\u0275dir=o.lG2({type:m,selectors:[["nz-avatar","nz-comment-avatar",""]],exportAs:["nzCommentAvatar"]}),m})(),E=(()=>{class m{}return m.\u0275fac=function(_){return new(_||m)},m.\u0275dir=o.lG2({type:m,selectors:[["nz-comment-content"],["","nz-comment-content",""]],hostAttrs:[1,"ant-comment-content-detail"],exportAs:["nzCommentContent"]}),m})(),v=(()=>{class m extends y.Pl{constructor(_,a){super(_,a)}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}ngAfterViewInit(){this.attach(this.nzCommentActionHost)}}return m.\u0275fac=function(_){return new(_||m)(o.Y36(o._Vd),o.Y36(o.s_b))},m.\u0275dir=o.lG2({type:m,selectors:[["","nzCommentActionHost",""]],inputs:{nzCommentActionHost:"nzCommentActionHost"},exportAs:["nzCommentActionHost"],features:[o.qOj]}),m})(),T=(()=>{class m{constructor(_){this.viewContainerRef=_,this.contentPortal=null}get content(){return this.contentPortal}ngOnInit(){this.contentPortal=new y.UE(this.implicitContent,this.viewContainerRef)}}return m.\u0275fac=function(_){return new(_||m)(o.Y36(o.s_b))},m.\u0275cmp=o.Xpm({type:m,selectors:[["nz-comment-action"]],viewQuery:function(_,a){if(1&_&&o.Gf(o.Rgc,7),2&_){let u;o.iGM(u=o.CRH())&&(a.implicitContent=u.first)}},exportAs:["nzCommentAction"],ngContentSelectors:M,decls:1,vars:0,template:function(_,a){1&_&&(o.F$t(),o.YNc(0,S,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),m})(),l=(()=>{class m{constructor(_,a){this.cdr=_,this.directionality=a,this.dir="ltr",this.destroy$=new x.xQ}ngOnInit(){var _;null===(_=this.directionality.change)||void 0===_||_.pipe((0,D.R)(this.destroy$)).subscribe(a=>{this.dir=a,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return m.\u0275fac=function(_){return new(_||m)(o.Y36(o.sBO),o.Y36(t.Is,8))},m.\u0275cmp=o.Xpm({type:m,selectors:[["nz-comment"]],contentQueries:function(_,a,u){if(1&_&&o.Suo(u,T,4),2&_){let s;o.iGM(s=o.CRH())&&(a.actions=s)}},hostVars:4,hostBindings:function(_,a){2&_&&o.ekj("ant-comment",!0)("ant-comment-rtl","rtl"===a.dir)},inputs:{nzAuthor:"nzAuthor",nzDatetime:"nzDatetime"},exportAs:["nzComment"],ngContentSelectors:Q,decls:11,vars:3,consts:[[1,"ant-comment-inner"],[1,"ant-comment-avatar"],[1,"ant-comment-content"],[1,"ant-comment-content-author"],["class","ant-comment-content-author-name",4,"ngIf"],["class","ant-comment-content-author-time",4,"ngIf"],["class","ant-comment-actions",4,"ngIf"],[1,"ant-comment-nested"],[1,"ant-comment-content-author-name"],[4,"nzStringTemplateOutlet"],[1,"ant-comment-content-author-time"],[1,"ant-comment-actions"],[4,"ngFor","ngForOf"],[3,"nzCommentActionHost"]],template:function(_,a){1&_&&(o.F$t($),o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.Hsn(2),o.qZA(),o.TgZ(3,"div",2),o.TgZ(4,"div",3),o.YNc(5,I,2,1,"span",4),o.YNc(6,P,2,1,"span",5),o.qZA(),o.Hsn(7,1),o.YNc(8,B,2,1,"ul",6),o.qZA(),o.qZA(),o.TgZ(9,"div",7),o.Hsn(10,2),o.qZA()),2&_&&(o.xp6(5),o.Q6J("ngIf",a.nzAuthor),o.xp6(1),o.Q6J("ngIf",a.nzDatetime),o.xp6(2),o.Q6J("ngIf",null==a.actions?null:a.actions.length))},directives:[f.O5,n.f,f.sg,v],encapsulation:2,changeDetection:0}),m})(),z=(()=>{class m{}return m.\u0275fac=function(_){return new(_||m)},m.\u0275mod=o.oAB({type:m}),m.\u0275inj=o.cJS({imports:[[t.vT,f.ez,n.T]]}),m})()}}]);