"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[5615],{4594:(E,m,i)=>{i.d(m,{e:()=>S});var t=i(31635),f=i(84341),o=i(71226),v=i(29447),d=i(45540),r=i(49894),u=i(54902);const T=(0,i(87480).A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"New Evidence Item"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"molecularProfileId",type:"molecular-profile-select",props:{required:!0,tooltip:"A single variant (Simple Molecular Profile) or a combination of variants (Complex Molecular Profile) relevant to the curated evidence.",watchVariantMolecularProfileId:!0}},{key:"sourceId",type:"source-select",props:{required:!0}}]},{wrappers:["form-row"],props:{formRowOptions:{responsive:{xs:24,lg:12,xl:8,xxl:6}}},fieldGroup:[{key:"evidenceType",type:"type-select",props:{required:!0}},{key:"evidenceDirection",type:"direction-select",props:{required:!0}},{key:"significance",type:"significance-select",props:{required:!0}},{key:"diseaseId",type:"disease-select",props:{}},{key:"therapyIds",type:"therapy-multi-select",props:{}},{key:"therapyInteractionType",type:"interaction-select",props:{}},{key:"evidenceLevel",type:"level-select",props:{required:!0}},{key:"rating",type:"rating",props:{required:!0}},{key:"variantOrigin",type:"origin-select",props:{required:!0}},{key:"phenotypeIds",type:"phenotype-multi-select",props:{}}]},{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"description",type:"base-textarea",props:{tooltip:"Your original description of evidence from published literature detailing the association or lack of association between a variant and its predictive, prognostic, diagnostic, predisposing, functional or oncogenic value. ",placeholder:"Enter an Evidence Statement",description:'Data constituting personal or identifying information should not be entered (e.g. <a href="https://www.hipaajournal.com/what-is-protected-health-information/" target="_blank">protected health information (PHI) as defined by HIPAA</a> in the U.S. and/or comparable laws in your jurisdiction).',label:"Evidence Statement",required:!0}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",required:!1,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Evidence Item",align:"right"}}]}]}],u.r);var b,g=i(96354),_=i(5964),y=i(69199),e=i(73664),C=i(2615),D=i(17705),P=i(69145),O=i(56609),F=i(38132),A=i(74222),x=i(72200),L=i(23617),R=i(56506),G=i(38927),w=i(68721),q=i(48199),N=i(61774);const z=a=>["/evidence",a,"summary"];function V(a,n){if(1&a&&(e.EFF(0," View your new EID "),e.j41(1,"a",8),e.EFF(2,"here"),e.k0s(),e.EFF(3,". You will be redirected shortly. ")),2&a){const s=e.XpG();e.R7$(),e.Y8G("routerLink",e.eq3(1,z,s.newEvidenceId))}}function U(a,n){if(1&a&&e.nrm(0,"nz-alert",10),2&a){e.XpG();const s=e.sdS(3);e.Y8G("nzMessage",s)}}function B(a,n){if(1&a&&(e.j41(0,"p")(1,"strong"),e.EFF(2," Evidence for this Molecular Profile has already been curated from this Source. Please double check that your Evidence has not already been entered. "),e.k0s()(),e.nrm(3,"cvc-evidence-table",11)),2&a){const s=e.XpG(2);e.R7$(3),e.Y8G("molecularProfileId",s.selectedMpId)("sourceId",s.selectedSourceId)}}function Q(a,n){if(1&a&&(e.qex(0),e.DNE(1,U,1,1,"nz-alert",9)(2,B,4,2,"ng-template",null,2,e.C5r),e.nrm(4,"br"),e.bVm()),2&a){const s=n.ngIf;e.R7$(),e.Y8G("ngIf",s>0)}}function X(a,n){if(1&a&&e.nrm(0,"nz-alert",10),2&a){e.XpG();const s=e.sdS(3);e.Y8G("nzMessage",s)}}function Y(a,n){if(1&a&&(e.j41(0,"p")(1,"strong"),e.EFF(2," Evidence for this Molecular Profile has already been curated from a potentially overlapping Source. Please review before submitting duplicate evidence. "),e.k0s()(),e.nrm(3,"cvc-evidence-table",12)),2&a){const s=e.XpG(2);e.R7$(3),e.Y8G("molecularProfileId",s.selectedMpId)("linkedSourceId",s.selectedSourceId)}}function j(a,n){if(1&a&&(e.qex(0),e.DNE(1,X,1,1,"nz-alert",9)(2,Y,4,2,"ng-template",null,3,e.C5r),e.nrm(4,"br"),e.bVm()),2&a){const s=n.ngIf;e.R7$(),e.Y8G("ngIf",s>0)}}function W(a,n){if(1&a&&e.nrm(0,"nz-alert",10),2&a){e.XpG();const s=e.sdS(3);e.Y8G("nzMessage",s)}}function K(a,n){if(1&a&&(e.j41(0,"p")(1,"strong"),e.EFF(2," This Source has been marked as fully curated by an Editor. Please double check that your intended Evidence Item does not already exist. "),e.k0s()(),e.nrm(3,"cvc-evidence-table",13)),2&a){const s=e.XpG(2);e.R7$(3),e.Y8G("sourceId",s.selectedSourceId)}}function k(a,n){if(1&a&&(e.qex(0),e.DNE(1,W,1,1,"nz-alert",9)(2,K,4,1,"ng-template",null,4,e.C5r),e.nrm(4,"br"),e.bVm()),2&a){const s=n.ngIf;e.R7$(),e.Y8G("ngIf",s)}}function H(a,n){if(1&a){const s=e.RV6();e.j41(0,"form",14),e.bIt("ngSubmit",function(){C.eBV(s);const h=e.XpG();return C.Njj(h.onSubmit(h.model))}),e.j41(1,"formly-form",15),e.bIt("modelChange",function(h){C.eBV(s);const I=e.XpG();return I.model=h,C.Njj(I.onModelChange(h))}),e.k0s()()}if(2&a){const s=e.XpG();e.Y8G("formGroup",s.form),e.R7$(),e.Y8G("form",s.form)("fields",s.fields)("model",s.model)("options",s.options)}}function J(a,n){1&a&&e.EFF(0," Loading Evidence Item... ")}let S=(class ${constructor(n,s,p,h,I,Z,ee,te){this.revisableFieldsGQL=n,this.submitEvidenceGQL=s,this.existingEvidenceGQL=p,this.fullyCuratedSourceGQL=h,this.relatedEvidenceCountGQL=I,this.cdr=Z,this.route=ee,this.form=new f.J3({}),this.fields=T,this.state=new v.D,this.options={formState:this.state},this.submitEvidenceMutator=new o.E(te),this.routeSub=this.route.queryParams.subscribe(M=>{M.existingEvidenceId?(this.existingEvidenceId=+M.existingEvidenceId,this.state.formMode="clone"):this.model={fields:{}}})}ngOnInit(){this.countQueryRef=this.existingEvidenceGQL.watch({molecularProfileId:0,sourceId:0}),this.curatedQueryRef=this.fullyCuratedSourceGQL.watch({sourceId:0}),this.relatedCountQueryRef=this.relatedEvidenceCountGQL.watch({molecularProfileId:0,sourceId:0}),this.existingEvidenceCount$=this.countQueryRef?.valueChanges.pipe((0,g.T)(n=>n.data?.evidenceItems?.totalCount),(0,_.p)(y.kP),(0,r.s)(this)),this.fullyCuratedSource$=this.curatedQueryRef?.valueChanges.pipe((0,g.T)(n=>n.data?.source?.fullyCurated),(0,r.s)(this)),this.relatedEvidenceCount$=this.relatedCountQueryRef?.valueChanges.pipe((0,g.T)(n=>n.data?.evidenceItems?.totalCount),(0,_.p)(y.kP),(0,r.s)(this))}ngAfterViewInit(){this.existingEvidenceId?this.revisableFieldsGQL.fetch({evidenceId:this.existingEvidenceId}).pipe((0,r.s)(this)).subscribe({next:({data:{evidenceItem:n}})=>{n&&(this.model={fields:(0,d.LC)(n)},this.model.fields.description=void 0,this.cdr.detectChanges())},error:n=>{console.error("Error retrieving evidenceItem."),console.error(n)},complete:()=>{this.state.formReady$.next(!0)}}):this.state.formReady$.next(!0)}onSubmit(n){const s=(0,d.kO)(n);s&&(this.mutationState=this.submitEvidenceMutator.mutate(this.submitEvidenceGQL,{input:s},void 0,p=>{this.newEvidenceId=p.submitEvidence?.evidenceItem.id,this.newEvidenceUrl=`/evidence/${this.newEvidenceId}/summary`}))}onModelChange(n){n.fields.sourceId&&n.fields.molecularProfileId?(n.fields.sourceId!=this.selectedSourceId||n.fields.molecularProfileId!=this.selectedMpId)&&(this.selectedSourceId=n.fields.sourceId,this.selectedMpId=n.fields.molecularProfileId,this.countQueryRef?.refetch({molecularProfileId:n.fields.molecularProfileId,sourceId:n.fields.sourceId}),console.log(n.fields.sourceId),this.relatedCountQueryRef?.refetch({molecularProfileId:n.fields.molecularProfileId,sourceId:n.fields.sourceId})):this.countQueryRef?.refetch({molecularProfileId:0,sourceId:0}),n.fields.sourceId?n.fields.sourceId!=this.selectedSourceId&&(this.selectedSourceId=n.fields.sourceId,this.curatedQueryRef?.refetch({sourceId:this.selectedSourceId})):(this.selectedSourceId=void 0,this.curatedQueryRef?.refetch({sourceId:0}))}ngOnDestroy(){this.options.formState.onDestroy(),this.routeSub.unsubscribe()}static#e=b=()=>(this.\u0275fac=function(s){return new(s||$)(e.rXU(P.V1_),e.rXU(P.LXB),e.rXU(P.k1Y),e.rXU(P.aX5),e.rXU(P.Mz0),e.rXU(D.gRc),e.rXU(O.nX),e.rXU(A.N))},this.\u0275cmp=e.VBU({type:$,selectors:[["cvc-evidence-submit-form"]],standalone:!1,decls:12,vars:14,consts:[["success",""],["loadingModel",""],["duplicateEvidenceAlert",""],["relatedEvidenceAlert",""],["fullyCuratedAlert",""],["entityType","Evidence Item",3,"mutationState","redirectUrl","successMessage"],[4,"ngIf"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"routerLink"],["nzType","warning",3,"nzMessage",4,"ngIf"],["nzType","warning",3,"nzMessage"],["cvcHeight","150",3,"molecularProfileId","sourceId"],["cvcHeight","150",3,"molecularProfileId","linkedSourceId"],["cvcHeight","150",3,"sourceId"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[2,"width","100%",3,"modelChange","form","fields","model","options"]],template:function(s,p){if(1&s&&(e.j41(0,"cvc-form-submission-status-display",5),e.DNE(1,V,4,3,"ng-template",null,0,e.C5r)(3,Q,5,1,"ng-container",6),e.nI1(4,"ngrxPush"),e.DNE(5,j,5,1,"ng-container",6),e.nI1(6,"ngrxPush"),e.DNE(7,k,5,1,"ng-container",6),e.nI1(8,"ngrxPush"),e.DNE(9,H,2,5,"form",7)(10,J,1,0,"ng-template",null,1,e.C5r),e.k0s()),2&s){const h=e.sdS(2),I=e.sdS(11);e.Y8G("mutationState",p.mutationState)("redirectUrl",p.newEvidenceUrl)("successMessage",h),e.R7$(3),e.Y8G("ngIf",e.bMT(4,8,p.existingEvidenceCount$)),e.R7$(2),e.Y8G("ngIf",e.bMT(6,10,p.relatedEvidenceCount$)),e.R7$(2),e.Y8G("ngIf",e.bMT(8,12,p.fullyCuratedSource$)),e.R7$(2),e.Y8G("ngIf",p.model)("ngIfElse",I)}},dependencies:[x.bT,F.Wk,L.Y,f.qT,f.cb,f.j4,R.JA,G.CA,w.G,q.N,N.L9],encapsulation:2,changeDetection:0}),this)},b());S=(0,t.Cg)([(0,r.d)()],S)},29447:(E,m,i)=>{i.d(m,{D:()=>r});var t=i(69145),f=i(49894),o=i(84412),v=i(54902),d=i(45183);class r extends d.zn{constructor(){super(d.$L.EVIDENCE);const c=v.I;this.fields={molecularProfileId$:new o.t(c.molecularProfileId),variantId$:new o.t(c.variantId),variantMolecularProfile$:new o.t(void 0),featureId$:new o.t(c.featureId),evidenceType$:new o.t(c.evidenceType),evidenceLevel$:new o.t(c.evidenceLevel),evidenceDirection$:new o.t(c.evidenceDirection),significance$:new o.t(c.significance),variantOrigin$:new o.t(c.variantOrigin),diseaseId$:new o.t(c.diseaseId),therapyIds$:new o.t(c.therapyIds),therapyInteractionType$:new o.t(c.therapyInteractionType),rating$:new o.t(c.rating),phenotypeIds$:new o.t(c.phenotypeIds),sourceId$:new o.t(c.sourceId),description$:new o.t(void 0),comment$:new o.t(void 0)},this.enums={entityType$:new o.t(this.getTypeOptions()),significance$:new o.t([]),direction$:new o.t([]),interaction$:new o.t(this.getInteractionOptions())},this.requires={requiresDisease$:new o.t(!1),requiresTherapy$:new o.t(!1),requiresTherapyInteractionType$:new o.t(!1),requiresClingenCodes$:new o.t(!1),requiresAcmgCodes$:new o.t(!1),requiresAmpLevel$:new o.t(!1),allowsFdaApproval$:new o.t(!1)},this.fields.evidenceType$.pipe((0,f.s)(this,"onDestroy")).subscribe(l=>{if(!l)return Object.entries(this.requires).forEach(([T,g])=>{g.next(!1)}),this.enums.significance$.next([]),void this.enums.direction$.next([]);this.enums.significance$.next(this.getSignificanceOptions(l)),this.enums.direction$.next(this.getDirectionOptions(l)),this.requires.requiresDisease$.next(this.requiresDisease(l)),this.requires.requiresTherapy$.next(this.requiresTherapy(l)),this.requires.requiresTherapyInteractionType$.next(this.requiresTherapy(l)),this.requires.requiresClingenCodes$.next(this.requiresClingenCodes(l)),this.requires.requiresAcmgCodes$.next(this.requiresAcmgCodes(l)),this.requires.allowsFdaApproval$.next(this.allowsFdaApproval(l))}),this.fields.therapyIds$.pipe((0,f.s)(this,"onDestroy")).subscribe(l=>{this.requires.requiresTherapyInteractionType$.next(!!l&&l.length>1)}),this.validStates.set(t.M1P.Predictive,{entityType:t.M1P.Predictive,significance:[t.Vue.Sensitivityresponse,t.Vue.Resistance,t.Vue.AdverseResponse,t.Vue.ReducedSensitivity,t.Vue.Na],entityDirection:[t.$Ni.Supports,t.$Ni.DoesNotSupport],requiresDisease:!0,requiresTherapy:!0,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.M1P.Diagnostic,{entityType:t.M1P.Diagnostic,significance:[t.Vue.Positive,t.Vue.Negative],entityDirection:[t.$Ni.Supports,t.$Ni.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.M1P.Prognostic,{entityType:t.M1P.Prognostic,significance:[t.Vue.BetterOutcome,t.Vue.PoorOutcome,t.Vue.Na],entityDirection:[t.$Ni.Supports,t.$Ni.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.M1P.Oncogenic,{entityType:t.M1P.Oncogenic,significance:[t.Vue.Oncogenicity,t.Vue.Protectiveness],entityDirection:[t.$Ni.Supports,t.$Ni.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.M1P.Predisposing,{entityType:t.M1P.Predisposing,significance:[t.Vue.Predisposition,t.Vue.Protectiveness],entityDirection:[t.$Ni.Supports,t.$Ni.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.M1P.Functional,{entityType:t.M1P.Functional,significance:[t.Vue.GainOfFunction,t.Vue.LossOfFunction,t.Vue.UnalteredFunction,t.Vue.Neomorphic,t.Vue.DominantNegative,t.Vue.Unknown],entityDirection:[t.$Ni.Supports,t.$Ni.DoesNotSupport],requiresDisease:!1,requiresTherapy:!1,requiresAcmgCodes:!1,requiresClingenCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1})}}},38476:(E,m,i)=>{i.d(m,{S:()=>g});var t=i(72200),f=i(38132),o=i(55316),v=i(68553),d=i(50513),r=i(70776),u=i(23617),c=i(76912),l=i(2615),T=i(73664);let g=(()=>{var _;class y{static#e=_=()=>(this.\u0275fac=function(D){return new(D||y)},this.\u0275mod=T.$C({type:y}),this.\u0275inj=l.G2t({imports:[t.MD,f.iI,d.Z,u.$,v.m,o.P,c.C,r.s]}))}return _(),y})()},45540:(E,m,i)=>{i.d(m,{LC:()=>f,ep:()=>o,kO:()=>v});var t=i(25741);function f(d){return{significance:d.significance,description:d.description,diseaseId:d.disease?.id,therapyIds:d.therapies.map(r=>r.id),therapyInteractionType:d.therapyInteractionType,evidenceDirection:d.evidenceDirection,evidenceLevel:d.evidenceLevel,evidenceType:d.evidenceType,molecularProfileId:d.molecularProfile.id,phenotypeIds:d.phenotypes.map(r=>r.id),rating:d.evidenceRating,sourceId:d.source.id,variantOrigin:d.variantOrigin}}function o(d,r){let u=v(r);if(u)return{id:d,comment:u.comment,organizationId:u.organizationId,fields:u.fields}}function v(d){const r=d.fields;if(![r.molecularProfileId,r.variantOrigin,r.sourceId,r.evidenceType,r.significance,r.evidenceLevel,r.evidenceDirection,r.rating].find(c=>void 0===c))return{fields:{molecularProfileId:r.molecularProfileId,variantOrigin:r.variantOrigin,sourceId:r.sourceId,evidenceType:r.evidenceType,significance:r.significance,evidenceLevel:r.evidenceLevel,evidenceDirection:r.evidenceDirection,rating:r.rating,description:t.q2(r.description),diseaseId:t.pz(r.diseaseId),phenotypeIds:r.phenotypeIds?r.phenotypeIds:[],therapyIds:r.therapyIds?r.therapyIds:[],therapyInteractionType:t.pz(r.therapyInteractionType)},organizationId:d.organizationId,comment:d.comment}}},54902:(E,m,i)=>{i.d(m,{I:()=>t,r:()=>f});const t={featureId:void 0,variantId:void 0,significance:void 0,description:void 0,diseaseId:void 0,therapyIds:void 0,therapyInteractionType:void 0,evidenceDirection:void 0,evidenceLevel:void 0,evidenceType:void 0,molecularProfileId:void 0,phenotypeIds:void 0,rating:void 0,sourceId:void 0,variantOrigin:void 0},f={clientMutationId:void 0,fields:t,comment:void 0,organizationId:void 0}},87480:(E,m,i)=>{function t(f,o){const v=(r,u)=>{let c;for(let l of r)if(l.fieldGroup)c=v(l.fieldGroup,u);else if(l.key===u){c=l;break}return c},d=(r,u)=>{for(let c of Object.keys(u))if(u[c]instanceof Object&&!Array.isArray(u[c]))d(r,u[c]);else{const l=v(r,c);l&&(l.defaultValue=u[c])}return r};return d(f,o)}i.d(m,{A:()=>t})}}]);