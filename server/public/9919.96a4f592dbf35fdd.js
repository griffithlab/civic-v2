"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[9919],{19919:(me,M,i)=>{i.r(M),i.d(M,{MolecularProfilesReviseModule:()=>ue});var l=i(72200),d=i(3062),R=i(14124),y=i(41951),S=i(13688),u=i(97529),I=i(38132),F=i(99172),G=i(96354),f=i(24608),e=i(73664),m=i(69145),g=i(56609),E=i(41305),T=i(29765),$=i(12261),O=i(61774);function j(o,t){1&o&&(e.j41(0,"span"),e.EFF(1,",\xa0"),e.k0s())}function w(o,t){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.DNE(2,j,2,0,"span",1),e.k0s()),2&o){const r=t.$implicit,s=t.last;e.R7$(),e.SpI(" ",r),e.R7$(),e.Y8G("ngIf",!s)}}function D(o,t){if(1&o&&(e.j41(0,"nz-page-header-subtitle"),e.DNE(1,w,3,2,"span",8),e.k0s()),2&o){const r=e.XpG().ngIf;e.R7$(),e.Y8G("ngForOf",r.molecularProfileAliases)}}function V(o,t){1&o&&(e.j41(0,"div"),e.nrm(1,"router-outlet"),e.k0s())}function X(o,t){1&o&&(e.j41(0,"nz-row",9)(1,"div",10),e.nrm(2,"cvc-login-prompt"),e.k0s()())}function B(o,t){if(1&o&&(e.qex(0),e.nrm(1,"cvc-section-navigation",2),e.j41(2,"nz-page-header",3)(3,"nz-page-header-title",4),e.EFF(4," REVISE "),e.nrm(5,"i",5),e.EFF(6),e.k0s(),e.DNE(7,D,2,1,"nz-page-header-subtitle",1),e.j41(8,"nz-page-header-content")(9,"div",6),e.DNE(10,V,2,0,"div",7),e.nI1(11,"ngrxPush"),e.DNE(12,X,3,0,"ng-template",null,0,e.C5r),e.k0s()()(),e.bVm()),2&o){const r=t.ngIf,s=e.sdS(13),n=e.XpG();e.R7$(),e.Y8G("displayName",r.name),e.R7$(5),e.SpI(" ",r.name," "),e.R7$(),e.Y8G("ngIf",r.molecularProfileAliases.length>0),e.R7$(3),e.Y8G("ngIf",e.bMT(11,5,n.isSignedIn$))("ngIfElse",s)}}let U=(()=>{var o;class t{constructor(s,n,a){this.gql=s,this.route=n,this.viewerService=a,this.routeSub=this.route.params.subscribe(v=>{let z=this.gql.watch({mpId:+v.molecularProfileId}).valueChanges;this.loading$=z.pipe((0,f.E)("loading"),(0,F.Z)(!0)),this.molecularProfile$=z.pipe((0,f.E)("data","molecularProfile")),this.commentsTotal$=this.molecularProfile$.pipe((0,f.E)("comments","totalCount")),this.flagsTotal$=this.molecularProfile$.pipe((0,f.E)("flags","totalCount")),this.revisionsTotal$=this.molecularProfile$.pipe((0,f.E)("revisions","totalCount"))})}ngOnInit(){this.isSignedIn$=this.viewerService.viewer$.pipe((0,G.T)(s=>s.signedIn))}ngOnDestroy(){this.routeSub.unsubscribe()}static#e=o=()=>(this.\u0275fac=function(n){return new(n||t)(e.rXU(m.Tj8),e.rXU(g.nX),e.rXU(E.q))},this.\u0275cmp=e.VBU({type:t,selectors:[["cvc-molecular-profiles-revise"]],standalone:!1,decls:2,vars:3,consts:[["notSignedIn",""],[4,"ngIf"],[3,"displayName"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzType","civic:molecularprofile"],[1,"content"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["nzSpan","24","nzJustify","center"],["nz-col","","nzSpan","6"]],template:function(n,a){1&n&&(e.DNE(0,B,14,7,"ng-container",1),e.nI1(1,"async")),2&n&&e.Y8G("ngIf",e.bMT(1,1,a.molecularProfile$))},dependencies:[l.Sq,l.bT,g.n3,d.WB,d.k9,d.CO,d.zR,y.Dn,T.n,$.h,u.Uq,u.e,l.Jj,O.L9],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}))}return o(),t})();var b=i(38927),Y=i(50513),_=i(66026),N=i(70776),L=i(55316),c=i(2615);let A=(()=>{var o;class t{static#e=o=()=>(this.\u0275fac=function(n){return new(n||t)},this.\u0275mod=e.$C({type:t}),this.\u0275inj=c.G2t({imports:[l.MD,b.PQ,Y.Z,_.m,L.P,N.s]}))}return o(),t})(),Q=(()=>{var o;class t{static#e=o=()=>(this.\u0275fac=function(n){return new(n||t)},this.\u0275mod=e.$C({type:t}),this.\u0275inj=c.G2t({imports:[l.MD,A]}))}return o(),t})();var J=i(31635),p=i(84341),C=i(49894),Z=i(71226),W=i(25741);const te=(0,i(87480).A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Molecular Profile"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{md:24,lg:16},{md:24,lg:8},{xs:24}]}},fieldGroup:[{key:"description",type:"textarea",wrappers:["form-field"],props:{placeholder:"Enter a Molecular Profile Description",label:"Molecular Profile Description",description:"Provide a summary of the clinical relevance of this Molecular Profile. The Molecular Profile Summary should be a synthesis of the existing Evidence Statements for this profile. Basic information on recurrence rates and biological/functional impact of the variants may be included, but the focus should be on the clinical impact (i.e. predictive, prognostic, diagnostic, or predisposing relevance).",required:!1,rows:5}},{key:"aliases",type:"tag-multi-input",wrappers:["form-field"],props:{label:"Aliases"},expressions:{"props.disabled":o=>o.options?.formState.isSimpleMp,"props.description":o=>o.options?.formState.isSimpleMp?"Simple Molecular Profiles inherit their Aliases from the corresponding Variant.":"List any aliases commonly used to refer to this Molecular Profile"}},{key:"sourceIds",type:"source-multi-select",wrappers:["form-field"],props:{}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",required:!0}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{description:void 0,sourceIds:void 0,aliases:void 0},comment:void 0,organizationId:void 0});var x,oe=i(17705),ie=i(74222),re=i(56506),ne=i(68721);function se(o,t){if(1&o&&(e.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),e.j41(1,"a",4),e.EFF(2,"here."),e.k0s()),2&o){const r=e.XpG();e.R7$(),e.Y8G("href",e.mNQ(r.url),e.B4B)}}function ae(o,t){if(1&o){const r=e.RV6();e.j41(0,"form",5),e.bIt("ngSubmit",function(){c.eBV(r);const n=e.XpG();return c.Njj(n.onSubmit(n.model))}),e.j41(1,"formly-form",6),e.bIt("modelChange",function(n){c.eBV(r);const a=e.XpG();return c.Njj(a.model=n)}),e.k0s()()}if(2&o){const r=e.XpG();e.Y8G("formGroup",r.form),e.R7$(),e.Y8G("form",r.form)("fields",r.fields)("model",r.model)("options",r.options)}}function le(o,t){1&o&&e.EFF(0," Loading Molecular Profile... ")}let h=(class P{constructor(t,r,s,n){this.revisableFieldsGQL=t,this.submitRevisionsGQL=r,this.cdr=s,this.form=new p.J3({}),this.options={formState:{isSimpleMp:void 0}},this.fields=te,this.reviseEvidenceMutator=new Z.E(n)}ngOnInit(){this.url=`/molecular-profiles/${this.molecularProfileId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({molecularProfileId:this.molecularProfileId}).pipe((0,C.s)(this)).subscribe({next:({data:{molecularProfile:t}})=>{var o;t&&(this.options.formState.isSimpleMp=!t.isComplex,this.model={id:t.id,fields:(o=t,{description:o.description,sourceIds:o.sources.map(t=>t.id),aliases:o.molecularProfileAliases})},this.cdr.detectChanges())},error:t=>{console.error("Error retrieving MolecularProfile."),console.error(t)},complete:()=>{}})}onSubmit(t){if(!this.molecularProfileId)return;let r=function K(o,t){const r=t.fields;if(t.comment)return{id:o,fields:{description:W.q2(r.description),sourceIds:r.sourceIds||[],aliases:r.aliases||[]},organizationId:t.organizationId,comment:t.comment}}(this.molecularProfileId,t);r&&(this.mutationState=this.reviseEvidenceMutator.mutate(this.submitRevisionsGQL,{input:r}))}static#e=x=()=>(this.\u0275fac=function(r){return new(r||P)(e.rXU(m.UK$),e.rXU(m.$rM),e.rXU(oe.gRc),e.rXU(ie.N))},this.\u0275cmp=e.VBU({type:P,selectors:[["cvc-mp-revise-form"]],inputs:{molecularProfileId:"molecularProfileId"},standalone:!1,decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Molecular Profile",3,"redirectUrl","mutationState","successMessage"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(r,s){if(1&r&&(e.j41(0,"cvc-form-submission-status-display",2),e.DNE(1,se,3,2,"ng-template",null,0,e.C5r)(3,ae,2,5,"form",3)(4,le,1,0,"ng-template",null,1,e.C5r),e.k0s()),2&r){const n=e.sdS(2),a=e.sdS(5);e.Y8G("redirectUrl",s.url)("mutationState",s.mutationState)("successMessage",n),e.R7$(3),e.Y8G("ngIf",s.model)("ngIfElse",a)}},dependencies:[l.bT,b.CA,p.qT,p.cb,p.j4,re.JA,ne.G],encapsulation:2,changeDetection:0}),this)},x());function ce(o,t){if(1&o&&(e.qex(0),e.nrm(1,"cvc-mp-revise-form",2),e.bVm()),2&o){const r=e.XpG();e.R7$(),e.Y8G("molecularProfileId",r.molecularProfileId)}}function de(o,t){1&o&&e.EFF(0,"Loading Molecular Profile...")}h=(0,J.Cg)([(0,C.d)()],h);const fe=[{path:"",component:U,data:{breadcrumb:"Revise"},children:[{path:"",redirectTo:"suggest",pathMatch:"full"},{path:"suggest",component:(()=>{var o;class t{constructor(s){this.route=s,this.routeParams$=this.route.params.subscribe(n=>{this.molecularProfileId=+n.molecularProfileId})}ngOnDestroy(){this.routeParams$.unsubscribe()}static#e=o=()=>(this.\u0275fac=function(n){return new(n||t)(e.rXU(g.nX))},this.\u0275cmp=e.VBU({type:t,selectors:[["cvc-molecular-profiles-suggest"]],standalone:!1,decls:3,vars:2,consts:[["loadingMp",""],[4,"ngIf","ngIfElse"],[3,"molecularProfileId"]],template:function(n,a){if(1&n&&e.DNE(0,ce,2,1,"ng-container",1)(1,de,1,0,"ng-template",null,0,e.C5r),2&n){const v=e.sdS(2);e.Y8G("ngIf",a.molecularProfileId)("ngIfElse",v)}},dependencies:[l.bT,h],encapsulation:2}))}return o(),t})(),data:{breadcrumb:"Suggest Revision"}}]}];let pe=(()=>{var o;class t{static#e=o=()=>(this.\u0275fac=function(n){return new(n||t)},this.\u0275mod=e.$C({type:t}),this.\u0275inj=c.G2t({imports:[I.iI.forChild(fe),Q,I.iI]}))}return o(),t})(),ue=(()=>{var o;class t{static#e=o=()=>(this.\u0275fac=function(n){return new(n||t)},this.\u0275mod=e.$C({type:t}),this.\u0275inj=c.G2t({imports:[l.MD,pe,d.ZJ,y.Y3,R.C,S.A,u.f3]}))}return o(),t})()}}]);