"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[8267],{68267:(rt,L,o)=>{o.r(L),o.d(L,{FeaturesReviseModule:()=>it});var l=o(72200),U=o(38132),J=o(13688),N=o(14124),Z=o(64917),v=o(97529),k=o(41951),m=o(3062),W=o(99172),H=o(96354),h=o(24608),e=o(73664),f=o(69145),w=o(56609),K=o(41305),q=o(12261),ee=o(29765),te=o(61774),ne=o(83075);function ie(i,t){1&i&&(e.j41(0,"div"),e.nrm(1,"router-outlet"),e.k0s())}function re(i,t){1&i&&(e.j41(0,"nz-row",8)(1,"div",9),e.nrm(2,"cvc-login-prompt"),e.k0s()())}function se(i,t){if(1&i&&(e.qex(0),e.nrm(1,"cvc-section-navigation",2),e.j41(2,"nz-page-header",3)(3,"nz-page-header-title",4),e.EFF(4," REVISE "),e.nrm(5,"i",5),e.nI1(6,"entityColor"),e.EFF(7),e.k0s(),e.j41(8,"nz-page-header-subtitle"),e.EFF(9),e.k0s(),e.j41(10,"nz-page-header-content")(11,"div",6),e.DNE(12,ie,2,0,"div",7),e.nI1(13,"ngrxPush"),e.DNE(14,re,3,0,"ng-template",null,0,e.C5r),e.k0s()()(),e.bVm()),2&i){const n=t.ngIf,s=e.sdS(15),r=e.XpG();e.R7$(),e.Y8G("displayName",n.name),e.R7$(4),e.Y8G("nzTwotoneColor",e.bMT(6,6,"Feature")),e.R7$(2),e.SpI(" ",n.name," "),e.R7$(2),e.SpI(" ",n.fullName," "),e.R7$(3),e.Y8G("ngIf",e.bMT(13,8,r.isSignedIn$))("ngIfElse",s)}}let oe=(()=>{var i;class t{constructor(s,r,a){this.gql=s,this.route=r,this.viewerService=a,this.routeSub=this.route.params.subscribe(E=>{let Q=this.gql.watch({featureId:+E.featureId}).valueChanges;this.loading$=Q.pipe((0,h.E)("loading"),(0,W.Z)(!0)),this.feature$=Q.pipe((0,h.E)("data","feature")),this.commentsTotal$=this.feature$.pipe((0,h.E)("comments","totalCount")),this.flagsTotal$=this.feature$.pipe((0,h.E)("flags","totalCount")),this.revisionsTotal$=this.feature$.pipe((0,h.E)("revisions","totalCount"))})}ngOnInit(){this.isSignedIn$=this.viewerService.viewer$.pipe((0,H.T)(s=>s.signedIn))}ngOnDestroy(){this.routeSub.unsubscribe()}static#e=i=()=>(this.\u0275fac=function(r){return new(r||t)(e.rXU(f.gUZ),e.rXU(w.nX),e.rXU(K.q))},this.\u0275cmp=e.VBU({type:t,selectors:[["features-revise"]],standalone:!1,decls:2,vars:3,consts:[["notSignedIn",""],[4,"ngIf"],[3,"displayName"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzTheme","twotone","nzType","civic-feature",3,"nzTwotoneColor"],[1,"content"],[4,"ngIf","ngIfElse"],["nzSpan","24","nzJustify","center"],["nz-col","","nzSpan","6"]],template:function(r,a){1&r&&(e.DNE(0,se,16,10,"ng-container",1),e.nI1(1,"async")),2&r&&e.Y8G("ngIf",e.bMT(1,1,a.feature$))},dependencies:[l.bT,w.n3,m.WB,m.k9,m.CO,m.zR,k.Dn,v.Uq,v.e,q.h,ee.n,l.Jj,te.L9,ne.R],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}))}return i(),t})();var ae=o(97685),de=o(61912),ce=o(25703),p=o(38927),y=o(50513),F=o(66026),Y=o(70776),b=o(55316),d=o(2615);let le=(()=>{var i;class t{static#e=i=()=>(this.\u0275fac=function(r){return new(r||t)},this.\u0275mod=e.$C({type:t}),this.\u0275inj=d.G2t({imports:[l.MD,p.PQ,y.Z,F.m,b.P,Y.s]}))}return i(),t})();var I=o(31635),c=o(84341),u=o(49894),_=o(71226),g=o(25741),R=o(87480);const ge=(0,R.A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Factor"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"name",type:"base-input",props:{placeholder:"Enter a name for this Factor",description:"Enter the name of the Factor",label:"Name",required:!0}},{key:"fullName",type:"base-input",props:{placeholder:"Enter a full name for this Factor",description:"Enter a full or long-form name of the Factor if applicable",label:"Full Name",required:!1}},{key:"ncitId",type:"base-input",props:{placeholder:"NCI Thesaurus Code",description:"Enter the NCI Thesaurus Code for this Factor",label:"NCI Thesaurus Code",required:!1}},{key:"aliases",type:"tag-multi-input",props:{label:"Aliases",description:"List any aliases commonly used to refer to this Factor",placeholder:"Enter Alias and hit return"}},{key:"description",type:"base-textarea",wrappers:["form-field"],props:{tooltip:"User-defined summary of the clinical relevance of this Factor.",placeholder:"Enter a Factor Summary",label:"Summary",required:!1,rows:5}},{key:"sourceIds",type:"source-multi-select",wrappers:["form-field"],props:{}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",placeholder:"Please enter a comment describing your revisions.",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Factor Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{description:void 0,sourceIds:void 0},comment:void 0,organizationId:void 0});var B,C=o(17705),G=o(74222),x=o(56506),z=o(68721);const he=()=>({});function ve(i,t){if(1&i&&(e.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),e.j41(1,"a",4),e.EFF(2,"here."),e.k0s()),2&i){const n=e.XpG();e.R7$(),e.Y8G("href",e.mNQ(n.url),e.B4B)}}function ye(i,t){if(1&i){const n=e.RV6();e.j41(0,"form",5),e.bIt("ngSubmit",function(){d.eBV(n);const r=e.XpG();return d.Njj(r.onSubmit(r.model))}),e.j41(1,"formly-form",6),e.bIt("modelChange",function(r){d.eBV(n);const a=e.XpG();return d.Njj(a.model=r)}),e.k0s()()}if(2&i){const n=e.XpG();e.Y8G("formGroup",n.form),e.R7$(),e.Y8G("form",n.form)("fields",n.fields)("model",n.model)("options",e.lJ4(5,he))}}function Fe(i,t){1&i&&e.EFF(0," Loading Factor... ")}let M=(class O{constructor(t,n,s,r){this.revisableFieldsGQL=t,this.submitRevisionsGQL=n,this.networkErrorService=s,this.cdr=r,this.form=new c.J3({}),this.fields=ge,this.reviseFactorMutator=new _.E(s)}ngOnInit(){this.url=`/features/${this.featureId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({featureId:this.featureId}).pipe((0,u.s)(this)).subscribe({next:({data:{feature:t}})=>{if(t){let n=function fe(i){if("Factor"===i.featureInstance.__typename)return{description:i.description,name:i.name,fullName:i.fullName,sourceIds:i.sources.map(t=>t.id),aliases:i.featureAliases,ncitId:i.featureInstance.ncitId}}(t);n&&(this.model={id:t.id,fields:n},this.cdr.detectChanges())}},error:t=>{console.error("Error retrieving Factor."),console.error(t)},complete:()=>{}})}onSubmit(t){if(!this.featureId)return;let n=function pe(i,t){const n=t.fields;if(t.comment&&n.name)return{id:i,fields:{description:g.q2(n.description),fullName:g.q2(n.fullName),name:n.name,sourceIds:n.sourceIds||[],aliases:n.aliases||[],ncitId:g.q2(n.ncitId)},organizationId:t.organizationId,comment:t.comment}}(this.featureId,t);n&&(this.mutationState=this.reviseFactorMutator.mutate(this.submitRevisionsGQL,{input:n}))}static#e=B=()=>(this.\u0275fac=function(n){return new(n||O)(e.rXU(f.aZy),e.rXU(f.lEz),e.rXU(G.N),e.rXU(C.gRc))},this.\u0275cmp=e.VBU({type:O,selectors:[["cvc-factor-revise-form"]],inputs:{featureId:"featureId"},decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Feature",3,"redirectUrl","mutationState","successMessage"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(n,s){if(1&n&&(e.j41(0,"cvc-form-submission-status-display",2),e.DNE(1,ve,3,2,"ng-template",null,0,e.C5r)(3,ye,2,6,"form",3)(4,Fe,1,0,"ng-template",null,1,e.C5r),e.k0s()),2&n){const r=e.sdS(2),a=e.sdS(5);e.Y8G("redirectUrl",s.url)("mutationState",s.mutationState)("successMessage",r),e.R7$(3),e.Y8G("ngIf",s.model)("ngIfElse",a)}},dependencies:[l.MD,l.bT,p.PQ,p.CA,y.Z,F.m,c.qT,c.cb,c.j4,x.JA,b.P,z.G],encapsulation:2,changeDetection:0}),this)},B());M=(0,I.Cg)([(0,u.d)()],M);const Ce=(0,R.A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Fusion"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"aliases",type:"tag-multi-input",props:{label:"Aliases",description:"List any aliases commonly used to refer to this Fusion",placeholder:"Enter Alias and hit return"}},{key:"description",type:"base-textarea",wrappers:["form-field"],props:{tooltip:"User-defined summary of the clinical relevance of this Fusion.",placeholder:"Enter a Fusion Summary",label:"Summary",required:!1,rows:5}},{key:"sourceIds",type:"source-multi-select",wrappers:["form-field"],props:{}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",placeholder:"Please enter a comment describing your revisions.",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Fusion Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{description:void 0,sourceIds:void 0},comment:void 0,organizationId:void 0});var D;const Ge=()=>({});function xe(i,t){if(1&i&&(e.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),e.j41(1,"a",4),e.EFF(2,"here."),e.k0s()),2&i){const n=e.XpG();e.R7$(),e.Y8G("href",e.mNQ(n.url),e.B4B)}}function ze(i,t){if(1&i){const n=e.RV6();e.j41(0,"form",5),e.bIt("ngSubmit",function(){d.eBV(n);const r=e.XpG();return d.Njj(r.onSubmit(r.model))}),e.j41(1,"formly-form",6),e.bIt("modelChange",function(r){d.eBV(n);const a=e.XpG();return d.Njj(a.model=r)}),e.k0s()()}if(2&i){const n=e.XpG();e.Y8G("formGroup",n.form),e.R7$(),e.Y8G("form",n.form)("fields",n.fields)("model",n.model)("options",e.lJ4(5,Ge))}}function Me(i,t){1&i&&e.EFF(0," Loading Factor... ")}let S=(class j{constructor(t,n,s,r){this.revisableFieldsGQL=t,this.submitRevisionsGQL=n,this.networkErrorService=s,this.cdr=r,this.form=new c.J3({}),this.fields=Ce,this.reviseFusionMutator=new _.E(s)}ngOnInit(){this.url=`/features/${this.featureId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({featureId:this.featureId}).pipe((0,u.s)(this)).subscribe({next:({data:{feature:t}})=>{if(t){let n=function be(i){if("Fusion"===i.featureInstance.__typename)return{description:i.description,sourceIds:i.sources.map(t=>t.id),aliases:i.featureAliases}}(t);n&&(this.model={id:t.id,fields:n},this.cdr.detectChanges())}},error:t=>{console.error("Error retrieving Fusion."),console.error(t)},complete:()=>{}})}onSubmit(t){if(!this.featureId)return;let n=function Ie(i,t){const n=t.fields;if(t.comment)return{id:i,fields:{description:g.q2(n.description),sourceIds:n.sourceIds||[],aliases:n.aliases||[]},organizationId:t.organizationId,comment:t.comment}}(this.featureId,t);n&&(this.mutationState=this.reviseFusionMutator.mutate(this.submitRevisionsGQL,{input:n}))}static#e=D=()=>(this.\u0275fac=function(n){return new(n||j)(e.rXU(f.dYH),e.rXU(f.a4s),e.rXU(G.N),e.rXU(C.gRc))},this.\u0275cmp=e.VBU({type:j,selectors:[["cvc-fusion-revise-form"]],inputs:{featureId:"featureId"},decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Feature",3,"redirectUrl","mutationState","successMessage"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(n,s){if(1&n&&(e.j41(0,"cvc-form-submission-status-display",2),e.DNE(1,xe,3,2,"ng-template",null,0,e.C5r)(3,ze,2,6,"form",3)(4,Me,1,0,"ng-template",null,1,e.C5r),e.k0s()),2&n){const r=e.sdS(2),a=e.sdS(5);e.Y8G("redirectUrl",s.url)("mutationState",s.mutationState)("successMessage",r),e.R7$(3),e.Y8G("ngIf",s.model)("ngIfElse",a)}},dependencies:[l.MD,l.bT,p.PQ,p.CA,y.Z,F.m,c.qT,c.cb,c.j4,x.JA,b.P,z.G],encapsulation:2,changeDetection:0}),this)},D());S=(0,I.Cg)([(0,u.d)()],S);let Se=(()=>{var i;class t{static#e=i=()=>(this.\u0275fac=function(r){return new(r||t)},this.\u0275mod=e.$C({type:t}),this.\u0275inj=d.G2t({imports:[l.MD,p.PQ,y.Z,F.m,b.P,Y.s]}))}return i(),t})(),we=(()=>{var i;class t{static#e=i=()=>(this.\u0275fac=function(r){return new(r||t)},this.\u0275mod=e.$C({type:t}),this.\u0275inj=d.G2t({imports:[l.MD,ce.Ti,v.f3,ae.pc,de.i3,m.ZJ,le,N.C,M,S,Se]}))}return i(),t})();const je=(0,R.A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Gene"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"description",type:"base-textarea",wrappers:["form-field"],props:{tooltip:"User-defined summary of the clinical relevance of this Gene.",placeholder:"Enter a Gene Summary",label:"Gene Summary",required:!1,rows:5}},{key:"sourceIds",type:"source-multi-select",wrappers:["form-field"],props:{}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",placeholder:"Please enter a comment describing your revisions.",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Gene Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{description:void 0,sourceIds:void 0},comment:void 0,organizationId:void 0});var V;const Xe=()=>({});function $e(i,t){if(1&i&&(e.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),e.j41(1,"a",4),e.EFF(2,"here."),e.k0s()),2&i){const n=e.XpG();e.R7$(),e.Y8G("href",e.mNQ(n.url),e.B4B)}}function Le(i,t){if(1&i){const n=e.RV6();e.j41(0,"form",5),e.bIt("ngSubmit",function(){d.eBV(n);const r=e.XpG();return d.Njj(r.onSubmit(r.model))}),e.j41(1,"formly-form",6),e.bIt("modelChange",function(r){d.eBV(n);const a=e.XpG();return d.Njj(a.model=r)}),e.k0s()()}if(2&i){const n=e.XpG();e.Y8G("formGroup",n.form),e.R7$(),e.Y8G("form",n.form)("fields",n.fields)("model",n.model)("options",e.lJ4(5,Xe))}}function Ue(i,t){1&i&&e.EFF(0," Loading Gene... ")}let T=(class X{constructor(t,n,s,r){this.revisableFieldsGQL=t,this.submitRevisionsGQL=n,this.networkErrorService=s,this.cdr=r,this.form=new c.J3({}),this.fields=je,this.reviseEvidenceMutator=new _.E(s)}ngOnInit(){this.url=`/features/${this.featureId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({featureId:this.featureId}).pipe((0,u.s)(this)).subscribe({next:({data:{feature:t}})=>{var i;t&&(this.model={id:t.id,fields:(i=t,"Gene"==i.featureInstance.__typename?{description:i.featureInstance.description,sourceIds:i.sources.map(t=>t.id)}:{description:void 0,sourceIds:[]})},this.cdr.detectChanges())},error:t=>{console.error("Error retrieving Gene."),console.error(t)},complete:()=>{}})}onSubmit(t){if(!this.featureId)return;let n=function Pe(i,t){const n=t.fields;if(t.comment)return{id:i,fields:{description:g.q2(n.description),sourceIds:n.sourceIds||[]},organizationId:t.organizationId,comment:t.comment}}(this.featureId,t);n&&(this.mutationState=this.reviseEvidenceMutator.mutate(this.submitRevisionsGQL,{input:n}))}static#e=V=()=>(this.\u0275fac=function(n){return new(n||X)(e.rXU(f.WgR),e.rXU(f.Fll),e.rXU(G.N),e.rXU(C.gRc))},this.\u0275cmp=e.VBU({type:X,selectors:[["cvc-gene-revise-form"]],inputs:{featureId:"featureId"},standalone:!1,decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Gene",3,"redirectUrl","mutationState","successMessage"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(n,s){if(1&n&&(e.j41(0,"cvc-form-submission-status-display",2),e.DNE(1,$e,3,2,"ng-template",null,0,e.C5r)(3,Le,2,6,"form",3)(4,Ue,1,0,"ng-template",null,1,e.C5r),e.k0s()),2&n){const r=e.sdS(2),a=e.sdS(5);e.Y8G("redirectUrl",s.url)("mutationState",s.mutationState)("successMessage",r),e.R7$(3),e.Y8G("ngIf",s.model)("ngIfElse",a)}},dependencies:[l.bT,p.CA,c.qT,c.cb,c.j4,x.JA,z.G],encapsulation:2,changeDetection:0}),this)},V());T=(0,I.Cg)([(0,u.d)()],T);const De=(0,R.A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Region"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"aliases",type:"tag-multi-input",props:{label:"Aliases",description:"List any aliases commonly used to refer to this Region",placeholder:"Enter Alias and hit return"}},{key:"description",type:"base-textarea",wrappers:["form-field"],props:{tooltip:"User-defined summary of the clinical relevance of this Region.",placeholder:"Enter a Region Summary",label:"Region Summary",required:!1,rows:5}},{key:"sourceIds",type:"source-multi-select",wrappers:["form-field"],props:{}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",placeholder:"Please enter a comment describing your revisions.",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Region Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{description:void 0,sourceIds:void 0},comment:void 0,organizationId:void 0});var A;const Ve=()=>({});function Ae(i,t){if(1&i&&(e.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),e.j41(1,"a",4),e.EFF(2,"here."),e.k0s()),2&i){const n=e.XpG();e.R7$(),e.Y8G("href",e.mNQ(n.url),e.B4B)}}function Qe(i,t){if(1&i){const n=e.RV6();e.j41(0,"form",5),e.bIt("ngSubmit",function(){d.eBV(n);const r=e.XpG();return d.Njj(r.onSubmit(r.model))}),e.j41(1,"formly-form",6),e.bIt("modelChange",function(r){d.eBV(n);const a=e.XpG();return d.Njj(a.model=r)}),e.k0s()()}if(2&i){const n=e.XpG();e.Y8G("formGroup",n.form),e.R7$(),e.Y8G("form",n.form)("fields",n.fields)("model",n.model)("options",e.lJ4(5,Ve))}}function Je(i,t){1&i&&e.EFF(0," Loading Region... ")}let P=(class ${constructor(t,n,s,r){this.revisableFieldsGQL=t,this.submitRevisionsGQL=n,this.networkErrorService=s,this.cdr=r,this.form=new c.J3({}),this.fields=De,this.reviseRegionMutator=new _.E(s)}ngOnInit(){this.url=`/features/${this.featureId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({featureId:this.featureId}).pipe((0,u.s)(this)).subscribe({next:({data:{feature:t}})=>{var i;t&&(this.model={id:t.id,fields:(i=t,{description:i.description,sourceIds:i.sources.map(t=>t.id),aliases:i.featureAliases})},this.cdr.detectChanges())},error:t=>{console.error("Error retrieving Region."),console.error(t)},complete:()=>{}})}onSubmit(t){if(!this.featureId)return;let n=function ke(i,t){const n=t.fields;if(t.comment)return{id:i,fields:{description:g.q2(n.description),sourceIds:n.sourceIds||[],aliases:n.aliases||[]},organizationId:t.organizationId,comment:t.comment}}(this.featureId,t);n&&(this.mutationState=this.reviseRegionMutator.mutate(this.submitRevisionsGQL,{input:n}))}static#e=A=()=>(this.\u0275fac=function(n){return new(n||$)(e.rXU(f.vNM),e.rXU(f.imn),e.rXU(G.N),e.rXU(C.gRc))},this.\u0275cmp=e.VBU({type:$,selectors:[["cvc-region-revise-form"]],inputs:{featureId:"featureId"},standalone:!1,decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Revision",3,"redirectUrl","mutationState","successMessage"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(n,s){if(1&n&&(e.j41(0,"cvc-form-submission-status-display",2),e.DNE(1,Ae,3,2,"ng-template",null,0,e.C5r)(3,Qe,2,6,"form",3)(4,Je,1,0,"ng-template",null,1,e.C5r),e.k0s()),2&n){const r=e.sdS(2),a=e.sdS(5);e.Y8G("redirectUrl",s.url)("mutationState",s.mutationState)("successMessage",r),e.R7$(3),e.Y8G("ngIf",s.model)("ngIfElse",a)}},dependencies:[l.bT,p.CA,c.qT,c.cb,c.j4,x.JA,z.G],encapsulation:2,changeDetection:0}),this)},A());function Ze(i,t){if(1&i&&(e.j41(0,"span"),e.nrm(1,"cvc-gene-revise-form",2),e.k0s()),2&i){const n=e.XpG(2);e.R7$(),e.Y8G("featureId",n.featureId)}}function We(i,t){if(1&i&&e.nrm(0,"cvc-factor-revise-form",2),2&i){const n=e.XpG(2);e.Y8G("featureId",n.featureId)}}function He(i,t){if(1&i&&e.nrm(0,"cvc-fusion-revise-form",2),2&i){const n=e.XpG(2);e.Y8G("featureId",n.featureId)}}function Ke(i,t){if(1&i&&e.nrm(0,"cvc-region-revise-form",2),2&i){const n=e.XpG(2);e.Y8G("featureId",n.featureId)}}function qe(i,t){if(1&i&&(e.qex(0),e.nVh(1,Ze,2,1,"span")(2,We,1,1,"cvc-factor-revise-form",2)(3,He,1,1,"cvc-fusion-revise-form",2)(4,Ke,1,1,"cvc-region-revise-form",2),e.bVm()),2&i){let n;const s=e.XpG();e.R7$(),e.vxM("Gene"===(n=s.featureType)?1:"Factor"===n?2:"Fusion"===n?3:"Region"===n?4:-1)}}function et(i,t){1&i&&e.EFF(0,"Loading Feature...")}P=(0,I.Cg)([(0,u.d)()],P);const tt=[{path:"",component:oe,data:{breadcrumb:"Revise"},children:[{path:"",redirectTo:"suggest",pathMatch:"full"},{path:"suggest",component:(()=>{var i;class t{constructor(s){this.route=s,this.routeParams$=this.route.params.subscribe(r=>{this.featureId=+r.featureId}),this.queryParams$=this.route.queryParamMap.subscribe(r=>{r.has("featureType")&&(this.featureType=r.get("featureType"))})}ngOnDestroy(){this.routeParams$.unsubscribe(),this.queryParams$.unsubscribe()}static#e=i=()=>(this.\u0275fac=function(r){return new(r||t)(e.rXU(w.nX))},this.\u0275cmp=e.VBU({type:t,selectors:[["cvc-features-suggest"]],standalone:!1,decls:3,vars:2,consts:[["loadingFeature",""],[4,"ngIf","ngIfElse"],[3,"featureId"]],template:function(r,a){if(1&r&&e.DNE(0,qe,5,1,"ng-container",1)(1,et,1,0,"ng-template",null,0,e.C5r),2&r){const E=e.sdS(2);e.Y8G("ngIf",a.featureId&&a.featureType)("ngIfElse",E)}},dependencies:[l.bT,T,M,S,P],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}))}return i(),t})(),data:{breadcrumb:"Suggest Revision"}}]}];let nt=(()=>{var i;class t{static#e=i=()=>(this.\u0275fac=function(r){return new(r||t)},this.\u0275mod=e.$C({type:t}),this.\u0275inj=d.G2t({imports:[U.iI.forChild(tt),we]}))}return i(),t})(),it=(()=>{var i;class t{static#e=i=()=>(this.\u0275fac=function(r){return new(r||t)},this.\u0275mod=e.$C({type:t}),this.\u0275inj=d.G2t({imports:[l.MD,U.iI,nt,m.ZJ,k.Y3,v.f3,J.A,N.C,Z.i]}))}return i(),t})()}}]);