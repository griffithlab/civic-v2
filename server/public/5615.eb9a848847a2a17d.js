"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[5615],{8476:(_,h,i)=>{i.d(h,{S:()=>c});var t=i(177),m=i(1188),s=i(5316),v=i(8168),a=i(513),n=i(776),f=i(3617),r=i(4531),l=i(3953);let c=(()=>{class d{static#e=this.\u0275fac=function(e){return new(e||d)};static#t=this.\u0275mod=l.$C({type:d});static#i=this.\u0275inj=l.G2t({imports:[t.MD,m.iI,a.Zw,f.$,v.m,s.P,r.C,n.s]})}return d})()},4594:(_,h,i)=>{i.d(h,{e:()=>D});var t=i(1635),m=i(9417),s=i(1226),v=i(9447),a=i(5540),n=i(9894),f=i(4902);const c=(0,i(7480).A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"New Evidence Item"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"molecularProfileId",type:"molecular-profile-select",props:{required:!0,tooltip:"A single variant (Simple Molecular Profile) or a combination of variants (Complex Molecular Profile) relevant to the curated evidence.",watchVariantMolecularProfileId:!0}},{key:"sourceId",type:"source-select",props:{required:!0}}]},{wrappers:["form-row"],props:{formRowOptions:{responsive:{xs:24,lg:12,xl:8,xxl:6}}},fieldGroup:[{key:"evidenceType",type:"type-select",props:{required:!0}},{key:"evidenceDirection",type:"direction-select",props:{required:!0}},{key:"significance",type:"significance-select",props:{required:!0}},{key:"diseaseId",type:"disease-select",props:{}},{key:"therapyIds",type:"therapy-multi-select",props:{}},{key:"therapyInteractionType",type:"interaction-select",props:{}},{key:"evidenceLevel",type:"level-select",props:{required:!0}},{key:"rating",type:"rating",props:{required:!0}},{key:"variantOrigin",type:"origin-select",props:{required:!0}},{key:"phenotypeIds",type:"phenotype-multi-select",props:{}}]},{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"description",type:"base-textarea",props:{tooltip:"Your original description of evidence from published literature detailing the association or lack of association between a variant and its predictive, prognostic, diagnostic, predisposing, functional or oncogenic value. ",placeholder:"Enter an Evidence Statement",description:'Data constituting personal or identifying information should not be entered (e.g. <a href="https://www.hipaajournal.com/what-is-protected-health-information/" target="_blank">protected health information (PHI) as defined by HIPAA</a> in the U.S. and/or comparable laws in your jurisdiction).',label:"Evidence Statement",required:!0}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",required:!1,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Evidence Item",align:"right"}}]}]}],f.r);var d=i(6354),I=i(5964),P=i(9199),e=i(3953),C=i(9145),T=i(1188),$=i(4222),M=i(177),A=i(3617),b=i(8524),F=i(8927),L=i(8721),w=i(8199),x=i(1774);const R=p=>["/evidence",p,"summary"];function q(p,o){if(1&p&&(e.EFF(0," View your new EID "),e.j41(1,"a",7),e.EFF(2,"here"),e.k0s(),e.EFF(3,". You will be redirected shortly. ")),2&p){const u=e.XpG();e.R7$(),e.Y8G("routerLink",e.eq3(1,R,u.newEvidenceId))}}function G(p,o){if(1&p&&e.nrm(0,"nz-alert",9),2&p){e.XpG();const u=e.sdS(3);e.Y8G("nzMessage",u)}}function N(p,o){if(1&p&&(e.j41(0,"p")(1,"strong"),e.EFF(2," Evidence for this Molecular Profile has already been curated from this Source. Please double check that your Evidence has not already been entered. "),e.k0s()(),e.nrm(3,"cvc-evidence-table",10)),2&p){const u=e.XpG(2);e.R7$(3),e.Y8G("molecularProfileId",u.selectedMpId)("sourceId",u.selectedSourceId)}}function V(p,o){if(1&p&&(e.qex(0),e.DNE(1,G,1,1,"nz-alert",8)(2,N,4,2,"ng-template",null,2,e.C5r),e.nrm(4,"br"),e.bVm()),2&p){const u=o.ngIf;e.R7$(),e.Y8G("ngIf",u>0)}}function U(p,o){if(1&p&&e.nrm(0,"nz-alert",9),2&p){e.XpG();const u=e.sdS(3);e.Y8G("nzMessage",u)}}function B(p,o){if(1&p&&(e.j41(0,"p")(1,"strong"),e.EFF(2," This Source has been marked as fully curated by an Editor. Please double check that your intended Evidence Item does not already exist. "),e.k0s()(),e.nrm(3,"cvc-evidence-table",11)),2&p){const u=e.XpG(2);e.R7$(3),e.Y8G("sourceId",u.selectedSourceId)}}function z(p,o){if(1&p&&(e.qex(0),e.DNE(1,U,1,1,"nz-alert",8)(2,B,4,1,"ng-template",null,3,e.C5r),e.nrm(4,"br"),e.bVm()),2&p){const u=o.ngIf;e.R7$(),e.Y8G("ngIf",u)}}function K(p,o){if(1&p){const u=e.RV6();e.j41(0,"form",12),e.bIt("ngSubmit",function(){e.eBV(u);const y=e.XpG();return e.Njj(y.onSubmit(y.model))}),e.j41(1,"formly-form",13),e.bIt("modelChange",function(y){e.eBV(u);const E=e.XpG();return E.model=y,e.Njj(E.onModelChange(y))}),e.k0s()()}if(2&p){const u=e.XpG();e.Y8G("formGroup",u.form),e.R7$(),e.Y8G("form",u.form)("fields",u.fields)("model",u.model)("options",u.options)}}function W(p,o){1&p&&e.EFF(0," Loading Evidence Item... ")}let D=class S{constructor(o,u,g,y,E,j,X){this.revisableFieldsGQL=o,this.submitEvidenceGQL=u,this.existingEvidenceGQL=g,this.fullyCuratedSourceGQL=y,this.cdr=E,this.route=j,this.form=new m.J3({}),this.fields=c,this.state=new v.D,this.options={formState:this.state},this.submitEvidenceMutator=new s.E(X),this.routeSub=this.route.queryParams.subscribe(O=>{O.existingEvidenceId?(this.existingEvidenceId=+O.existingEvidenceId,this.state.formMode="clone"):this.model={fields:{}}})}ngOnInit(){this.countQueryRef=this.existingEvidenceGQL.watch({molecularProfileId:0,sourceId:0}),this.curatedQueryRef=this.fullyCuratedSourceGQL.watch({sourceId:0}),this.existingEvidenceCount$=this.countQueryRef?.valueChanges.pipe((0,d.T)(o=>o.data?.evidenceItems?.totalCount),(0,I.p)(P.kP),(0,n.s)(this)),this.fullyCuratedSource$=this.curatedQueryRef?.valueChanges.pipe((0,d.T)(o=>o.data?.source?.fullyCurated),(0,n.s)(this))}ngAfterViewInit(){this.existingEvidenceId?this.revisableFieldsGQL.fetch({evidenceId:this.existingEvidenceId}).pipe((0,n.s)(this)).subscribe({next:({data:{evidenceItem:o}})=>{o&&(this.model={fields:(0,a.LC)(o)},this.model.fields.description=void 0,this.cdr.detectChanges())},error:o=>{console.error("Error retrieving evidenceItem."),console.error(o)},complete:()=>{this.state.formReady$.next(!0)}}):this.state.formReady$.next(!0)}onSubmit(o){const u=(0,a.kO)(o);u&&(this.mutationState=this.submitEvidenceMutator.mutate(this.submitEvidenceGQL,{input:u},void 0,g=>{this.newEvidenceId=g.submitEvidence?.evidenceItem.id,this.newEvidenceUrl=`/evidence/${this.newEvidenceId}/summary`}))}onModelChange(o){o.fields.sourceId&&o.fields.molecularProfileId?(o.fields.sourceId!=this.selectedSourceId||o.fields.molecularProfileId!=this.selectedMpId)&&(this.selectedSourceId=o.fields.sourceId,this.selectedMpId=o.fields.molecularProfileId,this.countQueryRef?.refetch({molecularProfileId:o.fields.molecularProfileId,sourceId:o.fields.sourceId})):this.countQueryRef?.refetch({molecularProfileId:0,sourceId:0}),o.fields.sourceId?o.fields.sourceId!=this.selectedSourceId&&(this.selectedSourceId=o.fields.sourceId,this.curatedQueryRef?.refetch({sourceId:this.selectedSourceId})):(this.selectedSourceId=void 0,this.curatedQueryRef?.refetch({sourceId:0}))}ngOnDestroy(){this.options.formState.onDestroy(),this.routeSub.unsubscribe()}static#e=this.\u0275fac=function(u){return new(u||S)(e.rXU(C.V1_),e.rXU(C.LXB),e.rXU(C.k1Y),e.rXU(C.aX5),e.rXU(e.gRc),e.rXU(T.nX),e.rXU($.N))};static#t=this.\u0275cmp=e.VBU({type:S,selectors:[["cvc-evidence-submit-form"]],decls:10,vars:11,consts:[["success",""],["loadingModel",""],["duplicateEvidenceAlert",""],["fullyCuratedAlert",""],["entityType","Evidence Item",3,"mutationState","redirectUrl","successMessage"],[4,"ngIf"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"routerLink"],["nzType","warning",3,"nzMessage",4,"ngIf"],["nzType","warning",3,"nzMessage"],["cvcHeight","150",3,"molecularProfileId","sourceId"],["cvcHeight","150",3,"sourceId"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[2,"width","100%",3,"modelChange","form","fields","model","options"]],template:function(u,g){if(1&u&&(e.j41(0,"cvc-form-submission-status-display",4),e.DNE(1,q,4,3,"ng-template",null,0,e.C5r)(3,V,5,1,"ng-container",5),e.nI1(4,"ngrxPush"),e.DNE(5,z,5,1,"ng-container",5),e.nI1(6,"ngrxPush"),e.DNE(7,K,2,5,"form",6)(8,W,1,0,"ng-template",null,1,e.C5r),e.k0s()),2&u){const y=e.sdS(2),E=e.sdS(9);e.Y8G("mutationState",g.mutationState)("redirectUrl",g.newEvidenceUrl)("successMessage",y),e.R7$(3),e.Y8G("ngIf",e.bMT(4,7,g.existingEvidenceCount$)),e.R7$(2),e.Y8G("ngIf",e.bMT(6,9,g.fullyCuratedSource$)),e.R7$(2),e.Y8G("ngIf",g.model)("ngIfElse",E)}},dependencies:[M.bT,T.Wk,A.Y,m.qT,m.cb,m.j4,b.aF,F.CA,L.G,w.N,x.L9],encapsulation:2,changeDetection:0})};D=(0,t.Cg)([(0,n.d)()],D)},4902:(_,h,i)=>{i.d(h,{I:()=>t,r:()=>m});const t={featureId:void 0,variantId:void 0,significance:void 0,description:void 0,diseaseId:void 0,therapyIds:void 0,therapyInteractionType:void 0,evidenceDirection:void 0,evidenceLevel:void 0,evidenceType:void 0,molecularProfileId:void 0,phenotypeIds:void 0,rating:void 0,sourceId:void 0,variantOrigin:void 0},m={clientMutationId:void 0,fields:t,comment:void 0,organizationId:void 0}},5183:(_,h,i)=>{i.d(h,{$L:()=>a,zn:()=>f});var t=i(896),m=i(9145),s=i(1413),v=i(1018),a=function(r){return r.EVIDENCE="Evidence",r.ASSERTION="Assertion",r}(a||{});class f{constructor(l){this.formReady$=new s.B,this.formLayout="vertical",this.formMode="add",this.validStates=new Map,this.typeOption$=new s.B,this.requiresTherapy$=new s.B,this.requiresDisease$=new s.B,this.requiresAcmgCode$=new s.B,this.requiresAmpLevel$=new s.B,this.requiresClingenCode$=new s.B,this.allowsFdaApproval$=new s.B,this.getTypeOptions=()=>this.entityName==a.ASSERTION?(0,v.KF)(m.XEW).map(c=>c):(0,v.KF)(m.M1P).map(c=>c),this.getSignificanceOptions=c=>this.validStates.get(c)?.significance||[],this.getInteractionOptions=()=>(0,v.KF)(m.qld).map(c=>c),this.isValidSignificanceOption=(c,d)=>{const I=this.validStates.get(c);return!I||I.significance.includes(d)},this.getDirectionOptions=c=>this.validStates.get(c)?.entityDirection||[],this.isValidDirectionOption=(c,d)=>{const I=this.validStates.get(c);return!I||I.entityDirection.includes(d)},this.requiresTherapy=c=>{const d=this.validStates.get(c);return void 0===d||d.requiresTherapy},this.requiresDisease=c=>{const d=this.validStates.get(c);return void 0===d||d.requiresDisease},this.requiresAcmgCodes=c=>{const d=this.validStates.get(c);return void 0===d||d.requiresAcmgCodes},this.requiresAmpLevel=c=>{const d=this.validStates.get(c);return void 0===d||d.requiresAmpLevel},this.requiresClingenCodes=c=>{const d=this.validStates.get(c);return void 0===d||d.requiresClingenCodes},this.allowsFdaApproval=c=>{const d=this.validStates.get(c);return void 0===d||d.allowsFdaApproval},this.getOptionsFromEnums=c=>0===c.length?[]:c.map(d=>({value:d,label:(0,t.u)(d)})),this.fields={},this.options={},this.enums={},this.requires={},this.entityName=l,this.pluralNames=new Map,this.pluralNames.set(a.ASSERTION,"Assertions"),this.pluralNames.set(a.EVIDENCE,"Evidence")}onDestroy(){}}},9447:(_,h,i)=>{i.d(h,{D:()=>n});var t=i(9145),m=i(9894),s=i(4412),v=i(4902),a=i(5183);class n extends a.zn{constructor(){super(a.$L.EVIDENCE);const r=v.I;this.fields={molecularProfileId$:new s.t(r.molecularProfileId),variantId$:new s.t(r.variantId),variantMolecularProfile$:new s.t(void 0),featureId$:new s.t(r.featureId),evidenceType$:new s.t(r.evidenceType),evidenceLevel$:new s.t(r.evidenceLevel),evidenceDirection$:new s.t(r.evidenceDirection),significance$:new s.t(r.significance),variantOrigin$:new s.t(r.variantOrigin),diseaseId$:new s.t(r.diseaseId),therapyIds$:new s.t(r.therapyIds),therapyInteractionType$:new s.t(r.therapyInteractionType),rating$:new s.t(r.rating),phenotypeIds$:new s.t(r.phenotypeIds),sourceId$:new s.t(r.sourceId),description$:new s.t(void 0),comment$:new s.t(void 0)},this.enums={entityType$:new s.t(this.getTypeOptions()),significance$:new s.t([]),direction$:new s.t([]),interaction$:new s.t(this.getInteractionOptions())},this.requires={requiresDisease$:new s.t(!1),requiresTherapy$:new s.t(!1),requiresTherapyInteractionType$:new s.t(!1),requiresClingenCodes$:new s.t(!1),requiresAcmgCodes$:new s.t(!1),requiresAmpLevel$:new s.t(!1),allowsFdaApproval$:new s.t(!1)},this.fields.evidenceType$.pipe((0,m.s)(this,"onDestroy")).subscribe(l=>{if(!l)return Object.entries(this.requires).forEach(([c,d])=>{d.next(!1)}),this.enums.significance$.next([]),void this.enums.direction$.next([]);this.enums.significance$.next(this.getSignificanceOptions(l)),this.enums.direction$.next(this.getDirectionOptions(l)),this.requires.requiresDisease$.next(this.requiresDisease(l)),this.requires.requiresTherapy$.next(this.requiresTherapy(l)),this.requires.requiresTherapyInteractionType$.next(this.requiresTherapy(l)),this.requires.requiresClingenCodes$.next(this.requiresClingenCodes(l)),this.requires.requiresAcmgCodes$.next(this.requiresAcmgCodes(l)),this.requires.allowsFdaApproval$.next(this.allowsFdaApproval(l))}),this.fields.therapyIds$.pipe((0,m.s)(this,"onDestroy")).subscribe(l=>{this.requires.requiresTherapyInteractionType$.next(!!l&&l.length>1)}),this.validStates.set(t.M1P.Predictive,{entityType:t.M1P.Predictive,significance:[t.Vue.Sensitivityresponse,t.Vue.Resistance,t.Vue.AdverseResponse,t.Vue.ReducedSensitivity,t.Vue.Na],entityDirection:[t.$Ni.Supports,t.$Ni.DoesNotSupport],requiresDisease:!0,requiresTherapy:!0,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.M1P.Diagnostic,{entityType:t.M1P.Diagnostic,significance:[t.Vue.Positive,t.Vue.Negative],entityDirection:[t.$Ni.Supports,t.$Ni.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.M1P.Prognostic,{entityType:t.M1P.Prognostic,significance:[t.Vue.BetterOutcome,t.Vue.PoorOutcome,t.Vue.Na],entityDirection:[t.$Ni.Supports,t.$Ni.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.M1P.Oncogenic,{entityType:t.M1P.Oncogenic,significance:[t.Vue.Oncogenicity,t.Vue.Protectiveness],entityDirection:[t.$Ni.Supports,t.$Ni.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.M1P.Predisposing,{entityType:t.M1P.Predisposing,significance:[t.Vue.Predisposition,t.Vue.Protectiveness],entityDirection:[t.$Ni.Supports,t.$Ni.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.M1P.Functional,{entityType:t.M1P.Functional,significance:[t.Vue.GainOfFunction,t.Vue.LossOfFunction,t.Vue.UnalteredFunction,t.Vue.Neomorphic,t.Vue.DominantNegative,t.Vue.Unknown],entityDirection:[t.$Ni.Supports,t.$Ni.DoesNotSupport],requiresDisease:!1,requiresTherapy:!1,requiresAcmgCodes:!1,requiresClingenCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1})}}},7480:(_,h,i)=>{function t(m,s){const v=(n,f)=>{let r;for(let l of n)if(l.fieldGroup)r=v(l.fieldGroup,f);else if(l.key===f){r=l;break}return r},a=(n,f)=>{for(let r of Object.keys(f))if(f[r]instanceof Object&&!Array.isArray(f[r]))a(n,f[r]);else{const l=v(n,r);l&&(l.defaultValue=f[r])}return n};return a(m,s)}i.d(h,{A:()=>t})},5540:(_,h,i)=>{i.d(h,{LC:()=>m,ep:()=>s,kO:()=>v});var t=i(5741);function m(a){return{significance:a.significance,description:a.description,diseaseId:a.disease?.id,therapyIds:a.therapies.map(n=>n.id),therapyInteractionType:a.therapyInteractionType,evidenceDirection:a.evidenceDirection,evidenceLevel:a.evidenceLevel,evidenceType:a.evidenceType,molecularProfileId:a.molecularProfile.id,phenotypeIds:a.phenotypes.map(n=>n.id),rating:a.evidenceRating,sourceId:a.source.id,variantOrigin:a.variantOrigin}}function s(a,n){let f=v(n);if(f)return{id:a,comment:f.comment,organizationId:f.organizationId,fields:f.fields}}function v(a){const n=a.fields;if(![n.molecularProfileId,n.variantOrigin,n.sourceId,n.evidenceType,n.significance,n.evidenceLevel,n.evidenceDirection,n.rating].find(r=>void 0===r))return{fields:{molecularProfileId:n.molecularProfileId,variantOrigin:n.variantOrigin,sourceId:n.sourceId,evidenceType:n.evidenceType,significance:n.significance,evidenceLevel:n.evidenceLevel,evidenceDirection:n.evidenceDirection,rating:n.rating,description:t.q2(n.description),diseaseId:t.pz(n.diseaseId),phenotypeIds:n.phenotypeIds?n.phenotypeIds:[],therapyIds:n.therapyIds?n.therapyIds:[],therapyInteractionType:t.pz(n.therapyInteractionType)},organizationId:a.organizationId,comment:a.comment}}}}]);