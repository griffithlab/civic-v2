"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[2012],{5749:(B,f,n)=>{n.d(f,{m:()=>J});var t=n(5e3),p=n(9808),l=n(325),h=n(8481),r=n(3610),E=n(4850),d=n(712),z=n(7484),A=n(7881),y=n(1894),P=n(3098),O=n(6550),M=n(6949);const D=function(e,s){return{displayName:e,profileImagePath:s}};function R(e,s){if(1&e&&(t._UZ(0,"cvc-user-avatar",12),t.TgZ(1,"span",13),t._uU(2),t.qZA()),2&e){const o=t.oxw().ngIf;t.Q6J("user",t.WLB(2,D,o.name,o.profileImagePath)),t.xp6(2),t.Oqu(o.name)}}function U(e,s){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const o=s.ngIf;t.xp6(1),t.Oqu(o)}}function v(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"cvc-link-tag",14),t._uU(2),t.qZA(),t.BQk()),2&e){const o=t.oxw().ngIf;t.xp6(1),t.Q6J("href",o.url),t.xp6(1),t.hij(" ",o.name," ")}}function x(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"nz-card",4),t.YNc(2,R,3,5,"ng-template",null,5,t.W1O),t.TgZ(4,"nz-row"),t.TgZ(5,"nz-col",6),t.TgZ(6,"div",7),t.TgZ(7,"p",8),t.YNc(8,U,2,1,"span",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"nz-descriptions",10),t.TgZ(10,"nz-descriptions-item",11),t.YNc(11,v,3,2,"ng-container",9),t.qZA(),t.qZA(),t.qZA(),t.BQk()),2&e){const o=s.ngIf,I=t.MAs(3);t.oxw();const L=t.MAs(4),N=t.MAs(6);t.xp6(1),t.Q6J("nzTitle",I),t.xp6(7),t.Q6J("ngIf",o.description)("ngIfElse",L),t.xp6(1),t.Q6J("nzColumn",2),t.xp6(2),t.Q6J("ngIf",o.url)("ngIfElse",N)}}function _(e,s){1&e&&t._uU(0," Organization has not provided a description.\n")}function u(e,s){1&e&&t._uU(0," --\n")}let c=(()=>{class e{constructor(o){this.gql=o}ngOnInit(){if(void 0===this.orgId)throw new Error("cvc-org-popover requires orgId input.");this.org$=this.gql.watch({orgId:this.orgId}).valueChanges.pipe((0,E.U)(({data:o})=>o.organization))}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(d.X5f))},e.\u0275cmp=t.Xpm({type:e,selectors:[["cvc-organization-popover"]],inputs:{orgId:"orgId"},decls:7,vars:3,consts:[["id","popover-content"],[4,"ngIf"],["noDesc",""],["noHomepage",""],["nzBordered","false","id","card-content",3,"nzTitle"],["cardTitle",""],["nzSpan","24"],[1,"popover-text"],["nz-typography",""],[4,"ngIf","ngIfElse"],["nzSize","small","nzBordered","true",3,"nzColumn"],["nzTitle","Homepage"],["size","default",3,"user"],["nz-typography","","nzStyle","default",1,"display-name"],[3,"href"]],template:function(o,I){1&o&&(t.TgZ(0,"div",0),t.YNc(1,x,12,6,"ng-container",1),t.ALo(2,"ngrxPush"),t.qZA(),t.YNc(3,_,1,0,"ng-template",null,2,t.W1O),t.YNc(5,u,1,0,"ng-template",null,3,t.W1O)),2&o&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,I.org$)))},directives:[p.O5,z.bd,A.L,y.SK,y.t3,P.R7,P.uj,O.l],pipes:[M.fM],styles:["[_nghost-%COMP%]{display:block;margin:-8px -12px}[_nghost-%COMP%]     .ant-card-body{padding:0;margin-top:1px}[_nghost-%COMP%]     .ant-descriptions-view{border:none}[_nghost-%COMP%]     #entity-child-counts{border-top:1px solid #f0f0f0;padding:8px}[_nghost-%COMP%]     #entity-child-counts nz-space{width:100%}[_nghost-%COMP%]     #entity-child-counts nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     #entity-child-counts nz-space-item:last-child nz-tag{margin-right:0}.popover-text[_ngcontent-%COMP%]{width:100%;padding:8px;border-bottom:1px solid #f0f0f0}#popover-content[_ngcontent-%COMP%]{min-width:350px;max-width:500px;min-height:125px}"]}),e})();var i=n(647);function C(e,s){}function a(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"a",5),t.YNc(2,C,0,0,"ng-template",6),t.qZA(),t.BQk()),2&e){const o=t.oxw(),I=t.MAs(2);t.xp6(1),t.MGl("routerLink","/organizations/",o.org.id,""),t.xp6(1),t.Q6J("ngTemplateOutlet",I)}}function m(e,s){}function g(e,s){if(1&e&&t._UZ(0,"cvc-organization-popover",10),2&e){const o=t.oxw(3);t.Q6J("orgId",o.org.id)}}function T(e,s){if(1&e&&t.YNc(0,g,1,1,"cvc-organization-popover",9),2&e){const o=t.oxw(2);t.Q6J("ngIf",o.enablePopover)}}function Z(e,s){if(1&e&&(t.TgZ(0,"nz-tag",7),t.YNc(1,m,0,0,"ng-template",6),t.qZA(),t.YNc(2,T,1,1,"ng-template",null,8,t.W1O)),2&e){const o=t.MAs(3);t.oxw();const I=t.MAs(8);t.Q6J("nzPopoverContent",o),t.xp6(1),t.Q6J("ngTemplateOutlet",I)}}function W(e,s){}function b(e,s){if(1&e&&(t.TgZ(0,"nz-tag"),t.YNc(1,W,0,0,"ng-template",6),t.qZA()),2&e){t.oxw();const o=t.MAs(8);t.xp6(1),t.Q6J("ngTemplateOutlet",o)}}function K(e,s){}function S(e,s){if(1&e&&t.YNc(0,K,0,0,"ng-template",6),2&e){t.oxw();const o=t.MAs(2);t.Q6J("ngTemplateOutlet",o)}}function Q(e,s){if(1&e&&(t._UZ(0,"i",11),t._uU(1)),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.org.name,"\n")}}let J=(()=>{class e{constructor(){this.linked=!0,this.enablePopover=!0}ngOnInit(){if(void 0===this.org)throw new Error("cvc-org-tag requires valid TagLinkableOrganization input, none provided.")}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["cvc-organization-tag"]],inputs:{org:"org",linked:"linked",enablePopover:"enablePopover"},decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["tag",""],["noPopover",""],["unlinked",""],["tagContent",""],[3,"routerLink"],[3,"ngTemplateOutlet"],["nz-popover","",3,"nzPopoverContent"],["orgPopover",""],[3,"orgId",4,"ngIf"],[3,"orgId"],["nz-icon","","nzType","civic-organization","nzTheme","twotone","nzTwotoneColor","#58A0C4"]],template:function(o,I){if(1&o&&(t.YNc(0,a,3,2,"ng-container",0),t.YNc(1,Z,4,2,"ng-template",null,1,t.W1O),t.YNc(3,b,2,1,"ng-template",null,2,t.W1O),t.YNc(5,S,1,1,"ng-template",null,3,t.W1O),t.YNc(7,Q,2,1,"ng-template",null,4,t.W1O)),2&o){const L=t.MAs(6);t.Q6J("ngIf",I.linked)("ngIfElse",L)}},directives:[p.O5,l.yS,p.tP,h.j,r.lU,c,i.Ls],styles:["[_nghost-%COMP%]{display:inline-block}"]}),e})()},4805:(B,f,n)=>{n.d(f,{_:()=>h});var t=n(5e3),p=n(7484);const l=["*"];let h=(()=>{class r{constructor(){this.cvcTitle=void 0}ngOnInit(){}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["cvc-entity-table-card"]],inputs:{cvcTitle:"cvcTitle"},ngContentSelectors:l,decls:3,vars:1,consts:[[3,"nzTitle"],[1,"card-content"]],template:function(d,z){1&d&&(t.F$t(),t.TgZ(0,"nz-card",0),t.TgZ(1,"div",1),t.Hsn(2),t.qZA(),t.qZA()),2&d&&t.Q6J("nzTitle",z.cvcTitle)},directives:[p.bd],styles:["[_nghost-%COMP%]{display:block}.card-content[_ngcontent-%COMP%]{margin:-11px -12px -13px}"]}),r})()},316:(B,f,n)=>{n.d(f,{C:()=>h});var t=n(9808),p=n(7484),l=n(5e3);let h=(()=>{class r{}return r.\u0275fac=function(d){return new(d||r)},r.\u0275mod=l.oAB({type:r}),r.\u0275inj=l.cJS({imports:[[t.ez,p.vh]]}),r})()},8766:(B,f,n)=>{n.d(f,{P:()=>P});var t=n(9808),p=n(6042),l=n(6949),h=n(404),r=n(7525),E=n(1825),d=n(4182),z=n(1894),A=n(8144),y=n(5e3);let P=(()=>{class O{}return O.\u0275fac=function(D){return new(D||O)},O.\u0275mod=y.oAB({type:O}),O.\u0275inj=y.cJS({imports:[[t.ez,d.u5,d.UX,p.sL,h.cg,r.j,A.zf,z.Jb,l.WG,E.A]]}),O})()},3997:(B,f,n)=>{n.d(f,{m:()=>U});var t=n(5e3),p=n(6123),l=n(712),h=n(8929),r=n(7625),E=n(9169),d=n(7525),z=n(8144),A=n(8227),y=n(1793),P=n(6042),O=n(2643),M=n(2683);function D(v,x){if(1&v){const _=t.EpF();t.TgZ(0,"cvc-org-selector-btn-group",5),t.NdJ("selectedOrgChange",function(c){return t.CHM(_),t.oxw().mostRecentOrg=c}),t.TgZ(1,"button",6),t.NdJ("click",function(){t.CHM(_);const c=t.oxw();return c.moderate(c.evidenceStatuses.Accepted)}),t._uU(2),t.qZA(),t.qZA()}if(2&v){const _=t.oxw();t.Q6J("selectedOrg",_.mostRecentOrg),t.xp6(2),t.hij("Accept ",_.entityType,"")}}function R(v,x){if(1&v){const _=t.EpF();t.TgZ(0,"cvc-org-selector-btn-group",7),t.NdJ("selectedOrgChange",function(c){return t.CHM(_),t.oxw().mostRecentOrg=c}),t.TgZ(1,"button",8),t.NdJ("click",function(){t.CHM(_);const c=t.oxw();return c.moderate(c.evidenceStatuses.Rejected)}),t._uU(2),t.qZA(),t.qZA()}if(2&v){const _=t.oxw();t.Q6J("selectedOrg",_.mostRecentOrg),t.xp6(2),t.hij("Reject ",_.entityType,"")}}let U=(()=>{class v{constructor(_,u,c){this.revertEvidenceGQL=_,this.revertAssertionGQL=u,this.networkErrorService=c,this.onModerated=new t.vpe,this.evidenceStatuses=l.RTy,this.isSubmitting=!1,this.showConfirm=!1,this.destroy$=new h.xQ,this.moderateAssertionMutator=new p.U(c),this.moderateEvidenceMutator=new p.U(c)}moderate(_){var u,c;let i;this.isSubmitting=!0,i="EvidenceItem"===this.entityType?this.moderateEvidenceMutator.mutate(this.revertEvidenceGQL,{input:{evidenceItemId:this.entityId,organizationId:null===(u=this.mostRecentOrg)||void 0===u?void 0:u.id,newStatus:_}}):this.moderateAssertionMutator.mutate(this.revertAssertionGQL,{input:{assertionId:this.entityId,organizationId:null===(c=this.mostRecentOrg)||void 0===c?void 0:c.id,newStatus:_}}),i.submitSuccess$.pipe((0,r.R)(this.destroy$)).subscribe(C=>{C&&(this.isSubmitting=!1,this.showConfirm=!1,this.onModerated.emit(_))}),i.submitError$.pipe((0,r.R)(this.destroy$)).subscribe(C=>{C&&(this.isSubmitting=!1,this.showConfirm=!1,this.onModerated.emit(C))}),i.isSubmitting$.pipe((0,r.R)(this.destroy$)).subscribe(C=>{this.isSubmitting=C})}ngOnInit(){if(void 0===this.viewer)throw new Error("Must pass in a viewer to the CvcEntitySubscriptionButtonComponent");if(void 0===this.entityId)throw new Error("Must pass in an id to the CvcEntitySubscriptionButtonComponent");if(void 0===this.entityType)throw new Error("Must pass in an entityType to the CvcEntitySubscriptionButtonComponent");this.mostRecentOrg=this.viewer.mostRecentOrg}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return v.\u0275fac=function(_){return new(_||v)(t.Y36(l.MYm),t.Y36(l._jb),t.Y36(E.Y))},v.\u0275cmp=t.Xpm({type:v,selectors:[["cvc-moderate-entity-buttons"]],inputs:{viewer:"viewer",entityType:"entityType",entityId:"entityId"},outputs:{onModerated:"onModerated"},decls:5,vars:1,consts:[[1,"center"],[3,"nzSpinning"],["nzDirection","horizontal","nzSize","large"],[3,"selectedOrg","selectedOrgChange",4,"nzSpaceItem"],["nzDanger","","nzType","primary",3,"selectedOrg","selectedOrgChange",4,"nzSpaceItem"],[3,"selectedOrg","selectedOrgChange"],["cvcOrgSelectorBtn","","nzType","primary","nzSize","large","nz-button","",3,"click"],["nzDanger","","nzType","primary",3,"selectedOrg","selectedOrgChange"],["cvcOrgSelectorBtn","","nzDanger","","nzType","primary","nzSize","large","nz-button","",3,"click"]],template:function(_,u){1&_&&(t.TgZ(0,"div",0),t.TgZ(1,"nz-spin",1),t.TgZ(2,"nz-space",2),t.YNc(3,D,3,2,"cvc-org-selector-btn-group",3),t.YNc(4,R,3,2,"cvc-org-selector-btn-group",4),t.qZA(),t.qZA(),t.qZA()),2&_&&(t.xp6(1),t.Q6J("nzSpinning",u.isSubmitting))},directives:[d.W,z.NU,z.$1,A.q,y.m,P.ix,O.dQ,M.w],styles:["[_nghost-%COMP%]{display:block}.center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),v})()},8525:(B,f,n)=>{n.d(f,{e:()=>c});var t=n(5e3),p=n(6123),l=n(712),h=n(8929),r=n(7625),E=n(9169),d=n(6042),z=n(2643),A=n(2683),y=n(404),P=n(647),O=n(3640),M=n(7525),D=n(8144),R=n(8227),U=n(1793);function v(i,C){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const a=t.oxw();t.xp6(1),t.hij("Revert this ",a.entityType," to Submitted?")}}function x(i,C){if(1&i){const a=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"cvc-org-selector-btn-group",8),t.NdJ("selectedOrgChange",function(g){return t.CHM(a),t.oxw(2).mostRecentOrg=g}),t.TgZ(2,"button",9),t.NdJ("click",function(){return t.CHM(a),t.oxw(2).revert()}),t._uU(3,"Revert"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const a=t.oxw(2);t.xp6(1),t.Q6J("selectedOrg",a.mostRecentOrg)}}function _(i,C){if(1&i){const a=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",10),t.NdJ("click",function(){return t.CHM(a),t.oxw(2).showConfirm=!1}),t._uU(2,"Cancel"),t.qZA(),t.qZA()}}function u(i,C){if(1&i&&(t.TgZ(0,"nz-spin",5),t.TgZ(1,"nz-space",6),t.YNc(2,x,4,1,"span",7),t.YNc(3,_,3,0,"span",7),t.qZA(),t.qZA()),2&i){const a=t.oxw();t.Q6J("nzSpinning",a.isSubmitting)}}let c=(()=>{class i{constructor(a,m,g){this.revertEvidenceGQL=a,this.revertAssertionGQL=m,this.networkErrorService=g,this.onReverted=new t.vpe,this.isSubmitting=!1,this.showConfirm=!1,this.destroy$=new h.xQ,this.revertAssertionMutator=new p.U(g),this.revertEvidenceMutator=new p.U(g)}revert(){var a,m;let g;this.isSubmitting=!0,g="EvidenceItem"===this.entityType?this.revertEvidenceMutator.mutate(this.revertEvidenceGQL,{input:{evidenceItemId:this.entityId,organizationId:null===(a=this.mostRecentOrg)||void 0===a?void 0:a.id,newStatus:l.RTy.Submitted}}):this.revertAssertionMutator.mutate(this.revertAssertionGQL,{input:{assertionId:this.entityId,organizationId:null===(m=this.mostRecentOrg)||void 0===m?void 0:m.id,newStatus:l.RTy.Submitted}}),g.submitSuccess$.pipe((0,r.R)(this.destroy$)).subscribe(T=>{T&&(this.isSubmitting=!1,this.showConfirm=!1,this.onReverted.emit(!0))}),g.submitError$.pipe((0,r.R)(this.destroy$)).subscribe(T=>{T&&(this.isSubmitting=!1,this.showConfirm=!1,this.onReverted.emit(T))}),g.isSubmitting$.pipe((0,r.R)(this.destroy$)).subscribe(T=>{this.isSubmitting=T})}handleConfirmModalCancel(){this.showConfirm=!1}ngOnInit(){if(void 0===this.viewer)throw new Error("Must pass in a viewer to the CvcEntitySubscriptionButtonComponent");if(void 0===this.entityId)throw new Error("Must pass in an id to the CvcEntitySubscriptionButtonComponent");if(void 0===this.entityType)throw new Error("Must pass in an entityType to the CvcEntitySubscriptionButtonComponent");this.mostRecentOrg=this.viewer.mostRecentOrg}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(l.MYm),t.Y36(l._jb),t.Y36(E.Y))},i.\u0275cmp=t.Xpm({type:i,selectors:[["cvc-revert-entity-button"]],inputs:{viewer:"viewer",entityType:"entityType",entityId:"entityId"},outputs:{onReverted:"onReverted"},decls:7,vars:5,consts:[["nz-button","","nz-tooltip","Revert to Submitted","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","undo"],[3,"nzVisible","nzContent","nzTitle","nzFooter","nzVisibleChange","nzOnCancel"],["confirmModalTitle",""],["confirmModalContent",""],[3,"nzSpinning"],["nzDirection","horizontal"],[4,"nzSpaceItem"],[3,"selectedOrg","selectedOrgChange"],["cvcOrgSelectorBtn","","nzType","primary","nzSize","small","nz-button","",3,"click"],["nz-button","","nzSize","small",3,"click"]],template:function(a,m){if(1&a&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return m.showConfirm=!0}),t._UZ(1,"i",1),t.qZA(),t.TgZ(2,"nz-modal",2),t.NdJ("nzVisibleChange",function(T){return m.showConfirm=T})("nzOnCancel",function(){return m.handleConfirmModalCancel()}),t.YNc(3,v,2,1,"ng-template",null,3,t.W1O),t.YNc(5,u,4,1,"ng-template",null,4,t.W1O),t.qZA()),2&a){const g=t.MAs(4),T=t.MAs(6);t.Q6J("nzLoading",m.isSubmitting),t.xp6(2),t.Q6J("nzVisible",m.showConfirm)("nzContent",T)("nzTitle",g)("nzFooter",null)}},directives:[d.ix,z.dQ,A.w,y.SY,P.Ls,O.du,M.W,D.NU,D.$1,R.q,U.m],styles:["[_nghost-%COMP%]{display:block}"]}),i})()},694:(B,f,n)=>{n.d(f,{G:()=>O});var t=n(9808),p=n(6042),l=n(6949),h=n(647),r=n(404),E=n(3640),d=n(7525),z=n(8144),A=n(1825),y=n(4182),P=n(5e3);let O=(()=>{class M{}return M.\u0275fac=function(R){return new(R||M)},M.\u0275mod=P.oAB({type:M}),M.\u0275inj=P.cJS({imports:[[t.ez,y.u5,y.UX,p.sL,h.PV,r.cg,E.Qp,d.j,z.zf,l.WG,A.A]]}),M})()}}]);