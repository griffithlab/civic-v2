(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{DGRq:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("fXoL"),c=n("ofXK"),a=n("JA5x"),s=n("Ff2k"),o=n("OzZK"),r=n("RwU8"),l=n("C2AL"),b=n("FwiY");const u=["itemTemplate"],d=function(e){return{$implicit:e}};function p(e,t){if(1&e){const e=i.Vb();i.Ub(0,"nz-list-item",5),i.bc("click",function(){i.vc(e);const t=i.ec().$implicit;return i.ec(2).onParticipantSelected(t)}),i.Qb(1,6),i.Tb()}if(2&e){const e=i.ec().$implicit,t=i.ec(2);i.Gb("selected-participant",e.id==(null==t.selectedItem?null:t.selectedItem.id)),i.Cb(1),i.lc("ngTemplateOutlet",t.itemTemplateRef||null)("ngTemplateOutletContext",i.qc(4,d,e))}}function f(e,t){if(1&e&&(i.Sb(0),i.Ec(1,p,2,6,"nz-list-item",4),i.Rb()),2&e){const e=t.index,n=i.ec(2);i.Cb(1),i.lc("ngIf",e+1<=n.defaultListSize)}}function h(e,t){if(1&e){const e=i.Vb();i.Ub(0,"button",7),i.bc("click",function(){return i.vc(e),i.ec(2).onExpandClicked()}),i.Pb(1,"i",8),i.Gc(2," Expand "),i.Tb()}}function g(e,t){if(1&e){const e=i.Vb();i.Ub(0,"button",7),i.bc("click",function(){return i.vc(e),i.ec(2).onCollapseClicked()}),i.Pb(1,"i",9),i.Gc(2," Collapse "),i.Tb()}}function z(e,t){if(1&e&&(i.Sb(0),i.Ub(1,"nz-card",1),i.Ub(2,"nz-list"),i.Ec(3,f,2,1,"ng-container",2),i.Tb(),i.Ec(4,h,3,0,"button",3),i.Ec(5,g,3,0,"button",3),i.Tb(),i.Rb()),2&e){const e=i.ec();i.Cb(1),i.lc("nzTitle",e.listTitle),i.Cb(2),i.lc("ngForOf",e.participantList),i.Cb(1),i.lc("ngIf",e.participantList.length>e.defaultListSize),i.Cb(1),i.lc("ngIf",e.isExpanded)}}let m=(()=>{class e{constructor(){this.defaultListSize=5,this.participantSelectedEvent=new i.n,this.isExpanded=!1}ngOnInit(){this.preselectedOption&&(this.selectedItem=this.preselectedOption)}onParticipantSelected(e){var t;this.selectedItem=e.id==(null===(t=this.selectedItem)||void 0===t?void 0:t.id)?void 0:e,this.participantSelectedEvent.emit(this.selectedItem)}onExpandClicked(){this.originalDefaultListSize=this.defaultListSize,this.defaultListSize=this.participantList.length,this.isExpanded=!0}onCollapseClicked(){this.originalDefaultListSize&&(this.defaultListSize=this.originalDefaultListSize,this.isExpanded=!1)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Ib({type:e,selectors:[["cvc-participant-list"]],contentQueries:function(e,t,n){if(1&e&&i.Hb(n,u,1),2&e){let e;i.tc(e=i.cc())&&(t.itemTemplateRef=e.first)}},inputs:{participantList:"participantList",listTitle:"listTitle",defaultListSize:"defaultListSize",preselectedOption:"preselectedOption"},outputs:{participantSelectedEvent:"participantSelectedEvent"},decls:1,vars:1,consts:[[4,"ngIf"],["nz-type","inner",2,"margin-bottom","1em",3,"nzTitle"],[4,"ngFor","ngForOf"],["nz-button","","nzType","default","nzSize","small",3,"click",4,"ngIf"],["nzSize","small","class","participant-list-item",3,"selected-participant","click",4,"ngIf"],["nzSize","small",1,"participant-list-item",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-button","","nzType","default","nzSize","small",3,"click"],["nz-icon","","nzType","vertical-align-bottom"],["nz-icon","","nzType","vertical-align-top"]],template:function(e,t){1&e&&i.Ec(0,z,6,4,"ng-container",0),2&e&&i.lc("ngIf",t.participantList&&t.participantList.length>0)},directives:[c.q,a.a,s.a,c.p,s.d,c.x,o.a,r.a,l.a,b.b],styles:[".participant-list-item[_ngcontent-%COMP%]:hover{border:1px solid #40a9ff;cursor:pointer}.participant-list-item[_ngcontent-%COMP%]{padding:2px;margin:2px}.selected-participant[_ngcontent-%COMP%]{background:#40a9ff;color:#fff}"]}),e})()},LMbe:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("fXoL");let c=(()=>{class e{transform(e){if(e){let n=e.toLowerCase().replace(/_/g," ").split(" ");for(var t=0;t<n.length;t++)n[t]=n[t].charAt(0).toUpperCase()+n[t].slice(1);return n.join(" ")}return""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Nb({name:"enumToTitle",type:e,pure:!0}),e})()},QSsw:function(e,t,n){"use strict";n.r(t),n.d(t,"UsersModule",function(){return Gt});var i=n("ofXK"),c=n("tyNb"),a=n("fXoL"),s=n("nJ+V"),o=n("zI+k"),r=n("FwiY"),l=n("C2AL");function b(e,t){1&e&&(a.Pb(0,"i",3),a.Gc(1," User Assertions\n"))}let u=(()=>{class e{constructor(e){this.route=e,this.userId=+this.route.snapshot.params.userId}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(c.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["cvc-users-assertions"]],decls:4,vars:2,consts:[[3,"cvcTitle"],[3,"userId"],["assertionsCardTitle",""],["nz-icon","","nzType","civic:assertion"]],template:function(e,t){if(1&e&&(a.Ub(0,"cvc-entity-table-card",0),a.Pb(1,"cvc-assertions-table",1),a.Tb(),a.Ec(2,b,2,0,"ng-template",null,2,a.Fc)),2&e){const e=a.uc(3);a.lc("cvcTitle",e),a.Cb(1),a.lc("userId",t.userId)}},directives:[s.a,o.a,r.b,l.a],styles:["[_nghost-%COMP%]{display:block}"]}),e})();var d=n("wO+i"),p=n("JX91"),f=n("2Vo4"),h=n("l/kO"),g=n("lnp5"),z=n("dEAy"),m=n("Omhx"),C=n("jPNr"),v=n("6BKN"),T=n("B+r4"),y=n("4xsP"),U=n("j8OM"),S=n("xB20"),k=n("5vDB"),M=n("eHCX"),I=n("JA5x"),P=n("A07A"),O=n("Wfee"),E=n("tk/3"),w=n("OzZK"),x=n("RwU8");let R=(()=>{class e{constructor(e){this.http=e,this.uploadComplete=new a.n}processProfileImage(e){if(e&&e[0]){let t=new FormData;t.append("image",e[0],e[0].name),this.uploadSubscription=this.http.post("/api/upload_profile_image",t).subscribe(e=>this.uploadComplete.emit(!0),e=>this.uploadComplete.emit(!1))}}ngOnDestroy(){var e;null===(e=this.uploadSubscription)||void 0===e||e.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(E.b))},e.\u0275cmp=a.Ib({type:e,selectors:[["cvc-avatar-uploader"]],outputs:{uploadComplete:"uploadComplete"},decls:5,vars:0,consts:[["type","file","accept","image/*",2,"display","none",3,"change"],["profileImage",""],["nz-button","","nzSize","small",3,"click"],["nz-icon","","nzType","upload","nzTheme","outline"]],template:function(e,t){if(1&e){const e=a.Vb();a.Ub(0,"input",0,1),a.bc("change",function(){a.vc(e);const n=a.uc(1);return t.processProfileImage(n.files)}),a.Tb(),a.Ub(2,"button",2),a.bc("click",function(){return a.vc(e),a.uc(1).click()}),a.Pb(3,"i",3),a.Gc(4,"Upload Image"),a.Tb()}},directives:[w.a,x.a,l.a,r.b],styles:[""]}),e})();var _=n("mgaf"),$=n("ip/c"),A=n("Tdft"),L=n("XNiG"),V=n("lJxs"),G=n("1G5W"),N=n("CVmQ"),j=n("qAZ0"),F=n("ocnv"),q=n("3Pt+"),B=n("zAKX"),H=n("IjnV"),D=n("9A8T");function X(e,t){1&e&&a.Pb(0,"nz-alert",13)}function Q(e,t){if(1&e&&(a.Ub(0,"nz-form-item"),a.Pb(1,"cvc-form-errors-alert",14),a.Tb()),2&e){const e=a.ec();a.Cb(1),a.lc("errors",e.errorMessages)}}function J(e,t){if(1&e&&a.Pb(0,"nz-option",15),2&e){const e=t.$implicit;a.lc("nzLabel",e.name)("nzValue",e.id)}}let Z=(()=>{class e{constructor(e,t,n){this.updateProfileGql=e,this.profileUpdatedEvent=new a.n,this.success=!1,this.errorMessages=[],this.loading=!1,this.destroy$=new L.a,this.updateProfileMutator=new $.a(n),this.countries$=t.fetch().pipe(Object(V.a)(({data:e})=>e.countries))}ngOnInit(){if(!this.user)throw new Error("Must pass a user into the Profile Update Form");this.setInitialFormFields()}updateProfile(){if(this.username&&this.email){this.errorMessages=[];let e={username:this.username,email:this.email,name:Object(A.f)(this.name),areaOfExpertise:Object(A.d)(this.areaOfExpertise),orcid:Object(A.f)(this.orcid),url:Object(A.f)(this.url),bio:Object(A.f)(this.bio),countryId:Object(A.d)(this.countryId),twitterHandle:Object(A.f)(this.twitterHandle),facebookProfile:Object(A.f)(this.facebookProfile),linkedinProfile:Object(A.f)(this.linkedinProfile)},t=this.updateProfileMutator.mutate(this.updateProfileGql,{input:e});t.submitSuccess$.pipe(Object(G.a)(this.destroy$)).subscribe(e=>{e&&(this.setInitialFormFields(),this.success=!0,this.profileUpdatedEvent.emit())}),t.submitError$.pipe(Object(G.a)(this.destroy$)).subscribe(e=>{e&&(this.errorMessages=e,this.success=!1)}),t.isSubmitting$.pipe(Object(G.a)(this.destroy$)).subscribe(e=>{this.loading=e})}}setInitialFormFields(){var e;this.name=this.user.name,this.username=this.user.username,this.email=this.user.email,this.areaOfExpertise=this.user.areaOfExpertise,this.orcid=this.user.orcid,this.url=this.user.url,this.bio=this.user.bio,this.twitterHandle=this.user.twitterHandle,this.facebookProfile=this.user.facebookProfile,this.linkedinProfile=this.user.linkedinProfile,this.countryId=null===(e=this.user.country)||void 0===e?void 0:e.id}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(h.bc),a.Ob(h.y),a.Ob(N.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["cvc-update-profile"]],inputs:{user:"user"},outputs:{profileUpdatedEvent:"profileUpdatedEvent"},decls:56,vars:18,consts:[["nzBanner","","nzMessage","Profile Updated","nzType","success","nzCloseable","",4,"ngIf"],[4,"ngIf"],["nzTip","Submitting",3,"nzSpinning"],["nzRequired",""],["nz-input","",2,"width","100%",3,"ngModel","ngModelChange"],["nz-input","","rows","5",2,"width","100%",3,"ngModel","ngModelChange"],["nzAllowClear","","nzShowSearch","",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzAllowClear","",3,"ngModel","ngModelChange"],["nzLabel","Patient Advocate","nzValue","PATIENT_ADVOCATE"],["nzLabel","Clinical Scientist","nzValue","CLINICAL_SCIENTIST"],["nzLabel","Research Scientist","nzValue","RESEARCH_SCIENTIST"],["type","submit","nz-button","","nzType","primary","nzSize","small",2,"width","100%",3,"disabled","click"],["nzBanner","","nzMessage","Profile Updated","nzType","success","nzCloseable",""],[3,"errors"],[3,"nzLabel","nzValue"]],template:function(e,t){1&e&&(a.Ub(0,"nz-card"),a.Ec(1,X,1,0,"nz-alert",0),a.Ec(2,Q,2,1,"nz-form-item",1),a.Ub(3,"nz-spin",2),a.Ub(4,"nz-form-item"),a.Ub(5,"nz-form-label",3),a.Gc(6,"Username"),a.Tb(),a.Ub(7,"input",4),a.bc("ngModelChange",function(e){return t.username=e}),a.Tb(),a.Tb(),a.Ub(8,"nz-form-item"),a.Ub(9,"nz-form-label"),a.Gc(10,"Name"),a.Tb(),a.Ub(11,"input",4),a.bc("ngModelChange",function(e){return t.name=e}),a.Tb(),a.Tb(),a.Ub(12,"nz-form-item"),a.Ub(13,"nz-form-label",3),a.Gc(14,"Email"),a.Tb(),a.Ub(15,"input",4),a.bc("ngModelChange",function(e){return t.email=e}),a.Tb(),a.Tb(),a.Ub(16,"nz-form-item"),a.Ub(17,"nz-form-label"),a.Gc(18,"User Bio"),a.Tb(),a.Ub(19,"textarea",5),a.bc("ngModelChange",function(e){return t.bio=e}),a.Tb(),a.Tb(),a.Ub(20,"nz-form-item"),a.Ub(21,"nz-form-label"),a.Gc(22,"Country"),a.Tb(),a.Ub(23,"nz-select",6),a.bc("ngModelChange",function(e){return t.countryId=e}),a.Ec(24,J,1,2,"nz-option",7),a.fc(25,"ngrxPush"),a.Tb(),a.Tb(),a.Ub(26,"nz-form-item"),a.Ub(27,"nz-form-label"),a.Gc(28,"Area of Expertise"),a.Tb(),a.Ub(29,"nz-select",8),a.bc("ngModelChange",function(e){return t.areaOfExpertise=e}),a.Pb(30,"nz-option",9),a.Pb(31,"nz-option",10),a.Pb(32,"nz-option",11),a.Tb(),a.Tb(),a.Ub(33,"nz-form-item"),a.Ub(34,"nz-form-label"),a.Gc(35,"ORCID Identifier"),a.Tb(),a.Ub(36,"input",4),a.bc("ngModelChange",function(e){return t.orcid=e}),a.Tb(),a.Tb(),a.Ub(37,"nz-form-item"),a.Ub(38,"nz-form-label"),a.Gc(39,"Personal Website"),a.Tb(),a.Ub(40,"input",4),a.bc("ngModelChange",function(e){return t.url=e}),a.Tb(),a.Tb(),a.Ub(41,"nz-form-item"),a.Ub(42,"nz-form-label"),a.Gc(43,"Twitter Handle"),a.Tb(),a.Ub(44,"input",4),a.bc("ngModelChange",function(e){return t.twitterHandle=e}),a.Tb(),a.Tb(),a.Ub(45,"nz-form-item"),a.Ub(46,"nz-form-label"),a.Gc(47,"Facebook Profile"),a.Tb(),a.Ub(48,"input",4),a.bc("ngModelChange",function(e){return t.facebookProfile=e}),a.Tb(),a.Tb(),a.Ub(49,"nz-form-item"),a.Ub(50,"nz-form-label"),a.Gc(51,"LinkedIn Profile"),a.Tb(),a.Ub(52,"input",4),a.bc("ngModelChange",function(e){return t.linkedinProfile=e}),a.Tb(),a.Tb(),a.Ub(53,"nz-form-item"),a.Ub(54,"button",12),a.bc("click",function(){return t.updateProfile()}),a.Gc(55," Update Profile "),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Cb(1),a.lc("ngIf",t.success),a.Cb(1),a.lc("ngIf",t.errorMessages.length>0),a.Cb(1),a.lc("nzSpinning",t.loading),a.Cb(4),a.lc("ngModel",t.username),a.Cb(4),a.lc("ngModel",t.name),a.Cb(4),a.lc("ngModel",t.email),a.Cb(4),a.lc("ngModel",t.bio),a.Cb(4),a.lc("ngModel",t.countryId),a.Cb(1),a.lc("ngForOf",a.gc(25,16,t.countries$)),a.Cb(5),a.lc("ngModel",t.areaOfExpertise),a.Cb(7),a.lc("ngModel",t.orcid),a.Cb(4),a.lc("ngModel",t.url),a.Cb(4),a.lc("ngModel",t.twitterHandle),a.Cb(4),a.lc("ngModel",t.facebookProfile),a.Cb(4),a.lc("ngModel",t.linkedinProfile),a.Cb(2),a.lc("disabled",t.loading||!t.username||!t.email))},directives:[I.a,i.q,j.a,T.c,F.c,T.a,F.d,q.d,q.o,q.r,B.c,i.p,B.a,w.a,x.a,l.a,O.a,H.a],pipes:[D.b],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}nz-form-item[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}"]}),e})();var K=n("aTAi"),W=n("LMbe");function Y(e,t){if(1&e){const e=a.Vb();a.Ub(0,"nz-alert",33),a.bc("nzOnClose",function(){return a.vc(e),a.ec(2).uploadError=!1}),a.Tb()}}function ee(e,t){if(1&e){const e=a.Vb();a.Ub(0,"nz-alert",34),a.bc("nzOnClose",function(){return a.vc(e),a.ec(2).updateSuccess=!1}),a.Tb()}}function te(e,t){if(1&e){const e=a.Vb();a.Ub(0,"cvc-avatar-uploader",35),a.bc("uploadComplete",function(t){return a.vc(e),a.ec(2).profileUploadComplete(t)}),a.Tb()}}function ne(e,t){1&e&&a.Pb(0,"cvc-organization-tag",38),2&e&&a.lc("org",t.$implicit)}function ie(e,t){if(1&e&&(a.Ub(0,"nz-descriptions-item",36),a.Ec(1,ne,1,1,"cvc-organization-tag",37),a.Tb()),2&e){const e=a.ec().ngIf;a.lc("nzSpan",4),a.Cb(1),a.lc("ngForOf",e.organizations)}}function ce(e,t){if(1&e){const e=a.Vb();a.Sb(0),a.Ub(1,"button",39),a.bc("click",function(){return a.vc(e),a.ec(3).updateProfileModalVisible=!0}),a.Gc(2," Update Profile "),a.Pb(3,"i",40),a.Tb(),a.Rb()}}function ae(e,t){if(1&e&&(a.Ec(0,ce,4,0,"ng-container",0),a.fc(1,"ngrxPush")),2&e){const e=a.ec(2);a.lc("ngIf",a.gc(1,1,e.ownProfile$))}}function se(e,t){if(1&e&&(a.Sb(0),a.Gc(1),a.Rb()),2&e){const e=a.ec(3).ngIf;a.Cb(1),a.Ic(" ",e.mostRecentConflictOfInterestStatement.coiStatement," ")}}function oe(e,t){1&e&&a.Gc(0," I do not have any potential conflicts of interest. ")}function re(e,t){if(1&e&&(a.Sb(0),a.Ub(1,"nz-descriptions-item",43),a.Gc(2),a.fc(3,"enumToTitle"),a.Tb(),a.Ub(4,"nz-descriptions-item",44),a.Gc(5),a.fc(6,"date"),a.Tb(),a.Ub(7,"nz-descriptions-item",45),a.Gc(8),a.fc(9,"date"),a.Tb(),a.Ub(10,"nz-descriptions-item",46),a.Ec(11,se,2,1,"ng-container",47),a.Ec(12,oe,1,0,"ng-template",null,48,a.Fc),a.Tb(),a.Rb()),2&e){const e=a.uc(13),t=a.ec(2).ngIf;a.Cb(1),a.lc("nzSpan",3),a.Cb(1),a.Ic("",a.gc(3,9,t.mostRecentConflictOfInterestStatement.coiStatus)," "),a.Cb(2),a.lc("nzSpan",2),a.Cb(1),a.Ic("",a.hc(6,11,t.mostRecentConflictOfInterestStatement.createdAt,"shortDate")," "),a.Cb(2),a.lc("nzSpan",2),a.Cb(1),a.Ic("",a.hc(9,14,t.mostRecentConflictOfInterestStatement.expiresAt,"shortDate")," "),a.Cb(2),a.lc("nzSpan",3),a.Cb(1),a.lc("ngIf",t.mostRecentConflictOfInterestStatement.coiPresent)("ngIfElse",e)}}function le(e,t){1&e&&(a.Sb(0),a.Ub(1,"nz-descriptions-item",43),a.Gc(2,"None on file."),a.Tb(),a.Rb()),2&e&&(a.Cb(1),a.lc("nzSpan",3))}function be(e,t){if(1&e){const e=a.Vb();a.Sb(0),a.Ub(1,"button",39),a.bc("click",function(){return a.vc(e),a.ec(4).updateCoiModalVisible=!0}),a.Gc(2," Update COI "),a.Pb(3,"i",40),a.Tb(),a.Rb()}}function ue(e,t){if(1&e&&(a.Ec(0,be,4,0,"ng-container",0),a.fc(1,"ngrxPush")),2&e){const e=a.ec(3);a.lc("ngIf",a.gc(1,1,e.ownProfile$))}}function de(e,t){if(1&e&&(a.Ub(0,"div",13),a.Ub(1,"nz-descriptions",41),a.Ec(2,re,14,17,"ng-container",0),a.Ec(3,le,3,1,"ng-container",0),a.Ec(4,ue,2,3,"ng-template",null,42,a.Fc),a.Tb(),a.Tb()),2&e){const e=a.uc(5),t=a.ec().ngIf;a.lc("nzSpan",8),a.Cb(1),a.lc("nzExtra",e),a.Cb(1),a.lc("ngIf",t.mostRecentConflictOfInterestStatement),a.Cb(1),a.lc("ngIf",!t.mostRecentConflictOfInterestStatement)}}function pe(e,t){1&e&&(a.Ub(0,"span"),a.Gc(1,"Update Profile"),a.Tb())}function fe(e,t){if(1&e){const e=a.Vb();a.Ub(0,"cvc-update-profile",49),a.bc("profileUpdatedEvent",function(){return a.vc(e),a.ec(2).profileUpdated()}),a.Tb()}if(2&e){const e=a.ec().ngIf;a.lc("user",e)}}function he(e,t){if(1&e){const e=a.Vb();a.Sb(0),a.Pb(1,"cvc-section-navigation",4),a.Ub(2,"nz-page-header",5),a.Ub(3,"nz-page-header-title"),a.Pb(4,"i",6),a.Ub(5,"span",7),a.Gc(6),a.Tb(),a.Tb(),a.Ub(7,"nz-page-header-content"),a.Ec(8,Y,1,0,"nz-alert",8),a.Ec(9,ee,1,0,"nz-alert",9),a.Pb(10,"cvc-tab-navigation",10),a.fc(11,"ngrxPush"),a.Ub(12,"div",11),a.Ub(13,"div",12),a.Ub(14,"div",13),a.Ub(15,"nz-space",14),a.Ub(16,"nz-space-item"),a.Pb(17,"cvc-user-avatar",15),a.Tb(),a.Ub(18,"nz-space-item"),a.Ec(19,te,1,0,"cvc-avatar-uploader",16),a.fc(20,"ngrxPush"),a.Tb(),a.Tb(),a.Tb(),a.Ub(21,"div",13),a.Ub(22,"nz-descriptions",17),a.Ub(23,"nz-descriptions-item",18),a.Gc(24),a.Tb(),a.Ub(25,"nz-descriptions-item",19),a.Gc(26),a.fc(27,"enumToTitle"),a.Tb(),a.Ub(28,"nz-descriptions-item",20),a.Gc(29),a.Tb(),a.Ub(30,"nz-descriptions-item",21),a.Gc(31),a.fc(32,"enumToTitle"),a.Tb(),a.Ub(33,"nz-descriptions-item",22),a.Gc(34),a.Tb(),a.Ec(35,ie,2,2,"nz-descriptions-item",23),a.Ec(36,ae,2,3,"ng-template",null,24,a.Fc),a.Tb(),a.Tb(),a.Ec(38,de,6,4,"div",25),a.Tb(),a.Ub(39,"div",26),a.Ub(40,"div",27),a.Pb(41,"nz-divider"),a.Ub(42,"p",28),a.Ub(43,"b"),a.Gc(44,"User Statistics"),a.Tb(),a.Tb(),a.Ub(45,"div",12),a.Ub(46,"div",29),a.Ub(47,"nz-card"),a.Pb(48,"nz-statistic",30),a.fc(49,"number"),a.Tb(),a.Tb(),a.Ub(50,"div",29),a.Ub(51,"nz-card"),a.Pb(52,"nz-statistic",30),a.fc(53,"number"),a.Tb(),a.Tb(),a.Ub(54,"div",29),a.Ub(55,"nz-card"),a.Pb(56,"nz-statistic",30),a.fc(57,"number"),a.Tb(),a.Tb(),a.Ub(58,"div",29),a.Ub(59,"nz-card"),a.Pb(60,"nz-statistic",30),a.fc(61,"number"),a.Tb(),a.Tb(),a.Ub(62,"div",29),a.Ub(63,"nz-card"),a.Pb(64,"nz-statistic",30),a.fc(65,"number"),a.Tb(),a.Tb(),a.Ub(66,"div",29),a.Ub(67,"nz-card"),a.Pb(68,"nz-statistic",30),a.fc(69,"number"),a.Tb(),a.Tb(),a.Ub(70,"div",29),a.Ub(71,"nz-card"),a.Pb(72,"nz-statistic",30),a.fc(73,"number"),a.Tb(),a.Tb(),a.Ub(74,"div",29),a.Ub(75,"nz-card"),a.Pb(76,"nz-statistic",30),a.fc(77,"number"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Pb(78,"router-outlet"),a.Tb(),a.Tb(),a.Ub(79,"nz-modal",1),a.bc("nzVisibleChange",function(t){return a.vc(e),a.ec().updateProfileModalVisible=t})("nzOnCancel",function(){return a.vc(e),a.ec().handleProfileModalCancel()}),a.Ec(80,pe,2,0,"ng-template",null,31,a.Fc),a.Ec(82,fe,1,1,"ng-template",null,32,a.Fc),a.Tb(),a.Rb()}if(2&e){const e=t.ngIf,n=a.uc(37),i=a.uc(81),c=a.uc(83),s=a.ec();a.Cb(1),a.lc("displayName",e.displayName),a.Cb(4),a.nc("routerLink","/user/",e.id,""),a.Cb(1),a.Ic(" ",e.name," "),a.Cb(2),a.lc("ngIf",s.uploadError),a.Cb(1),a.lc("ngIf",s.updateSuccess),a.Cb(1),a.lc("tabs",a.gc(11,48,s.tabs$)),a.Cb(3),a.lc("nzGutter",16),a.Cb(1),a.lc("nzSpan",3),a.Cb(3),a.lc("user",e)("size",128),a.Cb(2),a.lc("ngIf",a.gc(20,50,s.ownProfile$)),a.Cb(2),a.lc("nzSpan",13),a.Cb(1),a.lc("nzExtra",n),a.Cb(1),a.lc("nzSpan",2),a.Cb(1),a.Hc(e.username),a.Cb(1),a.lc("nzSpan",2),a.Cb(1),a.Hc(a.gc(27,52,e.role)),a.Cb(2),a.lc("nzSpan",4),a.Cb(1),a.Hc(e.bio),a.Cb(1),a.lc("nzSpan",2),a.Cb(1),a.Ic("",a.gc(32,54,e.areaOfExpertise)," "),a.Cb(2),a.lc("nzSpan",2),a.Cb(1),a.Hc(null==e.country?null:e.country.name),a.Cb(1),a.lc("ngIf",e.organizations.length>0),a.Cb(3),a.lc("ngIf","EDITOR"===e.role||"ADMIN"===e.role),a.Cb(2),a.lc("nzSpan",21)("nzOffset",3),a.Cb(5),a.lc("nzGutter",16),a.Cb(3),a.lc("nzValue",a.gc(49,56,e.statsHash.comments))("nzTitle","Comments"),a.Cb(4),a.lc("nzValue",a.gc(53,58,e.statsHash.revisions))("nzTitle","Suggested Revisions"),a.Cb(4),a.lc("nzValue",a.gc(57,60,e.statsHash.appliedRevisions))("nzTitle","Applied Revisions"),a.Cb(4),a.lc("nzValue",a.gc(61,62,e.statsHash.suggestedSources))("nzTitle","Suggested Sources"),a.Cb(4),a.lc("nzValue",a.gc(65,64,e.statsHash.submittedEvidenceItems))("nzTitle","Submitted Evidence"),a.Cb(4),a.lc("nzValue",a.gc(69,66,e.statsHash.acceptedEvidenceItems))("nzTitle","Accepted Evidence"),a.Cb(4),a.lc("nzValue",a.gc(73,68,e.statsHash.submittedAssertions))("nzTitle","Submitted Assertions"),a.Cb(4),a.lc("nzValue",a.gc(77,70,e.statsHash.acceptedAssertions))("nzTitle","Accepted Assertions"),a.Cb(3),a.lc("nzVisible",s.updateProfileModalVisible)("nzContent",c)("nzTitle",i)("nzFooter",null)}}function ge(e,t){1&e&&(a.Ub(0,"span"),a.Gc(1,"Update your Conflict of Interest Statement"),a.Tb())}function ze(e,t){if(1&e){const e=a.Vb();a.Ub(0,"cvc-update-coi",50),a.bc("coiUpdatedEvent",function(){return a.vc(e),a.ec().coiUpdated()}),a.Tb()}}let me=(()=>{class e{constructor(e,t,n){this.gql=e,this.viewerService=t,this.route=n,this.ownProfile$=new f.a(!1),this.uploadError=!1,this.updateSuccess=!1,this.updateCoiModalVisible=!1,this.updateProfileModalVisible=!1,this.defaultTabs=[{routeName:"activity",tabLabel:"Activity",iconName:"civic:event"},{routeName:"evidence",tabLabel:"Evidence Items",iconName:"civic:evidence"},{routeName:"assertions",tabLabel:"Assertions",iconName:"civic:assertion"},{routeName:"source-suggestions",tabLabel:"Source Suggestions",iconName:"file-add"},{routeName:"badges",tabLabel:"Badges",iconName:"safety-certificate"}],this.tabs$=new f.a(this.defaultTabs),this.routeSub=this.route.params.subscribe(e=>{this.queryRef=this.gql.watch({userId:+e.userId});let t=this.queryRef.valueChanges;this.loading$=t.pipe(Object(d.a)("loading"),Object(p.a)(!0)),this.user$=t.pipe(Object(d.a)("data","user")),this.viewerSub=this.viewerService.viewer$.subscribe(t=>{t.id===+e.userId&&(this.tabs$.next([...this.defaultTabs,{routeName:"notifications",tabLabel:"Notifications",iconName:"bell"}]),this.ownProfile$.next(!0))})})}ngOnDestroy(){var e;this.routeSub.unsubscribe(),null===(e=this.viewerSub)||void 0===e||e.unsubscribe()}profileUploadComplete(e){var t;e?(null===(t=this.queryRef)||void 0===t||t.refetch(),this.updateSuccess=!0):this.uploadError=!0}coiUpdated(){var e;this.updateCoiModalVisible=!1,null===(e=this.queryRef)||void 0===e||e.refetch()}profileUpdated(){var e;this.updateProfileModalVisible=!1,null===(e=this.queryRef)||void 0===e||e.refetch()}handleCoiModalCancel(){this.updateCoiModalVisible=!1}handleProfileModalCancel(){this.updateProfileModalVisible=!1}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(h.cc),a.Ob(g.a),a.Ob(c.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["users-detail"]],decls:7,vars:7,consts:[[4,"ngIf"],[3,"nzVisible","nzContent","nzTitle","nzFooter","nzVisibleChange","nzOnCancel"],["coiModalTitle",""],["coiModalContent",""],[3,"displayName"],[1,"site-page-header"],["nz-icon","","nzType","civic:user"],[3,"routerLink"],["nzType","error","nzCloseable","","nzMessage","There was an error updating your profile image.",3,"nzOnClose",4,"ngIf"],["nzType","success","nzCloseable","","nzMessage","Profile image successfully updated.",3,"nzOnClose",4,"ngIf"],[3,"tabs"],[1,"content"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nzDirection","vertical","nzSize","middle"],[3,"user","size"],[3,"uploadComplete",4,"ngIf"],["nzTitle","Profile","nzBordered","",3,"nzExtra"],["nzTitle","Username",3,"nzSpan"],["nzTitle","Role",3,"nzSpan"],["nzTitle","Bio",3,"nzSpan"],["nzTitle","Area of Expertise",3,"nzSpan"],["nzTitle","Country",3,"nzSpan"],["nzTitle","Organizations",3,"nzSpan",4,"ngIf"],["updateProfile",""],["nz-col","",3,"nzSpan",4,"ngIf"],["nz-row",""],["nz-col","",3,"nzSpan","nzOffset"],["nz-typography",""],["nz-col",""],[3,"nzValue","nzTitle"],["profileModalTitle",""],["profileModalContent",""],["nzType","error","nzCloseable","","nzMessage","There was an error updating your profile image.",3,"nzOnClose"],["nzType","success","nzCloseable","","nzMessage","Profile image successfully updated.",3,"nzOnClose"],[3,"uploadComplete"],["nzTitle","Organizations",3,"nzSpan"],[3,"org",4,"ngFor","ngForOf"],[3,"org"],["nz-button","","nzSize","small",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nzTitle","Editor Conflict of Interest Statement","nzBordered","",3,"nzExtra"],["updateCoi",""],["nzTitle","Status",3,"nzSpan"],["nzTitle","Updated",3,"nzSpan"],["nzTitle","Expires",3,"nzSpan"],["nzTitle","Statement",3,"nzSpan"],[4,"ngIf","ngIfElse"],["noStatement",""],[3,"user","profileUpdatedEvent"],[3,"coiUpdatedEvent"]],template:function(e,t){if(1&e&&(a.Ec(0,he,84,72,"ng-container",0),a.fc(1,"ngrxPush"),a.Ub(2,"nz-modal",1),a.bc("nzVisibleChange",function(e){return t.updateCoiModalVisible=e})("nzOnCancel",function(){return t.handleCoiModalCancel()}),a.Ec(3,ge,2,0,"ng-template",null,2,a.Fc),a.Ec(5,ze,1,0,"ng-template",null,3,a.Fc),a.Tb()),2&e){const e=a.uc(4),n=a.uc(6);a.lc("ngIf",a.gc(1,5,t.user$)),a.Cb(2),a.lc("nzVisible",t.updateCoiModalVisible)("nzContent",n)("nzTitle",e)("nzFooter",null)}},directives:[i.q,z.a,m.a,C.a,C.g,r.b,l.a,c.e,C.b,v.a,T.c,T.a,y.a,y.b,U.a,S.a,S.b,k.a,M.a,I.a,P.a,c.i,O.a,R,i.p,_.a,w.a,x.a,Z,K.a],pipes:[D.b,W.a,i.f,i.e],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),e})();var Ce=n("ktE2");let ve=(()=>{class e{constructor(e){this.route=e,this.userId=+this.route.snapshot.params.userId}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(c.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["cvc-users-events"]],decls:1,vars:1,consts:[["tagDisplay","hideUser",3,"userId"]],template:function(e,t){1&e&&a.Pb(0,"cvc-event-feed",0),2&e&&a.lc("userId",t.userId)},directives:[Ce.a],styles:["[_nghost-%COMP%]{display:block}"]}),e})();var Te=n("4dRX");function ye(e,t){1&e&&(a.Pb(0,"i",3),a.Gc(1," User Evidence\n"))}let Ue=(()=>{class e{constructor(e){this.route=e,this.userId=+this.route.snapshot.params.userId}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(c.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["cvc-users-evidence"]],decls:4,vars:2,consts:[[3,"cvcTitle"],[3,"userId"],["evidenceCardTitle",""],["nz-icon","","nzType","civic:evidence"]],template:function(e,t){if(1&e&&(a.Ub(0,"cvc-entity-table-card",0),a.Pb(1,"cvc-evidence-table",1),a.Tb(),a.Ec(2,ye,2,0,"ng-template",null,2,a.Fc)),2&e){const e=a.uc(3);a.lc("cvcTitle",e),a.Cb(1),a.lc("userId",t.userId)}},directives:[s.a,Te.a,r.b,l.a],styles:["[_nghost-%COMP%]{display:block}"]}),e})(),Se=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Ib({type:e,selectors:[["users-home"]],decls:10,vars:1,consts:[[1,"site-page-header"],["nz-icon","","nzType","civic:user"],["nz-row",""],["nz-col","",3,"nzSpan"],[1,"content"]],template:function(e,t){1&e&&(a.Ub(0,"nz-page-header",0),a.Ub(1,"nz-page-header-title"),a.Pb(2,"i",1),a.Gc(3," CIViC Users "),a.Tb(),a.Ub(4,"nz-page-header-content"),a.Ub(5,"div",2),a.Ub(6,"div",3),a.Ub(7,"div",4),a.Ub(8,"h3"),a.Gc(9,"Users table here."),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Cb(6),a.lc("nzSpan",24))},directives:[C.a,C.g,r.b,C.b,T.c,T.a],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),e})();var ke=n("DGRq"),Me=n("TaO5"),Ie=n("ncdi"),Pe=n("itd6"),Oe=n("nJia"),Ee=n("3mrq"),we=n("lpb+");function xe(e,t){if(1&e&&(a.Ub(0,"nz-col"),a.Pb(1,"i",17),a.Gc(2),a.Tb()),2&e){const e=t.$implicit;a.Cb(1),a.lc("nzType",e.iconName),a.Cb(1),a.Ic(" ",e.displayName," ")}}function Re(e,t){1&e&&(a.Gc(0),a.fc(1,"eventVerbiage")),2&e&&a.Ic(" ",a.hc(1,1,t.$implicit.id,"action-filter")," ")}function _e(e,t){if(1&e&&(a.Ub(0,"nz-col"),a.Pb(1,"i",17),a.fc(2,"iconNameForSubscribableEntity"),a.Gc(3),a.Tb()),2&e){const e=t.$implicit;a.Cb(1),a.lc("nzType",a.gc(2,3,e.subjectWithCount.subject.__typename)),a.Cb(2),a.Jc(" ",e.subjectWithCount.subject.name," (",e.subjectWithCount.occuranceCount,") ")}}function $e(e,t){if(1&e&&(a.Ub(0,"nz-col"),a.Gc(1),a.Tb()),2&e){const e=t.$implicit;a.Cb(1),a.Ic(" ",e.displayName," ")}}function Ae(e,t){if(1&e&&(a.Ub(0,"nz-col"),a.Gc(1),a.Tb()),2&e){const e=t.$implicit;a.Cb(1),a.Ic(" ",e.name," ")}}function Le(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",18),a.bc("click",function(){return a.vc(e),a.ec(2).bulkMarkRead()}),a.Pb(1,"i",19),a.Gc(2,"Mark as read "),a.Tb(),a.Ub(3,"button",18),a.bc("click",function(){return a.vc(e),a.ec(2).bulkMarkUnread()}),a.Pb(4,"i",19),a.Gc(5,"Mark as unread "),a.Tb(),a.Ub(6,"button",18),a.bc("click",function(){return a.vc(e),a.ec(2).bulkUnsubscribe()}),a.Pb(7,"i",20),a.Gc(8,"Unsubscribe "),a.Tb(),a.Gc(9," Check all "),a.Ub(10,"label",21),a.bc("ngModelChange",function(t){return a.vc(e),a.ec(2).allChecked=t})("nzCheckedChange",function(t){return a.vc(e),a.ec(2).onCheckAllCheckBoxClicked(t)}),a.Tb()}if(2&e){const e=a.ec(2);a.lc("disabled",!e.bulkMarkEnabled),a.Cb(3),a.lc("disabled",!e.bulkMarkEnabled),a.Cb(3),a.lc("disabled",!e.bulkMarkEnabled),a.Cb(4),a.lc("ngModel",e.allChecked)("nzIndeterminate",e.someChecked)}}function Ve(e,t){if(1&e&&a.Pb(0,"i",32),2&e){const e=a.ec().$implicit;a.lc("nzType","SUBSCRIPTION"===e.key.type?"book":"notification")("nzTheme",e.key.seen?"outline":"twotone")}}function Ge(e,t){if(1&e){const e=a.Vb();a.Sb(0),a.Ub(1,"button",33),a.bc("click",function(){a.vc(e);const t=a.ec().$implicit;return a.ec(3).markAsUnread(t.key.id)}),a.Pb(2,"i",34),a.Tb(),a.Rb()}}function Ne(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",35),a.bc("click",function(){a.vc(e);const t=a.ec().$implicit;return a.ec(3).markAsRead(t.key.id)}),a.Pb(1,"i",19),a.Tb()}}function je(e,t){if(1&e){const e=a.Vb();a.Sb(0),a.Ub(1,"button",36),a.bc("click",function(){a.vc(e);const t=a.ec().$implicit;return a.ec(3).unsubscribe(t.key.subscription.subscribable.id,t.key.subscription.subscribable.__typename)}),a.Pb(2,"i",20),a.Tb(),a.Rb()}if(2&e){const e=a.ec().$implicit;a.Cb(1),a.nc("nzTooltipTitle","You received this notification because you are subscribed to ",e.key.subscription.subscribable.name,". Click to unsubscribe.")}}function Fe(e,t){1&e&&(a.Ub(0,"button",37),a.Pb(1,"i",20),a.Tb())}function qe(e,t){if(1&e){const e=a.Vb();a.Sb(0),a.Ub(1,"nz-timeline-item",23),a.Ec(2,Ve,1,2,"ng-template",null,24,a.Fc),a.Ub(4,"nz-row"),a.Ub(5,"nz-col",25),a.Pb(6,"cvc-event-timeline-item",26),a.Tb(),a.Ub(7,"nz-col",27),a.Ec(8,Ge,3,0,"ng-container",28),a.Ec(9,Ne,2,0,"ng-template",null,29,a.Fc),a.Tb(),a.Ub(11,"nz-col",27),a.Ec(12,je,3,1,"ng-container",28),a.Ec(13,Fe,2,0,"ng-template",null,30,a.Fc),a.Ub(15,"label",31),a.bc("ngModelChange",function(e){return t.$implicit.value.checked=e})("nzCheckedChange",function(n){a.vc(e);const i=t.$implicit;return a.ec(3).onNotificationCheckBoxClicked(i.key.id,n)}),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Rb()}if(2&e){const e=t.$implicit,n=a.uc(3),i=a.uc(10),c=a.uc(14);a.Cb(1),a.lc("nzDot",n)("nzColor",e.key.seen?"gray":"blue"),a.Cb(5),a.lc("event",e.key.event),a.Cb(2),a.lc("ngIf",e.key.seen)("ngIfElse",i),a.Cb(4),a.lc("ngIf",e.key.subscription)("ngIfElse",c),a.Cb(3),a.lc("ngModel",e.value.checked)}}function Be(e,t){if(1&e&&(a.Ub(0,"nz-timeline"),a.Ec(1,qe,16,8,"ng-container",22),a.fc(2,"keyvalue"),a.Tb()),2&e){const e=a.ec().ngIf;a.Cb(1),a.lc("ngForOf",a.gc(2,1,e))}}function He(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",39),a.Ub(1,"button",40),a.bc("click",function(){a.vc(e);const t=a.ec().ngIf;return a.ec(2).fetchMore(t.endCursor)}),a.Gc(2,"Load More "),a.Tb(),a.Tb()}}function De(e,t){if(1&e&&(a.Sb(0),a.Ec(1,He,3,0,"div",38),a.Rb()),2&e){const e=t.ngIf;a.Cb(1),a.lc("ngIf",e.hasNextPage)}}function Xe(e,t){if(1&e){const e=a.Vb();a.Sb(0),a.Ub(1,"nz-row",2),a.Ub(2,"nz-col",3),a.Ub(3,"nz-row"),a.Ub(4,"nz-button-group",4),a.Ub(5,"button",5),a.bc("click",function(){return a.vc(e),a.ec().setIncludeRead(!1)}),a.Gc(6,"Unread"),a.Tb(),a.Ub(7,"button",5),a.bc("click",function(){return a.vc(e),a.ec().setIncludeRead(!0)}),a.Gc(8,"All"),a.Tb(),a.Tb(),a.Tb(),a.Ub(9,"nz-row"),a.Ub(10,"nz-col",6),a.Ub(11,"cvc-participant-list",7),a.bc("participantSelectedEvent",function(t){return a.vc(e),a.ec().onNotificationReasonSelected(t)}),a.Ec(12,xe,3,2,"ng-template",null,8,a.Fc),a.Tb(),a.Ub(14,"cvc-participant-list",9),a.bc("participantSelectedEvent",function(t){return a.vc(e),a.ec().onActionSelected(t)}),a.fc(15,"ngrxPush"),a.Ec(16,Re,2,4,"ng-template",null,8,a.Fc),a.Tb(),a.Ub(18,"cvc-participant-list",10),a.bc("participantSelectedEvent",function(t){return a.vc(e),a.ec().onNotificationSubjectSelected(t)}),a.fc(19,"ngrxPush"),a.Ec(20,_e,4,5,"ng-template",null,8,a.Fc),a.Tb(),a.Ub(22,"cvc-participant-list",11),a.bc("participantSelectedEvent",function(t){return a.vc(e),a.ec().onOriginatingUserSelected(t)}),a.fc(23,"ngrxPush"),a.Ec(24,$e,2,1,"ng-template",null,8,a.Fc),a.Tb(),a.Ub(26,"cvc-participant-list",12),a.bc("participantSelectedEvent",function(t){return a.vc(e),a.ec().onOrganizationSelected(t)}),a.fc(27,"ngrxPush"),a.Ec(28,Ae,2,1,"ng-template",null,8,a.Fc),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(30,"nz-col",13),a.Ub(31,"nz-card",14),a.Ec(32,Le,11,5,"ng-template",null,15,a.Fc),a.Ub(34,"nz-row",2),a.Ub(35,"nz-col",16),a.Ec(36,Be,3,3,"nz-timeline",1),a.Ec(37,De,2,1,"ng-container",1),a.fc(38,"ngrxPush"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Rb()}if(2&e){const e=t.ngIf,n=a.uc(33),i=a.ec();a.Cb(1),a.lc("nzGutter",25),a.Cb(4),a.lc("nzType",i.includeReadInput?"default":"primary"),a.Cb(2),a.lc("nzType",i.includeReadInput?"primary":"default"),a.Cb(4),a.lc("participantList",i.notificationTypes),a.Cb(3),a.lc("participantList",a.gc(15,12,i.actions$)),a.Cb(4),a.lc("participantList",a.gc(19,14,i.notificationSubjects$)),a.Cb(4),a.lc("participantList",a.gc(23,16,i.originatingUsers$)),a.Cb(4),a.lc("participantList",a.gc(27,18,i.organizations$)),a.Cb(5),a.lc("nzExtra",n),a.Cb(3),a.lc("nzGutter",16),a.Cb(2),a.lc("ngIf",e.size>0),a.Cb(1),a.lc("ngIf",a.gc(38,20,i.pageInfo$))}}let Qe=(()=>{class e{constructor(e,t,n,i,c){this.route=e,this.gql=t,this.networkErrorService=n,this.updateNotificationStatusMuation=i,this.unsubscribeMutation=c,this.notificationState=new Map,this.includeReadInput=!1,this.bulkMarkEnabled=!1,this.allChecked=!1,this.someChecked=!1,this.notificationTypes=[{id:1,type:h.nb.Mention,iconName:"notification",displayName:"Mentioned"},{id:2,type:h.nb.Subscription,iconName:"book",displayName:"Subscribed"}],this.userId=+this.route.snapshot.params.userId,this.updateNotificationStatusMutator=new $.a(n),this.unsubscribeMutator=new $.a(n)}ngOnInit(){this.initialQueryVars={includeRead:this.includeReadInput},this.queryRef=this.gql.watch(this.initialQueryVars),this.results$=this.queryRef.valueChanges,this.pageInfo$=this.results$.pipe(Object(V.a)(({data:e})=>e.notifications.pageInfo)),this.notificationStateObservable$=this.results$.pipe(Object(V.a)(({data:e})=>{let t=new Map;return e.notifications.edges.forEach(e=>{if(e.node){let n={checked:!1};t.set(e.node,n),this.notificationState.set(e.node,n)}}),t})),this.notificationSubjects$=this.results$.pipe(Object(V.a)(({data:e})=>e.notifications.notificationSubjects.map(e=>({id:`${e.subject.__typename}:${e.subject.id}`,subjectWithCount:e})))),this.originatingUsers$=this.results$.pipe(Object(V.a)(({data:e})=>e.notifications.originatingUsers)),this.actions$=this.results$.pipe(Object(V.a)(({data:e})=>e.notifications.eventTypes.map(e=>({id:e})))),this.organizations$=this.results$.pipe(Object(V.a)(({data:e})=>e.notifications.organizations)),this.isLoading$=this.results$.pipe(Object(V.a)(({loading:e})=>e),Object(p.a)(!0))}fetchMore(e){this.queryRef.fetchMore({variables:{after:e}})}setIncludeRead(e){this.includeReadInput=e,this.queryRef.refetch({includeRead:this.includeReadInput})}onNotificationReasonSelected(e){this.queryRef.refetch({notificationReason:e?e.type:void 0})}onNotificationSubjectSelected(e){let t;void 0!==e&&(t={id:e.subjectWithCount.subject.id,entityType:h.Rb[e.subjectWithCount.subject.__typename]}),this.queryRef.refetch({originatingObject:t})}onOriginatingUserSelected(e){this.queryRef.refetch({originatingUserId:null==e?void 0:e.id})}onActionSelected(e){this.queryRef.refetch({eventType:e?e.id:void 0})}onOrganizationSelected(e){this.queryRef.refetch({organizationId:null==e?void 0:e.id})}markAsRead(e){this.updateNotificationStatusMutator.mutate(this.updateNotificationStatusMuation,{input:{ids:[e],newStatus:h.Bb.Read}})}markAsUnread(e){this.updateNotificationStatusMutator.mutate(this.updateNotificationStatusMuation,{input:{ids:[e],newStatus:h.Bb.Unread}})}unsubscribe(e,t){this.unsubscribeMutator.mutate(this.unsubscribeMutation,{input:{subscribables:[{id:e,entityType:h.Rb[t]}]}})}onNotificationCheckBoxClicked(e,t){let n=Array.from(this.notificationState.keys()).find(t=>t.id===e);if(n){let e=this.notificationState.get(n);e&&(e.checked=t)}t?(this.bulkMarkEnabled=!0,Array.from(this.notificationState.values()).every(e=>e.checked)?(this.allChecked=!0,this.someChecked=!1):this.someChecked=!0):Array.from(this.notificationState.values()).some(e=>e.checked)?(this.bulkMarkEnabled=!0,this.allChecked=!1,this.someChecked=!Array.from(this.notificationState.values()).every(e=>!e.checked)):(this.bulkMarkEnabled=!1,this.allChecked=!1,this.someChecked=!1)}onCheckAllCheckBoxClicked(e){e?this.checkAll():this.uncheckAll()}getCheckedIds(){let e=[];return this.notificationState.forEach((t,n)=>{t.checked&&e.push(n.id)}),e}checkAll(){this.queryRef.refetch().then(()=>{this.notificationState.forEach((e,t)=>{e.checked=!0})}),this.allChecked=!0,this.someChecked=!1,this.bulkMarkEnabled=!0}uncheckAll(){this.queryRef.refetch().then(()=>{this.notificationState.forEach((e,t)=>{e.checked=!1})}),this.allChecked=!1,this.someChecked=!1,this.bulkMarkEnabled=!1}bulkMarkRead(){this.updateNotificationStatusMutator.mutate(this.updateNotificationStatusMuation,{input:{ids:this.getCheckedIds(),newStatus:h.Bb.Read}}),this.uncheckAll()}bulkMarkUnread(){this.updateNotificationStatusMutator.mutate(this.updateNotificationStatusMuation,{input:{ids:this.getCheckedIds(),newStatus:h.Bb.Unread}}),this.uncheckAll()}bulkUnsubscribe(){let e=[];this.notificationState.forEach((t,n)=>{t.checked&&n.subscription&&e.push({id:n.subscription.subscribable.id,entityType:h.Rb[n.subscription.subscribable.__typename]})}),this.unsubscribeMutator.mutate(this.unsubscribeMutation,{input:{subscribables:e}}).submitSuccess$.subscribe(e=>{e&&this.queryRef.refetch()}),this.uncheckAll()}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(c.a),a.Ob(h.dc),a.Ob(N.a),a.Ob(h.ac),a.Ob(h.Yb))},e.\u0275cmp=a.Ib({type:e,selectors:[["cvc-users-notifications"]],decls:4,vars:6,consts:[[3,"nzSpinning"],[4,"ngIf"],[3,"nzGutter"],["nzSpan","4"],["nzSize","small"],["nz-button","","nzShape","round",3,"nzType","click"],["nzSpan","24"],["listTitle","Notification Reason",3,"participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Action",3,"participantList","participantSelectedEvent"],["listTitle","Subject",3,"participantList","participantSelectedEvent"],["listTitle","User",3,"participantList","participantSelectedEvent"],["listTitle","Organization",3,"participantList","participantSelectedEvent"],["nzSpan","20"],["nzTitle","Notifications","id","card-content",3,"nzExtra"],["bulkOperations",""],["nzSpan","24",1,"timeline"],["nz-icon","",3,"nzType"],["nz-button","","nzSize","small",3,"disabled","click"],["nz-icon","","nzType","check"],["nz-icon","","nzType","bell"],["nz-checkbox","",3,"ngModel","nzIndeterminate","ngModelChange","nzCheckedChange"],[4,"ngFor","ngForOf"],[3,"nzDot","nzColor"],["timelineDotTemplate",""],["nzFlex","auto"],[3,"event"],["nzFlex","50px"],[4,"ngIf","ngIfElse"],["unread",""],["noSubscriptionButton",""],["nz-checkbox","",3,"ngModel","ngModelChange","nzCheckedChange"],["nz-icon","",1,"item-icon",3,"nzType","nzTheme"],["nz-tooltip","","nzTooltipTitle","Mark as unread.","nz-button","","nzType","default","nzShape","circle",3,"click"],["nz-icon","","nzType","undo"],["nz-tooltip","","nzTooltipTitle","Mark as read.","nz-button","","nzType","default","nzShape","circle",3,"click"],["nz-tooltip","","nz-button","","nzType","default","nzShape","circle",3,"nzTooltipTitle","click"],["nz-tooltip","","nzTooltipTitle","You are no longer subscribed to the entity that triggered this notification.","nz-button","","nzType","default","nzShape","circle","disabled",""],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","default","nzSize","small","nzBlock","",3,"click"]],template:function(e,t){1&e&&(a.Ub(0,"nz-spin",0),a.fc(1,"ngrxPush"),a.Ec(2,Xe,39,22,"ng-container",1),a.fc(3,"async"),a.Tb()),2&e&&(a.lc("nzSpinning",a.gc(1,2,t.isLoading$)),a.Cb(2),a.lc("ngIf",a.gc(3,4,t.notificationStateObservable$)))},directives:[j.a,i.q,T.c,T.a,w.b,l.a,w.a,x.a,ke.a,I.a,r.b,Me.a,q.o,q.r,Ie.a,i.p,Ie.b,Pe.a,Oe.d],pipes:[D.b,i.b,Ee.a,we.a,i.j],styles:["[_nghost-%COMP%]{display:block}.timeline[_ngcontent-%COMP%]{padding-top:6px;padding-left:6px}.item-icon[_ngcontent-%COMP%]{font-size:18px}.timeline-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .timeline-item[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{margin-top:2px}.timeline-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-left:4px}.read-notification[_ngcontent-%COMP%]{background-color:grey}nz-timeline[_ngcontent-%COMP%]     ul li:last-child{padding-bottom:0}nz-timeline[_ngcontent-%COMP%]     ul li:last-child .ant-timeline-item-content{min-height:0;padding-bottom:8px}.timestamp[_ngcontent-%COMP%]{text-align:right}.comment-title[_ngcontent-%COMP%]{padding-right:24px}.comment-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400}.comment-card[_ngcontent-%COMP%]{width:100%}"]}),e})();var Je=n("Ogji");function Ze(e,t){1&e&&(a.Pb(0,"i",3),a.Gc(1," User Source Suggestions\n"))}let Ke=(()=>{class e{constructor(e){this.route=e,this.userId=+this.route.snapshot.params.userId}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(c.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["cvc-users-source-suggestions"]],decls:4,vars:2,consts:[[3,"cvcTitle"],[3,"submitterId"],["sourceSuggestionCardTitle",""],["nz-icon","","nzType","file-add"]],template:function(e,t){if(1&e&&(a.Ub(0,"cvc-entity-table-card",0),a.Pb(1,"cvc-source-suggestions-table",1),a.Tb(),a.Ec(2,Ze,2,0,"ng-template",null,2,a.Fc)),2&e){const e=a.uc(3);a.lc("cvcTitle",e),a.Cb(1),a.lc("submitterId",t.userId)}},directives:[s.a,Je.a,r.b,l.a],styles:["[_nghost-%COMP%]{display:block}"]}),e})();const We=[{path:"",component:(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Ib({type:e,selectors:[["app-users"]],decls:1,vars:0,template:function(e,t){1&e&&a.Pb(0,"router-outlet")},directives:[c.i],styles:[""]}),e})(),children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:Se},{path:":userId",component:me,data:{breadcrumb:"DISPLAYNAME"},children:[{path:"evidence",component:Ue,data:{breadcrumb:"Evidence"}},{path:"assertions",component:u,data:{breadcrumb:"Assertions"}},{path:"activity",component:ve,data:{breadcrumb:"Activity"}},{path:"source-suggestions",component:Ke,data:{breadcrumb:"Source Suggestions"}},{path:"notifications",component:Qe,data:{breadcrumb:"Notifications"}}]}]}];let Ye=(()=>{class e{}return e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({factory:function(t){return new(t||e)},imports:[[c.h.forChild(We)],c.h]}),e})();var et=n("Hhmg"),tt=n("ZE2D"),nt=n("SKKP"),it=n("ZVAZ"),ct=n("Nqz0"),at=n("PTRe"),st=n("Ff2k"),ot=n("+oEP"),rt=n("OtHt"),lt=n("rMZv"),bt=n("oyxB"),ut=n("ZyQt"),dt=n("twue"),pt=n("DiSq"),ft=n("6ekq");let ht=(()=>{class e{}return e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({factory:function(t){return new(t||e)},imports:[[i.c,C.d,r.c,T.b]]}),e})();var gt=n("IpA2"),zt=n("B2Tj"),mt=n("kfgc"),Ct=n("8IoQ"),vt=n("QFfB"),Tt=n("e5/R"),yt=n("hFUy"),Ut=n("ol2S"),St=n("b1zR"),kt=n("q/Zg"),Mt=n("cqX/"),It=n("8h9q"),Pt=n("QL2/"),Ot=n("+xoZ"),Et=n("cNUt"),wt=n("VwQC"),xt=n("8m6H"),Rt=n("2XtQ");let _t=(()=>{class e{}return e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({factory:function(t){return new(t||e)},imports:[[i.c,w.c,r.c]]}),e})();var $t=n("waJF"),At=n("CtWS"),Lt=n("bE2y");let Vt=(()=>{class e{}return e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({factory:function(t){return new(t||e)},imports:[[i.c,q.k,F.e,q.s,D.c,I.c,O.b,Lt.c,w.c,j.b,B.d,At.a]]}),e})(),Gt=(()=>{class e{}return e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({factory:function(t){return new(t||e)},imports:[[i.c,Ye,ht,gt.a,mt.a,zt.a,Ct.a,vt.a,Tt.a,et.a,tt.b,nt.b,w.c,I.c,it.d,F.e,S.c,ct.b,T.b,st.e,C.d,ot.b,y.c,j.b,rt.b,lt.e,bt.e,ut.b,Oe.b,M.b,Me.b,D.c,dt.b.forChild({formatter:{useClass:xt.a,provide:dt.a}}),at.e,q.k,yt.a,B.d,pt.EvidenceModule,ft.b,P.b,Ut.a,St.a,kt.a,Mt.a,Ie.c,It.a,Pt.a,Ot.a,Et.a,wt.a,Rt.a,_t,O.b,k.b,z.c,$t.a,Vt]]}),e})()},Tdft:function(e,t,n){"use strict";function i(e){let t={value:void 0,unset:void 0};return e&&e.trim().length>0?t.value=e.trim():t.unset=!0,t}function c(e){let t={value:void 0,unset:void 0};return e?t.value=e:t.unset=!0,t}function a(e){let t,n;return e&&e.includes("N/A")?(e=void 0,n=void 0,t=!0):e||(e=void 0,t=void 0,n=!0),{ids:e?e.map(e=>+e):void 0,noneFound:n,notApplicable:t}}function s(e){return{chromosome:r(e.chromosome),representativeTranscript:r(e.representativeTranscript),start:e.start?+e.start:void 0,stop:e.stop?+e.stop:void 0}}function o(e){let t={value:void 0,unset:void 0};return e?t.value=e:t.unset=!0,t}function r(e){let t;return t=e&&e.length>0?e:void 0,t}n.d(t,"f",function(){return i}),n.d(t,"d",function(){return c}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"e",function(){return o}),n.d(t,"a",function(){return l});const l=[{value:void 0,label:""},{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"},{value:"11",label:"11"},{value:"12",label:"12"},{value:"13",label:"13"},{value:"14",label:"14"},{value:"15",label:"15"},{value:"16",label:"16"},{value:"17",label:"17"},{value:"18",label:"18"},{value:"19",label:"19"},{value:"20",label:"20"},{value:"21",label:"21"},{value:"22",label:"22"},{value:"X",label:"X"},{value:"Y",label:"Y"},{value:"MT",label:"MT"}]},VwQC:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("ofXK"),c=n("JA5x"),a=n("Ff2k"),s=n("FwiY"),o=n("OzZK"),r=n("fXoL");let l=(()=>{class e{}return e.\u0275mod=r.Mb({type:e}),e.\u0275inj=r.Lb({factory:function(t){return new(t||e)},imports:[[i.c,c.c,a.e,s.c,o.c]]}),e})()}}]);