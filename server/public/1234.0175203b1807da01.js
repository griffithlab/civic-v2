"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[1234],{3640:(j,M,e)=>{e.d(M,{k:()=>V});var P=e(1635),f=e(9995),C=e(9145),s=e(9894),T=e(4412),m=e(1413),u=e(9199),d=e(3294),O=e(7048),I=e(5245),p=e(5964),v=e(6354),D=e(152),x=e(3993),c=e(4608),t=e(3953),g=e(177),E=e(9417),z=e(6389),R=e(5703),y=e(5103),i=e(9247),b=e(5699),h=e(5154),N=e(7391),B=e(1997),L=e(1852),W=e(1405),U=e(435),K=e(3245),G=e(3296),$=e(9129),S=e(3431),F=e(2923),Y=e(6911),X=e(3100),H=e(1774),w=e(9023);const Q=o=>({height:o}),J=()=>[],Z=()=>({x:"680px",y:"800px"}),k=()=>({text:"None",value:!0}),q=o=>[o],tt=(o,_,n,r,a)=>({id:o,name:_,link:n,deprecated:r,flagged:a});function nt(o,_){}function et(o,_){if(1&o&&(t.qex(0),t.j41(1,"nz-card",6),t.DNE(2,nt,0,0,"ng-template",7),t.k0s(),t.bVm()),2&o){t.XpG();const n=t.sdS(4),r=t.sdS(6),a=t.sdS(8);t.R7$(),t.Y8G("nzTitle",r)("nzExtra",a),t.R7$(),t.Y8G("ngTemplateOutlet",n)}}function at(o,_){}function _t(o,_){if(1&o&&(t.j41(0,"div",8)(1,"nz-card",9),t.DNE(2,at,0,0,"ng-template",7),t.k0s()()),2&o){const n=t.XpG(),r=t.sdS(4),a=t.sdS(6),l=t.sdS(8);t.Y8G("ngStyle",t.eq3(4,Q,n.cvcHeight)),t.R7$(),t.Y8G("nzTitle",a)("nzExtra",l),t.R7$(),t.Y8G("ngTemplateOutlet",r)}}function ot(o,_){if(1&o&&(t.j41(0,"tr",29)(1,"td",22),t.nrm(2,"cvc-variant-tag",30),t.k0s(),t.j41(3,"td",22)(4,"span",31),t.EFF(5),t.nI1(6,"titlecase"),t.k0s()(),t.j41(7,"td"),t.nrm(8,"cvc-feature-tag",32),t.k0s(),t.j41(9,"td"),t.nrm(10,"cvc-plain-tag-overflow",33),t.nI1(11,"pluck"),t.k0s(),t.j41(12,"td"),t.nrm(13,"cvc-tag-overflow",34),t.k0s(),t.j41(14,"td"),t.nrm(15,"cvc-tag-overflow",35),t.k0s(),t.j41(16,"td"),t.nrm(17,"cvc-tag-overflow",36),t.k0s()()),2&o){const n=_.$implicit,r=t.XpG(2);t.R7$(2),t.Y8G("variant",n)("truncateLongName",!0),t.R7$(3),t.SpI(" ",t.bMT(6,17,n.category)," "),t.R7$(3),t.Y8G("feature",t.s1E(22,tt,n.featureId,n.featureName,n.featureLink,n.featureDeprecated,n.featureFlagged))("truncateLongName",!0),t.R7$(2),t.Y8G("maxDisplayCount",1)("tags",t.i5U(11,19,n.aliases,"name"))("matchingText",r.variantAliasInput),t.R7$(3),t.Y8G("tags",n.variantTypes)("maxDisplayCount",1)("matchingText",r.variantTypeNameInput),t.R7$(2),t.Y8G("tags",n.diseases)("maxDisplayCount",1)("matchingText",r.diseaseNameInput),t.R7$(2),t.Y8G("tags",n.therapies)("maxDisplayCount",1)("matchingText",r.therapyNameInput)}}function rt(o,_){if(1&o){const n=t.RV6();t.j41(0,"nz-table",10,4),t.nI1(2,"ngrxPush"),t.nI1(3,"ngrxPush"),t.nI1(4,"ngrxPush"),t.nI1(5,"ngrxPush"),t.bIt("cvcTableScrollOnScroll",function(a){t.eBV(n);const l=t.XpG();return t.Njj(l.scrollEvent$.next(a))}),t.j41(6,"thead",11),t.bIt("nzSortOrderChange",function(a){t.eBV(n);const l=t.XpG();return t.Njj(l.sortChange$.next(a))}),t.j41(7,"tr",12)(8,"th",13),t.EFF(9," Variant "),t.k0s(),t.j41(10,"th",14),t.nrm(11,"i",15),t.EFF(12," Type "),t.k0s(),t.j41(13,"th",16),t.EFF(14," Feature "),t.k0s(),t.j41(15,"th",17),t.EFF(16,"Variant Aliases"),t.k0s(),t.j41(17,"th",18),t.bIt("nzFilterChange",function(a){t.eBV(n);const l=t.XpG();return t.Njj(l.onHasNoVariantTypeInputChange(a))}),t.EFF(18," Variant Types "),t.k0s(),t.j41(19,"th",19),t.EFF(20,"Diseases"),t.k0s(),t.j41(21,"th",20),t.EFF(22,"Therapies"),t.k0s()(),t.j41(23,"tr",21)(24,"th",22)(25,"cvc-clearable-input-filter",23),t.mxI("inputModelChange",function(a){t.eBV(n);const l=t.XpG();return t.DH7(l.variantNameInput,a)||(l.variantNameInput=a),t.Njj(a)}),t.bIt("inputModelChange",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.filterChange$.next())}),t.k0s()(),t.j41(26,"th",22)(27,"nz-select",24),t.bIt("ngModelChange",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.filterChange$.next())}),t.mxI("ngModelChange",function(a){t.eBV(n);const l=t.XpG();return t.DH7(l.variantCategoryInput,a)||(l.variantCategoryInput=a),t.Njj(a)}),t.nrm(28,"nz-option",25)(29,"nz-option",26)(30,"nz-option",27),t.k0s()(),t.j41(31,"th")(32,"cvc-clearable-input-filter",23),t.mxI("inputModelChange",function(a){t.eBV(n);const l=t.XpG();return t.DH7(l.featureNameInput,a)||(l.featureNameInput=a),t.Njj(a)}),t.bIt("inputModelChange",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.filterChange$.next())}),t.k0s()(),t.j41(33,"th")(34,"cvc-clearable-input-filter",23),t.mxI("inputModelChange",function(a){t.eBV(n);const l=t.XpG();return t.DH7(l.variantAliasInput,a)||(l.variantAliasInput=a),t.Njj(a)}),t.bIt("inputModelChange",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.filterChange$.next())}),t.k0s()(),t.j41(35,"th")(36,"cvc-clearable-input-filter",23),t.mxI("inputModelChange",function(a){t.eBV(n);const l=t.XpG();return t.DH7(l.variantTypeNameInput,a)||(l.variantTypeNameInput=a),t.Njj(a)}),t.bIt("inputModelChange",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.filterChange$.next())}),t.k0s()(),t.j41(37,"th")(38,"cvc-clearable-input-filter",23),t.mxI("inputModelChange",function(a){t.eBV(n);const l=t.XpG();return t.DH7(l.diseaseNameInput,a)||(l.diseaseNameInput=a),t.Njj(a)}),t.bIt("inputModelChange",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.filterChange$.next())}),t.k0s()(),t.j41(39,"th")(40,"cvc-clearable-input-filter",23),t.mxI("inputModelChange",function(a){t.eBV(n);const l=t.XpG();return t.DH7(l.therapyNameInput,a)||(l.therapyNameInput=a),t.Njj(a)}),t.bIt("inputModelChange",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.filterChange$.next())}),t.k0s()()()(),t.j41(41,"tbody"),t.DNE(42,ot,18,28,"ng-template",28),t.k0s()()}if(2&o){const n=t.XpG();t.Y8G("nzData",t.bMT(2,28,n.row$)||t.lJ4(36,J))("nzLoading",!t.bMT(3,30,n.row$))("cvcAutoHeightTable",25)("nzVirtualItemSize",29)("cvcTableScrollQueryRef",n.queryRef)("cvcTableScrollPageInfo",t.bMT(4,32,n.pageInfo$))("cvcTableScrollToIndex",t.bMT(5,34,n.scrollIndex$))("nzVirtualForTrackBy",n.trackByIndex)("nzScroll",t.lJ4(37,Z))("nzFrontPagination",!1)("nzShowPagination",!1),t.R7$(8),t.Y8G("nzColumnKey",n.sortColumns.VariantName)("nzSortFn",!0),t.R7$(5),t.Y8G("nzColumnKey",n.sortColumns.FeatureName)("nzSortFn",!0),t.R7$(4),t.Y8G("nzFilters",t.eq3(39,q,t.lJ4(38,k)))("nzFilterFn",!0),t.R7$(8),t.R50("inputModel",n.variantNameInput),t.R7$(2),t.Y8G("nzDropdownMatchSelectWidth",!1),t.R50("ngModel",n.variantCategoryInput),t.R7$(),t.Y8G("nzValue",n.variantCategories.Gene),t.R7$(),t.Y8G("nzValue",n.variantCategories.Factor),t.R7$(),t.Y8G("nzValue",n.variantCategories.Fusion),t.R7$(2),t.R50("inputModel",n.featureNameInput),t.R7$(2),t.R50("inputModel",n.variantAliasInput),t.R7$(2),t.R50("inputModel",n.variantTypeNameInput),t.R7$(2),t.R50("inputModel",n.diseaseNameInput),t.R7$(2),t.R50("inputModel",n.therapyNameInput)}}function lt(o,_){}function it(o,_){if(1&o&&(t.qex(0),t.DNE(1,lt,0,0,"ng-template",7),t.bVm()),2&o){const n=t.XpG(2);t.R7$(),t.Y8G("ngTemplateOutlet",n.cvcTitleTemplate)}}function st(o,_){if(1&o&&(t.qex(0),t.EFF(1),t.bVm()),2&o){const n=t.XpG(2);t.R7$(),t.SpI(" ",n.cvcTitle," ")}}function ct(o,_){if(1&o&&(t.DNE(0,it,2,1,"ng-container",37)(1,st,2,1,"ng-container",37),t.j41(2,"span",38),t.nrm(3,"cvc-table-counts",39),t.k0s()),2&o){const n=t.XpG();t.Y8G("ngIf",n.cvcTitleTemplate),t.R7$(),t.Y8G("ngIf",n.cvcTitle),t.R7$(2),t.Y8G("cvcTableCountsConnection",n.connection$)}}function pt(o,_){1&o&&(t.j41(0,"nz-tag",42),t.nrm(1,"i",43),t.j41(2,"span"),t.EFF(3,"Loading\u2026"),t.k0s()())}function gt(o,_){if(1&o&&(t.DNE(0,pt,4,0,"nz-tag",40),t.nI1(1,"ngrxPush"),t.nrm(2,"cvc-no-more-rows",41),t.nI1(3,"ngrxPush")),2&o){const n=t.XpG();t.Y8G("ngIf",t.bMT(1,2,n.moreLoading$)),t.R7$(2),t.Y8G("cvcShowTag",t.bMT(3,4,n.noMoreRows$))}}let V=class A{set initialUserFilters(_){_&&Object.assign(this,_)}constructor(_,n){this.gql=_,this.cdr=n,this.initialPageSize=35,this.isScrolling=!1,this.hasNoVariantTypeInput=!1,this.variantCategories=C.ypY,this.sortColumns=C.wOP,this.noMoreRows$=new T.t(!1),this.scrollEvent$=new T.t("stop"),this.sortChange$=new m.B,this.filterChange$=new m.B,this.scrollIndex$=new m.B}ngOnInit(){this.initialQueryArgs={first:this.initialPageSize,variantTypeId:this.variantTypeId,variantGroupId:this.variantGroupId,hasNoVariantType:this.hasNoVariantTypeInput,variantCategory:this.variantCategoryInput},this.queryRef=this.gql.watch(this.initialQueryArgs),this.result$=this.queryRef.valueChanges,this.initialLoading$=this.result$.pipe((0,c.E)("loading"),(0,d.F)(),(0,O.v)(_=>!1!==_,!0)),this.moreLoading$=this.result$.pipe((0,c.E)("loading"),(0,d.F)(),(0,I.i)(2)),this.connection$=this.result$.pipe((0,c.E)("data","browseVariants"),(0,p.p)(u.kP)),this.row$=this.connection$.pipe((0,c.E)("edges"),(0,p.p)(u.kP),(0,v.T)(_=>_.map(n=>n.node))),this.pageInfo$=this.connection$.pipe((0,c.E)("pageInfo"),(0,p.p)(u.kP)),this.sortChange$.pipe((0,s.s)(this)).subscribe(_=>{this.queryRef.refetch({sortBy:(0,f.X)(_)})}),this.filterChange$.pipe((0,D.B)(500),(0,s.s)(this)).subscribe(()=>{this.refresh()}),this.scrollEvent$.pipe((0,v.T)(_=>"stop"!==_),(0,d.F)(),(0,s.s)(this)).subscribe(_=>{this.isScrolling=_,this.cdr.detectChanges()}),this.scrollEvent$.pipe((0,p.p)(_=>"bottom"===_),(0,x.E)(this.pageInfo$),(0,v.T)(([_,n])=>n),(0,s.s)(this)).subscribe(_=>{_.hasNextPage||(this.noMoreRows$.next(!0),this.cdr.detectChanges(),setInterval(()=>this.noMoreRows$.next(!1)))})}refresh(){this.queryRef.refetch({diseaseName:this.diseaseNameInput,therapyName:this.therapyNameInput,variantName:this.variantNameInput?this.variantNameInput:void 0,variantAlias:this.variantAliasInput?this.variantAliasInput:void 0,featureName:this.featureNameInput,variantTypeName:this.variantTypeNameInput?this.variantTypeNameInput:void 0,hasNoVariantType:this.hasNoVariantTypeInput,variantCategory:this.variantCategoryInput}).then(()=>this.scrollIndex$.next(0)),this.cdr.detectChanges()}trackByIndex(_,n){return n?.id}onHasNoVariantTypeInputChange(_){this.hasNoVariantTypeInput=_[0],this.filterChange$.next()}static#t=this.\u0275fac=function(n){return new(n||A)(t.rXU(C.Pw8),t.rXU(t.gRc))};static#n=this.\u0275cmp=t.VBU({type:A,selectors:[["cvc-variants-table"]],inputs:{cvcHeight:"cvcHeight",variantTypeId:"variantTypeId",variantGroupId:"variantGroupId",cvcTitleTemplate:"cvcTitleTemplate",cvcTitle:"cvcTitle",initialPageSize:"initialPageSize",initialUserFilters:"initialUserFilters"},decls:9,vars:2,consts:[["setHeightCard",""],["table",""],["titleTemplate",""],["extraTemplate",""],["virtualTable",""],[4,"ngIf","ngIfElse"],["nzSize","small","cvcAutoHeightCard","","cvcAutoHeightTarget","viewport",3,"nzTitle","nzExtra"],[3,"ngTemplateOutlet"],[1,"card-container",3,"ngStyle"],["cvcAutoHeightCard","","nzSize","small",3,"nzTitle","nzExtra"],["nzSize","small","cvcTableScroll","",3,"cvcTableScrollOnScroll","nzData","nzLoading","cvcAutoHeightTable","nzVirtualItemSize","cvcTableScrollQueryRef","cvcTableScrollPageInfo","cvcTableScrollToIndex","nzVirtualForTrackBy","nzScroll","nzFrontPagination","nzShowPagination"],[3,"nzSortOrderChange"],[1,"col-header-row"],["nzWidth","150px","nzLeft","",3,"nzColumnKey","nzSortFn"],["nzLeft","","nzWidth","70px","nz-tooltip","","nzTooltipTitle","Feature Type"],["nz-icon","","nzType","civic-feature"],["nzWidth","100px",3,"nzColumnKey","nzSortFn"],["nzWidth","170px"],["nzWidth","180px",3,"nzFilterChange","nzFilters","nzFilterFn"],["nzWidth","200px"],["nzWidth","180px"],[1,"filter-row"],["nzLeft",""],[3,"inputModelChange","inputModel"],["nzAllowClear","","nzSize","small","nzPlaceHolder","All",3,"ngModelChange","nzDropdownMatchSelectWidth","ngModel"],["nzLabel","Gene",3,"nzValue"],["nzLabel","Factor",3,"nzValue"],["nzLabel","Fusion",3,"nzValue"],["nz-virtual-scroll",""],[1,"data-row"],[3,"variant","truncateLongName"],["nz-typography","","nzType","secondary"],[3,"feature","truncateLongName"],[3,"maxDisplayCount","tags","matchingText"],["tagType","variant-type",3,"tags","maxDisplayCount","matchingText"],["tagType","disease",3,"tags","maxDisplayCount","matchingText"],["tagType","therapy",3,"tags","maxDisplayCount","matchingText"],[4,"ngIf"],[1,"table-info"],[3,"cvcTableCountsConnection"],["nzColor","processing",4,"ngIf"],[3,"cvcShowTag"],["nzColor","processing"],["nz-icon","","nzType","sync","nzSpin",""]],template:function(n,r){if(1&n&&t.DNE(0,et,3,3,"ng-container",5)(1,_t,3,6,"ng-template",null,0,t.C5r)(3,rt,43,41,"ng-template",null,1,t.C5r)(5,ct,4,3,"ng-template",null,2,t.C5r)(7,gt,4,6,"ng-template",null,3,t.C5r),2&n){const a=t.sdS(2);t.Y8G("ngIf",!r.cvcHeight)("ngIfElse",a)}},dependencies:[g.bT,g.T3,g.B3,E.BC,E.vS,z.c,R.cK,y.Dn,i.CP,i.Cc,i.SO,i._4,i.IL,i.aj,i.kt,i.CC,i.OL,b.s,h.LH,N.Di,B.ld,B.WI,L.M,W.s,U.n,K._,G.M,$.s,S.y,F.f,Y.U,X.V,g.PV,H.L9,w.y],styles:["[_nghost-%COMP%]{display:block}nz-card[_ngcontent-%COMP%]:first-of-type     .ant-card-body{padding:0;margin-top:1px}.table-info[_ngcontent-%COMP%]{margin-left:.5rem}tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]{white-space:nowrap}tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell.align-right[_ngcontent-%COMP%]     .ant-table-column-title{text-align:right}tr.filter-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]{padding:3px 4px}tr.filter-row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   nz-filter-trigger[_ngcontent-%COMP%]     span.ant-dropdown-trigger{margin-left:0;padding-right:12px}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]{white-space:nowrap}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]   .anticon.attribute-icon[_ngcontent-%COMP%]{color:#595959}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell.overflow-ellipsis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell.button-cell[_ngcontent-%COMP%]{padding:0}tr.data-row[_ngcontent-%COMP%]   td.align-right[_ngcontent-%COMP%], tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%], tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%], tr.filter-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%]{text-align:right}"],changeDetection:0})};V=(0,P.Cg)([(0,s.d)()],V)},9271:(j,M,e)=>{e.d(M,{l:()=>b});var P=e(177),f=e(6912),C=e(7874),s=e(9214),T=e(5724),m=e(4998),u=e(9374),d=e(4917),O=e(4256),I=e(4450),p=e(8252),v=e(513),D=e(5703),x=e(5103),c=e(9247),t=e(5699),g=e(5154),E=e(7391),z=e(7051),R=e(1997),y=e(9417),i=e(3953);let b=(()=>{class h{static#t=this.\u0275fac=function(L){return new(L||h)};static#n=this.\u0275mod=i.$C({type:h});static#e=this.\u0275inj=i.G2t({imports:[P.MD,y.YN,v.Zw,D.Ti,x.Y3,c.$G,t.T,g.Qt,E.kT,R.DH,O.t,I.B,C.E,f.l,s.y,d.i,T.T,m.B,p.A,u.r,z.U]})}return h})()}}]);