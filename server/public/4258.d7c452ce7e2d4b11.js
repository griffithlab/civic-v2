"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[4258],{7948:(W,U,e)=>{e.d(U,{m:()=>b});var n=e(5e3),a=e(9808),T=e(125),t=e(9297),C=e(3193),l=e(8664),P=e(9810),D=e(9001),I=e(2826),L=e(5749),Q=e(8481),Z=e(647);function M(c,y){if(1&c&&(n.ynx(0),n._UZ(1,"span",2),n.BQk()),2&c){const h=n.oxw().$implicit;n.xp6(1),n.Q6J("innerHtml",h.text,n.oJD)}}function F(c,y){if(1&c&&(n.ynx(0),n._UZ(1,"cvc-user-tag",3),n.BQk()),2&c){const h=n.oxw().$implicit;n.xp6(1),n.Q6J("user",h)}}const B=function(c,y){return{id:c,name:y}};function $(c,y){if(1&c&&(n.TgZ(0,"span"),n._UZ(1,"cvc-revision-tag",6),n.qZA()),2&c){const h=n.oxw(2).$implicit;n.xp6(1),n.Q6J("revision",n.WLB(1,B,h.entityId,h.displayName))}}function v(c,y){if(1&c&&(n.TgZ(0,"span"),n._UZ(1,"cvc-gene-tag",7),n.qZA()),2&c){const h=n.oxw(2).$implicit;n.xp6(1),n.Q6J("gene",n.WLB(1,B,h.entityId,h.displayName))}}function E(c,y){if(1&c&&(n.TgZ(0,"span"),n._UZ(1,"cvc-variant-tag",8),n.qZA()),2&c){const h=n.oxw(2).$implicit;n.xp6(1),n.Q6J("variant",n.WLB(1,B,h.entityId,h.displayName))}}function r(c,y){if(1&c&&(n.TgZ(0,"span"),n._UZ(1,"cvc-variant-group-tag",9),n.qZA()),2&c){const h=n.oxw(2).$implicit;n.xp6(1),n.Q6J("variantgroup",n.WLB(1,B,h.entityId,h.displayName))}}const p=function(c,y,h){return{id:c,name:y,status:h}};function d(c,y){if(1&c&&(n.TgZ(0,"span"),n._UZ(1,"cvc-evidence-tag",10),n.qZA()),2&c){const h=n.oxw(2).$implicit;n.xp6(1),n.Q6J("evidence",n.kEZ(1,p,h.entityId,h.displayName,h.status))}}function O(c,y){if(1&c&&(n.TgZ(0,"span"),n._UZ(1,"cvc-assertion-tag",11),n.qZA()),2&c){const h=n.oxw(2).$implicit;n.xp6(1),n.Q6J("assertion",n.kEZ(1,p,h.entityId,h.displayName,h.status))}}function z(c,y){if(1&c&&(n.TgZ(0,"span"),n._UZ(1,"cvc-organization-tag",12),n.qZA()),2&c){const h=n.oxw(2).$implicit;n.xp6(1),n.Q6J("org",n.WLB(1,B,h.entityId,h.displayName))}}function A(c,y){if(1&c&&(n.TgZ(0,"span"),n.TgZ(1,"nz-tag"),n._UZ(2,"i",13),n._uU(3),n.qZA(),n.qZA()),2&c){const h=n.oxw(2).$implicit;n.xp6(2),n.MGl("nzType","civic-",h.displayName.slice(0,-1),""),n.xp6(1),n.hij(" ",h.displayName,"")}}function N(c,y){if(1&c&&(n.ynx(0),n.ynx(1,4),n.YNc(2,$,2,4,"span",5),n.YNc(3,v,2,4,"span",5),n.YNc(4,E,2,4,"span",5),n.YNc(5,r,2,4,"span",5),n.YNc(6,d,2,5,"span",5),n.YNc(7,O,2,5,"span",5),n.YNc(8,z,2,4,"span",5),n.YNc(9,A,4,2,"span",5),n.BQk(),n.BQk()),2&c){const h=n.oxw().$implicit;n.xp6(1),n.Q6J("ngSwitch",h.tagType),n.xp6(1),n.Q6J("ngSwitchCase","REVISION"),n.xp6(1),n.Q6J("ngSwitchCase","GENE"),n.xp6(1),n.Q6J("ngSwitchCase","VARIANT"),n.xp6(1),n.Q6J("ngSwitchCase","VARIANT_GROUP"),n.xp6(1),n.Q6J("ngSwitchCase","EVIDENCE_ITEM"),n.xp6(1),n.Q6J("ngSwitchCase","ASSERTION"),n.xp6(1),n.Q6J("ngSwitchCase","ORGANIZATION"),n.xp6(1),n.Q6J("ngSwitchCase","ROLE")}}function g(c,y){if(1&c&&(n.ynx(0),n.YNc(1,M,2,1,"ng-container",1),n.YNc(2,F,2,1,"ng-container",1),n.YNc(3,N,10,9,"ng-container",1),n.BQk()),2&c){const h=y.$implicit;n.xp6(1),n.Q6J("ngIf","CommentTextSegment"==h.__typename),n.xp6(1),n.Q6J("ngIf","User"==h.__typename),n.xp6(1),n.Q6J("ngIf","CommentTagSegment"==h.__typename)}}let b=(()=>{class c{ngOnInit(){if(void 0===this.commentBodySegments)throw new Error("Must pass a list of comment body segments into comment body component.")}}return c.\u0275fac=function(h){return new(h||c)},c.\u0275cmp=n.Xpm({type:c,selectors:[["cvc-comment-body"]],inputs:{commentBodySegments:"commentBodySegments"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"innerHtml"],[3,"user"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"revision"],[3,"gene"],[3,"variant"],[3,"variantgroup"],[3,"evidence"],[3,"assertion"],[3,"org"],["nz-icon","","nzTheme","twotone","nzTwotoneColor","#A0D8F5",3,"nzType"]],template:function(h,w){1&h&&n.YNc(0,g,4,3,"ng-container",0),2&h&&n.Q6J("ngForOf",w.commentBodySegments)},directives:[a.sg,a.O5,T.I,a.RF,a.n9,t.p,C.H,l.I,P.u,D.O,I.w,L.m,Q.j,Z.Ls],styles:[""]}),c})()},2177:(W,U,e)=>{e.d(U,{D:()=>vt});var n=e(712),a=e(4850),T=e(373),t=e(5e3),C=e(9808),l=e(1894),P=e(8144),D=e(7484),I=e(3762),L=e(6042),Q=e(2683),Z=e(1344),M=e(6699),F=e(7948),B=e(8625);function $(u,R){if(1&u&&t._UZ(0,"nz-avatar",4),2&u){const s=t.oxw();t.Q6J("nzSrc",s.comment.commenter.profileImagePath)}}function v(u,R){1&u&&t._UZ(0,"nz-avatar",5)}let E=(()=>{class u{ngOnInit(){if(void 0===this.comment)throw new Error("Must pass a comment into comment display component.")}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275cmp=t.Xpm({type:u,selectors:[["cvc-comment-display"]],inputs:{comment:"comment"},decls:7,vars:7,consts:[[3,"nzAuthor","nzDatetime"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],[3,"commentBodySegments"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","","nzIcon","civic:curator"]],template:function(s,x){if(1&s&&(t.TgZ(0,"nz-comment",0),t.ALo(1,"timeago"),t.YNc(2,$,1,1,"nz-avatar",1),t.YNc(3,v,1,0,"ng-template",null,2,t.W1O),t.TgZ(5,"nz-comment-content"),t._UZ(6,"cvc-comment-body",3),t.qZA(),t.qZA()),2&s){const S=t.MAs(4);t.Q6J("nzAuthor",x.comment.commenter.displayName)("nzDatetime",t.lcZ(1,5,x.comment.createdAt)),t.xp6(2),t.Q6J("ngIf",x.comment.commenter.profileImagePath)("ngIfElse",S),t.xp6(4),t.Q6J("commentBodySegments",x.comment.parsedComment)}},directives:[Z.WE,C.O5,M.Dz,Z.DA,Z.Y4,F.m],pipes:[B.wr],styles:[""]}),u})();var r=e(8929),p=e(7625),d=e(6123),O=e(9350),z=e(9169),A=e(2359),N=e(3075),g=e(4546),b=e(2993),c=e(1812),y=e(7525),h=e(1014),w=e(7815),V=e(2643),Y=e(6874);function G(u,R){if(1&u){const s=t.EpF();t.TgZ(0,"nz-alert",7),t.NdJ("nzOnClose",function(){return t.CHM(s),t.oxw().onSuccessBannerClose()}),t.qZA()}}function j(u,R){if(1&u&&(t.TgZ(0,"nz-form-item"),t._UZ(1,"cvc-form-errors-alert",8),t.qZA()),2&u){const s=t.oxw();t.xp6(1),t.Q6J("errors",s.errorMessages)}}let H=(()=>{class u{constructor(s,x,S){this.viewerService=s,this.addCommentGql=x,this.networkErrorService=S,this.commentAddedEvent=new t.vpe,this.destroy$=new r.xQ,this.success=!1,this.errorMessages=[],this.loading=!1,this.viewerService.viewer$.pipe((0,p.R)(this.destroy$)).subscribe(K=>{this.organizations=K.organizations,this.mostRecentOrg=K.mostRecentOrg}),this.addCommentMutator=new d.U(S)}selectOrg(s){this.mostRecentOrg=s}submitComment(){if(this.commentText){this.errorMessages=[];let x=this.addCommentMutator.mutate(this.addCommentGql,{input:{body:this.commentText,subject:this.subject,organizationId:void 0===this.mostRecentOrg?void 0:this.mostRecentOrg.id}});x.submitSuccess$.pipe((0,p.R)(this.destroy$)).subscribe(S=>{S&&(this.resetForm(),this.success=!0)}),x.submitError$.pipe((0,p.R)(this.destroy$)).subscribe(S=>{S&&(this.errorMessages=S,this.success=!1)}),x.isSubmitting$.pipe((0,p.R)(this.destroy$)).subscribe(S=>{this.loading=S})}}resetForm(){this.commentText="",this.commentAddedEvent.emit()}onSuccessBannerClose(){this.resetForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return u.\u0275fac=function(s){return new(s||u)(t.Y36(O.a),t.Y36(n.iGM),t.Y36(z.Y))},u.\u0275cmp=t.Xpm({type:u,selectors:[["cvc-comment-add"]],inputs:{subject:"subject"},outputs:{commentAddedEvent:"commentAddedEvent"},decls:12,vars:6,consts:[["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[4,"ngIf"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[3,"selectedOrg","selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"],["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose"],[3,"errors"]],template:function(s,x){1&s&&(t.TgZ(0,"nz-card"),t.YNc(1,G,1,0,"nz-alert",0),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return x.submitComment()}),t.YNc(3,j,2,1,"nz-form-item",2),t.TgZ(4,"cvc-comment-input",3),t.NdJ("commentChange",function(K){return x.commentText=K}),t.qZA(),t.TgZ(5,"nz-spin",4),t.TgZ(6,"nz-form-item"),t.TgZ(7,"nz-form-control"),t.TgZ(8,"cvc-form-buttons"),t.TgZ(9,"cvc-org-selector-btn-group",5),t.NdJ("selectedOrgChange",function(K){return x.mostRecentOrg=K}),t.TgZ(10,"button",6),t._uU(11," Add Comment "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&s&&(t.xp6(1),t.Q6J("ngIf",x.success),t.xp6(2),t.Q6J("ngIf",x.errorMessages.length>0),t.xp6(1),t.Q6J("comment",x.commentText),t.xp6(1),t.Q6J("nzSpinning",x.loading),t.xp6(4),t.Q6J("selectedOrg",x.mostRecentOrg),t.xp6(1),t.Q6J("disabled",x.loading||!(void 0!==x.commentText&&x.commentText.length>=10)))},directives:[D.bd,C.O5,A.r,N._Y,N.JL,N.F,g.Lr,l.SK,g.Nx,b.V,c.b,y.W,l.t3,g.Fd,h.Z,w.q,L.ix,V.dQ,Y.m,Q.w],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2}),u})();var X=e(8747),q=e(647),k=e(6949),tt=e(9058);function nt(u,R){if(1&u){const s=t.EpF();t.TgZ(0,"div",18),t.TgZ(1,"button",19),t.NdJ("click",function(){t.CHM(s);const S=t.oxw().ngIf;return t.oxw(3).onLoadMore(S.startCursor)}),t._uU(2,"Load older comments "),t.qZA(),t.qZA()}}function et(u,R){if(1&u&&(t.TgZ(0,"nz-list-header"),t.YNc(1,nt,3,0,"div",17),t.qZA()),2&u){const s=R.ngIf;t.xp6(1),t.Q6J("ngIf",s.hasPreviousPage)}}function ot(u,R){if(1&u&&(t.TgZ(0,"nz-list-item"),t._UZ(1,"cvc-comment-display",20),t.qZA()),2&u){const s=R.$implicit;t.xp6(1),t.Q6J("comment",s)}}function it(u,R){if(1&u&&(t.TgZ(0,"nz-card",13),t.TgZ(1,"nz-list",14),t.ALo(2,"ngrxPush"),t.ALo(3,"ngrxPush"),t.YNc(4,et,2,1,"nz-list-header",15),t.ALo(5,"ngrxPush"),t.YNc(6,ot,2,1,"ng-template",null,16,t.W1O),t.qZA(),t.qZA()),2&u){const s=t.MAs(7),x=t.oxw(2);t.xp6(1),t.Q6J("nzDataSource",t.lcZ(2,4,x.comments$))("nzLoading",t.lcZ(3,6,x.loading$))("nzRenderItem",s),t.xp6(3),t.Q6J("ngIf",t.lcZ(5,8,x.pageInfo$))}}function at(u,R){if(1&u){const s=t.EpF();t.TgZ(0,"cvc-comment-add",21),t.NdJ("commentAddedEvent",function(){return t.CHM(s),t.oxw(2).refreshList()}),t.qZA()}if(2&u){const s=t.oxw(2);t.Q6J("subject",s.commentable)}}function ct(u,R){if(1&u&&t._UZ(0,"nz-avatar",24),2&u){const s=t.oxw().$implicit;t.Q6J("nzSrc",s.profileImagePath)}}function st(u,R){if(1&u&&(t._UZ(0,"nz-avatar",25),t.ALo(1,"uppercase")),2&u){const s=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,s.displayName.charAt(0)))}}function rt(u,R){if(1&u&&(t.YNc(0,ct,1,1,"nz-avatar",22),t.YNc(1,st,2,3,"ng-template",null,23,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&u){const s=R.$implicit,x=t.MAs(2);t.Q6J("ngIf",s.profileImagePath)("ngIfElse",x),t.xp6(4),t.Oqu(s.displayName)}}function lt(u,R){if(1&u&&t._UZ(0,"nz-avatar",24),2&u){const s=t.oxw().$implicit;t.Q6J("nzSrc",s.profileImagePath)}}function _t(u,R){if(1&u&&(t._UZ(0,"nz-avatar",25),t.ALo(1,"uppercase")),2&u){const s=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,s.displayName.charAt(0)))}}function gt(u,R){if(1&u&&(t.YNc(0,lt,1,1,"nz-avatar",22),t.YNc(1,_t,2,3,"ng-template",null,23,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&u){const s=R.$implicit,x=t.MAs(2);t.Q6J("ngIf",s.profileImagePath)("ngIfElse",x),t.xp6(4),t.Oqu(s.displayName)}}function mt(u,R){if(1&u&&(t._UZ(0,"nz-avatar",26),t.TgZ(1,"span"),t._uU(2),t.qZA()),2&u){const s=R.$implicit;t.MGl("nzIcon","civic-",s.tag.displayName,""),t.xp6(2),t.hij("",s.tag.displayName,"s")}}function pt(u,R){if(1&u&&(t._UZ(0,"i",27),t.ALo(1,"iconNameForSubscribableEntity"),t.TgZ(2,"span"),t._uU(3),t.qZA()),2&u){const s=R.$implicit;t.Q6J("nzType",t.lcZ(1,2,s.tag.tagType)),t.xp6(3),t.Oqu(s.tag.displayName)}}function ut(u,R){if(1&u){const s=t.EpF();t.ynx(0),t.TgZ(1,"nz-row",2),t.TgZ(2,"nz-col",3),t.TgZ(3,"nz-space",4),t.YNc(4,it,8,10,"nz-card",5),t.YNc(5,at,1,1,"cvc-comment-add",6),t.qZA(),t.qZA(),t.TgZ(6,"nz-col",7),t.TgZ(7,"cvc-participant-list",8),t.NdJ("participantSelectedEvent",function(S){return t.CHM(s),t.oxw().onCommenterSelected(S)}),t.ALo(8,"ngrxPush"),t.YNc(9,rt,5,3,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(11,"cvc-participant-list",10),t.NdJ("participantSelectedEvent",function(S){return t.CHM(s),t.oxw().onMentionedUserSelected(S)}),t.ALo(12,"ngrxPush"),t.YNc(13,gt,5,3,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(15,"cvc-participant-list",11),t.NdJ("participantSelectedEvent",function(S){return t.CHM(s),t.oxw().onMentionedRoleSelected(S)}),t.ALo(16,"ngrxPush"),t.YNc(17,mt,3,2,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(19,"cvc-participant-list",12),t.NdJ("participantSelectedEvent",function(S){return t.CHM(s),t.oxw().onMentionedEntitySelected(S)}),t.ALo(20,"ngrxPush"),t.YNc(21,pt,4,4,"ng-template",null,9,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&u){const s=t.oxw();t.xp6(1),t.Q6J("nzGutter",16),t.xp6(6),t.Q6J("participantList",t.lcZ(8,5,s.commenters$)),t.xp6(4),t.Q6J("participantList",t.lcZ(12,7,s.mentionedUsers$)),t.xp6(4),t.Q6J("participantList",t.lcZ(16,9,s.mentionedRoles$)),t.xp6(4),t.Q6J("participantList",t.lcZ(20,11,s.mentionedEntities$))}}function dt(u,R){if(1&u){const s=t.EpF();t.TgZ(0,"cvc-comment-add",21),t.NdJ("commentAddedEvent",function(){return t.CHM(s),t.oxw().refreshList()}),t.qZA()}if(2&u){const s=t.oxw();t.Q6J("subject",s.commentable)}}let vt=(()=>{class u{constructor(s){this.gql=s,this.pageSize=5}ngOnInit(){this.queryRef$=this.gql.watch({subject:this.commentable,last:this.pageSize,sortBy:{column:n.h01.Created,direction:n.SrV.Asc}});let s=this.queryRef$.valueChanges;this.pageInfo$=s.pipe((0,a.U)(({data:x})=>x.comments.pageInfo)),this.loading$=s.pipe((0,a.U)(({loading:x})=>x)),this.comments$=s.pipe((0,a.U)(({data:x})=>x.comments.edges.map(S=>S.node))),this.commenters$=s.pipe((0,a.U)(({data:x})=>x.comments.uniqueCommenters)),this.mentionedUsers$=s.pipe((0,a.U)(({data:x})=>x.comments.mentionedUsers)),this.mentionedRoles$=s.pipe((0,a.U)(({data:x})=>x.comments.mentionedRoles.map(S=>({id:`${S.entityId}-${S.tagType}`,tag:S})))),this.mentionedEntities$=s.pipe((0,a.U)(({data:x})=>x.comments.mentionedEntities.map(S=>({id:`${S.entityId}-${S.tagType}`,tag:S})))),this.unfilteredCount$=s.pipe((0,T.j)("data","comments","unfilteredCountForSubject"))}onLoadMore(s){this.queryRef$.fetchMore({variables:{last:this.pageSize,before:s}})}onCommenterSelected(s){this.queryRef$.refetch({originatingUserId:null==s?void 0:s.id})}onMentionedUserSelected(s){this.queryRef$.refetch({mentionedUserId:null==s?void 0:s.id})}onMentionedRoleSelected(s){if(s){let x=n.i44[s.tag.displayName[0].toUpperCase()+s.tag.displayName.slice(1)];this.queryRef$.refetch({mentionedRole:x})}else this.queryRef$.refetch({mentionedRole:void 0})}onMentionedEntitySelected(s){this.queryRef$.refetch(s?{mentionedEntity:{entityType:s.tag.tagType,id:s.tag.entityId}}:{mentionedEntity:void 0})}refreshList(){this.queryRef$.refetch()}}return u.\u0275fac=function(s){return new(s||u)(t.Y36(n.iST))},u.\u0275cmp=t.Xpm({type:u,selectors:[["cvc-comment-list"]],inputs:{commentable:"commentable"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noComments",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical",2,"width","100%"],["nzTitle","Comments",4,"nzSpaceItem"],["id","addComment",3,"subject","commentAddedEvent",4,"nzSpaceItem"],["nzSpan","6"],["listTitle","Commenters",3,"participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Mentioned Users",3,"participantList","participantSelectedEvent"],["listTitle","Mentioned Roles",3,"participantList","participantSelectedEvent"],["listTitle","Mentioned Entities",3,"participantList","participantSelectedEvent"],["nzTitle","Comments"],["nzSize","small","nzItemLayout","horizontal",3,"nzDataSource","nzLoading","nzRenderItem"],[4,"ngIf"],["comment",""],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","link","nzSize","small","nzBlock","",3,"click"],[3,"comment"],["id","addComment",3,"subject","commentAddedEvent"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],[3,"nzIcon"],["nz-icon","",3,"nzType"]],template:function(s,x){if(1&s&&(t.YNc(0,ut,23,13,"ng-container",0),t.ALo(1,"ngrxPush"),t.YNc(2,dt,1,1,"ng-template",null,1,t.W1O)),2&s){const S=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,x.unfilteredCount$))("ngIfElse",S)}},directives:[C.O5,l.SK,l.t3,P.NU,P.$1,D.bd,I.n_,I.t4,L.ix,Q.w,I.AA,E,H,X.l,M.Dz,q.Ls],pipes:[k.fM,C.gd,tt.j],styles:["[_nghost-%COMP%]{display:block}nz-list-header[_ngcontent-%COMP%]{padding:0;margin:0}nz-list-header[_ngcontent-%COMP%]   [nz-list-load-more][_ngcontent-%COMP%]{margin-top:-.5em;padding-bottom:.5em}"]}),u})()},8954:(W,U,e)=>{e.d(U,{l:()=>V});var n=e(9808),a=e(1894),T=e(7484),t=e(3762),C=e(6699),l=e(8144),P=e(6949),D=e(6559),I=e(1150),L=e(1344),Q=e(8625),Z=e(7026),M=e(8909),F=e(5e3);let B=(()=>{class Y{}return Y.\u0275fac=function(j){return new(j||Y)},Y.\u0275mod=F.oAB({type:Y}),Y.\u0275inj=F.cJS({imports:[[n.ez,L.YM,C.Rt,Q.$L.forChild({formatter:{useClass:Z.x,provide:Q.KP}}),M.m]]}),Y})();var $=e(3075),v=e(8776),E=e(4546),r=e(2752),p=e(6904),d=e(8269),O=e(6042),z=e(6224),A=e(868),N=e(7525),g=e(4921),b=e(2472),c=e(2359);let y=(()=>{class Y{}return Y.\u0275fac=function(j){return new(j||Y)},Y.\u0275mod=F.oAB({type:Y}),Y.\u0275inj=F.cJS({imports:[[n.ez,$.UX,P.WG,O.sL,T.vh,A.we,E.U5,N.j,g.Gl,c.L,$.u5,v.X0.forChild(),r.B,p.A,d.R,M.m,z.Y,b.i]]}),Y})();var h=e(647),w=e(9444);let V=(()=>{class Y{}return Y.\u0275fac=function(j){return new(j||Y)},Y.\u0275mod=F.oAB({type:Y}),Y.\u0275inj=F.cJS({imports:[[n.ez,P.WG,O.sL,a.Jb,T.vh,t.Ph,h.PV,w.s,C.Rt,l.zf,D.H0,y,I.N,B]]}),Y})()},8730:(W,U,e)=>{e.d(U,{L:()=>on});var n=e(712),a=e(373),T=e(4850),t=e(5e3),C=e(9808),l=e(1894),P=e(8144),D=e(8929),I=e(7625),L=e(9350),Q=e(2359),Z=e(7484),M=e(7948),F=e(5737),B=e(6123),$=e(9169),v=e(6949),E=e(404),r=e(6042),p=e(2643),d=e(2683),O=e(3610),z=e(647),A=e(3075),N=e(4546),g=e(1812),b=e(7525),c=e(1014),y=e(7815),h=e(6874);function w(i,m){if(1&i){const o=t.EpF();t.TgZ(0,"nz-alert",4),t.NdJ("nzOnClose",function(){return t.CHM(o),t.oxw().onSuccessBannerClose()}),t.qZA()}}function V(i,m){}function Y(i,m){1&i&&t.YNc(0,V,0,0,"ng-template")}function G(i,m){if(1&i&&(t.ynx(0),t.YNc(1,Y,1,0,void 0,9),t.BQk()),2&i){t.oxw(2);const o=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",o)}}function j(i,m){if(1&i&&(t.ynx(0),t.YNc(1,G,2,1,"ng-container",5),t.BQk()),2&i){const o=t.oxw().ngrxLet,_=t.MAs(5),f=t.oxw();t.xp6(1),t.Q6J("ngIf",o.isEditor||o.isAdmin||f.flag.flaggingUser.id===o.id)("ngIfElse",_)}}function H(i,m){}function X(i,m){1&i&&t.YNc(0,H,0,0,"ng-template")}function q(i,m){if(1&i&&(t.TgZ(0,"span",10),t.YNc(1,X,1,0,void 0,9),t.qZA()),2&i){t.oxw();const o=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",o)}}function k(i,m){}function tt(i,m){1&i&&t.YNc(0,k,0,0,"ng-template")}function nt(i,m){if(1&i&&(t.TgZ(0,"span",11),t.YNc(1,tt,1,0,void 0,9),t.qZA()),2&i){t.oxw();const o=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",o)}}function et(i,m){if(1&i){const o=t.EpF();t.TgZ(0,"button",13),t.NdJ("nzPopoverVisibleChange",function(f){return t.CHM(o),t.oxw(3).flagResolvePopoverVisible=f})("click",function(){t.CHM(o);const f=t.oxw(3);return f.flagResolvePopoverVisible=!f.flagResolvePopoverVisible}),t._uU(1," Resolve Flag "),t._UZ(2,"i",14),t.qZA()}if(2&i){const o=t.oxw(2).ngrxLet,_=t.oxw(),f=t.MAs(3),J=t.MAs(5);t.Q6J("nzPopoverTitle",f)("nzPopoverVisible",_.flagResolvePopoverVisible)("nzPopoverContent",J)("nzPopoverTrigger",void 0)("disabled",!o.signedIn||o.isCurator&&_.flag.flaggingUser.id!=o.id)}}function ot(i,m){if(1&i&&t.YNc(0,et,3,5,"button",12),2&i){const o=t.oxw(2);t.Q6J("ngIf",!o.success)}}function it(i,m){if(1&i&&(t.ynx(0),t.YNc(1,j,2,2,"ng-container",5),t.YNc(2,q,2,1,"ng-template",null,6,t.W1O),t.YNc(4,nt,2,1,"ng-template",null,7,t.W1O),t.YNc(6,ot,1,1,"ng-template",null,8,t.W1O),t.BQk()),2&i){const o=m.ngrxLet,_=t.MAs(3);t.xp6(1),t.Q6J("ngIf",o.signedIn)("ngIfElse",_)}}const at=function(){return{float:"right"}};function ct(i,m){if(1&i){const o=t.EpF();t._uU(0," Resolve Flag "),t.TgZ(1,"span",15),t.TgZ(2,"i",16),t.NdJ("click",function(){t.CHM(o);const f=t.oxw();return f.flagResolvePopoverVisible=!1,f.errorMessages=[]}),t.qZA(),t.qZA()}2&i&&(t.xp6(1),t.Q6J("ngStyle",t.DdM(1,at)))}function st(i,m){if(1&i&&t._UZ(0,"nz-alert",25),2&i){t.oxw();const o=t.MAs(2);t.Q6J("nzDescription",o)}}function rt(i,m){if(1&i&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&i){const o=m.$implicit;t.xp6(1),t.hij(" ",o," ")}}function lt(i,m){if(1&i&&(t.TgZ(0,"ul"),t.YNc(1,rt,2,1,"li",26),t.qZA()),2&i){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",o.errorMessages)}}function _t(i,m){if(1&i){const o=t.EpF();t.YNc(0,st,1,1,"nz-alert",17),t.YNc(1,lt,2,1,"ng-template",null,18,t.W1O),t.TgZ(3,"nz-card",19),t.TgZ(4,"form",20),t.NdJ("ngSubmit",function(){return t.CHM(o),t.oxw().resolveFlag()}),t.TgZ(5,"cvc-comment-input",21),t.NdJ("commentChange",function(f){return t.CHM(o),t.oxw().comment=f}),t.qZA(),t.TgZ(6,"nz-spin",22),t.TgZ(7,"nz-form-item"),t.TgZ(8,"nz-form-control"),t.TgZ(9,"cvc-form-buttons"),t.TgZ(10,"cvc-org-selector-btn-group",23),t.NdJ("selectedOrgChange",function(f){return t.CHM(o),t.oxw().onOrgSelected(f)}),t.TgZ(11,"button",24),t._uU(12," Resolve "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const o=t.oxw();t.Q6J("ngIf",o.errorMessages.length>0),t.xp6(5),t.Q6J("comment",o.comment),t.xp6(1),t.Q6J("nzSpinning",o.loading),t.xp6(5),t.Q6J("disabled",!(void 0!==o.comment&&o.comment.length>=10))}}let gt=(()=>{class i{constructor(o,_,f){this.gql=o,this.viewerService=_,this.networkErrorService=f,this.errorMessages=[],this.loading=!1,this.success=!1,this.flagResolvePopoverVisible=!1,this.destroy$=new D.xQ,this.resolveFlagMutator=new B.U(f)}ngOnInit(){if(void 0===this.flag)throw new Error("Must pass a Flag in to resolve component.");this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(o=>{this.selectedOrg=o.mostRecentOrg})}onOrgSelected(o){this.selectedOrg=o}resolveFlag(){var o;if(this.comment){this.errorMessages=[];let _=this.resolveFlagMutator.mutate(this.gql,{input:{id:this.flag.id,comment:this.comment,organizationId:null===(o=this.selectedOrg)||void 0===o?void 0:o.id}});_.submitSuccess$.pipe((0,I.R)(this.destroy$)).subscribe(f=>{f&&(this.flagResolvePopoverVisible=!1,this.success=!0,this.flagResolvedCallback&&this.flagResolvedCallback())}),_.submitError$.pipe((0,I.R)(this.destroy$)).subscribe(f=>{f.length>0&&(this.success=!1,this.errorMessages=f)}),_.isSubmitting$.pipe((0,I.R)(this.destroy$)).subscribe(f=>{this.loading=f})}}onSuccessBannerClose(){this.success=!1,this.flagResolvedCallback&&this.flagResolvedCallback()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(n.EwB),t.Y36(L.a),t.Y36($.Y))},i.\u0275cmp=t.Xpm({type:i,selectors:[["cvc-flag-resolve"]],inputs:{flag:"flag",flagResolvedCallback:"flagResolvedCallback"},decls:6,vars:2,consts:[["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],[4,"ngrxLet"],["flagResolvePopoverTitleTemplate",""],["flagResolvePopoverContentTemplate",""],["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["noPermissions",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to resolve flag."],["nz-tooltip","","nzTooltipTitle","If you are not an editor, you can only resolve flags you opened."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click",4,"ngIf"],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click"],["nz-icon","","nzType","caret-down","nzTheme","outline"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription",4,"ngIf"],["errorContents",""],["nzType","inner",2,"width","300px"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[3,"selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription"],[4,"ngFor","ngForOf"]],template:function(o,_){1&o&&(t.YNc(0,w,1,0,"nz-alert",0),t.YNc(1,it,8,2,"ng-container",1),t.YNc(2,ct,3,2,"ng-template",null,2,t.W1O),t.YNc(4,_t,13,4,"ng-template",null,3,t.W1O)),2&o&&(t.Q6J("ngIf",_.success),t.xp6(1),t.Q6J("ngrxLet",_.viewer$))},directives:[C.O5,Q.r,v.eJ,C.tP,E.SY,r.ix,p.dQ,d.w,O.lU,z.Ls,C.PC,C.sg,Z.bd,A._Y,A.JL,A.F,N.Lr,g.b,b.W,l.SK,N.Nx,l.t3,N.Fd,c.Z,y.q,h.m],styles:[""]}),i})();var mt=e(3618),pt=e(125),ut=e(4590),dt=e(685),vt=e(8625);function u(i,m){if(1&i){const o=t.EpF();t.TgZ(0,"nz-alert",5),t.NdJ("nzOnClose",function(){const J=t.CHM(o).$implicit;return t.oxw().onErrorBannerClose(J)}),t.qZA()}2&i&&t.Q6J("nzMessage",m.$implicit)}function R(i,m){if(1&i){const o=t.EpF();t.TgZ(0,"nz-alert",6),t.NdJ("nzOnClose",function(){return t.CHM(o),t.oxw().onSuccessBannerClose()}),t.qZA()}if(2&i){const o=t.oxw();t.MGl("nzMessage","Revision(s) successfully ",o.success,".")}}function s(i,m){if(1&i&&t._UZ(0,"cvc-comment-body",15),2&i){const o=t.oxw(2).$implicit;t.Q6J("commentBodySegments",o.openComment.parsedComment)}}function x(i,m){if(1&i&&(t.ynx(0),t._UZ(1,"cvc-flag-resolve",16),t.BQk()),2&i){const o=t.oxw(2).$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("flag",o)("flagResolvedCallback",_.flagResolvedCallback)}}function S(i,m){if(1&i&&(t.ynx(0),t._UZ(1,"cvc-comment-body",15),t.BQk()),2&i){const o=t.oxw(3).$implicit;t.xp6(1),t.Q6J("commentBodySegments",o.resolutionComment.parsedComment)}}function K(i,m){if(1&i&&t._UZ(0,"cvc-user-tag",21),2&i){const o=t.oxw(3).$implicit;t.Q6J("user",o.resolvingUser)}}function ft(i,m){if(1&i&&(t.TgZ(0,"nz-row"),t.TgZ(1,"nz-col",17),t.YNc(2,S,2,1,"ng-container",18),t.qZA(),t.TgZ(3,"nz-col",19),t._uU(4," Resolved By "),t.YNc(5,K,1,1,"cvc-user-tag",20),t._uU(6),t.ALo(7,"timeago"),t.qZA(),t.qZA()),2&i){const o=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngIf",o.resolutionComment),t.xp6(3),t.Q6J("ngIf",void 0!==o.resolvingUser),t.xp6(1),t.hij(" ",t.lcZ(7,3,o.resolvedAt)," ")}}function Ct(i,m){if(1&i&&(t._UZ(0,"i",22),t._uU(1)),2&i){const o=t.oxw(2).$implicit;t.xp6(1),t.hij(" FID",o.id," ")}}function zt(i,m){if(1&i&&(t.TgZ(0,"span"),t.TgZ(1,"span",26),t._uU(2,"Flagged By"),t.qZA(),t._UZ(3,"cvc-user-tag",21),t.TgZ(4,"span",26),t._uU(5),t.ALo(6,"timeago"),t.qZA(),t.qZA()),2&i){const o=t.oxw(3).$implicit;t.xp6(3),t.Q6J("user",o.flaggingUser),t.xp6(2),t.Oqu(t.lcZ(6,2,o.createdAt))}}function Tt(i,m){if(1&i&&t._UZ(0,"cvc-status-tag",27),2&i){const o=t.oxw(3).$implicit;t.Q6J("status",o.state)}}function ht(i,m){1&i&&(t.TgZ(0,"nz-space",23),t.YNc(1,zt,7,4,"span",24),t.YNc(2,Tt,1,1,"cvc-status-tag",25),t.qZA())}function xt(i,m){if(1&i&&(t.TgZ(0,"nz-card",10),t.YNc(1,s,1,1,"cvc-comment-body",11),t._UZ(2,"nz-divider"),t.YNc(3,x,2,2,"ng-container",3),t.YNc(4,ft,8,5,"ng-template",null,12,t.W1O),t.YNc(6,Ct,2,1,"ng-template",null,13,t.W1O),t.YNc(8,ht,3,0,"ng-template",null,14,t.W1O),t.qZA()),2&i){const o=t.MAs(5),_=t.MAs(7),f=t.MAs(9),J=t.oxw().$implicit;t.Q6J("nzTitle",_)("nzExtra",f),t.xp6(1),t.Q6J("ngIf",J.openComment),t.xp6(2),t.Q6J("ngIf","OPEN"==J.state)("ngIfElse",o)}}function yt(i,m){1&i&&(t.ynx(0),t.YNc(1,xt,10,5,"nz-card",9),t.BQk())}function Ot(i,m){if(1&i&&(t.ynx(0),t.TgZ(1,"nz-space",7),t.YNc(2,yt,2,0,"ng-container",8),t.qZA(),t.BQk()),2&i){const o=t.oxw();t.xp6(2),t.Q6J("ngForOf",o.flags)}}function Et(i,m){1&i&&t._UZ(0,"nz-empty",28)}let At=(()=>{class i{constructor(o){this.viewerService=o,this.isLoading=!1,this.success=!1,this.destroy$=new D.xQ}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(o=>{this.mostRecentOrg=o.mostRecentOrg})}setupMutationResultHandlers(o,_){o.submitSuccess$.pipe((0,I.R)(this.destroy$)).subscribe(f=>{f&&(this.isLoading=!1,this.errors=void 0,this.success=_)}),o.submitError$.pipe((0,I.R)(this.destroy$)).subscribe(f=>{f.length>0&&(this.isLoading=!1,this.success=!1,this.errors=f)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(o){var _;this.errors=null===(_=this.errors)||void 0===_?void 0:_.filter(f=>f!=o)}onSuccessBannerClose(){this.success=!1}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(L.a))},i.\u0275cmp=t.Xpm({type:i,selectors:[["cvc-flag-list"]],inputs:{flags:"flags",flagResolvedCallback:"flagResolvedCallback"},decls:6,vars:4,consts:[["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],["nzTitle","Flags",1,"card-list"],[4,"ngIf","ngIfElse"],["noFlags",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose"],["nzDirection","vertical"],[4,"ngFor","ngForOf"],["nzType","inner",3,"nzTitle","nzExtra",4,"nzSpaceItem"],["nzType","inner",3,"nzTitle","nzExtra"],[3,"commentBodySegments",4,"ngIf"],["flagResolved",""],["flagCardHeaderTitle",""],["flagCardHeaderExtra",""],[3,"commentBodySegments"],[3,"flag","flagResolvedCallback"],["nzSpan","16"],[4,"ngIf"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"user"],["nz-icon","","nzType","civic:flag"],["nzSize","small"],[4,"nzSpaceItem"],[3,"status",4,"nzSpaceItem"],["nz-typography","","nzType","secondary"],[3,"status"],["nzNotFoundImage","simple","nzNotFoundContent","No Flags matching filters"]],template:function(o,_){if(1&o&&(t.YNc(0,u,1,1,"nz-alert",0),t.YNc(1,R,1,1,"nz-alert",1),t.TgZ(2,"nz-card",2),t.YNc(3,Ot,3,1,"ng-container",3),t.YNc(4,Et,1,0,"ng-template",null,4,t.W1O),t.qZA()),2&o){const f=t.MAs(5);t.Q6J("ngForOf",_.errors),t.xp6(1),t.Q6J("ngIf",_.success),t.xp6(2),t.Q6J("ngIf",_.flags&&_.flags.length>0)("ngIfElse",f)}},directives:[C.sg,Q.r,C.O5,Z.bd,P.NU,P.$1,M.m,F.g,gt,l.SK,l.t3,mt.ZU,pt.I,z.Ls,d.w,ut.h,dt.p9],pipes:[vt.wr],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}),i})();var Mt=e(1243);function Zt(i,m){if(1&i){const o=t.EpF();t.TgZ(0,"nz-alert",8),t.NdJ("nzOnClose",function(){return t.CHM(o),t.oxw().onSuccessBannerClose()}),t.qZA()}}function Ft(i,m){if(1&i&&t._UZ(0,"nz-alert",9),2&i){t.oxw();const o=t.MAs(4);t.Q6J("nzDescription",o)}}function bt(i,m){if(1&i&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&i){const o=m.$implicit;t.xp6(1),t.hij(" ",o," ")}}function St(i,m){if(1&i&&(t.TgZ(0,"ul"),t.YNc(1,bt,2,1,"li",10),t.qZA()),2&i){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.errorMessages)}}function It(i,m){}function Pt(i,m){1&i&&t.YNc(0,It,0,0,"ng-template")}function Lt(i,m){if(1&i&&(t.ynx(0),t.YNc(1,Pt,1,0,void 0,15),t.BQk()),2&i){t.oxw();const o=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",o)}}function Dt(i,m){}function Ut(i,m){1&i&&t.YNc(0,Dt,0,0,"ng-template")}function Rt(i,m){if(1&i&&(t.TgZ(0,"span",16),t.YNc(1,Ut,1,0,void 0,15),t.qZA()),2&i){t.oxw();const o=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",o)}}function Bt(i,m){if(1&i&&(t.TgZ(0,"button",17),t._uU(1),t.ALo(2,"enumToTitle"),t.qZA()),2&i){const o=t.oxw().ngrxLet,_=t.oxw();t.Q6J("disabled",!(void 0!==_.comment&&_.comment.length>=10&&o.signedIn)),t.xp6(1),t.hij(" Flag ",t.lcZ(2,2,_.flaggable.entityType)," ")}}function Qt(i,m){if(1&i){const o=t.EpF();t.ynx(0),t.TgZ(1,"cvc-form-buttons"),t.TgZ(2,"cvc-org-selector-btn-group",11),t.NdJ("selectedOrgChange",function(f){return t.CHM(o),t.oxw().onOrgSelected(f)}),t.YNc(3,Lt,2,1,"ng-container",12),t.YNc(4,Rt,2,1,"ng-template",null,13,t.W1O),t.YNc(6,Bt,3,4,"ng-template",null,14,t.W1O),t.qZA(),t.qZA(),t.BQk()}if(2&i){const o=m.ngrxLet,_=t.MAs(5);t.xp6(3),t.Q6J("ngIf",o.signedIn)("ngIfElse",_)}}let Nt=(()=>{class i{constructor(o,_,f){this.gql=o,this.viewerService=_,this.networkErrorService=f,this.errorMessages=[],this.success=!1,this.loading=!1,this.comment="",this.destroy$=new D.xQ,this.addFlagMutator=new B.U(f)}ngOnInit(){if(this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(o=>{this.selectedOrg=o.mostRecentOrg}),void 0===this.flaggable)throw new Error("Must pass a flagggable into flag add component")}onOrgSelected(o){this.selectedOrg=o}submitFlag(){var o;this.errorMessages=[];let _={comment:this.comment,subject:this.flaggable,organizationId:null===(o=this.selectedOrg)||void 0===o?void 0:o.id},f=this.addFlagMutator.mutate(this.gql,{input:_});f.submitSuccess$.pipe((0,I.R)(this.destroy$)).subscribe(J=>{J&&(this.flagAddedCallback&&this.flagAddedCallback(),this.success=!0,this.comment="")}),f.submitError$.pipe((0,I.R)(this.destroy$)).subscribe(J=>{J.length>0&&(this.errorMessages=J)}),f.isSubmitting$.pipe((0,I.R)(this.destroy$)).subscribe(J=>{this.loading=J})}onSuccessBannerClose(){this.success=!1}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(n.B0s),t.Y36(L.a),t.Y36($.Y))},i.\u0275cmp=t.Xpm({type:i,selectors:[["cvc-flag-add"]],inputs:{flaggable:"flaggable",flagAddedCallback:"flagAddedCallback"},decls:11,vars:5,consts:[["nzType","inner"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription",4,"ngIf"],["errorContents",""],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[4,"ngrxLet"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription"],[4,"ngFor","ngForOf"],[3,"selectedOrgChange"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to flag entity."],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"]],template:function(o,_){1&o&&(t.TgZ(0,"nz-card",0),t.YNc(1,Zt,1,0,"nz-alert",1),t.YNc(2,Ft,1,1,"nz-alert",2),t.YNc(3,St,2,1,"ng-template",null,3,t.W1O),t.TgZ(5,"form",4),t.NdJ("ngSubmit",function(){return _.submitFlag()}),t.TgZ(6,"cvc-comment-input",5),t.NdJ("commentChange",function(J){return _.comment=J}),t.qZA(),t.TgZ(7,"nz-spin",6),t.TgZ(8,"nz-form-item"),t.TgZ(9,"nz-form-control"),t.YNc(10,Qt,8,2,"ng-container",7),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",_.success),t.xp6(1),t.Q6J("ngIf",_.errorMessages.length>0),t.xp6(4),t.Q6J("comment",_.comment),t.xp6(1),t.Q6J("nzSpinning",_.loading),t.xp6(3),t.Q6J("ngrxLet",_.viewer$))},directives:[Z.bd,C.O5,Q.r,C.sg,A._Y,A.JL,A.F,N.Lr,g.b,b.W,l.SK,N.Nx,l.t3,N.Fd,v.eJ,c.Z,y.q,C.tP,E.SY,r.ix,p.dQ,h.m,d.w],pipes:[Mt.I],styles:[""]}),i})();var Jt=e(8747),$t=e(6699);function Yt(i,m){if(1&i&&(t._UZ(0,"cvc-flag-list",13),t.ALo(1,"ngrxPush")),2&i){const o=t.oxw(2);t.Q6J("flags",t.lcZ(1,2,o.flags$))("flagResolvedCallback",o.refresh)}}function Wt(i,m){if(1&i){const o=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(o);const f=t.oxw(2).ngrxLet;return t.oxw(2).loadMore(null==f?null:f.endCursor)}),t._uU(1,"Load More"),t.qZA()}}function wt(i,m){1&i&&(t.ynx(0),t.YNc(1,Wt,2,0,"button",15),t.BQk())}function Kt(i,m){if(1&i&&(t.ynx(0),t.YNc(1,wt,2,0,"ng-container",14),t.BQk()),2&i){const o=m.ngrxLet;t.xp6(1),t.Q6J("ngIf",null==o?null:o.hasNextPage)}}function Gt(i,m){if(1&i&&t._UZ(0,"cvc-flag-add",17),2&i){const o=t.oxw(2);t.Q6J("flaggable",o.flaggable)("flagAddedCallback",o.refresh)}}function jt(i,m){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const o=m.$implicit;t.xp6(1),t.Oqu(o.displayName)}}function Vt(i,m){if(1&i&&t._UZ(0,"nz-avatar",20),2&i){const o=t.oxw().$implicit;t.Q6J("nzSrc",o.profileImagePath)}}function Ht(i,m){if(1&i&&(t._UZ(0,"nz-avatar",21),t.ALo(1,"uppercase")),2&i){const o=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,o.username.charAt(0)))}}function Xt(i,m){if(1&i&&(t.YNc(0,Vt,1,1,"nz-avatar",18),t.YNc(1,Ht,2,3,"ng-template",null,19,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&i){const o=m.$implicit,_=t.MAs(2);t.Q6J("ngIf",o.profileImagePath)("ngIfElse",_),t.xp6(4),t.Oqu(o.username)}}function qt(i,m){if(1&i&&t._UZ(0,"nz-avatar",20),2&i){const o=t.oxw().$implicit;t.Q6J("nzSrc",o.profileImagePath)}}function kt(i,m){if(1&i&&(t._UZ(0,"nz-avatar",21),t.ALo(1,"uppercase")),2&i){const o=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,o.username.charAt(0)))}}function tn(i,m){if(1&i&&(t.YNc(0,qt,1,1,"nz-avatar",18),t.YNc(1,kt,2,3,"ng-template",null,19,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&i){const o=m.$implicit,_=t.MAs(2);t.Q6J("ngIf",o.profileImagePath)("ngIfElse",_),t.xp6(4),t.Oqu(o.username)}}function nn(i,m){if(1&i){const o=t.EpF();t.ynx(0),t.TgZ(1,"nz-row",2),t.TgZ(2,"nz-col",3),t.TgZ(3,"nz-space",4),t.YNc(4,Yt,2,4,"cvc-flag-list",5),t.YNc(5,Kt,2,1,"ng-container",6),t.YNc(6,Gt,1,2,"cvc-flag-add",7),t.qZA(),t.qZA(),t.TgZ(7,"nz-col",8),t.TgZ(8,"cvc-participant-list",9),t.NdJ("participantSelectedEvent",function(f){return t.CHM(o),t.oxw().onStateSelected(f)}),t.YNc(9,jt,2,1,"ng-template",null,10,t.W1O),t.qZA(),t.TgZ(11,"cvc-participant-list",11),t.NdJ("participantSelectedEvent",function(f){return t.CHM(o),t.oxw().onFlaggingUsersSelected(f)}),t.ALo(12,"ngrxPush"),t.YNc(13,Xt,5,3,"ng-template",null,10,t.W1O),t.qZA(),t.TgZ(15,"cvc-participant-list",12),t.NdJ("participantSelectedEvent",function(f){return t.CHM(o),t.oxw().onResolvingUsersSelected(f)}),t.ALo(16,"ngrxPush"),t.YNc(17,tn,5,3,"ng-template",null,10,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&i){const o=t.oxw();t.xp6(1),t.Q6J("nzGutter",16),t.xp6(4),t.Q6J("ngrxLet",o.pageInfo$),t.xp6(3),t.Q6J("preselectedOption",o.selectableStates[0])("participantList",o.selectableStates),t.xp6(3),t.Q6J("participantList",t.lcZ(12,6,o.uniqueFlaggingUsers$)),t.xp6(4),t.Q6J("participantList",t.lcZ(16,8,o.uniqueResolvingUsers$))}}function en(i,m){if(1&i&&t._UZ(0,"cvc-flag-add",17),2&i){const o=t.oxw();t.Q6J("flaggable",o.flaggable)("flagAddedCallback",o.refresh)}}let on=(()=>{class i{constructor(o){this.gql=o,this.defaultPageSize=5,this.selectableStates=[{id:1,displayName:"Open",value:n.BQZ.Open},{id:2,displayName:"Resolved",value:n.BQZ.Resolved}]}ngOnInit(){if(null==this.flaggable)throw new Error("Must pass a flaggable into flag list");this.queryRef=this.gql.watch({first:this.defaultPageSize,flaggable:this.flaggable,state:n.BQZ.Open}),this.refresh=()=>{this.queryRef.refetch()},this.results$=this.queryRef.valueChanges,this.flags$=this.results$.pipe((0,a.j)("data","flags","edges"),(0,T.U)(o=>o.map(_=>_.node))),this.pageInfo$=this.results$.pipe((0,a.j)("data","flags","pageInfo")),this.unfilteredCount$=this.results$.pipe((0,a.j)("data","flags","unfilteredCountForSubject")),this.uniqueFlaggingUsers$=this.results$.pipe((0,T.U)(({data:o})=>{var _;return null===(_=o.flags)||void 0===_?void 0:_.uniqueFlaggingUsers})),this.uniqueResolvingUsers$=this.results$.pipe((0,T.U)(({data:o})=>{var _;return null===(_=o.flags)||void 0===_?void 0:_.uniqueResolvingUsers}))}onFlaggingUsersSelected(o){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},flaggingUserId:o?o.id:void 0})}onResolvingUsersSelected(o){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},resolvingUserId:o?o.id:void 0})}onStateSelected(o){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},state:o?o.value:void 0})}loadMore(o){var _;null===(_=this.queryRef)||void 0===_||_.fetchMore({variables:{first:this.defaultPageSize,after:o}})}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(n.rzy))},i.\u0275cmp=t.Xpm({type:i,selectors:[["cvc-flag-list-and-filter"]],inputs:{flaggable:"flaggable"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noFlags",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"flags","flagResolvedCallback",4,"nzSpaceItem"],[4,"ngrxLet"],[3,"flaggable","flagAddedCallback",4,"nzSpaceItem"],["nzSpan","6"],["listTitle","Flag State",3,"preselectedOption","participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Flagging Users",3,"participantList","participantSelectedEvent"],["listTitle","Resolving Users",3,"participantList","participantSelectedEvent"],[3,"flags","flagResolvedCallback"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[3,"flaggable","flagAddedCallback"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"]],template:function(o,_){if(1&o&&(t.YNc(0,nn,19,10,"ng-container",0),t.ALo(1,"ngrxPush"),t.YNc(2,en,1,2,"ng-template",null,1,t.W1O)),2&o){const f=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,_.unfilteredCount$))("ngIfElse",f)}},directives:[C.O5,l.SK,l.t3,P.NU,P.$1,At,v.eJ,r.ix,p.dQ,d.w,Nt,Jt.l,$t.Dz],pipes:[v.fM,C.gd],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}),i})()},8168:(W,U,e)=>{e.d(U,{Y:()=>a});var n=e(5e3);let a=(()=>{class T{constructor(){}}return T.\u0275fac=function(C){return new(C||T)},T.\u0275dir=n.lG2({type:T,selectors:[["","cvcFlaggableOptions",""]]}),T})()},5623:(W,U,e)=>{e.d(U,{o:()=>$});var n=e(5e3),a=e(8168),T=e(9808),t=e(4401),C=e(647),l=e(404);const P=["cvcFlaggable",""];function D(v,E){1&v&&n.Hsn(0)}function I(v,E){1&v&&n.GkF(0)}function L(v,E){if(1&v&&(n.ynx(0),n.YNc(1,I,1,0,"ng-container",2),n.BQk()),2&v){n.oxw();const r=n.MAs(1);n.xp6(1),n.Q6J("ngTemplateOutlet",r)}}function Q(v,E){if(1&v&&(n.TgZ(0,"a",6),n._UZ(1,"i",7),n.qZA()),2&v){n.oxw();const r=n.MAs(5);n.xp6(1),n.Q6J("nzTooltipTitle",r)}}function Z(v,E){if(1&v&&n._uU(0),2&v){const r=n.oxw(2);n.hij(" ",r.flags," open flags ")}}function M(v,E){1&v&&n.GkF(0)}function F(v,E){if(1&v&&(n.ynx(0),n.TgZ(1,"nz-ribbon",3),n.YNc(2,Q,2,1,"ng-template",null,4,n.W1O),n.YNc(4,Z,1,1,"ng-template",null,5,n.W1O),n.YNc(6,M,1,0,"ng-container",2),n.qZA(),n.BQk()),2&v){const r=n.MAs(3);n.oxw();const p=n.MAs(1);n.xp6(1),n.Q6J("nzText",r),n.xp6(5),n.Q6J("ngTemplateOutlet",p)}}const B=["*"];let $=(()=>{class v{constructor(r){this.renderer=r}ngOnChanges(){this.flags&&0===this.flags?this.removeFlagged():this.addFlagged()}ngAfterViewInit(){this.flags&&0===this.flags?this.removeFlagged():this.addFlagged()}addFlagged(){this.flaggedChild&&this.renderer.addClass(this.flaggedChild.nativeElement,"flaggedChild")}removeFlagged(){this.flaggedChild&&this.renderer.removeClass(this.flaggedChild.nativeElement,"flaggedChild")}}return v.\u0275fac=function(r){return new(r||v)(n.Y36(n.Qsj))},v.\u0275cmp=n.Xpm({type:v,selectors:[["","cvcFlaggable",""]],contentQueries:function(r,p,d){if(1&r&&n.Suo(d,a.Y,5,n.SBq),2&r){let O;n.iGM(O=n.CRH())&&(p.flaggedChild=O.first)}},inputs:{flags:"flags",entity:"entity"},features:[n.TTD],attrs:P,ngContentSelectors:B,decls:4,vars:2,consts:[["flaggedContent",""],[4,"ngIf"],[4,"ngTemplateOutlet"],["nzPlacement","start","nzColor","#ff3333",3,"nzText"],["flaggedText",""],["flaggedTooltip",""],["routerLink","flags",2,"color","#FFF"],["nz-icon","","nzType","flag","nzTheme","fill","nz-tooltip","","nzTooltipPlacement","top","nzTooltipColor","#FF3333",3,"nzTooltipTitle"]],template:function(r,p){1&r&&(n.F$t(),n.YNc(0,D,1,0,"ng-template",null,0,n.W1O),n.YNc(2,L,2,1,"ng-container",1),n.YNc(3,F,7,2,"ng-container",1)),2&r&&(n.xp6(2),n.Q6J("ngIf",0===p.flags),n.xp6(1),n.Q6J("ngIf",p.flags))},directives:[T.O5,T.tP,t.F9,C.Ls,l.SY],styles:[""]}),v})()},759:(W,U,e)=>{e.d(U,{N:()=>N});var n=e(373),a=e(5e3),T=e(712),t=e(3618),C=e(9808),l=e(325),P=e(6699),D=e(3610),I=e(6265),L=e(3762),Q=e(2937);function Z(g,b){1&g&&(a.ynx(0),a._uU(1,", "),a.BQk())}function M(g,b){if(1&g&&(a.ynx(0),a._uU(1),a.ALo(2,"eventVerbiage"),a.YNc(3,Z,2,0,"ng-container",10),a.BQk()),2&g){const c=b.$implicit,y=b.last;a.xp6(1),a.hij(" ",a.Dn7(2,2,c.action,"contributor-card",c.count),""),a.xp6(2),a.Q6J("ngIf",!y)}}function F(g,b){if(1&g&&(a.TgZ(0,"nz-list",8),a.TgZ(1,"nz-list-item"),a._uU(2," Contributions: "),a.YNc(3,M,4,6,"ng-container",9),a.qZA(),a.TgZ(4,"nz-list-item"),a._uU(5),a.ALo(6,"date"),a.qZA(),a.qZA()),2&g){const c=a.oxw(2).$implicit;a.xp6(3),a.Q6J("ngForOf",c.uniqueActions),a.xp6(2),a.hij(" Last Contribution: ",a.lcZ(6,2,c.lastActionDate)," ")}}function B(g,b){if(1&g&&(a.TgZ(0,"cvc-user-popover",6),a.YNc(1,F,7,4,"ng-template",null,7,a.W1O),a.qZA()),2&g){const c=a.oxw().$implicit;a.Q6J("userId",c.user.id)}}function $(g,b){if(1&g&&(a.TgZ(0,"a",3),a._UZ(1,"nz-avatar",4),a.YNc(2,B,3,1,"ng-template",null,5,a.W1O),a.qZA()),2&g){const c=b.$implicit,y=a.MAs(3);a.MGl("routerLink","/users/",c.user.id,""),a.xp6(1),a.Q6J("nzSize",14)("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",y)("nzSrc",c.user.profileImagePath)}}function v(g,b){if(1&g&&(a.ynx(0),a.YNc(1,$,4,5,"a",2),a.BQk()),2&g){const c=a.oxw();a.xp6(1),a.Q6J("ngForOf",c.sortedContributors)}}function E(g,b){1&g&&a._uU(0," None\n")}let r=(()=>{class g{ngOnInit(){if(void 0===this.contributors)throw new Error("Must pass a list of contributors into the contributor stack");this.sortedContributors=this.contributors.slice(),this.sortedContributors.sort((c,y)=>y.totalActionCount-c.totalActionCount)}}return g.\u0275fac=function(c){return new(c||g)},g.\u0275cmp=a.Xpm({type:g,selectors:[["cvc-contributor-stack"]],inputs:{contributors:"contributors"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noContributors",""],["class","avatar",3,"routerLink",4,"ngFor","ngForOf"],[1,"avatar",3,"routerLink"],["nz-popover","","nzPopoverTrigger","hover","nzPopoverPlacement","bottomRight","nzIcon","user","nzSize","small",3,"nzSize","nzPopoverMouseEnterDelay","nzPopoverContent","nzSrc"],["curatorPopover",""],[3,"userId"],["additionalMetadata",""],["nzHeader","Activity"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(c,y){if(1&c&&(a.YNc(0,v,2,1,"ng-container",0),a.YNc(1,E,1,0,"ng-template",null,1,a.W1O)),2&c){const h=a.MAs(2);a.Q6J("ngIf",y.sortedContributors&&y.sortedContributors.length>0)("ngIfElse",h)}},directives:[C.O5,C.sg,l.yS,P.Dz,D.lU,I.q,L.n_,L.AA],pipes:[Q.R,C.uU],styles:[""]}),g})();var p=e(6949);function d(g,b){if(1&g&&(a.ynx(0),a._UZ(1,"cvc-contributor-stack",5),a.BQk()),2&g){const c=b.ngIf;a.xp6(1),a.Q6J("contributors",c)}}function O(g,b){1&g&&a._uU(0," None ")}function z(g,b){if(1&g&&(a.ynx(0),a._UZ(1,"cvc-contributor-stack",5),a.BQk()),2&g){const c=b.ngIf;a.xp6(1),a.Q6J("contributors",c)}}function A(g,b){1&g&&a._uU(0," None ")}let N=(()=>{class g{constructor(c){this.gql=c}ngOnInit(){if(void 0===this.subscribable)throw new Error("Must pass a subscribable into ContributorAvatars component.");let c=this.gql.watch({subscribable:this.subscribable}).valueChanges;this.curators$=c.pipe((0,n.j)("data","contributors","curators")),this.editors$=c.pipe((0,n.j)("data","contributors","editors"))}}return g.\u0275fac=function(c){return new(c||g)(a.Y36(T.kQf))},g.\u0275cmp=a.Xpm({type:g,selectors:[["cvc-contributor-avatars"]],inputs:{subscribable:"subscribable"},decls:14,vars:8,consts:[["nz-typography","","nzType","secondary",1,"role-group-label"],[1,"role-group"],[4,"ngIf","ngIfElse"],["noCurators",""],["noEditors",""],[3,"contributors"]],template:function(c,y){if(1&c&&(a.TgZ(0,"span",0),a._uU(1,"Curators:"),a.qZA(),a.TgZ(2,"div",1),a.YNc(3,d,2,1,"ng-container",2),a.ALo(4,"ngrxPush"),a.YNc(5,O,1,0,"ng-template",null,3,a.W1O),a.qZA(),a.TgZ(7,"span",0),a._uU(8,"Editors:"),a.qZA(),a.TgZ(9,"div",1),a.YNc(10,z,2,1,"ng-container",2),a.ALo(11,"ngrxPush"),a.YNc(12,A,1,0,"ng-template",null,4,a.W1O),a.qZA()),2&c){const h=a.MAs(6),w=a.MAs(13);a.xp6(3),a.Q6J("ngIf",a.lcZ(4,4,y.curators$))("ngIfElse",h),a.xp6(7),a.Q6J("ngIf",a.lcZ(11,6,y.editors$))("ngIfElse",w)}},directives:[t.ZU,C.O5,r],pipes:[p.fM],styles:["[_nghost-%COMP%]{display:inline-block}.role-group-label[_ngcontent-%COMP%]{margin-left:12px}.role-group[_ngcontent-%COMP%]{display:inline-block}.role-group[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{display:inline-block;margin-left:2px}"]}),g})()},5750:(W,U,e)=>{e.d(U,{Z:()=>Z});var n=e(9808),a=e(6949),T=e(3618),t=e(325),C=e(6699),l=e(3610),P=e(9444),D=e(3762),I=e(6081),L=e(5e3);let Q=(()=>{class M{}return M.\u0275fac=function(B){return new(B||M)},M.\u0275mod=L.oAB({type:M}),M.\u0275inj=L.cJS({imports:[[n.ez,t.Bz,C.Rt,l.$6,D.Ph,P.s,I.J]]}),M})(),Z=(()=>{class M{}return M.\u0275fac=function(B){return new(B||M)},M.\u0275mod=L.oAB({type:M}),M.\u0275inj=L.cJS({imports:[[n.ez,a.WG,T.ZJ,Q]]}),M})()},9077:(W,U,e)=>{e.d(U,{Q:()=>v});var n=e(6123),a=e(712),T=e(8929),t=e(4850),C=e(7625),l=e(5e3),P=e(9169),D=e(9808),I=e(6042),L=e(2643),Q=e(2683),Z=e(404),M=e(647),F=e(6949);function B(E,r){if(1&E){const p=l.EpF();l.ynx(0),l.TgZ(1,"button",2),l.NdJ("click",function(){return l.CHM(p),l.oxw().unsubscribe()}),l._UZ(2,"i",3),l.qZA(),l.BQk()}if(2&E){const p=l.oxw();l.xp6(1),l.Q6J("nzLoading",p.isSubmitting)}}function $(E,r){if(1&E){const p=l.EpF();l.TgZ(0,"button",4),l.NdJ("click",function(){return l.CHM(p),l.oxw().subscribe()}),l._UZ(1,"i",5),l.qZA()}if(2&E){const p=l.oxw();l.Q6J("nzLoading",p.isSubmitting)}}let v=(()=>{class E{constructor(p,d,O,z){this.isSubscribedGQL=p,this.unsubscribeMutation=d,this.subscribeMutation=O,this.networkErrorService=z,this.isSubmitting=!1,this.destroy$=new T.xQ,this.unsubscribeMutator=new n.U(z),this.subscribeMutator=new n.U(z)}ngOnInit(){if(void 0===this.viewer)throw new Error("Must pass in a viewer to the CvcEntitySubscriptionButtonComponent");if(void 0===this.typename)throw new Error("Must pass in a typename to the CvcEntitySubscriptionButtonComponent");if(void 0===this.subscribableId)throw new Error("Must pass in a subscribableId to the CvcEntitySubscriptionButtonComponent");this.subscribable={id:this.subscribableId,entityType:a.o71[this.typename]},this.queryRef=this.isSubscribedGQL.watch({subscribable:this.subscribable}),this.existingSubscription$=this.queryRef.valueChanges.pipe((0,t.U)(({data:d})=>d.subscriptionForEntity))}subscribe(){this.subscribable&&(this.isSubmitting=!0,this.subscribeMutator.mutate(this.subscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,C.R)(this.destroy$)).subscribe(d=>{var O;d&&(null===(O=this.queryRef)||void 0===O||O.refetch(),this.isSubmitting=!1)}))}unsubscribe(){this.subscribable&&(this.isSubmitting=!0,this.unsubscribeMutator.mutate(this.unsubscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,C.R)(this.destroy$)).subscribe(d=>{var O;d&&(null===(O=this.queryRef)||void 0===O||O.refetch(),this.isSubmitting=!1)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return E.\u0275fac=function(p){return new(p||E)(l.Y36(a.A4J),l.Y36(a.m$d),l.Y36(a.jMx),l.Y36(P.Y))},E.\u0275cmp=l.Xpm({type:E,selectors:[["cvc-entity-subscription-button"]],inputs:{viewer:"viewer",typename:"typename",subscribableId:"subscribableId"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noSub",""],["nz-button","","nz-tooltip","Unsubscribe","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","bell","nzTheme","fill"],["nz-button","","nz-tooltip","Subscribe","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","bell","nzTheme","outline"]],template:function(p,d){if(1&p&&(l.YNc(0,B,3,1,"ng-container",0),l.ALo(1,"ngrxPush"),l.YNc(2,$,2,1,"ng-template",null,1,l.W1O)),2&p){const O=l.MAs(3);l.Q6J("ngIf",l.lcZ(1,2,d.existingSubscription$))("ngIfElse",O)}},directives:[D.O5,I.ix,L.dQ,Q.w,Z.SY,M.Ls],pipes:[F.fM],styles:["[_nghost-%COMP%]{display:block}"]}),E})()},4609:(W,U,e)=>{e.d(U,{g:()=>P});var n=e(9808),a=e(6042),T=e(6949),t=e(647),C=e(404),l=e(5e3);let P=(()=>{class D{}return D.\u0275fac=function(L){return new(L||D)},D.\u0275mod=l.oAB({type:D}),D.\u0275inj=l.cJS({imports:[[n.ez,a.sL,t.PV,C.cg,T.WG]]}),D})()},8747:(W,U,e)=>{e.d(U,{l:()=>$});var n=e(5e3),a=e(9808),T=e(7484),t=e(3762),C=e(6042),l=e(2643),P=e(2683),D=e(647);const I=["itemTemplate"],L=function(v){return{$implicit:v}};function Q(v,E){if(1&v){const r=n.EpF();n.TgZ(0,"nz-list-item",5),n.NdJ("click",function(){n.CHM(r);const d=n.oxw().$implicit;return n.oxw(2).onParticipantSelected(d)}),n.GkF(1,6),n.qZA()}if(2&v){const r=n.oxw().$implicit,p=n.oxw(2);n.ekj("selected-participant",r.id==(null==p.selectedItem?null:p.selectedItem.id)),n.xp6(1),n.Q6J("ngTemplateOutlet",p.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(4,L,r))}}function Z(v,E){if(1&v&&(n.ynx(0),n.YNc(1,Q,2,6,"nz-list-item",4),n.BQk()),2&v){const r=E.index,p=n.oxw(2);n.xp6(1),n.Q6J("ngIf",r+1<=p.defaultListSize)}}function M(v,E){if(1&v){const r=n.EpF();n.TgZ(0,"button",7),n.NdJ("click",function(){return n.CHM(r),n.oxw(2).onExpandClicked()}),n._UZ(1,"i",8),n._uU(2," Expand "),n.qZA()}}function F(v,E){if(1&v){const r=n.EpF();n.TgZ(0,"button",7),n.NdJ("click",function(){return n.CHM(r),n.oxw(2).onCollapseClicked()}),n._UZ(1,"i",9),n._uU(2," Collapse "),n.qZA()}}function B(v,E){if(1&v&&(n.ynx(0),n.TgZ(1,"nz-card",1),n.TgZ(2,"nz-list"),n.YNc(3,Z,2,1,"ng-container",2),n.qZA(),n.YNc(4,M,3,0,"button",3),n.YNc(5,F,3,0,"button",3),n.qZA(),n.BQk()),2&v){const r=n.oxw();n.xp6(1),n.Q6J("nzTitle",r.listTitle),n.xp6(2),n.Q6J("ngForOf",r.participantList),n.xp6(1),n.Q6J("ngIf",r.participantList.length>r.defaultListSize),n.xp6(1),n.Q6J("ngIf",r.isExpanded)}}let $=(()=>{class v{constructor(){this.defaultListSize=5,this.participantSelectedEvent=new n.vpe,this.isExpanded=!1}ngOnInit(){this.preselectedOption&&(this.selectedItem=this.preselectedOption)}onParticipantSelected(r){var p;this.selectedItem=r.id==(null===(p=this.selectedItem)||void 0===p?void 0:p.id)?void 0:r,this.participantSelectedEvent.emit(this.selectedItem)}onExpandClicked(){this.originalDefaultListSize=this.defaultListSize,this.defaultListSize=this.participantList.length,this.isExpanded=!0}onCollapseClicked(){this.originalDefaultListSize&&(this.defaultListSize=this.originalDefaultListSize,this.isExpanded=!1)}}return v.\u0275fac=function(r){return new(r||v)},v.\u0275cmp=n.Xpm({type:v,selectors:[["cvc-participant-list"]],contentQueries:function(r,p,d){if(1&r&&n.Suo(d,I,5),2&r){let O;n.iGM(O=n.CRH())&&(p.itemTemplateRef=O.first)}},inputs:{participantList:"participantList",listTitle:"listTitle",defaultListSize:"defaultListSize",preselectedOption:"preselectedOption"},outputs:{participantSelectedEvent:"participantSelectedEvent"},decls:1,vars:1,consts:[[4,"ngIf"],["nz-type","inner",2,"margin-bottom","1em",3,"nzTitle"],[4,"ngFor","ngForOf"],["nz-button","","nzType","default","nzSize","small",3,"click",4,"ngIf"],["nzSize","small","class","participant-list-item",3,"selected-participant","click",4,"ngIf"],["nzSize","small",1,"participant-list-item",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-button","","nzType","default","nzSize","small",3,"click"],["nz-icon","","nzType","vertical-align-bottom"],["nz-icon","","nzType","vertical-align-top"]],template:function(r,p){1&r&&n.YNc(0,B,6,4,"ng-container",0),2&r&&n.Q6J("ngIf",p.participantList&&p.participantList.length>0)},directives:[a.O5,T.bd,t.n_,a.sg,t.AA,a.tP,C.ix,l.dQ,P.w,D.Ls],styles:[".participant-list-item[_ngcontent-%COMP%]:hover{border:1px solid #40a9ff;cursor:pointer}.participant-list-item[_ngcontent-%COMP%]{padding:2px;margin:2px}.selected-participant[_ngcontent-%COMP%]{background:#40a9ff;color:#fff}"]}),v})()},4590:(W,U,e)=>{e.d(U,{h:()=>Q});var n=e(5e3),a=e(9808),T=e(8481),t=e(647);function C(Z,M){1&Z&&n._UZ(0,"i",7)}function l(Z,M){1&Z&&n._UZ(0,"i",8)}function P(Z,M){1&Z&&n._UZ(0,"i",9)}function D(Z,M){1&Z&&n._UZ(0,"i",10)}function I(Z,M){1&Z&&n._UZ(0,"i",10)}function L(Z,M){if(1&Z&&(n.TgZ(0,"nz-tag",1),n.ynx(1,2),n.YNc(2,C,1,0,"i",3),n.YNc(3,l,1,0,"i",4),n.YNc(4,P,1,0,"i",5),n.YNc(5,D,1,0,"i",6),n.YNc(6,I,1,0,"i",6),n.BQk(),n._uU(7),n.ALo(8,"titlecase"),n.qZA()),2&Z){const F=n.oxw();n.Q6J("nzColor",F.tagStatus),n.xp6(1),n.Q6J("ngSwitch",F.tagStatus),n.xp6(1),n.Q6J("ngSwitchCase","success"),n.xp6(1),n.Q6J("ngSwitchCase","error"),n.xp6(1),n.Q6J("ngSwitchCase","warning"),n.xp6(1),n.Q6J("ngSwitchCase","processing"),n.xp6(1),n.Q6J("ngSwitchCase","default"),n.xp6(1),n.hij(" ",n.lcZ(8,8,F.status),"\n")}}let Q=(()=>{class Z{constructor(){this.statusColorMap={ACCEPTED:"success",REJECTED:"error",SUBMITTED:"warning",NEW:"processing",SUPERSEDED:"default",OPEN:"error",RESOLVED:"default"}}set status(F){this._status=F,F&&(this.tagStatus=this.statusColorMap[F])}get status(){return this._status}ngOnInit(){if(void 0===this.status)throw new Error("Must pass a valid EvidenceStatus or RevisionStatus to cvc-status-tag component")}}return Z.\u0275fac=function(F){return new(F||Z)},Z.\u0275cmp=n.Xpm({type:Z,selectors:[["cvc-status-tag"]],inputs:{status:"status"},decls:1,vars:1,consts:[[3,"nzColor",4,"ngIf"],[3,"nzColor"],[3,"ngSwitch"],["nz-icon","","nzType","check-circle",4,"ngSwitchCase"],["nz-icon","","nzType","close-circle",4,"ngSwitchCase"],["nz-icon","","nzType","exclamation-circle",4,"ngSwitchCase"],["nz-icon","",4,"ngSwitchCase"],["nz-icon","","nzType","check-circle"],["nz-icon","","nzType","close-circle"],["nz-icon","","nzType","exclamation-circle"],["nz-icon",""]],template:function(F,B){1&F&&n.YNc(0,L,9,10,"nz-tag",0),2&F&&n.Q6J("ngIf",B.tagStatus)},directives:[a.O5,T.j,a.RF,a.n9,t.Ls],pipes:[a.rS],styles:[""]}),Z})()},9810:(W,U,e)=>{e.d(U,{u:()=>E});var n=e(5e3),a=e(9808),T=e(325),t=e(8481),C=e(3610),l=e(647);function P(r,p){}function D(r,p){if(1&r&&(n.ynx(0),n.TgZ(1,"a",5),n.YNc(2,P,0,0,"ng-template",6),n.qZA(),n.BQk()),2&r){const d=n.oxw(),O=n.MAs(2);n.xp6(1),n.MGl("routerLink","/variant-groups/",d.variantgroup.id,""),n.xp6(1),n.Q6J("ngTemplateOutlet",O)}}function I(r,p){}function L(r,p){if(1&r&&(n.TgZ(0,"nz-tag",9),n.YNc(1,I,0,0,"ng-template",6),n.qZA()),2&r){n.oxw();const d=n.MAs(2);n.oxw();const O=n.MAs(8);n.Q6J("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",d),n.xp6(1),n.Q6J("ngTemplateOutlet",O)}}function Q(r,p){1&r&&(n.TgZ(0,"p"),n._uU(1,"variantgroup popover here"),n.qZA())}function Z(r,p){if(1&r&&(n.YNc(0,L,2,3,"nz-tag",7),n.YNc(1,Q,2,0,"ng-template",null,8,n.W1O)),2&r){const d=n.oxw(),O=n.MAs(4);n.Q6J("ngIf",d.enablePopover)("ngIfElse",O)}}function M(r,p){}function F(r,p){if(1&r&&(n.TgZ(0,"nz-tag"),n.YNc(1,M,0,0,"ng-template",6),n.qZA()),2&r){n.oxw();const d=n.MAs(8);n.xp6(1),n.Q6J("ngTemplateOutlet",d)}}function B(r,p){}function $(r,p){if(1&r&&n.YNc(0,B,0,0,"ng-template",6),2&r){n.oxw();const d=n.MAs(2);n.Q6J("ngTemplateOutlet",d)}}function v(r,p){if(1&r&&(n._UZ(0,"i",10),n._uU(1)),2&r){const d=n.oxw();n.xp6(1),n.hij(" ",d.variantgroup.name,"\n")}}let E=(()=>{class r{constructor(){this.linked=!0,this.enablePopover=!0}ngOnInit(){if(void 0===this.variantgroup)throw new Error("Must pass a LinkableVariantgroup into the variantgroup tag component")}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275cmp=n.Xpm({type:r,selectors:[["cvc-variant-group-tag"]],inputs:{variantgroup:"variantgroup",linked:"linked",enablePopover:"enablePopover"},decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["tag",""],["noPopover",""],["unlinked",""],["tagContent",""],[3,"routerLink"],[3,"ngTemplateOutlet"],["nz-popover","","nzPopoverTrigger","hover",3,"nzPopoverMouseEnterDelay","nzPopoverContent",4,"ngIf","ngIfElse"],["popoverContent",""],["nz-popover","","nzPopoverTrigger","hover",3,"nzPopoverMouseEnterDelay","nzPopoverContent"],["nz-icon","","nzType","civic-variantgroup","nzTheme","twotone","nzTwotoneColor","#33B358"]],template:function(d,O){if(1&d&&(n.YNc(0,D,3,2,"ng-container",0),n.YNc(1,Z,3,2,"ng-template",null,1,n.W1O),n.YNc(3,F,2,1,"ng-template",null,2,n.W1O),n.YNc(5,$,1,1,"ng-template",null,3,n.W1O),n.YNc(7,v,2,1,"ng-template",null,4,n.W1O)),2&d){const z=n.MAs(6);n.Q6J("ngIf",O.linked)("ngIfElse",z)}},directives:[a.O5,T.yS,a.tP,t.j,C.lU,l.Ls],styles:["[_nghost-%COMP%]{display:block}"]}),r})()},1243:(W,U,e)=>{e.d(U,{I:()=>a});var n=e(5e3);let a=(()=>{class T{transform(C){if(C){let P=C.toLowerCase().replace(/_/g," ").split(" ");for(var l=0;l<P.length;l++)P[l]=P[l].charAt(0).toUpperCase()+P[l].slice(1);return P.join(" ")}return""}}return T.\u0275fac=function(C){return new(C||T)},T.\u0275pipe=n.Yjl({name:"enumToTitle",type:T,pure:!0}),T})()},1812:(W,U,e)=>{e.d(U,{b:()=>p});var n=e(5e3),a=e(8929),T=e(712),t=e(4850),C=e(7625),l=e(1059),P=e(9350),D=e(6949),I=e(868),L=e(4921),Q=e(3075),Z=e(9808),M=e(7525),F=e(7948);function B(d,O){if(1&d&&(n.ynx(0),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.BQk()),2&d){const z=O.$implicit;n.xp6(2),n.Oqu(z.displayName)}}function $(d,O){1&d&&(n.ynx(0),n._UZ(1,"nz-spin",8),n.BQk())}function v(d,O){if(1&d&&(n.ynx(0),n._UZ(1,"cvc-comment-body",9),n.BQk()),2&d){const z=O.ngIf;n.xp6(1),n.Q6J("commentBodySegments",z)}}const E=function(){return["#","@","$"]};function r(d,O){if(1&d){const z=n.EpF();n.ynx(0),n.TgZ(1,"nz-tabset",1),n.TgZ(2,"nz-tab",2),n.TgZ(3,"nz-mention",3),n.NdJ("nzOnSearchChange",function(N){return n.CHM(z),n.oxw().onSearchChange(N)})("nzOnSelect",function(){return n.CHM(z),n.oxw().suggestions=[]}),n.TgZ(4,"textarea",4),n.NdJ("ngModelChange",function(N){return n.CHM(z),n.oxw().commentText=N})("ngModelChange",function(N){return n.CHM(z),n.oxw().onCommentChanged(N)}),n.qZA(),n.YNc(5,B,3,1,"ng-container",5),n.qZA(),n.qZA(),n.TgZ(6,"nz-tab",6),n.NdJ("nzClick",function(){return n.CHM(z),n.oxw().onPreviewButtonClicked()}),n.YNc(7,$,2,0,"ng-container",7),n.ALo(8,"ngrxPush"),n.YNc(9,v,2,1,"ng-container",7),n.ALo(10,"ngrxPush"),n.qZA(),n.qZA(),n.BQk()}if(2&d){const z=O.ngrxLet,A=n.oxw();n.xp6(1),n.Q6J("nzAnimated",!1),n.xp6(2),n.Q6J("nzSuggestions",A.suggestions)("nzPrefix",n.DdM(13,E))("nzValueWith",A.autoCompleteValueFor),n.xp6(1),n.Q6J("placeholder",z&&z.canCurate?"Enter comment (minimum length 10. Use @ to mention users; # to link entities)":"Please sign in")("ngModel",A.commentText),n.uIk("disabled",!z||!z.canCurate||null),n.xp6(3),n.Q6J("ngIf",n.lcZ(8,9,A.previewLoading$)),n.xp6(2),n.Q6J("ngIf",n.lcZ(10,11,A.previewComment$))}}let p=(()=>{class d{constructor(z,A,N,g){this.previewCommentGql=z,this.userTypeaheadGql=A,this.entityTypeaheadGql=N,this.viewerService=g,this.commentChange=new n.vpe,this.destroy$=new a.xQ,this.suggestions=[],this.roleSuggestions=[{displayName:"admins",value:"admins"},{displayName:"editors",value:"editors"}]}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.commentText=this.comment,this.userTypeaheadQueryRef$=this.userTypeaheadGql.watch({queryTerm:""}),this.userTypeaheadQueryRef$.valueChanges.pipe((0,t.U)(({data:z})=>z.userTypeahead),(0,C.R)(this.destroy$)).subscribe(z=>this.suggestions=z.map(A=>({displayName:A.username,value:A.username}))),this.entityTypeaheadQueryRef$=this.entityTypeaheadGql.watch({queryTerm:""}),this.entityTypeaheadQueryRef$.valueChanges.pipe((0,t.U)(({data:z})=>z.entityTypeahead),(0,C.R)(this.destroy$)).subscribe(z=>this.suggestions=z.map(A=>({displayName:A.displayName,value:this.tagForEntityTypeAndId(A.tagType,A.entityId)})))}ngOnChanges(){this.commentText=this.comment}autoCompleteValueFor(z){return z.value}tagForEntityTypeAndId(z,A){switch(z){case T.mpB.Gene:return`GID${A}`;case T.mpB.Variant:return`VID${A}`;case T.mpB.VariantGroup:return`VGID${A}`;case T.mpB.EvidenceItem:return`EID${A}`;case T.mpB.Assertion:return`AID${A}`;case T.mpB.Revision:return`RID${A}`;case T.mpB.Role:return Object.keys(T.i44)[A]}}resetForm(){this.commentText=""}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreviewButtonClicked(){this.commentText&&(this.previewComment$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,t.U)(({data:z})=>z.previewCommentText)),this.previewLoading$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,t.U)(({loading:z})=>z),(0,l.O)(!0)))}onSearchChange({value:z,prefix:A}){"@"===A?this.userTypeaheadQueryRef$.refetch({queryTerm:z}):"$"==A?this.suggestions=this.roleSuggestions.filter(N=>N.value.startsWith(z)):this.entityTypeaheadQueryRef$.refetch({queryTerm:z})}onCommentChanged(z){this.commentChange.emit(z)}}return d.\u0275fac=function(z){return new(z||d)(n.Y36(T.mII),n.Y36(T.vMt),n.Y36(T.GYx),n.Y36(P.a))},d.\u0275cmp=n.Xpm({type:d,selectors:[["cvc-comment-input"]],inputs:{comment:"comment"},outputs:{commentChange:"commentChange"},features:[n.TTD],decls:1,vars:1,consts:[[4,"ngrxLet"],[3,"nzAnimated"],["nzTitle","Write"],["nzNotFoundContent","No matches...",3,"nzSuggestions","nzPrefix","nzValueWith","nzOnSearchChange","nzOnSelect"],["nzMentionTrigger","","nz-input","","rows","4",2,"width","100%",3,"placeholder","ngModel","ngModelChange"],[4,"nzMentionSuggestion"],["nzTitle","Preview",3,"nzClick"],[4,"ngIf"],["nzTip","Loading..."],[3,"commentBodySegments"]],template:function(z,A){1&z&&n.YNc(0,r,11,14,"ng-container",0),2&z&&n.Q6J("ngrxLet",A.viewer$)},directives:[D.eJ,I.xH,I.xw,L.YW,L.jO,Q.Fj,Q.JJ,Q.On,L.O3,Z.O5,M.W,F.m],pipes:[D.fM],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2}),d})()},1014:(W,U,e)=>{e.d(U,{Z:()=>T});var n=e(5e3);const a=["*"];let T=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(l){return new(l||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["cvc-form-buttons"]],ngContentSelectors:a,decls:2,vars:0,consts:[[1,"form-buttons"]],template:function(l,P){1&l&&(n.F$t(),n.TgZ(0,"div",0),n.Hsn(1),n.qZA())},styles:["[_nghost-%COMP%]{display:block}.form-buttons[_ngcontent-%COMP%]{text-align:right}"]}),t})()},7815:(W,U,e)=>{e.d(U,{q:()=>N});var n=e(5e3),a=e(8929),T=e(4850),t=e(373),C=e(2994),l=e(7625),P=e(6874),D=e(9350),I=e(9808),L=e(6042),Q=e(2683),Z=e(2643),M=e(3677),F=e(8144),B=e(6699),$=e(4219);function v(g,b){1&g&&n.Hsn(0)}function E(g,b){1&g&&n.GkF(0)}function r(g,b){if(1&g&&(n.ynx(0),n.YNc(1,E,1,0,"ng-container",5),n.BQk()),2&g){n.oxw(2);const c=n.MAs(1);n.xp6(1),n.Q6J("ngTemplateOutlet",c)}}function p(g,b){1&g&&n.GkF(0)}function d(g,b){if(1&g&&(n.ynx(0),n.TgZ(1,"nz-button-group",6),n.YNc(2,p,1,0,"ng-container",5),n.TgZ(3,"button",7),n.TgZ(4,"nz-space",8),n.TgZ(5,"span"),n._uU(6,"for"),n.qZA(),n._UZ(7,"nz-avatar",9),n._UZ(8,"i",10),n.qZA(),n.qZA(),n.qZA(),n.BQk()),2&g){n.oxw();const c=n.MAs(4),y=n.oxw(),h=n.MAs(1);n.xp6(1),n.Q6J("nzSize","small"),n.xp6(1),n.Q6J("ngTemplateOutlet",h),n.xp6(1),n.Q6J("nzType",y.buttonType)("nzDanger",y.nzDanger)("disabled",y.disabled)("nzDropdownMenu",c),n.xp6(1),n.Q6J("nzSize",4),n.xp6(3),n.Q6J("nzSrc",null==y.selectedOrg?null:y.selectedOrg.profileImagePath)("nzSize",10)("nzShape","square")}}function O(g,b){if(1&g){const c=n.EpF();n.TgZ(0,"li",11),n.NdJ("click",function(){const w=n.CHM(c).$implicit;return n.oxw(2).selectOrg(w)}),n._UZ(1,"nz-avatar",12),n._uU(2),n.qZA()}if(2&g){const c=b.$implicit,y=n.oxw(2);n.Q6J("nzSelected",(null==y.selectedOrg?null:y.selectedOrg.id)===c.id),n.xp6(1),n.Q6J("nzSrc",null==c?null:c.profileImagePath)("nzSize",10)("nzShape","square"),n.xp6(1),n.hij(" ",c.name," ")}}function z(g,b){if(1&g&&(n.ynx(0),n.YNc(1,r,2,1,"ng-container",1),n.YNc(2,d,9,10,"ng-container",1),n.TgZ(3,"nz-dropdown-menu",null,2),n.TgZ(5,"ul",3),n.YNc(6,O,3,5,"li",4),n.qZA(),n.qZA(),n.BQk()),2&g){const c=b.ngIf;n.xp6(1),n.Q6J("ngIf",c.length<=1),n.xp6(1),n.Q6J("ngIf",c.length>1),n.xp6(4),n.Q6J("ngForOf",c)}}const A=["*"];let N=(()=>{class g{constructor(c){this.viewerService=c,this.selectedOrgChange=new n.vpe,this.buttonType="primary",this.nzDanger=!1,this.destroy$=new a.xQ}get disabled(){return this.button.disabled}selectOrg(c){this.selectedOrg=c,this.selectedOrgChange.emit(c)}ngOnInit(){this.organizations$=this.viewerService.viewer$.pipe((0,T.U)(c=>c.organizations)),this.mostRecentOrg$=this.viewerService.viewer$.pipe((0,t.j)("mostRecentOrg"),(0,C.b)(c=>{c&&(this.selectedOrg=c,this.selectedOrgChange.emit(c))})),this.mostRecentOrg$.pipe((0,l.R)(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return g.\u0275fac=function(c){return new(c||g)(n.Y36(D.a))},g.\u0275cmp=n.Xpm({type:g,selectors:[["cvc-org-selector-btn-group"]],contentQueries:function(c,y,h){if(1&c&&n.Suo(h,P.m,5),2&c){let w;n.iGM(w=n.CRH())&&(y.button=w.first)}},inputs:{selectedOrg:"selectedOrg",buttonType:"buttonType",nzDanger:"nzDanger"},outputs:{selectedOrgChange:"selectedOrgChange"},ngContentSelectors:A,decls:4,vars:3,consts:[["submitButton",""],[4,"ngIf"],["orgMenu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"nzSelected","click",4,"ngFor","ngForOf"],[4,"ngTemplateOutlet"],[3,"nzSize"],["type","button","nz-button","","nz-dropdown","",1,"org-dropdown-btn",3,"nzType","nzDanger","disabled","nzDropdownMenu"],["nzDirection","horizontal",3,"nzSize"],[3,"nzSrc","nzSize","nzShape"],["nz-icon","","nzType","down"],["nz-menu-item","",3,"nzSelected","click"],[2,"background-color","#f0f5ff",3,"nzSrc","nzSize","nzShape"]],template:function(c,y){1&c&&(n.F$t(),n.YNc(0,v,1,0,"ng-template",null,0,n.W1O),n.YNc(2,z,7,3,"ng-container",1),n.ALo(3,"async")),2&c&&(n.xp6(2),n.Q6J("ngIf",n.lcZ(3,1,y.organizations$)))},directives:[I.O5,I.tP,L.fY,Q.w,L.ix,Z.dQ,M.wA,M.cm,F.NU,B.Dz,M.RR,$.wO,I.sg,$.r9],pipes:[I.Ov],styles:["[_nghost-%COMP%]{display:inline-block}.org-dropdown-btn[_ngcontent-%COMP%]   nz-avatar[_ngcontent-%COMP%]{margin:0 6px}"]}),g})()},6874:(W,U,e)=>{e.d(U,{m:()=>a});var n=e(5e3);let a=(()=>{class T{constructor(C){this.el=C,this.observer=new MutationObserver(([l])=>this.disabled=l.target.disabled),this.observer.observe(this.el.nativeElement,{attributeFilter:["disabled"],childList:!1,subtree:!1})}ngOnDestroy(){this.observer.disconnect()}}return T.\u0275fac=function(C){return new(C||T)(n.Y36(n.SBq))},T.\u0275dir=n.lG2({type:T,selectors:[["button","cvcOrgSelectorBtn",""]],hostVars:2,hostBindings:function(C,l){2&C&&n.ekj("ant-btn-dangerous",l.nzDanger)}}),T})()}}]);