"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[2278],{21653:(T,u,e)=>{e.d(u,{$h:()=>v,Mw:()=>l,fR:()=>t});var c=e(25741);function l(i){return{acmgCodeIds:i.acmgCodes.map(o=>o.id),ampLevel:i.ampLevel,assertionDirection:i.assertionDirection,assertionType:i.assertionType,clingenCodeIds:i.clingenCodes.map(o=>o.id),significance:i.significance,description:i.description,diseaseId:i.disease?.id,therapyIds:i.therapies.map(o=>o.id),therapyInteractionType:i.therapyInteractionType,evidenceItemIds:i.evidenceItems.map(o=>o.id),fdaCompanionTest:i.fdaCompanionTest,fdaRegulatoryApproval:i.regulatoryApproval,molecularProfileId:i.molecularProfile.id,nccnGuidelineId:i.nccnGuideline?.id,nccnGuidelineVersion:i.nccnGuidelineVersion,phenotypeIds:i.phenotypes.map(o=>o.id),summary:i.summary,variantOrigin:i.variantOrigin}}function t(i){const o=i.fields;if(![o.assertionDirection,o.assertionType,o.significance,o.variantOrigin,o.molecularProfileId,i.comment].find(_=>void 0===_))return{fields:{acmgCodeIds:o.acmgCodeIds||[],ampLevel:c.pz(o.ampLevel),assertionDirection:o.assertionDirection,assertionType:o.assertionType,clingenCodeIds:o.clingenCodeIds||[],significance:o.significance,description:c.q2(o.description),diseaseId:c.pz(o.diseaseId),therapyIds:o.therapyIds||[],therapyInteractionType:c.pz(o.therapyInteractionType),evidenceItemIds:o.evidenceItemIds||[],fdaCompanionTest:c.pz(o.fdaCompanionTest),fdaRegulatoryApproval:c.pz(o.fdaRegulatoryApproval),molecularProfileId:o.molecularProfileId,nccnGuidelineId:c.pz(o.nccnGuidelineId),nccnGuidelineVersion:c.q2(o.nccnGuidelineVersion),phenotypeIds:o.phenotypeIds||[],summary:c.q2(o.summary),variantOrigin:o.variantOrigin},organizationId:i.organizationId,comment:i.comment}}function v(i,o){let p=t(o);if(p)return{id:i,comment:p.comment,organizationId:p.organizationId,fields:p.fields}}},35493:(T,u,e)=>{e.d(u,{G:()=>n});var c=e(60177),l=e(51188),t=e(75699),v=e(25703),i=e(37054),o=e(62e3),p=e(41951),_=e(64917),E=e(54438);let y=(()=>{class m{static{this.\u0275fac=function(h){return new(h||m)}}static{this.\u0275mod=E.$C({type:m})}static{this.\u0275inj=E.G2t({imports:[c.MD,p.Y3,v.Ti,o.WF,_.i,i.L]})}}return m})();var C=e(1236);let n=(()=>{class m{static{this.\u0275fac=function(h){return new(h||m)}}static{this.\u0275mod=E.$C({type:m})}static{this.\u0275inj=E.G2t({imports:[c.MD,l.iI,p.Y3,t.T,C.MC,y]})}}return m})()},39045:(T,u,e)=>{e.d(u,{J:()=>A});var c=e(40505),l=e(1236),t=e(54438),v=e(60177),i=e(51188),o=e(75699),p=e(41951),_=e(88011),E=e(12387),y=e(83075);const C=(d,g,r)=>({rejected:d,submitted:g,accepted:r});function n(d,g){}function m(d,g){if(1&d&&(t.qex(0),t.j41(1,"a",5),t.DNE(2,n,0,0,"ng-template",6),t.k0s(),t.bVm()),2&d){const r=t.XpG(),s=t.sdS(2);t.R7$(),t.Y8G("routerLink",r.evidence.link),t.R7$(),t.Y8G("ngTemplateOutlet",s)}}function I(d,g){}function P(d,g){if(1&d){const r=t.RV6();t.j41(0,"cvc-evidence-popover",8),t.bIt("contentRendered",function(){t.eBV(r);const a=t.XpG(2);return t.Njj(a.updatePopoverPosition())}),t.k0s()}if(2&d){const r=t.XpG(2);t.Y8G("evidenceId",r.evidence.id)}}function h(d,g){if(1&d&&(t.j41(0,"nz-tag",7),t.DNE(1,I,0,0,"ng-template",6),t.k0s(),t.DNE(2,P,1,1,"ng-template",null,3,t.C5r)),2&d){const r=t.sdS(3),s=t.XpG(),a=t.sdS(6);t.Y8G("ngClass",t.sMw(5,C,"REJECTED"===s.evidence.status,"SUBMITTED"===s.evidence.status,"ACCEPTED"===s.evidence.status))("nzPopoverPlacement",s.popoverPlacement)("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",s.enablePopover?r:void 0),t.R7$(),t.Y8G("ngTemplateOutlet",a)}}function D(d,g){}function O(d,g){if(1&d&&t.DNE(0,D,0,0,"ng-template",6),2&d){t.XpG();const r=t.sdS(2);t.Y8G("ngTemplateOutlet",r)}}function R(d,g){if(1&d&&(t.j41(0,"cvc-icon-badges",9),t.nrm(1,"i",10),t.nI1(2,"entityColor"),t.nI1(3,"entityColor"),t.k0s(),t.EFF(4)),2&d){const r=t.XpG();t.Y8G("flagged",r.evidence.flagged)("entityColor",r.iconColor),t.R7$(),t.Y8G("nzTwotoneColor","REJECTED"===r.evidence.status?t.bMT(2,4,"Rejected"):t.bMT(3,6,"EvidenceItem")),t.R7$(3),t.SpI(" ",r.evidence.name,"\n")}}let A=(()=>{class d{set evidence(r){if(!r)throw new Error("cvc-evidence-tag evidence input requires LinkableEvidence.");this._evidence=r}get evidence(){return this._evidence}constructor(){this.linked=!0,this.enablePopover=!0,this.popoverPlacement="top",this.iconColor=(0,c.P)("EvidenceItem")}idFunction(){return this.evidence.id}updatePopoverPosition(){this.popover&&this.popover.updatePosition()}ngAfterViewInit(){this.popoverList.length>0?this.popover=this.popoverList.first:console.warn("NzPopoverDirective not found in tag view")}static{this.\u0275fac=function(s){return new(s||d)}}static{this.\u0275cmp=t.VBU({type:d,selectors:[["cvc-evidence-tag"]],viewQuery:function(s,a){if(1&s&&t.GBs(l.L_,5),2&s){let f;t.mGM(f=t.lsd())&&(a.popoverList=f)}},inputs:{evidence:"evidence",linked:"linked",enablePopover:"enablePopover",popoverPlacement:"popoverPlacement"},standalone:!1,decls:7,vars:2,consts:[["tag",""],["unlinked",""],["tagContent",""],["popoverContent",""],[4,"ngIf","ngIfElse"],[3,"routerLink"],[3,"ngTemplateOutlet"],["nz-popover","",3,"ngClass","nzPopoverPlacement","nzPopoverMouseEnterDelay","nzPopoverContent"],[3,"contentRendered","evidenceId"],[3,"flagged","entityColor"],["nz-icon","","nzType","civic-evidence","nzTheme","twotone",3,"nzTwotoneColor"]],template:function(s,a){if(1&s&&t.DNE(0,m,3,2,"ng-container",4)(1,h,4,9,"ng-template",null,0,t.C5r)(3,O,1,1,"ng-template",null,1,t.C5r)(5,R,5,8,"ng-template",null,2,t.C5r),2&s){const f=t.sdS(4);t.Y8G("ngIf",a.linked)("ngIfElse",f)}},dependencies:[v.YU,v.bT,v.T3,i.Wk,o.s,l.L_,p.Dn,_.S,E.N,y.R],styles:["[_nghost-%COMP%]     nz-tag.rejected, [_nghost-%COMP%]     nz-tag.submitted, [_nghost-%COMP%]     nz-tag.accepted, [_nghost-%COMP%]     nz-tag.deprecated{border-right-width:2px}[_nghost-%COMP%]     nz-tag.rejected, [_nghost-%COMP%]     nz-tag.deprecated{border-color:#e6e6e6;background-color:#fff;color:#999999d9}[_nghost-%COMP%]     nz-tag.submitted{border-color:#ffe58f}[_nghost-%COMP%]     nz-tag.accepted{border-color:#b7eb8f}[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}}return d})()},45847:(T,u,e)=>{e.d(u,{Z:()=>g});var c=e(31635),l=e(89417),t=e(71226),v=e(19974),i=e(49894);const y=(0,e(87480).A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Assertion"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"molecularProfileId",type:"molecular-profile-select",props:{required:!0,watchVariantMolecularProfileId:!0}}]},{wrappers:["form-row"],props:{formRowOptions:{responsive:{xs:24,lg:12,xl:8,xxl:6}}},fieldGroup:[{key:"assertionType",type:"type-select",props:{required:!0}},{key:"assertionDirection",type:"direction-select",props:{required:!0}},{key:"significance",type:"significance-select",props:{required:!0}},{key:"diseaseId",type:"disease-select",props:{}},{key:"therapyIds",type:"therapy-multi-select",props:{}},{key:"therapyInteractionType",type:"interaction-select",props:{}},{key:"variantOrigin",type:"origin-select",props:{required:!0}},{key:"phenotypeIds",type:"phenotype-multi-select",props:{}},{key:"ampLevel",type:"amp-category-select",props:{}},{key:"acmgCodeIds",type:"acmg-code-multi-select",props:{}},{key:"clingenCodeIds",type:"clingen-code-multi-select",props:{}},{key:"nccnGuidelineId",type:"nccn-guideline-select",props:{}},{key:"nccnGuidelineVersion",type:"nccn-guideline-version-input",props:{}},{key:"fdaRegulatoryApproval",type:"fda-regulatory-approval-checkbox",props:{}},{key:"fdaCompanionTest",type:"fda-companion-test-checkbox",props:{}}]},{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{xs:24},{md:24,lg:8},{md:24,lg:16}]}},fieldGroup:[{key:"evidenceItemIds",type:"evidence-multi-select",props:{required:!0,isMultiSelect:!0}},{key:"summary",type:"base-textarea",props:{tooltip:"A short, one sentence summary of the Assertion",placeholder:"Enter an Assertion Summary",label:"Assertion Summary",required:!0}},{key:"description",type:"base-textarea",props:{tooltip:"A complete, original description of this Assertion. Limited to one paragraph.",placeholder:"Enter an Assertion Statement",label:"Assertion Statement",required:!0,rows:5}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"textarea",props:{label:"Comment",required:!0}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{molecularProfileId:void 0,acmgCodeIds:[],ampLevel:void 0,assertionDirection:void 0,assertionType:void 0,clingenCodeIds:[],significance:void 0,description:void 0,diseaseId:void 0,therapyIds:[],therapyInteractionType:void 0,evidenceItemIds:[],fdaCompanionTest:void 0,fdaRegulatoryApproval:void 0,nccnGuidelineId:void 0,nccnGuidelineVersion:void 0,phenotypeIds:[],summary:void 0,variantOrigin:void 0},comment:void 0,organizationId:void 0});var C=e(21653),n=e(54438),m=e(69145),I=e(74222),P=e(60177),h=e(38927),D=e(8524),O=e(68721);function R(r,s){if(1&r&&(n.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),n.j41(1,"a",4),n.EFF(2,"here."),n.k0s()),2&r){const a=n.XpG();n.R7$(),n.FS9("href",a.url,n.B4B)}}function A(r,s){if(1&r){const a=n.RV6();n.j41(0,"form",5),n.bIt("ngSubmit",function(){n.eBV(a);const M=n.XpG();return n.Njj(M.onSubmit(M.model))}),n.j41(1,"formly-form",6),n.bIt("modelChange",function(M){n.eBV(a);const L=n.XpG();return n.Njj(L.model=M)}),n.k0s()()}if(2&r){const a=n.XpG();n.Y8G("formGroup",a.form),n.R7$(),n.Y8G("form",a.form)("fields",a.fields)("model",a.model)("options",a.options)}}function d(r,s){1&r&&n.EFF(0," Loading Assertion... ")}let g=class G{constructor(s,a,f,M){this.revisableFieldsGQL=s,this.submitRevisionsGQL=a,this.networkErrorService=f,this.cdr=M,this.form=new l.J3({}),this.fields=y,this.state=new v.o,this.state.formMode="revise",this.options={formState:this.state},this.reviseAssertionMutator=new t.E(f)}onSubmit(s){if(!this.assertionId)return;let a=(0,C.$h)(this.assertionId,s);a&&(this.mutationState=this.reviseAssertionMutator.mutate(this.submitRevisionsGQL,{input:a}))}ngOnInit(){this.url=`/assertions/${this.assertionId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({assertionId:this.assertionId}).pipe((0,i.s)(this)).subscribe({next:({data:{assertion:s}})=>{s&&(this.model={id:s.id,fields:(0,C.Mw)(s)},this.cdr.detectChanges())},error:s=>{console.log("Error retrieving Assertion"),console.log(s)},complete:()=>{this.state.formReady$.next(!0)}})}ngOnDestroy(){this.options.formState.onDestroy()}static{this.\u0275fac=function(a){return new(a||G)(n.rXU(m.VV8),n.rXU(m.wkS),n.rXU(I.N),n.rXU(n.gRc))}}static{this.\u0275cmp=n.VBU({type:G,selectors:[["cvc-assertion-revise-form"]],inputs:{assertionId:"assertionId"},standalone:!1,decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Evidence Item",3,"mutationState","successMessage","redirectUrl"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(a,f){if(1&a&&(n.j41(0,"cvc-form-submission-status-display",2),n.DNE(1,R,3,1,"ng-template",null,0,n.C5r)(3,A,2,5,"form",3)(4,d,1,0,"ng-template",null,1,n.C5r),n.k0s()),2&a){const M=n.sdS(2),L=n.sdS(5);n.Y8G("mutationState",f.mutationState)("successMessage",M)("redirectUrl",f.url),n.R7$(3),n.Y8G("ngIf",f.model)("ngIfElse",L)}},dependencies:[P.bT,h.CA,l.qT,l.cb,l.j4,D.aF,O.G],encapsulation:2,changeDetection:0})}};g=(0,c.Cg)([(0,i.d)()],g)},86936:(T,u,e)=>{e.d(u,{G:()=>C});var c=e(60177),l=e(51188),t=e(75699),v=e(1236),i=e(41951),o=e(54666),p=e(64917),_=e(53146),E=e(34994),y=e(54438);let C=(()=>{class n{static{this.\u0275fac=function(P){return new(P||n)}}static{this.\u0275mod=y.$C({type:n})}static{this.\u0275inj=y.G2t({imports:[c.MD,l.iI,_.W2,t.T,v.MC,i.Y3,o.v,p.i,E.a]})}}return n})()},89374:(T,u,e)=>{e.d(u,{r:()=>m});var c=e(60177),l=e(22142),t=e(75699),v=e(1236),i=e(824),o=e(98920),p=e(87051),_=e(89802),E=e(35493),y=e(56912),C=e(47086),n=e(54438);let m=(()=>{class I{static{this.\u0275fac=function(D){return new(D||I)}}static{this.\u0275mod=n.$C({type:I})}static{this.\u0275inj=n.G2t({imports:[c.MD,t.T,v.MC,l.x,_._,i.J,o.U,y.l,p.U,E.G,C.C]})}}return I})()},92090:(T,u,e)=>{e.d(u,{B:()=>p});var c=e(60177),l=e(38927),t=e(50513),v=e(53560),i=e(55316),o=e(54438);let p=(()=>{class _{static{this.\u0275fac=function(C){return new(C||_)}}static{this.\u0275mod=o.$C({type:_})}static{this.\u0275inj=o.G2t({imports:[c.MD,l.PQ,t.Zw,v.m,i.P]})}}return _})()}}]);