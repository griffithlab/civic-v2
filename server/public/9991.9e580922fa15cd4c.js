"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[9991],{28719:(j,C,n)=>{n.d(C,{r:()=>h});var u=n(31635),t=n(73664),d=n(71226),m=n(69145),l=n(49894),T=n(24608),v=n(48728),_=n(74222),y=n(41305),f=n(52096),g=n(72200),E=n(84341),p=n(50513),R=n(16389),O=n(25930),M=n(35154),I=n(1177),z=n(97685),B=n(21011),P=n(61774);const x=["confirmModal"];function L(s,a){if(1&s){const o=t.RV6();t.j41(0,"button",5),t.bIt("click",function(){v.eBV(o);const i=t.XpG(2);return v.Njj(i.moderate(i.evidenceStatuses.Accepted))}),t.EFF(1),t.k0s()}if(2&s){const o=t.XpG().ngrxLet,e=t.XpG();t.Y8G("nzTooltipTrigger",o.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==o.mostRecentOrg?null:o.mostRecentOrg.name)),t.R7$(),t.SpI(" Accept ",e.entityTypeDisplay," ")}}function S(s,a){if(1&s){const o=t.RV6();t.qex(0),t.j41(1,"nz-spin",2),t.DNE(2,L,2,3,"button",3),t.EFF(3," \xa0 "),t.j41(4,"button",4),t.bIt("click",function(){v.eBV(o);const i=t.XpG();return v.Njj(i.moderate(i.evidenceStatuses.Rejected))}),t.EFF(5),t.k0s()(),t.bVm()}if(2&s){const o=a.ngrxLet,e=t.XpG();t.R7$(),t.Y8G("nzSpinning",e.isSubmitting),t.R7$(),t.Y8G("ngIf",o.canModerate),t.R7$(2),t.Y8G("nzTooltipTrigger",o.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==o.mostRecentOrg?null:o.mostRecentOrg.name)),t.R7$(),t.SpI(" Reject ",e.entityTypeDisplay," ")}}function U(s,a){if(1&s&&(t.j41(0,"span",7),t.EFF(1),t.j41(2,"strong"),t.EFF(3),t.k0s(),t.EFF(4," ."),t.k0s()),2&s){const o=t.XpG(2).$implicit,e=t.XpG();t.R7$(),t.Lme(" You will be ",o.action.toLowerCase(),"ing this ",e.entityTypeDisplay," on behalf of "),t.R7$(2),t.SpI(" ",o.organization)}}function A(s,a){1&s&&t.DNE(0,U,5,3,"span",9)}function W(s,a){if(1&s){const o=t.RV6();t.j41(0,"textarea",11),t.mxI("ngModelChange",function(i){v.eBV(o);const r=t.XpG(3);return t.DH7(r.confirmationComment,i)||(r.confirmationComment=i),v.Njj(i)}),t.k0s()}if(2&s){const o=t.XpG(3);t.R50("ngModel",o.confirmationComment)}}function G(s,a){1&s&&t.DNE(0,W,1,1,"textarea",10)}function K(s,a){if(1&s&&(t.j41(0,"nz-space",6),t.nVh(1,A,1,0,"span",7),t.nVh(2,G,1,0,"textarea",8),t.k0s()),2&s){const o=a.$implicit;t.R7$(),t.vxM(o.organization?1:-1),t.R7$(),t.vxM("Reject"==o.action?2:-1)}}let h=class V{constructor(a,o,e,i,r){this.revertEvidenceGQL=a,this.revertAssertionGQL=o,this.networkErrorService=e,this.viewerService=i,this.modal=r,this.onModerated=new t.bkB,this.evidenceStatuses=m.YSN,this.isSubmitting=!1,this.showConfirm=!1,this.moderateAssertionMutator=new d.E(this.networkErrorService),this.moderateEvidenceMutator=new d.E(this.networkErrorService),this.viewer$=this.viewerService.viewer$}ngOnInit(){if(void 0===this.entityId)throw new Error("Must pass in an id to the CvcEntitySubscriptionButtonComponent");if(void 0===this.entityType)throw new Error("Must pass in an entityType to the CvcEntitySubscriptionButtonComponent");this.entityTypeDisplay="EvidenceItem"===this.entityType?"Evidence Item":"Assertion",this.viewer$.pipe((0,T.E)("mostRecentOrg"),(0,l.s)(this)).subscribe(a=>this.mostRecentOrg=a)}moderate(a){const o=a.replace(/ED$/,""),e=o.charAt(0)+o.slice(1).toLowerCase();this.modal.confirm({nzTitle:`${e} This ${this.entityTypeDisplay}`,nzOkText:e,nzCancelText:"Cancel",nzContent:this.modalContents,nzData:{action:e,organization:this.mostRecentOrg?.name},nzOnOk:()=>{this.submit(a)}})}submit(a){let o;this.isSubmitting=!0,o="EvidenceItem"===this.entityType?this.moderateEvidenceMutator.mutate(this.revertEvidenceGQL,{input:{evidenceItemId:this.entityId,organizationId:this.mostRecentOrg?.id,newStatus:a,comment:this.confirmationComment}}):this.moderateAssertionMutator.mutate(this.revertAssertionGQL,{input:{assertionId:this.entityId,organizationId:this.mostRecentOrg?.id,newStatus:a,comment:this.confirmationComment}}),o.submitSuccess$.pipe((0,l.s)(this)).subscribe(e=>{e&&(this.isSubmitting=!1,this.showConfirm=!1,this.onModerated.emit(a))}),o.submitError$.pipe((0,l.s)(this)).subscribe(e=>{e&&(this.isSubmitting=!1,this.showConfirm=!1,this.onModerated.emit(e))}),o.isSubmitting$.pipe((0,l.s)(this)).subscribe(e=>{this.isSubmitting=e})}static#t=this.\u0275fac=function(o){return new(o||V)(t.rXU(m.m9R),t.rXU(m.mqi),t.rXU(_.N),t.rXU(y.q),t.rXU(f.N_))};static#n=this.\u0275cmp=t.VBU({type:V,selectors:[["cvc-moderate-entity-buttons"]],viewQuery:function(o,e){if(1&o&&t.GBs(x,5),2&o){let i;t.mGM(i=t.lsd())&&(e.modalContents=i.first)}},inputs:{entityType:"entityType",entityId:"entityId"},outputs:{onModerated:"onModerated"},standalone:!1,decls:3,vars:1,consts:[["confirmModal",""],[4,"ngrxLet"],[3,"nzSpinning"],["nzType","primary","nzSize","large","nz-button","","nz-tooltip","",3,"nzTooltipTrigger","nzTooltipTitle","click",4,"ngIf"],["nzDanger","","nzType","primary","nzSize","large","nz-button","","nz-tooltip","",3,"click","nzTooltipTrigger","nzTooltipTitle"],["nzType","primary","nzSize","large","nz-button","","nz-tooltip","",3,"click","nzTooltipTrigger","nzTooltipTitle"],["nzDirection","vertical"],["nz-typography",""],["nz-input","","rows","4","placeholder","Please provide a reason for rejection.",3,"ngModel"],["nz-typography","",4,"nzSpaceItem"],["nz-input","","rows","4","placeholder","Please provide a reason for rejection.",3,"ngModel","ngModelChange",4,"nzSpaceItem"],["nz-input","","rows","4","placeholder","Please provide a reason for rejection.",3,"ngModelChange","ngModel"]],template:function(o,e){1&o&&t.DNE(0,S,6,5,"ng-container",1)(1,K,3,2,"ng-template",null,0,t.C5r),2&o&&t.Y8G("ngrxLet",e.viewer$)},dependencies:[g.bT,E.me,E.BC,E.vS,p.a,R.c,O.p,M.LH,I.a,z.U5,z.Dq,B.Sy,P.Nj],styles:["[_nghost-%COMP%]{display:block}.center[_ngcontent-%COMP%]{display:flex;justify-content:center}"],changeDetection:0})};h=(0,u.Cg)([(0,l.d)()],h)},40078:(j,C,n)=>{n.d(C,{U:()=>E});var u=n(72200),t=n(84341),d=n(50513),m=n(97529),l=n(97685),T=n(1177),v=n(35154),_=n(19448),y=n(21011),f=n(73664),g=n(48728);let E=(()=>{class p{static#t=this.\u0275fac=function(M){return new(M||p)};static#n=this.\u0275mod=f.$C({type:p});static#e=this.\u0275inj=g.G2t({imports:[u.MD,t.YN,t.X1,d.Z,v.Qt,T.V,l.pc,m.f3,_.g,y.j]})}return p})()},40590:(j,C,n)=>{n.d(C,{W:()=>E});var u=n(72200),t=n(50513),d=n(41951),m=n(35154),l=n(52096),T=n(1177),v=n(97685),_=n(84341),y=n(21011),f=n(73664),g=n(48728);let E=(()=>{class p{static#t=this.\u0275fac=function(M){return new(M||p)};static#n=this.\u0275mod=f.$C({type:p});static#e=this.\u0275inj=g.G2t({imports:[u.MD,_.YN,_.X1,t.Z,d.Y3,m.Qt,l.U6,y.j,T.V,v.pc]})}return p})()},81263:(j,C,n)=>{n.d(C,{L:()=>h});var u=n(31635),t=n(73664),d=n(71226),m=n(69145),l=n(49894),T=n(21413),v=n(24608),_=n(48728),y=n(74222),f=n(41305),g=n(84341),E=n(50513),p=n(16389),R=n(25930),O=n(41951),M=n(35154),I=n(52096),z=n(21011),B=n(1177),P=n(97685);function x(s,a){if(1&s&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&s){const o=t.XpG();t.R7$(),t.SpI("Revert this ",o.entityType," to Submitted?")}}function L(s,a){if(1&s&&(t.j41(0,"span",7),t.EFF(1),t.j41(2,"strong"),t.EFF(3),t.k0s(),t.EFF(4,". Please supply a reason below. "),t.k0s()),2&s){const o=t.XpG(3);t.R7$(),t.SpI(" You will be reverting this ",o.entityType," on behalf of "),t.R7$(2),t.SpI(" ",o.mostRecentOrg.name)}}function S(s,a){1&s&&t.DNE(0,L,5,2,"span",10)}function U(s,a){if(1&s&&(t.j41(0,"span",7),t.EFF(1),t.k0s()),2&s){const o=t.XpG(3);t.R7$(),t.SpI(" Please supply a reason for reverting this ",o.entityType," below. ")}}function A(s,a){1&s&&t.DNE(0,U,2,1,"span",10)}function W(s,a){if(1&s){const o=t.RV6();t.j41(0,"textarea",11),t.mxI("ngModelChange",function(i){_.eBV(o);const r=t.XpG(2);return t.DH7(r.revertComment,i)||(r.revertComment=i),_.Njj(i)}),t.EFF(1,"      "),t.k0s()}if(2&s){const o=t.XpG(2);t.R50("ngModel",o.revertComment)}}function G(s,a){if(1&s){const o=t.RV6();t.j41(0,"span",12)(1,"button",13),t.bIt("click",function(){_.eBV(o);const i=t.XpG(2);return _.Njj(i.revert())}),t.EFF(2," Revert "),t.k0s(),t.EFF(3," \xa0 "),t.j41(4,"button",14),t.bIt("click",function(){_.eBV(o);const i=t.XpG(2);return _.Njj(i.showConfirm=!1)}),t.EFF(5," Cancel "),t.k0s()()}if(2&s){const o=t.XpG(2);t.R7$(),t.Y8G("disabled",!o.revertComment||o.revertComment.length<10)("nzTooltipTrigger",o.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==o.mostRecentOrg?null:o.mostRecentOrg.name))}}function K(s,a){if(1&s&&(t.j41(0,"nz-spin",5)(1,"nz-space",6),t.nVh(2,S,1,0,"span",7)(3,A,1,0,"span",7),t.DNE(4,W,2,1,"textarea",8)(5,G,6,3,"span",9),t.k0s()()),2&s){const o=t.XpG();t.Y8G("nzSpinning",o.isSubmitting),t.R7$(2),t.vxM(o.mostRecentOrg?2:3)}}let h=class F{constructor(a,o,e,i){this.revertEvidenceGQL=a,this.revertAssertionGQL=o,this.networkErrorService=e,this.viewerService=i,this.onReverted=new t.bkB,this.isSubmitting=!1,this.showConfirm=!1,this.destroy$=new T.B,this.revertAssertionMutator=new d.E(this.networkErrorService),this.revertEvidenceMutator=new d.E(this.networkErrorService),this.viewer$=this.viewerService.viewer$}revert(){let a;this.isSubmitting=!0,a="EvidenceItem"===this.entityType?this.revertEvidenceMutator.mutate(this.revertEvidenceGQL,{input:{evidenceItemId:this.entityId,organizationId:this.mostRecentOrg?.id,newStatus:m.YSN.Submitted,comment:this.revertComment}}):this.revertAssertionMutator.mutate(this.revertAssertionGQL,{input:{assertionId:this.entityId,organizationId:this.mostRecentOrg?.id,newStatus:m.YSN.Submitted,comment:this.revertComment}}),a.submitSuccess$.pipe((0,l.s)(this)).subscribe(o=>{o&&(this.isSubmitting=!1,this.showConfirm=!1,this.onReverted.emit(!0))}),a.submitError$.pipe((0,l.s)(this)).subscribe(o=>{o&&(this.isSubmitting=!1,this.showConfirm=!1,this.onReverted.emit(o))}),a.isSubmitting$.pipe((0,l.s)(this)).subscribe(o=>{this.isSubmitting=o})}handleConfirmModalCancel(){this.showConfirm=!1}ngOnInit(){if(void 0===this.entityId)throw new Error("Must pass in an id to the CvcEntitySubscriptionButtonComponent");if(void 0===this.entityType)throw new Error("Must pass in an entityType to the CvcEntitySubscriptionButtonComponent");this.viewer$.pipe((0,v.E)("mostRecentOrg"),(0,l.s)(this)).subscribe(a=>this.mostRecentOrg=a)}static#t=this.\u0275fac=function(o){return new(o||F)(t.rXU(m.m9R),t.rXU(m.mqi),t.rXU(y.N),t.rXU(f.q))};static#n=this.\u0275cmp=t.VBU({type:F,selectors:[["cvc-revert-entity-button"]],inputs:{entityType:"entityType",entityId:"entityId"},outputs:{onReverted:"onReverted"},standalone:!1,decls:7,vars:5,consts:[["confirmModalTitle",""],["confirmModalContent",""],["nz-button","","nz-tooltip","Revert to Submitted","nzSize","small",3,"click","nzLoading"],["nz-icon","","nzType","undo"],[3,"nzVisibleChange","nzOnCancel","nzVisible","nzContent","nzTitle","nzFooter"],[3,"nzSpinning"],["nzDirection","vertical"],["nz-typography",""],["nz-input","","rows","4","placeholder","Please provide a reason for reverting.",3,"ngModel","ngModelChange",4,"nzSpaceItem"],["class","modal-footer-buttons",4,"nzSpaceItem"],["nz-typography","",4,"nzSpaceItem"],["nz-input","","rows","4","placeholder","Please provide a reason for reverting.",3,"ngModelChange","ngModel"],[1,"modal-footer-buttons"],["nzType","primary","nz-button","","nz-tooltip","",3,"click","disabled","nzTooltipTrigger","nzTooltipTitle"],["nz-button","",3,"click"]],template:function(o,e){if(1&o){const i=t.RV6();t.j41(0,"button",2),t.bIt("click",function(){return _.eBV(i),_.Njj(e.showConfirm=!0)}),t.nrm(1,"i",3),t.k0s(),t.j41(2,"nz-modal",4),t.mxI("nzVisibleChange",function(c){return _.eBV(i),t.DH7(e.showConfirm,c)||(e.showConfirm=c),_.Njj(c)}),t.bIt("nzOnCancel",function(){return _.eBV(i),_.Njj(e.handleConfirmModalCancel())}),t.DNE(3,x,2,1,"ng-template",null,0,t.C5r),t.k0s(),t.DNE(5,K,6,2,"ng-template",null,1,t.C5r)}if(2&o){const i=t.sdS(4),r=t.sdS(6);t.Y8G("nzLoading",e.isSubmitting),t.R7$(2),t.R50("nzVisible",e.showConfirm),t.Y8G("nzContent",r)("nzTitle",i)("nzFooter",null)}},dependencies:[g.me,g.BC,g.vS,E.a,p.c,R.p,O.Dn,M.LH,I.F2,z.Sy,B.a,P.U5,P.Dq],styles:["[_nghost-%COMP%]{display:block}.modal-footer-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]})};h=(0,u.Cg)([(0,l.d)()],h)},86073:(j,C,n)=>{n.d(C,{h:()=>o});var u=n(40505),t=n(73664),d=n(72200),m=n(38132),l=n(41951),T=n(75699),v=n(1236),_=n(96354),y=n(5964),f=n(69199),g=n(69145),E=n(25703),p=n(62e3),R=n(47679),O=n(61774),M=n(83075);function I(e,i){if(1&e&&(t.nrm(0,"i",7),t.nI1(1,"entityColor"),t.EFF(2)),2&e){const r=t.XpG().ngIf;t.Y8G("nzTwotoneColor",t.bMT(1,2,"VariantType")),t.R7$(2),t.SpI(" ",r.name," ")}}function z(e,i){if(1&e&&(t.j41(0,"cvc-link-tag",9),t.EFF(1),t.k0s()),2&e){const r=t.XpG(2).ngIf;t.Y8G("href",r.url),t.R7$(),t.SpI(" ",r.soid," ")}}function B(e,i){if(1&e&&t.DNE(0,z,2,2,"cvc-link-tag",8),2&e){const r=t.XpG().ngIf;t.Y8G("ngIf","N/A"!=r.soid)}}function P(e,i){if(1&e&&(t.qex(0),t.j41(1,"nz-card",4),t.DNE(2,I,3,4,"ng-template",null,0,t.C5r)(4,B,1,1,"ng-template",null,1,t.C5r),t.j41(6,"nz-descriptions",5)(7,"nz-descriptions-item",6),t.EFF(8),t.k0s()()(),t.bVm()),2&e){const r=i.ngIf,c=t.sdS(3),D=t.sdS(5);t.R7$(),t.Y8G("nzTitle",c)("nzExtra",D),t.R7$(5),t.Y8G("nzColumn",2),t.R7$(2),t.SpI(" ",r.variantCount," ")}}let x=(()=>{class e{constructor(r){this.gql=r}ngOnInit(){if(null==this.variantTypeId)throw new Error("cvc-variant-type-popover requires valid variantTypeId input.");this.variantType$=this.gql.watch({variantTypeId:this.variantTypeId}).valueChanges.pipe((0,_.T)(({data:r})=>r?.variantTypePopover),(0,y.p)(f.kP))}static#t=this.\u0275fac=function(c){return new(c||e)(t.rXU(g.l_P))};static#n=this.\u0275cmp=t.VBU({type:e,selectors:[["cvc-variant-type-popover"]],inputs:{variantTypeId:"variantTypeId"},standalone:!1,decls:3,vars:3,consts:[["cardTitle",""],["linkout",""],["id","popover-content"],[4,"ngIf"],["nzBordered","false","id","card-content",3,"nzTitle","nzExtra"],["nzSize","small","nzBordered","true",3,"nzColumn"],["nzTitle","Variants","nzSpan","2"],["nz-icon","","nzTheme","twotone","nzType","civic-varianttype",3,"nzTwotoneColor"],["tooltip","View on SequenceOntology.org",3,"href",4,"ngIf"],["tooltip","View on SequenceOntology.org",3,"href"]],template:function(c,D){1&c&&(t.j41(0,"div",2),t.DNE(1,P,9,4,"ng-container",3),t.nI1(2,"ngrxPush"),t.k0s()),2&c&&(t.R7$(),t.Y8G("ngIf",t.bMT(2,1,D.variantType$)))},dependencies:[d.bT,l.Dn,E.cK,p.xA,p.gr,R.a,O.L9,M.R],styles:["[_nghost-%COMP%]{display:block;margin:-8px -12px}[_nghost-%COMP%]     .ant-card-body{padding:0;margin-top:1px}[_nghost-%COMP%]     .ant-descriptions-view{border:none;border-top:1px solid #f0f0f0}.popover-text[_ngcontent-%COMP%]{width:100%;padding:8px;border-bottom:1px solid #f0f0f0}#popover-content[_ngcontent-%COMP%]{max-width:500px;max-height:700px;overflow:auto}"]})}return e})();function L(e,i){}function S(e,i){if(1&e&&(t.qex(0),t.j41(1,"a",6),t.DNE(2,L,0,0,"ng-template",7),t.k0s(),t.bVm()),2&e){const r=t.XpG(),c=t.sdS(2);t.R7$(),t.Y8G("routerLink",r.variantType.link),t.R7$(),t.Y8G("ngTemplateOutlet",c)}}function U(e,i){}function A(e,i){if(1&e&&t.nrm(0,"cvc-variant-type-popover",9),2&e){const r=t.XpG(2);t.Y8G("variantTypeId",r.variantType.id)}}function W(e,i){if(1&e&&(t.j41(0,"nz-tag",8),t.DNE(1,U,0,0,"ng-template",7),t.k0s(),t.DNE(2,A,1,1,"ng-template",null,4,t.C5r)),2&e){const r=t.sdS(3),c=t.XpG(),D=t.sdS(8);t.Y8G("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",c.enablePopover?r:void 0),t.R7$(),t.Y8G("ngTemplateOutlet",D)}}function G(e,i){}function K(e,i){if(1&e&&t.DNE(0,G,0,0,"ng-template",7),2&e){t.XpG();const r=t.sdS(2);t.Y8G("ngTemplateOutlet",r)}}function h(e,i){}function s(e,i){if(1&e&&(t.j41(0,"nz-tag"),t.DNE(1,h,0,0,"ng-template",7),t.k0s()),2&e){t.XpG();const r=t.sdS(8);t.R7$(),t.Y8G("ngTemplateOutlet",r)}}function a(e,i){if(1&e&&(t.nrm(0,"i",10),t.EFF(1)),2&e){const r=t.XpG();t.Y8G("nzTwotoneColor",r.iconColor),t.R7$(),t.SpI(" ",r.variantType.name,"\n")}}let o=(()=>{class e{set variantType(r){if(!r)throw new Error("variant-type-tag variantType Input requires LinkableVariantType.");this._variantType=r}get variantType(){return this._variantType}idFunction(){return this.variantType.id}constructor(){this.linked=!0,this.enablePopover=!0,this.iconColor=(0,u.P)("VariantType")}static#t=this.\u0275fac=function(c){return new(c||e)};static#n=this.\u0275cmp=t.VBU({type:e,selectors:[["cvc-variant-type-tag"]],inputs:{variantType:"variantType",linked:"linked",enablePopover:"enablePopover"},standalone:!1,decls:9,vars:2,consts:[["tag",""],["unlinked",""],["noPopover",""],["tagContent",""],["variantTypePopover",""],[4,"ngIf","ngIfElse"],[3,"routerLink"],[3,"ngTemplateOutlet"],["nz-popover","",3,"nzPopoverMouseEnterDelay","nzPopoverContent"],[3,"variantTypeId"],["nz-icon","","nzType","civic-varianttype","nzTheme","twotone",3,"nzTwotoneColor"]],template:function(c,D){if(1&c&&t.DNE(0,S,3,2,"ng-container",5)(1,W,4,3,"ng-template",null,0,t.C5r)(3,K,1,1,"ng-template",null,1,t.C5r)(5,s,2,1,"ng-template",null,2,t.C5r)(7,a,2,2,"ng-template",null,3,t.C5r),2&c){const b=t.sdS(4);t.Y8G("ngIf",D.linked)("ngIfElse",b)}},dependencies:[d.bT,d.T3,m.Wk,l.Dn,T.s,v.L_,x],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return e})()}}]);