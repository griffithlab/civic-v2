"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[5385],{28134:(S,T,e)=>{e.d(T,{l:()=>G});var v=e(60177),t=e(51188),n=e(1236),d=e(75699),l=e(41951),E=e(47086),P=e(22142),h=e(51209),u=e(64917),p=e(25703),z=e(62e3),C=e(38415),B=e(27556),O=e(54438);let y=(()=>{class f{static{this.\u0275fac=function(R){return new(R||f)}}static{this.\u0275mod=O.$C({type:f})}static{this.\u0275inj=O.G2t({imports:[v.MD,p.Ti,z.WF,l.Y3,h.k,E.C,P.x,u.i,C.g,B.F]})}}return f})();var x=e(34994);let G=(()=>{class f{static{this.\u0275fac=function(R){return new(R||f)}}static{this.\u0275mod=O.$C({type:f})}static{this.\u0275inj=O.G2t({imports:[v.MD,t.iI,n.MC,d.T,l.Y3,y,u.i,x.a]})}}return f})()},28719:(S,T,e)=>{e.d(T,{r:()=>I});var v=e(31635),t=e(54438),n=e(71226),d=e(69145),l=e(49894),E=e(24608),P=e(74222),h=e(41305),u=e(52096),p=e(60177),z=e(89417),C=e(50513),B=e(16389),O=e(25930),y=e(35154),x=e(82983),G=e(97685),f=e(21011),U=e(61774);const L=["confirmModal"];function R(a,r){if(1&a){const o=t.RV6();t.j41(0,"button",5),t.bIt("click",function(){t.eBV(o);const _=t.XpG(2);return t.Njj(_.moderate(_.evidenceStatuses.Accepted))}),t.EFF(1),t.k0s()}if(2&a){const o=t.XpG().ngrxLet,s=t.XpG();t.Y8G("nzTooltipTrigger",o.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==o.mostRecentOrg?null:o.mostRecentOrg.name)),t.R7$(),t.SpI(" Accept ",s.entityTypeDisplay," ")}}function A(a,r){if(1&a){const o=t.RV6();t.qex(0),t.j41(1,"nz-spin",2),t.DNE(2,R,2,3,"button",3),t.EFF(3," \xa0 "),t.j41(4,"button",4),t.bIt("click",function(){t.eBV(o);const _=t.XpG();return t.Njj(_.moderate(_.evidenceStatuses.Rejected))}),t.EFF(5),t.k0s()(),t.bVm()}if(2&a){const o=r.ngrxLet,s=t.XpG();t.R7$(),t.Y8G("nzSpinning",s.isSubmitting),t.R7$(),t.Y8G("ngIf",o.canModerate),t.R7$(2),t.Y8G("nzTooltipTrigger",o.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==o.mostRecentOrg?null:o.mostRecentOrg.name)),t.R7$(),t.SpI(" Reject ",s.entityTypeDisplay," ")}}function j(a,r){if(1&a&&(t.j41(0,"span",7),t.EFF(1),t.j41(2,"strong"),t.EFF(3),t.k0s(),t.EFF(4," ."),t.k0s()),2&a){const o=t.XpG(2).$implicit,s=t.XpG();t.R7$(),t.Lme(" You will be ",o.action.toLowerCase(),"ing this ",s.entityTypeDisplay," on behalf of "),t.R7$(2),t.SpI(" ",o.organization,"")}}function V(a,r){1&a&&t.DNE(0,j,5,3,"span",9)}function b(a,r){if(1&a){const o=t.RV6();t.j41(0,"textarea",11),t.mxI("ngModelChange",function(_){t.eBV(o);const M=t.XpG(3);return t.DH7(M.confirmationComment,_)||(M.confirmationComment=_),t.Njj(_)}),t.k0s()}if(2&a){const o=t.XpG(3);t.R50("ngModel",o.confirmationComment)}}function W(a,r){1&a&&t.DNE(0,b,1,1,"textarea",10)}function K(a,r){if(1&a&&(t.j41(0,"nz-space",6),t.DNE(1,V,1,0,"span",7)(2,W,1,0,"textarea",8),t.k0s()),2&a){const o=r.$implicit;t.R7$(),t.vxM(o.organization?1:-1),t.R7$(),t.vxM("Reject"==o.action?2:-1)}}let I=class N{constructor(r,o,s,_,M){this.revertEvidenceGQL=r,this.revertAssertionGQL=o,this.networkErrorService=s,this.viewerService=_,this.modal=M,this.onModerated=new t.bkB,this.evidenceStatuses=d.YSN,this.isSubmitting=!1,this.showConfirm=!1,this.moderateAssertionMutator=new n.E(this.networkErrorService),this.moderateEvidenceMutator=new n.E(this.networkErrorService),this.viewer$=this.viewerService.viewer$}ngOnInit(){if(void 0===this.entityId)throw new Error("Must pass in an id to the CvcEntitySubscriptionButtonComponent");if(void 0===this.entityType)throw new Error("Must pass in an entityType to the CvcEntitySubscriptionButtonComponent");this.entityTypeDisplay="EvidenceItem"===this.entityType?"Evidence Item":"Assertion",this.viewer$.pipe((0,E.E)("mostRecentOrg"),(0,l.s)(this)).subscribe(r=>this.mostRecentOrg=r)}moderate(r){const o=r.replace(/ED$/,""),s=o.charAt(0)+o.slice(1).toLowerCase();this.modal.confirm({nzTitle:`${s} This ${this.entityTypeDisplay}`,nzOkText:s,nzCancelText:"Cancel",nzContent:this.modalContents,nzData:{action:s,organization:this.mostRecentOrg?.name},nzOnOk:()=>{this.submit(r)}})}submit(r){let o;this.isSubmitting=!0,o="EvidenceItem"===this.entityType?this.moderateEvidenceMutator.mutate(this.revertEvidenceGQL,{input:{evidenceItemId:this.entityId,organizationId:this.mostRecentOrg?.id,newStatus:r,comment:this.confirmationComment}}):this.moderateAssertionMutator.mutate(this.revertAssertionGQL,{input:{assertionId:this.entityId,organizationId:this.mostRecentOrg?.id,newStatus:r,comment:this.confirmationComment}}),o.submitSuccess$.pipe((0,l.s)(this)).subscribe(s=>{s&&(this.isSubmitting=!1,this.showConfirm=!1,this.onModerated.emit(r))}),o.submitError$.pipe((0,l.s)(this)).subscribe(s=>{s&&(this.isSubmitting=!1,this.showConfirm=!1,this.onModerated.emit(s))}),o.isSubmitting$.pipe((0,l.s)(this)).subscribe(s=>{this.isSubmitting=s})}static{this.\u0275fac=function(o){return new(o||N)(t.rXU(d.m9R),t.rXU(d.mqi),t.rXU(P.N),t.rXU(h.q),t.rXU(u.N_))}}static{this.\u0275cmp=t.VBU({type:N,selectors:[["cvc-moderate-entity-buttons"]],viewQuery:function(o,s){if(1&o&&t.GBs(L,5),2&o){let _;t.mGM(_=t.lsd())&&(s.modalContents=_.first)}},inputs:{entityType:"entityType",entityId:"entityId"},outputs:{onModerated:"onModerated"},standalone:!1,decls:3,vars:1,consts:[["confirmModal",""],[4,"ngrxLet"],[3,"nzSpinning"],["nzType","primary","nzSize","large","nz-button","","nz-tooltip","",3,"nzTooltipTrigger","nzTooltipTitle","click",4,"ngIf"],["nzDanger","","nzType","primary","nzSize","large","nz-button","","nz-tooltip","",3,"click","nzTooltipTrigger","nzTooltipTitle"],["nzType","primary","nzSize","large","nz-button","","nz-tooltip","",3,"click","nzTooltipTrigger","nzTooltipTitle"],["nzDirection","vertical"],["nz-typography",""],["nz-input","","rows","4","placeholder","Please provide a reason for rejection.",3,"ngModel"],["nz-typography","",4,"nzSpaceItem"],["nz-input","","rows","4","placeholder","Please provide a reason for rejection.",3,"ngModel","ngModelChange",4,"nzSpaceItem"],["nz-input","","rows","4","placeholder","Please provide a reason for rejection.",3,"ngModelChange","ngModel"]],template:function(o,s){1&o&&t.DNE(0,A,6,5,"ng-container",1)(1,K,3,2,"ng-template",null,0,t.C5r),2&o&&t.Y8G("ngrxLet",s.viewer$)},dependencies:[p.bT,z.me,z.BC,z.vS,C.aO,B.c,O.p,y.LH,x.a,G.U5,G.Dq,f.Sy,U.Nj],styles:["[_nghost-%COMP%]{display:block}.center[_ngcontent-%COMP%]{display:flex;justify-content:center}"],changeDetection:0})}};I=(0,v.Cg)([(0,l.d)()],I)},40078:(S,T,e)=>{e.d(T,{U:()=>z});var v=e(60177),t=e(89417),n=e(50513),d=e(97529),l=e(97685),E=e(82983),P=e(35154),h=e(19448),u=e(21011),p=e(54438);let z=(()=>{class C{static{this.\u0275fac=function(y){return new(y||C)}}static{this.\u0275mod=p.$C({type:C})}static{this.\u0275inj=p.G2t({imports:[v.MD,t.YN,t.X1,n.Zw,P.Qt,E.V,l.pc,d.f3,h.g,u.j]})}}return C})()},40590:(S,T,e)=>{e.d(T,{W:()=>z});var v=e(60177),t=e(50513),n=e(41951),d=e(35154),l=e(52096),E=e(82983),P=e(97685),h=e(89417),u=e(21011),p=e(54438);let z=(()=>{class C{static{this.\u0275fac=function(y){return new(y||C)}}static{this.\u0275mod=p.$C({type:C})}static{this.\u0275inj=p.G2t({imports:[v.MD,h.YN,h.X1,t.Zw,n.Y3,d.Qt,l.U6,u.j,E.V,P.pc]})}}return C})()},58238:(S,T,e)=>{e.d(T,{S:()=>Z});var v=e(40505),t=e(1236),n=e(54438),d=e(60177),l=e(51188),E=e(75699),P=e(41951),h=e(69199),u=e(96354),p=e(5964),z=e(69145),C=e(25703),B=e(62e3),O=e(69062),y=e(90959),x=e(77855),G=e(38415),f=e(32033),U=e(61774),L=e(83075);function R(i,g){if(1&i&&(n.nrm(0,"i",11),n.nI1(1,"entityColor"),n.EFF(2)),2&i){const c=n.XpG().ngIf;n.Y8G("nzTwotoneColor",n.bMT(1,2,"VariantGroup")),n.R7$(2),n.SpI(" ",c.name," ")}}function A(i,g){if(1&i&&n.nrm(0,"cvc-entity-child-counts",12),2&i){const c=n.XpG().ngIf;n.Y8G("cvcEntity",c)}}function j(i,g){if(1&i&&n.EFF(0),2&i){const c=n.XpG().ngIf;n.SpI(" ",c.description," ")}}function V(i,g){1&i&&n.nrm(0,"cvc-empty-value",7)}function b(i,g){if(1&i&&n.nrm(0,"cvc-feature-variant-tag",15),2&i){const c=g.$implicit;n.Y8G("enablePopover",!1)("variant",c.node)}}function W(i,g){if(1&i&&(n.j41(0,"nz-descriptions-item",13)(1,"cvc-tag-list"),n.DNE(2,b,1,2,"cvc-feature-variant-tag",14),n.k0s()()),2&i){const c=n.XpG().ngIf;n.R7$(2),n.Y8G("ngForOf",c.variants.edges)}}function K(i,g){if(1&i&&n.nrm(0,"cvc-source-tag",18),2&i){const c=g.$implicit;n.Y8G("enablePopover",!1)("source",c)}}function I(i,g){if(1&i&&(n.j41(0,"nz-descriptions-item",16)(1,"cvc-tag-list"),n.DNE(2,K,1,2,"cvc-source-tag",17),n.k0s()()),2&i){const c=n.XpG().ngIf;n.R7$(2),n.Y8G("ngForOf",c.sources)}}function a(i,g){if(1&i&&(n.qex(0),n.j41(1,"nz-card",4),n.DNE(2,R,3,4,"ng-template",null,0,n.C5r)(4,A,1,1,"ng-template",null,1,n.C5r),n.j41(6,"nz-descriptions",5)(7,"nz-descriptions-item",6),n.DNE(8,j,1,1)(9,V,1,0,"cvc-empty-value",7),n.k0s()(),n.j41(10,"nz-descriptions",8),n.DNE(11,W,3,1,"nz-descriptions-item",9)(12,I,3,1,"nz-descriptions-item",10),n.k0s()(),n.bVm()),2&i){const c=g.ngIf,m=n.sdS(3),D=n.sdS(5);n.R7$(),n.Y8G("nzTitle",m)("nzExtra",D),n.R7$(5),n.Y8G("nzColumn",1),n.R7$(2),n.vxM(c.description?8:9),n.R7$(2),n.Y8G("nzColumn",2),n.R7$(),n.Y8G("ngIf",c.variants.edges.length>0),n.R7$(),n.Y8G("ngIf",c.sources.length>0)}}let r=(()=>{class i{constructor(c,m){this.gql=c,this.elementRef=m,this.contentRendered=new n.bkB,this.resizeObserver=new ResizeObserver(()=>{this.contentRendered.emit()})}ngOnInit(){this.variantGroup$=this.gql.watch({variantGroupId:this.variantGroupId}).valueChanges.pipe((0,u.T)(({data:c})=>c?.variantGroup),(0,p.p)(h.kP))}ngAfterViewInit(){this.resizeObserver.observe(this.elementRef.nativeElement)}ngOnDestroy(){this.resizeObserver.disconnect()}static{this.\u0275fac=function(m){return new(m||i)(n.rXU(z.gwr),n.rXU(n.aKT))}}static{this.\u0275cmp=n.VBU({type:i,selectors:[["cvc-variant-group-popover"]],inputs:{variantGroupId:"variantGroupId"},outputs:{contentRendered:"contentRendered"},standalone:!1,decls:3,vars:3,consts:[["cardTitle",""],["cardExtra",""],["id","popover-content"],[4,"ngIf"],["nzBordered","false","id","card-content",3,"nzTitle","nzExtra"],["nzLayout","vertical","nzBordered","","nzSize","small",3,"nzColumn"],["nzTitle","Description"],["cvcEmptyCategory","unspecified"],["nzSize","small","nzBordered","true",3,"nzColumn"],["nzTitle","Variants","nzSpan","2",4,"ngIf"],["nzTitle","Sources","nzSpan","2",4,"ngIf"],["nz-icon","","nzTheme","twotone","nzType","civic-variantgroup",3,"nzTwotoneColor"],["cvcRoute","variant-groups",3,"cvcEntity"],["nzTitle","Variants","nzSpan","2"],[3,"enablePopover","variant",4,"ngFor","ngForOf"],[3,"enablePopover","variant"],["nzTitle","Sources","nzSpan","2"],[3,"enablePopover","source",4,"ngFor","ngForOf"],[3,"enablePopover","source"]],template:function(m,D){1&m&&(n.j41(0,"div",2),n.DNE(1,a,13,7,"ng-container",3),n.nI1(2,"ngrxPush"),n.k0s()),2&m&&(n.R7$(),n.Y8G("ngIf",n.bMT(2,1,D.variantGroup$)))},dependencies:[d.Sq,d.bT,C.cK,B.xA,B.gr,P.Dn,O.D,y.j,x.M,G.g,f.o,U.L9,L.R],styles:["[_nghost-%COMP%]{display:block;margin:-8px -12px}[_nghost-%COMP%]     .ant-card-body{padding:0;margin-top:1px}[_nghost-%COMP%]     .ant-descriptions-view{border:none;border-top:1px solid #f0f0f0}.popover-text[_ngcontent-%COMP%]{width:100%;padding:8px;border-bottom:1px solid #f0f0f0}#popover-content[_ngcontent-%COMP%]{max-width:500px;max-height:700px;overflow:auto}[_nghost-%COMP%]     nz-descriptions[nzLayout=horizontal] .ant-descriptions-item-label{text-align:right}[_nghost-%COMP%]     nz-descriptions .ant-descriptions-item-label{font-weight:550}[_nghost-%COMP%]     nz-descriptions .ant-descriptions-header{margin-top:4px;margin-bottom:4px;padding-left:8px}[_nghost-%COMP%]     nz-descriptions .ant-descriptions-title{font-weight:500;color:#00000073;font-size:12px}[_nghost-%COMP%]     nz-descriptions .ant-descriptions-item-content p:last-of-type{margin-bottom:0}#popover-content[_ngcontent-%COMP%]{min-width:400px;min-height:100px}"]})}}return i})();var o=e(12387);function s(i,g){}function _(i,g){if(1&i&&(n.qex(0),n.j41(1,"a",5),n.DNE(2,s,0,0,"ng-template",6),n.k0s(),n.bVm()),2&i){const c=n.XpG(),m=n.sdS(2);n.R7$(),n.Y8G("routerLink",c.variantgroup.link),n.R7$(),n.Y8G("ngTemplateOutlet",m)}}function M(i,g){}function F(i,g){if(1&i){const c=n.RV6();n.j41(0,"cvc-variant-group-popover",8),n.bIt("contentRendered",function(){n.eBV(c);const D=n.XpG(2);return n.Njj(D.updatePopoverPosition())}),n.k0s()}if(2&i){const c=n.XpG(2);n.Y8G("variantGroupId",c.variantgroup.id)}}function Y(i,g){if(1&i&&(n.j41(0,"nz-tag",7),n.DNE(1,M,0,0,"ng-template",6),n.k0s(),n.DNE(2,F,1,1,"ng-template",null,3,n.C5r)),2&i){const c=n.sdS(3),m=n.XpG(),D=n.sdS(6);n.Y8G("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",m.enablePopover?c:void 0)("nzPopoverPlacement",m.popoverPlacement),n.R7$(),n.Y8G("ngTemplateOutlet",D)}}function w(i,g){}function Q(i,g){if(1&i&&n.DNE(0,w,0,0,"ng-template",6),2&i){n.XpG();const c=n.sdS(2);n.Y8G("ngTemplateOutlet",c)}}function H(i,g){if(1&i&&(n.j41(0,"cvc-icon-badges",9),n.nrm(1,"i",10),n.nI1(2,"entityColor"),n.k0s(),n.EFF(3)),2&i){const c=n.XpG();n.Y8G("flagged",c.variantgroup.flagged)("entityColor",c.iconColor),n.R7$(),n.Y8G("nzTwotoneColor",n.bMT(2,4,"VariantGroup")),n.R7$(2),n.SpI(" ",c.variantgroup.name,"\n")}}let Z=(()=>{class i{constructor(){this.linked=!0,this.enablePopover=!0,this.popoverPlacement="top",this.iconColor=(0,v.P)("VariantGroup")}updatePopoverPosition(){this.popover&&this.popover.updatePosition()}ngAfterViewInit(){this.popoverList.length>0&&(this.popover=this.popoverList.first)}static{this.\u0275fac=function(m){return new(m||i)}}static{this.\u0275cmp=n.VBU({type:i,selectors:[["cvc-variant-group-tag"]],viewQuery:function(m,D){if(1&m&&n.GBs(t.L_,5),2&m){let $;n.mGM($=n.lsd())&&(D.popoverList=$)}},inputs:{variantgroup:"variantgroup",linked:"linked",enablePopover:"enablePopover",popoverPlacement:"popoverPlacement"},standalone:!1,decls:7,vars:2,consts:[["tag",""],["unlinked",""],["tagContent",""],["popoverContent",""],[4,"ngIf","ngIfElse"],[3,"routerLink"],[3,"ngTemplateOutlet"],["nz-popover","",3,"nzPopoverMouseEnterDelay","nzPopoverContent","nzPopoverPlacement"],[3,"contentRendered","variantGroupId"],[3,"flagged","entityColor"],["nz-icon","","nzType","civic-variantgroup","nzTheme","twotone",3,"nzTwotoneColor"]],template:function(m,D){if(1&m&&n.DNE(0,_,3,2,"ng-container",4)(1,Y,4,4,"ng-template",null,0,n.C5r)(3,Q,1,1,"ng-template",null,1,n.C5r)(5,H,4,6,"ng-template",null,2,n.C5r),2&m){const $=n.sdS(4);n.Y8G("ngIf",D.linked)("ngIfElse",$)}},dependencies:[d.bT,d.T3,l.Wk,t.L_,E.s,P.Dn,r,o.N,L.R],encapsulation:2,changeDetection:0})}}return i})()},81263:(S,T,e)=>{e.d(T,{L:()=>I});var v=e(31635),t=e(54438),n=e(71226),d=e(69145),l=e(49894),E=e(21413),P=e(24608),h=e(74222),u=e(41305),p=e(89417),z=e(50513),C=e(16389),B=e(25930),O=e(41951),y=e(35154),x=e(52096),G=e(21011),f=e(82983),U=e(97685);function L(a,r){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&a){const o=t.XpG();t.R7$(),t.SpI("Revert this ",o.entityType," to Submitted?")}}function R(a,r){if(1&a&&(t.j41(0,"span",7),t.EFF(1),t.j41(2,"strong"),t.EFF(3),t.k0s(),t.EFF(4,". Please supply a reason below. "),t.k0s()),2&a){const o=t.XpG(3);t.R7$(),t.SpI(" You will be reverting this ",o.entityType," on behalf of "),t.R7$(2),t.SpI(" ",o.mostRecentOrg.name,"")}}function A(a,r){1&a&&t.DNE(0,R,5,2,"span",10)}function j(a,r){if(1&a&&(t.j41(0,"span",7),t.EFF(1),t.k0s()),2&a){const o=t.XpG(3);t.R7$(),t.SpI(" Please supply a reason for reverting this ",o.entityType," below. ")}}function V(a,r){1&a&&t.DNE(0,j,2,1,"span",10)}function b(a,r){if(1&a){const o=t.RV6();t.j41(0,"textarea",11),t.mxI("ngModelChange",function(_){t.eBV(o);const M=t.XpG(2);return t.DH7(M.revertComment,_)||(M.revertComment=_),t.Njj(_)}),t.EFF(1,"      "),t.k0s()}if(2&a){const o=t.XpG(2);t.R50("ngModel",o.revertComment)}}function W(a,r){if(1&a){const o=t.RV6();t.j41(0,"span",12)(1,"button",13),t.bIt("click",function(){t.eBV(o);const _=t.XpG(2);return t.Njj(_.revert())}),t.EFF(2," Revert "),t.k0s(),t.EFF(3," \xa0 "),t.j41(4,"button",14),t.bIt("click",function(){t.eBV(o);const _=t.XpG(2);return t.Njj(_.showConfirm=!1)}),t.EFF(5," Cancel "),t.k0s()()}if(2&a){const o=t.XpG(2);t.R7$(),t.Y8G("disabled",!o.revertComment||o.revertComment.length<10)("nzTooltipTrigger",o.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==o.mostRecentOrg?null:o.mostRecentOrg.name))}}function K(a,r){if(1&a&&(t.j41(0,"nz-spin",5)(1,"nz-space",6),t.DNE(2,A,1,0,"span",7)(3,V,1,0,"span",7)(4,b,2,1,"textarea",8)(5,W,6,3,"span",9),t.k0s()()),2&a){const o=t.XpG();t.Y8G("nzSpinning",o.isSubmitting),t.R7$(2),t.vxM(o.mostRecentOrg?2:3)}}let I=class X{constructor(r,o,s,_){this.revertEvidenceGQL=r,this.revertAssertionGQL=o,this.networkErrorService=s,this.viewerService=_,this.onReverted=new t.bkB,this.isSubmitting=!1,this.showConfirm=!1,this.destroy$=new E.B,this.revertAssertionMutator=new n.E(this.networkErrorService),this.revertEvidenceMutator=new n.E(this.networkErrorService),this.viewer$=this.viewerService.viewer$}revert(){let r;this.isSubmitting=!0,r="EvidenceItem"===this.entityType?this.revertEvidenceMutator.mutate(this.revertEvidenceGQL,{input:{evidenceItemId:this.entityId,organizationId:this.mostRecentOrg?.id,newStatus:d.YSN.Submitted,comment:this.revertComment}}):this.revertAssertionMutator.mutate(this.revertAssertionGQL,{input:{assertionId:this.entityId,organizationId:this.mostRecentOrg?.id,newStatus:d.YSN.Submitted,comment:this.revertComment}}),r.submitSuccess$.pipe((0,l.s)(this)).subscribe(o=>{o&&(this.isSubmitting=!1,this.showConfirm=!1,this.onReverted.emit(!0))}),r.submitError$.pipe((0,l.s)(this)).subscribe(o=>{o&&(this.isSubmitting=!1,this.showConfirm=!1,this.onReverted.emit(o))}),r.isSubmitting$.pipe((0,l.s)(this)).subscribe(o=>{this.isSubmitting=o})}handleConfirmModalCancel(){this.showConfirm=!1}ngOnInit(){if(void 0===this.entityId)throw new Error("Must pass in an id to the CvcEntitySubscriptionButtonComponent");if(void 0===this.entityType)throw new Error("Must pass in an entityType to the CvcEntitySubscriptionButtonComponent");this.viewer$.pipe((0,P.E)("mostRecentOrg"),(0,l.s)(this)).subscribe(r=>this.mostRecentOrg=r)}static{this.\u0275fac=function(o){return new(o||X)(t.rXU(d.m9R),t.rXU(d.mqi),t.rXU(h.N),t.rXU(u.q))}}static{this.\u0275cmp=t.VBU({type:X,selectors:[["cvc-revert-entity-button"]],inputs:{entityType:"entityType",entityId:"entityId"},outputs:{onReverted:"onReverted"},standalone:!1,decls:7,vars:5,consts:[["confirmModalTitle",""],["confirmModalContent",""],["nz-button","","nz-tooltip","Revert to Submitted","nzSize","small",3,"click","nzLoading"],["nz-icon","","nzType","undo"],[3,"nzVisibleChange","nzOnCancel","nzVisible","nzContent","nzTitle","nzFooter"],[3,"nzSpinning"],["nzDirection","vertical"],["nz-typography",""],["nz-input","","rows","4","placeholder","Please provide a reason for reverting.",3,"ngModel","ngModelChange",4,"nzSpaceItem"],["class","modal-footer-buttons",4,"nzSpaceItem"],["nz-typography","",4,"nzSpaceItem"],["nz-input","","rows","4","placeholder","Please provide a reason for reverting.",3,"ngModelChange","ngModel"],[1,"modal-footer-buttons"],["nzType","primary","nz-button","","nz-tooltip","",3,"click","disabled","nzTooltipTrigger","nzTooltipTitle"],["nz-button","",3,"click"]],template:function(o,s){if(1&o){const _=t.RV6();t.j41(0,"button",2),t.bIt("click",function(){return t.eBV(_),t.Njj(s.showConfirm=!0)}),t.nrm(1,"i",3),t.k0s(),t.j41(2,"nz-modal",4),t.mxI("nzVisibleChange",function(F){return t.eBV(_),t.DH7(s.showConfirm,F)||(s.showConfirm=F),t.Njj(F)}),t.bIt("nzOnCancel",function(){return t.eBV(_),t.Njj(s.handleConfirmModalCancel())}),t.DNE(3,L,2,1,"ng-template",null,0,t.C5r),t.k0s(),t.DNE(5,K,6,2,"ng-template",null,1,t.C5r)}if(2&o){const _=t.sdS(4),M=t.sdS(6);t.Y8G("nzLoading",s.isSubmitting),t.R7$(2),t.R50("nzVisible",s.showConfirm),t.Y8G("nzContent",M)("nzTitle",_)("nzFooter",null)}},dependencies:[p.me,p.BC,p.vS,z.aO,C.c,B.p,O.Dn,y.LH,x.F2,G.Sy,f.a,U.U5,U.Dq],styles:["[_nghost-%COMP%]{display:block}.modal-footer-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]})}};I=(0,v.Cg)([(0,l.d)()],I)},90959:(S,T,e)=>{e.d(T,{j:()=>l});var v=e(54438),t=e(83100),n=e(3245),d=e(24247);let l=(()=>{class E{constructor(){this.enablePopover=!0,this.truncateLongName=!1,this.linked=!0}ngOnInit(){if(void 0===this.variant)throw new Error("cvc-feature-variant-tag requires LinkableVariant input, none supplied.");if(this.variant.feature&&(this.feature=this.variant.feature),void 0===this.feature)throw new Error("cvc-feature-variant-tag requires a Feature, either as an input or on the Variant")}static{this.\u0275fac=function(u){return new(u||E)}}static{this.\u0275cmp=v.VBU({type:E,selectors:[["cvc-feature-variant-tag"]],inputs:{variant:"variant",feature:"feature",enablePopover:"enablePopover",truncateLongName:"truncateLongName",linked:"linked"},standalone:!1,decls:3,vars:8,consts:[[3,"feature","enablePopover","linked","truncateLongName"],[3,"variant","enablePopover","linked","truncateLongName"]],template:function(u,p){1&u&&(v.j41(0,"cvc-tag-group"),v.nrm(1,"cvc-feature-tag",0)(2,"cvc-variant-tag",1),v.k0s()),2&u&&(v.R7$(),v.Y8G("feature",p.feature)("enablePopover",p.enablePopover)("linked",p.linked)("truncateLongName",p.truncateLongName),v.R7$(),v.Y8G("variant",p.variant)("enablePopover",p.enablePopover)("linked",p.linked)("truncateLongName",p.truncateLongName))},dependencies:[t.V,n._,d.L],styles:["[_nghost-%COMP%]     nz-tag.rejected, [_nghost-%COMP%]     nz-tag.submitted, [_nghost-%COMP%]     nz-tag.accepted, [_nghost-%COMP%]     nz-tag.deprecated{border-right-width:2px}[_nghost-%COMP%]     nz-tag.rejected, [_nghost-%COMP%]     nz-tag.deprecated{border-color:#e6e6e6;background-color:#fff;color:#999999d9}[_nghost-%COMP%]     nz-tag.submitted{border-color:#ffe58f}[_nghost-%COMP%]     nz-tag.accepted{border-color:#b7eb8f}[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}}return E})()}}]);