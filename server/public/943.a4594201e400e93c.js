"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[943],{9460:(E,x,n)=>{n.d(x,{i:()=>s});var _=n(6895),h=n(9116),g=n(6672),u=n(6581),d=n(1102),v=n(1698),f=n(9444),T=n(48),S=n(6429),C=n(4650);class s{}s.\u0275fac=function(m){return new(m||s)},s.\u0275mod=C.oAB({type:s}),s.\u0275inj=C.cJS({imports:[_.ez,h.Bz,T.mS,g.X,u.$6,d.PV,v.f,f.s,S.C]})},9476:(E,x,n)=>{n.d(x,{L:()=>p});var _=n(6895),h=n(9116),g=n(6672),u=n(1102),d=n(3679),v=n(4989),f=n(9194),T=n(1971),S=n(2635),C=n(5473),s=n(4650);class i{}i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[_.ez,S._N,S.pP,T.vh,d.Jb,f.q6,v.X,C.H]});var m=n(6581);class p{}p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=s.oAB({type:p}),p.\u0275inj=s.cJS({imports:[_.ez,h.Bz,g.X,u.PV,m.$6,i]})},7946:(E,x,n)=>{n.d(x,{x:()=>i});var _=n(6895),h=n(897),g=n(6672),u=n(6581),d=n(8845),v=n(9476),f=n(1229),T=n(7043),S=n(701),C=n(8645),s=n(4650);class i{}i.\u0275fac=function(p){return new(p||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[_.ez,g.X,u.$6,h.$,S.N,d.Q,v.L,f.U,T.Q,C.M]})},9814:(E,x,n)=>{n.d(x,{O:()=>X});var _=n(655),h=n(3154),g=n(7630),u=n(9933),d=n(1135),v=n(7579),f=n(3240),T=n(4004),S=n(1884),C=n(2529),s=n(5684),i=n(9300),m=n(8372),p=n(1365),z=n(6579),t=n(4650),P=n(9350),M=n(6895),y=n(4006),B=n(9116),N=n(6616),L=n(7044),U=n(1664),F=n(1971),R=n(1102),K=n(6581),J=n(8231),I=n(6675),W=n(6672),Q=n(7570),Z=n(9947),Y=n(3667),H=n(3388),V=n(5851),w=n(7451),j=n(2166),G=n(7491),O=n(783),A=n(2722),D=n(6123),k=n(9169),tt=n(5681),nt=n(9597),et=n(5635),q=n(6903),ot=n(822),at=n(1793),ct=n(8227),rt=n(9180);function st(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"nz-alert",6),t.NdJ("nzOnClose",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.onSuccessBannerClose())}),t.qZA()}}function lt(o,a){if(1&o&&t._UZ(0,"cvc-form-errors-alert",7),2&o){const e=t.oxw();t.Q6J("errors",e.errorMessages)}}function it(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"textarea",8),t.NdJ("ngModelChange",function(c){t.CHM(e);const l=t.oxw();return t.KtG(l.reason=c)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("ngModel",e.reason)}}function gt(o,a){1&o&&t._UZ(0,"nz-option",13)}function ut(o,a){1&o&&t._UZ(0,"nz-option",14)}function pt(o,a){1&o&&t._UZ(0,"nz-option",15)}function dt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"nz-select",9),t.NdJ("ngModelChange",function(c){t.CHM(e);const l=t.oxw();return t.KtG(l.newStatus=c)}),t.YNc(1,gt,1,0,"nz-option",10),t.YNc(2,ut,1,0,"nz-option",11),t.YNc(3,pt,1,0,"nz-option",12),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("ngModel",e.newStatus),t.xp6(1),t.Q6J("ngIf","NEW"==e.currentStatus),t.xp6(1),t.Q6J("ngIf","NEW"!=e.currentStatus),t.xp6(1),t.Q6J("ngIf","NEW"==e.currentStatus)}}function mt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"nz-spin",16)(1,"cvc-form-buttons")(2,"cvc-org-selector-btn-group",17),t.NdJ("selectedOrgChange",function(c){t.CHM(e);const l=t.oxw();return t.KtG(l.mostRecentOrg=c)}),t.TgZ(3,"button",18),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.updateSourceSuggestionStatus())}),t._uU(4," Update Source Suggestion status "),t.qZA()()()()}if(2&o){const e=t.oxw();t.Q6J("nzSpinning",e.loading),t.xp6(2),t.Q6J("selectedOrg",e.mostRecentOrg),t.xp6(1),t.Q6J("disabled",e.loading)}}class ${constructor(a,e,r){this.viewerService=a,this.networkErrorService=e,this.updateSuggestionStatusGql=r,this.commentAddedEvent=new t.vpe,this.destroy$=new v.x,this.success=!1,this.errorMessages=[],this.loading=!1,this.viewerService.viewer$.pipe((0,A.R)(this.destroy$)).subscribe(c=>{this.organizations=c.organizations,this.mostRecentOrg=c.mostRecentOrg}),this.sourceSuggestionStatusMutator=new D.U(e)}selectOrg(a){this.mostRecentOrg=a}updateSourceSuggestionStatus(){if(this.newStatus){let a=this.sourceSuggestionStatusMutator.mutate(this.updateSuggestionStatusGql,{input:{id:this.sourceSuggestionId,newStatus:this.newStatus,reason:this.reason,organizationId:this.mostRecentOrg?.id}});a.submitSuccess$.pipe((0,A.R)(this.destroy$)).subscribe(e=>{this.resetForm(),this.success=!0}),a.submitError$.pipe((0,A.R)(this.destroy$)).subscribe(e=>{e&&(this.errorMessages=e)}),a.isSubmitting$.pipe((0,A.R)(this.destroy$)).subscribe(e=>{this.loading=e})}}resetForm(){this.commentText=""}onSuccessBannerClose(){this.resetForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}$.\u0275fac=function(a){return new(a||$)(t.Y36(P.a),t.Y36(k.Y),t.Y36(g.wRZ))},$.\u0275cmp=t.Xpm({type:$,selectors:[["cvc-update-source-suggestion-form"]],inputs:{sourceSuggestionId:"sourceSuggestionId",currentStatus:"currentStatus"},outputs:{commentAddedEvent:"commentAddedEvent"},decls:7,vars:2,consts:[["nzDirection","vertical"],["nzBanner","","nzMessage","Status Updated","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],[3,"errors",4,"ngIf"],["rows","4","nz-input","",3,"ngModel","ngModelChange",4,"nzSpaceItem"],["nzPlaceHolder","New Status","required","true",3,"ngModel","ngModelChange",4,"nzSpaceItem"],["nzTip","Submitting",3,"nzSpinning",4,"nzSpaceItem"],["nzBanner","","nzMessage","Status Updated","nzType","success","nzCloseable","",3,"nzOnClose"],[3,"errors"],["rows","4","nz-input","",3,"ngModel","ngModelChange"],["nzPlaceHolder","New Status","required","true",3,"ngModel","ngModelChange"],["nzValue","CURATED","nzLabel","Curated",4,"ngIf"],["nzValue","NEW","nzLabel","New",4,"ngIf"],["nzValue","REJECTED","nzLabel","Rejected",4,"ngIf"],["nzValue","CURATED","nzLabel","Curated"],["nzValue","NEW","nzLabel","New"],["nzValue","REJECTED","nzLabel","Rejected"],["nzTip","Submitting",3,"nzSpinning"],[3,"selectedOrg","selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled","click"]],template:function(a,e){1&a&&(t.TgZ(0,"nz-card")(1,"nz-space",0),t.YNc(2,st,1,0,"nz-alert",1),t.YNc(3,lt,1,1,"cvc-form-errors-alert",2),t.YNc(4,it,1,1,"textarea",3),t.YNc(5,dt,4,4,"nz-select",4),t.YNc(6,mt,5,3,"nz-spin",5),t.qZA()()),2&a&&(t.xp6(2),t.Q6J("ngIf",e.success),t.xp6(1),t.Q6J("ngIf",e.errorMessages.length))},dependencies:[M.O5,y.Fj,y.JJ,y.Q7,N.ix,L.w,U.dQ,F.bd,tt.W,nt.r,et.Zp,J.Ip,J.Vq,q.NU,q.$1,y.On,ot.V,at.m,ct.q,rt.Z],encapsulation:2});var b,_t=n(125),vt=n(5105),Ct=n(2635),zt=n(160);function ht(o,a){}function Tt(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"nz-card",6),t.YNc(2,ht,0,0,"ng-template",7),t.qZA(),t.BQk()),2&o){t.oxw();const e=t.MAs(8),r=t.MAs(10),c=t.MAs(4);t.xp6(1),t.Q6J("nzTitle",e)("nzExtra",r),t.xp6(1),t.Q6J("ngTemplateOutlet",c)}}function St(o,a){}const ft=function(o){return{height:o}};function xt(o,a){if(1&o&&(t.TgZ(0,"div",8)(1,"nz-card",9),t.YNc(2,St,0,0,"ng-template",7),t.qZA()()),2&o){const e=t.oxw(),r=t.MAs(8),c=t.MAs(10),l=t.MAs(4);t.Q6J("ngStyle",t.VKq(4,ft,e.cvcHeight)),t.xp6(1),t.Q6J("nzTitle",r)("nzExtra",c),t.xp6(1),t.Q6J("ngTemplateOutlet",l)}}function Mt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"cvc-clearable-input-filter",29),t.NdJ("inputModelChange",function(c){t.CHM(e);const l=t.oxw(2);return t.KtG(l.submitterInput=c)})("inputModelChange",function(){t.CHM(e);const c=t.oxw(2);return t.KtG(c.filterChange$.next())}),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("inputModel",e.submitterInput)}}function It(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"nz-tag",51),t._uU(2),t.ALo(3,"lowercase"),t.qZA(),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,e.status)," ")}}function Pt(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"nz-tag",52),t._uU(2),t.ALo(3,"lowercase"),t.qZA(),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,e.status)," ")}}function yt(o,a){if(1&o&&t._UZ(0,"i",55),2&o){const e=t.oxw(2).$implicit,r=t.oxw(2);t.Q6J("nzTooltipTitle",r.isScrolling?"":e.reason)}}function Zt(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"nz-tag",53),t.YNc(2,yt,1,1,"i",54),t._uU(3),t.ALo(4,"lowercase"),t.qZA(),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",e.reason&&""!=e.reason),t.xp6(1),t.hij(" ",t.lcZ(4,2,e.status)," ")}}function Ot(o,a){if(1&o&&t._UZ(0,"cvc-source-tag",56),2&o){const e=t.oxw().$implicit;t.Q6J("source",e.source)}}function At(o,a){if(1&o&&t._UZ(0,"cvc-user-tag",57),2&o){const e=t.oxw().$implicit;t.Q6J("user",e.user)}}function Et(o,a){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.source.displayType," ")}}function Ut(o,a){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.source.citationId," ")}}function Jt(o,a){if(1&o&&t._UZ(0,"cvc-molecular-profile-tag",58),2&o){const e=t.oxw().$implicit;t.Q6J("molecularProfile",e.molecularProfile)}}function Nt(o,a){if(1&o&&t._UZ(0,"cvc-disease-tag",59),2&o){const e=t.oxw().$implicit;t.Q6J("disease",e.disease)("truncateLongName",!0)}}const Qt=function(o,a,e){return{molecularProfileId:o,sourceId:a,diseaseId:e}};function bt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"nz-button-group")(1,"button",60),t._UZ(2,"i",61),t.qZA(),t.TgZ(3,"button",62),t.NdJ("click",function(){t.CHM(e);const c=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.setFormInputs(c.id,c.status))}),t._UZ(4,"i",63),t.qZA()()}if(2&o){const e=t.oxw().$implicit,r=t.oxw(2),c=t.MAs(6);t.xp6(1),t.Q6J("queryParams",t.kEZ(7,Qt,null==e.molecularProfile?null:e.molecularProfile.id,null==e.source?null:e.source.id,null==e.disease?null:e.disease.id))("disabled",e.status!=r.status.New)("nzTooltipTitle",r.isScrolling?"":"Create Evidence with this Source")("nzTooltipMouseEnterDelay",1),t.xp6(2),t.Q6J("nzTooltipTitle",r.isScrolling?"":"Manage Source Suggestion")("nzTooltipMouseEnterDelay",1)("nzPopoverContent",c)}}function Dt(o,a){1&o&&(t.ynx(0),t._uU(1," -- "),t.BQk())}function $t(o,a){if(1&o&&(t.TgZ(0,"tr",39)(1,"td",40),t.ynx(2,41),t.ALo(3,"lowercase"),t.YNc(4,It,4,3,"ng-container",42),t.YNc(5,Pt,4,3,"ng-container",42),t.YNc(6,Zt,5,4,"ng-container",42),t.BQk(),t.qZA(),t.TgZ(7,"td",24),t.YNc(8,Ot,1,1,"cvc-source-tag",43),t.qZA(),t.TgZ(9,"td",44),t._UZ(10,"i",17),t.ALo(11,"entityColor"),t.qZA(),t.TgZ(12,"td"),t.YNc(13,At,1,1,"cvc-user-tag",45),t.qZA(),t.TgZ(14,"td"),t.YNc(15,Et,2,1,"ng-container",46),t.qZA(),t.TgZ(16,"td"),t.YNc(17,Ut,2,1,"ng-container",46),t.qZA(),t.TgZ(18,"td"),t.YNc(19,Jt,1,1,"cvc-molecular-profile-tag",47),t.qZA(),t.TgZ(20,"td"),t.YNc(21,Nt,1,2,"cvc-disease-tag",48),t.qZA(),t.TgZ(22,"td",49),t._uU(23),t.ALo(24,"date"),t.qZA(),t.TgZ(25,"td",50),t.YNc(26,bt,5,11,"nz-button-group",46),t.YNc(27,Dt,2,0,"ng-container",46),t.qZA()()),2&o){const e=a.$implicit,r=t.oxw(2);t.xp6(2),t.Q6J("ngSwitch",t.lcZ(3,15,e.status)),t.xp6(2),t.Q6J("ngSwitchCase","curated"),t.xp6(1),t.Q6J("ngSwitchCase","new"),t.xp6(1),t.Q6J("ngSwitchCase","rejected"),t.xp6(2),t.Q6J("ngIf",e.source),t.xp6(1),t.Q6J("nzTooltipTitle",r.isScrolling?"":e.initialComment),t.xp6(1),t.Q6J("nzTwotoneColor",t.lcZ(11,17,"Comment")),t.xp6(3),t.Q6J("ngIf",e.user),t.xp6(2),t.Q6J("ngIf",e.source),t.xp6(2),t.Q6J("ngIf",e.source),t.xp6(2),t.Q6J("ngIf",e.molecularProfile),t.xp6(2),t.Q6J("ngIf",e.disease),t.xp6(2),t.hij(" ",t.lcZ(24,19,e.createdAt)," "),t.xp6(3),t.Q6J("ngIf",r.isSignedIn),t.xp6(1),t.Q6J("ngIf",!r.isSignedIn)}}const Lt=function(){return[]},Ft=function(){return{x:"680px",y:"800px"}},Bt=function(){return["descend","ascend",null]};function Rt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"nz-table",10,11),t.NdJ("cvcTableScrollOnScroll",function(c){t.CHM(e);const l=t.oxw();return t.KtG(l.scrollEvent$.next(c))}),t.ALo(2,"ngrxPush"),t.ALo(3,"ngrxPush"),t.ALo(4,"ngrxPush"),t.ALo(5,"ngrxPush"),t.TgZ(6,"thead",12),t.NdJ("nzSortOrderChange",function(c){t.CHM(e);const l=t.oxw();return t.KtG(l.sortChange$.next(c))}),t.TgZ(7,"tr",13)(8,"th",14),t._uU(9," Status "),t.qZA(),t.TgZ(10,"th",15),t._uU(11," Citation "),t.qZA(),t.TgZ(12,"th",16),t._UZ(13,"i",17),t.ALo(14,"entityColor"),t.qZA(),t.TgZ(15,"th",18),t._uU(16," Submitter "),t.qZA(),t.TgZ(17,"th",19),t._uU(18," Type "),t.qZA(),t.TgZ(19,"th",19),t._uU(20," ID "),t.qZA(),t.TgZ(21,"th",20),t._uU(22,"Molecular Profile"),t.qZA(),t.TgZ(23,"th",18),t._uU(24," Disease "),t.qZA(),t.TgZ(25,"th",21),t._uU(26," Submitted "),t.qZA(),t.TgZ(27,"th",22),t._uU(28," Actions "),t.qZA()(),t.TgZ(29,"tr",23)(30,"th",24)(31,"nz-select",25),t.NdJ("ngModelChange",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.filterChange$.next())})("ngModelChange",function(c){t.CHM(e);const l=t.oxw();return t.KtG(l.statusInput=c)}),t._UZ(32,"nz-option",26)(33,"nz-option",27)(34,"nz-option",28),t.qZA()(),t.TgZ(35,"th",24)(36,"cvc-clearable-input-filter",29),t.NdJ("inputModelChange",function(c){t.CHM(e);const l=t.oxw();return t.KtG(l.citationInput=c)})("inputModelChange",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.filterChange$.next())}),t.qZA()(),t._UZ(37,"th"),t.TgZ(38,"th"),t.YNc(39,Mt,1,1,"cvc-clearable-input-filter",30),t.qZA(),t.TgZ(40,"th")(41,"nz-select",31),t.NdJ("ngModelChange",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.filterChange$.next())})("ngModelChange",function(c){t.CHM(e);const l=t.oxw();return t.KtG(l.sourceTypeInput=c)}),t._UZ(42,"nz-option",32)(43,"nz-option",33),t.qZA()(),t.TgZ(44,"th")(45,"cvc-clearable-input-filter",34),t.NdJ("inputModelChange",function(c){t.CHM(e);const l=t.oxw();return t.KtG(l.citationIdInput=c)})("inputModelChange",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.filterChange$.next())}),t.qZA()(),t.TgZ(46,"th")(47,"cvc-clearable-input-filter",35),t.NdJ("inputModelChange",function(c){t.CHM(e);const l=t.oxw();return t.KtG(l.molecularProfileNameInput=c)})("inputModelChange",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.filterChange$.next())}),t.qZA()(),t.TgZ(48,"th")(49,"cvc-clearable-input-filter",36),t.NdJ("inputModelChange",function(c){t.CHM(e);const l=t.oxw();return t.KtG(l.diseaseNameInput=c)})("inputModelChange",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.filterChange$.next())}),t.qZA()(),t._UZ(50,"th")(51,"th",37),t.qZA()(),t.TgZ(52,"tbody"),t.YNc(53,$t,28,21,"ng-template",38),t.qZA()()}if(2&o){const e=t.oxw();t.Q6J("nzData",t.lcZ(2,33,e.row$)||t.DdM(43,Lt))("nzLoading",!t.lcZ(3,35,e.row$))("cvcAutoHeightTable",25)("nzVirtualItemSize",29)("cvcTableScrollQueryRef",e.queryRef)("cvcTableScrollPageInfo",t.lcZ(4,37,e.pageInfo$))("cvcTableScrollToIndex",t.lcZ(5,39,e.scrollIndex$))("nzVirtualForTrackBy",e.trackByIndex)("nzScroll",t.DdM(44,Ft))("nzFrontPagination",!1)("nzShowPagination",!1),t.xp6(10),t.Q6J("nzColumnKey",e.sortColumns.Citation)("nzSortFn",!0),t.xp6(3),t.Q6J("nzTwotoneColor",t.lcZ(14,41,"Comment")),t.xp6(2),t.Q6J("nzColumnKey",e.sortColumns.Submitter)("nzSortFn",!0),t.xp6(2),t.Q6J("nzColumnKey",e.sortColumns.SourceType)("nzSortFn",!0),t.xp6(2),t.Q6J("nzColumnKey",e.sortColumns.CitationId)("nzSortFn",!0),t.xp6(4),t.Q6J("nzColumnKey",e.sortColumns.DiseaseName)("nzSortFn",!0),t.xp6(2),t.Q6J("nzColumnKey",e.sortColumns.CreatedAt)("nzSortDirections",t.DdM(45,Bt))("nzSortFn",!0),t.xp6(6),t.Q6J("nzDropdownMatchSelectWidth",!1)("ngModel",e.statusInput),t.xp6(5),t.Q6J("inputModel",e.citationInput),t.xp6(3),t.Q6J("ngIf",!e.submitterId),t.xp6(2),t.Q6J("ngModel",e.sourceTypeInput),t.xp6(4),t.Q6J("inputModel",e.citationIdInput),t.xp6(2),t.Q6J("inputModel",e.molecularProfileNameInput),t.xp6(2),t.Q6J("inputModel",e.diseaseNameInput)}}function Kt(o,a){if(1&o&&t._UZ(0,"cvc-update-source-suggestion-form",65),2&o){const e=t.oxw(2);t.Q6J("currentStatus",e.selectedStatus)("sourceSuggestionId",e.selectedSourceId)}}function Wt(o,a){if(1&o&&t.YNc(0,Kt,1,2,"cvc-update-source-suggestion-form",64),2&o){const e=t.oxw();t.Q6J("ngIf",e.selectedSourceId&&e.selectedStatus)}}function Yt(o,a){}function Ht(o,a){if(1&o&&(t.ynx(0),t.YNc(1,Yt,0,0,"ng-template",7),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngTemplateOutlet",e.cvcTitleTemplate)}}function Vt(o,a){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.cvcTitle," ")}}function wt(o,a){if(1&o&&(t._UZ(0,"i",66),t.ALo(1,"entityColor"),t.YNc(2,Ht,2,1,"ng-container",46),t.YNc(3,Vt,2,1,"ng-container",46),t.TgZ(4,"span",67),t._UZ(5,"cvc-table-counts",68),t.qZA()),2&o){const e=t.oxw();t.Q6J("nzTwotoneColor",t.lcZ(1,4,"Source")),t.xp6(2),t.Q6J("ngIf",e.cvcTitleTemplate),t.xp6(1),t.Q6J("ngIf",e.cvcTitle),t.xp6(2),t.Q6J("cvcTableCountsConnection",e.connection$)}}function jt(o,a){1&o&&(t.TgZ(0,"nz-tag",71),t._UZ(1,"i",72),t.TgZ(2,"span"),t._uU(3,"Loading\u2026"),t.qZA()())}function Gt(o,a){if(1&o&&(t.YNc(0,jt,4,0,"nz-tag",69),t.ALo(1,"ngrxPush"),t._UZ(2,"cvc-no-more-rows",70),t.ALo(3,"ngrxPush")),2&o){const e=t.oxw();t.Q6J("ngIf",t.lcZ(1,2,e.moreLoading$)),t.xp6(2),t.Q6J("cvcShowTag",t.lcZ(3,4,e.noMoreRows$))}}let X=((b=class{set initialUserFilters(a){a&&Object.assign(this,a)}constructor(a,e,r){this.gql=a,this.viewerService=e,this.cdr=r,this.initialPageSize=35,this.isScrolling=!1,this.statusInput=g.F3s.New,this.sortColumns=g.jw9,this.status=g.F3s,this.showManageForm=!1,this.noMoreRows$=new d.X(!1),this.scrollEvent$=new d.X("stop"),this.sortChange$=new v.x,this.filterChange$=new v.x,this.scrollIndex$=new v.x,this.viewerService.viewer$.pipe((0,T.U)(c=>c.signedIn),(0,u.t)(this)).subscribe(c=>this.isSignedIn=c)}ngOnInit(){this.queryRef=this.gql.watch({first:this.initialPageSize,sourceId:this.sourceId,submitterId:this.submitterId,status:this.status.New,sortBy:{column:this.sortColumns.CreatedAt,direction:g.SrV.Desc}}),this.result$=this.queryRef.valueChanges,this.initialLoading$=this.result$.pipe((0,z.j)("loading"),(0,S.x)(),(0,C.o)(a=>!1!==a,!0)),this.moreLoading$=this.result$.pipe((0,z.j)("loading"),(0,S.x)(),(0,s.T)(2)),this.connection$=this.result$.pipe((0,z.j)("data","sourceSuggestions"),(0,i.h)(f.ep)),this.row$=this.connection$.pipe((0,z.j)("edges"),(0,i.h)(f.ep),(0,T.U)(a=>a.map(e=>e.node))),this.pageInfo$=this.connection$.pipe((0,z.j)("pageInfo"),(0,i.h)(f.ep)),this.sortChange$.pipe((0,u.t)(this)).subscribe(a=>{this.queryRef.refetch({sortBy:(0,h._)(a)})}),this.filterChange$.pipe((0,m.b)(500),(0,u.t)(this)).subscribe(()=>{this.refresh()}),this.scrollEvent$.pipe((0,T.U)(a=>"stop"!==a),(0,S.x)(),(0,u.t)(this)).subscribe(a=>{this.isScrolling=a,this.cdr.detectChanges()}),this.scrollEvent$.pipe((0,i.h)(a=>"bottom"===a),(0,p.M)(this.pageInfo$),(0,T.U)(([a,e])=>e),(0,u.t)(this)).subscribe(a=>{a.hasNextPage||(this.noMoreRows$.next(!0),this.cdr.detectChanges(),setInterval(()=>this.noMoreRows$.next(!1)))})}refresh(){this.queryRef.refetch({citationId:this.citationIdInput?+this.citationIdInput:void 0,sourceType:this.sourceTypeInput?this.sourceTypeInput:void 0,sourceId:this.sourceIdInput?+this.sourceIdInput:void 0,molecularProfileName:this.molecularProfileNameInput,diseaseName:this.diseaseNameInput,comment:this.commentInput,submitter:this.submitterInput,citation:this.citationInput,status:this.statusInput?this.statusInput:void 0}).then(()=>this.scrollIndex$.next(0)),this.cdr.detectChanges()}setFormInputs(a,e){this.selectedSourceId=a,this.selectedStatus=e,this.showManageForm=!0}closePopover(){this.showManageForm=!1}trackByIndex(a,e){return e?.id}}).\u0275fac=function(a){return new(a||b)(t.Y36(g.WRV),t.Y36(P.a),t.Y36(t.sBO))},b.\u0275cmp=t.Xpm({type:b,selectors:[["cvc-source-suggestions-table"]],inputs:{cvcHeight:"cvcHeight",sourceId:"sourceId",submitterId:"submitterId",cvcTitleTemplate:"cvcTitleTemplate",cvcTitle:"cvcTitle",initialPageSize:"initialPageSize",initialUserFilters:"initialUserFilters"},decls:11,vars:2,consts:[[4,"ngIf","ngIfElse"],["setHeightCard",""],["table",""],["manageSuggestionTemplate",""],["titleTemplate",""],["extraTemplate",""],["nzSize","small","cvcAutoHeightCard","","cvcAutoHeightTarget","viewport",3,"nzTitle","nzExtra"],[3,"ngTemplateOutlet"],[1,"card-container",3,"ngStyle"],["cvcAutoHeightCard","","nzSize","small",3,"nzTitle","nzExtra"],["nzSize","small","cvcTableScroll","",3,"nzData","nzLoading","cvcAutoHeightTable","nzVirtualItemSize","cvcTableScrollQueryRef","cvcTableScrollPageInfo","cvcTableScrollToIndex","nzVirtualForTrackBy","nzScroll","nzFrontPagination","nzShowPagination","cvcTableScrollOnScroll"],["virtualTable",""],[3,"nzSortOrderChange"],[1,"col-header-row"],["nzWidth","100px","nzLeft",""],["nzWidth","425px","nzLeft","",3,"nzColumnKey","nzSortFn"],["nzWidth","24px","nzAlign","center","nz-tooltip","","nzTooltipTitle","Submitter Comment"],["nz-icon","","nzTheme","twotone","nzType","civic-comment",3,"nzTwotoneColor"],["nzWidth","200px",3,"nzColumnKey","nzSortFn"],["nzWidth","80px",3,"nzColumnKey","nzSortFn"],["nzWidth","290px"],["nzWidth","90px","nzSortOrder","descend",3,"nzColumnKey","nzSortDirections","nzSortFn"],["nzWidth","70px","nzRight","","nzAlign","center"],[1,"filter-row"],["nzLeft",""],["nzAllowClear","","nzSize","small","nzPlaceHolder","Any",3,"nzDropdownMatchSelectWidth","ngModel","ngModelChange"],["nzValue","NEW","nzLabel","new"],["nzValue","CURATED","nzLabel","curated"],["nzValue","REJECTED","nzLabel","rejected"],[3,"inputModel","inputModelChange"],[3,"inputModel","inputModelChange",4,"ngIf"],["nzAllowClear","","nzSize","small","nzPlaceHolder","Any",3,"ngModel","ngModelChange"],["nzValue","PUBMED","nzLabel","PubMed"],["nzValue","ASCO","nzLabel","ASCO"],["placeholderText","ID",3,"inputModel","inputModelChange"],["placeholderText","Molecular Profile",3,"inputModel","inputModelChange"],["placeholderText","Disease",3,"inputModel","inputModelChange"],["nzRight",""],["nz-virtual-scroll",""],[1,"data-row"],["nzLeft","","nzAlign","center"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"source",4,"ngIf"],["nzAlign","center","nz-tooltip","","nzTooltipPlacement","top",3,"nzTooltipTitle"],[3,"user",4,"ngIf"],[4,"ngIf"],[3,"molecularProfile",4,"ngIf"],[3,"disease","truncateLongName",4,"ngIf"],["nzAlign","right"],["nzRight","","nzAlign","center",1,"button-cell"],["nzColor","green",1,"status-tag"],["nzColor","orange",1,"status-tag"],["nzColor","volcano",1,"status-tag"],["nz-icon","","nz-tooltip","","nzType","civic-comment",3,"nzTooltipTitle",4,"ngIf"],["nz-icon","","nz-tooltip","","nzType","civic-comment",3,"nzTooltipTitle"],[3,"source"],[3,"user"],[3,"molecularProfile"],[3,"disease","truncateLongName"],["routerLink","/evidence/add/submit","nz-button","","nzSize","small","nz-tooltip","",3,"queryParams","disabled","nzTooltipTitle","nzTooltipMouseEnterDelay"],["nz-icon","","nzType","civic-evidence"],["nz-button","","nzSize","small","nz-popover","","nzPopoverTitle","Manage Source Suggestion","nzPopoverPlacement","left","nzPopoverTrigger","click","nz-tooltip","","nzTooltipPlacement","top",3,"nzTooltipTitle","nzTooltipMouseEnterDelay","nzPopoverContent","click"],["nz-icon","","nzType","civic-source"],[3,"currentStatus","sourceSuggestionId",4,"ngIf"],[3,"currentStatus","sourceSuggestionId"],["nz-icon","","nzTheme","twotone","nzType","civic-source",3,"nzTwotoneColor"],[1,"table-info"],[3,"cvcTableCountsConnection"],["nzColor","processing",4,"ngIf"],[3,"cvcShowTag"],["nzColor","processing"],["nz-icon","","nzType","sync","nzSpin",""]],template:function(a,e){if(1&a&&(t.YNc(0,Tt,3,3,"ng-container",0),t.YNc(1,xt,3,6,"ng-template",null,1,t.W1O),t.YNc(3,Rt,54,46,"ng-template",null,2,t.W1O),t.YNc(5,Wt,1,1,"ng-template",null,3,t.W1O),t.YNc(7,wt,6,6,"ng-template",null,4,t.W1O),t.YNc(9,Gt,4,6,"ng-template",null,5,t.W1O)),2&a){const r=t.MAs(2);t.Q6J("ngIf",!e.cvcHeight)("ngIfElse",r)}},dependencies:[M.O5,M.tP,M.PC,M.RF,M.n9,y.JJ,y.On,B.rH,N.ix,N.fY,L.w,U.dQ,F.bd,R.Ls,K.lU,J.Ip,J.Vq,I.N8,I.qD,I.Uo,I._C,I.Om,I.p0,I.$Z,I.zu,I.qn,I.UX,W.j,Q.SY,Z.y,Y.B,H.H,V.D,w.q,j.p,G.n,O.T,$,_t.I,vt.p,M.i8,M.uU,Ct.fM,zt.a],styles:["[_nghost-%COMP%]{display:block}nz-card[_ngcontent-%COMP%]:first-of-type     .ant-card-body{padding:0;margin-top:1px}.table-info[_ngcontent-%COMP%]{margin-left:.5rem}tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]{white-space:nowrap}tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell.align-right[_ngcontent-%COMP%]     .ant-table-column-title{text-align:right}tr.filter-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]{padding:3px 4px}tr.filter-row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   nz-filter-trigger[_ngcontent-%COMP%]     span.ant-dropdown-trigger{margin-left:0;padding-right:12px}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]{white-space:nowrap}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]   .anticon.attribute-icon[_ngcontent-%COMP%]{color:#595959}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell.overflow-ellipsis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell.button-cell[_ngcontent-%COMP%]{padding:0}tr.data-row[_ngcontent-%COMP%]   td.align-right[_ngcontent-%COMP%], tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%], tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%], tr.filter-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%]{text-align:right}.status-tag[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),b);X=(0,_.gn)([(0,u.c)()],X)},2832:(E,x,n)=>{n.d(x,{W:()=>O});var _=n(6895),h=n(4006),g=n(9116),u=n(8845),d=n(4126),v=n(4125),f=n(2994),T=n(8525),S=n(2811),C=n(7345),s=n(9444),i=n(3111),m=n(1433),p=n(9240),z=n(7008),t=n(6212),P=n(1971),M=n(6704),y=n(1825),B=n(4375),N=n(6616),L=n(3513),U=n(2635),F=n(5681),R=n(9597),K=n(5635),J=n(8231),I=n(4509),W=n(6903),Q=n(4650);class Z{}Z.\u0275fac=function(D){return new(D||Z)},Z.\u0275mod=Q.oAB({type:Z}),Z.\u0275inj=Q.cJS({imports:[_.ez,h.UX,U._N,U.pP,N.sL,P.vh,L.we,M.U5,F.j,R.L,K.o7,J.LV,W.zf,h.u5,t.X0,z.B,y.A,B.R,I.w]});var Y=n(1102),H=n(6581),V=n(6675),w=n(6672),j=n(7570),G=n(8823);class O{}O.\u0275fac=function(D){return new(D||O)},O.\u0275mod=Q.oAB({type:O}),O.\u0275inj=Q.cJS({imports:[_.ez,h.u5,U._N,U.pP,g.Bz,N.sL,P.vh,Y.PV,H.$6,J.LV,V.HQ,w.X,j.cg,G.ZJ,p.w,T.T,f.y,i.n,m.c,v.k,u.Q,z.B,s.s,S.s,Z,C.W,d.u]})},7677:(E,x,n)=>{n.d(x,{G:()=>t});var _=n(6895),h=n(9116),g=n(6581),u=n(6672),d=n(1102),v=n(897),f=n(2811),T=n(7043),S=n(9444),C=n(2635),s=n(1971),i=n(9194),m=n(4650);class p{}p.\u0275fac=function(M){return new(M||p)},p.\u0275mod=m.oAB({type:p}),p.\u0275inj=m.cJS({imports:[_.ez,C._N,C.pP,s.vh,i.q6,d.PV,f.s,T.Q,v.$,S.s]});var z=n(6429);class t{}t.\u0275fac=function(M){return new(M||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[_.ez,h.Bz,g.$6,u.X,d.PV,p,S.s,z.C]})},8645:(E,x,n)=>{n.d(x,{M:()=>m});var _=n(6895),h=n(9116),g=n(6672),u=n(1971),d=n(4989),v=n(9194),f=n(2635),T=n(1102),S=n(9444),C=n(4650);class s{}s.\u0275fac=function(z){return new(z||s)},s.\u0275mod=C.oAB({type:s}),s.\u0275inj=C.cJS({imports:[_.ez,f._N,f.pP,T.PV,u.vh,v.q6,S.s,d.X]});var i=n(6581);class m{}m.\u0275fac=function(z){return new(z||m)},m.\u0275mod=C.oAB({type:m}),m.\u0275inj=C.cJS({imports:[_.ez,h.Bz,T.PV,g.X,i.$6,s]})},4475:(E,x,n)=>{n.d(x,{F:()=>g});var h=n(4650);class g{transform(d,v="display-string"){return void 0===d?"":"display-string"===v?function _(u){switch(u){case"COMBINATION":return"Combination";case"SEQUENTIAL":return"Sequential";case"SUBSTITUTES":return"Substitutes";default:return u}}(d):`civic-${d.replace(/_/g,"").toLowerCase()}`}}g.\u0275fac=function(d){return new(d||g)},g.\u0275pipe=h.Yjl({name:"therapyInteractionEnumDisplay",type:g,pure:!0})}}]);