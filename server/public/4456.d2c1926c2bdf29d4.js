"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[4456],{4456:(Ut,v,n)=>{n.r(v),n.d(v,{AssertionAddModule:()=>Ft});var m=n(9808),c=n(325),t=n(5e3),T=n(8992),p=n(1945),A=n(647);let Z=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["cvc-assertion-add"]],decls:10,vars:0,consts:[["displayName","New"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzType","civic:assertion"],[1,"content"]],template:function(o,r){1&o&&(t._UZ(0,"cvc-section-navigation",0),t.TgZ(1,"nz-page-header",1),t.TgZ(2,"nz-page-header-title",2),t._UZ(3,"i",3),t._uU(4," Add New Assertion "),t.qZA(),t.TgZ(5,"nz-page-header-subtitle"),t._uU(6," Submit and review new assertion items "),t.qZA(),t.TgZ(7,"nz-page-header-content"),t.TgZ(8,"div",4),t._UZ(9,"router-outlet"),t.qZA(),t.qZA(),t.qZA())},directives:[T.I,p.$O,p.u9,A.Ls,p.yG,p.u5,c.lC],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),e})();var u=n(4182),z=n(5109),f=n(4546),x=n(2359),b=n(1894),P=n(6042),C=n(7525),S=n(8776),I=n(1825),F=n(7008),U=n(4375),J=n(7695),N=n(3022),G=n(8390),L=n(3773),D=n(5452),Q=n(5743),$=n(5457),V=n(8006),Y=n(7462),R=n(4623),B=n(3594),j=n(3643),E=n(1135),X=n(2789),K=n(5932),W=n(3416),H=n(2480),w=n(1830),k=n(4581),_=n(1605),q=n(5926),tt=n(1270),et=n(3314),nt=n(3759),ot=n(4902),it=n(5486),st=n(464),rt=n(7795),at=n(5472),dt=n(9946),lt=n(9754),mt=n(4889),O=n(7484),h=n(8144),M=n(3618);let ct=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,c.Bz,u.UX,z.s,f.U5,x.L,b.Jb,P.sL,C.j,S.X0,I.A,F.B,U.R,J.C,N.e,G.N,L.g,D.C,Q.W,$.$,V.I,Y.o,R.K,B.q,j.q,E.C,X.o,K.A,W.g,H.r,w.S,k.e,_.e,q.J,tt.i,et.p,nt.D,ot.a,it.$,st.N,rt.k,at.r,dt.d,z.s,lt.K,mt.E,h.zf,O.vh,M.ZJ]]}),e})(),pt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,ct]]}),e})();var ut=n(6123),d=n(6738),gt=n(8929),y=n(7625),ft=n(1837),ht=n(712),yt=n(9169),vt=n(822);function At(e,s){1&e&&(t.TgZ(0,"nz-card"),t.TgZ(1,"nz-typography"),t._uU(2," To add an assertion, please complete the following form, provide a short statement supporting its inclusion into the CIViC database, then click the 'Submit Assertion for Inclusion' button. "),t._UZ(3,"br"),t._UZ(4,"br"),t.TgZ(5,"strong"),t._uU(6,"Please ensure that your submission contains no "),t.TgZ(7,"a",3),t._uU(8,"Protected Health Information"),t.qZA(),t._uU(9,", and is your own original work. By contributing to CIViC you agree to release your contributions to the public domain as described by the "),t.TgZ(10,"a",4),t._uU(11,"Creative Commons Public Domain Dedication (CC0 1.0 Universal)"),t.qZA(),t._uU(12,"."),t.qZA(),t.qZA(),t.qZA())}function zt(e,s){1&e&&t.GkF(0)}function xt(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"formly-form",10),t.NdJ("modelChange",function(a){return t.CHM(o),t.oxw(2).formModel=a}),t.qZA()}if(2&e){const o=t.oxw(2);t.Q6J("form",o.formGroup)("fields",o.formFields)("model",o.formModel)("options",o.formOptions)}}function bt(e,s){if(1&e&&(t.TgZ(0,"nz-form-item"),t._UZ(1,"cvc-form-errors-alert",12),t.qZA()),2&e){const o=t.oxw(3);t.xp6(1),t.Q6J("errors",o.errorMessages)}}function Ct(e,s){if(1&e&&(t.TgZ(0,"p"),t._uU(1,"View "),t.TgZ(2,"a",16),t._uU(3,"its details"),t.qZA(),t._uU(4,"."),t.qZA()),2&e){const o=t.oxw(4);t.xp6(2),t.MGl("routerLink","/assertions/",o.newId,"/summary")}}function St(e,s){if(1&e&&(t.ynx(0),t._UZ(1,"nz-alert",13),t.YNc(2,Ct,5,1,"ng-template",14,15,t.W1O),t.BQk()),2&e){const o=t.MAs(3);t.xp6(1),t.Q6J("nzDescription",o)}}function Ot(e,s){if(1&e&&(t.YNc(0,bt,2,1,"nz-form-item",11),t.YNc(1,St,4,1,"ng-container",11)),2&e){const o=t.oxw(2);t.Q6J("ngIf",o.errorMessages.length>0),t.xp6(1),t.Q6J("ngIf",o.success)}}function Mt(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"nz-spin",5),t.TgZ(1,"form",6),t.NdJ("ngSubmit",function(){t.CHM(o);const a=t.oxw();return a.submitAssertion(a.formModel)}),t.YNc(2,zt,1,0,"ng-container",7),t.YNc(3,xt,1,4,"formly-form",8),t.qZA(),t.YNc(4,Ot,2,2,"ng-template",null,9,t.W1O),t.qZA()}if(2&e){const o=t.MAs(5),r=t.oxw();t.Q6J("nzSpinning",r.loading),t.xp6(1),t.Q6J("formGroup",r.formGroup),t.xp6(1),t.Q6J("ngTemplateOutlet",o),t.xp6(1),t.Q6J("ngIf",!r.success)}}let Tt=(()=>{class e{constructor(o,r){this.submitAssertionGQL=o,this.networkErrorService=r,this.destroy$=new gt.xQ,this.formGroup=new u.cw({}),this.formOptions={formState:new ft._},this.success=!1,this.errorMessages=[],this.loading=!1,this.submitAssertionMutator=new ut.U(r),this.formFields=[{key:"fields",wrappers:["form-container"],templateOptions:{label:"Add Assertion Form"},fieldGroup:[{key:"gene",type:"gene-array",templateOptions:{maxCount:1,required:!0}},{key:"variant",type:"variant-array",templateOptions:{required:!0,maxCount:1,allowCreate:!1}},{key:"variantOrigin",type:"variant-origin-select",templateOptions:{required:!0}},{key:"disease",type:"disease-array",templateOptions:{maxCount:1,allowCreate:!1}},{key:"evidenceType",type:"evidence-type-select",templateOptions:{label:"Assertion Type",required:!0}},{key:"evidenceDirection",type:"evidence-direction-select",templateOptions:{label:"Assertion Direction",required:!0}},{key:"clinicalSignificance",type:"clinical-significance-select",templateOptions:{required:!0}},{key:"drugs",type:"drug-array",templateOptions:{allowCreate:!1}},{key:"drugInteractionType",type:"drug-interaction-select",templateOptions:{}},{key:"ampLevel",type:"amp-level-input",templateOptions:{}},{key:"acmgCodes",type:"acmg-code-array",templateOptions:{label:"ACMG/AMP Code(s)"}},{key:"phenotypes",type:"phenotype-array",templateOptions:{}},{key:"nccnGuideline",type:"nccn-guideline-input",templateOptions:{}},{key:"nccnGuidelineVersion",type:"nccn-version-input",templateOptions:{}},{key:"fdaRegulatoryApproval",type:"fda-approval-checkbox",templateOptions:{modelCallback:g=>{this.formModel.fields.fdaRegulatoryApproval=g}}},{key:"fdaCompanionTest",type:"fda-test-checkbox",templateOptions:{modelCallback:g=>{this.formModel.fields.fdaCompanionTest=g}}},{key:"summary",type:"cvc-textarea",templateOptions:{label:"Assertion Summary",helpText:"A short, one sentence summary of this new assertion",placeholder:"No description provided",required:!0}},{key:"description",type:"cvc-textarea",templateOptions:{label:"Assertion Statement",helpText:"A complete, original description of this new assertion, limited to one paragraph",placeholder:"No description provided",required:!0}},{key:"evidenceItems",type:"multi-field",wrappers:["form-field","evidence-manager"],templateOptions:{label:"Evidence Items",helpText:"Evidence Items that support the assertion.",addText:"Add Evidence by ID",required:!0,eidCallback:g=>{this.formModel.fields.evidenceItems=g}},fieldArray:{type:"evidence-input",templateOptions:{required:!0}}},{key:"comment",type:"comment-textarea",templateOptions:{label:"Comment",helpText:"Please provide any additional comments you wish to make about this assertion. This comment will appear as the first comment in this item's comment thread.",placeholder:"Please enter a comment describing your assertion.",minLength:10}},{key:"cancel",type:"cancel-button"},{key:"organization",type:"org-submit-button",templateOptions:{submitLabel:"Submit Assertion",submitSize:"large"}}]}]}toSubmitInput(o){var r,a;if(o){const i=o.fields;return{comment:i.comment&&0!=i.comment.length?i.comment:void 0,organizationId:null===(r=i.organization)||void 0===r?void 0:r.id,fields:{description:d.xt(i.description),summary:d.xt(i.summary),variantId:i.variant[0].id,geneId:i.gene[0].id,variantOrigin:i.variantOrigin,assertionType:i.evidenceType,clinicalSignificance:i.clinicalSignificance,diseaseId:d.uP(i.disease[0].id),assertionDirection:i.evidenceDirection,phenotypeIds:i.phenotypes.map(l=>l.id),drugIds:i.drugs.map(l=>l.id),drugInteractionType:d.uP(i.drugInteractionType),ampLevel:d.uP(i.ampLevel),nccnGuidelineId:d.uP(null===(a=i.nccnGuideline)||void 0===a?void 0:a.id),nccnGuidelineVersion:d.xt(i.nccnGuidelineVersion),acmgCodeIds:i.acmgCodes.map(l=>l.id),fdaCompanionTest:d.uP(i.fdaCompanionTest),fdaRegulatoryApproval:d.uP(i.fdaRegulatoryApproval),evidenceItemIds:i.evidenceItems.map(l=>l.id)}}}}submitAssertion(o){let r=this.toSubmitInput(o);if(r){let a=this.submitAssertionMutator.mutate(this.submitAssertionGQL,{input:r},{},i=>{this.newId=i.submitAssertion.assertion.id});a.submitSuccess$.pipe((0,y.R)(this.destroy$)).subscribe(i=>{i&&(this.success=!0)}),a.submitError$.pipe((0,y.R)(this.destroy$)).subscribe(i=>{i&&(this.errorMessages=i,this.success=!1)}),a.isSubmitting$.pipe((0,y.R)(this.destroy$)).subscribe(i=>{this.loading=i})}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(ht.LLl),t.Y36(yt.Y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["cvc-assertion-submit-form"]],decls:3,vars:0,consts:[["nzDirection","vertical"],[4,"nzSpaceItem"],["nzTip","Submitting",3,"nzSpinning",4,"nzSpaceItem"],["href","http://www.hipaa.com/hipaa-protected-health-information-what-does-phi-include/","target","_blank"],["href","https://creativecommons.org/publicdomain/zero/1.0/","target","_blank"],["nzTip","Submitting",3,"nzSpinning"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[4,"ngTemplateOutlet"],[3,"form","fields","model","options","modelChange",4,"ngIf"],["formMessages",""],[3,"form","fields","model","options","modelChange"],[4,"ngIf"],[3,"errors"],["nzType","success","nzMessage","Assertion Submitted","nzShowIcon","",3,"nzDescription"],["nzSize","small"],["successMessage",""],[3,"routerLink"]],template:function(o,r){1&o&&(t.TgZ(0,"nz-space",0),t.YNc(1,At,13,0,"nz-card",1),t.YNc(2,Mt,6,4,"nz-spin",2),t.qZA())},directives:[h.NU,h.$1,O.bd,M.ZU,C.W,u._Y,u.JL,f.Lr,u.sg,m.tP,m.O5,S.T7,b.SK,f.Nx,vt.V,x.r,c.yS],styles:["[_nghost-%COMP%]{display:block}"]}),e})();const Zt=[{path:"",component:Z,children:[{path:"",redirectTo:"submit",pathMatch:"full"},{path:"submit",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["cvc-assertion-submit"]],decls:1,vars:0,template:function(o,r){1&o&&t._UZ(0,"cvc-assertion-submit-form")},directives:[Tt],styles:[""]}),e})(),data:{breadcrumb:"Submit New Assertion"}}]}];let Pt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.Bz.forChild(Zt),pt],c.Bz]}),e})();var It=n(5630);let Ft=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,Pt,p.KJ,A.PV,It.D]]}),e})()}}]);