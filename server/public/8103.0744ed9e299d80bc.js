"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[8103],{7471:(R,P,e)=>{e.d(P,{B:()=>p});var f=e(655),E=e(3154),T=e(7630),c=e(4987),v=e(591),M=e(8929),h=e(3240),g=e(373),m=e(5778),x=e(4290),O=e(1307),u=e(2198),d=e(4850),D=e(13),A=e(7168),t=e(5e3),C=e(9808),I=e(7484),z=e(5851),r=e(1132),U=e(727),s=e(7451),Z=e(404),L=e(2683),W=e(5017),B=e(2166),y=e(8511),K=e(3220),S=e(392),N=e(3667),$=e(8481),J=e(3388),Q=e(6949),w=e(6185);function H(l,o){}function j(l,o){if(1&l&&(t.ynx(0),t.TgZ(1,"nz-card",5),t.YNc(2,H,0,0,"ng-template",6),t.qZA(),t.BQk()),2&l){t.oxw();const n=t.MAs(6),a=t.MAs(8),_=t.MAs(4);t.xp6(1),t.Q6J("nzTitle",n)("nzExtra",a),t.xp6(1),t.Q6J("ngTemplateOutlet",_)}}function F(l,o){}const Y=function(l){return{height:l}};function V(l,o){if(1&l&&(t.TgZ(0,"div",7)(1,"nz-card",8),t.YNc(2,F,0,0,"ng-template",6),t.qZA()()),2&l){const n=t.oxw(),a=t.MAs(6),_=t.MAs(8),i=t.MAs(4);t.Q6J("ngStyle",t.VKq(4,Y,n.cvcHeight)),t.xp6(1),t.Q6J("nzTitle",a)("nzExtra",_),t.xp6(1),t.Q6J("ngTemplateOutlet",i)}}function X(l,o){if(1&l&&(t.TgZ(0,"tr",27)(1,"td",28),t._UZ(2,"cvc-molecular-profile-tag",29),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"cvc-plain-tag-overflow",30),t.ALo(5,"pluck"),t.qZA(),t.TgZ(6,"td"),t._UZ(7,"cvc-tag-overflow",31),t.qZA(),t.TgZ(8,"td"),t._UZ(9,"cvc-tag-overflow",32),t.qZA(),t.TgZ(10,"td"),t._UZ(11,"cvc-tag-overflow",33),t.qZA(),t.TgZ(12,"td"),t._UZ(13,"cvc-tag-overflow",34),t.qZA(),t.TgZ(14,"td",35),t._uU(15),t.ALo(16,"number"),t.qZA(),t.TgZ(17,"td",35),t._uU(18),t.ALo(19,"number"),t.qZA()()),2&l){const n=o.$implicit,a=t.oxw(2);t.xp6(2),t.Q6J("molecularProfile",n)("truncateLongName",!0),t.xp6(2),t.Q6J("maxDisplayCount",1)("tags",t.xi3(5,20,n.aliases,"name"))("maxDisplayCount",1)("matchingText",a.aliasInput),t.xp6(3),t.Q6J("tags",n.genes)("maxDisplayCount",1)("matchingText",a.geneSymbolInput),t.xp6(2),t.Q6J("tags",n.variants)("maxDisplayCount",1)("matchingText",a.variantNameInput),t.xp6(2),t.Q6J("tags",n.diseases)("maxDisplayCount",1)("matchingText",a.diseaseNameInput),t.xp6(2),t.Q6J("tags",n.drugs)("maxDisplayCount",1)("matchingText",a.drugNameInput),t.xp6(2),t.Oqu(t.lcZ(16,23,n.evidenceItemCount)),t.xp6(3),t.Oqu(t.lcZ(19,25,n.assertionCount))}}const G=function(){return{x:"680px",y:"800px"}},b=function(){return["descend","ascend",null]};function q(l,o){if(1&l){const n=t.EpF();t.TgZ(0,"nz-table",9,10),t.NdJ("cvcTableScrollOnScroll",function(_){return t.CHM(n),t.oxw().scrollEvent$.next(_)}),t.ALo(2,"ngrxPush"),t.ALo(3,"ngrxPush"),t.ALo(4,"ngrxPush"),t.ALo(5,"ngrxPush"),t.TgZ(6,"thead",11),t.NdJ("nzSortOrderChange",function(_){return t.CHM(n),t.oxw().sortChange$.next(_)}),t.TgZ(7,"tr",12)(8,"th",13),t._uU(9," Name "),t.qZA(),t.TgZ(10,"th",14),t._uU(11," Aliases "),t.qZA(),t.TgZ(12,"th",15),t._uU(13," Genes "),t.qZA(),t.TgZ(14,"th",13),t._uU(15," Variants "),t.qZA(),t.TgZ(16,"th",16),t._uU(17," Diseases "),t.qZA(),t.TgZ(18,"th",17),t._uU(19," Drugs "),t.qZA(),t.TgZ(20,"th",18),t._UZ(21,"i",19),t._uU(22," Count "),t.qZA(),t.TgZ(23,"th",20),t._UZ(24,"i",21),t._uU(25," Count "),t.qZA()(),t.TgZ(26,"tr",22),t._UZ(27,"th",13),t.TgZ(28,"th",14)(29,"cvc-clearable-input-filter",23),t.NdJ("inputModelChange",function(_){return t.CHM(n),t.oxw().aliasInput=_})("inputModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()}),t.qZA()(),t.TgZ(30,"th",15)(31,"cvc-clearable-input-filter",23),t.NdJ("inputModelChange",function(_){return t.CHM(n),t.oxw().geneSymbolInput=_})("inputModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()}),t.qZA()(),t.TgZ(32,"th",24)(33,"cvc-clearable-input-filter",23),t.NdJ("inputModelChange",function(_){return t.CHM(n),t.oxw().variantNameInput=_})("inputModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()}),t.qZA()(),t.TgZ(34,"th",16)(35,"cvc-clearable-input-filter",23),t.NdJ("inputModelChange",function(_){return t.CHM(n),t.oxw().diseaseNameInput=_})("inputModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()}),t.qZA()(),t.TgZ(36,"th",17)(37,"cvc-clearable-input-filter",23),t.NdJ("inputModelChange",function(_){return t.CHM(n),t.oxw().drugNameInput=_})("inputModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()}),t.qZA()(),t._UZ(38,"th",25)(39,"th",25),t.qZA()(),t.TgZ(40,"tbody"),t.YNc(41,X,20,27,"ng-template",26),t.qZA()()}if(2&l){const n=t.oxw();t.Q6J("nzData",t.lcZ(2,22,n.row$))("nzLoading",t.lcZ(3,24,n.initialLoading$))("cvcAutoHeightTable",25)("nzVirtualItemSize",29)("cvcTableScrollQueryRef",n.queryRef)("cvcTableScrollPageInfo",t.lcZ(4,26,n.pageInfo$))("cvcTableScrollToIndex",t.lcZ(5,28,n.scrollIndex$))("nzVirtualForTrackBy",n.trackByIndex)("nzScroll",t.DdM(30,G))("nzFrontPagination",!1)("nzShowPagination",!1),t.xp6(20),t.Q6J("nzColumnKey",n.sortColumns.EvidenceItemCount)("nzSortFn",!0)("nzSortDirections",t.DdM(31,b)),t.xp6(3),t.Q6J("nzColumnKey",n.sortColumns.AssertionCount)("nzSortFn",!0)("nzSortDirections",t.DdM(32,b)),t.xp6(6),t.Q6J("inputModel",n.aliasInput),t.xp6(2),t.Q6J("inputModel",n.geneSymbolInput),t.xp6(2),t.Q6J("inputModel",n.variantNameInput),t.xp6(2),t.Q6J("inputModel",n.diseaseNameInput),t.xp6(2),t.Q6J("inputModel",n.drugNameInput)}}function k(l,o){}function tt(l,o){if(1&l&&(t.ynx(0),t.YNc(1,k,0,0,"ng-template",6),t.BQk()),2&l){const n=t.oxw(2);t.xp6(1),t.Q6J("ngTemplateOutlet",n.cvcTitleTemplate)}}function nt(l,o){if(1&l&&(t.ynx(0),t._uU(1),t.BQk()),2&l){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.cvcTitle," ")}}function et(l,o){if(1&l&&(t.YNc(0,tt,2,1,"ng-container",36),t.YNc(1,nt,2,1,"ng-container",36),t.TgZ(2,"span",37),t._UZ(3,"cvc-table-counts",38),t.qZA()),2&l){const n=t.oxw();t.Q6J("ngIf",n.cvcTitleTemplate),t.xp6(1),t.Q6J("ngIf",n.cvcTitle),t.xp6(2),t.Q6J("cvcTableCountsConnection",n.connection$)}}function ot(l,o){1&l&&(t.TgZ(0,"nz-tag",41),t._UZ(1,"i",42),t.TgZ(2,"span"),t._uU(3,"Loading\u2026"),t.qZA()())}function lt(l,o){if(1&l&&(t.YNc(0,ot,4,0,"nz-tag",39),t.ALo(1,"ngrxPush"),t._UZ(2,"cvc-no-more-rows",40),t.ALo(3,"ngrxPush")),2&l){const n=t.oxw();t.Q6J("ngIf",t.lcZ(1,2,n.moreLoading$)),t.xp6(2),t.Q6J("cvcShowTag",t.lcZ(3,4,n.noMoreRows$))}}let p=class{constructor(o,n){this.gql=o,this.cdr=n,this.initialPageSize=35,this.isScrolling=!1,this.sortColumns=T.FNv,this.noMoreRows$=new v.X(!1),this.scrollEvent$=new v.X("stop"),this.sortChange$=new M.xQ,this.filterChange$=new M.xQ,this.scrollIndex$=new M.xQ}set initialUserFilters(o){o&&Object.assign(this,o)}ngOnInit(){this.initialQueryArgs={first:this.initialPageSize,variantId:this.variantId},this.queryRef=this.gql.watch(this.initialQueryArgs),this.result$=this.queryRef.valueChanges,this.initialLoading$=this.result$.pipe((0,g.j)("loading"),(0,m.x)(),(0,x.o)(o=>!1!==o,!0)),this.moreLoading$=this.result$.pipe((0,g.j)("loading"),(0,m.x)(),(0,O.T)(2)),this.connection$=this.result$.pipe((0,g.j)("data","browseMolecularProfiles"),(0,u.h)(h.ep)),this.row$=this.connection$.pipe((0,g.j)("edges"),(0,u.h)(h.ep),(0,d.U)(o=>o.map(n=>n.node))),this.pageInfo$=this.connection$.pipe((0,g.j)("pageInfo"),(0,u.h)(h.ep)),this.sortChange$.pipe((0,c.t)(this)).subscribe(o=>{this.queryRef.refetch({sortBy:(0,E._)(o)})}),this.filterChange$.pipe((0,D.b)(500),(0,c.t)(this)).subscribe(()=>{this.refresh()}),this.scrollEvent$.pipe((0,d.U)(o=>"stop"!==o),(0,m.x)(),(0,c.t)(this)).subscribe(o=>{this.isScrolling=o,this.cdr.detectChanges()}),this.scrollEvent$.pipe((0,u.h)(o=>"bottom"===o),(0,A.M)(this.pageInfo$),(0,d.U)(([o,n])=>n),(0,c.t)(this)).subscribe(o=>{o.hasNextPage||(this.noMoreRows$.next(!0),this.cdr.detectChanges(),setInterval(()=>this.noMoreRows$.next(!1)))})}refresh(){this.queryRef.refetch({diseaseName:this.diseaseNameInput,drugName:this.drugNameInput,variantName:this.variantNameInput?this.variantNameInput:void 0,molecularProfileAlias:this.aliasInput?this.aliasInput:void 0,entrezSymbol:this.geneSymbolInput}).then(()=>this.scrollIndex$.next(0)),this.cdr.detectChanges()}trackByIndex(o,n){return n.id}};p.\u0275fac=function(o){return new(o||p)(t.Y36(T.q9q),t.Y36(t.sBO))},p.\u0275cmp=t.Xpm({type:p,selectors:[["cvc-molecular-profiles-table"]],inputs:{cvcHeight:"cvcHeight",cvcTitleTemplate:"cvcTitleTemplate",cvcTitle:"cvcTitle",initialPageSize:"initialPageSize",variantId:"variantId",initialUserFilters:"initialUserFilters"},decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["setHeightCard",""],["table",""],["titleTemplate",""],["extraTemplate",""],["nzSize","small","cvcAutoHeightCard","","cvcAutoHeightTarget","viewport",3,"nzTitle","nzExtra"],[3,"ngTemplateOutlet"],[1,"card-container",3,"ngStyle"],["cvcAutoHeightCard","","nzSize","small",3,"nzTitle","nzExtra"],["nzSize","small","cvcTableScroll","",3,"nzData","nzLoading","cvcAutoHeightTable","nzVirtualItemSize","cvcTableScrollQueryRef","cvcTableScrollPageInfo","cvcTableScrollToIndex","nzVirtualForTrackBy","nzScroll","nzFrontPagination","nzShowPagination","cvcTableScrollOnScroll"],["virtualTable",""],[3,"nzSortOrderChange"],[1,"col-header-row"],["nzWidth","200px","nzLeft",""],["nzWidth","100px"],["nzWidth","150px"],["nzWidth","250px"],["nzWidth","180px"],["nzWidth","75px","nzRight","","nzAlign","right","nz-tooltip","","nzTooltipTitle","Evidence Count",3,"nzColumnKey","nzSortFn","nzSortDirections"],["nz-icon","","nzType","civic-evidence"],["nzWidth","75px","nzRight","","nzAlign","right","nz-tooltip","","nzTooltipTitle","Assertion Count",3,"nzColumnKey","nzSortFn","nzSortDirections"],["nz-icon","","nzType","civic-assertion"],[1,"filter-row"],[3,"inputModel","inputModelChange"],["nzWidth","200px"],["nzWidth","75px","nzRight",""],["nz-virtual-scroll",""],[1,"data-row"],["nzLeft",""],[3,"molecularProfile","truncateLongName"],[3,"maxDisplayCount","tags","matchingText"],["tagType","gene",3,"tags","maxDisplayCount","matchingText"],["tagType","variant",3,"tags","maxDisplayCount","matchingText"],["tagType","disease",3,"tags","maxDisplayCount","matchingText"],["tagType","drug",3,"tags","maxDisplayCount","matchingText"],["nzRight","","nzAlign","right"],[4,"ngIf"],[1,"table-info"],[3,"cvcTableCountsConnection"],["nzColor","processing",4,"ngIf"],[3,"cvcShowTag"],["nzColor","processing"],["nz-icon","","nzType","sync","nzSpin",""]],template:function(o,n){if(1&o&&(t.YNc(0,j,3,3,"ng-container",0),t.YNc(1,V,3,6,"ng-template",null,1,t.W1O),t.YNc(3,q,42,33,"ng-template",null,2,t.W1O),t.YNc(5,et,4,3,"ng-template",null,3,t.W1O),t.YNc(7,lt,4,6,"ng-template",null,4,t.W1O)),2&o){const a=t.MAs(2);t.Q6J("ngIf",!n.cvcHeight)("ngIfElse",a)}},directives:[C.O5,I.bd,z.D,C.tP,C.PC,r.N8,U.y,s.q,r.Om,r.$Z,r.Uo,r._C,r.qn,r.UX,r.qD,Z.SY,L.w,W.Ls,B.p,r.p0,r.zu,y.p,K.l,S.T,N.B,$.j,J.H],pipes:[Q.fM,w.F,C.JJ],styles:["[_nghost-%COMP%]{display:block}nz-card[_ngcontent-%COMP%]:first-of-type     .ant-card-body{padding:0;margin-top:1px}.table-info[_ngcontent-%COMP%]{margin-left:.5rem}tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]{white-space:nowrap}tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell.align-right[_ngcontent-%COMP%]     .ant-table-column-title{text-align:right}tr.filter-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]{padding:3px 4px}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]{white-space:nowrap}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]   .anticon.attribute-icon[_ngcontent-%COMP%]{color:#595959}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell.overflow-ellipsis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell.button-cell[_ngcontent-%COMP%]{padding:0}tr.data-row[_ngcontent-%COMP%]   td.align-right[_ngcontent-%COMP%], tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%], tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%], tr.filter-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%]{text-align:right}"],changeDetection:0}),p=(0,f.gn)([(0,c.c)()],p)},5160:(R,P,e)=>{e.d(P,{I:()=>U});var f=e(9808),E=e(4125),T=e(271),c=e(3968),v=e(8525),M=e(7946),h=e(6905),g=e(3111),m=e(1433),x=e(9240),O=e(6949),u=e(6042),d=e(7484),D=e(5017),A=e(1132),t=e(8481),C=e(404),I=e(3618),z=e(2467),r=e(5e3);let U=(()=>{class s{}return s.\u0275fac=function(L){return new(L||s)},s.\u0275mod=r.oAB({type:s}),s.\u0275inj=r.cJS({imports:[[f.ez,O.WG,u.sL,d.vh,D.PV,A.HQ,t.X,C.cg,I.ZJ,g.n,m.c,E.k,T.y,h.s,c.T,v.T,x.w,M.x,z.u,c.T]]}),s})()}}]);