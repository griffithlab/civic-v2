"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[2271],{2271:(dt,N,a)=>{a.r(N),a.d(N,{VariantsReviseModule:()=>lt});var c=a(72200),j=a(38132),H=a(99172),Z=a(96354),g=a(24608),e=a(73664),p=a(69145),E=a(56609),K=a(41305),h=a(3062),X=a(41951),L=a(7391),W=a(29765),q=a(12261),S=a(97529),ee=a(83075),te=a(61774);function ie(i,t){1&i&&(e.j41(0,"span"),e.EFF(1,",\xa0"),e.k0s())}function ne(i,t){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.DNE(2,ie,2,0,"span",1),e.k0s()),2&i){const n=t.$implicit,s=t.last;e.R7$(),e.SpI(" ",n),e.R7$(),e.Y8G("ngIf",!s)}}function re(i,t){if(1&i&&(e.j41(0,"nz-page-header-subtitle"),e.DNE(1,ne,3,2,"span",9),e.k0s()),2&i){const n=e.XpG().ngIf;e.R7$(),e.Y8G("ngForOf",n.variantAliases)}}function se(i,t){1&i&&(e.j41(0,"div"),e.nrm(1,"router-outlet"),e.k0s())}function ae(i,t){1&i&&(e.j41(0,"nz-row",10)(1,"div",11),e.nrm(2,"cvc-login-prompt"),e.k0s()())}function oe(i,t){if(1&i&&(e.qex(0),e.nrm(1,"cvc-section-navigation",2),e.j41(2,"nz-page-header",3)(3,"nz-page-header-title",4),e.EFF(4," REVISE "),e.nrm(5,"i",5),e.nI1(6,"entityColor"),e.j41(7,"span",6),e.EFF(8),e.k0s(),e.EFF(9),e.k0s(),e.DNE(10,re,2,1,"nz-page-header-subtitle",1),e.j41(11,"nz-page-header-content")(12,"div",7),e.DNE(13,se,2,0,"div",8),e.nI1(14,"ngrxPush"),e.DNE(15,ae,3,0,"ng-template",null,0,e.C5r),e.k0s()()(),e.bVm()),2&i){const n=t.ngIf,s=e.sdS(16),r=e.XpG();e.R7$(),e.Y8G("displayName",n.name),e.R7$(4),e.Y8G("nzTwotoneColor",e.bMT(6,7,"Variant")),e.R7$(3),e.SpI(" ",n.feature.name," "),e.R7$(),e.SpI(" ",n.name," "),e.R7$(),e.Y8G("ngIf",n.variantAliases.length>0),e.R7$(3),e.Y8G("ngIf",e.bMT(14,9,r.isSignedIn$))("ngIfElse",s)}}let le=(()=>{var i;class t{constructor(s,r,l){this.gql=s,this.route=r,this.viewerService=l,this.routeSub=this.route.params.subscribe(M=>{let J=this.gql.watch({variantId:+M.variantId}).valueChanges;this.loading$=J.pipe((0,g.E)("loading"),(0,H.Z)(!0)),this.variant$=J.pipe((0,g.E)("data","variant")),this.commentsTotal$=this.variant$.pipe((0,g.E)("comments","totalCount")),this.flagsTotal$=this.variant$.pipe((0,g.E)("flags","totalCount")),this.revisionsTotal$=this.variant$.pipe((0,g.E)("revisions","totalCount"))})}ngOnInit(){this.isSignedIn$=this.viewerService.viewer$.pipe((0,Z.T)(s=>s.signedIn))}ngOnDestroy(){this.routeSub.unsubscribe()}static#e=i=()=>(this.\u0275fac=function(r){return new(r||t)(e.rXU(p.N47),e.rXU(E.nX),e.rXU(K.q))},this.\u0275cmp=e.VBU({type:t,selectors:[["cvc-variants-revise"]],standalone:!1,decls:2,vars:3,consts:[["notSignedIn",""],[4,"ngIf"],[3,"displayName"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzTheme","twotone","nzType","civic-variant",3,"nzTwotoneColor"],["nz-typography","","nzType","secondary"],[1,"content"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["nzSpan","24","nzJustify","center"],["nz-col","","nzSpan","6"]],template:function(r,l){1&r&&(e.DNE(0,oe,17,11,"ng-container",1),e.nI1(1,"async")),2&r&&e.Y8G("ngIf",e.bMT(1,1,l.variant$))},dependencies:[c.Sq,c.bT,E.n3,h.WB,h.k9,h.CO,h.zR,X.Dn,L.Di,W.n,q.h,S.Uq,S.e,c.Jj,ee.R,te.L9],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}))}return i(),t})();var m=a(38927),y=a(50513),b=a(66026),V=a(70776),I=a(55316),o=a(2615);let de=(()=>{var i;class t{static#e=i=()=>(this.\u0275fac=function(r){return new(r||t)},this.\u0275mod=e.$C({type:t}),this.\u0275inj=o.G2t({imports:[c.MD,m.PQ,y.Z,b.m,I.P,V.s]}))}return i(),t})(),ce=(()=>{var i;class t{static#e=i=()=>(this.\u0275fac=function(r){return new(r||t)},this.\u0275mod=e.$C({type:t}),this.\u0275inj=o.G2t({imports:[c.MD,m.PQ,y.Z,b.m,I.P,V.s]}))}return i(),t})(),pe=(()=>{var i;class t{static#e=i=()=>(this.\u0275fac=function(r){return new(r||t)},this.\u0275mod=e.$C({type:t}),this.\u0275inj=o.G2t({imports:[c.MD,m.PQ,y.Z,b.m,I.P,V.s]}))}return i(),t})(),fe=(()=>{var i;class t{static#e=i=()=>(this.\u0275fac=function(r){return new(r||t)},this.\u0275mod=e.$C({type:t}),this.\u0275inj=o.G2t({imports:[c.MD,m.PQ,y.Z,b.m,I.P,V.s]}))}return i(),t})(),me=(()=>{var i;class t{static#e=i=()=>(this.\u0275fac=function(r){return new(r||t)},this.\u0275mod=e.$C({type:t}),this.\u0275inj=o.G2t({imports:[c.MD,de,ce,pe,fe]}))}return i(),t})();var _=a(31635),d=a(84341),u=a(49894),x=a(71226),v=a(25741),C=a(87480),f=a(65676);const ge=(0,C.A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Variant"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{xs:24,md:12,lg:8},{xs:24,md:12,lg:8},{xs:24,lg:8}]}},fieldGroup:[{key:"featureId",type:"feature-select",props:{description:"Enter an Entrez Gene for this Variant",required:!0,canChangeFeatureType:!1}},{key:"name",type:"base-input",props:{placeholder:"Enter a name for this Variant",description:"Enter the name of the Variant according to the <a href='https://civic.readthedocs.io/en/latest/model/variants/name.html#curating-variant-names' target='blank'>Variant Curation SOP</a>",label:"Name",required:!0,rows:1}},{key:"aliases",type:"tag-multi-input",props:{label:"Aliases",description:"List any aliases commonly used to refer to this Variant",placeholder:"Enter Alias and hit return"}}]},{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{xs:24,lg:12,xl:6,xxl:8},{xs:24,lg:12,xl:6,xxl:8},{xs:24,xl:12,xxl:8}]}},fieldGroup:[{key:"hgvsDescriptions",type:"tag-multi-input",props:{label:"HGVS Descriptions",description:"Enter any HGVS nomenclature descriptions of this Variant",tooltip:"Human Genome Variation Society nomenclature descriptions",placeholder:"Enter HGVS and hit return"}},{key:"variantTypeIds",type:"variant-type-multi-select"},{key:"clinvarIds",type:"clinvar-multi-input",wrappers:["form-field"],props:{label:"ClinVar IDs"}}]},{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{wrappers:["form-card"],props:{formCardOptions:{title:"Coordinates",size:"small"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{responsive:{xs:24,md:12,lg:8,xxl:6}}},fieldGroup:[{key:"referenceBuild",type:"reference-build-select"},{key:"ensemblVersion",type:"base-input",validators:{nccnVersionNumber:{expression:i=>!i.value||/^\d{2,3}$/.test(i.value),message:(i,t)=>`"${t.formControl?.value}" does not appear to be an Ensembl version number`}},props:{label:"Ensembl Version",description:"Enter a valid Ensembl database version (e.g. 75)"}},{key:"referenceBases",type:"base-input",validators:{nccnVersionNumber:{expression:i=>!i.value||/^[ACTG\\]+$/.test(i.value),message:(i,t)=>`"${t.formControl?.value}" contains invalid characters.`}},props:{label:"Reference Bases",description:"The nucleotide(s) of the reference genome affected by the variant. Only used for SNVs and Indels (otherwise leave blank)"}},{key:"variantBases",type:"base-input",validators:{nccnVersionNumber:{expression:i=>!i.value||/^[ACTG\\]+$/.test(i.value),message:(i,t)=>`"${t.formControl?.value}" contains invalid characters.`}},props:{label:"Variant Bases",description:"The nucleotide(s) of the variant allele. Only used for SNVs and Indels (otherwise leave blank)"}},{key:"chromosome",type:"base-select",props:{label:"Chromosome",options:v.Kd,description:"Specify the chromosome in which this variant occurs (e.g. 17)."}},{key:"start",type:"base-input",validators:{isNumeric:{expression:i=>!i.value||/^\d+$/.test(i.value),message:(i,t)=>"Start coordinate must be numeric"}},props:{label:"Start",description:"Enter the left/first coordinate of this variant. Must be \u2264 the Stop coordinate. Coordinate must be compatible with the selected reference build."}},{key:"stop",type:"base-input",validators:{isNumeric:{expression:i=>!i.value||/^\d+$/.test(i.value),message:(i,t)=>"Stop coordinate must be numeric"}},props:{label:"Stop",description:"Provide the right/second coordinate of this variant. Must be \u2265 the Start coordinate. Coordinate must be compatible with the selected reference build."}},{key:"representativeTranscript",type:"base-input",props:{label:"Representative Transcript",description:"Specify a transcript ID, including version number (e.g. ENST00000348159.4, the canonical transcript defined by Ensembl)."},validators:{isTranscriptId:{expression:f.t_,message:"Representative Transcript must be a valid, human, versioned, Ensembl transcript ID"}}}]}]}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",placeholder:"Please enter a comment describing your revisions.",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Variant Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{name:void 0,aliases:void 0,hgvsDescriptions:void 0,clinvarIds:void 0,variantTypeIds:void 0,referenceBuild:void 0,ensemblVersion:void 0,chromosome:void 0,start:void 0,stop:void 0,representativeTranscript:void 0,featureId:void 0,referenceBases:void 0,variantBases:void 0},comment:void 0,organizationId:void 0});let be=i=>"NONE FOUND"==i[0]?{noneFound:!0}:"N/A"==i[0]?{notApplicable:!0}:{ids:i.map(t=>+t)};var A,F=a(17705),R=a(74222),T=a(56506),G=a(68721);const Ve=()=>({});function Ie(i,t){if(1&i&&(e.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),e.j41(1,"a",4),e.EFF(2,"here."),e.k0s()),2&i){const n=e.XpG();e.R7$(),e.Y8G("href",e.mNQ(n.url),e.B4B)}}function _e(i,t){if(1&i){const n=e.RV6();e.j41(0,"form",5),e.bIt("ngSubmit",function(){o.eBV(n);const r=e.XpG();return o.Njj(r.onSubmit(r.model))}),e.j41(1,"formly-form",6),e.bIt("modelChange",function(r){o.eBV(n);const l=e.XpG();return o.Njj(l.model=r)}),e.k0s()()}if(2&i){const n=e.XpG();e.Y8G("formGroup",n.form),e.R7$(),e.Y8G("form",n.form)("fields",n.fields)("model",n.model)("options",e.lJ4(5,Ve))}}function xe(i,t){1&i&&e.EFF(0," Loading Variant... ")}let P=(class B{constructor(t,n,s,r){this.revisableFieldsGQL=t,this.submitRevisionsGQL=n,this.networkErrorService=s,this.cdr=r,this.form=new d.J3({}),this.fields=ge,this.reviseVariantMutator=new x.E(s)}ngOnInit(){this.url=`/variants/${this.variantId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({variantId:this.variantId}).pipe((0,u.s)(this)).subscribe({next:({data:{variant:t}})=>{var i;t&&"GeneVariant"==t.__typename&&(this.model={id:t.id,fields:(i=t,{name:i.name,aliases:i.variantAliases,hgvsDescriptions:i.hgvsDescriptions,clinvarIds:i.clinvarIds,variantTypeIds:i.variantTypes.map(t=>t.id),referenceBuild:i.coordinates?.referenceBuild,ensemblVersion:i.coordinates?.ensemblVersion,chromosome:i.coordinates?.chromosome,start:i.coordinates?.start,stop:i.coordinates?.stop,referenceBases:i.coordinates?.referenceBases,variantBases:i.coordinates?.variantBases,representativeTranscript:i.coordinates?.representativeTranscript,featureId:i.feature.id})},this.cdr.detectChanges())},error:t=>{console.error("Error retrieving Variant."),console.error(t)},complete:()=>{}})}onSubmit(t){if(!this.variantId)return;let n=function ye(i,t){const n=t.fields;if(t.comment&&n.name&&n.featureId)return{id:i,fields:{name:n.name,aliases:n.aliases||[],hgvsDescriptions:n.hgvsDescriptions||[],clinvarIds:be(n.clinvarIds||[]),variantTypeIds:n.variantTypeIds||[],coordinates:{chromosome:n.chromosome,start:n.start?+n.start:void 0,stop:n.stop?+n.stop:void 0,representativeTranscript:n.representativeTranscript,ensemblVersion:n.ensemblVersion?+n.ensemblVersion:void 0,referenceBuild:n.referenceBuild,referenceBases:v.q2(n.referenceBases),variantBases:v.q2(n.variantBases)},featureId:n.featureId},organizationId:t.organizationId,comment:t.comment}}(this.variantId,t);n&&(this.mutationState=this.reviseVariantMutator.mutate(this.submitRevisionsGQL,{input:n}))}static#e=A=()=>(this.\u0275fac=function(n){return new(n||B)(e.rXU(p.$Pl),e.rXU(p.QVS),e.rXU(R.N),e.rXU(F.gRc))},this.\u0275cmp=e.VBU({type:B,selectors:[["cvc-gene-variant-revise-form"]],inputs:{variantId:"variantId"},standalone:!1,decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Variant",3,"redirectUrl","mutationState","successMessage"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(n,s){if(1&n&&(e.j41(0,"cvc-form-submission-status-display",2),e.DNE(1,Ie,3,2,"ng-template",null,0,e.C5r)(3,_e,2,6,"form",3)(4,xe,1,0,"ng-template",null,1,e.C5r),e.k0s()),2&n){const r=e.sdS(2),l=e.sdS(5);e.Y8G("redirectUrl",s.url)("mutationState",s.mutationState)("successMessage",r),e.R7$(3),e.Y8G("ngIf",s.model)("ngIfElse",l)}},dependencies:[c.bT,m.CA,d.qT,d.cb,d.j4,T.JA,G.G],encapsulation:2,changeDetection:0}),this)},A());P=(0,_.Cg)([(0,u.d)()],P);const Re=(0,C.A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Variant"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{xs:24,md:12,lg:8},{xs:24,md:12,lg:8},{xs:24,lg:8}]}},fieldGroup:[{key:"featureId",type:"feature-select",props:{description:"Enter a Factor for this Variant",required:!0,featureType:p.Xiu.Factor,canChangeFeatureType:!1}},{key:"name",type:"base-input",props:{placeholder:"Enter a name for this Variant",description:"Enter the name of the Variant according to the <a href='https://civic.readthedocs.io/en/latest/model/variants/name.html#curating-variant-names' target='blank'>Variant Curation SOP</a>",label:"Name",required:!0,rows:1}},{key:"aliases",type:"tag-multi-input",props:{label:"Aliases",description:"List any aliases commonly used to refer to this Variant",placeholder:"Enter Alias and hit return"}}]},{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{xs:24,lg:12,xl:6,xxl:8},{xs:24,lg:12,xl:6,xxl:8},{xs:24,xl:12,xxl:8}]}},fieldGroup:[{key:"variantTypeIds",type:"variant-type-multi-select"},{key:"ncitId",type:"base-input",props:{placeholder:"NCI Thesaurus Code",description:"Enter the NCI Thesaurus Code for this Factor Variant",label:"NCI Thesaurus Code",required:!1}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",placeholder:"Please enter a comment describing your revisions.",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Variant Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{name:void 0,aliases:void 0,variantTypeIds:void 0,featureId:void 0,ncitId:void 0},comment:void 0,organizationId:void 0});var U;const Ee=()=>({});function Se(i,t){if(1&i&&(e.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),e.j41(1,"a",4),e.EFF(2,"here."),e.k0s()),2&i){const n=e.XpG();e.R7$(),e.Y8G("href",e.mNQ(n.url),e.B4B)}}function Pe(i,t){if(1&i){const n=e.RV6();e.j41(0,"form",5),e.bIt("ngSubmit",function(){o.eBV(n);const r=e.XpG();return o.Njj(r.onSubmit(r.model))}),e.j41(1,"formly-form",6),e.bIt("modelChange",function(r){o.eBV(n);const l=e.XpG();return o.Njj(l.model=r)}),e.k0s()()}if(2&i){const n=e.XpG();e.Y8G("formGroup",n.form),e.R7$(),e.Y8G("form",n.form)("fields",n.fields)("model",n.model)("options",e.lJ4(5,Ee))}}function we(i,t){1&i&&e.EFF(0," Loading Variant... ")}let w=(class k{constructor(t,n,s,r){this.revisableFieldsGQL=t,this.submitRevisionsGQL=n,this.networkErrorService=s,this.cdr=r,this.form=new d.J3({}),this.fields=Re,this.reviseVariantMutator=new x.E(s)}ngOnInit(){this.url=`/variants/${this.variantId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({variantId:this.variantId}).pipe((0,u.s)(this)).subscribe({next:({data:{variant:t}})=>{var i;t&&"FactorVariant"==t.__typename&&(this.model={id:t.id,fields:(i=t,{name:i.name,aliases:i.variantAliases,variantTypeIds:i.variantTypes.map(t=>t.id),featureId:i.feature.id,ncitId:i.ncitId})},this.cdr.detectChanges())},error:t=>{console.error("Error retrieving Variant."),console.error(t)},complete:()=>{}})}onSubmit(t){if(!this.variantId)return;let n=function Ge(i,t){const n=t.fields;if(t.comment&&n.name&&n.featureId)return{id:i,fields:{name:n.name,aliases:n.aliases||[],variantTypeIds:n.variantTypeIds||[],featureId:n.featureId,ncitId:v.q2(n.ncitId)},organizationId:t.organizationId,comment:t.comment}}(this.variantId,t);n&&(this.mutationState=this.reviseVariantMutator.mutate(this.submitRevisionsGQL,{input:n}))}static#e=U=()=>(this.\u0275fac=function(n){return new(n||k)(e.rXU(p.JTF),e.rXU(p.Ye0),e.rXU(R.N),e.rXU(F.gRc))},this.\u0275cmp=e.VBU({type:k,selectors:[["cvc-factor-variant-revise-form"]],inputs:{variantId:"variantId"},standalone:!1,decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Variant",3,"redirectUrl","mutationState","successMessage"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(n,s){if(1&n&&(e.j41(0,"cvc-form-submission-status-display",2),e.DNE(1,Se,3,2,"ng-template",null,0,e.C5r)(3,Pe,2,6,"form",3)(4,we,1,0,"ng-template",null,1,e.C5r),e.k0s()),2&n){const r=e.sdS(2),l=e.sdS(5);e.Y8G("redirectUrl",s.url)("mutationState",s.mutationState)("successMessage",r),e.R7$(3),e.Y8G("ngIf",s.model)("ngIfElse",l)}},dependencies:[c.bT,m.CA,d.qT,d.cb,d.j4,T.JA,G.G],encapsulation:2,changeDetection:0}),this)},U());w=(0,_.Cg)([(0,u.d)()],w);const Oe={id:void 0,clientMutationId:void 0,fields:{aliases:void 0,variantTypeIds:void 0},comment:void 0,organizationId:void 0};function Be(i){const t=i.fivePrimeEndExonCoordinates?i.fivePrimeEndExonCoordinates.referenceBuild:i.threePrimeStartExonCoordinates?.referenceBuild,n=i.fivePrimeEndExonCoordinates?i.fivePrimeEndExonCoordinates.ensemblVersion:i.threePrimeStartExonCoordinates?.ensemblVersion;return{aliases:i.variantAliases,variantTypeIds:i.variantTypes.map(s=>s.id),fivePrimeTranscript:i.fivePrimeEndExonCoordinates?.representativeTranscript,fivePrimeExonEnd:i.fivePrimeEndExonCoordinates?.exon?.toString(),fivePrimeOffset:i.fivePrimeEndExonCoordinates?.exonOffset?.toString(),fivePrimeOffsetDirection:i.fivePrimeEndExonCoordinates?.exonOffsetDirection,threePrimeTranscript:i.threePrimeStartExonCoordinates?.representativeTranscript,threePrimeExonStart:i.threePrimeStartExonCoordinates?.exon?.toString(),threePrimeOffset:i.threePrimeStartExonCoordinates?.exonOffset?.toString(),threePrimeOffsetDirection:i.threePrimeStartExonCoordinates?.exonOffsetDirection,referenceBuild:t,ensemblVersion:n}}var Y;const De=()=>({});function $e(i,t){if(1&i&&(e.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),e.j41(1,"a",4),e.EFF(2,"here."),e.k0s()),2&i){const n=e.XpG();e.R7$(),e.Y8G("href",e.mNQ(n.url),e.B4B)}}function Ne(i,t){if(1&i){const n=e.RV6();e.j41(0,"form",5),e.bIt("ngSubmit",function(){o.eBV(n);const r=e.XpG();return o.Njj(r.onSubmit(r.model))}),e.j41(1,"formly-form",6),e.bIt("modelChange",function(r){o.eBV(n);const l=e.XpG();return o.Njj(l.model=r)}),e.k0s()()}if(2&i){const n=e.XpG();e.Y8G("formGroup",n.form),e.R7$(),e.Y8G("form",n.form)("fields",n.fields)("model",n.model)("options",e.lJ4(5,De))}}function je(i,t){1&i&&e.EFF(0," Loading Variant... ")}let O=(class D{constructor(t,n,s,r){this.revisableFieldsGQL=t,this.submitRevisionsGQL=n,this.networkErrorService=s,this.cdr=r,this.form=new d.J3({}),this.reviseVariantMutator=new x.E(s)}ngOnInit(){this.url=`/variants/${this.variantId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({variantId:this.variantId}).pipe((0,u.s)(this)).subscribe({next:({data:{variant:t}})=>{t&&"FusionVariant"==t.__typename&&"Fusion"==t.feature.featureInstance.__typename&&(this.fields=function Me(i,t){return(0,C.A)(function ze(i,t){return[{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Variant"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:12}},fieldGroup:[{key:"aliases",type:"tag-multi-input",props:{label:"Aliases",description:"List any aliases commonly used to refer to this Variant",placeholder:"Enter Alias and hit return"}},{key:"variantTypeIds",type:"variant-type-multi-select"}]},{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{wrappers:["form-card"],props:{formCardOptions:{title:"Fusion Coordinates",size:"small"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:12}},fieldGroup:[{key:"referenceBuild",type:"reference-build-select",expressions:{"props.required":n=>!!n.model.fivePrimeTranscript||!!n.model.threePrimeTranscript}},{key:"ensemblVersion",type:"base-input",validators:{nccnVersionNumber:{expression:n=>!n.value||/^\d{2,3}$/.test(n.value),message:(n,s)=>`"${s.formControl?.value}" does not appear to be an Ensembl version number`}},props:{label:"Ensembl Version",description:"Enter a valid Ensembl database version (e.g. 75)"},expressions:{"props.required":n=>!!n.model.fivePrimeTranscript||!!n.model.threePrimeTranscript}}]},{wrappers:["form-row"],props:{formRowOptions:{span:6}},fieldGroup:[{key:"fivePrimeTranscript",type:"base-input",props:{label:"5' Transcript",disabled:i,tooltip:"Specify a transcript ID, including version number (e.g. ENST00000348159.4) for the 5' exon you have selected"},expressions:{"props.required":n=>!!n.model.fivePrimeExonEnd},validators:{isTranscriptId:{expression:f.t_,message:"5' Transcript must be a valid, human, versioned, Ensembl transcript ID"}}},{key:"fivePrimeExonEnd",type:"base-input",validators:{isNumeric:{expression:f.kf,message:"5' exon must be numeric"}},props:{label:"5' End Exon",disabled:i,tooltip:"The exon number counted from the 5' end of the 5' partner transcript (the last exon of the 5' partner involved in the fusion transcript)"},expressions:{"props.required":n=>!!n.model.fivePrimeTranscript}},{key:"fivePrimeOffset",type:"base-input",validators:{isNumeric:{expression:f.kf,message:"5' exon offset must be numeric"}},props:{label:"5' Exon Offset",tooltip:"A value representing the offset from the segment boundary.",required:!1,disabled:i}},{key:"fivePrimeOffsetDirection",type:"base-select",props:{label:"5' Exon Offset Direction",tooltip:"Negative values offset towards the 5\u2019 end of the transcript and positive values offset towards the 3\u2019 end of the transcript.",required:!0,placeholder:"5' Offset Direction",options:f.UH,multiple:!1},expressions:{"props.disabled":n=>!n.model.fivePrimeOffset,"props.required":n=>!!n.model.fivePrimeOffset}}]},{wrappers:["form-row"],props:{formRowOptions:{span:6}},fieldGroup:[{key:"threePrimeTranscript",type:"base-input",props:{disabled:t,label:"3' Transcript",tooltip:"Specify a transcript ID, including version number (e.g. ENST00000348159.4) for the 3' exon you have selected"},validators:{isTranscriptId:{expression:f.t_,message:"3' Transcript must be a valid, human, versioned, Ensembl transcript ID"}},expressions:{"props.required":n=>!!n.model.threePrimeExonStart}},{key:"threePrimeExonStart",type:"base-input",validators:{isNumeric:{expression:f.kf,message:"3' exon must be numeric"}},props:{label:"3' Start Exon",tooltip:"The exon number counted from the 5' end of the 3' partner transcript (the first exon of the 3' partner involved in the fusion transcript)",disabled:t},expressions:{"props.required":n=>!!n.model.threePrimeTranscript}},{key:"threePrimeOffset",type:"base-input",validators:{isNumeric:{expression:f.kf,message:"3' exon must be numeric"}},props:{label:"3' Exon Offset",disabled:t,required:!1,tooltip:"A value representing the offset from the segment boundary."}},{key:"threePrimeOffsetDirection",type:"base-select",props:{label:"3' Exon Offset Direction",tooltip:"Negative values offset towards the 5\u2019 end of the transcript and positive values offset towards the 3\u2019 end of the transcript.",required:!0,placeholder:"3' Offset Direction",options:f.UH,multiple:!1},expressions:{"props.disabled":n=>!n.model.threePrimeOffset,"props.required":n=>!!n.model.threePrimeOffset}}]}]}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",placeholder:"Please enter a comment describing your revisions.",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Variant Revisions",align:"right"}}]}]}]}(i,t),Oe)}(t.feature.featureInstance.fivePrimePartnerStatus!=p.hBv.Known,t.feature.featureInstance.threePrimePartnerStatus!=p.hBv.Known),this.model={id:t.id,fields:Be(t)},this.cdr.detectChanges())},error:t=>{console.error("Error retrieving Variant."),console.error(t)},complete:()=>{}})}onSubmit(t){if(!this.variantId)return;let n=function ke(i,t){const n=t.fields;if(t.comment)return{id:i,fields:{aliases:n.aliases||[],variantTypeIds:n.variantTypeIds||[],coordinates:{fivePrimeTranscript:t.fields.fivePrimeTranscript,fivePrimeExonEnd:v.tV(t.fields.fivePrimeExonEnd),fivePrimeOffset:v.tV(t.fields.fivePrimeOffset),fivePrimeOffsetDirection:t.fields.fivePrimeOffsetDirection,threePrimeTranscript:t.fields.threePrimeTranscript,threePrimeExonStart:v.tV(t.fields.threePrimeExonStart),threePrimeOffset:v.tV(t.fields.threePrimeOffset),threePrimeOffsetDirection:t.fields.threePrimeOffsetDirection,referenceBuild:t.fields.referenceBuild,ensemblVersion:+t.fields.ensemblVersion}},organizationId:t.organizationId,comment:t.comment}}(this.variantId,t);n&&(this.mutationState=this.reviseVariantMutator.mutate(this.submitRevisionsGQL,{input:n}))}static#e=Y=()=>(this.\u0275fac=function(n){return new(n||D)(e.rXU(p.q3K),e.rXU(p.twV),e.rXU(R.N),e.rXU(F.gRc))},this.\u0275cmp=e.VBU({type:D,selectors:[["cvc-fusion-variant-revise-form"]],inputs:{variantId:"variantId"},standalone:!1,decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Variant",3,"redirectUrl","mutationState","successMessage"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(n,s){if(1&n&&(e.j41(0,"cvc-form-submission-status-display",2),e.DNE(1,$e,3,2,"ng-template",null,0,e.C5r)(3,Ne,2,6,"form",3)(4,je,1,0,"ng-template",null,1,e.C5r),e.k0s()),2&n){const r=e.sdS(2),l=e.sdS(5);e.Y8G("redirectUrl",s.url)("mutationState",s.mutationState)("successMessage",r),e.R7$(3),e.Y8G("ngIf",s.model&&s.fields)("ngIfElse",l)}},dependencies:[c.bT,m.CA,d.qT,d.cb,d.j4,T.JA,G.G],encapsulation:2,changeDetection:0}),this)},Y());O=(0,_.Cg)([(0,u.d)()],O);const Ae=(0,C.A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Variant"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{xs:24,md:12,lg:12},{xs:24,md:12,lg:12},{xs:24,lg:12}]}},fieldGroup:[{key:"aliases",type:"tag-multi-input",props:{label:"Aliases",description:"List any aliases commonly used to refer to this Variant",placeholder:"Enter Alias and hit return"}},{key:"variantTypeIds",type:"variant-type-multi-select"}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",placeholder:"Please enter a comment describing your revisions.",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Variant Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{aliases:void 0,variantTypeIds:void 0},comment:void 0,organizationId:void 0});var Q;const Qe=()=>({});function Je(i,t){if(1&i&&(e.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),e.j41(1,"a",4),e.EFF(2,"here."),e.k0s()),2&i){const n=e.XpG();e.R7$(),e.Y8G("href",e.mNQ(n.url),e.B4B)}}function He(i,t){if(1&i){const n=e.RV6();e.j41(0,"form",5),e.bIt("ngSubmit",function(){o.eBV(n);const r=e.XpG();return o.Njj(r.onSubmit(r.model))}),e.j41(1,"formly-form",6),e.bIt("modelChange",function(r){o.eBV(n);const l=e.XpG();return o.Njj(l.model=r)}),e.k0s()()}if(2&i){const n=e.XpG();e.Y8G("formGroup",n.form),e.R7$(),e.Y8G("form",n.form)("fields",n.fields)("model",n.model)("options",e.lJ4(5,Qe))}}function Ze(i,t){1&i&&e.EFF(0," Loading Variant... ")}let z=(class ${constructor(t,n,s,r){this.revisableFieldsGQL=t,this.submitRevisionsGQL=n,this.networkErrorService=s,this.cdr=r,this.form=new d.J3({}),this.fields=Ae,this.reviseVariantMutator=new x.E(s)}ngOnInit(){this.url=`/variants/${this.variantId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({variantId:this.variantId}).pipe((0,u.s)(this)).subscribe({next:({data:{variant:t}})=>{var i;t&&"RegionVariant"==t.__typename&&(this.model={id:t.id,fields:(i=t,{aliases:i.variantAliases,variantTypeIds:i.variantTypes.map(t=>t.id)})},this.cdr.detectChanges())},error:t=>{console.error("Error retrieving Variant."),console.error(t)},complete:()=>{}})}onSubmit(t){if(!this.variantId)return;let n=function Ye(i,t){const n=t.fields;if(t.comment)return{id:i,fields:{aliases:n.aliases||[],variantTypeIds:n.variantTypeIds||[]},organizationId:t.organizationId,comment:t.comment}}(this.variantId,t);n&&(this.mutationState=this.reviseVariantMutator.mutate(this.submitRevisionsGQL,{input:n}))}static#e=Q=()=>(this.\u0275fac=function(n){return new(n||$)(e.rXU(p.ylT),e.rXU(p.lcQ),e.rXU(R.N),e.rXU(F.gRc))},this.\u0275cmp=e.VBU({type:$,selectors:[["cvc-region-variant-revise-form"]],inputs:{variantId:"variantId"},standalone:!1,decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Variant",3,"redirectUrl","mutationState","successMessage"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(n,s){if(1&n&&(e.j41(0,"cvc-form-submission-status-display",2),e.DNE(1,Je,3,2,"ng-template",null,0,e.C5r)(3,He,2,6,"form",3)(4,Ze,1,0,"ng-template",null,1,e.C5r),e.k0s()),2&n){const r=e.sdS(2),l=e.sdS(5);e.Y8G("redirectUrl",s.url)("mutationState",s.mutationState)("successMessage",r),e.R7$(3),e.Y8G("ngIf",s.model)("ngIfElse",l)}},dependencies:[c.bT,m.CA,d.qT,d.cb,d.j4,T.JA,G.G],encapsulation:2,changeDetection:0}),this)},Q());function Ke(i,t){if(1&i&&e.nrm(0,"cvc-gene-variant-revise-form",2),2&i){const n=e.XpG(2);e.Y8G("variantId",n.variantId)}}function We(i,t){if(1&i&&e.nrm(0,"cvc-factor-variant-revise-form",2),2&i){const n=e.XpG(2);e.Y8G("variantId",n.variantId)}}function qe(i,t){if(1&i&&e.nrm(0,"cvc-fusion-variant-revise-form",2),2&i){const n=e.XpG(2);e.Y8G("variantId",n.variantId)}}function et(i,t){if(1&i&&e.nrm(0,"cvc-region-variant-revise-form",2),2&i){const n=e.XpG(2);e.Y8G("variantId",n.variantId)}}function tt(i,t){if(1&i&&(e.qex(0),e.nVh(1,Ke,1,1,"cvc-gene-variant-revise-form",2)(2,We,1,1,"cvc-factor-variant-revise-form",2)(3,qe,1,1,"cvc-fusion-variant-revise-form",2)(4,et,1,1,"cvc-region-variant-revise-form",2),e.bVm()),2&i){let n;const s=e.XpG();e.R7$(),e.vxM("GeneVariant"===(n=s.variantType)?1:"FactorVariant"===n?2:"FusionVariant"===n?3:"RegionVariant"===n?4:-1)}}function it(i,t){1&i&&e.EFF(0,"Loading Variant...")}z=(0,_.Cg)([(0,u.d)()],z);const nt=[{path:"",component:le,data:{breadcrumb:"Revise"},children:[{path:"",redirectTo:"suggest",pathMatch:"full"},{path:"suggest",component:(()=>{var i;class t{constructor(s){this.route=s,this.routeParams$=this.route.params.subscribe(r=>{this.variantId=+r.variantId}),this.queryParams$=this.route.queryParamMap.subscribe(r=>{r.has("variantType")&&(this.variantType=r.get("variantType"))})}ngOnDestroy(){this.routeParams$.unsubscribe(),this.queryParams$.unsubscribe()}static#e=i=()=>(this.\u0275fac=function(r){return new(r||t)(e.rXU(E.nX))},this.\u0275cmp=e.VBU({type:t,selectors:[["cvc-variants-suggest"]],standalone:!1,decls:3,vars:2,consts:[["loadingVariant",""],[4,"ngIf","ngIfElse"],[3,"variantId"]],template:function(r,l){if(1&r&&e.DNE(0,tt,5,1,"ng-container",1)(1,it,1,0,"ng-template",null,0,e.C5r),2&r){const M=e.sdS(2);e.Y8G("ngIf",l.variantId&&l.variantType)("ngIfElse",M)}},dependencies:[c.bT,P,w,O,z],encapsulation:2}))}return i(),t})(),data:{breadcrumb:"Suggest Revision"}}]}];let rt=(()=>{var i;class t{static#e=i=()=>(this.\u0275fac=function(r){return new(r||t)},this.\u0275mod=e.$C({type:t}),this.\u0275inj=o.G2t({imports:[j.iI.forChild(nt),me,j.iI]}))}return i(),t})();var st=a(14124),at=a(13688),ot=a(64917);let lt=(()=>{var i;class t{static#e=i=()=>(this.\u0275fac=function(r){return new(r||t)},this.\u0275mod=e.$C({type:t}),this.\u0275inj=o.G2t({imports:[c.MD,rt,h.ZJ,X.Y3,L.kT,ot.i,st.C,at.A,S.f3]}))}return i(),t})()}}]);