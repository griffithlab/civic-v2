"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[4280],{4385:(V,Q,o)=>{o.d(Q,{L:()=>xt});var g,_=o(313),a=o(2181),R=o(7398),O=o(4223),n=o(5676),t=o(5879),m=o(6814),M=o(8091),y=o(2840),S=o(855),N=o(1958),A=o(95),P=o(655),I=o(2024),Z=o(1791),J=o(951),B=o(7473),z=o(6223),E=o(3599),C=o(2962),b=o(3903),Y=o(6109),D=o(2669),j=o(5883),k=o(1446),T=o(4082);function v(c,p){if(1&c){const s=t.EpF();t.TgZ(0,"nz-alert",8),t.NdJ("nzOnClose",function(){t.CHM(s);const h=t.oxw();return t.KtG(h.onSuccessBannerClose())}),t.qZA()}}function f(c,p){if(1&c&&t._UZ(0,"nz-alert",9),2&c){t.oxw();const s=t.MAs(4);t.Q6J("nzDescription",s)}}function x(c,p){if(1&c&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&c){const s=p.$implicit;t.xp6(1),t.Oqu(s)}}function w(c,p){if(1&c&&(t.TgZ(0,"ul"),t.YNc(1,x,2,1,"li",10),t.qZA()),2&c){const s=t.oxw();t.xp6(1),t.Q6J("ngForOf",s.errorMessages)}}function q(c,p){}function X(c,p){1&c&&t.YNc(0,q,0,0,"ng-template")}function K(c,p){if(1&c&&(t.ynx(0),t.YNc(1,X,1,0,null,14),t.BQk()),2&c){t.oxw();const s=t.MAs(6);t.xp6(1),t.Q6J("ngTemplateOutlet",s)}}function en(c,p){}function on(c,p){1&c&&t.YNc(0,en,0,0,"ng-template")}function an(c,p){if(1&c&&(t.TgZ(0,"span",15),t.YNc(1,on,1,0,null,14),t.qZA()),2&c){t.oxw();const s=t.MAs(6);t.xp6(1),t.Q6J("ngTemplateOutlet",s)}}function sn(c,p){if(1&c&&(t.TgZ(0,"button",16),t._uU(1),t.ALo(2,"enumToTitle"),t.qZA()),2&c){const s=t.oxw().ngrxLet,u=t.oxw();t.Q6J("disabled",!(void 0!==u.comment&&u.comment.length>=10&&s.signedIn))("nzTooltipTrigger",u.selectedOrg?"hover":null)("nzTooltipTitle","For "+(null==u.selectedOrg?null:u.selectedOrg.name)),t.xp6(1),t.hij(" Flag ",t.lcZ(2,4,u.flaggable.entityType)," ")}}function $(c,p){if(1&c&&(t.ynx(0),t.TgZ(1,"cvc-form-buttons"),t.YNc(2,K,2,1,"ng-container",11),t.YNc(3,an,2,1,"ng-template",null,12,t.W1O),t.YNc(5,sn,3,6,"ng-template",null,13,t.W1O),t.qZA(),t.BQk()),2&c){const s=p.ngrxLet,u=t.MAs(4);t.xp6(2),t.Q6J("ngIf",s.signedIn)("ngIfElse",u)}}let L=((g=class{constructor(p,s,u){this.gql=p,this.viewerService=s,this.networkErrorService=u,this.errorMessages=[],this.success=!1,this.loading=!1,this.comment="",this.addFlagMutator=new I.U(this.networkErrorService),this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.pipe((0,Z.t)(this)).subscribe(h=>{this.selectedOrg=h.mostRecentOrg})}ngOnInit(){if(void 0===this.flaggable)throw new Error("Must pass a flagggable into flag add component")}onOrgSelected(p){this.selectedOrg=p}submitFlag(){this.errorMessages=[];let s=this.addFlagMutator.mutate(this.gql,{input:{comment:this.comment,subject:this.flaggable,organizationId:this.selectedOrg?.id}});s.submitSuccess$.pipe((0,Z.t)(this)).subscribe(u=>{u&&(this.flagAddedCallback&&this.flagAddedCallback(),this.success=!0,this.comment="")}),s.submitError$.pipe((0,Z.t)(this)).subscribe(u=>{u.length>0&&(this.errorMessages=u)}),s.isSubmitting$.pipe((0,Z.t)(this)).subscribe(u=>{this.loading=u})}onSuccessBannerClose(){this.success=!1}}).\u0275fac=function(p){return new(p||g)(t.Y36(_.B0s),t.Y36(J.a),t.Y36(B.Y))},g.\u0275cmp=t.Xpm({type:g,selectors:[["cvc-flag-add-form"]],inputs:{flaggable:"flaggable",flagAddedCallback:"flagAddedCallback"},decls:11,vars:5,consts:[["nzType","inner"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription",4,"ngIf"],["errorContents",""],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[4,"ngrxLet"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to flag entity."],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small","nz-tooltip","",3,"disabled","nzTooltipTrigger","nzTooltipTitle"]],template:function(p,s){1&p&&(t.TgZ(0,"nz-card",0),t.YNc(1,v,1,0,"nz-alert",1),t.YNc(2,f,1,1,"nz-alert",2),t.YNc(3,w,2,1,"ng-template",null,3,t.W1O),t.TgZ(5,"form",4),t.NdJ("ngSubmit",function(){return s.submitFlag()}),t.TgZ(6,"cvc-comment-input-form",5),t.NdJ("commentChange",function(h){return s.comment=h}),t.qZA(),t.TgZ(7,"nz-spin",6)(8,"nz-form-item")(9,"nz-form-control"),t.YNc(10,$,7,2,"ng-container",7),t.qZA()()()()()),2&p&&(t.xp6(1),t.Q6J("ngIf",s.success),t.xp6(1),t.Q6J("ngIf",s.errorMessages.length>0),t.xp6(4),t.Q6J("comment",s.comment),t.xp6(1),t.Q6J("nzSpinning",s.loading),t.xp6(3),t.Q6J("ngrxLet",s.viewer$))},dependencies:[m.sg,m.O5,m.tP,z._Y,z.JL,z.F,M.eJ,A.t3,A.SK,E.Lr,E.Nx,E.Fd,y.ix,S.w,N.dQ,C.bd,b.r,Y.SY,D.W,j.Z,k.b,T.I],encapsulation:2,changeDetection:0}),g);L=(0,P.gn)([(0,Z.c)()],L);var tn,G=o(8645),H=o(9773),ln=o(2574),mn=o(2392),dn=o(804),fn=o(6987),pn=o(551),un=o(356),vn=o(2384),zn=o(7417);function Cn(c,p){if(1&c){const s=t.EpF();t.TgZ(0,"nz-alert",4),t.NdJ("nzOnClose",function(){t.CHM(s);const h=t.oxw();return t.KtG(h.onSuccessBannerClose())}),t.qZA()}}function Tn(c,p){}function xn(c,p){1&c&&t.YNc(0,Tn,0,0,"ng-template")}function hn(c,p){if(1&c&&(t.ynx(0),t.YNc(1,xn,1,0,null,9),t.BQk()),2&c){t.oxw(2);const s=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",s)}}function yn(c,p){if(1&c&&(t.ynx(0),t.YNc(1,hn,2,1,"ng-container",5),t.BQk()),2&c){const s=t.oxw().ngrxLet,u=t.MAs(5),h=t.oxw();t.xp6(1),t.Q6J("ngIf",s.isEditor||s.isAdmin||h.flag.openActivity.user.id===s.id)("ngIfElse",u)}}function An(c,p){}function Rn(c,p){1&c&&t.YNc(0,An,0,0,"ng-template")}function On(c,p){if(1&c&&(t.TgZ(0,"span",10),t.YNc(1,Rn,1,0,null,9),t.qZA()),2&c){t.oxw();const s=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",s)}}function Fn(c,p){}function Ln(c,p){1&c&&t.YNc(0,Fn,0,0,"ng-template")}function Zn(c,p){if(1&c&&(t.TgZ(0,"span",11),t.YNc(1,Ln,1,0,null,9),t.qZA()),2&c){t.oxw();const s=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",s)}}function bn(c,p){if(1&c){const s=t.EpF();t.TgZ(0,"button",13),t.NdJ("nzPopoverVisibleChange",function(h){t.CHM(s);const U=t.oxw(3);return t.KtG(U.flagResolvePopoverVisible=h)})("click",function(){t.CHM(s);const h=t.oxw(3);return t.KtG(h.flagResolvePopoverVisible=!h.flagResolvePopoverVisible)}),t._uU(1," Resolve Flag "),t._UZ(2,"i",14),t.qZA()}if(2&c){const s=t.oxw(2).ngrxLet,u=t.oxw(),h=t.MAs(3),U=t.MAs(5);t.Q6J("nzPopoverTitle",h)("nzPopoverVisible",u.flagResolvePopoverVisible)("nzPopoverContent",U)("nzPopoverTrigger",void 0)("disabled",!s.signedIn||s.isCurator&&u.flag.openActivity.user.id!=s.id)}}function Mn(c,p){if(1&c&&t.YNc(0,bn,3,5,"button",12),2&c){const s=t.oxw(2);t.Q6J("ngIf",!s.success)}}function En(c,p){if(1&c&&(t.ynx(0),t.YNc(1,yn,2,2,"ng-container",5),t.YNc(2,On,2,1,"ng-template",null,6,t.W1O),t.YNc(4,Zn,2,1,"ng-template",null,7,t.W1O),t.YNc(6,Mn,1,1,"ng-template",null,8,t.W1O),t.BQk()),2&c){const s=p.ngrxLet,u=t.MAs(3);t.xp6(1),t.Q6J("ngIf",s.signedIn)("ngIfElse",u)}}const Sn=function(){return{float:"right"}};function Nn(c,p){if(1&c){const s=t.EpF();t._uU(0," Resolve Flag "),t.TgZ(1,"span",15)(2,"i",16),t.NdJ("click",function(){t.CHM(s);const h=t.oxw();return h.flagResolvePopoverVisible=!1,t.KtG(h.errorMessages=[])}),t.qZA()()}2&c&&(t.xp6(1),t.Q6J("ngStyle",t.DdM(1,Sn)))}function Qn(c,p){if(1&c&&t._UZ(0,"nz-alert",24),2&c){t.oxw();const s=t.MAs(2);t.Q6J("nzDescription",s)}}function In(c,p){if(1&c&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&c){const s=p.$implicit;t.xp6(1),t.Oqu(s)}}function Pn(c,p){if(1&c&&(t.TgZ(0,"ul"),t.YNc(1,In,2,1,"li",25),t.qZA()),2&c){const s=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",s.errorMessages)}}function Jn(c,p){if(1&c){const s=t.EpF();t.YNc(0,Qn,1,1,"nz-alert",17),t.YNc(1,Pn,2,1,"ng-template",null,18,t.W1O),t.TgZ(3,"nz-card",19)(4,"form",20),t.NdJ("ngSubmit",function(){t.CHM(s);const h=t.oxw();return t.KtG(h.resolveFlag())}),t.TgZ(5,"cvc-comment-input-form",21),t.NdJ("commentChange",function(h){t.CHM(s);const U=t.oxw();return t.KtG(U.comment=h)}),t.qZA(),t.TgZ(6,"nz-spin",22)(7,"nz-form-item")(8,"nz-form-control")(9,"cvc-form-buttons")(10,"button",23),t._uU(11," Resolve "),t.qZA()()()()()()()}if(2&c){const s=t.oxw();t.Q6J("ngIf",s.errorMessages.length>0),t.xp6(5),t.Q6J("comment",s.comment),t.xp6(1),t.Q6J("nzSpinning",s.loading),t.xp6(4),t.Q6J("disabled",!(void 0!==s.comment&&s.comment.length>=10))("nzTooltipTrigger",s.selectedOrg?"hover":null)("nzTooltipTitle","For "+(null==s.selectedOrg?null:s.selectedOrg.name))}}let cn=((tn=class{constructor(p,s,u){this.gql=p,this.viewerService=s,this.networkErrorService=u,this.errorMessages=[],this.loading=!1,this.success=!1,this.flagResolvePopoverVisible=!1,this.resolveFlagMutator=new I.U(this.networkErrorService),this.viewer$=this.viewerService.viewer$}ngOnInit(){if(void 0===this.flag)throw new Error("Must pass a Flag in to resolve component.");this.viewerService.viewer$.pipe((0,Z.t)(this)).subscribe(p=>{this.selectedOrg=p.mostRecentOrg})}onOrgSelected(p){this.selectedOrg=p}resolveFlag(){if(this.comment){this.errorMessages=[];let p=this.resolveFlagMutator.mutate(this.gql,{input:{id:this.flag.id,comment:this.comment,organizationId:this.selectedOrg?.id}});p.submitSuccess$.pipe((0,Z.t)(this)).subscribe(s=>{s&&(this.flagResolvePopoverVisible=!1,this.success=!0,this.flagResolvedCallback&&this.flagResolvedCallback())}),p.submitError$.pipe((0,Z.t)(this)).subscribe(s=>{s.length>0&&(this.success=!1,this.errorMessages=s)}),p.isSubmitting$.pipe((0,Z.t)(this)).subscribe(s=>{this.loading=s})}}onSuccessBannerClose(){this.success=!1,this.flagResolvedCallback&&this.flagResolvedCallback()}}).\u0275fac=function(p){return new(p||tn)(t.Y36(_.EwB),t.Y36(J.a),t.Y36(B.Y))},tn.\u0275cmp=t.Xpm({type:tn,selectors:[["cvc-flag-resolve-form"]],inputs:{flag:"flag",flagResolvedCallback:"flagResolvedCallback"},decls:6,vars:2,consts:[["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],[4,"ngrxLet"],["flagResolvePopoverTitleTemplate",""],["flagResolvePopoverContentTemplate",""],["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["noPermissions",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to resolve flag."],["nz-tooltip","","nzTooltipTitle","If you are not an editor, you can only resolve flags you opened."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click",4,"ngIf"],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click"],["nz-icon","","nzType","caret-down","nzTheme","outline"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription",4,"ngIf"],["errorContents",""],["nzType","inner",2,"width","300px"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small","nz-tooltip","",3,"disabled","nzTooltipTrigger","nzTooltipTitle"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription"],[4,"ngFor","ngForOf"]],template:function(p,s){1&p&&(t.YNc(0,Cn,1,0,"nz-alert",0),t.YNc(1,En,8,2,"ng-container",1),t.YNc(2,Nn,3,2,"ng-template",null,2,t.W1O),t.YNc(4,Jn,12,6,"ng-template",null,3,t.W1O)),2&p&&(t.Q6J("ngIf",s.success),t.xp6(1),t.Q6J("ngrxLet",s.viewer$))},dependencies:[m.sg,m.O5,m.tP,m.PC,z._Y,z.JL,M.eJ,y.ix,S.w,N.dQ,A.t3,A.SK,E.Lr,E.Nx,E.Fd,z.F,b.r,C.bd,zn.lU,pn.Ls,Y.SY,D.W,k.b,j.Z],encapsulation:2}),tn);cn=(0,P.gn)([(0,Z.c)()],cn);var Yn=o(1834),Dn=o(2616),gn=o(5573);function Un(c,p){if(1&c){const s=t.EpF();t.TgZ(0,"nz-alert",5),t.NdJ("nzOnClose",function(){const U=t.CHM(s).$implicit,ht=t.oxw();return t.KtG(ht.onErrorBannerClose(U))}),t.qZA()}2&c&&t.Q6J("nzMessage",p.$implicit)}function Bn(c,p){if(1&c){const s=t.EpF();t.TgZ(0,"nz-alert",6),t.NdJ("nzOnClose",function(){t.CHM(s);const h=t.oxw();return t.KtG(h.onSuccessBannerClose())}),t.qZA()}if(2&c){const s=t.oxw();t.MGl("nzMessage","Revision(s) successfully ",s.success,".")}}function $n(c,p){if(1&c&&t._UZ(0,"cvc-comment-body",15),2&c){const s=t.oxw(2).$implicit;t.Q6J("commentBodySegments",s.openActivity.parsedNote)}}function wn(c,p){if(1&c&&(t.ynx(0),t._UZ(1,"cvc-flag-resolve-form",16),t.BQk()),2&c){const s=t.oxw(2).$implicit,u=t.oxw(2);t.xp6(1),t.Q6J("flag",s)("flagResolvedCallback",u.flagResolvedCallback)}}function jn(c,p){if(1&c&&(t.ynx(0),t._UZ(1,"cvc-comment-body",15),t.BQk()),2&c){const s=t.oxw(3).$implicit;t.xp6(1),t.Q6J("commentBodySegments",s.resolutionActivity.parsedNote)}}function Wn(c,p){if(1&c&&t._UZ(0,"cvc-user-tag",21),2&c){const s=t.oxw(3).$implicit;t.Q6J("user",s.resolutionActivity.user)}}function nn(c,p){if(1&c&&(t.TgZ(0,"nz-row")(1,"nz-col",17),t.YNc(2,jn,2,1,"ng-container",18),t.qZA(),t.TgZ(3,"nz-col",19),t._uU(4," Resolved By "),t.YNc(5,Wn,1,1,"cvc-user-tag",20),t._uU(6),t.ALo(7,"timeAgo"),t.qZA()()),2&c){const s=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngIf",s.resolutionActivity),t.xp6(3),t.Q6J("ngIf",void 0!==s.resolutionActivity),t.xp6(1),t.hij(" ",t.lcZ(7,3,null==s.resolutionActivity?null:s.resolutionActivity.createdAt)," ")}}function Gn(c,p){if(1&c&&(t._UZ(0,"i",22),t.ALo(1,"entityColor"),t._uU(2)),2&c){const s=t.oxw(2).$implicit;t.Q6J("nzTwotoneColor",t.lcZ(1,2,"Flag")),t.xp6(2),t.hij(" FID",s.id," ")}}function Kn(c,p){if(1&c&&(t.TgZ(0,"span")(1,"span",26),t._uU(2,"Flagged By"),t.qZA(),t._UZ(3,"cvc-user-tag",21),t.TgZ(4,"span",26),t._uU(5),t.ALo(6,"timeAgo"),t.qZA()()),2&c){const s=t.oxw(3).$implicit;t.xp6(3),t.Q6J("user",s.openActivity.user),t.xp6(2),t.Oqu(t.lcZ(6,2,s.openActivity.createdAt))}}function Vn(c,p){if(1&c&&t._UZ(0,"cvc-status-tag",27),2&c){const s=t.oxw(3).$implicit;t.Q6J("status",s.state)}}function kn(c,p){1&c&&(t.TgZ(0,"nz-space",23),t.YNc(1,Kn,7,4,"span",24),t.YNc(2,Vn,1,1,"cvc-status-tag",25),t.qZA())}function Hn(c,p){if(1&c&&(t.TgZ(0,"nz-card",10),t.YNc(1,$n,1,1,"cvc-comment-body",11),t._UZ(2,"nz-divider"),t.YNc(3,wn,2,2,"ng-container",3),t.YNc(4,nn,8,5,"ng-template",null,12,t.W1O),t.YNc(6,Gn,3,4,"ng-template",null,13,t.W1O),t.YNc(8,kn,3,0,"ng-template",null,14,t.W1O),t.qZA()),2&c){const s=t.MAs(5),u=t.MAs(7),h=t.MAs(9),U=t.oxw().$implicit;t.Q6J("nzTitle",u)("nzExtra",h),t.xp6(1),t.Q6J("ngIf",U.openActivity),t.xp6(2),t.Q6J("ngIf","OPEN"==U.state)("ngIfElse",s)}}function qn(c,p){1&c&&(t.ynx(0),t.YNc(1,Hn,10,5,"nz-card",9),t.BQk())}function Xn(c,p){if(1&c&&(t.ynx(0),t.TgZ(1,"nz-space",7),t.YNc(2,qn,2,0,"ng-container",8),t.qZA(),t.BQk()),2&c){const s=t.oxw();t.xp6(2),t.Q6J("ngForOf",s.flags)}}function nt(c,p){1&c&&t._UZ(0,"nz-empty",28)}let tt=(()=>{class c{constructor(s){this.viewerService=s,this.isLoading=!1,this.success=!1,this.destroy$=new G.x}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(s=>{this.mostRecentOrg=s.mostRecentOrg})}setupMutationResultHandlers(s,u){s.submitSuccess$.pipe((0,H.R)(this.destroy$)).subscribe(h=>{h&&(this.isLoading=!1,this.errors=void 0,this.success=u)}),s.submitError$.pipe((0,H.R)(this.destroy$)).subscribe(h=>{h.length>0&&(this.isLoading=!1,this.success=!1,this.errors=h)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(s){this.errors=this.errors?.filter(u=>u!=s)}onSuccessBannerClose(){this.success=!1}}return c.\u0275fac=function(s){return new(s||c)(t.Y36(J.a))},c.\u0275cmp=t.Xpm({type:c,selectors:[["cvc-flag-list"]],inputs:{flags:"flags",flagResolvedCallback:"flagResolvedCallback"},decls:6,vars:4,consts:[["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],["nzTitle","Flags",1,"card-list"],[4,"ngIf","ngIfElse"],["noFlags",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose"],["nzDirection","vertical"],[4,"ngFor","ngForOf"],["nzType","inner",3,"nzTitle","nzExtra",4,"nzSpaceItem"],["nzType","inner",3,"nzTitle","nzExtra"],[3,"commentBodySegments",4,"ngIf"],["flagResolved",""],["flagCardHeaderTitle",""],["flagCardHeaderExtra",""],[3,"commentBodySegments"],[3,"flag","flagResolvedCallback"],["nzSpan","16"],[4,"ngIf"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"user"],["nz-icon","","nzTheme","twotone","nzType","civic-flag",3,"nzTwotoneColor"],["nzSize","small"],[4,"nzSpaceItem"],[3,"status",4,"nzSpaceItem"],["nz-typography","","nzType","secondary"],[3,"status"],["nzNotFoundImage","simple","nzNotFoundContent","No Flags matching filters"]],template:function(s,u){if(1&s&&(t.YNc(0,Un,1,1,"nz-alert",0),t.YNc(1,Bn,1,1,"nz-alert",1),t.TgZ(2,"nz-card",2),t.YNc(3,Xn,3,1,"ng-container",3),t.YNc(4,nt,1,0,"ng-template",null,4,t.W1O),t.qZA()),2&s){const h=t.MAs(5);t.Q6J("ngForOf",u.errors),t.xp6(1),t.Q6J("ngIf",u.success),t.xp6(2),t.Q6J("ngIf",u.flags&&u.flags.length>0)("ngIfElse",h)}},dependencies:[m.sg,m.O5,A.t3,A.SK,C.bd,ln.NU,ln.$1,mn.ZU,dn.p9,fn.g,pn.Ls,un.I,vn.h,S.w,b.r,cn,Yn.m,Dn.a,gn.x],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}),c})();var et=o(6794),it=o(6928);const _n=function(){return[]};function ot(c,p){if(1&c&&(t._UZ(0,"cvc-flag-list",12),t.ALo(1,"ngrxPush")),2&c){const s=t.oxw(2);t.Q6J("flags",t.lcZ(1,2,s.flags$)||t.DdM(4,_n))("flagResolvedCallback",s.refresh)}}function at(c,p){if(1&c){const s=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(s);const h=t.oxw(2).ngrxLet,U=t.oxw(2);return t.KtG(U.loadMore(null==h?null:h.endCursor))}),t._uU(1," Load More "),t.qZA()}}function st(c,p){1&c&&(t.ynx(0),t.YNc(1,at,2,0,"button",14),t.BQk())}function lt(c,p){if(1&c&&(t.ynx(0),t.YNc(1,st,2,0,"ng-container",13),t.BQk()),2&c){const s=p.ngrxLet;t.xp6(1),t.Q6J("ngIf",s&&(null==s?null:s.hasNextPage)&&s.endCursor)}}function ct(c,p){if(1&c&&t._UZ(0,"cvc-flag-add-form",16),2&c){const s=t.oxw(2);t.Q6J("flaggable",s.flaggable)("flagAddedCallback",s.refresh)}}function _t(c,p){if(1&c&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&c){const s=p.$implicit;t.xp6(1),t.Oqu(s.displayName)}}function rt(c,p){if(1&c){const s=t.EpF();t.TgZ(0,"cvc-participant-list",17),t.NdJ("participantSelectedEvent",function(h){t.CHM(s);const U=t.oxw(2);return t.KtG(U.onStateSelected(h))}),t.YNc(1,_t,2,1,"ng-template",null,18,t.W1O),t.qZA()}if(2&c){const s=t.oxw(2);t.Q6J("preselectedOption",s.selectableStates[0])("participantList",s.selectableStates)}}function pt(c,p){if(1&c&&t._UZ(0,"nz-avatar",22),2&c){const s=t.oxw().$implicit;t.Q6J("nzSrc",s.profileImagePath)}}function gt(c,p){if(1&c&&(t._UZ(0,"nz-avatar",23),t.ALo(1,"uppercase")),2&c){const s=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,s.username.charAt(0)))}}function mt(c,p){if(1&c&&(t.YNc(0,pt,1,1,"nz-avatar",20),t.YNc(1,gt,2,3,"ng-template",null,21,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&c){const s=p.$implicit,u=t.MAs(2);t.Q6J("ngIf",s.profileImagePath)("ngIfElse",u),t.xp6(4),t.Oqu(s.username)}}function dt(c,p){if(1&c){const s=t.EpF();t.TgZ(0,"cvc-participant-list",19),t.NdJ("participantSelectedEvent",function(h){t.CHM(s);const U=t.oxw(2);return t.KtG(U.onFlaggingUsersSelected(h))}),t.ALo(1,"ngrxPush"),t.YNc(2,mt,5,3,"ng-template",null,18,t.W1O),t.qZA()}if(2&c){const s=t.oxw(2);t.Q6J("participantList",t.lcZ(1,1,s.uniqueFlaggingUsers$)||t.DdM(3,_n))}}function ft(c,p){if(1&c&&t._UZ(0,"nz-avatar",22),2&c){const s=t.oxw().$implicit;t.Q6J("nzSrc",s.profileImagePath)}}function ut(c,p){if(1&c&&(t._UZ(0,"nz-avatar",23),t.ALo(1,"uppercase")),2&c){const s=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,s.username.charAt(0)))}}function vt(c,p){if(1&c&&(t.YNc(0,ft,1,1,"nz-avatar",20),t.YNc(1,ut,2,3,"ng-template",null,21,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&c){const s=p.$implicit,u=t.MAs(2);t.Q6J("ngIf",s.profileImagePath)("ngIfElse",u),t.xp6(4),t.Oqu(s.username)}}function zt(c,p){if(1&c){const s=t.EpF();t.TgZ(0,"cvc-participant-list",24),t.NdJ("participantSelectedEvent",function(h){t.CHM(s);const U=t.oxw(2);return t.KtG(U.onResolvingUsersSelected(h))}),t.ALo(1,"ngrxPush"),t.YNc(2,vt,5,3,"ng-template",null,18,t.W1O),t.qZA()}if(2&c){const s=t.oxw(2);t.Q6J("participantList",t.lcZ(1,1,s.uniqueResolvingUsers$)||t.DdM(3,_n))}}function Ct(c,p){if(1&c&&(t.ynx(0),t.TgZ(1,"nz-row",2)(2,"nz-col",3)(3,"nz-space",4),t.YNc(4,ot,2,5,"cvc-flag-list",5),t.YNc(5,lt,2,1,"ng-container",6),t.YNc(6,ct,1,2,"cvc-flag-add-form",7),t.qZA()(),t.TgZ(7,"nz-col",8)(8,"nz-space",4),t.YNc(9,rt,3,2,"cvc-participant-list",9),t.YNc(10,dt,4,4,"cvc-participant-list",10),t.YNc(11,zt,4,4,"cvc-participant-list",11),t.qZA()()(),t.BQk()),2&c){const s=t.oxw();t.xp6(1),t.Q6J("nzGutter",16),t.xp6(4),t.Q6J("ngrxLet",s.pageInfo$)}}function Tt(c,p){if(1&c&&t._UZ(0,"cvc-flag-add-form",16),2&c){const s=t.oxw();t.Q6J("flaggable",s.flaggable)("flagAddedCallback",s.refresh)}}let xt=(()=>{class c{constructor(s){this.gql=s,this.defaultPageSize=5,this.selectableStates=[{id:1,displayName:"Open",value:_.BQZ.Open},{id:2,displayName:"Resolved",value:_.BQZ.Resolved}]}ngOnInit(){if(null==this.flaggable)throw new Error("Must pass a flaggable into flag list");this.queryRef=this.gql.watch({first:this.defaultPageSize,flaggable:this.flaggable,state:_.BQZ.Open}),this.refresh=()=>{this.queryRef.refetch()},this.results$=this.queryRef.valueChanges,this.flags$=this.results$.pipe((0,O.j)("data","flags","edges"),(0,a.h)(n.ep),(0,R.U)(s=>s.map(u=>u.node))),this.pageInfo$=this.results$.pipe((0,O.j)("data","flags","pageInfo")),this.unfilteredCount$=this.results$.pipe((0,O.j)("data","flags","unfilteredCountForSubject")),this.uniqueFlaggingUsers$=this.results$.pipe((0,R.U)(({data:s})=>s.flags?.uniqueFlaggingUsers)),this.uniqueResolvingUsers$=this.results$.pipe((0,R.U)(({data:s})=>s.flags?.uniqueResolvingUsers))}onFlaggingUsersSelected(s){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},flaggingUserId:s?s.id:void 0})}onResolvingUsersSelected(s){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},resolvingUserId:s?s.id:void 0})}onStateSelected(s){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},state:s?s.value:void 0})}loadMore(s){this.queryRef?.fetchMore({variables:{first:this.defaultPageSize,after:s}})}}return c.\u0275fac=function(s){return new(s||c)(t.Y36(_.rzy))},c.\u0275cmp=t.Xpm({type:c,selectors:[["cvc-flag-list-and-filter"]],inputs:{flaggable:"flaggable"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noFlags",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"flags","flagResolvedCallback",4,"nzSpaceItem"],[4,"ngrxLet"],[3,"flaggable","flagAddedCallback",4,"nzSpaceItem"],["nzSpan","6"],["listTitle","Flag State",3,"preselectedOption","participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Flagging Users",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Resolving Users",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],[3,"flags","flagResolvedCallback"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[3,"flaggable","flagAddedCallback"],["listTitle","Flag State",3,"preselectedOption","participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Flagging Users",3,"participantList","participantSelectedEvent"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["listTitle","Resolving Users",3,"participantList","participantSelectedEvent"]],template:function(s,u){if(1&s&&(t.YNc(0,Ct,12,2,"ng-container",0),t.ALo(1,"ngrxPush"),t.YNc(2,Tt,1,2,"ng-template",null,1,t.W1O)),2&s){const h=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,u.unfilteredCount$))("ngIfElse",h)}},dependencies:[m.O5,M.eJ,y.ix,S.w,N.dQ,A.t3,A.SK,L,tt,et.l,it.Dz,ln.NU,ln.$1,m.gd,M.fM],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}),c})()},7937:(V,Q,o)=>{o.d(Q,{M:()=>$});var _=o(6814),a=o(7907),R=o(8706),O=o(2962),n=o(3599),t=o(6976),m=o(6223),M=o(2524),y=o(9543),S=o(6545),N=o(3903),A=o(2840),P=o(2669),I=o(6109),Z=o(5879);let J=(()=>{class L{}return L.\u0275fac=function(H){return new(H||L)},L.\u0275mod=Z.oAB({type:L}),L.\u0275inj=Z.cJS({imports:[_.ez,m.u5,m.UX,n.U5,A.sL,O.vh,N.L,I.cg,P.j,S.R,M.s,y.w]}),L})();var B=o(4758),z=o(3396),E=o(3043),C=o(2655),b=o(8641),Y=o(6061),D=o(3717),j=o(7528),k=o(551),T=o(7417);let g=(()=>{class L{}return L.\u0275fac=function(H){return new(H||L)},L.\u0275mod=Z.oAB({type:L}),L.\u0275inj=Z.cJS({imports:[_.ez,m.UX,A.sL,n.U5,m.u5,N.L,O.vh,T.$6,k.PV,I.cg,P.j,y.w,S.R]}),L})();var v=o(6928),f=o(2612),x=o(6987),w=o(804),q=o(95),X=o(824),K=o(2574),en=o(5695),on=o(2392);let an=(()=>{class L{}return L.\u0275fac=function(H){return new(H||L)},L.\u0275mod=Z.oAB({type:L}),L.\u0275inj=Z.cJS({imports:[_.ez,q.Jb,t.Ph,O.vh,K.zf,en.X,on.ZJ,v.Rt,w.Xo,f.Wr,x.S,I.cg,t.Ph,T.$6,k.PV,X.o7,m.u5,b.s,R.W,z.Q,Y.N,E.y,j.Q,D.M,C.x,M.s,A.sL,N.L,g,x.S,B.m]}),L})();var sn=o(1595);let $=(()=>{class L{}return L.\u0275fac=function(H){return new(H||L)},L.\u0275mod=Z.oAB({type:L}),L.\u0275inj=Z.cJS({imports:[_.ez,m.u5,A.sL,n.U5,a.aF,A.sL,R.W,t.Ph,O.vh,J,an,w.Xo,sn.N,v.Rt,K.zf,M.s]}),L})()},1801:(V,Q,o)=>{o.d(Q,{Y:()=>a});var _=o(5879);let a=(()=>{class R{constructor(){}}return R.\u0275fac=function(n){return new(n||R)},R.\u0275dir=_.lG2({type:R,selectors:[["","cvcFlaggableOptions",""]]}),R})()},327:(V,Q,o)=>{o.d(Q,{o:()=>B});var _=o(5879),a=o(1801),R=o(6814),O=o(4190),n=o(551),t=o(3640),m=o(6109);const M=["cvcFlaggable",""];function y(z,E){1&z&&_.Hsn(0)}function S(z,E){1&z&&_.GkF(0)}function N(z,E){if(1&z&&(_.ynx(0),_.YNc(1,S,1,0,"ng-container",2),_.BQk()),2&z){_.oxw();const C=_.MAs(1);_.xp6(1),_.Q6J("ngTemplateOutlet",C)}}function A(z,E){if(1&z&&(_.TgZ(0,"a",6),_._UZ(1,"i",7),_.qZA()),2&z){_.oxw();const C=_.MAs(5);_.xp6(1),_.Q6J("nzTooltipTitle",C)}}function P(z,E){if(1&z&&_._uU(0),2&z){const C=_.oxw(2);_.hij(" ",C.flags," open flags ")}}function I(z,E){1&z&&_.GkF(0)}function Z(z,E){if(1&z&&(_.ynx(0),_.TgZ(1,"nz-ribbon",3),_.YNc(2,A,2,1,"ng-template",null,4,_.W1O),_.YNc(4,P,1,1,"ng-template",null,5,_.W1O),_.YNc(6,I,1,0,"ng-container",2),_.qZA(),_.BQk()),2&z){const C=_.MAs(3);_.oxw();const b=_.MAs(1);_.xp6(1),_.Q6J("nzText",C),_.xp6(5),_.Q6J("ngTemplateOutlet",b)}}const J=["*"];let B=(()=>{class z{constructor(C){this.renderer=C}ngOnChanges(){this.flags&&0===this.flags?this.removeFlagged():this.addFlagged()}ngAfterViewInit(){this.flags&&0===this.flags?this.removeFlagged():this.addFlagged()}addFlagged(){this.flaggedChild&&this.renderer.addClass(this.flaggedChild.nativeElement,"flaggedChild")}removeFlagged(){this.flaggedChild&&this.renderer.removeClass(this.flaggedChild.nativeElement,"flaggedChild")}}return z.\u0275fac=function(C){return new(C||z)(_.Y36(_.Qsj))},z.\u0275cmp=_.Xpm({type:z,selectors:[["","cvcFlaggable",""]],contentQueries:function(C,b,Y){if(1&C&&_.Suo(Y,a.Y,5,_.SBq),2&C){let D;_.iGM(D=_.CRH())&&(b.flaggedChild=D.first)}},inputs:{flags:"flags",entity:"entity"},features:[_.TTD],attrs:M,ngContentSelectors:J,decls:4,vars:2,consts:[["flaggedContent",""],[4,"ngIf"],[4,"ngTemplateOutlet"],["nzPlacement","start","nzColor","#ff3333",3,"nzText"],["flaggedText",""],["flaggedTooltip",""],["routerLink","flags",2,"color","#fff"],["nz-icon","","nzType","flag","nzTheme","fill","nz-tooltip","","nzTooltipPlacement","top","nzTooltipColor","#FF3333",3,"nzTooltipTitle"]],template:function(C,b){1&C&&(_.F$t(),_.YNc(0,y,1,0,"ng-template",null,0,_.W1O),_.YNc(2,N,2,1,"ng-container",1),_.YNc(3,Z,7,2,"ng-container",1)),2&C&&(_.xp6(2),_.Q6J("ngIf",0===b.flags),_.xp6(1),_.Q6J("ngIf",b.flags))},dependencies:[R.O5,R.tP,O.rH,n.Ls,t.F9,m.SY],encapsulation:2}),z})()},5725:(V,Q,o)=>{o.d(Q,{m:()=>M});var _=o(6814),a=o(6109),R=o(2392),O=o(3640),n=o(551),t=o(4190),m=o(5879);let M=(()=>{class y{}return y.\u0275fac=function(N){return new(N||y)},y.\u0275mod=m.oAB({type:y}),y.\u0275inj=m.cJS({imports:[_.ez,t.Bz,n.PV,O.mS,a.cg,R.ZJ]}),y})()},1665:(V,Q,o)=>{o.d(Q,{i:()=>sn});var _=o(6814),a=o(2962),R=o(6976),O=o(95),n=o(5879);let t=(()=>{class ${}return $.\u0275fac=function(G){return new(G||$)},$.\u0275mod=n.oAB({type:$}),$.\u0275inj=n.cJS({imports:[_.ez,O.Jb]}),$})();var m=o(29),M=o(8641),y=o(2574),S=o(5695),N=o(2392),A=o(6928),P=o(8706),I=o(3396),Z=o(3043),J=o(3717),B=o(565),z=o(804),E=o(2655),C=o(2612),b=o(6987),Y=o(6109),D=o(2840),j=o(3903),k=o(551),T=o(7417),g=o(824),v=o(6223),f=o(2524),x=o(8125),w=o(9543),q=o(4758),X=o(1218),K=o(6061),en=o(8527),on=o(2647),an=o(7554);let sn=(()=>{class ${}return $.\u0275fac=function(G){return new(G||$)},$.\u0275mod=n.oAB({type:$}),$.\u0275inj=n.cJS({imports:[_.ez,O.Jb,R.Ph,a.vh,y.zf,S.X,N.ZJ,A.Rt,z.Xo,C.Wr,b.S,Y.cg,R.Ph,T.$6,k.PV,g.o7,x.q6,b.S,v.u5,m.C,on.k,M.s,t,P.W,I.Q,K.N,Z.y,an.W,X.i,J.M,E.x,w.w,en.u,f.s,q.m,B.cD,D.sL,j.L]}),$})()},6126:(V,Q,o)=>{o.d(Q,{a:()=>He});var _=o(313),a=o(7398),R=o(7921),O=o(4223),n=o(5879),t=o(4190),m=o(6814),M=o(8091),y=o(95),S=o(2574),N=o(5695),A=o(6928),P=o(804),I=o(2840),Z=o(855),J=o(1958),B=o(551),z=o(6794),E=o(8645),C=o(2024),b=o(9773),Y=o(951),D=o(7473),j=o(6976),k=o(2962),T=o(2392),g=o(2612),v=o(6987),f=o(6109),x=o(7417),w=o(8125);let q=(()=>{class e{transform(i){return i?i.replace(/([a-z])([A-Z])/g,"$1 $2"):""}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=n.Yjl({name:"camelToWords",type:e,pure:!0}),e})();const X=["itemTemplate"],K=function(e){return{$implicit:e}};function en(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,r=n.oxw();n.xp6(2),n.Q6J("ngTemplateOutlet",r.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,K,i))}}function on(e,l){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function an(e,l){if(1&e&&(n.TgZ(0,"nz-list-item",9),n.YNc(1,en,3,4,"ng-container",10),n.YNc(2,on,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=l.$implicit,r=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",r)}}function sn(e,l){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw();n.MGl("nzNoResult","No ",i.entityType,"")}}function $(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,r=n.oxw(3);n.xp6(2),n.Q6J("ngTemplateOutlet",r.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,K,i))}}function L(e,l){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function G(e,l){if(1&e&&(n.TgZ(0,"nz-list-item",17),n.YNc(1,$,3,4,"ng-container",10),n.YNc(2,L,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=l.$implicit,r=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",r)}}function H(e,l){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw(3);n.MGl("nzNoResult","No ",i.entityType," Removed")}}function ln(e,l){if(1&e&&(n.TgZ(0,"nz-list",2),n.YNc(1,G,4,2,"nz-list-item",16),n.YNc(2,H,1,1,"nz-list-empty",4),n.qZA()),2&e){const i=n.oxw(2);n.MGl("nzHeader","Removed ",i.entityType,""),n.xp6(1),n.Q6J("ngForOf",i.diffObject.removedObjects),n.xp6(1),n.Q6J("ngIf",0===i.diffObject.removedObjects.length)}}function mn(e,l){1&e&&(n.ynx(0),n.YNc(1,ln,3,3,"nz-list",7),n.BQk())}function dn(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,r=n.oxw(2);n.xp6(2),n.Q6J("ngTemplateOutlet",r.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,K,i))}}function fn(e,l){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function pn(e,l){if(1&e&&(n.TgZ(0,"nz-list-item",19),n.YNc(1,dn,3,4,"ng-container",10),n.YNc(2,fn,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=l.$implicit,r=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",r)}}function un(e,l){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw(2);n.MGl("nzNoResult","No ",i.entityType," Added")}}function vn(e,l){if(1&e&&(n.TgZ(0,"nz-list",2),n.YNc(1,pn,4,2,"nz-list-item",18),n.YNc(2,un,1,1,"nz-list-empty",4),n.qZA()),2&e){const i=n.oxw();n.MGl("nzHeader","Added ",i.entityType,""),n.xp6(1),n.Q6J("ngForOf",i.diffObject.addedObjects),n.xp6(1),n.Q6J("ngIf",0===i.diffObject.addedObjects.length)}}function zn(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,r=n.oxw(3);n.xp6(2),n.Q6J("ngTemplateOutlet",r.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,K,i))}}function tn(e,l){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function Cn(e,l){if(1&e&&(n.TgZ(0,"nz-list-item",21),n.YNc(1,zn,3,4,"ng-container",10),n.YNc(2,tn,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=l.$implicit,r=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",r)}}function Tn(e,l){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw(3);n.MGl("nzNoResult","No ",i.entityType," Kept")}}function xn(e,l){if(1&e&&(n.TgZ(0,"nz-list",2),n.YNc(1,Cn,4,2,"nz-list-item",20),n.YNc(2,Tn,1,1,"nz-list-empty",4),n.qZA()),2&e){const i=n.oxw(2);n.MGl("nzHeader","Kept ",i.entityType,""),n.xp6(1),n.Q6J("ngForOf",i.diffObject.keptObjects),n.xp6(1),n.Q6J("ngIf",0===i.diffObject.keptObjects.length)}}function hn(e,l){1&e&&(n.ynx(0),n.YNc(1,xn,3,3,"nz-list",7),n.BQk())}function yn(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,r=n.oxw();n.xp6(2),n.Q6J("ngTemplateOutlet",r.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,K,i))}}function An(e,l){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function Rn(e,l){if(1&e&&(n.TgZ(0,"nz-list-item",22),n.YNc(1,yn,3,4,"ng-container",10),n.YNc(2,An,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=l.$implicit,r=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",r)}}function On(e,l){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw();n.MGl("nzNoResult","No ",i.entityType,"")}}let Fn=(()=>{class e{constructor(){}ngOnInit(){if(void 0===this.diffObject)throw new Error("Must specify a diffObject.");if(void 0===this.entityType)throw new Error("Must specify an entityType.")}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["cvc-revision-list-diff"]],contentQueries:function(i,r,d){if(1&i&&n.Suo(d,X,5),2&i){let F;n.iGM(F=n.CRH())&&(r.itemTemplateRef=F.first)}},inputs:{diffObject:"diffObject",entityType:"entityType"},decls:14,vars:12,consts:[[3,"nzGutter"],[3,"nzSpan"],["nzBordered","","nzType","inner","nzSize","small",3,"nzHeader"],["ngClass","current",4,"ngFor","ngForOf"],[3,"nzNoResult",4,"ngIf"],["nzDirection","vertical"],[4,"ngIf"],["nzBordered","","nzType","inner","nzSize","small",3,"nzHeader",4,"nzSpaceItem"],["ngClass","suggested",4,"ngFor","ngForOf"],["ngClass","current"],[4,"ngIf","ngIfElse"],["deleted",""],["nz-typography",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nzColor","error"],[3,"nzNoResult"],["ngClass","removed",4,"ngFor","ngForOf"],["ngClass","removed"],["ngClass","added",4,"ngFor","ngForOf"],["ngClass","added"],["ngClass","kept",4,"ngFor","ngForOf"],["ngClass","kept"],["ngClass","suggested"]],template:function(i,r){1&i&&(n.TgZ(0,"nz-row",0)(1,"nz-col",1)(2,"nz-list",2),n.YNc(3,an,4,2,"nz-list-item",3),n.YNc(4,sn,1,1,"nz-list-empty",4),n.qZA()(),n.TgZ(5,"nz-col",1)(6,"nz-space",5),n.YNc(7,mn,2,0,"ng-container",6),n.YNc(8,vn,3,3,"nz-list",7),n.YNc(9,hn,2,0,"ng-container",6),n.qZA()(),n.TgZ(10,"nz-col",1)(11,"nz-list",2),n.YNc(12,Rn,4,2,"nz-list-item",8),n.YNc(13,On,1,1,"nz-list-empty",4),n.qZA()()()),2&i&&(n.Q6J("nzGutter",16),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(1),n.MGl("nzHeader","Original ",r.entityType," List"),n.xp6(1),n.Q6J("ngForOf",r.diffObject.currentObjects),n.xp6(1),n.Q6J("ngIf",0===r.diffObject.currentObjects.length),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.Q6J("ngIf",r.diffObject.currentObjects.length>0),n.xp6(2),n.Q6J("ngIf",r.diffObject.currentObjects.length>0),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(1),n.MGl("nzHeader","Revised ",r.entityType," List"),n.xp6(1),n.Q6J("ngForOf",r.diffObject.suggestedObjects),n.xp6(1),n.Q6J("ngIf",0===r.diffObject.suggestedObjects.length))},dependencies:[m.mk,m.sg,m.O5,m.tP,j.n_,j.I2,j.AA,y.t3,y.SK,N.j,S.NU,S.$1,q],styles:["[_nghost-%COMP%]{display:block}nz-list[_ngcontent-%COMP%]   .kept[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{background-color:#f6ffed;color:#135200}nz-list[_ngcontent-%COMP%]   .removed[_ngcontent-%COMP%]{background-color:#fff1f0;color:#820014}nz-list[_ngcontent-%COMP%]   .suggested[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-space[_ngcontent-%COMP%]{width:100%}"]}),e})();var Ln=o(355),Zn=o(4138);let bn=(()=>{class e{constructor(){}ngOnInit(){if(void 0===this.left)throw new Error("Must provide a left side of the diff.");if(void 0===this.right)throw new Error("Must provide a right side of the diff.");if(void 0===this.entityType)throw new Error("Must provide a diff.")}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["cvc-revision-value-diff"]],inputs:{currentValue:"currentValue",suggestedValue:"suggestedValue",left:"left",right:"right",entityType:"entityType"},decls:15,vars:10,consts:[[3,"nzGutter"],[3,"nzSpan"],[3,"innerHtml"],[1,"diff","suggested"],[1,"background"]],template:function(i,r){1&i&&(n.TgZ(0,"nz-row",0)(1,"nz-col",1)(2,"h4"),n._uU(3),n.qZA(),n._UZ(4,"div",2),n.qZA(),n.TgZ(5,"nz-col",1)(6,"h4"),n._uU(7),n.qZA(),n._UZ(8,"div",2),n.qZA(),n.TgZ(9,"nz-col",1)(10,"h4"),n._uU(11),n.qZA(),n.TgZ(12,"div",3)(13,"div",4),n._uU(14),n.qZA()()()()),2&i&&(n.Q6J("nzGutter",16),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.hij("Original ",r.entityType,""),n.xp6(1),n.Q6J("innerHtml",r.left,n.oJD),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.hij("",r.entityType," Diff"),n.xp6(1),n.Q6J("innerHtml",r.right,n.oJD),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.hij("Revised ",r.entityType,""),n.xp6(3),n.hij(" ",r.suggestedValue," "))},dependencies:[y.t3,y.SK],styles:[":host{display:block}.diff{overflow:auto;width:100%}.diff .background{padding:4px 8px}.diff.insertions .background{background:#f6ffed;color:#237804}.diff.deletions .background{background:#fff1f0;color:#a8071a}.diff.suggested .background,.diff.original .background{background:#f0f5ff;color:#10239e}.diff del,.diff ins{text-decoration:none}.diff del strong{font-weight:400;background:#fcc}.diff ins strong{font-weight:400;background:#9f9}.diff .del{font-weight:400;background:#fee;color:#b00}.diff .ins{font-weight:400;background:#dfd;color:#080}ul{list-style:none}\n"],encapsulation:2}),e})();var Mn=o(356),En=o(9775),Sn=o(4770),Nn=o(3897),Qn=o(596),In=o(4786),Pn=o(7938),Jn=o(2384),cn=o(1446),Yn=o(2606),Dn=o(1834),gn=o(565),Un=o(3903),Bn=o(4082),$n=o(2616),wn=o(5573);function jn(e,l){if(1&e){const i=n.EpF();n.TgZ(0,"nz-alert",4),n.NdJ("nzOnClose",function(){const F=n.CHM(i).$implicit,W=n.oxw();return n.KtG(W.onErrorBannerClose(F))}),n.qZA()}2&e&&n.Q6J("nzMessage",l.$implicit)}function Wn(e,l){if(1&e){const i=n.EpF();n.TgZ(0,"nz-alert",5),n.NdJ("nzOnClose",function(){n.CHM(i);const d=n.oxw();return n.KtG(d.onSuccessBannerClose())}),n.qZA()}if(2&e){const i=n.oxw();n.MGl("nzMessage","Revision(s) successfully ",i.success,".")}}const nn=function(e,l,i){return{id:e,name:l,link:i}};function Gn(e,l){if(1&e&&n._UZ(0,"cvc-feature-tag",20),2&e){const i=l.$implicit;n.Q6J("feature",n.kEZ(1,nn,i.id,i.displayName,i.link))}}function Kn(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",18),n.YNc(2,Gn,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function Vn(e,l){1&e&&n._UZ(0,"cvc-source-tag",22),2&e&&n.Q6J("source",l.$implicit)}function kn(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",21),n.YNc(2,Vn,1,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function Hn(e,l){if(1&e&&n._UZ(0,"cvc-disease-tag",24),2&e){const i=l.$implicit;n.Q6J("disease",n.kEZ(1,nn,i.id,i.displayName,i.link))}}function qn(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",23),n.YNc(2,Hn,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function Xn(e,l){if(1&e&&n._UZ(0,"cvc-molecular-profile-tag",26),2&e){const i=l.$implicit;n.Q6J("molecularProfile",n.kEZ(1,nn,i.id,i.displayName,i.link))}}function nt(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",25),n.YNc(2,Xn,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function tt(e,l){if(1&e&&n._UZ(0,"cvc-therapy-tag",28),2&e){const i=l.$implicit;n.Q6J("therapy",n.kEZ(1,nn,i.id,i.displayName,i.link))}}function et(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",27),n.YNc(2,tt,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function it(e,l){if(1&e&&n._UZ(0,"cvc-therapy-tag",28),2&e){const i=l.$implicit;n.Q6J("therapy",n.kEZ(1,nn,i.id,i.displayName,i.link))}}function _n(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",27),n.YNc(2,it,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function ot(e,l){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=l.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function at(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",29),n.YNc(2,ot,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function st(e,l){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=l.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function lt(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",30),n.YNc(2,st,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function ct(e,l){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=l.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function _t(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",31),n.YNc(2,ct,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function rt(e,l){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=l.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function pt(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",32),n.YNc(2,rt,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function gt(e,l){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=l.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function mt(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",33),n.YNc(2,gt,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function dt(e,l){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=l.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function ft(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",34),n.YNc(2,dt,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function ut(e,l){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=l.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function vt(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",35),n.YNc(2,ut,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function zt(e,l){if(1&e&&n._UZ(0,"cvc-variant-type-tag",37),2&e){const i=l.$implicit;n.Q6J("variantType",n.kEZ(1,nn,i.id,i.displayName,i.link))}}function Ct(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",36),n.YNc(2,zt,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function Tt(e,l){if(1&e&&n._UZ(0,"cvc-phenotype-tag",39),2&e){const i=l.$implicit;n.Q6J("phenotype",n.kEZ(1,nn,i.id,i.displayName,i.link))}}function xt(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",38),n.YNc(2,Tt,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}const c=function(e,l,i,r,d){return{id:e,name:l,link:i,feature:r,deprecated:d}};function p(e,l){if(1&e&&n._UZ(0,"cvc-feature-variant-tag",41),2&e){const i=l.$implicit;n.Q6J("variant",n.qbA(1,c,i.id,i.displayName,i.link,i.feature,i.deprecated))}}function s(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",40),n.YNc(2,p,1,7,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function u(e,l){if(1&e&&n._UZ(0,"cvc-feature-variant-tag",41),2&e){const i=l.$implicit;n.Q6J("variant",n.qbA(1,c,i.id,i.displayName,i.link,i.feature,i.deprecated))}}function h(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",42),n.YNc(2,u,1,7,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function U(e,l){1&e&&n._UZ(0,"cvc-source-tag",22),2&e&&n.Q6J("source",l.$implicit)}function ht(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",43),n.YNc(2,U,1,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}const Rt=function(e,l,i,r){return{id:e,name:l,link:i,status:r}};function Ot(e,l){if(1&e&&n._UZ(0,"cvc-evidence-tag",45),2&e){const i=l.$implicit;n.Q6J("evidence",n.l5B(1,Rt,i.id,i.displayName,i.link,i.status))}}function Ft(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",44),n.YNc(2,Ot,1,6,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function Lt(e,l){if(1&e&&(n.ynx(0),n._UZ(1,"cvc-revision-value-diff",46),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("currentValue",i.currentValue)("suggestedValue",i.suggestedValue)("left",i.linkoutData.diffValue.left)("right",i.linkoutData.diffValue.right)("entityType",i.linkoutData.name)}}function Zt(e,l){if(1&e&&(n.ynx(0),n._UZ(1,"cvc-comment-body",50),n.BQk()),2&e){const i=n.oxw(2).$implicit;n.xp6(1),n.Q6J("commentBodySegments",i.resolutionActivity.parsedNote)}}function bt(e,l){if(1&e&&n._UZ(0,"cvc-user-tag",51),2&e){const i=n.oxw(2).$implicit;n.Q6J("user",i.resolutionActivity.user)}}function Mt(e,l){if(1&e&&(n.ynx(0),n._UZ(1,"nz-divider"),n.TgZ(2,"nz-row")(3,"nz-col",47),n.YNc(4,Zt,2,1,"ng-container",15),n.qZA(),n.TgZ(5,"nz-col",48),n._uU(6),n.ALo(7,"enumToTitle"),n.YNc(8,bt,1,1,"cvc-user-tag",49),n._uU(9),n.ALo(10,"timeAgo"),n.qZA()(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(4),n.Q6J("ngIf",null==i.resolutionActivity?null:i.resolutionActivity.parsedNote),n.xp6(2),n.hij(" ",n.lcZ(7,4,i.status)," By "),n.xp6(2),n.Q6J("ngIf",void 0!==(null==i.resolutionActivity?null:i.resolutionActivity.user)),n.xp6(1),n.hij(" ",n.lcZ(10,6,null==i.resolutionActivity?null:i.resolutionActivity.createdAt)," ")}}function Et(e,l){if(1&e&&(n.TgZ(0,"span"),n._UZ(1,"i",53),n.ALo(2,"entityColor"),n._uU(3),n.TgZ(4,"span"),n._uU(5),n.qZA()()),2&e){const i=n.oxw(2).$implicit;n.xp6(1),n.Q6J("nzTwotoneColor",n.lcZ(2,3,"Revision")),n.xp6(2),n.hij(" RID",i.id," "),n.xp6(2),n.hij("",i.linkoutData.name," Updated")}}function St(e,l){if(1&e&&n._UZ(0,"i",56),2&e){n.oxw();const i=n.MAs(3);n.Q6J("nzPopoverContent",i)}}function Nt(e,l){if(1&e&&n._UZ(0,"cvc-comment-body",50),2&e){const i=n.oxw(3).$implicit;n.Q6J("commentBodySegments",i.creationActivity.parsedNote)}}function Qt(e,l){1&e&&(n.ynx(0),n.YNc(1,St,1,1,"i",54),n.YNc(2,Nt,1,1,"ng-template",null,55,n.W1O),n.BQk())}function It(e,l){if(1&e&&(n.TgZ(0,"nz-space"),n.YNc(1,Et,6,5,"span",52),n.YNc(2,Qt,4,0,"ng-container",15),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(2),n.Q6J("ngIf",null==i.creationActivity?null:i.creationActivity.parsedNote)}}function Pt(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"span",63),n._uU(2,"Submitted By"),n.qZA(),n._UZ(3,"cvc-user-tag",51),n.BQk()),2&e){const i=n.oxw(3).$implicit;n.xp6(3),n.Q6J("user",i.creationActivity.user)}}function Jt(e,l){1&e&&(n.TgZ(0,"span",63),n._uU(1,"Submitted"),n.qZA())}function Yt(e,l){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,Pt,4,1,"ng-container",61),n.YNc(2,Jt,2,0,"ng-template",null,62,n.W1O),n.TgZ(4,"span",63),n._uU(5),n.ALo(6,"timeAgo"),n.qZA()()),2&e){const i=n.MAs(3),r=n.oxw(2).$implicit;n.xp6(1),n.Q6J("ngIf",null==r.creationActivity?null:r.creationActivity.user)("ngIfElse",i),n.xp6(4),n.Oqu(n.lcZ(6,3,r.createdAt))}}function Dt(e,l){if(1&e&&n._UZ(0,"cvc-status-tag",64),2&e){const i=n.oxw(2).$implicit;n.Q6J("status",i.status)}}function Ut(e,l){1&e&&n._UZ(0,"nz-divider",65)}function Bt(e,l){if(1&e){const i=n.EpF();n.TgZ(0,"a",66),n.NdJ("click",function(){n.CHM(i);const d=n.oxw(2).$implicit,F=n.oxw(3);return n.KtG(F.onChangesetSelected(d.revisionSetId))}),n._uU(1,"Show Group"),n.qZA()}}function $t(e,l){1&e&&n._UZ(0,"nz-divider",65)}function wt(e,l){1&e&&n._UZ(0,"label",69),2&e&&n.Q6J("nzDisabled",!0)}function jt(e,l){1&e&&n._UZ(0,"label",72),2&e&&n.Q6J("nzDisabled",!0)}function Wt(e,l){if(1&e){const i=n.EpF();n.TgZ(0,"label",73),n.NdJ("nzCheckedChange",function(d){n.CHM(i);const F=n.oxw(5).$implicit,W=n.oxw(3);return n.KtG(W.onRevisionCheckboxClicked(d,F.id))}),n.qZA()}}function Gt(e,l){if(1&e&&(n.YNc(0,jt,1,1,"label",70),n.YNc(1,Wt,1,0,"ng-template",null,71,n.W1O)),2&e){const i=n.MAs(2),r=n.oxw(4).$implicit,d=n.oxw(2).ngrxLet;n.Q6J("ngIf",d.isCurator&&d.id!=(null==r.creationActivity?null:r.creationActivity.user.id))("ngIfElse",i)}}function Kt(e,l){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,wt,1,1,"label",67),n.YNc(2,Gt,3,2,"ng-template",null,68,n.W1O),n.qZA()),2&e){const i=n.MAs(3),r=n.oxw(5).ngrxLet;n.xp6(1),n.Q6J("ngIf",!r.signedIn)("ngIfElse",i)}}function Vt(e,l){1&e&&(n.ynx(0),n.YNc(1,$t,1,0,"nz-divider",59),n.YNc(2,Kt,4,2,"span",52),n.BQk())}function kt(e,l){if(1&e&&(n.TgZ(0,"nz-space",57),n.NdJ("click",function(r){return r.stopPropagation()}),n.YNc(1,Yt,7,5,"span",52),n.YNc(2,Dt,1,1,"cvc-status-tag",58),n.YNc(3,Ut,1,0,"nz-divider",59),n.YNc(4,Bt,2,0,"a",60),n.YNc(5,Vt,3,0,"ng-container",15),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(5),n.Q6J("ngIf","NEW"===i.status)}}function Ht(e,l){if(1&e&&(n.TgZ(0,"nz-collapse-panel",11),n.ynx(1,12),n.YNc(2,Kn,4,1,"ng-container",13),n.YNc(3,kn,4,1,"ng-container",13),n.YNc(4,qn,4,1,"ng-container",13),n.YNc(5,nt,4,1,"ng-container",13),n.YNc(6,et,4,1,"ng-container",13),n.YNc(7,_n,4,1,"ng-container",13),n.YNc(8,at,4,1,"ng-container",13),n.YNc(9,lt,4,1,"ng-container",13),n.YNc(10,_t,4,1,"ng-container",13),n.YNc(11,pt,4,1,"ng-container",13),n.YNc(12,mt,4,1,"ng-container",13),n.YNc(13,ft,4,1,"ng-container",13),n.YNc(14,vt,4,1,"ng-container",13),n.YNc(15,Ct,4,1,"ng-container",13),n.YNc(16,xt,4,1,"ng-container",13),n.YNc(17,s,4,1,"ng-container",13),n.YNc(18,h,4,1,"ng-container",13),n.YNc(19,ht,4,1,"ng-container",13),n.YNc(20,Ft,4,1,"ng-container",13),n.YNc(21,Lt,2,5,"ng-container",14),n.BQk(),n.YNc(22,Mt,11,8,"ng-container",15),n.YNc(23,It,3,1,"ng-template",null,16,n.W1O),n.YNc(25,kt,6,1,"ng-template",null,17,n.W1O),n.qZA()),2&e){const i=l.$implicit,r=n.MAs(24),d=n.MAs(26);n.Q6J("nzHeader",r)("nzExtra",d)("nzActive",!0),n.xp6(1),n.Q6J("ngSwitch",i.fieldName),n.xp6(1),n.Q6J("ngSwitchCase","feature_id"),n.xp6(1),n.Q6J("ngSwitchCase","source_ids"),n.xp6(1),n.Q6J("ngSwitchCase","disease_id"),n.xp6(1),n.Q6J("ngSwitchCase","molecular_profile_id"),n.xp6(1),n.Q6J("ngSwitchCase","drug_ids"),n.xp6(1),n.Q6J("ngSwitchCase","therapy_ids"),n.xp6(1),n.Q6J("ngSwitchCase","variant_alias_ids"),n.xp6(1),n.Q6J("ngSwitchCase","molecular_profile_alias_ids"),n.xp6(1),n.Q6J("ngSwitchCase","clinvar_entry_ids"),n.xp6(1),n.Q6J("ngSwitchCase","clingen_code_ids"),n.xp6(1),n.Q6J("ngSwitchCase","acmg_code_ids"),n.xp6(1),n.Q6J("ngSwitchCase","nccn_guideline_id"),n.xp6(1),n.Q6J("ngSwitchCase","hgvs_description_ids"),n.xp6(1),n.Q6J("ngSwitchCase","variant_type_ids"),n.xp6(1),n.Q6J("ngSwitchCase","phenotype_ids"),n.xp6(1),n.Q6J("ngSwitchCase","variant_id"),n.xp6(1),n.Q6J("ngSwitchCase","variant_ids"),n.xp6(1),n.Q6J("ngSwitchCase","source_id"),n.xp6(1),n.Q6J("ngSwitchCase","evidence_item_ids"),n.xp6(2),n.Q6J("ngIf","NEW"!==i.status)}}function qt(e,l){if(1&e&&(n.TgZ(0,"nz-collapse",9),n.YNc(1,Ht,27,24,"nz-collapse-panel",10),n.qZA()),2&e){const i=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",i.untypedRevisons)}}function Xt(e,l){1&e&&n._UZ(0,"nz-empty",74)}function ne(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"nz-card",6),n.YNc(2,qt,2,1,"nz-collapse",7),n.YNc(3,Xt,1,0,"ng-template",null,8,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.MAs(4),r=n.oxw(),d=n.MAs(4);n.xp6(1),n.Q6J("nzExtra",d),n.xp6(1),n.Q6J("ngIf",r.revisions&&r.revisions.length>0)("ngIfElse",i)}}function te(e,l){}function ee(e,l){1&e&&n.YNc(0,te,0,0,"ng-template")}function ie(e,l){if(1&e&&(n.ynx(0),n.YNc(1,ee,1,0,null,83),n.BQk()),2&e){n.oxw();const i=n.MAs(5);n.xp6(1),n.Q6J("ngTemplateOutlet",i)}}function oe(e,l){}function ae(e,l){1&e&&n.YNc(0,oe,0,0,"ng-template")}function se(e,l){if(1&e&&(n.TgZ(0,"span",84),n.YNc(1,ae,1,0,null,83),n.qZA()),2&e){n.oxw();const i=n.MAs(5);n.xp6(1),n.Q6J("ngTemplateOutlet",i)}}function le(e,l){if(1&e){const i=n.EpF();n.TgZ(0,"button",85),n.NdJ("nzPopoverVisibleChange",function(d){n.CHM(i);const F=n.oxw(7);return n.KtG(F.validationPopoverVisible=d)})("click",function(){n.CHM(i);const d=n.oxw(7);return n.KtG(d.validationPopoverVisible=!d.validationPopoverVisible)}),n._uU(1," Review Selected Revisions "),n._UZ(2,"i",86),n.qZA()}if(2&e){const i=n.oxw(2).ngrxLet,r=n.MAs(7),d=n.MAs(9),F=n.oxw(5);n.Q6J("nzPopoverTitle",r)("nzPopoverVisible",F.validationPopoverVisible)("nzPopoverContent",d)("nzPopoverTrigger",void 0)("disabled",0===F.selectedRevisionIds.length||!i.signedIn)}}function ce(e,l){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,ie,2,1,"ng-container",61),n.YNc(2,se,2,1,"ng-template",null,81,n.W1O),n.YNc(4,le,3,5,"ng-template",null,82,n.W1O),n.qZA()),2&e){const i=n.MAs(3),r=n.oxw().ngrxLet;n.xp6(1),n.Q6J("ngIf",r.signedIn)("ngIfElse",i)}}function _e(e,l){if(1&e&&n._UZ(0,"i",88),2&e){n.oxw(4);const i=n.MAs(3);n.Q6J("nzPopoverContent",i)}}function re(e,l){1&e&&(n.ynx(0),n.YNc(1,_e,1,1,"i",87),n.BQk())}const pe=function(){return{float:"right"}};function ge(e,l){if(1&e){const i=n.EpF();n._uU(0," Review Selected Revisions "),n.TgZ(1,"span",89)(2,"i",90),n.NdJ("click",function(){n.CHM(i);const d=n.oxw(6);return n.KtG(d.validationPopoverVisible=!1)}),n.qZA()()}2&e&&(n.xp6(1),n.Q6J("ngStyle",n.DdM(1,pe)))}function me(e,l){if(1&e){const i=n.EpF();n.TgZ(0,"cvc-comment-input-form",93),n.NdJ("commentChange",function(d){n.CHM(i);const F=n.oxw(7);return n.KtG(F.revisionComment=d)}),n.qZA()}if(2&e){const i=n.oxw(7);n.Q6J("comment",i.revisionComment)}}function de(e,l){if(1&e){const i=n.EpF();n.TgZ(0,"span")(1,"button",94),n.NdJ("click",function(){n.CHM(i);const d=n.oxw(8);return n.KtG(d.onRejectRevisionsClicked())}),n._uU(2," Reject Revision "),n.qZA()()}if(2&e){const i=n.oxw(8);n.xp6(1),n.Q6J("nzLoading",i.isLoading)("disabled",void 0===i.revisionComment||i.revisionComment.length<10)("nzTooltipTrigger",i.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==i.mostRecentOrg?null:i.mostRecentOrg.name))}}function fe(e,l){if(1&e){const i=n.EpF();n.TgZ(0,"span")(1,"button",95),n.NdJ("click",function(){n.CHM(i);const d=n.oxw(8);return n.KtG(d.onAcceptRevisionClicked())}),n._uU(2," Accept Revision "),n.qZA()()}if(2&e){const i=n.oxw(4).ngrxLet,r=n.oxw(4);n.xp6(1),n.Q6J("nzLoading",r.isLoading)("disabled",!(0==i&&(void 0===r.revisionComment||""===r.revisionComment||r.revisionComment.length>=10)))("nzTooltipTrigger",r.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==r.mostRecentOrg?null:r.mostRecentOrg.name))}}function ue(e,l){if(1&e&&n._UZ(0,"i",97),2&e){n.oxw(6);const i=n.MAs(3);n.Q6J("nzPopoverContent",i)}}function ve(e,l){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,ue,1,1,"i",96),n.qZA()),2&e){const i=n.oxw(4).ngrxLet;n.xp6(1),n.Q6J("ngIf",i&&i>0)}}function ze(e,l){1&e&&(n.TgZ(0,"span")(1,"nz-space"),n.YNc(2,de,3,4,"span",52),n.YNc(3,fe,3,4,"span",52),n.YNc(4,ve,2,1,"span",52),n.qZA()())}function Ce(e,l){1&e&&(n.TgZ(0,"nz-space",91),n.YNc(1,me,1,1,"cvc-comment-input-form",92),n.YNc(2,ze,5,0,"span",52),n.qZA())}function Te(e,l){if(1&e&&(n.ynx(0),n.TgZ(1,"div",76)(2,"div",77)(3,"nz-space",78),n.YNc(4,ce,6,2,"span",52),n.YNc(5,re,2,0,"ng-container",15),n.qZA(),n.YNc(6,ge,3,2,"ng-template",null,79,n.W1O),n.YNc(8,Ce,3,0,"ng-template",null,80,n.W1O),n.qZA()(),n.BQk()),2&e){const i=n.oxw().ngrxLet;n.xp6(5),n.Q6J("ngIf",i&&i>0)}}function xe(e,l){if(1&e&&(n.ynx(0),n.YNc(1,Te,10,1,"ng-container",2),n.BQk()),2&e){const i=n.oxw(4);n.xp6(1),n.Q6J("ngrxLet",i.viewer$)}}function he(e,l){if(1&e&&(n.TgZ(0,"nz-list-item"),n._uU(1),n.qZA()),2&e){const i=l.$implicit;n.xp6(1),n.Oqu(i)}}function ye(e,l){if(1&e&&(n.TgZ(0,"nz-card",99)(1,"nz-list",100),n.YNc(2,he,2,1,"nz-list-item",101),n.qZA()()),2&e){const i=n.oxw(3).ngrxLet;n.xp6(2),n.Q6J("ngForOf",i)}}function Ae(e,l){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,ye,3,1,"nz-card",98),n.qZA()),2&e){const i=n.oxw(2).ngrxLet;n.xp6(1),n.Q6J("ngIf",i&&i.length>0)}}function Re(e,l){if(1&e&&(n.TgZ(0,"nz-descriptions-item",106),n._uU(1),n.qZA()),2&e){const i=l.$implicit;n.Q6J("nzTitle",i.fieldName),n.xp6(1),n.Oqu(i.error)}}function Oe(e,l){if(1&e&&(n.TgZ(0,"nz-card",103)(1,"nz-descriptions",104),n.YNc(2,Re,2,2,"nz-descriptions-item",105),n.qZA()()),2&e){const i=n.oxw(4).ngrxLet;n.xp6(2),n.Q6J("ngForOf",i)}}function Fe(e,l){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,Oe,3,1,"nz-card",102),n.qZA()),2&e){const i=n.oxw(3).ngrxLet;n.xp6(1),n.Q6J("ngIf",i&&i.length>0)}}function Le(e,l){1&e&&(n.TgZ(0,"nz-space",91),n.YNc(1,Ae,2,1,"span",52),n.YNc(2,Fe,2,1,"span",52),n.qZA())}function Ze(e,l){if(1&e&&(n.ynx(0),n.YNc(1,xe,2,1,"ng-container",2),n.YNc(2,Le,3,0,"ng-template",null,75,n.W1O),n.BQk()),2&e){const i=n.oxw(3);n.xp6(1),n.Q6J("ngrxLet",i.totalErrorCount$)}}function be(e,l){if(1&e&&(n.ynx(0),n.YNc(1,Ze,4,1,"ng-container",2),n.BQk()),2&e){const i=n.oxw(2);n.xp6(1),n.Q6J("ngrxLet",i.genericErrors$)}}function Me(e,l){if(1&e&&n.YNc(0,be,2,1,"ng-container",2),2&e){const i=n.oxw();n.Q6J("ngrxLet",i.validationErrors$)}}let Ee=(()=>{class e{constructor(i,r,d,F,W){this.viewerService=i,this.networkErrorService=r,this.acceptRevisionsGql=d,this.rejectRevisionsGql=F,this.validationGql=W,this.refetchQueries=[],this.selectedRevisionIds=[],this.isLoading=!1,this.success=!1,this.validationPopoverVisible=!1,this.destroy$=new E.x,this.revisionSetSelectedEvent=new n.vpe,this.revisionMutationCompleted=new n.vpe,this.acceptRevisionsMutator=new C.U(this.networkErrorService),this.rejectRevisionsMutator=new C.U(this.networkErrorService),this.viewer$=this.viewerService.viewer$}ngOnChanges(i){this.untypedRevisons=this.revisions,this.selectedRevisionIds=[],this.queryRef&&this.queryRef.refetch({ids:this.selectedRevisionIds})}ngOnInit(){this.viewerService.viewer$.subscribe(i=>{this.mostRecentOrg=i.mostRecentOrg}),this.queryRef=this.validationGql.watch({ids:[]}),this.genericErrors$=this.queryRef.valueChanges.pipe((0,a.U)(({data:i})=>i.validateRevisionsForAcceptance.genericErrors)),this.validationErrors$=this.queryRef.valueChanges.pipe((0,a.U)(({data:i})=>i.validateRevisionsForAcceptance.validationErrors)),this.totalErrorCount$=this.queryRef.valueChanges.pipe((0,a.U)(({data:i})=>i.validateRevisionsForAcceptance.genericErrors.length+i.validateRevisionsForAcceptance.validationErrors.length),(0,R.O)(0)),this.untypedRevisons=this.revisions}onChangesetSelected(i){this.revisionSetSelectedEvent.emit(i)}onRevisionCheckboxClicked(i,r){i?this.selectedRevisionIds.push(r):this.selectedRevisionIds=this.selectedRevisionIds.filter(d=>d!=r),this.queryRef.refetch({ids:this.selectedRevisionIds})}setupMutationResultHandlers(i,r){i.submitSuccess$.pipe((0,b.R)(this.destroy$)).subscribe(d=>{d&&(this.isLoading=!1,this.revisionMutationCompleted.emit(),this.errors=void 0,this.success=r,this.validationPopoverVisible=!1,this.selectedRevisionIds=[],this.revisionComment=void 0)}),i.submitError$.pipe((0,b.R)(this.destroy$)).subscribe(d=>{d.length>0&&(this.isLoading=!1,this.success=!1,this.errors=d,this.validationPopoverVisible=!1,this.selectedRevisionIds=[])})}onRejectRevisionsClicked(){if(this.revisionComment&&""!==this.revisionComment){this.isLoading=!0;let i=this.rejectRevisionsMutator.mutate(this.rejectRevisionsGql,{input:{ids:this.selectedRevisionIds,organizationId:this.mostRecentOrg?.id,comment:this.revisionComment}},{refetchQueries:this.refetchQueries});this.setupMutationResultHandlers(i,"rejected")}}onAcceptRevisionClicked(){this.isLoading=!0;let i=this.acceptRevisionsMutator.mutate(this.acceptRevisionsGql,{input:{ids:this.selectedRevisionIds,organizationId:this.mostRecentOrg?.id,comment:""===this.revisionComment?void 0:this.revisionComment}},{refetchQueries:this.refetchQueries});this.setupMutationResultHandlers(i,"accepted")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(i){this.errors=this.errors?.filter(r=>r!=i)}onSuccessBannerClose(){this.success=!1}}return e.\u0275fac=function(i){return new(i||e)(n.Y36(Y.a),n.Y36(D.Y),n.Y36(_.ti),n.Y36(_.VZq),n.Y36(_.Qzn))},e.\u0275cmp=n.Xpm({type:e,selectors:[["cvc-revision-list"]],inputs:{revisions:"revisions",refetchQueries:"refetchQueries"},outputs:{revisionSetSelectedEvent:"revisionSetSelectedEvent",revisionMutationCompleted:"revisionMutationCompleted"},features:[n.TTD],decls:5,vars:3,consts:[["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],[4,"ngrxLet"],["moderationButtons",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose"],["nzTitle","Revisions",1,"card-list",3,"nzExtra"],["class","revision-list",4,"ngIf","ngIfElse"],["noRevisions",""],[1,"revision-list"],[3,"nzHeader","nzExtra","nzActive",4,"ngFor","ngForOf"],[3,"nzHeader","nzExtra","nzActive"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"],["revCardHeaderTitle",""],["revCardHeaderExtra",""],["entityType","Feature",3,"diffObject"],["itemTemplate",""],[3,"feature"],["entityType","Sources",3,"diffObject"],[3,"source"],["entityType","Disease",3,"diffObject"],[3,"disease"],["entityType","Molecular Profile",3,"diffObject"],[3,"molecularProfile"],["entityType","Therapies",3,"diffObject"],[3,"therapy"],["entityType","Variant Aliases",3,"diffObject"],["entityType","Molecular Profile Aliases",3,"diffObject"],["entityType","ClinVar Entries",3,"diffObject"],["entityType","ClinGen/CGC/VICC Code(s)",3,"diffObject"],["entityType","ACMG/AMP Code(s)",3,"diffObject"],["entityType","NCCN Guideline",3,"diffObject"],["entityType","HGVS Descriptions",3,"diffObject"],["entityType","Variant Types",3,"diffObject"],[3,"variantType"],["entityType","Phenotypes",3,"diffObject"],[3,"phenotype"],["entityType","Variant",3,"diffObject"],[3,"variant"],["entityType","Variants",3,"diffObject"],["entityType","Source",3,"diffObject"],["entityType","Evidence",3,"diffObject"],[3,"evidence"],[3,"currentValue","suggestedValue","left","right","entityType"],["nzSpan","16"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"commentBodySegments"],[3,"user"],[4,"nzSpaceItem"],["nz-icon","","nzTheme","twotone","nzType","civic-revision",3,"nzTwotoneColor"],["nz-popover","","nz-icon","","nzType","comment","nzTheme","outline",3,"nzPopoverContent",4,"nzSpaceItem"],["creationCommentTemplate",""],["nz-popover","","nz-icon","","nzType","comment","nzTheme","outline",3,"nzPopoverContent"],["nzSize","small",3,"click"],[3,"status",4,"nzSpaceItem"],["nzType","vertical",4,"nzSpaceItem"],["nz-button","","nzType","link",3,"click",4,"nzSpaceItem"],[4,"ngIf","ngIfElse"],["noRevisor",""],["nz-typography","","nzType","secondary"],[3,"status"],["nzType","vertical"],["nz-button","","nzType","link",3,"click"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions.",3,"nzDisabled",4,"ngIf","ngIfElse"],["loggedIn",""],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions.",3,"nzDisabled"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Curators may only reject their own revisions.",3,"nzDisabled",4,"ngIf","ngIfElse"],["canRevise",""],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Curators may only reject their own revisions.",3,"nzDisabled"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Select Revision for Acceptance/Rejection",3,"nzCheckedChange"],["nzNotFoundImage","simple","nzNotFoundContent","No Revisions matching filters"],["validationErrorTemplate",""],["nz-row","",2,"margin-top","1em"],["nz-col","","nzSpan","24",2,"text-align","right"],["nzDirection","horizontal"],["validationPopoverTitleTemplate",""],["validationPopoverContentTemplate",""],["notSignedIn",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click"],["nz-icon","","nzType","caret-down","nzTheme","outline"],["nz-icon","","nzType","exclamation-circle","nzTheme","twotone","nzTwotoneColor","red","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent",4,"nzSpaceItem"],["nz-icon","","nzType","exclamation-circle","nzTheme","twotone","nzTwotoneColor","red","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzDirection","vertical"],[3,"comment","commentChange",4,"nzSpaceItem"],[3,"comment","commentChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzSize","small","nzDanger","","nz-tooltip","",3,"nzLoading","disabled","nzTooltipTrigger","nzTooltipTitle","click"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzSize","small","nz-tooltip","",3,"nzLoading","disabled","nzTooltipTrigger","nzTooltipTitle","click"],["nz-icon","","nzTwotoneColor","red","nzType","exclamation-circle","nzTheme","twotone","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent",4,"ngIf"],["nz-icon","","nzTwotoneColor","red","nzType","exclamation-circle","nzTheme","twotone","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent"],["nzTitle","Errors",4,"ngIf"],["nzTitle","Errors"],["nzSize","small"],[4,"ngFor","ngForOf"],["nzTitle","Validation Errors",4,"ngIf"],["nzTitle","Validation Errors"],["nzBordered",""],[3,"nzTitle",4,"ngFor","ngForOf"],[3,"nzTitle"]],template:function(i,r){1&i&&(n.YNc(0,jn,1,1,"nz-alert",0),n.YNc(1,Wn,1,1,"nz-alert",1),n.YNc(2,ne,5,3,"ng-container",2),n.YNc(3,Me,1,1,"ng-template",null,3,n.W1O)),2&i&&(n.Q6J("ngForOf",r.errors),n.xp6(1),n.Q6J("ngIf",r.success),n.xp6(1),n.Q6J("ngrxLet",r.viewer$))},dependencies:[m.sg,m.O5,m.tP,m.PC,m.RF,m.n9,m.ED,y.t3,y.SK,j.n_,j.AA,k.bd,S.NU,S.$1,N.j,T.ZU,P.p9,g.Ie,v.g,f.SY,x.lU,B.Ls,w.R7,w.uj,Fn,Ln.K,Zn.T,bn,Mn.I,En.n,Sn.T,Nn.i,Qn.p,In.O,Pn.j,Jn.h,cn.b,Yn.p,Dn.m,gn.Zv,gn.yH,I.ix,Z.w,J.dQ,Un.r,M.eJ,Bn.I,$n.a,wn.x],styles:["[_nghost-%COMP%]{display:block}nz-list[_ngcontent-%COMP%]   .kept[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{background-color:#f6ffed;color:#135200}nz-list[_ngcontent-%COMP%]   .removed[_ngcontent-%COMP%]{background-color:#fff1f0;color:#820014}nz-list[_ngcontent-%COMP%]   .suggested[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}"]}),e})();function Se(e,l){if(1&e){const i=n.EpF();n.TgZ(0,"cvc-revision-list",14),n.NdJ("revisionSetSelectedEvent",function(d){n.CHM(i);const F=n.oxw(2);return n.KtG(F.onRevisionSetSelected(d))})("revisionMutationCompleted",function(){n.CHM(i);const d=n.oxw(2);return n.KtG(d.refresh())}),n.ALo(1,"ngrxPush"),n.qZA()}if(2&e){const i=n.oxw(2);n.Q6J("revisions",n.lcZ(1,2,i.revisions$))("refetchQueries",i.refetchQueries)}}function Ne(e,l){if(1&e){const i=n.EpF();n.TgZ(0,"button",17),n.NdJ("click",function(){n.CHM(i);const d=n.oxw(2).ngrxLet,F=n.oxw(2);return n.KtG(F.loadMore(null==d?null:d.endCursor))}),n._uU(1," Load More "),n.qZA()}}function Qe(e,l){1&e&&(n.ynx(0),n.YNc(1,Ne,2,0,"button",16),n.BQk())}function Ie(e,l){if(1&e&&(n.ynx(0),n.YNc(1,Qe,2,0,"ng-container",15),n.BQk()),2&e){const i=l.ngrxLet;n.xp6(1),n.Q6J("ngIf",i&&(null==i?null:i.hasNextPage)&&i.endCursor)}}function Pe(e,l){if(1&e){const i=n.EpF();n.TgZ(0,"nz-row")(1,"nz-tag",19),n.NdJ("nzOnClose",function(){n.CHM(i);const d=n.oxw(3);return n.KtG(d.onSetFilterClearClicked())}),n._uU(2),n.qZA()()}if(2&e){const i=n.oxw(3);n.xp6(2),n.hij("Group: ",i.filteredSet,"")}}function Je(e,l){1&e&&(n.TgZ(0,"nz-space",4),n.YNc(1,Pe,3,1,"nz-row",18),n.qZA())}function Ye(e,l){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const i=l.$implicit;n.xp6(1),n.Oqu(i.displayName)}}function De(e,l){if(1&e&&n._UZ(0,"nz-avatar",22),2&e){const i=n.oxw().$implicit;n.Q6J("nzSrc",i.profileImagePath)}}function Ue(e,l){if(1&e&&(n._UZ(0,"nz-avatar",23),n.ALo(1,"uppercase")),2&e){const i=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,i.username.charAt(0)))}}function Be(e,l){if(1&e&&(n.YNc(0,De,1,1,"nz-avatar",20),n.YNc(1,Ue,2,3,"ng-template",null,21,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&e){const i=l.$implicit,r=n.MAs(2);n.Q6J("ngIf",i.profileImagePath)("ngIfElse",r),n.xp6(4),n.Oqu(i.username)}}function $e(e,l){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const i=l.$implicit;n.xp6(1),n.Oqu(i.displayName)}}function we(e,l){if(1&e&&n._UZ(0,"nz-avatar",22),2&e){const i=n.oxw().$implicit;n.Q6J("nzSrc",i.profileImagePath)}}function je(e,l){if(1&e&&(n._UZ(0,"nz-avatar",23),n.ALo(1,"uppercase")),2&e){const i=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,i.username.charAt(0)))}}function We(e,l){if(1&e&&(n.YNc(0,we,1,1,"nz-avatar",20),n.YNc(1,je,2,3,"ng-template",null,21,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&e){const i=l.$implicit,r=n.MAs(2);n.Q6J("ngIf",i.profileImagePath)("ngIfElse",r),n.xp6(4),n.Oqu(i.username)}}const yt=function(){return[]};function Ge(e,l){if(1&e){const i=n.EpF();n.ynx(0),n.TgZ(1,"nz-row",2)(2,"nz-col",3)(3,"nz-space",4),n.YNc(4,Se,2,4,"cvc-revision-list",5),n.YNc(5,Ie,2,1,"ng-container",6),n.qZA()(),n.TgZ(6,"nz-col",7),n.YNc(7,Je,2,0,"nz-space",8),n.TgZ(8,"cvc-participant-list",9),n.NdJ("participantSelectedEvent",function(d){n.CHM(i);const F=n.oxw();return n.KtG(F.onStatusSelected(d))}),n.YNc(9,Ye,2,1,"ng-template",null,10,n.W1O),n.qZA(),n.TgZ(11,"cvc-participant-list",11),n.NdJ("participantSelectedEvent",function(d){n.CHM(i);const F=n.oxw();return n.KtG(F.onRevisorSelected(d))}),n.ALo(12,"ngrxPush"),n.YNc(13,Be,5,3,"ng-template",null,10,n.W1O),n.qZA(),n.TgZ(15,"cvc-participant-list",12),n.NdJ("participantSelectedEvent",function(d){n.CHM(i);const F=n.oxw();return n.KtG(F.onFieldNameSelected(d))}),n.ALo(16,"ngrxPush"),n.YNc(17,$e,2,1,"ng-template",null,10,n.W1O),n.qZA(),n.TgZ(19,"cvc-participant-list",13),n.NdJ("participantSelectedEvent",function(d){n.CHM(i);const F=n.oxw();return n.KtG(F.onResolverSelected(d))}),n.ALo(20,"ngrxPush"),n.YNc(21,We,5,3,"ng-template",null,10,n.W1O),n.qZA()()(),n.BQk()}if(2&e){const i=n.oxw();n.xp6(1),n.Q6J("nzGutter",16),n.xp6(4),n.Q6J("ngrxLet",i.pageInfo$),n.xp6(2),n.Q6J("ngIf",i.filteredSet),n.xp6(1),n.Q6J("preselectedOption",i.preselectedRevisionStatus)("participantList",i.selectableStatuses),n.xp6(3),n.Q6J("participantList",n.lcZ(12,8,i.uniqueRevisors$)||n.DdM(14,yt)),n.xp6(4),n.Q6J("participantList",n.lcZ(16,10,i.revisionFields$)||n.DdM(15,yt)),n.xp6(4),n.Q6J("participantList",n.lcZ(20,12,i.uniqueResolvers$)||n.DdM(16,yt))}}function Ke(e,l){1&e&&(n.ynx(0),n.TgZ(1,"nz-row",25),n._UZ(2,"i",26),n.qZA(),n.BQk())}function Ve(e,l){1&e&&n._UZ(0,"nz-empty",27)}function ke(e,l){if(1&e&&(n.YNc(0,Ke,3,0,"ng-container",0),n.ALo(1,"ngrxPush"),n.YNc(2,Ve,1,0,"ng-template",null,24,n.W1O)),2&e){const i=n.MAs(3),r=n.oxw();n.Q6J("ngIf",n.lcZ(1,2,r.isLoading$))("ngIfElse",i)}}let He=(()=>{class e{constructor(i,r,d,F,W,rn,At,qe,Xe,ni,ti,ei,ii,oi){this.gql=i,this.route=r,this.variantDetailGql=d,this.variantSummaryGql=F,this.variantGroupDetailGql=W,this.variantGroupSummaryGql=rn,this.assertionDetailGql=At,this.assertionSummaryGql=qe,this.featureDetailGql=Xe,this.featureSummaryGql=ni,this.evidenceDetailGql=ti,this.evidenceSummaryGql=ei,this.molecularProfileDetailGql=ii,this.molecularProfileSummaryGql=oi,this.filteredSet=void 0,this.selectableStatuses=[{id:4,displayName:"New",value:_.FJi.New},{id:1,displayName:"Accepted",value:_.FJi.Accepted},{id:2,displayName:"Rejected",value:_.FJi.Rejected},{id:3,displayName:"Superseded",value:_.FJi.Superseded}],this.preselectedRevisionStatus=this.selectableStatuses[0],this.defaultPageSize=10,this.refetchQueries=[]}ngOnInit(){switch(this.routeSub=this.route.params.subscribe(i=>{this.queryParamsSub=this.route.queryParams.subscribe(r=>{let d={first:this.defaultPageSize,subject:{id:this.id,entityType:this.entityType},status:_.FJi.New};r.revisionSetId&&(this.filteredSet=+r.revisionSetId,this.preselectedRevisionStatus=void 0,d.status=void 0,d.revisionSetId=+r.revisionSetId),this.queryRef=this.gql.watch(d);let F=this.queryRef.valueChanges;this.revisions$=F.pipe((0,O.j)("data","revisions","edges"),(0,a.U)(W=>W.map(rn=>rn.node))),this.isLoading$=F.pipe((0,a.U)(W=>W.loading),(0,R.O)(!0)),this.pageInfo$=F.pipe((0,O.j)("data","revisions","pageInfo")),this.uniqueRevisors$=F.pipe((0,a.U)(({data:W})=>W.revisions?.uniqueRevisors)),this.uniqueResolvers$=F.pipe((0,a.U)(({data:W})=>W.revisions?.uniqueResolvers)),this.revisionFields$=F.pipe((0,a.U)(({data:W})=>W.revisions?.revisedFieldNames.map((rn,At)=>({...rn,id:At})))),this.unfilteredCount$=F.pipe((0,O.j)("data","revisions","unfilteredCountForSubject"))})}),this.entityType){case _.oRL.Variant:return this.refetchQueries.push({query:this.variantDetailGql.document,variables:{variantId:this.id}}),void this.refetchQueries.push({query:this.variantSummaryGql.document,variables:{variantId:this.id}});case _.oRL.Assertion:return this.refetchQueries.push({query:this.assertionDetailGql.document,variables:{assertionId:this.id}}),void this.refetchQueries.push({query:this.assertionSummaryGql.document,variables:{assertionId:this.id}});case _.oRL.EvidenceItem:return this.refetchQueries.push({query:this.evidenceDetailGql.document,variables:{evidenceId:this.id}}),void this.refetchQueries.push({query:this.evidenceSummaryGql.document,variables:{evidenceId:this.id}});case _.oRL.Feature:return this.refetchQueries.push({query:this.featureDetailGql.document,variables:{featureId:this.id}}),void this.refetchQueries.push({query:this.featureSummaryGql.document,variables:{featureId:this.id}});case _.oRL.VariantGroup:return this.refetchQueries.push({query:this.variantGroupDetailGql.document,variables:{variantGroupId:this.id}}),void this.refetchQueries.push({query:this.variantGroupSummaryGql.document,variables:{variantGroupId:this.id}});case _.oRL.MolecularProfile:return this.refetchQueries.push({query:this.molecularProfileDetailGql.document,variables:{molecularProfileId:this.id}}),void this.refetchQueries.push({query:this.molecularProfileSummaryGql.document,variables:{molecularProfileId:this.id}})}}ngOnDestroy(){this.routeSub?.unsubscribe(),this.queryParamsSub?.unsubscribe()}onFieldNameSelected(i){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},fieldName:i?i.name:void 0})}onRevisorSelected(i){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},originatingUserId:i?i.id:void 0})}onResolverSelected(i){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},resolvingUserId:i?i.id:void 0})}onStatusSelected(i){this.preselectedRevisionStatus=i,this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},status:i?i.value:void 0})}onRevisionSetSelected(i){this.filteredSet=i,this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},revisionSetId:i||void 0})}onSetFilterClearClicked(){this.filteredSet=void 0,this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},revisionSetId:void 0})}refresh(){this.queryRef.refetch()}loadMore(i){this.queryRef?.fetchMore({variables:{first:this.defaultPageSize,after:i}})}}return e.\u0275fac=function(i){return new(i||e)(n.Y36(_.L5n),n.Y36(t.gz),n.Y36(_.iJT),n.Y36(_.Bo4),n.Y36(_.Qtd),n.Y36(_.q1D),n.Y36(_.A94),n.Y36(_.ejK),n.Y36(_.Aj5),n.Y36(_.HWg),n.Y36(_.pHu),n.Y36(_.sBY),n.Y36(_.AMF),n.Y36(_.Tg0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["cvc-revisions-list-and-filter"]],inputs:{id:"id",entityType:"entityType"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noRevisions",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"revisions","refetchQueries","revisionSetSelectedEvent","revisionMutationCompleted",4,"nzSpaceItem"],[4,"ngrxLet"],["nzSpan","6"],["nzDirection","vertical",4,"ngIf"],["listTitle","Filter by Revision Status",3,"preselectedOption","participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Filter by Revisor",3,"participantList","participantSelectedEvent"],["listTitle","Filter by Field",3,"participantList","participantSelectedEvent"],["listTitle","Filter by Resolver",3,"participantList","participantSelectedEvent"],[3,"revisions","refetchQueries","revisionSetSelectedEvent","revisionMutationCompleted"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[4,"nzSpaceItem"],["nzMode","closeable",3,"nzOnClose"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["noneFound",""],["nzJustify","center"],["nz-icon","","nzType","loading",2,"font-size","32px"],["nzNotFoundImage","simple","nzNotFoundContent","Entity has no Revisions"]],template:function(i,r){if(1&i&&(n.YNc(0,Ge,23,17,"ng-container",0),n.ALo(1,"ngrxPush"),n.YNc(2,ke,4,4,"ng-template",null,1,n.W1O)),2&i){const d=n.MAs(3);n.Q6J("ngIf",n.lcZ(1,2,r.unfilteredCount$))("ngIfElse",d)}},dependencies:[m.O5,M.eJ,y.t3,y.SK,S.NU,S.$1,N.j,A.Dz,P.p9,I.ix,Z.w,J.dQ,B.Ls,z.l,Ee,m.gd,M.fM],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}),e})()},2534:(V,Q,o)=>{o.d(Q,{A:()=>Z});var _=o(6814),a=o(95),R=o(6976),O=o(2962),n=o(2574),t=o(5695),m=o(2392),M=o(1595),y=o(6928),S=o(1665),N=o(804),A=o(2840),P=o(551),I=o(5879);let Z=(()=>{class J{}return J.\u0275fac=function(z){return new(z||J)},J.\u0275mod=I.oAB({type:J}),J.\u0275inj=I.cJS({imports:[_.ez,a.Jb,R.Ph,O.vh,n.zf,t.X,m.ZJ,y.Rt,N.Xo,A.sL,P.PV,M.N,S.i]}),J})()},1520:(V,Q,o)=>{o.d(Q,{N:()=>k});var _=o(4223),a=o(5879),R=o(313),O=o(6814),n=o(2392),t=o(4190),m=o(6928),M=o(7417),y=o(8125),S=o(4821),N=o(7908);function A(T,g){1&T&&(a.ynx(0),a._uU(1,", "),a.BQk())}function P(T,g){if(1&T&&(a.ynx(0),a._uU(1),a.ALo(2,"eventVerbiage"),a.YNc(3,A,2,0,"ng-container",12),a.BQk()),2&T){const v=g.$implicit,f=g.last;a.xp6(1),a.hij(" ",a.Dn7(2,2,v.action,"contributor-card",v.count)," "),a.xp6(2),a.Q6J("ngIf",!f)}}function I(T,g){if(1&T&&(a.TgZ(0,"nz-descriptions",8)(1,"nz-descriptions-item",9),a.YNc(2,P,4,6,"ng-container",10),a.qZA(),a.TgZ(3,"nz-descriptions-item",11),a._uU(4),a.ALo(5,"date"),a.qZA()()),2&T){const v=a.oxw(2).$implicit;a.Q6J("nzColumn",1),a.xp6(2),a.Q6J("ngForOf",v.uniqueActions),a.xp6(2),a.hij(" ",a.lcZ(5,3,v.lastActionDate)," ")}}function Z(T,g){if(1&T&&(a.TgZ(0,"cvc-user-popover",6),a.YNc(1,I,6,5,"ng-template",null,7,a.W1O),a.qZA()),2&T){const v=a.oxw().$implicit;a.Q6J("userId",v.user.id)}}function J(T,g){if(1&T&&(a.TgZ(0,"a",3),a._UZ(1,"nz-avatar",4),a.YNc(2,Z,3,1,"ng-template",null,5,a.W1O),a.qZA()),2&T){const v=g.$implicit,f=a.MAs(3);a.MGl("routerLink","/users/",v.user.id,""),a.xp6(1),a.Q6J("nzSize",14)("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",f)("nzSrc",v.user.profileImagePath)}}function B(T,g){if(1&T&&(a.ynx(0),a.YNc(1,J,4,5,"a",2),a.BQk()),2&T){const v=a.oxw();a.xp6(1),a.Q6J("ngForOf",v.sortedContributors)}}function z(T,g){1&T&&a._uU(0," None ")}let E=(()=>{class T{ngOnInit(){if(void 0===this.contributors)throw new Error("Must pass a list of contributors into the contributor stack");this.sortedContributors=this.contributors.slice(),this.sortedContributors.sort((v,f)=>f.totalActionCount-v.totalActionCount)}}return T.\u0275fac=function(v){return new(v||T)},T.\u0275cmp=a.Xpm({type:T,selectors:[["cvc-contributor-stack"]],inputs:{contributors:"contributors"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noContributors",""],["class","avatar",3,"routerLink",4,"ngFor","ngForOf"],[1,"avatar",3,"routerLink"],["nz-popover","","nzPopoverTrigger","hover","nzPopoverPlacement","bottomRight","nzIcon","user","nzSize","small",3,"nzSize","nzPopoverMouseEnterDelay","nzPopoverContent","nzSrc"],["curatorPopover",""],[3,"userId"],["additionalMetadata",""],["nzBordered","","nzTitle","Activity","nzSize","small",3,"nzColumn"],["nzTitle","Contributions"],[4,"ngFor","ngForOf"],["nzTitle","Last Contribution"],[4,"ngIf"]],template:function(v,f){if(1&v&&(a.YNc(0,B,2,1,"ng-container",0),a.YNc(1,z,1,0,"ng-template",null,1,a.W1O)),2&v){const x=a.MAs(2);a.Q6J("ngIf",f.sortedContributors&&f.sortedContributors.length>0)("ngIfElse",x)}},dependencies:[O.sg,O.O5,t.rH,m.Dz,M.lU,y.R7,y.uj,S.q,O.uU,N.R],encapsulation:2}),T})();var C=o(8091);function b(T,g){if(1&T&&(a.ynx(0),a._UZ(1,"cvc-contributor-stack",5),a.BQk()),2&T){const v=g.ngIf;a.xp6(1),a.Q6J("contributors",v)}}function Y(T,g){1&T&&a._uU(0," None ")}function D(T,g){if(1&T&&(a.ynx(0),a._UZ(1,"cvc-contributor-stack",5),a.BQk()),2&T){const v=g.ngIf;a.xp6(1),a.Q6J("contributors",v)}}function j(T,g){1&T&&a._uU(0," None ")}let k=(()=>{class T{constructor(v){this.gql=v}ngOnInit(){if(void 0===this.subscribable)throw new Error("Must pass a subscribable into ContributorAvatars component.");let v=this.gql.watch({subscribable:this.subscribable}).valueChanges;this.curators$=v.pipe((0,_.j)("data","contributors","curators")),this.editors$=v.pipe((0,_.j)("data","contributors","editors"))}}return T.\u0275fac=function(v){return new(v||T)(a.Y36(R.kQf))},T.\u0275cmp=a.Xpm({type:T,selectors:[["cvc-contributor-avatars"]],inputs:{subscribable:"subscribable"},decls:14,vars:8,consts:[["nz-typography","","nzType","secondary",1,"role-group-label"],[1,"role-group"],[4,"ngIf","ngIfElse"],["noCurators",""],["noEditors",""],[3,"contributors"]],template:function(v,f){if(1&v&&(a.TgZ(0,"span",0),a._uU(1,"Curators:"),a.qZA(),a.TgZ(2,"div",1),a.YNc(3,b,2,1,"ng-container",2),a.ALo(4,"ngrxPush"),a.YNc(5,Y,1,0,"ng-template",null,3,a.W1O),a.qZA(),a.TgZ(7,"span",0),a._uU(8,"Editors:"),a.qZA(),a.TgZ(9,"div",1),a.YNc(10,D,2,1,"ng-container",2),a.ALo(11,"ngrxPush"),a.YNc(12,j,1,0,"ng-template",null,4,a.W1O),a.qZA()),2&v){const x=a.MAs(6),w=a.MAs(13);a.xp6(3),a.Q6J("ngIf",a.lcZ(4,4,f.curators$))("ngIfElse",x),a.xp6(7),a.Q6J("ngIf",a.lcZ(11,6,f.editors$))("ngIfElse",w)}},dependencies:[O.O5,n.ZU,E,C.fM],styles:["[_nghost-%COMP%]{display:inline-block}.role-group-label[_ngcontent-%COMP%]{margin-left:12px}.role-group[_ngcontent-%COMP%]{display:inline-block}.role-group[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{display:inline-block;margin-left:2px}"]}),T})()},936:(V,Q,o)=>{o.d(Q,{Z:()=>N});var _=o(6814),a=o(2392),R=o(4190),O=o(6928),n=o(7417),t=o(2524),m=o(4086),M=o(8125),y=o(5879);let S=(()=>{class A{}return A.\u0275fac=function(I){return new(I||A)},A.\u0275mod=y.oAB({type:A}),A.\u0275inj=y.cJS({imports:[_.ez,R.Bz,O.Rt,n.$6,M.q6,t.s,m.J]}),A})(),N=(()=>{class A{}return A.\u0275fac=function(I){return new(I||A)},A.\u0275mod=y.oAB({type:A}),A.\u0275inj=y.cJS({imports:[_.ez,a.ZJ,S]}),A})()},8295:(V,Q,o)=>{o.d(Q,{Q:()=>B});var _=o(2024),a=o(313),R=o(8645),O=o(7398),n=o(9773),t=o(5879),m=o(7473),M=o(6814),y=o(2840),S=o(855),N=o(1958),A=o(551),P=o(6109),I=o(8091);function Z(z,E){if(1&z){const C=t.EpF();t.ynx(0),t.TgZ(1,"button",2),t.NdJ("click",function(){t.CHM(C);const Y=t.oxw();return t.KtG(Y.unsubscribe())}),t._UZ(2,"i",3),t.qZA(),t.BQk()}if(2&z){const C=t.oxw();t.xp6(1),t.Q6J("nzLoading",C.isSubmitting)}}function J(z,E){if(1&z){const C=t.EpF();t.TgZ(0,"button",4),t.NdJ("click",function(){t.CHM(C);const Y=t.oxw();return t.KtG(Y.subscribe())}),t._UZ(1,"i",5),t.qZA()}if(2&z){const C=t.oxw();t.Q6J("nzLoading",C.isSubmitting)}}let B=(()=>{class z{constructor(C,b,Y,D){this.isSubscribedGQL=C,this.unsubscribeMutation=b,this.subscribeMutation=Y,this.networkErrorService=D,this.isSubmitting=!1,this.destroy$=new R.x,this.unsubscribeMutator=new _.U(D),this.subscribeMutator=new _.U(D)}ngOnInit(){if(void 0===this.viewer)throw new Error("Must pass in a viewer to the CvcEntitySubscriptionButtonComponent");if(void 0===this.typename)throw new Error("Must pass in a typename to the CvcEntitySubscriptionButtonComponent");if(void 0===this.subscribableId)throw new Error("Must pass in a subscribableId to the CvcEntitySubscriptionButtonComponent");this.subscribable={id:this.subscribableId,entityType:a.o71[this.typename]},this.queryRef=this.isSubscribedGQL.watch({subscribable:this.subscribable}),this.existingSubscription$=this.queryRef.valueChanges.pipe((0,O.U)(({data:b})=>b.subscriptionForEntity))}subscribe(){this.subscribable&&(this.isSubmitting=!0,this.subscribeMutator.mutate(this.subscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,n.R)(this.destroy$)).subscribe(b=>{b&&(this.queryRef?.refetch(),this.isSubmitting=!1)}))}unsubscribe(){this.subscribable&&(this.isSubmitting=!0,this.unsubscribeMutator.mutate(this.unsubscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,n.R)(this.destroy$)).subscribe(b=>{b&&(this.queryRef?.refetch(),this.isSubmitting=!1)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return z.\u0275fac=function(C){return new(C||z)(t.Y36(a.A4J),t.Y36(a.m$d),t.Y36(a.jMx),t.Y36(m.Y))},z.\u0275cmp=t.Xpm({type:z,selectors:[["cvc-entity-subscription-button"]],inputs:{viewer:"viewer",typename:"typename",subscribableId:"subscribableId"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noSub",""],["nz-button","","nz-tooltip","Unsubscribe","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","bell","nzTheme","fill"],["nz-button","","nz-tooltip","Subscribe","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","bell","nzTheme","outline"]],template:function(C,b){if(1&C&&(t.YNc(0,Z,3,1,"ng-container",0),t.ALo(1,"ngrxPush"),t.YNc(2,J,2,1,"ng-template",null,1,t.W1O)),2&C){const Y=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,b.existingSubscription$))("ngIfElse",Y)}},dependencies:[M.O5,y.ix,S.w,N.dQ,A.Ls,P.SY,I.fM],styles:["[_nghost-%COMP%]{display:block}"]}),z})()},7129:(V,Q,o)=>{o.d(Q,{g:()=>t});var _=o(6814),a=o(2840),R=o(551),O=o(6109),n=o(5879);let t=(()=>{class m{}return m.\u0275fac=function(y){return new(y||m)},m.\u0275mod=n.oAB({type:m}),m.\u0275inj=n.cJS({imports:[_.ez,a.sL,R.PV,O.cg]}),m})()},4082:(V,Q,o)=>{o.d(Q,{I:()=>a});var _=o(5879);let a=(()=>{class R{transform(n){if(n){let m=n.toLowerCase().replace(/_/g," ").split(" ");for(var t=0;t<m.length;t++)m[t]=m[t].charAt(0).toUpperCase()+m[t].slice(1);return m.join(" ")}return""}}return R.\u0275fac=function(n){return new(n||R)},R.\u0275pipe=_.Yjl({name:"enumToTitle",type:R,pure:!0}),R})()},565:(V,Q,o)=>{o.d(Q,{Zv:()=>k,cD:()=>T,yH:()=>D});var _=o(655),a=o(5879),R=o(2438),O=o(9773),n=o(2181),t=o(4194),m=o(874),M=o(9087),y=o(7754),S=o(9388),N=o(331),A=o(6814),P=o(551),I=o(8324);const Z=["*"],J=["collapseHeader"];function B(g,v){if(1&g&&(a.ynx(0),a._UZ(1,"span",7),a.BQk()),2&g){const f=v.$implicit,x=a.oxw(2);a.xp6(1),a.Q6J("nzType",f||"right")("nzRotate",x.nzActive?90:0)}}function z(g,v){if(1&g&&(a.TgZ(0,"div"),a.YNc(1,B,2,2,"ng-container",3),a.qZA()),2&g){const f=a.oxw();a.xp6(1),a.Q6J("nzStringTemplateOutlet",f.nzExpandedIcon)}}function E(g,v){if(1&g&&(a.ynx(0),a._uU(1),a.BQk()),2&g){const f=a.oxw();a.xp6(1),a.Oqu(f.nzHeader)}}function C(g,v){if(1&g&&(a.ynx(0),a._uU(1),a.BQk()),2&g){const f=a.oxw(2);a.xp6(1),a.Oqu(f.nzExtra)}}function b(g,v){if(1&g&&(a.TgZ(0,"div",8),a.YNc(1,C,2,1,"ng-container",3),a.qZA()),2&g){const f=a.oxw();a.xp6(1),a.Q6J("nzStringTemplateOutlet",f.nzExtra)}}const Y="collapse";let D=(()=>{class g{constructor(f,x,w,q){this.nzConfigService=f,this.cdr=x,this.directionality=w,this.destroy$=q,this._nzModuleName=Y,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(Y).pipe((0,O.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,O.R)(this.destroy$)).subscribe(f=>{this.dir=f,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(f){this.listOfNzCollapsePanelComponent.push(f)}removePanel(f){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(f),1)}click(f){this.nzAccordion&&!f.nzActive&&this.listOfNzCollapsePanelComponent.filter(x=>x!==f).forEach(x=>{x.nzActive&&(x.nzActive=!1,x.nzActiveChange.emit(x.nzActive),x.markForCheck())}),f.nzActive=!f.nzActive,f.nzActiveChange.emit(f.nzActive)}}return g.\u0275fac=function(f){return new(f||g)(a.Y36(m.jY),a.Y36(a.sBO),a.Y36(S.Is,8),a.Y36(M.kn))},g.\u0275cmp=a.Xpm({type:g,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(f,x){2&f&&a.ekj("ant-collapse-icon-position-left","left"===x.nzExpandIconPosition)("ant-collapse-icon-position-right","right"===x.nzExpandIconPosition)("ant-collapse-ghost",x.nzGhost)("ant-collapse-borderless",!x.nzBordered)("ant-collapse-rtl","rtl"===x.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],features:[a._Bn([M.kn])],ngContentSelectors:Z,decls:1,vars:0,template:function(f,x){1&f&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),(0,_.gn)([(0,m.oS)(),(0,y.yF)()],g.prototype,"nzAccordion",void 0),(0,_.gn)([(0,m.oS)(),(0,y.yF)()],g.prototype,"nzBordered",void 0),(0,_.gn)([(0,m.oS)(),(0,y.yF)()],g.prototype,"nzGhost",void 0),g})();const j="collapsePanel";let k=(()=>{class g{markForCheck(){this.cdr.markForCheck()}constructor(f,x,w,q,X,K){this.nzConfigService=f,this.ngZone=x,this.cdr=w,this.destroy$=q,this.nzCollapseComponent=X,this.noAnimation=K,this._nzModuleName=j,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new a.vpe,this.nzConfigService.getConfigChangeEventForComponent(j).pipe((0,O.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.nzCollapseComponent.addPanel(this),this.ngZone.runOutsideAngular(()=>(0,R.R)(this.collapseHeader.nativeElement,"click").pipe((0,n.h)(()=>!this.nzDisabled),(0,O.R)(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})}))}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}}return g.\u0275fac=function(f){return new(f||g)(a.Y36(m.jY),a.Y36(a.R0b),a.Y36(a.sBO),a.Y36(M.kn),a.Y36(D,1),a.Y36(N.P,8))},g.\u0275cmp=a.Xpm({type:g,selectors:[["nz-collapse-panel"]],viewQuery:function(f,x){if(1&f&&a.Gf(J,7),2&f){let w;a.iGM(w=a.CRH())&&(x.collapseHeader=w.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(f,x){2&f&&a.ekj("ant-collapse-no-arrow",!x.nzShowArrow)("ant-collapse-item-active",x.nzActive)("ant-collapse-item-disabled",x.nzDisabled)},inputs:{nzActive:"nzActive",nzDisabled:"nzDisabled",nzShowArrow:"nzShowArrow",nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],features:[a._Bn([M.kn])],ngContentSelectors:Z,decls:8,vars:8,consts:[["role","button",1,"ant-collapse-header"],["collapseHeader",""],[4,"ngIf"],[4,"nzStringTemplateOutlet"],["class","ant-collapse-extra",4,"ngIf"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"],[1,"ant-collapse-extra"]],template:function(f,x){1&f&&(a.F$t(),a.TgZ(0,"div",0,1),a.YNc(2,z,2,1,"div",2),a.YNc(3,E,2,1,"ng-container",3),a.YNc(4,b,2,1,"div",4),a.qZA(),a.TgZ(5,"div",5)(6,"div",6),a.Hsn(7),a.qZA()()),2&f&&(a.uIk("aria-expanded",x.nzActive),a.xp6(2),a.Q6J("ngIf",x.nzShowArrow),a.xp6(1),a.Q6J("nzStringTemplateOutlet",x.nzHeader),a.xp6(1),a.Q6J("ngIf",x.nzExtra),a.xp6(1),a.ekj("ant-collapse-content-active",x.nzActive),a.Q6J("@.disabled",!(null==x.noAnimation||!x.noAnimation.nzNoAnimation))("@collapseMotion",x.nzActive?"expanded":"hidden"))},dependencies:[A.O5,P.Ls,I.f],encapsulation:2,data:{animation:[t.J_]},changeDetection:0}),(0,_.gn)([(0,y.yF)()],g.prototype,"nzActive",void 0),(0,_.gn)([(0,y.yF)()],g.prototype,"nzDisabled",void 0),(0,_.gn)([(0,m.oS)(),(0,y.yF)()],g.prototype,"nzShowArrow",void 0),g})(),T=(()=>{class g{}return g.\u0275fac=function(f){return new(f||g)},g.\u0275mod=a.oAB({type:g}),g.\u0275inj=a.cJS({imports:[S.vT,A.ez,P.PV,I.T,N.g]}),g})()}}]);