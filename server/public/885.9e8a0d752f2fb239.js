"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[885],{5639:($,T,n)=>{n.d(T,{u:()=>h});var p=n(5e3),C=n(685),A=n(1912),v=n(3618),y=n(5017);function f(d,t){1&d&&(p.TgZ(0,"span"),p._uU(1," You must be logged in to view this page. "),p.qZA())}function V(d,t){1&d&&p._UZ(0,"cvc-login-button")}function u(d,t){1&d&&(p.TgZ(0,"nz-typography",4),p._UZ(1,"i",5),p.qZA())}let h=(()=>{class d{}return d.\u0275fac=function(_){return new(_||d)},d.\u0275cmp=p.Xpm({type:d,selectors:[["cvc-login-prompt"]],decls:7,vars:3,consts:[[3,"nzNotFoundImage","nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["emptyImage",""],["nzType","secondary"],["nz-icon","","nzType","login","nzTheme","outline",2,"font-size","50pt"]],template:function(_,J){if(1&_&&(p.TgZ(0,"nz-empty",0),p.YNc(1,f,2,0,"ng-template",null,1,p.W1O),p.YNc(3,V,1,0,"ng-template",null,2,p.W1O),p.qZA(),p.YNc(5,u,2,0,"ng-template",null,3,p.W1O)),2&_){const I=p.MAs(2),P=p.MAs(4),S=p.MAs(6);p.Q6J("nzNotFoundImage",S)("nzNotFoundContent",I)("nzNotFoundFooter",P)}},directives:[C.p9,A.s,v.ZU,y.Ls],styles:["[_nghost-%COMP%]{display:inline-block}"]}),d})()},9386:($,T,n)=>{n.d(T,{a:()=>V});var p=n(9808),C=n(1844),A=n(685),v=n(5017),y=n(3618),f=n(5e3);let V=(()=>{class u{}return u.\u0275fac=function(d){return new(d||u)},u.\u0275mod=f.oAB({type:u}),u.\u0275inj=f.cJS({imports:[[p.ez,C.B,A.Xo,v.PV,y.ZJ]]}),u})()},4181:($,T,n)=>{n.d(T,{O:()=>pt});var p=n(9808),C=n(655),A=n(6123),v=n(4987),y=n(8776),f=n(591),V=n(3240),u=n(373),h=n(2198),d=n(4850),t=n(5e3),_=n(7630),J=n(9169),I=n(8054),P=n(9397),S=n(3075),G=n(8144),N=n(3618),b=n(8664),w=n(822),Z=n(6042),R=n(2643),W=n(2683),Q=n(5017),M=n(6949),j=n(8926);function L(a,s){if(1&a&&(t._UZ(0,"span",9),t.ALo(1,"highlightTypeahead")),2&a){const r=t.oxw().$implicit,i=t.oxw(2);t.Q6J("innerHtml",t.xi3(1,1,r.label,i.to.searchString),t.oJD)}}function Y(a,s){1&a&&(t.TgZ(0,"span"),t._uU(1," - Aliases:\xa0 "),t.qZA())}function K(a,s){if(1&a&&(t.TgZ(0,"span",10),t._uU(1),t.YNc(2,Y,2,0,"span",11),t._UZ(3,"span",9),t.ALo(4,"highlightTypeahead"),t.qZA()),2&a){const r=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.hij(" ID: ",r.variant.id," "),t.xp6(1),t.Q6J("ngIf",r.variant.variantAliases.length>0),t.xp6(1),t.Q6J("innerHtml",t.xi3(4,3,r.variant.variantAliases.join(", "),i.to.searchString),t.oJD)}}function X(a,s){1&a&&(t.TgZ(0,"nz-option",6)(1,"nz-space"),t.YNc(2,L,2,4,"span",7),t.YNc(3,K,5,6,"span",8),t.qZA()()),2&a&&t.Q6J("nzValue",s.$implicit.variant)}function H(a,s){1&a&&t._uU(0," No variant found in CIViC that matches the string provided. ")}function k(a,s){if(1&a){const r=t.EpF();t.ynx(0),t.TgZ(1,"nz-select",3),t.NdJ("nzOnSearch",function(g){return t.CHM(r),t.oxw().to.onSearch(g)}),t.YNc(2,X,4,1,"nz-option",4),t.ALo(3,"ngrxPush"),t.qZA(),t.YNc(4,H,1,0,"ng-template",null,5,t.W1O),t.BQk()}if(2&a){const r=t.MAs(5),i=t.oxw(),g=t.MAs(4);t.xp6(1),t.Q6J("formControl",i.formControl)("formlyAttributes",i.field)("nzPlaceHolder",i.to.placeholder?i.to.placeholder:null)("nzDropdownRender",i.to.allowCreate?g:null)("nzNotFoundContent",r)("nzShowArrow",i.to.showArrow),t.xp6(1),t.Q6J("ngForOf",t.lcZ(3,7,i.variants$))}}function q(a,s){if(1&a&&t._UZ(0,"cvc-variant-tag",12),2&a){const r=t.oxw();t.Q6J("variant",r.formControl.value)}}function tt(a,s){if(1&a&&t._UZ(0,"cvc-form-errors-alert",15),2&a){const r=t.oxw(4);t.Q6J("errors",r.errorMessages)}}function nt(a,s){if(1&a){const r=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(r);const g=t.oxw(4);return g.addVariant(g.to.searchString)}),t._UZ(1,"i",17),t._uU(2,"No Existing CIViC Variant\xa0"),t.TgZ(3,"strong"),t._uU(4),t.qZA(),t._uU(5,"\xa0found. Create A New Variant? "),t.qZA()}if(2&a){const r=t.oxw(4);t.Q6J("nzLoading",r.loading),t.xp6(4),t.Oqu(r.to.searchString)}}function et(a,s){if(1&a&&(t.ynx(0),t.YNc(1,tt,1,1,"cvc-form-errors-alert",13),t.YNc(2,nt,6,2,"button",14),t.BQk()),2&a){const r=t.oxw(3);t.xp6(1),t.Q6J("ngIf",r.errorMessages.length>0),t.xp6(1),t.Q6J("ngIf",0==r.errorMessages.length)}}function ot(a,s){if(1&a&&(t.ynx(0),t.YNc(1,et,3,2,"ng-container",11),t.BQk()),2&a){const r=t.oxw(2);t.xp6(1),t.Q6J("ngIf",""!==r.to.searchString)}}function D(a,s){if(1&a&&(t.YNc(0,ot,2,1,"ng-container",11),t.ALo(1,"ngrxPush")),2&a){const r=t.oxw();t.Q6J("ngIf",t.lcZ(1,1,r.displayAdd$))}}let x=class extends y.fS{constructor(s,r,i){super(),this.variantTypeaheadQuery=s,this.networkErrorService=r,this.addVariantGQL=i,this.success=!1,this.errorMessages=[],this.loading=!1,this.displayAdd$=new f.X(!1),this.addVariantMutator=new A.U(this.networkErrorService),this.defaultOptions={templateOptions:{placeholder:"Search Variants",showArrow:!1,onSearch:()=>{},minLengthSearch:1,optionList:[],allowCreate:!0},expressionProperties:{"templateOptions.geneId":(g,lt,B)=>{var F,E;let O=null===(E=null===(F=null==B?void 0:B.parent)||void 0===F?void 0:F.parent)||void 0===E?void 0:E.model;if(O&&O.gene&&O.gene[0])return O.gene[0].id}}}}ngOnInit(){this.queryRef=this.variantTypeaheadQuery.watch({name:"zzzz"}),this.variants$=this.queryRef.valueChanges.pipe((0,u.j)("data","variants","nodes"),(0,h.h)(V.ep),(0,d.U)(s=>s.map(i=>({value:i.id,label:i.name,variant:i}))))}ngAfterViewInit(){this.to.onSearch=s=>{s.length<this.to.minLengthSearch||(this.to.searchString=s,this.errorMessages=[],this.queryRef.refetch({name:s,geneId:this.to.geneId}).then(r=>{this.displayAdd$.next(0==r.data.variants.nodes.filter(i=>i.name.toUpperCase()==s.toUpperCase()).length)}))}}addVariant(s){if(s&&""!=s&&this.to.geneId){let r=this.addVariantMutator.mutate(this.addVariantGQL,{name:s,geneId:this.to.geneId},{},i=>{var g;null===(g=this.field.formControl)||void 0===g||g.setValue({id:i.addVariant.variant.id,name:i.addVariant.variant.name}),this.to.searchString="",this.to.searchLength=0});r.submitSuccess$.pipe((0,v.t)(this)).subscribe(i=>{i&&(this.success=!0)}),r.submitError$.pipe((0,v.t)(this)).subscribe(i=>{i&&(this.errorMessages=i,this.success=!1)}),r.isSubmitting$.pipe((0,v.t)(this)).subscribe(i=>{this.loading=i})}}};x.\u0275fac=function(s){return new(s||x)(t.Y36(_._eC),t.Y36(J.Y),t.Y36(_.LUc))},x.\u0275cmp=t.Xpm({type:x,selectors:[["cvc-variant-input-type"]],features:[t.qOj],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["variantListItem",""],["addVariantTmpl",""],["nzShowSearch","","nzServerSearch","","autofocus","click",3,"formControl","formlyAttributes","nzPlaceHolder","nzDropdownRender","nzNotFoundContent","nzShowArrow","nzOnSearch"],["nzCustomContent","",3,"nzValue",4,"ngFor","ngForOf"],["sourceLoader",""],["nzCustomContent","",3,"nzValue"],[3,"innerHtml",4,"nzSpaceItem"],["nz-typography","","nzType","secondary",4,"nzSpaceItem"],[3,"innerHtml"],["nz-typography","","nzType","secondary"],[4,"ngIf"],[3,"variant"],[3,"errors",4,"ngIf"],["nz-button","","nzSize","small",3,"nzLoading","click",4,"ngIf"],[3,"errors"],["nz-button","","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","plus","nzTheme","outline"]],template:function(s,r){if(1&s&&(t.YNc(0,k,6,9,"ng-container",0),t.YNc(1,q,1,1,"ng-template",null,1,t.W1O),t.YNc(3,D,2,3,"ng-template",null,2,t.W1O)),2&s){const i=t.MAs(2);t.Q6J("ngIf",!(null!=r.formControl.value&&r.formControl.value.id))("ngIfElse",i)}},directives:[p.O5,I.Vq,P.l,S.JJ,S.oH,y.VQ,p.sg,I.Ip,G.NU,G.$1,N.ZU,b.I,w.V,Z.ix,R.dQ,W.w,Q.Ls],pipes:[M.fM,j.A],styles:[""],changeDetection:0}),x=(0,C.gn)([(0,v.c)()],x);const at={name:"variant-input",component:x};var U=n(4867),rt=n(7008),it=n(6905),st=n(8616);let pt=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[p.ez,S.UX,M.WG,y.X0.forChild({types:[at]}),I.LV,Z.sL,Q.PV,G.zf,N.ZJ,U.Q,rt.B,it.s,st.Y]]}),a})()},885:($,T,n)=>{n.r(T),n.d(T,{VariantGroupsAddModule:()=>O});var p=n(9808),C=n(9386),A=n(5630),v=n(6905),y=n(6949),f=n(1894),V=n(5017),u=n(1945),h=n(325),d=n(4850),t=n(5e3),_=n(9350),J=n(8992),I=n(5639),P=n(160);function S(e,l){1&e&&(t.TgZ(0,"div"),t._UZ(1,"router-outlet"),t.qZA())}function G(e,l){1&e&&(t.TgZ(0,"nz-row",7)(1,"div",8),t._UZ(2,"cvc-login-prompt"),t.qZA()())}let N=(()=>{class e{constructor(o){this.viewerService=o}ngOnInit(){this.isSignedIn$=this.viewerService.viewer$.pipe((0,d.U)(o=>o.signedIn))}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(_.a))},e.\u0275cmp=t.Xpm({type:e,selectors:[["cvc-variant-groups-add-view"]],decls:14,vars:7,consts:[["displayName","New"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzTheme","twotone","nzType","civic-variantgroup",3,"nzTwotoneColor"],[1,"content"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["nzSpan","24","nzJustify","center"],["nz-col","","nzSpan","6"]],template:function(o,c){if(1&o&&(t._UZ(0,"cvc-section-navigation",0),t.TgZ(1,"nz-page-header",1)(2,"nz-page-header-title",2),t._UZ(3,"i",3),t.ALo(4,"entityColor"),t._uU(5," Add New Variant Group "),t.qZA(),t.TgZ(6,"nz-page-header-subtitle"),t._uU(7," Submit and review new Variant Groups "),t.qZA(),t.TgZ(8,"nz-page-header-content")(9,"div",4),t.YNc(10,S,2,0,"div",5),t.ALo(11,"ngrxPush"),t.YNc(12,G,3,0,"ng-template",null,6,t.W1O),t.qZA()()()),2&o){const m=t.MAs(13);t.xp6(3),t.Q6J("nzTwotoneColor",t.lcZ(4,3,"VariantGroup")),t.xp6(7),t.Q6J("ngIf",t.lcZ(11,5,c.isSignedIn$))("ngIfElse",m)}},directives:[J.I,u.$O,u.u9,V.Ls,u.yG,u.u5,p.O5,h.lC,f.SK,f.t3,I.u],pipes:[P.a,y.fM],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),e})();var b=n(8776),w=n(7462),Z=n(4181),R=n(7055),W=n(8979),Q=n(4623),M=n(3075),j=n(1017),L=n(4546),Y=n(2359),K=n(6042),X=n(7525),H=n(7008),k=n(5472),q=n(3773),tt=n(3022),nt=n(4889);let et=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.ez,M.UX,h.Bz,b.X0,L.U5,Y.L,f.Jb,K.sL,X.j,b.X0,w.o,Z.O,R.N,W.N,Q.K,H.B,k.r,q.g,Z.O,tt.e,nt.E,j.s]]}),e})(),ot=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.ez,et]]}),e})();var D=n(3077),x=n(6123),at=n(8929),U=n(7625),rt=n(7630),it=n(9169),st=n(822);function pt(e,l){1&e&&t.GkF(0)}function a(e,l){if(1&e){const o=t.EpF();t.TgZ(0,"formly-form",4),t.NdJ("modelChange",function(m){return t.CHM(o),t.oxw().formModel=m}),t.qZA()}if(2&e){const o=t.oxw();t.Q6J("form",o.formGroup)("fields",o.formFields)("model",o.formModel)}}function s(e,l){if(1&e&&(t.TgZ(0,"nz-form-item"),t._UZ(1,"cvc-form-errors-alert",6),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("errors",o.errorMessages)}}function r(e,l){if(1&e&&(t.TgZ(0,"p"),t._uU(1,"View "),t.TgZ(2,"a",10),t._uU(3,"its details"),t.qZA(),t._uU(4,"."),t.qZA()),2&e){const o=t.oxw(3);t.xp6(2),t.MGl("routerLink","/variant-groups/",o.newId,"/summary")}}function i(e,l){if(1&e&&(t.ynx(0),t._UZ(1,"nz-alert",7),t.YNc(2,r,5,1,"ng-template",8,9,t.W1O),t.BQk()),2&e){const o=t.MAs(3);t.xp6(1),t.Q6J("nzDescription",o)}}function g(e,l){if(1&e&&(t.YNc(0,s,2,1,"nz-form-item",5),t.YNc(1,i,4,1,"ng-container",5)),2&e){const o=t.oxw();t.Q6J("ngIf",o.errorMessages.length>0),t.xp6(1),t.Q6J("ngIf",o.success)}}let lt=(()=>{class e{constructor(o,c){this.submitVariantGroupGQL=o,this.networkErrorService=c,this.destroy$=new at.xQ,this.formGroup=new M.cw({}),this.success=!1,this.errorMessages=[],this.loading=!1,this.submitVariantGroupMutator=new x.U(c),this.formFields=[{key:"fields",wrappers:["form-container"],templateOptions:{label:"Add Variant Group Form"},fieldGroup:[{key:"name",type:"input",wrappers:["form-field"],templateOptions:{label:"Variant Group Name",required:!0}},{key:"description",type:"cvc-textarea",templateOptions:{label:"Description",helpText:"A brief description of this new variant group.",placeholder:"No description provided",required:!0}},{key:"sources",type:"multi-field",wrappers:["form-field"],templateOptions:{label:"Source",helpText:"Add any sources upon which your description depends.",addText:"Add a Source"},fieldArray:{type:"source-input",templateOptions:{hideLabel:!0,required:!0}}},{key:"variants",type:"multi-field",wrappers:["form-field"],templateOptions:{label:"Variants",required:!0,helpText:"Specify the variants that comprise this Variant Group.",addText:"Add a Variant "},fieldArray:{type:"variant-input",templateOptions:{hideLabel:!0,required:!0,allowCreate:!1}}},{key:"comment",type:"comment-textarea",templateOptions:{label:"Comment",helpText:"Please provide any additional comments you wish to make about this evidence item. This comment will appear as the first comment in this item's comment thread.",placeholder:"Please enter a comment describing your revision.",required:!0,minLength:10}},{key:"cancel",type:"cancel-button"},{key:"organization",type:"org-submit-button",templateOptions:{submitLabel:"Create Variant Group",submitSize:"large"}}]}]}submitVariantGroup(o){let c=this.toSubmitInput(o);if(c){let m=this.submitVariantGroupMutator.mutate(this.submitVariantGroupGQL,{input:c},{},z=>{this.newId=z.submitVariantGroup.variantGroup.id});m.submitSuccess$.pipe((0,U.R)(this.destroy$)).subscribe(z=>{z&&(this.success=!0)}),m.submitError$.pipe((0,U.R)(this.destroy$)).subscribe(z=>{z&&(this.errorMessages=z,this.success=!1)}),m.isSubmitting$.pipe((0,U.R)(this.destroy$)).subscribe(z=>{this.loading=z})}}toSubmitInput(o){var c;if(o)return{description:o.fields.description,name:o.fields.name,organizationId:null===(c=o.fields.organization)||void 0===c?void 0:c.id,sourceIds:o.fields.sources?o.fields.sources.map(m=>m.id).filter(D.$):[],variantIds:o.fields.variants.map(m=>m.id).filter(D.$)}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(rt.tji),t.Y36(it.Y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["cvc-variant-group-submit-form"]],decls:5,vars:3,consts:[["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[4,"ngTemplateOutlet"],[3,"form","fields","model","modelChange",4,"ngIf"],["formMessages",""],[3,"form","fields","model","modelChange"],[4,"ngIf"],[3,"errors"],["nzType","success","nzMessage","Variant Group Submitted","nzShowIcon","",3,"nzDescription"],["nzSize","small"],["successMessage",""],[3,"routerLink"]],template:function(o,c){if(1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return c.submitVariantGroup(c.formModel)}),t.YNc(1,pt,1,0,"ng-container",1),t.YNc(2,a,1,3,"formly-form",2),t.qZA(),t.YNc(3,g,2,2,"ng-template",null,3,t.W1O)),2&o){const m=t.MAs(4);t.Q6J("formGroup",c.formGroup),t.xp6(1),t.Q6J("ngTemplateOutlet",m),t.xp6(1),t.Q6J("ngIf",!c.success)}},directives:[M._Y,M.JL,L.Lr,M.sg,p.tP,p.O5,b.T7,f.SK,L.Nx,st.V,Y.r,h.yS],styles:[""]}),e})();const F=[{path:"",component:N,children:[{path:"",redirectTo:"submit",pathMatch:"full"},{path:"submit",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["cvc-variant-groups-submit-page"]],decls:1,vars:0,template:function(o,c){1&o&&t._UZ(0,"cvc-variant-group-submit-form")},directives:[lt],styles:[""]}),e})(),data:{breadcrumb:"Submit New Variant Groups"}}]}];let E=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[h.Bz.forChild(F),ot],h.Bz]}),e})(),O=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.ez,E,y.WG,f.Jb,V.PV,u.KJ,C.a,v.s,A.D]]}),e})()}}]);