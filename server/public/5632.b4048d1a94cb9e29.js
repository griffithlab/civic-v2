"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[5632],{8616:(y,f,n)=>{n.d(f,{u:()=>t});var a=n(5e3),g=n(685),l=n(1912),u=n(3618),_=n(647);function p(i,h){1&i&&(a.TgZ(0,"span"),a._uU(1," You must be logged in to view this page. "),a.qZA())}function v(i,h){1&i&&a._UZ(0,"cvc-login-button")}function c(i,h){1&i&&(a.TgZ(0,"nz-typography",4),a._UZ(1,"i",5),a.qZA())}let t=(()=>{class i{}return i.\u0275fac=function(d){return new(d||i)},i.\u0275cmp=a.Xpm({type:i,selectors:[["cvc-login-prompt"]],decls:7,vars:3,consts:[[3,"nzNotFoundImage","nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["emptyImage",""],["nzType","secondary"],["nz-icon","","nzType","login","nzTheme","outline",2,"font-size","50pt"]],template:function(d,z){if(1&d&&(a.TgZ(0,"nz-empty",0),a.YNc(1,p,2,0,"ng-template",null,1,a.W1O),a.YNc(3,v,1,0,"ng-template",null,2,a.W1O),a.qZA(),a.YNc(5,c,2,0,"ng-template",null,3,a.W1O)),2&d){const I=a.MAs(2),M=a.MAs(4),C=a.MAs(6);a.Q6J("nzNotFoundImage",C)("nzNotFoundContent",I)("nzNotFoundFooter",M)}},directives:[g.p9,l.s,u.ZU,_.Ls],styles:["[_nghost-%COMP%]{display:inline-block}"]}),i})()},9386:(y,f,n)=>{n.d(f,{a:()=>v});var a=n(9808),g=n(1844),l=n(685),u=n(647),_=n(3618),p=n(5e3);let v=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=p.oAB({type:c}),c.\u0275inj=p.cJS({imports:[[a.ez,g.B,l.Xo,u.PV,_.ZJ]]}),c})()},8926:(y,f,n)=>{n.d(f,{A:()=>l});var a=n(5e3),g=n(2313);let l=(()=>{class u{constructor(p){this.sanitizer=p}transform(p,v){if(!v||""==v)return p;const c=new RegExp(v,"gi"),t=p.match(c);if(!t)return p;let i=p.replace(c,`<span class='typeahead-match'>${t[0]}</span>`);return this.sanitizer.bypassSecurityTrustHtml(i)}}return u.\u0275fac=function(p){return new(p||u)(a.Y36(g.H7,16))},u.\u0275pipe=a.Yjl({name:"highlightTypeahead",type:u,pure:!0}),u})()},3077:(y,f,n)=>{function a(g){return void 0!==g}n.d(f,{$:()=>a})},7462:(y,f,n)=>{n.d(f,{o:()=>c});var a=n(9808),g=n(8776),l=n(5e3),u=n(1047),_=n(4182);const v={name:"cvc-textarea",component:(()=>{class t extends g.fS{constructor(){super(...arguments),this.defaultOptions={templateOptions:{autosize:{minRows:2,maxRows:20}}}}}return t.\u0275fac=function(){let i;return function(d){return(i||(i=l.n5z(t)))(d||t)}}(),t.\u0275cmp=l.Xpm({type:t,selectors:[["cvc-textarea-base-type"]],features:[l.qOj],decls:1,vars:4,consts:[["nz-input","",3,"formControl","formlyAttributes","nzAutosize","placeholder"]],template:function(h,d){1&h&&l._UZ(0,"textarea",0),2&h&&l.Q6J("formControl",d.formControl)("formlyAttributes",d.field)("nzAutosize",d.to.autosize)("placeholder",d.to.placeholder)},directives:[u.Zp,_.Fj,u.rh,_.JJ,_.oH,g.VQ],styles:[""],changeDetection:0}),t})(),wrappers:["form-field"]};let c=(()=>{class t{}return t.\u0275fac=function(h){return new(h||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[a.ez,_.u5,_.UX,g.X0.forChild({types:[v]}),u.o7]]}),t})()},4181:(y,f,n)=>{n.d(f,{O:()=>w});var a=n(9808),g=n(6123),l=n(8776),u=n(8929),_=n(591),p=n(373),v=n(4850),c=n(7625),t=n(5e3),i=n(712),h=n(9169),d=n(8054),z=n(4182),I=n(8664),M=n(822),C=n(6042),L=n(2643),S=n(2683),E=n(647),V=n(6949),U=n(8926);function B(o,m){if(1&o&&(t.TgZ(0,"nz-option",6),t._UZ(1,"span",7),t.ALo(2,"highlightTypeahead"),t.qZA()),2&o){const e=m.$implicit,s=t.oxw(2);t.Q6J("nzValue",e.variant),t.xp6(1),t.Q6J("innerHtml",t.xi3(2,2,e.label,s.to.searchString),t.oJD)}}function D(o,m){1&o&&t._uU(0," No variant found in CIViC that matches the string provided. ")}function Q(o,m){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"nz-select",3),t.NdJ("nzOnSearch",function(r){return t.CHM(e),t.oxw().to.onSearch(r)}),t.YNc(2,B,3,5,"nz-option",4),t.ALo(3,"ngrxPush"),t.qZA(),t.YNc(4,D,1,0,"ng-template",null,5,t.W1O),t.BQk()}if(2&o){const e=t.MAs(5),s=t.oxw(),r=t.MAs(4);t.xp6(1),t.Q6J("formControl",s.formControl)("formlyAttributes",s.field)("nzPlaceHolder",s.to.placeholder?s.to.placeholder:null)("nzDropdownRender",s.to.allowCreate?r:null)("nzNotFoundContent",e)("nzShowArrow",s.to.showArrow),t.xp6(1),t.Q6J("ngForOf",t.lcZ(3,7,s.variants$))}}function Z(o,m){if(1&o&&t._UZ(0,"cvc-variant-tag",8),2&o){const e=t.oxw();t.Q6J("variant",e.formControl.value)}}function J(o,m){if(1&o&&t._UZ(0,"cvc-form-errors-alert",12),2&o){const e=t.oxw(4);t.Q6J("errors",e.errorMessages)}}function F(o,m){if(1&o){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(4);return r.addVariant(r.to.searchString)}),t._UZ(1,"i",14),t._uU(2,"No Existing CIViC Variant\xa0"),t.TgZ(3,"strong"),t._uU(4),t.qZA(),t._uU(5,"\xa0found. Create A New Variant? "),t.qZA()}if(2&o){const e=t.oxw(4);t.Q6J("nzLoading",e.loading),t.xp6(4),t.Oqu(e.to.searchString)}}function R(o,m){if(1&o&&(t.ynx(0),t.YNc(1,J,1,1,"cvc-form-errors-alert",10),t.YNc(2,F,6,2,"button",11),t.BQk()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.errorMessages.length>0),t.xp6(1),t.Q6J("ngIf",0==e.errorMessages.length)}}function N(o,m){if(1&o&&(t.ynx(0),t.YNc(1,R,3,2,"ng-container",9),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",""!==e.to.searchString)}}function W(o,m){if(1&o&&(t.YNc(0,N,2,1,"ng-container",9),t.ALo(1,"ngrxPush")),2&o){const e=t.oxw();t.Q6J("ngIf",t.lcZ(1,1,e.displayAdd$))}}const Y={name:"variant-input",component:(()=>{class o extends l.fS{constructor(e,s,r){super(),this.variantTypeaheadQuery=e,this.networkErrorService=s,this.addVariantGQL=r,this.destroy$=new u.xQ,this.success=!1,this.errorMessages=[],this.loading=!1,this.displayAdd$=new _.X(!1),this.addVariantMutator=new g.U(s),this.defaultOptions={templateOptions:{placeholder:"Search Variants",showArrow:!1,onSearch:()=>{},minLengthSearch:1,optionList:[],allowCreate:!0},expressionProperties:{"templateOptions.geneId":(T,X,A)=>{var O,P;let x=null===(P=null===(O=null==A?void 0:A.parent)||void 0===O?void 0:O.parent)||void 0===P?void 0:P.model;if(x&&x.gene&&x.gene[0])return x.gene[0].id}}}}ngOnInit(){this.queryRef=this.variantTypeaheadQuery.watch({name:"zzzz"}),this.variants$=this.queryRef.valueChanges.pipe((0,p.j)("data","variants","nodes"),(0,v.U)(e=>e.map(r=>({value:r.id,label:r.name,variant:r}))))}ngAfterViewInit(){this.to.onSearch=e=>{e.length<this.to.minLengthSearch||(this.to.searchString=e,this.errorMessages=[],this.queryRef.refetch({name:e,geneId:this.to.geneId}).then(s=>{this.displayAdd$.next(0==s.data.variants.nodes.filter(r=>r.name.toUpperCase()==e.toUpperCase()).length)}))}}addVariant(e){if(e&&""!=e&&this.to.geneId){let s=this.addVariantMutator.mutate(this.addVariantGQL,{name:e,geneId:this.to.geneId},r=>{var T;null===(T=this.field.formControl)||void 0===T||T.setValue({id:r.addVariant.variant.id,name:r.addVariant.variant.name}),this.to.searchString="",this.to.searchLength=0});s.submitSuccess$.pipe((0,c.R)(this.destroy$)).subscribe(r=>{r&&(this.success=!0)}),s.submitError$.pipe((0,c.R)(this.destroy$)).subscribe(r=>{r&&(this.errorMessages=r,this.success=!1)}),s.isSubmitting$.pipe((0,c.R)(this.destroy$)).subscribe(r=>{this.loading=r})}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.displayAdd$.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i._eC),t.Y36(h.Y),t.Y36(i.LUc))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-variant-input-type"]],features:[t.qOj],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["variantListItem",""],["addVariantTmpl",""],["nzShowSearch","","nzServerSearch","",3,"formControl","formlyAttributes","nzPlaceHolder","nzDropdownRender","nzNotFoundContent","nzShowArrow","nzOnSearch"],["nzCustomContent","",3,"nzValue",4,"ngFor","ngForOf"],["sourceLoader",""],["nzCustomContent","",3,"nzValue"],[3,"innerHtml"],[3,"variant"],[4,"ngIf"],[3,"errors",4,"ngIf"],["nz-button","","nzSize","small",3,"nzLoading","click",4,"ngIf"],[3,"errors"],["nz-button","","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","plus","nzTheme","outline"]],template:function(e,s){if(1&e&&(t.YNc(0,Q,6,9,"ng-container",0),t.YNc(1,Z,1,1,"ng-template",null,1,t.W1O),t.YNc(3,W,2,3,"ng-template",null,2,t.W1O)),2&e){const r=t.MAs(2);t.Q6J("ngIf",!(null!=s.formControl.value&&s.formControl.value.id))("ngIfElse",r)}},directives:[a.O5,d.Vq,z.JJ,z.oH,l.VQ,a.sg,d.Ip,I.I,M.V,C.ix,L.dQ,S.w,E.Ls],pipes:[V.fM,U.A],styles:[""],changeDetection:0}),o})()};var $=n(4867),H=n(7008),K=n(9444);let w=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[a.ez,z.UX,V.WG,l.X0.forChild({types:[Y]}),d.LV,C.sL,E.PV,$.Q,H.B,K.s]]}),o})()}}]);