"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[1467],{6371:(q,Y,o)=>{o.d(Y,{O:()=>P});var c=o(72200),_=o(97529),j=o(12617),b=o(25703),n=o(97685),z=o(75699),t=o(7391),d=o(72968),u=o(29438),F=o(30869),I=o(11672),S=o(50513),L=o(41951),y=o(2615),B=o(73664);let P=(()=>{var E;class V{static#n=E=()=>(this.\u0275fac=function(x){return new(x||V)},this.\u0275mod=B.$C({type:V}),this.\u0275inj=y.G2t({imports:[c.MD,_.f3,j.rD,b.Ti,n.pc,z.T,t.kT,u.Yb,I._v,S.Z,L.Y3,d.K,F.S]}))}return E(),V})()},16269:(q,Y,o)=>{o.d(Y,{f:()=>$});var c=o(24608),_=o(73664),j=o(69145),b=o(72200),n=o(7391),z=o(38132),t=o(29438),d=o(1236),u=o(62e3),F=o(72702),I=o(27793);function S(C,h){1&C&&(_.qex(0),_.EFF(1,", "),_.bVm())}function L(C,h){if(1&C&&(_.qex(0),_.EFF(1),_.nI1(2,"eventVerbiage"),_.DNE(3,S,2,0,"ng-container",12),_.bVm()),2&C){const G=h.$implicit,D=h.last;_.R7$(),_.SpI(" ",_.brH(2,2,G.action,"contributor-card",G.count)," "),_.R7$(2),_.Y8G("ngIf",!D)}}function y(C,h){if(1&C&&(_.j41(0,"nz-descriptions",8)(1,"nz-descriptions-item",9),_.DNE(2,L,4,6,"ng-container",10),_.k0s(),_.j41(3,"nz-descriptions-item",11),_.EFF(4),_.nI1(5,"date"),_.k0s()()),2&C){const G=_.XpG(2).$implicit;_.Y8G("nzColumn",1),_.R7$(2),_.Y8G("ngForOf",G.uniqueActions),_.R7$(2),_.SpI(" ",_.bMT(5,3,G.lastActionDate)," ")}}function B(C,h){if(1&C&&(_.j41(0,"cvc-user-popover",7),_.DNE(1,y,6,5,"ng-template",null,2,_.C5r),_.k0s()),2&C){const G=_.XpG().$implicit;_.Y8G("userId",G.user.id)}}function P(C,h){if(1&C&&(_.j41(0,"a",5),_.nrm(1,"nz-avatar",6),_.DNE(2,B,3,1,"ng-template",null,1,_.C5r),_.k0s()),2&C){const G=h.$implicit,D=_.sdS(3);_.Y8G("routerLink",_.VkB("/users/",G.user.id)),_.R7$(),_.Y8G("nzSize",14)("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",D)("nzSrc",G.user.profileImagePath)}}function E(C,h){if(1&C&&(_.qex(0),_.DNE(1,P,4,6,"a",4),_.bVm()),2&C){const G=_.XpG();_.R7$(),_.Y8G("ngForOf",G.sortedContributors)}}function V(C,h){1&C&&_.EFF(0," None ")}let K=(()=>{var C;class h{ngOnInit(){if(void 0===this.contributors)throw new Error("Must pass a list of contributors into the contributor stack");this.sortedContributors=this.contributors.slice(),this.sortedContributors.sort((D,X)=>X.totalActionCount-D.totalActionCount)}static#n=C=()=>(this.\u0275fac=function(X){return new(X||h)},this.\u0275cmp=_.VBU({type:h,selectors:[["cvc-contributor-stack"]],inputs:{contributors:"contributors"},standalone:!1,decls:3,vars:2,consts:[["noContributors",""],["curatorPopover",""],["additionalMetadata",""],[4,"ngIf","ngIfElse"],["class","avatar",3,"routerLink",4,"ngFor","ngForOf"],[1,"avatar",3,"routerLink"],["nz-popover","","nzPopoverTrigger","hover","nzPopoverPlacement","bottomRight","nzIcon","user","nzSize","small",3,"nzSize","nzPopoverMouseEnterDelay","nzPopoverContent","nzSrc"],[3,"userId"],["nzBordered","","nzTitle","Activity","nzSize","small",3,"nzColumn"],["nzTitle","Contributions"],[4,"ngFor","ngForOf"],["nzTitle","Last Contribution"],[4,"ngIf"]],template:function(X,Q){if(1&X&&_.DNE(0,E,2,1,"ng-container",3)(1,V,1,0,"ng-template",null,0,_.C5r),2&X){const J=_.sdS(2);_.Y8G("ngIf",Q.sortedContributors&&Q.sortedContributors.length>0)("ngIfElse",J)}},dependencies:[b.Sq,b.bT,z.Wk,t.PM,d.L_,u.xA,u.gr,F.M,b.vh,I.s],encapsulation:2}))}return C(),h})();var U=o(61774);function x(C,h){if(1&C&&(_.qex(0),_.nrm(1,"cvc-contributor-stack",5),_.bVm()),2&C){const G=h.ngIf;_.R7$(),_.Y8G("contributors",G)}}function A(C,h){1&C&&_.EFF(0," None ")}function N(C,h){if(1&C&&(_.qex(0),_.nrm(1,"cvc-contributor-stack",5),_.bVm()),2&C){const G=h.ngIf;_.R7$(),_.Y8G("contributors",G)}}function O(C,h){1&C&&_.EFF(0," None ")}let $=(()=>{var C;class h{constructor(D){this.gql=D}ngOnInit(){if(void 0===this.subscribable)throw new Error("Must pass a subscribable into ContributorAvatars component.");let D=this.gql.watch({subscribable:this.subscribable}).valueChanges;this.curators$=D.pipe((0,c.E)("data","contributors","curators")),this.editors$=D.pipe((0,c.E)("data","contributors","editors"))}static#n=C=()=>(this.\u0275fac=function(X){return new(X||h)(_.rXU(j.wBW))},this.\u0275cmp=_.VBU({type:h,selectors:[["cvc-contributor-avatars"]],inputs:{subscribable:"subscribable"},standalone:!1,decls:14,vars:8,consts:[["noCurators",""],["noEditors",""],["nz-typography","","nzType","secondary",1,"role-group-label"],[1,"role-group"],[4,"ngIf","ngIfElse"],[3,"contributors"]],template:function(X,Q){if(1&X&&(_.j41(0,"span",2),_.EFF(1,"Curators:"),_.k0s(),_.j41(2,"div",3),_.DNE(3,x,2,1,"ng-container",4),_.nI1(4,"ngrxPush"),_.DNE(5,A,1,0,"ng-template",null,0,_.C5r),_.k0s(),_.j41(7,"span",2),_.EFF(8,"Editors:"),_.k0s(),_.j41(9,"div",3),_.DNE(10,N,2,1,"ng-container",4),_.nI1(11,"ngrxPush"),_.DNE(12,O,1,0,"ng-template",null,1,_.C5r),_.k0s()),2&X){const J=_.sdS(6),nn=_.sdS(13);_.R7$(3),_.Y8G("ngIf",_.bMT(4,4,Q.curators$))("ngIfElse",J),_.R7$(7),_.Y8G("ngIf",_.bMT(11,6,Q.editors$))("ngIfElse",nn)}},dependencies:[b.bT,n.Di,K,U.L9],styles:["[_nghost-%COMP%]{display:inline-block}.role-group-label[_ngcontent-%COMP%]{margin-left:12px}.role-group[_ngcontent-%COMP%]{display:inline-block}.role-group[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{display:inline-block;margin-left:2px}"]}))}return C(),h})()},27268:(q,Y,o)=>{o.d(Y,{G:()=>ln});var c=o(72200),_=o(33190),j=o(22839),b=o(25703),n=o(38927),z=o(12617),t=o(84341),d=o(64917),u=o(34308),F=o(23842),I=o(23617),S=o(50513),L=o(1177),y=o(35154),B=o(73664),P=o(2615);let E=(()=>{var M;class T{static#n=M=()=>(this.\u0275fac=function(k){return new(k||T)},this.\u0275mod=B.$C({type:T}),this.\u0275inj=P.G2t({imports:[c.MD,t.YN,t.X1,n.PQ,S.Z,b.Ti,I.$,y.Qt,L.V,F.k,d.i,u.I]}))}return M(),T})();var V=o(77169),K=o(824),U=o(11542),x=o(89590),A=o(51209),N=o(89802),O=o(35493),$=o(87051),C=o(41951),h=o(1236);let G=(()=>{var M;class T{static#n=M=()=>(this.\u0275fac=function(k){return new(k||T)},this.\u0275mod=B.$C({type:T}),this.\u0275inj=P.G2t({imports:[c.MD,t.X1,S.Z,n.PQ,t.YN,I.$,b.Ti,h.MC,C.Y3,y.Qt,L.V,u.I,F.k]}))}return M(),T})();var D=o(29438),X=o(2986),Q=o(19448),J=o(11672),nn=o(97529),on=o(21011),tn=o(97685),sn=o(75699),an=o(7391);let Z=(()=>{var M;class T{static#n=M=()=>(this.\u0275fac=function(k){return new(k||T)},this.\u0275mod=B.$C({type:T}),this.\u0275inj=P.G2t({imports:[c.MD,nn.f3,z.rD,b.Ti,tn.pc,sn.T,an.kT,D.Yb,J._v,X.IJ,Q.g,y.Qt,z.rD,h.MC,C.Y3,on.j,t.YN,A.k,j.m,K.J,N._,U.X,$.U,O.G,x.R,d.i,S.Z,I.$,G,Q.g,V.W]}))}return M(),T})();var rn=o(72968);let ln=(()=>{var M;class T{static#n=M=()=>(this.\u0275fac=function(k){return new(k||T)},this.\u0275mod=B.$C({type:T}),this.\u0275inj=P.G2t({imports:[c.MD,t.YN,S.Z,n.PQ,_.Sw,S.Z,j.m,z.rD,b.Ti,E,Z,J._v,rn.K,D.Yb,tn.pc,d.i]}))}return M(),T})()},27793:(q,Y,o)=>{o.d(Y,{s:()=>j});var c=o(69145),_=o(73664);let j=(()=>{var b;class n{transform(t,d="contributor-card",u=0){return"contributor-card"===d?this.contributorVerbiage(t,u):"action-filter"===d?this.actionFilterVerbiage(t):this.eventFeedVerbiage(t)}eventFeedVerbiage(t){switch(t){case c.H1z.Commented:return"added comment";case c.H1z.RevisionSuggested:return"suggested revision";case c.H1z.RevisionAccepted:return"accepted revision";case c.H1z.RevisionRejected:return"rejected revision";case c.H1z.RevisionSuperseded:return"closed revision";case c.H1z.Flagged:return"opened new flag";case c.H1z.FlagResolved:return"resolved flag";case c.H1z.AssertionSubmitted:return"submitted assertion";case c.H1z.AssertionAccepted:return"accepted assertion";case c.H1z.AssertionRejected:return"rejected assertion";case c.H1z.Submitted:return"submitted evidence item";case c.H1z.Accepted:return"accepted evidence item";case c.H1z.Rejected:return"rejected evidence item";case c.H1z.PublicationSuggested:return"created source suggestion";case c.H1z.CuratedSourceSuggestion:return"finished curating source suggestion";case c.H1z.RejectedSourceSuggestion:return"rejected source suggestion";case c.H1z.RequeuedSourceSuggestion:return"requeued source suggestion";case c.H1z.Reverted:return"reverted evidence item";case c.H1z.AssertionReverted:return"reverted assertion";case c.H1z.DeprecatedVariant:return"deprecated variant";case c.H1z.DeprecatedFeature:return"deprecated feature";case c.H1z.DeprecatedMolecularProfile:return"deprecated molecular profile";case c.H1z.VariantCreated:return"created variant";case c.H1z.FeatureCreated:return"created feature";case c.H1z.ComplexMolecularProfileCreated:return"created complex molecular profile";case c.H1z.CommentDeleted:return"deleted comment";default:return t}}actionFilterVerbiage(t){switch(t){case c.H1z.Commented:return"commented";case c.H1z.RevisionSuggested:return"revision suggested";case c.H1z.RevisionAccepted:return"revision accepted";case c.H1z.RevisionRejected:return"revision rejected";case c.H1z.RevisionSuperseded:return"revision closed";case c.H1z.Flagged:return"flag opened";case c.H1z.FlagResolved:return"flag resolved";case c.H1z.AssertionSubmitted:return"assertion submitted";case c.H1z.AssertionAccepted:return"assertion accepted";case c.H1z.AssertionRejected:return"assertion rejected";case c.H1z.Submitted:return"evidence item submitted";case c.H1z.Accepted:return"evidence item accepted";case c.H1z.Rejected:return"evidence item rejected";case c.H1z.PublicationSuggested:return"source suggestion created";case c.H1z.CuratedSourceSuggestion:return"source suggestion curated";case c.H1z.RejectedSourceSuggestion:return"source suggestion rejected";case c.H1z.RequeuedSourceSuggestion:return"source suggestion requeued";case c.H1z.Reverted:return"evidence item reverted";case c.H1z.AssertionReverted:return"assertion reverted";case c.H1z.DeprecatedVariant:return"variant deprecated";case c.H1z.DeprecatedMolecularProfile:return"molecular profile deprecated";case c.H1z.VariantCreated:return"variant created";case c.H1z.ComplexMolecularProfileCreated:return"complex molecular profile created";case c.H1z.CommentDeleted:return"comment deleted";default:return t}}contributorVerbiage(t,d){switch(t){case c.H1z.Commented:return 1==d?"left a comment on this entity":`left ${d} comments on this entity`;case c.H1z.RevisionSuggested:return 1==d?"suggested a revision to this entity":`suggested ${d} revisions on this entity`;case c.H1z.RevisionAccepted:return 1==d?"accepted a revision to this entity":`accepted ${d} revisions on this entity`;case c.H1z.RevisionRejected:return 1==d?"rejected a revision to this entity":`rejected ${d} revisions on this entity`;case c.H1z.RevisionSuperseded:return 1==d?"closed a revision to this entity":`closed ${d} revisions on this entity`;case c.H1z.Flagged:return 1==d?"opened new flag on this entity":`opened ${d} new flags on this entity`;case c.H1z.FlagResolved:return 1==d?"resolved a flag on this entity":`resolved ${d} flags on this entity`;case c.H1z.AssertionSubmitted:return"submitted this assertion";case c.H1z.AssertionAccepted:return"accepted this assertion";case c.H1z.AssertionRejected:return"rejected this assertion";case c.H1z.Submitted:return"submitted this evidence item";case c.H1z.Accepted:return"accepted this evidence item";case c.H1z.Rejected:return"rejected this evidence item";case c.H1z.PublicationSuggested:return"";case c.H1z.CuratedSourceSuggestion:return"finished curating this source suggestion";case c.H1z.RejectedSourceSuggestion:return"rejected this source suggestion";case c.H1z.RequeuedSourceSuggestion:return"requeued this source suggestion";case c.H1z.AssertionReverted:return"reverted this assertion";case c.H1z.Reverted:return"reverted this evidence item";case c.H1z.DeprecatedVariant:return"deprecated this variant";case c.H1z.DeprecatedMolecularProfile:return"deprecated this molecular profile";case c.H1z.DeprecatedFeature:return"deprecated this feature";case c.H1z.FeatureCreated:return"created this feature";case c.H1z.VariantCreated:return"created this variant";case c.H1z.ComplexMolecularProfileCreated:return"created this complex molecular profile";default:return t}}static#n=b=()=>(this.\u0275fac=function(d){return new(d||n)},this.\u0275pipe=_.EJ8({name:"eventVerbiage",type:n,pure:!0,standalone:!1}))}return b(),n})()},30869:(q,Y,o)=>{o.d(Y,{S:()=>ln});var c=o(72200),_=o(25703),j=o(12617),b=o(97529),n=o(73664),z=o(2615);let t=(()=>{var M;class T{static#n=M=()=>(this.\u0275fac=function(k){return new(k||T)},this.\u0275mod=n.$C({type:T}),this.\u0275inj=z.G2t({imports:[c.MD,b.f3]}))}return M(),T})();var d=o(65757),u=o(51209),F=o(97685),I=o(75699),S=o(7391),L=o(29438),y=o(22839),B=o(824),P=o(11542),E=o(35493),V=o(74696),K=o(11672),U=o(89590),x=o(2986),A=o(19448),N=o(35154),O=o(50513),$=o(23617),C=o(41951),h=o(1236),G=o(21011),D=o(84341),X=o(64917),Q=o(62e3),J=o(34308),nn=o(77169),on=o(86936),tn=o(89802),sn=o(60996),an=o(56912),Z=o(47086),rn=o(98920);let ln=(()=>{var M;class T{static#n=M=()=>(this.\u0275fac=function(k){return new(k||T)},this.\u0275mod=n.$C({type:T}),this.\u0275inj=z.G2t({imports:[c.MD,b.f3,j.rD,_.Ti,F.pc,I.T,S.kT,L.Yb,K._v,x.IJ,A.g,N.Qt,j.rD,h.MC,C.Y3,G.j,Q.WF,A.g,D.YN,d.v,an.l,u.k,t,y.m,B.J,tn._,P.X,Z.C,on.G,E.G,U.R,J.I,sn.o,X.i,nn.W,rn.U,V.GB,O.Z,$.$]}))}return M(),T})()},45269:(q,Y,o)=>{o.d(Y,{o:()=>U});var c=o(71226),_=o(69145),j=o(21413),b=o(5964),n=o(56977),z=o(69199),t=o(24608),d=o(2615),u=o(73664),F=o(74222),I=o(72200),S=o(50513),L=o(16389),y=o(25930),B=o(41951),P=o(35154),E=o(61774);function V(x,A){if(1&x){const N=u.RV6();u.qex(0),u.j41(1,"button",2),u.bIt("click",function(){d.eBV(N);const $=u.XpG();return d.Njj($.unsubscribe())}),u.nrm(2,"i",3),u.k0s(),u.bVm()}if(2&x){const N=u.XpG();u.R7$(),u.Y8G("nzLoading",N.isSubmitting)}}function K(x,A){if(1&x){const N=u.RV6();u.j41(0,"button",4),u.bIt("click",function(){d.eBV(N);const $=u.XpG();return d.Njj($.subscribe())}),u.nrm(1,"i",5),u.k0s()}if(2&x){const N=u.XpG();u.Y8G("nzLoading",N.isSubmitting)}}let U=(()=>{var x;class A{constructor(O,$,C,h){this.isSubscribedGQL=O,this.unsubscribeMutation=$,this.subscribeMutation=C,this.networkErrorService=h,this.isSubmitting=!1,this.destroy$=new j.B,this.unsubscribeMutator=new c.E(h),this.subscribeMutator=new c.E(h)}ngOnInit(){if(void 0===this.viewer)throw new Error("Must pass in a viewer to the CvcEntitySubscriptionButtonComponent");if(void 0===this.typename)throw new Error("Must pass in a typename to the CvcEntitySubscriptionButtonComponent");if(void 0===this.subscribableId)throw new Error("Must pass in a subscribableId to the CvcEntitySubscriptionButtonComponent");this.subscribable={id:this.subscribableId,entityType:_.V9U[this.typename]},this.queryRef=this.isSubscribedGQL.watch({subscribable:this.subscribable}),this.existingSubscription$=this.queryRef.valueChanges.pipe((0,t.E)("data","subscriptionForEntity"),(0,b.p)(z.kP))}subscribe(){this.subscribable&&(this.isSubmitting=!0,this.subscribeMutator.mutate(this.subscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,n.Q)(this.destroy$)).subscribe($=>{$&&(this.queryRef?.refetch(),this.isSubmitting=!1)}))}unsubscribe(){this.subscribable&&(this.isSubmitting=!0,this.unsubscribeMutator.mutate(this.unsubscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,n.Q)(this.destroy$)).subscribe($=>{$&&(this.queryRef?.refetch(),this.isSubmitting=!1)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#n=x=()=>(this.\u0275fac=function($){return new($||A)(u.rXU(_.aUH),u.rXU(_.ytN),u.rXU(_.RSy),u.rXU(F.N))},this.\u0275cmp=u.VBU({type:A,selectors:[["cvc-entity-subscription-button"]],inputs:{viewer:"viewer",typename:"typename",subscribableId:"subscribableId"},standalone:!1,decls:4,vars:4,consts:[["noSub",""],[4,"ngIf","ngIfElse"],["nz-button","","nz-tooltip","Unsubscribe","nzSize","small",3,"click","nzLoading"],["nz-icon","","nzType","bell","nzTheme","fill"],["nz-button","","nz-tooltip","Subscribe","nzSize","small",3,"click","nzLoading"],["nz-icon","","nzType","bell","nzTheme","outline"]],template:function($,C){if(1&$&&(u.DNE(0,V,3,1,"ng-container",1),u.nI1(1,"ngrxPush"),u.DNE(2,K,2,1,"ng-template",null,0,u.C5r)),2&$){const h=u.sdS(3);u.Y8G("ngIf",u.bMT(1,2,C.existingSubscription$))("ngIfElse",h)}},dependencies:[I.bT,S.a,L.c,y.p,B.Dn,P.LH,E.L9],styles:["[_nghost-%COMP%]{display:block}"]}))}return x(),A})()},45736:(q,Y,o)=>{o.d(Y,{V:()=>t});var c=o(72200),_=o(50513),j=o(41951),b=o(35154),n=o(2615),z=o(73664);let t=(()=>{var d;class u{static#n=d=()=>(this.\u0275fac=function(S){return new(S||u)},this.\u0275mod=z.$C({type:u}),this.\u0275inj=n.G2t({imports:[c.MD,_.Z,j.Y3,b.Qt]}))}return d(),u})()},68103:(q,Y,o)=>{o.d(Y,{m:()=>S});var c=o(72200),_=o(7391),j=o(38132),b=o(29438),n=o(1236),z=o(64917),t=o(82225),d=o(62e3),u=o(73664),F=o(2615);let I=(()=>{var L;class y{static#n=L=()=>(this.\u0275fac=function(E){return new(E||y)},this.\u0275mod=u.$C({type:y}),this.\u0275inj=F.G2t({imports:[c.MD,j.iI,b.Yb,n.MC,d.WF,z.i,t.h]}))}return L(),y})(),S=(()=>{var L;class y{static#n=L=()=>(this.\u0275fac=function(E){return new(E||y)},this.\u0275mod=u.$C({type:y}),this.\u0275inj=F.G2t({imports:[c.MD,_.kT,I]}))}return L(),y})()},74055:(q,Y,o)=>{o.d(Y,{B:()=>_i});var c=o(69145),_=o(96354),j=o(99172),b=o(24608),n=o(73664),z=o(2615),t=o(56609),d=o(72200),u=o(61774),F=o(97529),I=o(97685),S=o(75699),L=o(29438),y=o(11672),B=o(50513),P=o(16389),E=o(25930),V=o(41951),K=o(9365),U=o(21413),x=o(5964),A=o(84572),N=o(71226),O=o(56977),$=o(69199),C=o(41305),h=o(74222),G=o(12617),D=o(25703),X=o(7391),Q=o(2986),J=o(19448),nn=o(35154),on=o(1236),tn=o(62e3);let sn=(()=>{var e;class s{transform(l){return l?l.replace(/([a-z])([A-Z])/g,"$1 $2"):""}static#n=e=()=>(this.\u0275fac=function(g){return new(g||s)},this.\u0275pipe=n.EJ8({name:"camelToWords",type:s,pure:!0,standalone:!1}))}return e(),s})();const an=["itemTemplate"],Z=e=>({$implicit:e});function rn(e,s){if(1&e&&(n.qex(0),n.j41(1,"span",12),n.eu8(2,13),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit,l=n.XpG();n.R7$(2),n.Y8G("ngTemplateOutlet",l.itemTemplateRef||null)("ngTemplateOutletContext",n.eq3(2,Z,i))}}function ln(e,s){if(1&e&&(n.j41(0,"nz-tag",14),n.EFF(1),n.nI1(2,"camelToWords"),n.k0s()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Lme("Deleted ",n.bMT(2,2,i.entityType)," ",i.id)}}function M(e,s){if(1&e&&(n.j41(0,"nz-list-item",10),n.DNE(1,rn,3,4,"ng-container",11)(2,ln,3,4,"ng-template",null,0,n.C5r),n.k0s()),2&e){const i=s.$implicit,l=n.sdS(3);n.R7$(),n.Y8G("ngIf",!i.deleted)("ngIfElse",l)}}function T(e,s){if(1&e&&n.nrm(0,"nz-list-empty",15),2&e){const i=n.XpG();n.Y8G("nzNoResult",n.VkB("No ",i.entityType))}}function Cn(e,s){if(1&e&&(n.qex(0),n.j41(1,"span",12),n.eu8(2,13),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit,l=n.XpG(3);n.R7$(2),n.Y8G("ngTemplateOutlet",l.itemTemplateRef||null)("ngTemplateOutletContext",n.eq3(2,Z,i))}}function w(e,s){if(1&e&&(n.j41(0,"nz-tag",14),n.EFF(1),n.nI1(2,"camelToWords"),n.k0s()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Lme("Deleted ",n.bMT(2,2,i.entityType)," ",i.id)}}function k(e,s){if(1&e&&(n.j41(0,"nz-list-item",17),n.DNE(1,Cn,3,4,"ng-container",11)(2,w,3,4,"ng-template",null,0,n.C5r),n.k0s()),2&e){const i=s.$implicit,l=n.sdS(3);n.R7$(),n.Y8G("ngIf",!i.deleted)("ngIfElse",l)}}function hn(e,s){if(1&e&&n.nrm(0,"nz-list-empty",15),2&e){const i=n.XpG(3);n.Y8G("nzNoResult",n.VkB("No ",i.entityType," Removed"))}}function Rn(e,s){if(1&e&&(n.j41(0,"nz-list",3),n.DNE(1,k,4,2,"nz-list-item",16)(2,hn,1,2,"nz-list-empty",5),n.k0s()),2&e){const i=n.XpG(2);n.Y8G("nzHeader",n.VkB("Removed ",i.entityType)),n.R7$(),n.Y8G("ngForOf",i.diffObject.removedObjects),n.R7$(),n.Y8G("ngIf",0===i.diffObject.removedObjects.length)}}function Tn(e,s){1&e&&(n.qex(0),n.DNE(1,Rn,3,4,"nz-list",8),n.bVm())}function mn(e,s){if(1&e&&(n.qex(0),n.j41(1,"span",12),n.eu8(2,13),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit,l=n.XpG(2);n.R7$(2),n.Y8G("ngTemplateOutlet",l.itemTemplateRef||null)("ngTemplateOutletContext",n.eq3(2,Z,i))}}function bn(e,s){if(1&e&&(n.j41(0,"nz-tag",14),n.EFF(1),n.nI1(2,"camelToWords"),n.k0s()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Lme("Deleted ",n.bMT(2,2,i.entityType)," ",i.id)}}function yn(e,s){if(1&e&&(n.j41(0,"nz-list-item",19),n.DNE(1,mn,3,4,"ng-container",11)(2,bn,3,4,"ng-template",null,0,n.C5r),n.k0s()),2&e){const i=s.$implicit,l=n.sdS(3);n.R7$(),n.Y8G("ngIf",!i.deleted)("ngIfElse",l)}}function En(e,s){if(1&e&&n.nrm(0,"nz-list-empty",15),2&e){const i=n.XpG(2);n.Y8G("nzNoResult",n.VkB("No ",i.entityType," Added"))}}function dn(e,s){if(1&e&&(n.j41(0,"nz-list",3),n.DNE(1,yn,4,2,"nz-list-item",18)(2,En,1,2,"nz-list-empty",5),n.k0s()),2&e){const i=n.XpG();n.Y8G("nzHeader",n.VkB("Added ",i.entityType)),n.R7$(),n.Y8G("ngForOf",i.diffObject.addedObjects),n.R7$(),n.Y8G("ngIf",0===i.diffObject.addedObjects.length)}}function Gn(e,s){if(1&e&&(n.qex(0),n.j41(1,"span",12),n.eu8(2,13),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit,l=n.XpG(3);n.R7$(2),n.Y8G("ngTemplateOutlet",l.itemTemplateRef||null)("ngTemplateOutletContext",n.eq3(2,Z,i))}}function Fn(e,s){if(1&e&&(n.j41(0,"nz-tag",14),n.EFF(1),n.nI1(2,"camelToWords"),n.k0s()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Lme("Deleted ",n.bMT(2,2,i.entityType)," ",i.id)}}function Sn(e,s){if(1&e&&(n.j41(0,"nz-list-item",21),n.DNE(1,Gn,3,4,"ng-container",11)(2,Fn,3,4,"ng-template",null,0,n.C5r),n.k0s()),2&e){const i=s.$implicit,l=n.sdS(3);n.R7$(),n.Y8G("ngIf",!i.deleted)("ngIfElse",l)}}function xn(e,s){if(1&e&&n.nrm(0,"nz-list-empty",15),2&e){const i=n.XpG(3);n.Y8G("nzNoResult",n.VkB("No ",i.entityType," Kept"))}}function $n(e,s){if(1&e&&(n.j41(0,"nz-list",3),n.DNE(1,Sn,4,2,"nz-list-item",20)(2,xn,1,2,"nz-list-empty",5),n.k0s()),2&e){const i=n.XpG(2);n.Y8G("nzHeader",n.VkB("Kept ",i.entityType)),n.R7$(),n.Y8G("ngForOf",i.diffObject.keptObjects),n.R7$(),n.Y8G("ngIf",0===i.diffObject.keptObjects.length)}}function In(e,s){1&e&&(n.qex(0),n.DNE(1,$n,3,4,"nz-list",8),n.bVm())}function jn(e,s){if(1&e&&(n.qex(0),n.j41(1,"span",12),n.eu8(2,13),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit,l=n.XpG();n.R7$(2),n.Y8G("ngTemplateOutlet",l.itemTemplateRef||null)("ngTemplateOutletContext",n.eq3(2,Z,i))}}function Dn(e,s){if(1&e&&(n.j41(0,"nz-tag",14),n.EFF(1),n.nI1(2,"camelToWords"),n.k0s()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Lme("Deleted ",n.bMT(2,2,i.entityType)," ",i.id)}}function Ln(e,s){if(1&e&&(n.j41(0,"nz-list-item",22),n.DNE(1,jn,3,4,"ng-container",11)(2,Dn,3,4,"ng-template",null,0,n.C5r),n.k0s()),2&e){const i=s.$implicit,l=n.sdS(3);n.R7$(),n.Y8G("ngIf",!i.deleted)("ngIfElse",l)}}function On(e,s){if(1&e&&n.nrm(0,"nz-list-empty",15),2&e){const i=n.XpG();n.Y8G("nzNoResult",n.VkB("No ",i.entityType))}}let Mn=(()=>{var e;class s{constructor(){}ngOnInit(){if(void 0===this.diffObject)throw new Error("Must specify a diffObject.");if(void 0===this.entityType)throw new Error("Must specify an entityType.")}static#n=e=()=>(this.\u0275fac=function(g){return new(g||s)},this.\u0275cmp=n.VBU({type:s,selectors:[["cvc-revision-list-diff"]],contentQueries:function(g,f,H){if(1&g&&n.wni(H,an,5),2&g){let W;n.mGM(W=n.lsd())&&(f.itemTemplateRef=W.first)}},inputs:{diffObject:"diffObject",entityType:"entityType"},standalone:!1,decls:14,vars:14,consts:[["deleted",""],[3,"nzGutter"],[3,"nzSpan"],["nzBordered","","nzType","inner","nzSize","small",3,"nzHeader"],["ngClass","current",4,"ngFor","ngForOf"],[3,"nzNoResult",4,"ngIf"],["nzDirection","vertical"],[4,"ngIf"],["nzBordered","","nzType","inner","nzSize","small",3,"nzHeader",4,"nzSpaceItem"],["ngClass","suggested",4,"ngFor","ngForOf"],["ngClass","current"],[4,"ngIf","ngIfElse"],["nz-typography",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nzColor","error"],[3,"nzNoResult"],["ngClass","removed",4,"ngFor","ngForOf"],["ngClass","removed"],["ngClass","added",4,"ngFor","ngForOf"],["ngClass","added"],["ngClass","kept",4,"ngFor","ngForOf"],["ngClass","kept"],["ngClass","suggested"]],template:function(g,f){1&g&&(n.j41(0,"nz-row",1)(1,"nz-col",2)(2,"nz-list",3),n.DNE(3,M,4,2,"nz-list-item",4)(4,T,1,2,"nz-list-empty",5),n.k0s()(),n.j41(5,"nz-col",2)(6,"nz-space",6),n.DNE(7,Tn,2,0,"ng-container",7)(8,dn,3,4,"nz-list",8)(9,In,2,0,"ng-container",7),n.k0s()(),n.j41(10,"nz-col",2)(11,"nz-list",3),n.DNE(12,Ln,4,2,"nz-list-item",9)(13,On,1,2,"nz-list-empty",5),n.k0s()()()),2&g&&(n.Y8G("nzGutter",16),n.R7$(),n.Y8G("nzSpan",8),n.R7$(),n.Y8G("nzHeader",n.VkB("Original ",f.entityType," List")),n.R7$(),n.Y8G("ngForOf",f.diffObject.currentObjects),n.R7$(),n.Y8G("ngIf",0===f.diffObject.currentObjects.length),n.R7$(),n.Y8G("nzSpan",8),n.R7$(2),n.Y8G("ngIf",f.diffObject.currentObjects.length>0),n.R7$(2),n.Y8G("ngIf",f.diffObject.currentObjects.length>0),n.R7$(),n.Y8G("nzSpan",8),n.R7$(),n.Y8G("nzHeader",n.VkB("Revised ",f.entityType," List")),n.R7$(),n.Y8G("ngForOf",f.diffObject.suggestedObjects),n.R7$(),n.Y8G("ngIf",0===f.diffObject.suggestedObjects.length))},dependencies:[d.YU,d.Sq,d.bT,d.T3,G.eE,G.nt,G.lQ,F.Uq,F.e,S.s,I.U5,I.Dq,sn],styles:["[_nghost-%COMP%]{display:block}nz-list[_ngcontent-%COMP%]   .kept[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{background-color:#f6ffed;color:#135200}nz-list[_ngcontent-%COMP%]   .removed[_ngcontent-%COMP%]{background-color:#fff1f0;color:#820014}nz-list[_ngcontent-%COMP%]   .suggested[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-space[_ngcontent-%COMP%]{width:100%}"]}))}return e(),s})();var Pn=o(3245),Nn=o(69062);let Yn=(()=>{var e;class s{constructor(){}ngOnInit(){if(void 0===this.left)throw new Error("Must provide a left side of the diff.");if(void 0===this.right)throw new Error("Must provide a right side of the diff.");if(void 0===this.entityType)throw new Error("Must provide a diff.")}static#n=e=()=>(this.\u0275fac=function(g){return new(g||s)},this.\u0275cmp=n.VBU({type:s,selectors:[["cvc-revision-value-diff"]],inputs:{currentValue:"currentValue",suggestedValue:"suggestedValue",left:"left",right:"right",entityType:"entityType"},standalone:!1,decls:15,vars:10,consts:[[3,"nzGutter"],[3,"nzSpan"],[3,"innerHtml"],[1,"diff","suggested"],[1,"background"]],template:function(g,f){1&g&&(n.j41(0,"nz-row",0)(1,"nz-col",1)(2,"h4"),n.EFF(3),n.k0s(),n.nrm(4,"div",2),n.k0s(),n.j41(5,"nz-col",1)(6,"h4"),n.EFF(7),n.k0s(),n.nrm(8,"div",2),n.k0s(),n.j41(9,"nz-col",1)(10,"h4"),n.EFF(11),n.k0s(),n.j41(12,"div",3)(13,"div",4),n.EFF(14),n.k0s()()()()),2&g&&(n.Y8G("nzGutter",16),n.R7$(),n.Y8G("nzSpan",8),n.R7$(2),n.SpI("Original ",f.entityType),n.R7$(),n.Y8G("innerHtml",f.left,n.npT),n.R7$(),n.Y8G("nzSpan",8),n.R7$(2),n.SpI("",f.entityType," Diff"),n.R7$(),n.Y8G("innerHtml",f.right,n.npT),n.R7$(),n.Y8G("nzSpan",8),n.R7$(2),n.SpI("Revised ",f.entityType),n.R7$(3),n.SpI(" ",f.suggestedValue," "))},dependencies:[F.Uq,F.e],styles:[":host{display:block}.diff{overflow:auto;width:100%}.diff .background{padding:4px 8px}.diff.insertions .background{background:#f6ffed;color:#237804}.diff.deletions .background{background:#fff1f0;color:#a8071a}.diff.suggested .background,.diff.original .background{background:#f0f5ff;color:#10239e}.diff del,.diff ins{text-decoration:none}.diff del strong{font-weight:400;background:#fcc}.diff ins strong{font-weight:400;background:#9f9}.diff .del{font-weight:400;background:#fee;color:#b00}.diff .ins{font-weight:400;background:#dfd;color:#080}ul{list-style:none}\n"],encapsulation:2}))}return e(),s})();var Vn=o(56408),An=o(88741),Xn=o(99563),Bn=o(7047),kn=o(90959),Un=o(39045),cn=o(86073),Hn=o(50311),Wn=o(65566),Qn=o(5473),Kn=o(4126),Jn=o(56440),un=o(74696),Zn=o(23617),wn=o(61845),qn=o(83075),nt=o(8139);const fn=(e,s,i,l,g)=>({id:e,name:s,link:i,deprecated:l,flagged:g}),_n=(e,s,i,l)=>({id:e,name:s,link:i,deprecated:l}),vn=(e,s,i)=>({id:e,name:s,link:i}),zn=(e,s,i,l,g,f)=>({id:e,name:s,link:i,feature:l,deprecated:g,flagged:f}),tt=(e,s,i,l,g)=>({id:e,name:s,link:i,status:l,flagged:g}),et=()=>({float:"right"});function it(e,s){if(1&e){const i=n.RV6();n.j41(0,"nz-alert",17),n.bIt("nzOnClose",function(){const g=z.eBV(i).$implicit,f=n.XpG();return z.Njj(f.onErrorBannerClose(g))}),n.k0s()}2&e&&n.Y8G("nzMessage",s.$implicit)}function ot(e,s){if(1&e){const i=n.RV6();n.j41(0,"nz-alert",18),n.bIt("nzOnClose",function(){z.eBV(i);const g=n.XpG();return z.Njj(g.onSuccessBannerClose())}),n.k0s()}if(2&e){const i=n.XpG();n.Y8G("nzMessage",n.VkB("Revision(s) successfully ",i.success,"."))}}function st(e,s){if(1&e&&n.nrm(0,"cvc-feature-tag",29),2&e){const i=s.$implicit;n.Y8G("feature",n.s1E(1,fn,i.id,i.displayName,i.link,i.deprecated,i.flagged))}}function at(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",28),n.DNE(2,st,1,7,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function rt(e,s){1&e&&n.nrm(0,"cvc-source-tag",31),2&e&&n.Y8G("source",s.$implicit)}function pn(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",30),n.DNE(2,rt,1,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function lt(e,s){if(1&e&&n.nrm(0,"cvc-disease-tag",33),2&e){const i=s.$implicit;n.Y8G("disease",n.ziG(1,_n,i.id,i.displayName,i.link,i.deprecated))}}function ct(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",32),n.DNE(2,lt,1,6,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function _t(e,s){if(1&e&&n.nrm(0,"cvc-molecular-profile-tag",35),2&e){const i=s.$implicit;n.Y8G("molecularProfile",n.s1E(1,fn,i.id,i.displayName,i.link,i.deprecated,i.flagged))}}function pt(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",34),n.DNE(2,_t,1,7,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function gt(e,s){if(1&e&&n.nrm(0,"cvc-therapy-tag",37),2&e){const i=s.$implicit;n.Y8G("therapy",n.ziG(1,_n,i.id,i.displayName,i.link,i.deprecated))}}function mt(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",36),n.DNE(2,gt,1,6,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function dt(e,s){if(1&e&&n.nrm(0,"cvc-therapy-tag",37),2&e){const i=s.$implicit;n.Y8G("therapy",n.ziG(1,_n,i.id,i.displayName,i.link,i.deprecated))}}function ut(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",36),n.DNE(2,dt,1,6,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function ft(e,s){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=s.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function vt(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",38),n.DNE(2,ft,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function zt(e,s){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=s.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function Ct(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",39),n.DNE(2,zt,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function ht(e,s){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=s.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function Rt(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",40),n.DNE(2,ht,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function Tt(e,s){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=s.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function bt(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",41),n.DNE(2,Tt,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function yt(e,s){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=s.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function Et(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",42),n.DNE(2,yt,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function a(e,s){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=s.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function p(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",43),n.DNE(2,a,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function r(e,s){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=s.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function m(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",44),n.DNE(2,r,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function v(e,s){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=s.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function R(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",45),n.DNE(2,v,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function en(e,s){if(1&e&&n.nrm(0,"cvc-variant-type-tag",47),2&e){const i=s.$implicit;n.Y8G("variantType",n.sMw(1,vn,i.id,i.displayName,i.link))}}function $t(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",46),n.DNE(2,en,1,5,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function It(e,s){if(1&e&&n.nrm(0,"cvc-phenotype-tag",49),2&e){const i=s.$implicit;n.Y8G("phenotype",n.sMw(1,vn,i.id,i.displayName,i.link))}}function jt(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",48),n.DNE(2,It,1,5,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function Dt(e,s){if(1&e&&n.nrm(0,"cvc-feature-variant-tag",51),2&e){const i=s.$implicit;n.Y8G("variant",n.l4e(1,zn,i.id,i.displayName,i.link,i.feature,i.deprecated,i.flagged))}}function Lt(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",50),n.DNE(2,Dt,1,8,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function Ot(e,s){if(1&e&&n.nrm(0,"cvc-feature-variant-tag",51),2&e){const i=s.$implicit;n.Y8G("variant",n.l4e(1,zn,i.id,i.displayName,i.link,i.feature,i.deprecated,i.flagged))}}function Mt(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",52),n.DNE(2,Ot,1,8,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function Pt(e,s){1&e&&n.nrm(0,"cvc-source-tag",31),2&e&&n.Y8G("source",s.$implicit)}function Nt(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",53),n.DNE(2,Pt,1,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function Yt(e,s){if(1&e&&n.nrm(0,"cvc-evidence-tag",55),2&e){const i=s.$implicit;n.Y8G("evidence",n.s1E(1,tt,i.id,i.displayName,i.link,i.status,i.flagged))}}function Vt(e,s){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",54),n.DNE(2,Yt,1,7,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function At(e,s){if(1&e&&(n.qex(0),n.nrm(1,"cvc-revision-value-diff",56),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("currentValue",i.currentValue)("suggestedValue",i.suggestedValue)("left",i.linkoutData.diffValue.left)("right",i.linkoutData.diffValue.right)("entityType",i.linkoutData.name)}}function Xt(e,s){if(1&e&&(n.qex(0),n.nrm(1,"cvc-comment-body",60),n.bVm()),2&e){const i=n.XpG(2).$implicit;n.R7$(),n.Y8G("commentBodySegments",i.resolutionActivity.parsedNote)}}function Bt(e,s){if(1&e&&n.nrm(0,"cvc-user-tag",61),2&e){const i=n.XpG(2).$implicit;n.Y8G("user",i.resolutionActivity.user)}}function kt(e,s){if(1&e&&(n.qex(0),n.nrm(1,"nz-divider"),n.j41(2,"nz-row")(3,"nz-col",57),n.DNE(4,Xt,2,1,"ng-container",27),n.k0s(),n.j41(5,"nz-col",58),n.EFF(6),n.nI1(7,"enumToTitle"),n.DNE(8,Bt,1,1,"cvc-user-tag",59),n.EFF(9),n.nI1(10,"timeAgo"),n.k0s()(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(4),n.Y8G("ngIf",null==i.resolutionActivity?null:i.resolutionActivity.parsedNote),n.R7$(2),n.SpI(" ",n.bMT(7,4,i.status)," By "),n.R7$(2),n.Y8G("ngIf",void 0!==(null==i.resolutionActivity?null:i.resolutionActivity.user)),n.R7$(),n.SpI(" ",n.bMT(10,6,null==i.resolutionActivity?null:i.resolutionActivity.createdAt)," ")}}function Ut(e,s){if(1&e&&(n.j41(0,"span"),n.nrm(1,"i",63),n.nI1(2,"entityColor"),n.EFF(3),n.j41(4,"span"),n.EFF(5),n.k0s()()),2&e){const i=n.XpG(2).$implicit;n.R7$(),n.Y8G("nzTwotoneColor",n.bMT(2,3,"Revision")),n.R7$(2),n.SpI(" RID",i.id," "),n.R7$(2),n.SpI("",i.linkoutData.name," Updated")}}function Ht(e,s){if(1&e&&n.nrm(0,"i",65),2&e){n.XpG();const i=n.sdS(3);n.Y8G("nzPopoverContent",i)}}function Wt(e,s){if(1&e&&n.nrm(0,"cvc-comment-body",60),2&e){const i=n.XpG(3).$implicit;n.Y8G("commentBodySegments",i.creationActivity.parsedNote)}}function Qt(e,s){1&e&&(n.qex(0),n.DNE(1,Ht,1,1,"i",64)(2,Wt,1,1,"ng-template",null,5,n.C5r),n.bVm())}function Kt(e,s){if(1&e&&(n.j41(0,"nz-space"),n.DNE(1,Ut,6,5,"span",62)(2,Qt,4,0,"ng-container",27),n.k0s()),2&e){const i=n.XpG().$implicit;n.R7$(2),n.Y8G("ngIf",null==i.creationActivity?null:i.creationActivity.parsedNote)}}function Jt(e,s){if(1&e&&(n.j41(0,"span",71),n.EFF(1," for\xa0 "),n.k0s(),n.nrm(2,"cvc-organization-tag",72)),2&e){const i=n.XpG(4).$implicit;n.R7$(2),n.Y8G("org",i.creationActivity.organization)}}function Zt(e,s){if(1&e&&(n.qex(0),n.j41(1,"span",71),n.EFF(2," By\xa0 "),n.k0s(),n.nrm(3,"cvc-user-tag",61),n.nVh(4,Jt,3,1),n.bVm()),2&e){const i=n.XpG(3).$implicit;n.R7$(3),n.Y8G("user",i.creationActivity.user),n.R7$(),n.vxM(null!=i.creationActivity&&i.creationActivity.organization?4:-1)}}function wt(e,s){1&e&&(n.j41(0,"span",71),n.EFF(1,"Submitted"),n.k0s())}function qt(e,s){if(1&e&&(n.j41(0,"span"),n.DNE(1,Zt,5,2,"ng-container",70)(2,wt,2,0,"ng-template",null,6,n.C5r),n.j41(4,"span",71),n.EFF(5),n.nI1(6,"timeAgo"),n.k0s()()),2&e){const i=n.sdS(3),l=n.XpG(2).$implicit;n.R7$(),n.Y8G("ngIf",null==l.creationActivity?null:l.creationActivity.user)("ngIfElse",i),n.R7$(4),n.JRh(n.bMT(6,3,l.createdAt))}}function ne(e,s){if(1&e&&n.nrm(0,"cvc-status-tag",73),2&e){const i=n.XpG(2).$implicit;n.Y8G("status",i.status)}}function te(e,s){1&e&&n.nrm(0,"nz-divider",74)}function ee(e,s){if(1&e){const i=n.RV6();n.j41(0,"a",75),n.bIt("click",function(){z.eBV(i);const g=n.XpG(2).$implicit,f=n.XpG(3);return z.Njj(f.onChangesetSelected(g.revisionSetId))}),n.EFF(1,"Show Group"),n.k0s()}}function ie(e,s){1&e&&n.nrm(0,"nz-divider",74)}function oe(e,s){1&e&&n.nrm(0,"label",77),2&e&&n.Y8G("nzDisabled",!0)}function se(e,s){1&e&&n.nrm(0,"label",79),2&e&&n.Y8G("nzDisabled",!0)}function ae(e,s){if(1&e){const i=n.RV6();n.j41(0,"label",80),n.bIt("nzCheckedChange",function(g){z.eBV(i);const f=n.XpG(5).$implicit,H=n.XpG(3);return z.Njj(H.onRevisionCheckboxClicked(g,f.id))}),n.k0s()}}function re(e,s){if(1&e&&n.DNE(0,se,1,1,"label",78)(1,ae,1,0,"ng-template",null,8,n.C5r),2&e){const i=n.sdS(2),l=n.XpG(4).$implicit,g=n.XpG(2).ngrxLet;n.Y8G("ngIf",g.isCurator&&(null==g.user?null:g.user.id)!=(null==l.creationActivity?null:l.creationActivity.user.id))("ngIfElse",i)}}function le(e,s){if(1&e&&(n.j41(0,"span"),n.DNE(1,oe,1,1,"label",76)(2,re,3,2,"ng-template",null,7,n.C5r),n.k0s()),2&e){const i=n.sdS(3),l=n.XpG(5).ngrxLet;n.R7$(),n.Y8G("ngIf",!l.signedIn)("ngIfElse",i)}}function ce(e,s){1&e&&(n.qex(0),n.DNE(1,ie,1,0,"nz-divider",68)(2,le,4,2,"span",62),n.bVm())}function _e(e,s){if(1&e){const i=n.RV6();n.j41(0,"nz-space",66),n.bIt("click",function(g){return z.eBV(i),z.Njj(g.stopPropagation())}),n.DNE(1,qt,7,5,"span",62)(2,ne,1,1,"cvc-status-tag",67)(3,te,1,0,"nz-divider",68)(4,ee,2,0,"a",69)(5,ce,3,0,"ng-container",27),n.k0s()}if(2&e){const i=n.XpG().$implicit;n.R7$(5),n.Y8G("ngIf","NEW"===i.status)}}function pe(e,s){if(1&e&&(n.j41(0,"nz-collapse-panel",23),n.qex(1,24),n.DNE(2,at,4,1,"ng-container",25)(3,pn,4,1,"ng-container",25)(4,ct,4,1,"ng-container",25)(5,pt,4,1,"ng-container",25)(6,mt,4,1,"ng-container",25)(7,ut,4,1,"ng-container",25)(8,vt,4,1,"ng-container",25)(9,Ct,4,1,"ng-container",25)(10,Rt,4,1,"ng-container",25)(11,bt,4,1,"ng-container",25)(12,Et,4,1,"ng-container",25)(13,p,4,1,"ng-container",25)(14,m,4,1,"ng-container",25)(15,R,4,1,"ng-container",25)(16,$t,4,1,"ng-container",25)(17,jt,4,1,"ng-container",25)(18,Lt,4,1,"ng-container",25)(19,Mt,4,1,"ng-container",25)(20,Nt,4,1,"ng-container",25)(21,Vt,4,1,"ng-container",25)(22,At,2,5,"ng-container",26),n.bVm(),n.DNE(23,kt,11,8,"ng-container",27)(24,Kt,3,1,"ng-template",null,2,n.C5r)(26,_e,6,1,"ng-template",null,3,n.C5r),n.k0s()),2&e){const i=s.$implicit,l=n.sdS(25),g=n.sdS(27);n.Y8G("nzHeader",l)("nzExtra",g)("nzActive",!0),n.R7$(),n.Y8G("ngSwitch",i.fieldName),n.R7$(),n.Y8G("ngSwitchCase","feature_id"),n.R7$(),n.Y8G("ngSwitchCase","source_ids"),n.R7$(),n.Y8G("ngSwitchCase","disease_id"),n.R7$(),n.Y8G("ngSwitchCase","molecular_profile_id"),n.R7$(),n.Y8G("ngSwitchCase","drug_ids"),n.R7$(),n.Y8G("ngSwitchCase","therapy_ids"),n.R7$(),n.Y8G("ngSwitchCase","variant_alias_ids"),n.R7$(),n.Y8G("ngSwitchCase","feature_alias_ids"),n.R7$(),n.Y8G("ngSwitchCase","molecular_profile_alias_ids"),n.R7$(),n.Y8G("ngSwitchCase","clinvar_entry_ids"),n.R7$(),n.Y8G("ngSwitchCase","clingen_code_ids"),n.R7$(),n.Y8G("ngSwitchCase","acmg_code_ids"),n.R7$(),n.Y8G("ngSwitchCase","nccn_guideline_id"),n.R7$(),n.Y8G("ngSwitchCase","hgvs_description_ids"),n.R7$(),n.Y8G("ngSwitchCase","variant_type_ids"),n.R7$(),n.Y8G("ngSwitchCase","phenotype_ids"),n.R7$(),n.Y8G("ngSwitchCase","variant_id"),n.R7$(),n.Y8G("ngSwitchCase","variant_ids"),n.R7$(),n.Y8G("ngSwitchCase","source_id"),n.R7$(),n.Y8G("ngSwitchCase","evidence_item_ids"),n.R7$(2),n.Y8G("ngIf","NEW"!==i.status)}}function ge(e,s){if(1&e&&(n.j41(0,"nz-collapse",21),n.DNE(1,pe,28,25,"nz-collapse-panel",22),n.k0s()),2&e){const i=n.XpG(2);n.R7$(),n.Y8G("ngForOf",i.untypedRevisons)}}function me(e,s){1&e&&n.nrm(0,"nz-empty",81)}function de(e,s){if(1&e&&(n.qex(0),n.j41(1,"nz-card",19),n.DNE(2,ge,2,1,"nz-collapse",20)(3,me,1,0,"ng-template",null,1,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.sdS(4),l=n.XpG(),g=n.sdS(4);n.R7$(),n.Y8G("nzExtra",g),n.R7$(),n.Y8G("ngIf",l.revisions&&l.revisions.length>0)("ngIfElse",i)}}function ue(e,s){}function fe(e,s){1&e&&n.DNE(0,ue,0,0,"ng-template")}function ve(e,s){if(1&e&&(n.qex(0),n.DNE(1,fe,1,0,null,85),n.bVm()),2&e){n.XpG();const i=n.sdS(5);n.R7$(),n.Y8G("ngTemplateOutlet",i)}}function ze(e,s){}function Ce(e,s){1&e&&n.DNE(0,ze,0,0,"ng-template")}function he(e,s){if(1&e&&(n.j41(0,"span",86),n.DNE(1,Ce,1,0,null,85),n.k0s()),2&e){n.XpG();const i=n.sdS(5);n.R7$(),n.Y8G("ngTemplateOutlet",i)}}function Re(e,s){if(1&e){const i=n.RV6();n.j41(0,"button",87),n.mxI("nzPopoverVisibleChange",function(g){z.eBV(i);const f=n.XpG(7);return n.DH7(f.validationPopoverVisible,g)||(f.validationPopoverVisible=g),z.Njj(g)}),n.bIt("click",function(){z.eBV(i);const g=n.XpG(7);return z.Njj(g.validationPopoverVisible=!g.validationPopoverVisible)}),n.EFF(1," Review Selected Revisions "),n.nrm(2,"i",88),n.k0s()}if(2&e){const i=n.XpG(2).ngrxLet,l=n.sdS(7),g=n.sdS(9),f=n.XpG(5);n.Y8G("nzPopoverTitle",l),n.R50("nzPopoverVisible",f.validationPopoverVisible),n.Y8G("nzPopoverContent",g)("nzPopoverTrigger",void 0)("disabled",0===f.selectedRevisionIds.length||!i.signedIn)}}function Te(e,s){if(1&e&&(n.j41(0,"span"),n.DNE(1,ve,2,1,"ng-container",70)(2,he,2,1,"ng-template",null,12,n.C5r)(4,Re,3,5,"ng-template",null,13,n.C5r),n.k0s()),2&e){const i=n.sdS(3),l=n.XpG().ngrxLet;n.R7$(),n.Y8G("ngIf",l.signedIn)("ngIfElse",i)}}function be(e,s){if(1&e&&n.nrm(0,"i",90),2&e){n.XpG(4);const i=n.sdS(3);n.Y8G("nzPopoverContent",i)}}function ye(e,s){1&e&&(n.qex(0),n.DNE(1,be,1,1,"i",89),n.bVm())}function Ee(e,s){if(1&e){const i=n.RV6();n.EFF(0," Review Selected Revisions "),n.j41(1,"span",91)(2,"i",92),n.bIt("click",function(){z.eBV(i);const g=n.XpG(6);return z.Njj(g.validationPopoverVisible=!1)}),n.k0s()()}2&e&&(n.R7$(),n.Y8G("ngStyle",n.lJ4(1,et)))}function Ge(e,s){if(1&e){const i=n.RV6();n.j41(0,"cvc-comment-input-form",95),n.mxI("commentChange",function(g){z.eBV(i);const f=n.XpG(7);return n.DH7(f.revisionComment,g)||(f.revisionComment=g),z.Njj(g)}),n.k0s()}if(2&e){const i=n.XpG(7);n.R50("comment",i.revisionComment)}}function Fe(e,s){if(1&e){const i=n.RV6();n.j41(0,"span")(1,"button",96),n.bIt("click",function(){z.eBV(i);const g=n.XpG(8);return z.Njj(g.onRejectRevisionsClicked())}),n.EFF(2," Reject Revision "),n.k0s()()}if(2&e){const i=n.XpG(8);n.R7$(),n.Y8G("nzLoading",i.isLoading)("disabled",void 0===i.revisionComment||i.revisionComment.length<10)("nzTooltipTrigger",i.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==i.mostRecentOrg?null:i.mostRecentOrg.name))}}function Se(e,s){if(1&e){const i=n.RV6();n.j41(0,"span")(1,"button",97),n.bIt("click",function(){z.eBV(i);const g=n.XpG(8);return z.Njj(g.onAcceptRevisionClicked())}),n.EFF(2," Accept Revision "),n.k0s()()}if(2&e){const i=n.XpG(4).ngrxLet,l=n.XpG(4);n.R7$(),n.Y8G("nzLoading",l.isLoading)("disabled",!(0==i&&(void 0===l.revisionComment||""===l.revisionComment||l.revisionComment.length>=10)))("nzTooltipTrigger",l.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==l.mostRecentOrg?null:l.mostRecentOrg.name))}}function xe(e,s){if(1&e&&n.nrm(0,"i",99),2&e){n.XpG(6);const i=n.sdS(3);n.Y8G("nzPopoverContent",i)}}function $e(e,s){if(1&e&&(n.j41(0,"span"),n.DNE(1,xe,1,1,"i",98),n.k0s()),2&e){const i=n.XpG(4).ngrxLet;n.R7$(),n.Y8G("ngIf",i&&i>0)}}function Ie(e,s){1&e&&(n.j41(0,"span")(1,"nz-space"),n.DNE(2,Fe,3,4,"span",62)(3,Se,3,4,"span",62)(4,$e,2,1,"span",62),n.k0s()())}function je(e,s){1&e&&(n.j41(0,"nz-space",93),n.DNE(1,Ge,1,1,"cvc-comment-input-form",94)(2,Ie,5,0,"span",62),n.k0s())}function De(e,s){if(1&e&&(n.qex(0),n.j41(1,"div",82)(2,"div",83)(3,"nz-space",84),n.DNE(4,Te,6,2,"span",62)(5,ye,2,0,"ng-container",27),n.k0s(),n.DNE(6,Ee,3,2,"ng-template",null,10,n.C5r)(8,je,3,0,"ng-template",null,11,n.C5r),n.k0s()(),n.bVm()),2&e){const i=n.XpG().ngrxLet;n.R7$(5),n.Y8G("ngIf",i&&i>0)}}function Le(e,s){if(1&e&&(n.qex(0),n.DNE(1,De,10,1,"ng-container",16),n.bVm()),2&e){const i=n.XpG(4);n.R7$(),n.Y8G("ngrxLet",i.viewer$)}}function Oe(e,s){if(1&e&&(n.j41(0,"nz-list-item"),n.EFF(1),n.k0s()),2&e){const i=s.$implicit;n.R7$(),n.JRh(i)}}function Me(e,s){if(1&e&&(n.j41(0,"nz-card",101)(1,"nz-list",102),n.DNE(2,Oe,2,1,"nz-list-item",103),n.k0s()()),2&e){const i=n.XpG(3).ngrxLet;n.R7$(2),n.Y8G("ngForOf",i)}}function Pe(e,s){if(1&e&&(n.j41(0,"span"),n.DNE(1,Me,3,1,"nz-card",100),n.k0s()),2&e){const i=n.XpG(2).ngrxLet;n.R7$(),n.Y8G("ngIf",i&&i.length>0)}}function Ne(e,s){if(1&e&&(n.j41(0,"nz-descriptions-item",108),n.EFF(1),n.k0s()),2&e){const i=s.$implicit;n.Y8G("nzTitle",i.fieldName),n.R7$(),n.JRh(i.error)}}function Ye(e,s){if(1&e&&(n.j41(0,"nz-card",105)(1,"nz-descriptions",106),n.DNE(2,Ne,2,2,"nz-descriptions-item",107),n.k0s()()),2&e){const i=n.XpG(4).ngrxLet;n.R7$(2),n.Y8G("ngForOf",i)}}function Ve(e,s){if(1&e&&(n.j41(0,"span"),n.DNE(1,Ye,3,1,"nz-card",104),n.k0s()),2&e){const i=n.XpG(3).ngrxLet;n.R7$(),n.Y8G("ngIf",i&&i.length>0)}}function Ae(e,s){1&e&&(n.j41(0,"nz-space",93),n.DNE(1,Pe,2,1,"span",62)(2,Ve,2,1,"span",62),n.k0s())}function Xe(e,s){if(1&e&&(n.qex(0),n.DNE(1,Le,2,1,"ng-container",16)(2,Ae,3,0,"ng-template",null,9,n.C5r),n.bVm()),2&e){const i=n.XpG(3);n.R7$(),n.Y8G("ngrxLet",i.totalErrorCount$)}}function Be(e,s){if(1&e&&(n.qex(0),n.DNE(1,Xe,4,1,"ng-container",16),n.bVm()),2&e){const i=n.XpG(2);n.R7$(),n.Y8G("ngrxLet",i.genericErrors$)}}function ke(e,s){if(1&e&&n.DNE(0,Be,2,1,"ng-container",16),2&e){const i=n.XpG();n.Y8G("ngrxLet",i.validationErrors$)}}let Ue=(()=>{var e;class s{constructor(l,g,f,H,W){this.viewerService=l,this.networkErrorService=g,this.acceptRevisionsGql=f,this.rejectRevisionsGql=H,this.validationGql=W,this.refetchQueries=[],this.selectedRevisionIds=[],this.isLoading=!1,this.success=!1,this.validationPopoverVisible=!1,this.destroy$=new U.B,this.revisionSetSelectedEvent=new n.bkB,this.revisionMutationCompleted=new n.bkB,this.acceptRevisionsMutator=new N.E(this.networkErrorService),this.rejectRevisionsMutator=new N.E(this.networkErrorService),this.viewer$=this.viewerService.viewer$}ngOnChanges(l){this.untypedRevisons=this.revisions,this.selectedRevisionIds=[],this.queryRef&&this.queryRef.refetch({ids:this.selectedRevisionIds})}ngOnInit(){this.viewerService.viewer$.subscribe(l=>{this.mostRecentOrg=l.mostRecentOrg}),this.queryRef=this.validationGql.watch({ids:[]}),this.genericErrors$=this.queryRef.valueChanges.pipe((0,b.E)("data","validateRevisionsForAcceptance","genericErrors"),(0,x.p)($.kP),(0,j.Z)([])),this.validationErrors$=this.queryRef.valueChanges.pipe((0,b.E)("data","validateRevisionsForAcceptance","validationErrors"),(0,x.p)($.kP),(0,j.Z)([])),this.totalErrorCount$=(0,A.z)([this.genericErrors$,this.validationErrors$]).pipe((0,_.T)(([l,g])=>l.length+g.length),(0,j.Z)(0)),this.untypedRevisons=this.revisions}onChangesetSelected(l){this.revisionSetSelectedEvent.emit(l)}onRevisionCheckboxClicked(l,g){l?this.selectedRevisionIds.push(g):this.selectedRevisionIds=this.selectedRevisionIds.filter(f=>f!=g),this.queryRef.refetch({ids:this.selectedRevisionIds})}setupMutationResultHandlers(l,g){l.submitSuccess$.pipe((0,O.Q)(this.destroy$)).subscribe(f=>{f&&(this.isLoading=!1,this.revisionMutationCompleted.emit(),this.errors=void 0,this.success=g,this.validationPopoverVisible=!1,this.selectedRevisionIds=[],this.revisionComment=void 0)}),l.submitError$.pipe((0,O.Q)(this.destroy$)).subscribe(f=>{f.length>0&&(this.isLoading=!1,this.success=!1,this.errors=f,this.validationPopoverVisible=!1,this.selectedRevisionIds=[])})}onRejectRevisionsClicked(){if(this.revisionComment&&""!==this.revisionComment){this.isLoading=!0;let l=this.rejectRevisionsMutator.mutate(this.rejectRevisionsGql,{input:{ids:this.selectedRevisionIds,organizationId:this.mostRecentOrg?.id,comment:this.revisionComment}},{refetchQueries:this.refetchQueries});this.setupMutationResultHandlers(l,"rejected")}}onAcceptRevisionClicked(){this.isLoading=!0;let l=this.acceptRevisionsMutator.mutate(this.acceptRevisionsGql,{input:{ids:this.selectedRevisionIds,organizationId:this.mostRecentOrg?.id,comment:""===this.revisionComment?void 0:this.revisionComment}},{refetchQueries:this.refetchQueries});this.setupMutationResultHandlers(l,"accepted")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(l){this.errors=this.errors?.filter(g=>g!=l)}onSuccessBannerClose(){this.success=!1}static#n=e=()=>(this.\u0275fac=function(g){return new(g||s)(n.rXU(C.q),n.rXU(h.N),n.rXU(c.QZR),n.rXU(c.BMV),n.rXU(c.ZFx))},this.\u0275cmp=n.VBU({type:s,selectors:[["cvc-revision-list"]],inputs:{revisions:"revisions",refetchQueries:"refetchQueries"},outputs:{revisionSetSelectedEvent:"revisionSetSelectedEvent",revisionMutationCompleted:"revisionMutationCompleted"},standalone:!1,features:[n.OA$],decls:5,vars:3,consts:[["moderationButtons",""],["noRevisions",""],["revCardHeaderTitle",""],["revCardHeaderExtra",""],["itemTemplate",""],["creationCommentTemplate",""],["noRevisor",""],["loggedIn",""],["canRevise",""],["validationErrorTemplate",""],["validationPopoverTitleTemplate",""],["validationPopoverContentTemplate",""],["notSignedIn",""],["submitButton",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],[4,"ngrxLet"],["nzBanner","","nzType","error","nzCloseable","",3,"nzOnClose","nzMessage"],["nzBanner","","nzType","success","nzCloseable","",3,"nzOnClose","nzMessage"],["nzTitle","Revisions",1,"card-list",3,"nzExtra"],["class","revision-list",4,"ngIf","ngIfElse"],[1,"revision-list"],[3,"nzHeader","nzExtra","nzActive",4,"ngFor","ngForOf"],[3,"nzHeader","nzExtra","nzActive"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"],["entityType","Feature",3,"diffObject"],[3,"feature"],["entityType","Sources",3,"diffObject"],[3,"source"],["entityType","Disease",3,"diffObject"],[3,"disease"],["entityType","Molecular Profile",3,"diffObject"],[3,"molecularProfile"],["entityType","Therapies",3,"diffObject"],[3,"therapy"],["entityType","Variant Aliases",3,"diffObject"],["entityType","Feature Aliases",3,"diffObject"],["entityType","Molecular Profile Aliases",3,"diffObject"],["entityType","ClinVar Entries",3,"diffObject"],["entityType","ClinGen/CGC/VICC Code(s)",3,"diffObject"],["entityType","ACMG/AMP Code(s)",3,"diffObject"],["entityType","NCCN Guideline",3,"diffObject"],["entityType","HGVS Descriptions",3,"diffObject"],["entityType","Variant Types",3,"diffObject"],[3,"variantType"],["entityType","Phenotypes",3,"diffObject"],[3,"phenotype"],["entityType","Variant",3,"diffObject"],[3,"variant"],["entityType","Variants",3,"diffObject"],["entityType","Source",3,"diffObject"],["entityType","Evidence",3,"diffObject"],[3,"evidence"],[3,"currentValue","suggestedValue","left","right","entityType"],["nzSpan","16"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"commentBodySegments"],[3,"user"],[4,"nzSpaceItem"],["nz-icon","","nzTheme","twotone","nzType","civic-revision",3,"nzTwotoneColor"],["nz-popover","","nz-icon","","nzType","comment","nzTheme","outline",3,"nzPopoverContent",4,"nzSpaceItem"],["nz-popover","","nz-icon","","nzType","comment","nzTheme","outline",3,"nzPopoverContent"],["nzSize","small",3,"click"],[3,"status",4,"nzSpaceItem"],["nzType","vertical",4,"nzSpaceItem"],["nz-button","","nzType","link",3,"click",4,"nzSpaceItem"],[4,"ngIf","ngIfElse"],["nz-typography","","nzType","secondary"],[3,"org"],[3,"status"],["nzType","vertical"],["nz-button","","nzType","link",3,"click"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions.",3,"nzDisabled",4,"ngIf","ngIfElse"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions.",3,"nzDisabled"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Curators may only reject their own revisions.",3,"nzDisabled",4,"ngIf","ngIfElse"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Curators may only reject their own revisions.",3,"nzDisabled"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Select Revision for Acceptance/Rejection",3,"nzCheckedChange"],["nzNotFoundImage","simple","nzNotFoundContent","No Revisions matching filters"],["nz-row","",2,"margin-top","1em"],["nz-col","","nzSpan","24",2,"text-align","right"],["nzDirection","horizontal"],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverVisibleChange","click","nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled"],["nz-icon","","nzType","caret-down","nzTheme","outline"],["nz-icon","","nzType","exclamation-circle","nzTheme","twotone","nzTwotoneColor","red","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent",4,"nzSpaceItem"],["nz-icon","","nzType","exclamation-circle","nzTheme","twotone","nzTwotoneColor","red","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzDirection","vertical"],[3,"comment","commentChange",4,"nzSpaceItem"],[3,"commentChange","comment"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzSize","small","nzDanger","","nz-tooltip","",3,"click","nzLoading","disabled","nzTooltipTrigger","nzTooltipTitle"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzSize","small","nz-tooltip","",3,"click","nzLoading","disabled","nzTooltipTrigger","nzTooltipTitle"],["nz-icon","","nzTwotoneColor","red","nzType","exclamation-circle","nzTheme","twotone","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent",4,"ngIf"],["nz-icon","","nzTwotoneColor","red","nzType","exclamation-circle","nzTheme","twotone","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent"],["nzTitle","Errors",4,"ngIf"],["nzTitle","Errors"],["nzSize","small"],[4,"ngFor","ngForOf"],["nzTitle","Validation Errors",4,"ngIf"],["nzTitle","Validation Errors"],["nzBordered",""],[3,"nzTitle",4,"ngFor","ngForOf"],[3,"nzTitle"]],template:function(g,f){1&g&&n.DNE(0,it,1,1,"nz-alert",14)(1,ot,1,2,"nz-alert",15)(2,de,5,3,"ng-container",16)(3,ke,1,1,"ng-template",null,0,n.C5r),2&g&&(n.Y8G("ngForOf",f.errors),n.R7$(),n.Y8G("ngIf",f.success),n.R7$(),n.Y8G("ngrxLet",f.viewer$))},dependencies:[d.Sq,d.bT,d.T3,d.B3,d.ux,d.e1,d.fG,F.Uq,F.e,G.eE,G.lQ,D.cK,I.U5,I.Dq,S.s,X.Di,y.RW,Q.$g,J.j,nn.LH,on.L_,V.Dn,tn.xA,tn.gr,Mn,Pn._,Nn.D,Yn,Vn.r,An.Y,Xn.R,Bn.A,kn.j,Un.J,cn.h,Hn.g,Wn.K,Qn.z,Kn.p,Jn.r,un.Vz,un.pc,B.a,P.c,E.p,Zn.Y,u.Nj,wn.f,qn.R,nt.N],styles:["[_nghost-%COMP%]{display:block}nz-list[_ngcontent-%COMP%]   .kept[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{background-color:#f6ffed;color:#135200}nz-list[_ngcontent-%COMP%]   .removed[_ngcontent-%COMP%]{background-color:#fff1f0;color:#820014}nz-list[_ngcontent-%COMP%]   .suggested[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}"]}))}return e(),s})();const Gt=()=>[];function He(e,s){if(1&e){const i=n.RV6();n.j41(0,"cvc-revision-list",16),n.nI1(1,"ngrxPush"),n.bIt("revisionSetSelectedEvent",function(g){z.eBV(i);const f=n.XpG(2);return z.Njj(f.onRevisionSetSelected(g))})("revisionMutationCompleted",function(){z.eBV(i);const g=n.XpG(2);return z.Njj(g.refresh())}),n.k0s()}if(2&e){const i=n.XpG(2);n.Y8G("revisions",n.bMT(1,2,i.revisions$))("refetchQueries",i.refetchQueries)}}function We(e,s){if(1&e){const i=n.RV6();n.j41(0,"button",19),n.bIt("click",function(){z.eBV(i);const g=n.XpG(2).ngrxLet,f=n.XpG(2);return z.Njj(f.loadMore(null==g?null:g.endCursor))}),n.EFF(1," Load More "),n.k0s()}}function Qe(e,s){1&e&&(n.qex(0),n.DNE(1,We,2,0,"button",18),n.bVm())}function Ke(e,s){if(1&e&&(n.qex(0),n.DNE(1,Qe,2,0,"ng-container",17),n.bVm()),2&e){const i=s.ngrxLet;n.R7$(),n.Y8G("ngIf",i&&(null==i?null:i.hasNextPage)&&i.endCursor)}}function Je(e,s){if(1&e){const i=n.RV6();n.j41(0,"nz-row")(1,"nz-tag",21),n.bIt("nzOnClose",function(){z.eBV(i);const g=n.XpG(3);return z.Njj(g.onSetFilterClearClicked())}),n.EFF(2),n.k0s()()}if(2&e){const i=n.XpG(3);n.R7$(2),n.SpI("Group: ",i.filteredSet)}}function Ze(e,s){1&e&&(n.j41(0,"nz-space",7),n.DNE(1,Je,3,1,"nz-row",20),n.k0s())}function we(e,s){if(1&e&&(n.j41(0,"span"),n.EFF(1),n.k0s()),2&e){const i=s.$implicit;n.R7$(),n.JRh(i.displayName)}}function qe(e,s){if(1&e&&n.nrm(0,"nz-avatar",23),2&e){const i=n.XpG().$implicit;n.Y8G("nzSrc",i.profileImagePath)}}function ni(e,s){if(1&e&&(n.nrm(0,"nz-avatar",24),n.nI1(1,"uppercase")),2&e){const i=n.XpG().$implicit;n.Y8G("nzText",n.bMT(1,1,i.username.charAt(0)))}}function ti(e,s){if(1&e&&(n.DNE(0,qe,1,1,"nz-avatar",22)(1,ni,2,3,"ng-template",null,2,n.C5r),n.j41(3,"span"),n.EFF(4),n.k0s()),2&e){const i=s.$implicit,l=n.sdS(2);n.Y8G("ngIf",i.profileImagePath)("ngIfElse",l),n.R7$(4),n.JRh(i.username)}}function ei(e,s){if(1&e&&(n.j41(0,"span"),n.EFF(1),n.k0s()),2&e){const i=s.$implicit;n.R7$(),n.JRh(i.displayName)}}function ii(e,s){if(1&e&&n.nrm(0,"nz-avatar",23),2&e){const i=n.XpG().$implicit;n.Y8G("nzSrc",i.profileImagePath)}}function oi(e,s){if(1&e&&(n.nrm(0,"nz-avatar",24),n.nI1(1,"uppercase")),2&e){const i=n.XpG().$implicit;n.Y8G("nzText",n.bMT(1,1,i.username.charAt(0)))}}function si(e,s){if(1&e&&(n.DNE(0,ii,1,1,"nz-avatar",22)(1,oi,2,3,"ng-template",null,2,n.C5r),n.j41(3,"span"),n.EFF(4),n.k0s()),2&e){const i=s.$implicit,l=n.sdS(2);n.Y8G("ngIf",i.profileImagePath)("ngIfElse",l),n.R7$(4),n.JRh(i.username)}}function ai(e,s){if(1&e){const i=n.RV6();n.qex(0),n.j41(1,"nz-row",5)(2,"nz-col",6)(3,"nz-space",7),n.DNE(4,He,2,4,"cvc-revision-list",8)(5,Ke,2,1,"ng-container",9),n.k0s()(),n.j41(6,"nz-col",10),n.DNE(7,Ze,2,0,"nz-space",11),n.j41(8,"cvc-participant-list",12),n.bIt("participantSelectedEvent",function(g){z.eBV(i);const f=n.XpG();return z.Njj(f.onStatusSelected(g))}),n.DNE(9,we,2,1,"ng-template",null,1,n.C5r),n.k0s(),n.j41(11,"cvc-participant-list",13),n.nI1(12,"ngrxPush"),n.bIt("participantSelectedEvent",function(g){z.eBV(i);const f=n.XpG();return z.Njj(f.onRevisorSelected(g))}),n.DNE(13,ti,5,3,"ng-template",null,1,n.C5r),n.k0s(),n.j41(15,"cvc-participant-list",14),n.nI1(16,"ngrxPush"),n.bIt("participantSelectedEvent",function(g){z.eBV(i);const f=n.XpG();return z.Njj(f.onFieldNameSelected(g))}),n.DNE(17,ei,2,1,"ng-template",null,1,n.C5r),n.k0s(),n.j41(19,"cvc-participant-list",15),n.nI1(20,"ngrxPush"),n.bIt("participantSelectedEvent",function(g){z.eBV(i);const f=n.XpG();return z.Njj(f.onResolverSelected(g))}),n.DNE(21,si,5,3,"ng-template",null,1,n.C5r),n.k0s()()(),n.bVm()}if(2&e){const i=n.XpG();n.R7$(),n.Y8G("nzGutter",16),n.R7$(4),n.Y8G("ngrxLet",i.pageInfo$),n.R7$(2),n.Y8G("ngIf",i.filteredSet),n.R7$(),n.Y8G("preselectedOption",i.preselectedRevisionStatus)("participantList",i.selectableStatuses),n.R7$(3),n.Y8G("participantList",n.bMT(12,8,i.uniqueRevisors$)||n.lJ4(14,Gt)),n.R7$(4),n.Y8G("participantList",n.bMT(16,10,i.revisionFields$)||n.lJ4(15,Gt)),n.R7$(4),n.Y8G("participantList",n.bMT(20,12,i.uniqueResolvers$)||n.lJ4(16,Gt))}}function ri(e,s){1&e&&(n.qex(0),n.j41(1,"nz-row",25),n.nrm(2,"i",26),n.k0s(),n.bVm())}function li(e,s){1&e&&n.nrm(0,"nz-empty",27)}function ci(e,s){if(1&e&&(n.DNE(0,ri,3,0,"ng-container",4),n.nI1(1,"ngrxPush"),n.DNE(2,li,1,0,"ng-template",null,3,n.C5r)),2&e){const i=n.sdS(3),l=n.XpG();n.Y8G("ngIf",n.bMT(1,2,l.isLoading$))("ngIfElse",i)}}let _i=(()=>{var e;class s{constructor(l,g,f,H,W,gn,Ft,pi,gi,mi,di,ui,fi,vi){this.gql=l,this.route=g,this.variantDetailGql=f,this.variantSummaryGql=H,this.variantGroupDetailGql=W,this.variantGroupSummaryGql=gn,this.assertionDetailGql=Ft,this.assertionSummaryGql=pi,this.featureDetailGql=gi,this.featureSummaryGql=mi,this.evidenceDetailGql=di,this.evidenceSummaryGql=ui,this.molecularProfileDetailGql=fi,this.molecularProfileSummaryGql=vi,this.filteredSet=void 0,this.selectableStatuses=[{id:4,displayName:"New",value:c.W14.New},{id:1,displayName:"Accepted",value:c.W14.Accepted},{id:2,displayName:"Rejected",value:c.W14.Rejected},{id:3,displayName:"Superseded",value:c.W14.Superseded}],this.preselectedRevisionStatus=this.selectableStatuses[0],this.defaultPageSize=10,this.refetchQueries=[]}ngOnInit(){switch(this.routeSub=this.route.params.subscribe(l=>{this.queryParamsSub=this.route.queryParams.subscribe(g=>{let f={first:this.defaultPageSize,subject:this.moderated,status:c.W14.New};g.revisionSetId&&(this.filteredSet=+g.revisionSetId,this.preselectedRevisionStatus=void 0,f.status=void 0,f.revisionSetId=+g.revisionSetId),this.queryRef=this.gql.watch(f);let H=this.queryRef.valueChanges;this.revisions$=H.pipe((0,b.E)("data","revisions","edges"),(0,_.T)(W=>W.map(gn=>gn.node))),this.isLoading$=H.pipe((0,_.T)(W=>W.loading),(0,j.Z)(!0)),this.pageInfo$=H.pipe((0,b.E)("data","revisions","pageInfo")),this.uniqueRevisors$=H.pipe((0,_.T)(({data:W})=>W.revisions?.uniqueRevisors)),this.uniqueResolvers$=H.pipe((0,_.T)(({data:W})=>W.revisions?.uniqueResolvers)),this.revisionFields$=H.pipe((0,_.T)(({data:W})=>W.revisions?.revisedFieldNames.map((gn,Ft)=>({...gn,id:Ft})))),this.unfilteredCount$=H.pipe((0,b.E)("data","revisions","unfilteredCountForSubject"))})}),this.moderated.entityType){case c.BlQ.Variant:return this.refetchQueries.push({query:this.variantDetailGql.document,variables:{variantId:this.moderated.id}}),void this.refetchQueries.push({query:this.variantSummaryGql.document,variables:{variantId:this.moderated.id}});case c.BlQ.Assertion:return this.refetchQueries.push({query:this.assertionDetailGql.document,variables:{assertionId:this.moderated.id}}),void this.refetchQueries.push({query:this.assertionSummaryGql.document,variables:{assertionId:this.moderated.id}});case c.BlQ.EvidenceItem:return this.refetchQueries.push({query:this.evidenceDetailGql.document,variables:{evidenceId:this.moderated.id}}),void this.refetchQueries.push({query:this.evidenceSummaryGql.document,variables:{evidenceId:this.moderated.id}});case c.BlQ.Feature:return this.refetchQueries.push({query:this.featureDetailGql.document,variables:{featureId:this.moderated.id}}),void this.refetchQueries.push({query:this.featureSummaryGql.document,variables:{featureId:this.moderated.id}});case c.BlQ.VariantGroup:return this.refetchQueries.push({query:this.variantGroupDetailGql.document,variables:{variantGroupId:this.moderated.id}}),void this.refetchQueries.push({query:this.variantGroupSummaryGql.document,variables:{variantGroupId:this.moderated.id}});case c.BlQ.MolecularProfile:return this.refetchQueries.push({query:this.molecularProfileDetailGql.document,variables:{molecularProfileId:this.moderated.id}}),void this.refetchQueries.push({query:this.molecularProfileSummaryGql.document,variables:{molecularProfileId:this.moderated.id}})}}ngOnDestroy(){this.routeSub?.unsubscribe(),this.queryParamsSub?.unsubscribe()}onFieldNameSelected(l){this.queryRef.refetch({subject:this.moderated,fieldName:l?l.name:void 0})}onRevisorSelected(l){this.queryRef.refetch({subject:this.moderated,originatingUserId:l?l.id:void 0})}onResolverSelected(l){this.queryRef.refetch({subject:this.moderated,resolvingUserId:l?l.id:void 0})}onStatusSelected(l){this.preselectedRevisionStatus=l,this.queryRef.refetch({subject:this.moderated,status:l?l.value:void 0})}onRevisionSetSelected(l){this.filteredSet=l,this.queryRef.refetch({subject:this.moderated,revisionSetId:l||void 0})}onSetFilterClearClicked(){this.filteredSet=void 0,this.queryRef.refetch({subject:this.moderated,revisionSetId:void 0})}refresh(){this.queryRef.refetch()}loadMore(l){this.queryRef?.fetchMore({variables:{first:this.defaultPageSize,after:l}})}static#n=e=()=>(this.\u0275fac=function(g){return new(g||s)(n.rXU(c.xPr),n.rXU(t.nX),n.rXU(c.N47),n.rXU(c.yLZ),n.rXU(c.IbX),n.rXU(c.sAe),n.rXU(c.kKs),n.rXU(c.fqJ),n.rXU(c.ULh),n.rXU(c.gUZ),n.rXU(c.fQd),n.rXU(c.Ype),n.rXU(c.Tj8),n.rXU(c.SPr))},this.\u0275cmp=n.VBU({type:s,selectors:[["cvc-revisions-list-and-filter"]],inputs:{moderated:"moderated"},standalone:!1,decls:4,vars:4,consts:[["noRevisions",""],["itemTemplate",""],["noAvatar",""],["noneFound",""],[4,"ngIf","ngIfElse"],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"revisions","refetchQueries","revisionSetSelectedEvent","revisionMutationCompleted",4,"nzSpaceItem"],[4,"ngrxLet"],["nzSpan","6"],["nzDirection","vertical",4,"ngIf"],["listTitle","Filter by Revision Status",3,"participantSelectedEvent","preselectedOption","participantList"],["listTitle","Filter by Revisor",3,"participantSelectedEvent","participantList"],["listTitle","Filter by Field",3,"participantSelectedEvent","participantList"],["listTitle","Filter by Resolver",3,"participantSelectedEvent","participantList"],[3,"revisionSetSelectedEvent","revisionMutationCompleted","revisions","refetchQueries"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[4,"nzSpaceItem"],["nzMode","closeable",3,"nzOnClose"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["nzJustify","center"],["nz-icon","","nzType","loading",2,"font-size","32px"],["nzNotFoundImage","simple","nzNotFoundContent","Entity has no Revisions"]],template:function(g,f){if(1&g&&(n.DNE(0,ai,23,17,"ng-container",4),n.nI1(1,"ngrxPush"),n.DNE(2,ci,4,4,"ng-template",null,0,n.C5r)),2&g){const H=n.sdS(3);n.Y8G("ngIf",n.bMT(1,2,f.unfilteredCount$))("ngIfElse",H)}},dependencies:[d.bT,u.Nj,F.Uq,F.e,I.U5,I.Dq,S.s,L.PM,y.RW,B.a,P.c,E.p,V.Dn,K.T,Ue,d.Pc,u.L9],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}))}return e(),s})()},94097:(q,Y,o)=>{o.d(Y,{b:()=>Et});var D,c=o(17705),_=o(69145),j=o(5964),b=o(96354),n=o(24608),z=o(69199),t=o(73664),d=o(2615),u=o(72200),F=o(61774),I=o(50513),S=o(16389),L=o(25930),y=o(97529),B=o(31635),P=o(71226),E=o(49894),V=o(41305),K=o(74222),U=o(84341),x=o(38927),A=o(25703),N=o(23617),O=o(35154),$=o(1177),C=o(41939),h=o(65566),G=o(61845);function X(a,p){if(1&a){const r=t.RV6();t.j41(0,"nz-alert",10),t.bIt("nzOnClose",function(){d.eBV(r);const v=t.XpG();return d.Njj(v.onSuccessBannerClose())}),t.k0s()}}function Q(a,p){if(1&a&&t.nrm(0,"nz-alert",11),2&a){t.XpG();const r=t.sdS(4);t.Y8G("nzDescription",r)}}function J(a,p){if(1&a&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&a){const r=p.$implicit;t.R7$(),t.JRh(r)}}function nn(a,p){if(1&a&&(t.j41(0,"ul"),t.DNE(1,J,2,1,"li",12),t.k0s()),2&a){const r=t.XpG();t.R7$(),t.Y8G("ngForOf",r.errorMessages)}}function on(a,p){}function tn(a,p){1&a&&t.DNE(0,on,0,0,"ng-template")}function sn(a,p){if(1&a&&(t.qex(0),t.DNE(1,tn,1,0,null,14),t.bVm()),2&a){t.XpG();const r=t.sdS(6);t.R7$(),t.Y8G("ngTemplateOutlet",r)}}function an(a,p){}function Z(a,p){1&a&&t.DNE(0,an,0,0,"ng-template")}function rn(a,p){if(1&a&&(t.j41(0,"span",15),t.DNE(1,Z,1,0,null,14),t.k0s()),2&a){t.XpG();const r=t.sdS(6);t.R7$(),t.Y8G("ngTemplateOutlet",r)}}function ln(a,p){if(1&a&&(t.j41(0,"button",16),t.EFF(1),t.nI1(2,"enumToTitle"),t.k0s()),2&a){const r=t.XpG().ngrxLet,m=t.XpG();t.Y8G("disabled",!(void 0!==m.comment&&m.comment.length>=10&&r.signedIn))("nzTooltipTrigger",m.selectedOrg?"hover":null)("nzTooltipTitle","For "+(null==m.selectedOrg?null:m.selectedOrg.name)),t.R7$(),t.SpI(" Flag ",t.bMT(2,4,m.flaggable.entityType)," ")}}function M(a,p){if(1&a&&(t.qex(0),t.j41(1,"cvc-form-buttons"),t.DNE(2,sn,2,1,"ng-container",13)(3,rn,2,1,"ng-template",null,1,t.C5r)(5,ln,3,6,"ng-template",null,2,t.C5r),t.k0s(),t.bVm()),2&a){const r=p.ngrxLet,m=t.sdS(4);t.R7$(2),t.Y8G("ngIf",r.signedIn)("ngIfElse",m)}}let T=(class St{constructor(p,r,m){this.gql=p,this.viewerService=r,this.networkErrorService=m,this.errorMessages=[],this.success=!1,this.loading=!1,this.comment="",this.addFlagMutator=new P.E(this.networkErrorService),this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.pipe((0,E.s)(this)).subscribe(v=>{this.selectedOrg=v.mostRecentOrg})}ngOnInit(){if(void 0===this.flaggable)throw new Error("Must pass a flagggable into flag add component")}onOrgSelected(p){this.selectedOrg=p}submitFlag(){this.errorMessages=[];let r=this.addFlagMutator.mutate(this.gql,{input:{comment:this.comment,subject:this.flaggable,organizationId:this.selectedOrg?.id}});r.submitSuccess$.pipe((0,E.s)(this)).subscribe(m=>{m&&(this.flagAddedCallback&&this.flagAddedCallback(),this.success=!0,this.comment="")}),r.submitError$.pipe((0,E.s)(this)).subscribe(m=>{m.length>0&&(this.errorMessages=m)}),r.isSubmitting$.pipe((0,E.s)(this)).subscribe(m=>{this.loading=m})}onSuccessBannerClose(){this.success=!1}static#n=D=()=>(this.\u0275fac=function(r){return new(r||St)(t.rXU(_.GOU),t.rXU(V.q),t.rXU(K.N))},this.\u0275cmp=t.VBU({type:St,selectors:[["cvc-flag-add-form"]],inputs:{flaggable:"flaggable",flagAddedCallback:"flagAddedCallback"},standalone:!1,decls:11,vars:5,consts:[["errorContents",""],["notSignedIn",""],["submitButton",""],["nzType","inner"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription",4,"ngIf"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"commentChange","comment"],["nzTip","Submitting",3,"nzSpinning"],[4,"ngrxLet"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to flag entity."],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small","nz-tooltip","",3,"disabled","nzTooltipTrigger","nzTooltipTitle"]],template:function(r,m){if(1&r){const v=t.RV6();t.j41(0,"nz-card",3),t.DNE(1,X,1,0,"nz-alert",4)(2,Q,1,1,"nz-alert",5)(3,nn,2,1,"ng-template",null,0,t.C5r),t.j41(5,"form",6),t.bIt("ngSubmit",function(){return d.eBV(v),d.Njj(m.submitFlag())}),t.j41(6,"cvc-comment-input-form",7),t.mxI("commentChange",function(en){return d.eBV(v),t.DH7(m.comment,en)||(m.comment=en),d.Njj(en)}),t.k0s(),t.j41(7,"nz-spin",8)(8,"nz-form-item")(9,"nz-form-control"),t.DNE(10,M,7,2,"ng-container",9),t.k0s()()()()()}2&r&&(t.R7$(),t.Y8G("ngIf",m.success),t.R7$(),t.Y8G("ngIf",m.errorMessages.length>0),t.R7$(4),t.R50("comment",m.comment),t.R7$(),t.Y8G("nzSpinning",m.loading),t.R7$(3),t.Y8G("ngrxLet",m.viewer$))},dependencies:[u.Sq,u.bT,u.T3,U.qT,U.cb,U.cV,F.Nj,y.Uq,y.e,x.CA,x.Ls,x.zS,I.a,S.c,L.p,A.cK,N.Y,O.LH,$.a,C.l,h.K,G.f],encapsulation:2,changeDetection:0}),this)},D());T=(0,B.Cg)([(0,E.d)()],T);var dn,Cn=o(21413),w=o(56977),k=o(97685),hn=o(7391),Rn=o(11672),Tn=o(19448),mn=o(41951),bn=o(56408),yn=o(50311),En=o(1236);const Gn=()=>({float:"right"});function Fn(a,p){if(1&a){const r=t.RV6();t.j41(0,"nz-alert",8),t.bIt("nzOnClose",function(){d.eBV(r);const v=t.XpG();return d.Njj(v.onSuccessBannerClose())}),t.k0s()}}function Sn(a,p){}function xn(a,p){1&a&&t.DNE(0,Sn,0,0,"ng-template")}function $n(a,p){if(1&a&&(t.qex(0),t.DNE(1,xn,1,0,null,10),t.bVm()),2&a){t.XpG(2);const r=t.sdS(7);t.R7$(),t.Y8G("ngTemplateOutlet",r)}}function In(a,p){if(1&a&&(t.qex(0),t.DNE(1,$n,2,1,"ng-container",9),t.bVm()),2&a){const r=t.XpG().ngrxLet,m=t.sdS(5),v=t.XpG();t.R7$(),t.Y8G("ngIf",r.isEditor||r.isAdmin||v.flag.openActivity.user.id===(null==r.user?null:r.user.id))("ngIfElse",m)}}function jn(a,p){}function Dn(a,p){1&a&&t.DNE(0,jn,0,0,"ng-template")}function Ln(a,p){if(1&a&&(t.j41(0,"span",11),t.DNE(1,Dn,1,0,null,10),t.k0s()),2&a){t.XpG();const r=t.sdS(7);t.R7$(),t.Y8G("ngTemplateOutlet",r)}}function On(a,p){}function Mn(a,p){1&a&&t.DNE(0,On,0,0,"ng-template")}function Pn(a,p){if(1&a&&(t.j41(0,"span",12),t.DNE(1,Mn,1,0,null,10),t.k0s()),2&a){t.XpG();const r=t.sdS(7);t.R7$(),t.Y8G("ngTemplateOutlet",r)}}function Nn(a,p){if(1&a){const r=t.RV6();t.j41(0,"button",14),t.mxI("nzPopoverVisibleChange",function(v){d.eBV(r);const R=t.XpG(3);return t.DH7(R.flagResolvePopoverVisible,v)||(R.flagResolvePopoverVisible=v),d.Njj(v)}),t.bIt("click",function(){d.eBV(r);const v=t.XpG(3);return d.Njj(v.flagResolvePopoverVisible=!v.flagResolvePopoverVisible)}),t.EFF(1," Resolve Flag "),t.nrm(2,"i",15),t.k0s()}if(2&a){const r=t.XpG(2).ngrxLet,m=t.XpG(),v=t.sdS(3),R=t.sdS(5);t.Y8G("nzPopoverTitle",v),t.R50("nzPopoverVisible",m.flagResolvePopoverVisible),t.Y8G("nzPopoverContent",R)("nzPopoverTrigger",void 0)("disabled",!r.signedIn||r.isCurator&&m.flag.openActivity.user.id!=(null==r.user?null:r.user.id))}}function Yn(a,p){if(1&a&&t.DNE(0,Nn,3,5,"button",13),2&a){const r=t.XpG(2);t.Y8G("ngIf",!r.success)}}function Vn(a,p){if(1&a&&(t.qex(0),t.DNE(1,In,2,2,"ng-container",9)(2,Ln,2,1,"ng-template",null,2,t.C5r)(4,Pn,2,1,"ng-template",null,3,t.C5r)(6,Yn,1,1,"ng-template",null,4,t.C5r),t.bVm()),2&a){const r=p.ngrxLet,m=t.sdS(3);t.R7$(),t.Y8G("ngIf",r.signedIn)("ngIfElse",m)}}function An(a,p){if(1&a){const r=t.RV6();t.EFF(0," Resolve Flag "),t.j41(1,"span",16)(2,"i",17),t.bIt("click",function(){d.eBV(r);const v=t.XpG();return v.flagResolvePopoverVisible=!1,d.Njj(v.errorMessages=[])}),t.k0s()()}2&a&&(t.R7$(),t.Y8G("ngStyle",t.lJ4(1,Gn)))}function Xn(a,p){if(1&a&&t.nrm(0,"nz-alert",24),2&a){t.XpG();const r=t.sdS(2);t.Y8G("nzDescription",r)}}function Bn(a,p){if(1&a&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&a){const r=p.$implicit;t.R7$(),t.JRh(r)}}function kn(a,p){if(1&a&&(t.j41(0,"ul"),t.DNE(1,Bn,2,1,"li",25),t.k0s()),2&a){const r=t.XpG(2);t.R7$(),t.Y8G("ngForOf",r.errorMessages)}}function Un(a,p){if(1&a){const r=t.RV6();t.DNE(0,Xn,1,1,"nz-alert",18)(1,kn,2,1,"ng-template",null,5,t.C5r),t.j41(3,"nz-card",19)(4,"form",20),t.bIt("ngSubmit",function(){d.eBV(r);const v=t.XpG();return d.Njj(v.resolveFlag())}),t.j41(5,"cvc-comment-input-form",21),t.mxI("commentChange",function(v){d.eBV(r);const R=t.XpG();return t.DH7(R.comment,v)||(R.comment=v),d.Njj(v)}),t.k0s(),t.j41(6,"nz-spin",22)(7,"nz-form-item")(8,"nz-form-control")(9,"cvc-form-buttons")(10,"button",23),t.EFF(11," Resolve "),t.k0s()()()()()()()}if(2&a){const r=t.XpG();t.Y8G("ngIf",r.errorMessages.length>0),t.R7$(5),t.R50("comment",r.comment),t.R7$(),t.Y8G("nzSpinning",r.loading),t.R7$(4),t.Y8G("disabled",!(void 0!==r.comment&&r.comment.length>=10))("nzTooltipTrigger",r.selectedOrg?"hover":null)("nzTooltipTitle","For "+(null==r.selectedOrg?null:r.selectedOrg.name))}}let cn=(class xt{constructor(p,r,m){this.gql=p,this.viewerService=r,this.networkErrorService=m,this.errorMessages=[],this.loading=!1,this.success=!1,this.flagResolvePopoverVisible=!1,this.resolveFlagMutator=new P.E(this.networkErrorService),this.viewer$=this.viewerService.viewer$}ngOnInit(){if(void 0===this.flag)throw new Error("Must pass a Flag in to resolve component.");this.viewerService.viewer$.pipe((0,E.s)(this)).subscribe(p=>{this.selectedOrg=p.mostRecentOrg})}onOrgSelected(p){this.selectedOrg=p}resolveFlag(){if(this.comment){this.errorMessages=[];let p=this.resolveFlagMutator.mutate(this.gql,{input:{id:this.flag.id,comment:this.comment,organizationId:this.selectedOrg?.id}});p.submitSuccess$.pipe((0,E.s)(this)).subscribe(r=>{r&&(this.flagResolvePopoverVisible=!1,this.success=!0,this.flagResolvedCallback&&this.flagResolvedCallback())}),p.submitError$.pipe((0,E.s)(this)).subscribe(r=>{r.length>0&&(this.success=!1,this.errorMessages=r)}),p.isSubmitting$.pipe((0,E.s)(this)).subscribe(r=>{this.loading=r})}}onSuccessBannerClose(){this.success=!1,this.flagResolvedCallback&&this.flagResolvedCallback()}static#n=dn=()=>(this.\u0275fac=function(r){return new(r||xt)(t.rXU(_.reo),t.rXU(V.q),t.rXU(K.N))},this.\u0275cmp=t.VBU({type:xt,selectors:[["cvc-flag-resolve-form"]],inputs:{flag:"flag",flagResolvedCallback:"flagResolvedCallback"},standalone:!1,decls:6,vars:2,consts:[["flagResolvePopoverTitleTemplate",""],["flagResolvePopoverContentTemplate",""],["notSignedIn",""],["noPermissions",""],["submitButton",""],["errorContents",""],["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],[4,"ngrxLet"],["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to resolve flag."],["nz-tooltip","","nzTooltipTitle","If you are not an editor, you can only resolve flags you opened."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click",4,"ngIf"],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverVisibleChange","click","nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled"],["nz-icon","","nzType","caret-down","nzTheme","outline"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription",4,"ngIf"],["nzType","inner",2,"width","300px"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"commentChange","comment"],["nzTip","Submitting",3,"nzSpinning"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small","nz-tooltip","",3,"disabled","nzTooltipTrigger","nzTooltipTitle"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription"],[4,"ngFor","ngForOf"]],template:function(r,m){1&r&&t.DNE(0,Fn,1,0,"nz-alert",6)(1,Vn,8,2,"ng-container",7)(2,An,3,2,"ng-template",null,0,t.C5r)(4,Un,12,6,"ng-template",null,1,t.C5r),2&r&&(t.Y8G("ngIf",m.success),t.R7$(),t.Y8G("ngrxLet",m.viewer$))},dependencies:[u.Sq,u.bT,u.T3,u.B3,U.qT,U.cb,F.Nj,I.a,S.c,L.p,y.Uq,y.e,x.CA,x.Ls,x.zS,U.cV,N.Y,A.cK,En.L_,mn.Dn,O.LH,$.a,h.K,C.l],encapsulation:2}),this)},dn());cn=(0,B.Cg)([(0,E.d)()],cn);var Hn=o(4126),Wn=o(83075),Qn=o(8139);function Kn(a,p){if(1&a){const r=t.RV6();t.j41(0,"nz-alert",8),t.bIt("nzOnClose",function(){const v=d.eBV(r).$implicit,R=t.XpG();return d.Njj(R.onErrorBannerClose(v))}),t.k0s()}2&a&&t.Y8G("nzMessage",p.$implicit)}function Jn(a,p){if(1&a){const r=t.RV6();t.j41(0,"nz-alert",9),t.bIt("nzOnClose",function(){d.eBV(r);const v=t.XpG();return d.Njj(v.onSuccessBannerClose())}),t.k0s()}if(2&a){const r=t.XpG();t.Y8G("nzMessage",t.VkB("Revision(s) successfully ",r.success,"."))}}function un(a,p){if(1&a&&t.nrm(0,"cvc-comment-body",15),2&a){const r=t.XpG(2).$implicit;t.Y8G("commentBodySegments",r.openActivity.parsedNote)}}function Zn(a,p){if(1&a&&(t.qex(0),t.nrm(1,"cvc-flag-resolve-form",16),t.bVm()),2&a){const r=t.XpG(2).$implicit,m=t.XpG(2);t.R7$(),t.Y8G("flag",r)("flagResolvedCallback",m.flagResolvedCallback)}}function wn(a,p){if(1&a&&(t.qex(0),t.nrm(1,"cvc-comment-body",15),t.bVm()),2&a){const r=t.XpG(3).$implicit;t.R7$(),t.Y8G("commentBodySegments",r.resolutionActivity.parsedNote)}}function qn(a,p){if(1&a&&t.nrm(0,"cvc-user-tag",21),2&a){const r=t.XpG(3).$implicit;t.Y8G("user",r.resolutionActivity.user)}}function nt(a,p){if(1&a&&(t.j41(0,"nz-row")(1,"nz-col",17),t.DNE(2,wn,2,1,"ng-container",18),t.k0s(),t.j41(3,"nz-col",19),t.EFF(4," Resolved By "),t.DNE(5,qn,1,1,"cvc-user-tag",20),t.EFF(6),t.nI1(7,"timeAgo"),t.k0s()()),2&a){const r=t.XpG(2).$implicit;t.R7$(2),t.Y8G("ngIf",r.resolutionActivity),t.R7$(3),t.Y8G("ngIf",void 0!==r.resolutionActivity),t.R7$(),t.SpI(" ",t.bMT(7,3,null==r.resolutionActivity?null:r.resolutionActivity.createdAt)," ")}}function fn(a,p){if(1&a&&(t.nrm(0,"i",22),t.nI1(1,"entityColor"),t.EFF(2)),2&a){const r=t.XpG(2).$implicit;t.Y8G("nzTwotoneColor",t.bMT(1,2,"Flag")),t.R7$(2),t.SpI(" FID",r.id," ")}}function _n(a,p){if(1&a&&(t.j41(0,"span")(1,"span",26),t.EFF(2,"Flagged By"),t.k0s(),t.nrm(3,"cvc-user-tag",21),t.j41(4,"span",26),t.EFF(5),t.nI1(6,"timeAgo"),t.k0s()()),2&a){const r=t.XpG(3).$implicit;t.R7$(3),t.Y8G("user",r.openActivity.user),t.R7$(2),t.JRh(t.bMT(6,2,r.openActivity.createdAt))}}function vn(a,p){if(1&a&&t.nrm(0,"cvc-status-tag",27),2&a){const r=t.XpG(3).$implicit;t.Y8G("status",r.state)}}function zn(a,p){1&a&&(t.j41(0,"nz-space",23),t.DNE(1,_n,7,4,"span",24)(2,vn,1,1,"cvc-status-tag",25),t.k0s())}function tt(a,p){if(1&a&&(t.j41(0,"nz-card",13),t.DNE(1,un,1,1,"cvc-comment-body",14),t.nrm(2,"nz-divider"),t.DNE(3,Zn,2,2,"ng-container",7)(4,nt,8,5,"ng-template",null,1,t.C5r)(6,fn,3,4,"ng-template",null,2,t.C5r)(8,zn,3,0,"ng-template",null,3,t.C5r),t.k0s()),2&a){const r=t.sdS(5),m=t.sdS(7),v=t.sdS(9),R=t.XpG().$implicit;t.Y8G("nzTitle",m)("nzExtra",v),t.R7$(),t.Y8G("ngIf",R.openActivity),t.R7$(2),t.Y8G("ngIf","OPEN"==R.state)("ngIfElse",r)}}function et(a,p){1&a&&(t.qex(0),t.DNE(1,tt,10,5,"nz-card",12),t.bVm())}function it(a,p){if(1&a&&(t.qex(0),t.j41(1,"nz-space",10),t.DNE(2,et,2,0,"ng-container",11),t.k0s(),t.bVm()),2&a){const r=t.XpG();t.R7$(2),t.Y8G("ngForOf",r.flags)}}function ot(a,p){1&a&&t.nrm(0,"nz-empty",28)}let st=(()=>{var a;class p{constructor(m){this.viewerService=m,this.isLoading=!1,this.success=!1,this.destroy$=new Cn.B}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(m=>{this.mostRecentOrg=m.mostRecentOrg})}setupMutationResultHandlers(m,v){m.submitSuccess$.pipe((0,w.Q)(this.destroy$)).subscribe(R=>{R&&(this.isLoading=!1,this.errors=void 0,this.success=v)}),m.submitError$.pipe((0,w.Q)(this.destroy$)).subscribe(R=>{R.length>0&&(this.isLoading=!1,this.success=!1,this.errors=R)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(m){this.errors=this.errors?.filter(v=>v!=m)}onSuccessBannerClose(){this.success=!1}static#n=a=()=>(this.\u0275fac=function(v){return new(v||p)(t.rXU(V.q))},this.\u0275cmp=t.VBU({type:p,selectors:[["cvc-flag-list"]],inputs:{flags:"flags",flagResolvedCallback:"flagResolvedCallback"},standalone:!1,decls:6,vars:4,consts:[["noFlags",""],["flagResolved",""],["flagCardHeaderTitle",""],["flagCardHeaderExtra",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],["nzTitle","Flags",1,"card-list"],[4,"ngIf","ngIfElse"],["nzBanner","","nzType","error","nzCloseable","",3,"nzOnClose","nzMessage"],["nzBanner","","nzType","success","nzCloseable","",3,"nzOnClose","nzMessage"],["nzDirection","vertical"],[4,"ngFor","ngForOf"],["nzType","inner",3,"nzTitle","nzExtra",4,"nzSpaceItem"],["nzType","inner",3,"nzTitle","nzExtra"],[3,"commentBodySegments",4,"ngIf"],[3,"commentBodySegments"],[3,"flag","flagResolvedCallback"],["nzSpan","16"],[4,"ngIf"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"user"],["nz-icon","","nzTheme","twotone","nzType","civic-flag",3,"nzTwotoneColor"],["nzSize","small"],[4,"nzSpaceItem"],[3,"status",4,"nzSpaceItem"],["nz-typography","","nzType","secondary"],[3,"status"],["nzNotFoundImage","simple","nzNotFoundContent","No Flags matching filters"]],template:function(v,R){if(1&v&&(t.DNE(0,Kn,1,1,"nz-alert",4)(1,Jn,1,2,"nz-alert",5),t.j41(2,"nz-card",6),t.DNE(3,it,3,1,"ng-container",7)(4,ot,1,0,"ng-template",null,0,t.C5r),t.k0s()),2&v){const en=t.sdS(5);t.Y8G("ngForOf",R.errors),t.R7$(),t.Y8G("ngIf",R.success),t.R7$(2),t.Y8G("ngIf",R.flags&&R.flags.length>0)("ngIfElse",en)}},dependencies:[u.Sq,u.bT,y.Uq,y.e,A.cK,k.U5,k.Dq,hn.Di,Rn.RW,Tn.j,mn.Dn,bn.r,yn.g,S.c,N.Y,cn,Hn.p,Wn.R,Qn.N],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}))}return a(),p})();var at=o(9365),rt=o(29438);const pn=()=>[];function lt(a,p){if(1&a&&(t.nrm(0,"cvc-flag-list",14),t.nI1(1,"ngrxPush")),2&a){const r=t.XpG(2);t.Y8G("flags",t.bMT(1,2,r.flags$)||t.lJ4(4,pn))("flagResolvedCallback",r.refresh)}}function ct(a,p){if(1&a){const r=t.RV6();t.j41(0,"button",17),t.bIt("click",function(){d.eBV(r);const v=t.XpG(2).ngrxLet,R=t.XpG(2);return d.Njj(R.loadMore(null==v?null:v.endCursor))}),t.EFF(1," Load More "),t.k0s()}}function _t(a,p){1&a&&(t.qex(0),t.DNE(1,ct,2,0,"button",16),t.bVm())}function pt(a,p){if(1&a&&(t.qex(0),t.DNE(1,_t,2,0,"ng-container",15),t.bVm()),2&a){const r=p.ngrxLet;t.R7$(),t.Y8G("ngIf",r&&(null==r?null:r.hasNextPage)&&r.endCursor)}}function gt(a,p){if(1&a&&t.nrm(0,"cvc-flag-add-form",18),2&a){const r=t.XpG(2);t.Y8G("flaggable",r.flaggable)("flagAddedCallback",r.refresh)}}function mt(a,p){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&a){const r=p.$implicit;t.R7$(),t.JRh(r.displayName)}}function dt(a,p){if(1&a){const r=t.RV6();t.j41(0,"cvc-participant-list",19),t.bIt("participantSelectedEvent",function(v){d.eBV(r);const R=t.XpG(2);return d.Njj(R.onStateSelected(v))}),t.DNE(1,mt,2,1,"ng-template",null,1,t.C5r),t.k0s()}if(2&a){const r=t.XpG(2);t.Y8G("preselectedOption",r.selectableStates[0])("participantList",r.selectableStates)}}function ut(a,p){if(1&a&&t.nrm(0,"nz-avatar",22),2&a){const r=t.XpG().$implicit;t.Y8G("nzSrc",r.profileImagePath)}}function ft(a,p){if(1&a&&(t.nrm(0,"nz-avatar",23),t.nI1(1,"uppercase")),2&a){const r=t.XpG().$implicit;t.Y8G("nzText",t.bMT(1,1,r.username.charAt(0)))}}function vt(a,p){if(1&a&&(t.DNE(0,ut,1,1,"nz-avatar",21)(1,ft,2,3,"ng-template",null,2,t.C5r),t.j41(3,"span"),t.EFF(4),t.k0s()),2&a){const r=p.$implicit,m=t.sdS(2);t.Y8G("ngIf",r.profileImagePath)("ngIfElse",m),t.R7$(4),t.JRh(r.username)}}function zt(a,p){if(1&a){const r=t.RV6();t.j41(0,"cvc-participant-list",20),t.nI1(1,"ngrxPush"),t.bIt("participantSelectedEvent",function(v){d.eBV(r);const R=t.XpG(2);return d.Njj(R.onFlaggingUsersSelected(v))}),t.DNE(2,vt,5,3,"ng-template",null,1,t.C5r),t.k0s()}if(2&a){const r=t.XpG(2);t.Y8G("participantList",t.bMT(1,1,r.uniqueFlaggingUsers$)||t.lJ4(3,pn))}}function Ct(a,p){if(1&a&&t.nrm(0,"nz-avatar",22),2&a){const r=t.XpG().$implicit;t.Y8G("nzSrc",r.profileImagePath)}}function ht(a,p){if(1&a&&(t.nrm(0,"nz-avatar",23),t.nI1(1,"uppercase")),2&a){const r=t.XpG().$implicit;t.Y8G("nzText",t.bMT(1,1,r.username.charAt(0)))}}function Rt(a,p){if(1&a&&(t.DNE(0,Ct,1,1,"nz-avatar",21)(1,ht,2,3,"ng-template",null,2,t.C5r),t.j41(3,"span"),t.EFF(4),t.k0s()),2&a){const r=p.$implicit,m=t.sdS(2);t.Y8G("ngIf",r.profileImagePath)("ngIfElse",m),t.R7$(4),t.JRh(r.username)}}function Tt(a,p){if(1&a){const r=t.RV6();t.j41(0,"cvc-participant-list",24),t.nI1(1,"ngrxPush"),t.bIt("participantSelectedEvent",function(v){d.eBV(r);const R=t.XpG(2);return d.Njj(R.onResolvingUsersSelected(v))}),t.DNE(2,Rt,5,3,"ng-template",null,1,t.C5r),t.k0s()}if(2&a){const r=t.XpG(2);t.Y8G("participantList",t.bMT(1,1,r.uniqueResolvingUsers$)||t.lJ4(3,pn))}}function bt(a,p){if(1&a&&(t.qex(0),t.j41(1,"nz-row",4)(2,"nz-col",5)(3,"nz-space",6),t.DNE(4,lt,2,5,"cvc-flag-list",7)(5,pt,2,1,"ng-container",8)(6,gt,1,2,"cvc-flag-add-form",9),t.k0s()(),t.j41(7,"nz-col",10)(8,"nz-space",6),t.DNE(9,dt,3,2,"cvc-participant-list",11)(10,zt,4,4,"cvc-participant-list",12)(11,Tt,4,4,"cvc-participant-list",13),t.k0s()()(),t.bVm()),2&a){const r=t.XpG();t.R7$(),t.Y8G("nzGutter",16),t.R7$(4),t.Y8G("ngrxLet",r.pageInfo$)}}function yt(a,p){if(1&a&&t.nrm(0,"cvc-flag-add-form",18),2&a){const r=t.XpG();t.Y8G("flaggable",r.flaggable)("flagAddedCallback",r.refresh)}}let Et=(()=>{var a;class p{constructor(m){this.gql=m,this.onFlagsUpdated=(0,c.CGW)(),this.defaultPageSize=5,this.selectableStates=[{id:1,displayName:"Open",value:_.Qfy.Open},{id:2,displayName:"Resolved",value:_.Qfy.Resolved}]}ngOnInit(){if(null==this.flaggable)throw new Error("Must pass a flaggable into flag list");this.queryRef=this.gql.watch({first:this.defaultPageSize,flaggable:this.flaggable,state:_.Qfy.Open}),this.refresh=()=>{this.queryRef.refetch(),this.onFlagsUpdated.emit()},this.results$=this.queryRef.valueChanges,this.flags$=this.results$.pipe((0,n.E)("data","flags","edges"),(0,j.p)(z.kP),(0,b.T)(m=>m.map(v=>v.node))),this.pageInfo$=this.results$.pipe((0,n.E)("data","flags","pageInfo")),this.unfilteredCount$=this.results$.pipe((0,n.E)("data","flags","unfilteredCountForSubject")),this.uniqueFlaggingUsers$=this.results$.pipe((0,b.T)(({data:m})=>m.flags?.uniqueFlaggingUsers)),this.uniqueResolvingUsers$=this.results$.pipe((0,b.T)(({data:m})=>m.flags?.uniqueResolvingUsers))}onFlaggingUsersSelected(m){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},flaggingUserId:m?m.id:void 0})}onResolvingUsersSelected(m){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},resolvingUserId:m?m.id:void 0})}onStateSelected(m){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},state:m?m.value:void 0})}loadMore(m){this.queryRef?.fetchMore({variables:{first:this.defaultPageSize,after:m}})}static#n=a=()=>(this.\u0275fac=function(v){return new(v||p)(t.rXU(_.HnF))},this.\u0275cmp=t.VBU({type:p,selectors:[["cvc-flag-list-and-filter"]],inputs:{flaggable:"flaggable"},outputs:{onFlagsUpdated:"onFlagsUpdated"},standalone:!1,decls:4,vars:4,consts:[["noFlags",""],["itemTemplate",""],["noAvatar",""],[4,"ngIf","ngIfElse"],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"flags","flagResolvedCallback",4,"nzSpaceItem"],[4,"ngrxLet"],[3,"flaggable","flagAddedCallback",4,"nzSpaceItem"],["nzSpan","6"],["listTitle","Flag State",3,"preselectedOption","participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Flagging Users",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Resolving Users",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],[3,"flags","flagResolvedCallback"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[3,"flaggable","flagAddedCallback"],["listTitle","Flag State",3,"participantSelectedEvent","preselectedOption","participantList"],["listTitle","Flagging Users",3,"participantSelectedEvent","participantList"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["listTitle","Resolving Users",3,"participantSelectedEvent","participantList"]],template:function(v,R){if(1&v&&(t.DNE(0,bt,12,2,"ng-container",3),t.nI1(1,"ngrxPush"),t.DNE(2,yt,1,2,"ng-template",null,0,t.C5r)),2&v){const en=t.sdS(3);t.Y8G("ngIf",t.bMT(1,2,R.unfilteredCount$))("ngIfElse",en)}},dependencies:[u.bT,F.Nj,I.a,S.c,L.p,y.Uq,y.e,T,st,at.T,rt.PM,k.U5,k.Dq,u.Pc,F.L9],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}))}return a(),p})()}}]);