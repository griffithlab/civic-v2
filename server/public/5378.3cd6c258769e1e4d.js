"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[5378],{8909:(F,b,i)=>{i.d(b,{m:()=>E});var p=i(9808),T=i(7488),n=i(8369),m=i(209),v=i(4867),h=i(7677),z=i(3309),x=i(7345),u=i(9476),t=i(8481),y=i(5017),A=i(5e3);let E=(()=>{class g{}return g.\u0275fac=function(f){return new(f||g)},g.\u0275mod=A.oAB({type:g}),g.\u0275inj=A.cJS({imports:[[p.ez,t.X,y.PV,T.y,n.W,m.i,v.Q,h.G,z.U,x.W,u.L]]}),g})()},2233:(F,b,i)=>{i.d(b,{P:()=>E});var p=i(5e3),T=i(325),n=i(1894),m=i(868),v=i(9808),h=i(5017),z=i(4401);const x=["tabBarExtraContent"];function u(g,Z){if(1&g&&p.GkF(0,5),2&g){const f=p.oxw();p.Q6J("ngTemplateOutlet",f.tabBarExtraContent||null)}}const t=function(){return{transform:"scale(0.75, 0.75) translate(0, -2px)"}};function y(g,Z){if(1&g&&(p.TgZ(0,"a",7),p._UZ(1,"i",8),p._uU(2),p._UZ(3,"nz-badge",9),p.qZA()),2&g){const f=p.oxw().$implicit;p.Q6J("routerLink",f.routeName),p.xp6(1),p.Q6J("nzType",f.iconName),p.xp6(1),p.hij(" ",f.tabLabel," "),p.xp6(1),p.MGl("nzTitle","There are ",f.badgeCount," outstanding revisions."),p.Q6J("nzCount",f.badgeCount)("nzStyle",p.DdM(6,t))}}function A(g,Z){1&g&&(p.TgZ(0,"nz-tab"),p.YNc(1,y,4,7,"a",6),p.qZA())}let E=(()=>{class g{constructor(f){this.router=f,this.selectedTabIndex=this.getActivatedRouteIndex(this.router.url)}getActivatedRouteIndex(f){var C;return null===(C=this.tabs)||void 0===C?void 0:C.findIndex(I=>f.includes(I.routeName))}}return g.\u0275fac=function(f){return new(f||g)(p.Y36(T.F0))},g.\u0275cmp=p.Xpm({type:g,selectors:[["cvc-tab-navigation"]],contentQueries:function(f,C,I){if(1&f&&p.Suo(I,x,5),2&f){let D;p.iGM(D=p.CRH())&&(C.tabBarExtraContent=D.first)}},inputs:{entity:"entity",tabs:"tabs"},decls:6,vars:3,consts:[["id","section-tabs"],["nzSpan","24"],["nzLinkRouter","","nzType","card","nzSize","small",3,"nzSelectedIndex","nzTabBarExtraContent"],["extraTpl",""],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["nz-tab-link","",3,"routerLink",4,"nzTabLink"],["nz-tab-link","",3,"routerLink"],["nz-icon","",3,"nzType"],["nzStandalone","",3,"nzCount","nzTitle","nzStyle"]],template:function(f,C){if(1&f&&(p.TgZ(0,"nz-row",0)(1,"nz-col",1)(2,"nz-tabset",2),p.YNc(3,u,1,1,"ng-template",null,3,p.W1O),p.YNc(5,A,2,0,"nz-tab",4),p.qZA()()()),2&f){const I=p.MAs(4);p.xp6(2),p.Q6J("nzSelectedIndex",C.selectedTabIndex)("nzTabBarExtraContent",I),p.xp6(3),p.Q6J("ngForOf",C.tabs)}},directives:[n.SK,n.t3,m.xH,v.tP,v.sg,m.xw,m.Fx,m.Ao,T.yS,h.Ls,z.x7],styles:["[_nghost-%COMP%]{display:block}"]}),g})()},8762:(F,b,i)=>{i.d(b,{c:()=>u});var p=i(9808),T=i(868),n=i(1894),m=i(325),v=i(5017),h=i(6949),z=i(4401),x=i(5e3);let u=(()=>{class t{}return t.\u0275fac=function(A){return new(A||t)},t.\u0275mod=x.oAB({type:t}),t.\u0275inj=x.cJS({imports:[[p.ez,m.Bz,T.we,n.Jb,v.PV,z.mS,h.WG]]}),t})()},1243:(F,b,i)=>{i.d(b,{I:()=>T});var p=i(5e3);let T=(()=>{class n{transform(v){if(v){let z=v.toLowerCase().replace(/_/g," ").split(" ");for(var h=0;h<z.length;h++)z[h]=z[h].charAt(0).toUpperCase()+z[h].slice(1);return z.join(" ")}return""}}return n.\u0275fac=function(v){return new(v||n)},n.\u0275pipe=p.Yjl({name:"enumToTitle",type:n,pure:!0}),n})()},9058:(F,b,i)=>{i.d(b,{j:()=>n});var p=i(7630),T=i(5e3);let n=(()=>{class m{transform(h){switch(h){case"ASSERTION":case"Assertion":case p.o71.Assertion:return"civic:assertion";case"EVIDENCE_ITEM":case"EvidenceItem":case p.o71.EvidenceItem:return"civic:evidence";case"GENE":case"Gene":case p.o71.Gene:return"civic:gene";case p.o71.Revision:case"REVISION":case"Revision":return"civic:revision";case p.o71.Variant:case"VARIANT":case"Variant":return"civic:variant";case p.o71.VariantGroup:case"VARIANT_GROUP":case"VariantGroup":return"civic:variant-group";default:return console.log("String No icon name found for "+h),"border-outer"}}}return m.\u0275fac=function(h){return new(h||m)},m.\u0275pipe=T.Yjl({name:"iconNameForSubscribableEntity",type:m,pure:!0}),m})()},4509:(F,b,i)=>{i.d(b,{w:()=>f});var p=i(9808),T=i(3075),n=i(7484),m=i(4546),v=i(7008),h=i(1825),z=i(4375),x=i(6042),u=i(4623),t=i(868),y=i(6949),A=i(8909),E=i(7525),g=i(4921),Z=i(5e3);let f=(()=>{class C{}return C.\u0275fac=function(D){return new(D||C)},C.\u0275mod=Z.oAB({type:C}),C.\u0275inj=Z.cJS({imports:[[p.ez,T.UX,y.WG,x.sL,n.vh,t.we,m.U5,E.j,g.Gl,T.u5,v.B,h.A,z.R,A.m,u.K]]}),C})()},6738:(F,b,i)=>{function p(u){let t={value:void 0,unset:void 0};return u&&u.trim().length>0?t.value=u.trim():t.unset=!0,t}function T(u){let t={value:void 0,unset:void 0};return void 0!==u?t.value=u:t.unset=!0,t}i.d(b,{aP:()=>x,li:()=>n,Zg:()=>m,_$:()=>v,uP:()=>T,dh:()=>h,xt:()=>p});var n=(()=>{return(u=n||(n={}))[u.NotApplicable=0]="NotApplicable",u[u.NoneFound=1]="NoneFound",u[u.Found=2]="Found",n;var u})();function m(u,t){let y,A,E;return t==n.Found?(y=void 0,A=void 0,E=u):t==n.NoneFound?(A=!0,y=void 0,E=void 0):(y=!0,A=void 0,E=void 0),{ids:E?E.map(g=>+g):void 0,noneFound:A,notApplicable:y}}function v(u){return u?{chromosome:z(u.chromosome),representativeTranscript:z(u.representativeTranscript),start:u.start?+u.start:void 0,stop:u.stop?+u.stop:void 0}:{chromosome:void 0,representativeTranscript:void 0,start:void 0,stop:void 0}}function h(u){let t={value:void 0,unset:void 0};return u?t.value=u:t.unset=!0,t}function z(u){let t;return t=u&&u.length>0?u:void 0,t}const x=[{value:void 0,label:""},{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"},{value:"11",label:"11"},{value:"12",label:"12"},{value:"13",label:"13"},{value:"14",label:"14"},{value:"15",label:"15"},{value:"16",label:"16"},{value:"17",label:"17"},{value:"18",label:"18"},{value:"19",label:"19"},{value:"20",label:"20"},{value:"21",label:"21"},{value:"22",label:"22"},{value:"X",label:"X"},{value:"Y",label:"Y"},{value:"MT",label:"MT"}]},7600:(F,b,i)=>{i.r(b),i.d(b,{UsersDetailModule:()=>Sn});var p=i(9808),T=i(5630),n=i(1945),m=i(325),v=i(8762),h=i(8144),z=i(5473),x=i(6042),u=i(5017),t=i(5e3);let y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.ez,x.sL,u.PV]]}),o})();var A=i(3098),E=i(9476),g=i(1894),Z=i(6905),f=i(6949),C=i(7484),I=i(5249),D=i(5737),w=i(3640),L=i(3075),k=i(2359),$=i(4546),V=i(7008),ct=i(3868),G=i(7525),Y=i(8054);let pt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.ez,L.u5,$.U5,L.UX,f.WG,C.vh,k.L,ct.aF,x.sL,G.j,Y.LV,V.B]]}),o})();var S=i(330),_t=i(5013),dt=i(3756);let X=(()=>{class o{constructor(e){this.route=e,this.userId=+this.route.snapshot.params.userId}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-users-assertions"]],decls:1,vars:1,consts:[["cvcTitle","User Assertions",3,"userId"]],template:function(e,a){1&e&&t._UZ(0,"cvc-assertions-table",0),2&e&&t.Q6J("userId",a.userId)},directives:[dt.x],styles:["[_nghost-%COMP%]{display:block}"]}),o})();var P=i(7630),q=i(2011);let j=(()=>{class o{constructor(e){this.route=e,this.mode=P.wJ2.User,this.userId=+this.route.snapshot.params.userId}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-users-events"]],decls:1,vars:2,consts:[["tagDisplay","hideUser",3,"userId","mode"]],template:function(e,a){1&e&&t._UZ(0,"cvc-event-feed",0),2&e&&t.Q6J("userId",a.userId)("mode",a.mode)},directives:[q.o],styles:["[_nghost-%COMP%]{display:block}"]}),o})();var ut=i(3392);let gt=(()=>{class o{constructor(e){this.route=e,this.userId=+this.route.snapshot.params.userId}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-users-evidence"]],decls:1,vars:1,consts:[["cvcTitle","User Evidence",3,"userId"]],template:function(e,a){1&e&&t._UZ(0,"cvc-evidence-table",0),2&e&&t.Q6J("userId",a.userId)},directives:[ut.a],styles:["[_nghost-%COMP%]{display:block}"]}),o})();var tt=i(6123),W=i(3240),N=i(4850),R=i(2198),ot=i(1059),H=i(9169),K=i(2683),it=i(2643),mt=i(8747),ft=i(6114),at=i(2712),ht=i(1897),zt=i(404),Ct=i(2937),vt=i(9058);function Tt(o,l){if(1&o&&(t.TgZ(0,"nz-col"),t._UZ(1,"i",17),t._uU(2),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Q6J("nzType",e.iconName),t.xp6(1),t.hij(" ",e.displayName," ")}}function xt(o,l){1&o&&(t._uU(0),t.ALo(1,"eventVerbiage")),2&o&&t.hij(" ",t.xi3(1,1,l.$implicit.id,"action-filter")," ")}function Mt(o,l){if(1&o&&(t.TgZ(0,"nz-col"),t._UZ(1,"i",17),t.ALo(2,"iconNameForSubscribableEntity"),t._uU(3),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Q6J("nzType",t.lcZ(2,3,e.subjectWithCount.subject.__typename)),t.xp6(2),t.AsE(" ",e.subjectWithCount.subject.name," (",e.subjectWithCount.occuranceCount,") ")}}function Ut(o,l){if(1&o&&(t.TgZ(0,"nz-col"),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.hij(" ",e.displayName," ")}}function bt(o,l){if(1&o&&(t.TgZ(0,"nz-col"),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function yt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).bulkMarkRead()}),t._UZ(1,"i",19),t._uU(2,"Mark as read "),t.qZA(),t.TgZ(3,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).bulkMarkUnread()}),t._UZ(4,"i",19),t._uU(5,"Mark as unread "),t.qZA(),t.TgZ(6,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).bulkUnsubscribe()}),t._UZ(7,"i",20),t._uU(8,"Unsubscribe "),t.qZA(),t._uU(9," Check all "),t.TgZ(10,"label",21),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw(2).allChecked=s})("nzCheckedChange",function(s){return t.CHM(e),t.oxw(2).onCheckAllCheckBoxClicked(s)}),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("disabled",!e.bulkMarkEnabled),t.xp6(3),t.Q6J("disabled",!e.bulkMarkEnabled),t.xp6(3),t.Q6J("disabled",!e.bulkMarkEnabled),t.xp6(4),t.Q6J("ngModel",e.allChecked)("nzIndeterminate",e.someChecked)}}function At(o,l){if(1&o&&t._UZ(0,"i",32),2&o){const e=t.oxw().$implicit;t.Q6J("nzType","SUBSCRIPTION"===e.key.type?"book":"notification")("nzTheme",e.key.seen?"outline":"twotone")}}function Zt(o,l){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",33),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw(3).markAsUnread(s.key.id)}),t._UZ(2,"i",34),t.qZA(),t.BQk()}}function Pt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw(3).markAsRead(s.key.id)}),t._UZ(1,"i",19),t.qZA()}}function Ot(o,l){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",36),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw(3).unsubscribe(s.key.subscription.subscribable.id,s.key.subscription.subscribable.__typename)}),t._UZ(2,"i",20),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.MGl("nzTooltipTitle","You received this notification because you are subscribed to ",e.key.subscription.subscribable.name,". Click to unsubscribe.")}}function Et(o,l){1&o&&(t.TgZ(0,"button",37),t._UZ(1,"i",20),t.qZA())}function B(o,l){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"nz-timeline-item",23),t.YNc(2,At,1,2,"ng-template",null,24,t.W1O),t.TgZ(4,"nz-row")(5,"nz-col",25),t._UZ(6,"cvc-event-timeline-item",26),t.qZA(),t.TgZ(7,"nz-col",27),t.YNc(8,Zt,3,0,"ng-container",28),t.YNc(9,Pt,2,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(11,"nz-col",27),t.YNc(12,Ot,3,1,"ng-container",28),t.YNc(13,Et,2,0,"ng-template",null,30,t.W1O),t.TgZ(15,"label",31),t.NdJ("ngModelChange",function(s){return t.CHM(e).$implicit.value.checked=s})("nzCheckedChange",function(s){const O=t.CHM(e).$implicit;return t.oxw(3).onNotificationCheckBoxClicked(O.key.id,s)}),t.qZA()()()(),t.BQk()}if(2&o){const e=l.$implicit,a=t.MAs(3),s=t.MAs(10),_=t.MAs(14);t.xp6(1),t.Q6J("nzDot",a)("nzColor",e.key.seen?"gray":"blue"),t.xp6(5),t.Q6J("event",e.key.event),t.xp6(2),t.Q6J("ngIf",e.key.seen)("ngIfElse",s),t.xp6(4),t.Q6J("ngIf",e.key.subscription)("ngIfElse",_),t.xp6(3),t.Q6J("ngModel",e.value.checked)}}function It(o,l){if(1&o&&(t.TgZ(0,"nz-timeline"),t.YNc(1,B,16,8,"ng-container",22),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e))}}function St(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",39)(1,"button",40),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().ngIf;return t.oxw(2).fetchMore(s.endCursor)}),t._uU(2,"Load More "),t.qZA()()}}function cn(o,l){if(1&o&&(t.ynx(0),t.YNc(1,St,3,0,"div",38),t.BQk()),2&o){const e=l.ngIf;t.xp6(1),t.Q6J("ngIf",e.hasNextPage)}}function pn(o,l){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"nz-row",2)(2,"nz-col",3)(3,"nz-row")(4,"nz-button-group",4)(5,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().setIncludeRead(!1)}),t._uU(6,"Unread"),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().setIncludeRead(!0)}),t._uU(8,"All"),t.qZA()()(),t.TgZ(9,"nz-row")(10,"nz-col",6)(11,"cvc-participant-list",7),t.NdJ("participantSelectedEvent",function(s){return t.CHM(e),t.oxw().onNotificationReasonSelected(s)}),t.YNc(12,Tt,3,2,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(14,"cvc-participant-list",9),t.NdJ("participantSelectedEvent",function(s){return t.CHM(e),t.oxw().onActionSelected(s)}),t.ALo(15,"ngrxPush"),t.YNc(16,xt,2,4,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(18,"cvc-participant-list",10),t.NdJ("participantSelectedEvent",function(s){return t.CHM(e),t.oxw().onNotificationSubjectSelected(s)}),t.ALo(19,"ngrxPush"),t.YNc(20,Mt,4,5,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(22,"cvc-participant-list",11),t.NdJ("participantSelectedEvent",function(s){return t.CHM(e),t.oxw().onOriginatingUserSelected(s)}),t.ALo(23,"ngrxPush"),t.YNc(24,Ut,2,1,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(26,"cvc-participant-list",12),t.NdJ("participantSelectedEvent",function(s){return t.CHM(e),t.oxw().onOrganizationSelected(s)}),t.ALo(27,"ngrxPush"),t.YNc(28,bt,2,1,"ng-template",null,8,t.W1O),t.qZA()()()(),t.TgZ(30,"nz-col",13)(31,"nz-card",14),t.YNc(32,yt,11,5,"ng-template",null,15,t.W1O),t.TgZ(34,"nz-row",2)(35,"nz-col",16),t.YNc(36,It,3,3,"nz-timeline",1),t.YNc(37,cn,2,1,"ng-container",1),t.ALo(38,"ngrxPush"),t.qZA()()()()(),t.BQk()}if(2&o){const e=l.ngIf,a=t.MAs(33),s=t.oxw();t.xp6(1),t.Q6J("nzGutter",25),t.xp6(4),t.Q6J("nzType",s.includeReadInput?"default":"primary"),t.xp6(2),t.Q6J("nzType",s.includeReadInput?"primary":"default"),t.xp6(4),t.Q6J("participantList",s.notificationTypes),t.xp6(3),t.Q6J("participantList",t.lcZ(15,12,s.actions$)),t.xp6(4),t.Q6J("participantList",t.lcZ(19,14,s.notificationSubjects$)),t.xp6(4),t.Q6J("participantList",t.lcZ(23,16,s.originatingUsers$)),t.xp6(4),t.Q6J("participantList",t.lcZ(27,18,s.organizations$)),t.xp6(5),t.Q6J("nzExtra",a),t.xp6(3),t.Q6J("nzGutter",16),t.xp6(2),t.Q6J("ngIf",e.size>0),t.xp6(1),t.Q6J("ngIf",t.lcZ(38,20,s.pageInfo$))}}let Nt=(()=>{class o{constructor(e,a,s,_,O){this.route=e,this.gql=a,this.networkErrorService=s,this.updateNotificationStatusMuation=_,this.unsubscribeMutation=O,this.notificationState=new Map,this.includeReadInput=!1,this.bulkMarkEnabled=!1,this.allChecked=!1,this.someChecked=!1,this.notificationTypes=[{id:1,type:P.fow.Mention,iconName:"notification",displayName:"Mentioned"},{id:2,type:P.fow.Subscription,iconName:"book",displayName:"Subscribed"}],this.userId=+this.route.snapshot.params.userId,this.updateNotificationStatusMutator=new tt.U(s),this.unsubscribeMutator=new tt.U(s)}ngOnInit(){this.initialQueryVars={includeRead:this.includeReadInput},this.queryRef=this.gql.watch(this.initialQueryVars),this.results$=this.queryRef.valueChanges,this.connection$=this.results$.pipe((0,N.U)(e=>{var a;return null===(a=e.data)||void 0===a?void 0:a.notifications}),(0,R.h)(W.ep)),this.pageInfo$=this.connection$.pipe((0,N.U)(e=>e.pageInfo),(0,R.h)(W.ep)),this.notificationStateObservable$=this.results$.pipe((0,N.U)(e=>e.data),(0,R.h)(W.ep),(0,N.U)(({notifications:e})=>{let a=new Map;return e.edges.forEach(s=>{if(s.node){let _={checked:!1};a.set(s.node,_),this.notificationState.set(s.node,_)}}),a})),this.notificationSubjects$=this.results$.pipe((0,N.U)(e=>e.data),(0,R.h)(W.ep),(0,N.U)(({notifications:e})=>e.notificationSubjects.map(a=>{var s,_;return{id:`${null===(s=a.subject)||void 0===s?void 0:s.__typename}:${null===(_=a.subject)||void 0===_?void 0:_.id}`,subjectWithCount:a}}))),this.originatingUsers$=this.results$.pipe((0,N.U)(({data:e})=>e.notifications.originatingUsers)),this.actions$=this.results$.pipe((0,N.U)(({data:e})=>e.notifications.eventTypes.map(a=>({id:a})))),this.organizations$=this.results$.pipe((0,N.U)(({data:e})=>e.notifications.organizations)),this.isLoading$=this.results$.pipe((0,N.U)(({loading:e})=>e),(0,ot.O)(!0))}fetchMore(e){this.queryRef.fetchMore({variables:{after:e}})}setIncludeRead(e){this.includeReadInput=e,this.queryRef.refetch({includeRead:this.includeReadInput})}onNotificationReasonSelected(e){this.queryRef.refetch({notificationReason:e?e.type:void 0})}onNotificationSubjectSelected(e){var a;let s;if(void 0!==e){let _=null===(a=e.subjectWithCount.subject)||void 0===a?void 0:a.__typename;s={id:e.subjectWithCount.subject.id,entityType:P.o71[_]}}this.queryRef.refetch({originatingObject:s})}onOriginatingUserSelected(e){this.queryRef.refetch({originatingUserId:null==e?void 0:e.id})}onActionSelected(e){this.queryRef.refetch({eventType:e?e.id:void 0})}onOrganizationSelected(e){this.queryRef.refetch({organizationId:null==e?void 0:e.id})}markAsRead(e){this.updateNotificationStatusMutator.mutate(this.updateNotificationStatusMuation,{input:{ids:[e],newStatus:P.NQC.Read}})}markAsUnread(e){this.updateNotificationStatusMutator.mutate(this.updateNotificationStatusMuation,{input:{ids:[e],newStatus:P.NQC.Unread}})}unsubscribe(e,a){this.unsubscribeMutator.mutate(this.unsubscribeMutation,{input:{subscribables:[{id:e,entityType:P.o71[a]}]}})}onNotificationCheckBoxClicked(e,a){let s=Array.from(this.notificationState.keys()).find(_=>_.id===e);if(s){let _=this.notificationState.get(s);_&&(_.checked=a)}a?(this.bulkMarkEnabled=!0,Array.from(this.notificationState.values()).every(_=>_.checked)?(this.allChecked=!0,this.someChecked=!1):this.someChecked=!0):Array.from(this.notificationState.values()).some(_=>_.checked)?(this.bulkMarkEnabled=!0,this.allChecked=!1,this.someChecked=!Array.from(this.notificationState.values()).every(_=>!_.checked)):(this.bulkMarkEnabled=!1,this.allChecked=!1,this.someChecked=!1)}onCheckAllCheckBoxClicked(e){e?this.checkAll():this.uncheckAll()}getCheckedIds(){let e=[];return this.notificationState.forEach((a,s)=>{a.checked&&e.push(s.id)}),e}checkAll(){this.queryRef.refetch().then(()=>{this.notificationState.forEach((e,a)=>{e.checked=!0})}),this.allChecked=!0,this.someChecked=!1,this.bulkMarkEnabled=!0}uncheckAll(){this.queryRef.refetch().then(()=>{this.notificationState.forEach((e,a)=>{e.checked=!1})}),this.allChecked=!1,this.someChecked=!1,this.bulkMarkEnabled=!1}bulkMarkRead(){this.updateNotificationStatusMutator.mutate(this.updateNotificationStatusMuation,{input:{ids:this.getCheckedIds(),newStatus:P.NQC.Read}}),this.uncheckAll()}bulkMarkUnread(){this.updateNotificationStatusMutator.mutate(this.updateNotificationStatusMuation,{input:{ids:this.getCheckedIds(),newStatus:P.NQC.Unread}}),this.uncheckAll()}bulkUnsubscribe(){let e=[];this.notificationState.forEach((a,s)=>{a.checked&&s.subscription&&e.push({id:s.subscription.subscribable.id,entityType:P.o71[s.subscription.subscribable.__typename]})}),this.unsubscribeMutator.mutate(this.unsubscribeMutation,{input:{subscribables:e}}).submitSuccess$.subscribe(a=>{a&&this.queryRef.refetch()}),this.uncheckAll()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.gz),t.Y36(P.yqR),t.Y36(H.Y),t.Y36(P.LiH),t.Y36(P.m$d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-users-notifications"]],decls:4,vars:6,consts:[[3,"nzSpinning"],[4,"ngIf"],[3,"nzGutter"],["nzSpan","4"],["nzSize","small"],["nz-button","","nzShape","round",3,"nzType","click"],["nzSpan","24"],["listTitle","Notification Reason",3,"participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Action",3,"participantList","participantSelectedEvent"],["listTitle","Subject",3,"participantList","participantSelectedEvent"],["listTitle","User",3,"participantList","participantSelectedEvent"],["listTitle","Organization",3,"participantList","participantSelectedEvent"],["nzSpan","20"],["nzTitle","Notifications","id","card-content",3,"nzExtra"],["bulkOperations",""],["nzSpan","24",1,"timeline"],["nz-icon","",3,"nzType"],["nz-button","","nzSize","small",3,"disabled","click"],["nz-icon","","nzType","check"],["nz-icon","","nzType","bell"],["nz-checkbox","",3,"ngModel","nzIndeterminate","ngModelChange","nzCheckedChange"],[4,"ngFor","ngForOf"],[3,"nzDot","nzColor"],["timelineDotTemplate",""],["nzFlex","auto"],[3,"event"],["nzFlex","50px"],[4,"ngIf","ngIfElse"],["unread",""],["noSubscriptionButton",""],["nz-checkbox","",3,"ngModel","ngModelChange","nzCheckedChange"],["nz-icon","",1,"item-icon",3,"nzType","nzTheme"],["nz-tooltip","","nzTooltipTitle","Mark as unread.","nz-button","","nzType","default","nzShape","circle",3,"click"],["nz-icon","","nzType","undo"],["nz-tooltip","","nzTooltipTitle","Mark as read.","nz-button","","nzType","default","nzShape","circle",3,"click"],["nz-tooltip","","nz-button","","nzType","default","nzShape","circle",3,"nzTooltipTitle","click"],["nz-tooltip","","nzTooltipTitle","You are no longer subscribed to the entity that triggered this notification.","nz-button","","nzType","default","nzShape","circle","disabled",""],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","default","nzSize","small","nzBlock","",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"nz-spin",0),t.ALo(1,"ngrxPush"),t.YNc(2,pn,39,22,"ng-container",1),t.ALo(3,"async"),t.qZA()),2&e&&(t.Q6J("nzSpinning",t.lcZ(1,2,a.isLoading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,a.notificationStateObservable$)))},directives:[G.W,p.O5,g.SK,g.t3,x.fY,K.w,x.ix,it.dQ,mt.l,u.Ls,C.bd,ft.Ie,L.JJ,L.On,at.PD,p.sg,at.Zv,ht.t,zt.SY],pipes:[f.fM,p.Ov,Ct.R,vt.j,p.Nd],styles:["[_nghost-%COMP%]{display:block}.timeline[_ngcontent-%COMP%]{padding-top:6px;padding-left:6px}.item-icon[_ngcontent-%COMP%]{font-size:18px}.timeline-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .timeline-item[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{margin-top:2px}.timeline-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-left:4px}.read-notification[_ngcontent-%COMP%]{background-color:gray}nz-timeline[_ngcontent-%COMP%]     ul li:last-child{padding-bottom:0}nz-timeline[_ngcontent-%COMP%]     ul li:last-child .ant-timeline-item-content{min-height:0;padding-bottom:8px}.timestamp[_ngcontent-%COMP%]{text-align:right}.comment-title[_ngcontent-%COMP%]{padding-right:24px}.comment-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400}.comment-card[_ngcontent-%COMP%]{width:100%}"]}),o})();var Jt=i(9814);let Dt=(()=>{class o{constructor(e){this.route=e,this.userId=+this.route.snapshot.params.userId}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-users-source-suggestions"]],decls:1,vars:1,consts:[["cvcTitle","User Source Suggestions",3,"submitterId"]],template:function(e,a){1&e&&t._UZ(0,"cvc-source-suggestions-table",0),2&e&&t.Q6J("submitterId",a.userId)},directives:[Jt.O],styles:["[_nghost-%COMP%]{display:block}"]}),o})();var rt=i(373),st=i(591),Qt=i(9350),Lt=i(8992),Rt=i(7881),lt=i(3618),nt=i(520);let Bt=(()=>{class o{constructor(e){this.http=e,this.uploadComplete=new t.vpe}processProfileImage(e){if(e&&e[0]){let a=new FormData;a.append("image",e[0],e[0].name),this.uploadSubscription=this.http.post("/api/upload_profile_image",a).subscribe(s=>this.uploadComplete.emit(!0),s=>this.uploadComplete.emit(!1))}}ngOnDestroy(){var e;null===(e=this.uploadSubscription)||void 0===e||e.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(nt.eN))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-avatar-uploader"]],outputs:{uploadComplete:"uploadComplete"},decls:4,vars:0,consts:[["type","file","accept","image/*",2,"display","none",3,"change"],["profileImage",""],["nz-button","","nzSize","small","nzType","link",3,"click"]],template:function(e,a){if(1&e){const s=t.EpF();t.TgZ(0,"input",0,1),t.NdJ("change",function(){t.CHM(s);const O=t.MAs(1);return a.processProfileImage(O.files)}),t.qZA(),t.TgZ(2,"button",2),t.NdJ("click",function(){return t.CHM(s),t.MAs(1).click()}),t._uU(3,"Upload Image\n"),t.qZA()}},directives:[x.ix,K.w],styles:[""]}),o})();var Ft=i(5749),$t=i(7893),Yt=i(2233),Q=i(6738),Wt=i(8929),et=i(7625),wt=i(822);function kt(o,l){1&o&&t._UZ(0,"nz-alert",13)}function jt(o,l){if(1&o&&(t.TgZ(0,"nz-form-item"),t._UZ(1,"cvc-form-errors-alert",14),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("errors",e.errorMessages)}}function Ht(o,l){if(1&o&&t._UZ(0,"nz-option",15),2&o){const e=l.$implicit;t.Q6J("nzLabel",e.name)("nzValue",e.id)}}let Kt=(()=>{class o{constructor(e,a,s){this.updateProfileGql=e,this.profileUpdatedEvent=new t.vpe,this.success=!1,this.errorMessages=[],this.loading=!1,this.destroy$=new Wt.xQ,this.updateProfileMutator=new tt.U(s),this.countries$=a.fetch().pipe((0,N.U)(({data:_})=>_.countries))}ngOnInit(){if(!this.user)throw new Error("Must pass a user into the Profile Update Form");this.setInitialFormFields()}updateProfile(){if(this.username&&this.email){this.errorMessages=[];let e={username:this.username,email:this.email,name:(0,Q.xt)(this.name),areaOfExpertise:(0,Q.uP)(this.areaOfExpertise),orcid:(0,Q.xt)(this.orcid),url:(0,Q.xt)(this.url),bio:(0,Q.xt)(this.bio),countryId:(0,Q.uP)(this.countryId),twitterHandle:(0,Q.xt)(this.twitterHandle),facebookProfile:(0,Q.xt)(this.facebookProfile),linkedinProfile:(0,Q.xt)(this.linkedinProfile)},a=this.updateProfileMutator.mutate(this.updateProfileGql,{input:e});a.submitSuccess$.pipe((0,et.R)(this.destroy$)).subscribe(s=>{s&&(this.setInitialFormFields(),this.success=!0,this.profileUpdatedEvent.emit())}),a.submitError$.pipe((0,et.R)(this.destroy$)).subscribe(s=>{s&&(this.errorMessages=s,this.success=!1)}),a.isSubmitting$.pipe((0,et.R)(this.destroy$)).subscribe(s=>{this.loading=s})}}setInitialFormFields(){var e;this.name=this.user.name,this.username=this.user.username,this.email=this.user.email,this.areaOfExpertise=this.user.areaOfExpertise,this.orcid=this.user.orcid,this.url=this.user.url,this.bio=this.user.bio,this.twitterHandle=this.user.twitterHandle,this.facebookProfile=this.user.facebookProfile,this.linkedinProfile=this.user.linkedinProfile,this.countryId=null===(e=this.user.country)||void 0===e?void 0:e.id}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(P.wbP),t.Y36(P.l4w),t.Y36(H.Y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-user-profile-form"]],inputs:{user:"user"},outputs:{profileUpdatedEvent:"profileUpdatedEvent"},decls:56,vars:18,consts:[["nzBanner","","nzMessage","Profile Updated","nzType","success","nzCloseable","",4,"ngIf"],[4,"ngIf"],["nzTip","Submitting",3,"nzSpinning"],["nzRequired",""],["nz-input","",2,"width","100%",3,"ngModel","ngModelChange"],["nz-input","","rows","5",2,"width","100%",3,"ngModel","ngModelChange"],["nzAllowClear","","nzShowSearch","",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzAllowClear","",3,"ngModel","ngModelChange"],["nzLabel","Patient Advocate","nzValue","PATIENT_ADVOCATE"],["nzLabel","Clinical Scientist","nzValue","CLINICAL_SCIENTIST"],["nzLabel","Research Scientist","nzValue","RESEARCH_SCIENTIST"],["type","submit","nz-button","","nzType","primary","nzSize","small",2,"width","100%",3,"disabled","click"],["nzBanner","","nzMessage","Profile Updated","nzType","success","nzCloseable",""],[3,"errors"],[3,"nzLabel","nzValue"]],template:function(e,a){1&e&&(t.TgZ(0,"nz-card"),t.YNc(1,kt,1,0,"nz-alert",0),t.YNc(2,jt,2,1,"nz-form-item",1),t.TgZ(3,"nz-spin",2)(4,"nz-form-item")(5,"nz-form-label",3),t._uU(6,"Username"),t.qZA(),t.TgZ(7,"input",4),t.NdJ("ngModelChange",function(_){return a.username=_}),t.qZA()(),t.TgZ(8,"nz-form-item")(9,"nz-form-label"),t._uU(10,"Name"),t.qZA(),t.TgZ(11,"input",4),t.NdJ("ngModelChange",function(_){return a.name=_}),t.qZA()(),t.TgZ(12,"nz-form-item")(13,"nz-form-label",3),t._uU(14,"Email"),t.qZA(),t.TgZ(15,"input",4),t.NdJ("ngModelChange",function(_){return a.email=_}),t.qZA()(),t.TgZ(16,"nz-form-item")(17,"nz-form-label"),t._uU(18,"User Bio"),t.qZA(),t.TgZ(19,"textarea",5),t.NdJ("ngModelChange",function(_){return a.bio=_}),t.qZA()(),t.TgZ(20,"nz-form-item")(21,"nz-form-label"),t._uU(22,"Country"),t.qZA(),t.TgZ(23,"nz-select",6),t.NdJ("ngModelChange",function(_){return a.countryId=_}),t.YNc(24,Ht,1,2,"nz-option",7),t.ALo(25,"ngrxPush"),t.qZA()(),t.TgZ(26,"nz-form-item")(27,"nz-form-label"),t._uU(28,"Area of Expertise"),t.qZA(),t.TgZ(29,"nz-select",8),t.NdJ("ngModelChange",function(_){return a.areaOfExpertise=_}),t._UZ(30,"nz-option",9)(31,"nz-option",10)(32,"nz-option",11),t.qZA()(),t.TgZ(33,"nz-form-item")(34,"nz-form-label"),t._uU(35,"ORCID Identifier"),t.qZA(),t.TgZ(36,"input",4),t.NdJ("ngModelChange",function(_){return a.orcid=_}),t.qZA()(),t.TgZ(37,"nz-form-item")(38,"nz-form-label"),t._uU(39,"Personal Website"),t.qZA(),t.TgZ(40,"input",4),t.NdJ("ngModelChange",function(_){return a.url=_}),t.qZA()(),t.TgZ(41,"nz-form-item")(42,"nz-form-label"),t._uU(43,"Twitter Handle"),t.qZA(),t.TgZ(44,"input",4),t.NdJ("ngModelChange",function(_){return a.twitterHandle=_}),t.qZA()(),t.TgZ(45,"nz-form-item")(46,"nz-form-label"),t._uU(47,"Facebook Profile"),t.qZA(),t.TgZ(48,"input",4),t.NdJ("ngModelChange",function(_){return a.facebookProfile=_}),t.qZA()(),t.TgZ(49,"nz-form-item")(50,"nz-form-label"),t._uU(51,"LinkedIn Profile"),t.qZA(),t.TgZ(52,"input",4),t.NdJ("ngModelChange",function(_){return a.linkedinProfile=_}),t.qZA()(),t.TgZ(53,"nz-form-item")(54,"button",12),t.NdJ("click",function(){return a.updateProfile()}),t._uU(55," Update Profile "),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("ngIf",a.success),t.xp6(1),t.Q6J("ngIf",a.errorMessages.length>0),t.xp6(1),t.Q6J("nzSpinning",a.loading),t.xp6(4),t.Q6J("ngModel",a.username),t.xp6(4),t.Q6J("ngModel",a.name),t.xp6(4),t.Q6J("ngModel",a.email),t.xp6(4),t.Q6J("ngModel",a.bio),t.xp6(4),t.Q6J("ngModel",a.countryId),t.xp6(1),t.Q6J("ngForOf",t.lcZ(25,16,a.countries$)),t.xp6(5),t.Q6J("ngModel",a.areaOfExpertise),t.xp6(7),t.Q6J("ngModel",a.orcid),t.xp6(4),t.Q6J("ngModel",a.url),t.xp6(4),t.Q6J("ngModel",a.twitterHandle),t.xp6(4),t.Q6J("ngModel",a.facebookProfile),t.xp6(4),t.Q6J("ngModel",a.linkedinProfile),t.xp6(2),t.Q6J("disabled",a.loading||!a.username||!a.email))},directives:[C.bd,p.O5,k.r,g.SK,$.Nx,wt.V,G.W,g.t3,$.iK,L.Fj,L.JJ,L.On,Y.Vq,p.sg,Y.Ip,x.ix,it.dQ,K.w],pipes:[f.fM],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}nz-form-item[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}"]}),o})();var Vt=i(8785),Gt=i(1243);function Xt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"nz-alert",35),t.NdJ("nzOnClose",function(){return t.CHM(e),t.oxw(2).uploadError=!1}),t.qZA()}}function qt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"nz-alert",36),t.NdJ("nzOnClose",function(){return t.CHM(e),t.oxw(2).updateSuccess=!1}),t.qZA()}}function tn(o,l){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"cvc-avatar-uploader",37),t.NdJ("uploadComplete",function(s){return t.CHM(e),t.oxw(2).profileUploadComplete(s)}),t.qZA(),t.BQk()}}function nn(o,l){if(1&o&&(t.TgZ(0,"a",39),t._UZ(1,"i",40),t.qZA()),2&o){const e=t.oxw(2).ngIf;t.MGl("href","http://twitter.com/",e.twitterHandle,"",t.LSH)}}function en(o,l){1&o&&(t.ynx(0),t.YNc(1,nn,2,1,"a",38),t.BQk())}function on(o,l){if(1&o&&(t.TgZ(0,"a",39),t._UZ(1,"i",41),t.qZA()),2&o){const e=t.oxw(2).ngIf;t.MGl("href","http://facebook.com/",e.facebookProfile,"",t.LSH)}}function an(o,l){1&o&&(t.ynx(0),t.YNc(1,on,2,1,"a",38),t.BQk())}function rn(o,l){if(1&o&&(t.TgZ(0,"a",39),t._UZ(1,"i",42),t.qZA()),2&o){const e=t.oxw(2).ngIf;t.MGl("href","http://linkedin.com/in/",e.linkedinProfile,"",t.LSH)}}function sn(o,l){1&o&&(t.ynx(0),t.YNc(1,rn,2,1,"a",38),t.BQk())}function ln(o,l){if(1&o&&(t.TgZ(0,"a",39)(1,"span"),t._uU(2,"ID"),t.qZA()()),2&o){const e=t.oxw(2).ngIf;t.MGl("href","https://orcid.org/",e.orcid,"",t.LSH)}}function r(o,l){1&o&&(t.ynx(0),t.YNc(1,ln,3,1,"a",38),t.BQk())}function d(o,l){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).updateProfileModalVisible=!0}),t._uU(2," Edit Profile "),t.qZA(),t.BQk()}}function c(o,l){if(1&o&&(t.YNc(0,d,3,0,"ng-container",0),t.ALo(1,"ngrxPush")),2&o){const e=t.oxw(2);t.Q6J("ngIf",t.lcZ(1,1,e.ownProfile$))}}function M(o,l){if(1&o&&(t.ynx(0),t._uU(1),t.ALo(2,"enumToTitle"),t.BQk()),2&o){const e=t.oxw().ngIf;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.areaOfExpertise)," ")}}function U(o,l){1&o&&(t.ynx(0),t.TgZ(1,"span",44)(2,"i"),t._uU(3,"Unspecified"),t.qZA()(),t.BQk())}function J(o,l){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw().ngIf;t.xp6(1),t.hij(" ",null==e.country?null:e.country.name," ")}}function dn(o,l){1&o&&(t.ynx(0),t.TgZ(1,"span",44)(2,"i"),t._uU(3,"Unspecified"),t.qZA()(),t.BQk())}function un(o,l){1&o&&t._UZ(0,"cvc-organization-tag",46),2&o&&t.Q6J("org",l.$implicit)}function gn(o,l){if(1&o&&(t.ynx(0),t.YNc(1,un,1,1,"cvc-organization-tag",45),t.BQk()),2&o){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",e.organizations)}}function mn(o,l){1&o&&(t.ynx(0),t.TgZ(1,"span",44)(2,"i"),t._uU(3,"User is not a member of any Organizations."),t.qZA()(),t.BQk())}function fn(o,l){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw().ngIf;t.xp6(1),t.hij(" ",e.bio," ")}}function hn(o,l){1&o&&(t.ynx(0),t.TgZ(1,"span",44)(2,"i"),t._uU(3,"User has not provided a bio."),t.qZA()(),t.BQk())}function zn(o,l){1&o&&t._uU(0," Editor Conflict of Interest Statement ")}function Cn(o,l){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",50),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).updateCoiModalVisible=!0}),t._uU(2," Update COI "),t.qZA(),t.BQk()}}function vn(o,l){if(1&o&&(t.YNc(0,Cn,3,0,"ng-container",0),t.ALo(1,"ngrxPush")),2&o){const e=t.oxw(3);t.Q6J("ngIf",t.lcZ(1,1,e.ownProfile$))}}function Tn(o,l){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(3).ngIf;t.xp6(1),t.hij(" ",e.mostRecentConflictOfInterestStatement.coiStatement," ")}}function xn(o,l){1&o&&t._uU(0," I do not have any potential conflicts of interest. ")}function Mn(o,l){if(1&o&&(t.ynx(0),t.TgZ(1,"nz-descriptions-item",51),t._uU(2),t.ALo(3,"enumToTitle"),t.qZA(),t.TgZ(4,"nz-descriptions-item",52),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"nz-descriptions-item",53),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"nz-descriptions-item",54),t.YNc(11,Tn,2,1,"ng-container",55),t.YNc(12,xn,1,0,"ng-template",null,56,t.W1O),t.qZA(),t.BQk()),2&o){const e=t.MAs(13),a=t.oxw(2).ngIf;t.xp6(1),t.Q6J("nzSpan",1),t.xp6(1),t.hij(" ",t.lcZ(3,9,a.mostRecentConflictOfInterestStatement.coiStatus)," "),t.xp6(2),t.Q6J("nzSpan",1),t.xp6(1),t.hij(" ",t.xi3(6,11,a.mostRecentConflictOfInterestStatement.createdAt,"shortDate")," "),t.xp6(2),t.Q6J("nzSpan",1),t.xp6(1),t.hij(" ",t.xi3(9,14,a.mostRecentConflictOfInterestStatement.expiresAt,"shortDate")," "),t.xp6(2),t.Q6J("nzSpan",3),t.xp6(1),t.Q6J("ngIf",a.mostRecentConflictOfInterestStatement.coiPresent)("ngIfElse",e)}}function Un(o,l){1&o&&(t.ynx(0),t.TgZ(1,"nz-descriptions-item",51),t._uU(2,"None on file."),t.qZA(),t.BQk()),2&o&&(t.xp6(1),t.Q6J("nzSpan",3))}function bn(o,l){if(1&o&&(t.TgZ(0,"nz-descriptions",47),t.YNc(1,zn,1,0,"ng-template",null,48,t.W1O),t.YNc(3,vn,2,3,"ng-template",null,49,t.W1O),t.YNc(5,Mn,14,17,"ng-container",0),t.YNc(6,Un,3,1,"ng-container",0),t.qZA()),2&o){const e=t.MAs(2),a=t.MAs(4),s=t.oxw().ngIf;t.Q6J("nzTitle",e)("nzExtra",a)("nzColumn",3),t.xp6(5),t.Q6J("ngIf",s.mostRecentConflictOfInterestStatement),t.xp6(1),t.Q6J("ngIf",!s.mostRecentConflictOfInterestStatement)}}function yn(o,l){1&o&&(t.TgZ(0,"span"),t._uU(1,"Edit Profile"),t.qZA())}function An(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"cvc-user-profile-form",57),t.NdJ("profileUpdatedEvent",function(){return t.CHM(e),t.oxw(2).profileUpdated()}),t.qZA()}if(2&o){const e=t.oxw().ngIf;t.Q6J("user",e)}}function Zn(o,l){if(1&o){const e=t.EpF();t.ynx(0),t._UZ(1,"cvc-section-navigation",4),t.TgZ(2,"nz-page-header",5)(3,"nz-page-header-content"),t.YNc(4,Xt,1,0,"nz-alert",6),t.YNc(5,qt,1,0,"nz-alert",7),t.TgZ(6,"div",8)(7,"nz-row",9)(8,"nz-col",10)(9,"div",11),t._UZ(10,"cvc-user-avatar",12),t.qZA(),t.TgZ(11,"div",13)(12,"span",14)(13,"strong"),t._uU(14),t.qZA()(),t.YNc(15,tn,2,0,"ng-container",0),t.ALo(16,"ngrxPush"),t.qZA(),t.TgZ(17,"div",15)(18,"nz-space",16),t.YNc(19,en,2,0,"ng-container",0),t.YNc(20,an,2,0,"ng-container",0),t.YNc(21,sn,2,0,"ng-container",0),t.YNc(22,r,2,0,"ng-container",0),t.qZA()()(),t.TgZ(23,"nz-col",10)(24,"nz-card",17),t.YNc(25,c,2,3,"ng-template",null,18,t.W1O),t.TgZ(27,"nz-descriptions",19)(28,"nz-descriptions-item",20),t._uU(29),t.qZA(),t.TgZ(30,"nz-descriptions-item",21),t._uU(31),t.qZA(),t.TgZ(32,"nz-descriptions-item",22),t._uU(33),t.ALo(34,"enumToTitle"),t.qZA(),t.TgZ(35,"nz-descriptions-item",23),t.YNc(36,M,3,3,"ng-container",0),t.YNc(37,U,4,0,"ng-container",0),t.qZA(),t.TgZ(38,"nz-descriptions-item",24),t.YNc(39,J,2,1,"ng-container",0),t.YNc(40,dn,4,0,"ng-container",0),t.qZA(),t.TgZ(41,"nz-descriptions-item",25),t.YNc(42,gn,2,1,"ng-container",0),t.YNc(43,mn,4,0,"ng-container",0),t.qZA()(),t.TgZ(44,"nz-descriptions",26)(45,"nz-descriptions-item",27),t.YNc(46,fn,2,1,"ng-container",0),t.YNc(47,hn,4,0,"ng-container",0),t.qZA()(),t.YNc(48,bn,7,5,"nz-descriptions",28),t.qZA()(),t.TgZ(49,"nz-col",10)(50,"nz-card",29),t._UZ(51,"cvc-stats-card",30),t.qZA()()()(),t._UZ(52,"cvc-tab-navigation",31),t.ALo(53,"ngrxPush"),t.TgZ(54,"div",32),t._UZ(55,"router-outlet"),t.qZA()()(),t.TgZ(56,"nz-modal",1),t.NdJ("nzVisibleChange",function(s){return t.CHM(e),t.oxw().updateProfileModalVisible=s})("nzOnCancel",function(){return t.CHM(e),t.oxw().handleProfileModalCancel()}),t.YNc(57,yn,2,0,"ng-template",null,33,t.W1O),t.YNc(59,An,1,1,"ng-template",null,34,t.W1O),t.qZA(),t.BQk()}if(2&o){const e=l.ngIf,a=t.MAs(26),s=t.MAs(58),_=t.MAs(60),O=t.oxw();t.xp6(1),t.Q6J("displayName",e.displayName),t.xp6(3),t.Q6J("ngIf",O.uploadError),t.xp6(1),t.Q6J("ngIf",O.updateSuccess),t.xp6(2),t.Q6J("nzGutter",16),t.xp6(1),t.Q6J("nzSpan",3),t.xp6(2),t.Q6J("user",e)("size",128),t.xp6(4),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",t.lcZ(16,42,O.ownProfile$)),t.xp6(4),t.Q6J("ngIf",e.twitterHandle),t.xp6(1),t.Q6J("ngIf",e.facebookProfile),t.xp6(1),t.Q6J("ngIf",e.linkedinProfile),t.xp6(1),t.Q6J("ngIf",e.orcid),t.xp6(1),t.Q6J("nzSpan",13),t.xp6(1),t.Q6J("nzExtra",a),t.xp6(3),t.Q6J("nzColumn",7),t.xp6(1),t.Q6J("nzSpan",2),t.xp6(1),t.hij(" ",e.name," "),t.xp6(1),t.Q6J("nzSpan",2),t.xp6(1),t.hij(" ",e.username," "),t.xp6(1),t.Q6J("nzSpan",1),t.xp6(1),t.hij(" ",t.lcZ(34,44,e.role)," "),t.xp6(2),t.Q6J("nzSpan",2),t.xp6(1),t.Q6J("ngIf",e.areaOfExpertise),t.xp6(1),t.Q6J("ngIf",!e.areaOfExpertise),t.xp6(1),t.Q6J("nzSpan",2),t.xp6(1),t.Q6J("ngIf",e.country),t.xp6(1),t.Q6J("ngIf",!e.country),t.xp6(1),t.Q6J("nzSpan",5),t.xp6(1),t.Q6J("ngIf",e.organizations.length>0),t.xp6(1),t.Q6J("ngIf",0===e.organizations.length),t.xp6(2),t.Q6J("nzSpan",4),t.xp6(1),t.Q6J("ngIf",e.bio),t.xp6(1),t.Q6J("ngIf",!e.bio),t.xp6(1),t.Q6J("ngIf","EDITOR"===e.role||"ADMIN"===e.role),t.xp6(1),t.Q6J("nzSpan",8),t.xp6(2),t.Q6J("stats",e.statsHash),t.xp6(1),t.Q6J("tabs",t.lcZ(53,46,O.tabs$)),t.xp6(4),t.Q6J("nzVisible",O.updateProfileModalVisible)("nzContent",_)("nzTitle",s)("nzFooter",null)}}function Pn(o,l){1&o&&(t.TgZ(0,"span"),t._uU(1,"Update your Conflict of Interest Statement"),t.qZA())}function On(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"cvc-user-coi-form",58),t.NdJ("coiUpdatedEvent",function(){return t.CHM(e),t.oxw().coiUpdated()}),t.qZA()}}const En=[{path:"",component:(()=>{class o{constructor(e,a,s){this.gql=e,this.viewerService=a,this.route=s,this.ownProfile$=new st.X(!1),this.uploadError=!1,this.updateSuccess=!1,this.updateCoiModalVisible=!1,this.updateProfileModalVisible=!1,this.defaultTabs=[{routeName:"activity",tabLabel:"Activity",iconName:"civic-event"},{routeName:"evidence",tabLabel:"Evidence Items",iconName:"civic-evidence"},{routeName:"assertions",tabLabel:"Assertions",iconName:"civic-assertion"},{routeName:"source-suggestions",tabLabel:"Source Suggestions",iconName:"file-add"}],this.tabs$=new st.X(this.defaultTabs),this.routeSub=this.route.params.subscribe(_=>{this.queryRef=this.gql.watch({userId:+_.userId});let O=this.queryRef.valueChanges;this.loading$=O.pipe((0,rt.j)("loading"),(0,ot.O)(!0)),this.user$=O.pipe((0,rt.j)("data","user")),this.viewerSub=this.viewerService.viewer$.subscribe(_n=>{_n.id===+_.userId&&(this.tabs$.next([...this.defaultTabs,{routeName:"notifications",tabLabel:"Notifications",iconName:"bell"}]),this.ownProfile$.next(!0))})})}ngOnDestroy(){var e;this.routeSub.unsubscribe(),null===(e=this.viewerSub)||void 0===e||e.unsubscribe()}profileUploadComplete(e){var a;e?(null===(a=this.queryRef)||void 0===a||a.refetch(),this.updateSuccess=!0):this.uploadError=!0}coiUpdated(){var e;this.updateCoiModalVisible=!1,null===(e=this.queryRef)||void 0===e||e.refetch()}profileUpdated(){var e;this.updateProfileModalVisible=!1,null===(e=this.queryRef)||void 0===e||e.refetch()}handleCoiModalCancel(){this.updateCoiModalVisible=!1}handleProfileModalCancel(){this.updateProfileModalVisible=!1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(P.sLD),t.Y36(Qt.a),t.Y36(m.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["users-detail"]],decls:7,vars:7,consts:[[4,"ngIf"],[3,"nzVisible","nzContent","nzTitle","nzFooter","nzVisibleChange","nzOnCancel"],["coiModalTitle",""],["coiModalContent",""],[3,"displayName"],[1,"site-page-header"],["nzType","error","nzCloseable","","nzMessage","There was an error updating your profile image.",3,"nzOnClose",4,"ngIf"],["nzType","success","nzCloseable","","nzMessage","Profile image successfully updated.",3,"nzOnClose",4,"ngIf"],[1,"profile-content"],[3,"nzGutter"],[3,"nzSpan"],[1,"user-avatar"],[3,"user","size"],[1,"user-name"],["nz-typography",""],[1,"user-socials"],["nzAlign","center"],["nzTitle","Profile","nzSize","small",1,"user-profile",3,"nzExtra"],["updateProfile",""],["nzBordered","","nzLayout","vertical","nzSize","small",3,"nzColumn"],["nzTitle","Name",3,"nzSpan"],["nzTitle","User Name",3,"nzSpan"],["nzTitle","Role",3,"nzSpan"],["nzTitle","Area of Expertise",3,"nzSpan"],["nzTitle","Country",3,"nzSpan"],["nzTitle","Organizations",3,"nzSpan"],["nzBordered","","nzLayout","vertical","nzSize","small",1,"user-bio"],["nzTitle","Bio",3,"nzSpan"],["nzBordered","","class","user-coi","nzSize","small",3,"nzTitle","nzExtra","nzColumn",4,"ngIf"],["nzSize","small","nzTitle","Curation Stats"],["header","User Statistics",3,"stats"],[3,"tabs"],[1,"content"],["profileModalTitle",""],["profileModalContent",""],["nzType","error","nzCloseable","","nzMessage","There was an error updating your profile image.",3,"nzOnClose"],["nzType","success","nzCloseable","","nzMessage","Profile image successfully updated.",3,"nzOnClose"],[3,"uploadComplete"],["target","_blank",3,"href",4,"nzSpaceItem"],["target","_blank",3,"href"],["nz-icon","","nzType","twitter","nzTheme","outline"],["nz-icon","","nzType","facebook","nzTheme","outline"],["nz-icon","","nzType","linkedin","nzTheme","outline"],["nz-button","","nzSize","small","nzType","link",3,"click"],["nz-typography","","nzType","secondary"],[3,"org",4,"ngFor","ngForOf"],[3,"org"],["nzBordered","","nzSize","small",1,"user-coi",3,"nzTitle","nzExtra","nzColumn"],["coiTitle",""],["updateCoi",""],["nz-button","","nzType","link","nzSize","small",3,"click"],["nzTitle","Status",3,"nzSpan"],["nzTitle","Updated",3,"nzSpan"],["nzTitle","Expires",3,"nzSpan"],["nzTitle","Statement",3,"nzSpan"],[4,"ngIf","ngIfElse"],["noStatement",""],[3,"user","profileUpdatedEvent"],[3,"coiUpdatedEvent"]],template:function(e,a){if(1&e&&(t.YNc(0,Zn,61,48,"ng-container",0),t.ALo(1,"ngrxPush"),t.TgZ(2,"nz-modal",1),t.NdJ("nzVisibleChange",function(_){return a.updateCoiModalVisible=_})("nzOnCancel",function(){return a.handleCoiModalCancel()}),t.YNc(3,Pn,2,0,"ng-template",null,2,t.W1O),t.YNc(5,On,1,0,"ng-template",null,3,t.W1O),t.qZA()),2&e){const s=t.MAs(4),_=t.MAs(6);t.Q6J("ngIf",t.lcZ(1,5,a.user$)),t.xp6(2),t.Q6J("nzVisible",a.updateCoiModalVisible)("nzContent",_)("nzTitle",s)("nzFooter",null)}},directives:[p.O5,Lt.I,n.$O,n.u5,k.r,g.SK,g.t3,Rt.L,lt.ZU,Bt,h.NU,h.$1,u.Ls,K.w,C.bd,x.ix,A.R7,A.uj,p.sg,Ft.m,$t.z,Yt.P,m.lC,w.du,Kt,Vt.t],pipes:[f.fM,Gt.I,p.uU],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}[_nghost-%COMP%]     .user-profile .ant-card-body{padding:0;margin-top:1px}[_nghost-%COMP%]     .user-profile .ant-descriptions-view{border:none}[_nghost-%COMP%]     .user-profile nz-descriptions.is-editor .ant-descriptions-view{border-bottom:1px solid #f0f0f0}[_nghost-%COMP%]     .user-profile .user-bio .ant-descriptions-view{border-top:1px solid #f0f0f0}[_nghost-%COMP%]     .user-profile .user-coi .ant-descriptions-header{margin:0;padding:0 12px;border-top:1px solid #f0f0f0}[_nghost-%COMP%]     .user-profile .user-coi .ant-descriptions-header .ant-descriptions-title{padding:6px 0;font-weight:400;font-size:12px;font-weight:500}[_nghost-%COMP%]     .user-profile .user-coi .ant-descriptions-view{border-top:1px solid #f0f0f0}[_nghost-%COMP%]     .profile-content{margin-top:8px;margin-bottom:16px}[_nghost-%COMP%]     .content{margin-bottom:8px}[_nghost-%COMP%]     .user-avatar{text-align:center}[_nghost-%COMP%]     .user-socials{text-align:center}[_nghost-%COMP%]     .user-name{text-align:center;font-size:120%}"]}),o})(),data:{breadcrumb:"DISPLAYNAME"},children:[{path:"",pathMatch:"full",redirectTo:"activity"},{path:"evidence",component:gt,data:{breadcrumb:"Evidence"}},{path:"assertions",component:X,data:{breadcrumb:"Assertions"}},{path:"activity",component:j,data:{breadcrumb:"Activity"}},{path:"source-suggestions",component:Dt,data:{breadcrumb:"Source Suggestions"}},{path:"notifications",component:Nt,data:{breadcrumb:"Notifications"}}]}];let In=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[m.Bz.forChild(En)],m.Bz]}),o})(),Sn=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.ez,m.Bz,In,f.WG,k.L,g.Jb,n.KJ,h.zf,A.q6,C.vh,D.S,w.Qp,I.A2,u.PV,lt.ZJ,x.sL,S.e,pt,Z.s,T.D,v.c,z.H,y,E.L,_t.C]]}),o})()},3218:(F,b,i)=>{i.r(b),i.d(b,{UsersModule:()=>ln});var p=i(9808),T=i(325),n=i(5e3),m=i(8992),v=i(1945),h=i(1894),z=i(5017),x=i(2683),u=i(3618),t=i(8144),y=i(6042),A=i(655),E=i(3154),g=i(7630),Z=i(4987),f=i(591),C=i(8929),I=i(3240),D=i(373),w=i(5778),L=i(4290),k=i(1307),$=i(2198),V=i(4850),ct=i(13),G=i(7168),Y=i(7484),pt=i(5851),S=i(1132),_t=i(727),dt=i(7451),X=i(404),P=i(2166),q=i(8054),j=i(3075),ut=i(125),gt=i(392),tt=i(3667),W=i(8481),N=i(3388),R=i(6949),ot=i(1243),H=i(8625);function K(r,d){}function it(r,d){if(1&r&&(n.ynx(0),n.TgZ(1,"nz-card",5),n.YNc(2,K,0,0,"ng-template",6),n.qZA(),n.BQk()),2&r){n.oxw();const c=n.MAs(6),M=n.MAs(8),U=n.MAs(4);n.xp6(1),n.Q6J("nzTitle",c)("nzExtra",M),n.xp6(1),n.Q6J("ngTemplateOutlet",U)}}function mt(r,d){}const ft=function(r){return{height:r}};function at(r,d){if(1&r&&(n.TgZ(0,"div",7)(1,"nz-card",8),n.YNc(2,mt,0,0,"ng-template",6),n.qZA()()),2&r){const c=n.oxw(),M=n.MAs(6),U=n.MAs(8),J=n.MAs(4);n.Q6J("ngStyle",n.VKq(4,ft,c.cvcHeight)),n.xp6(1),n.Q6J("nzTitle",M)("nzExtra",U),n.xp6(1),n.Q6J("ngTemplateOutlet",J)}}function ht(r,d){if(1&r&&(n.ynx(0),n._uU(1),n.BQk()),2&r){const c=n.oxw().$implicit;n.xp6(1),n.hij(" ",c.name," ")}}function zt(r,d){1&r&&(n.TgZ(0,"i",39),n._uU(1,"Not specified"),n.qZA())}function Ct(r,d){if(1&r&&(n.TgZ(0,"div"),n._UZ(1,"cvc-tag-overflow",40),n.qZA()),2&r){const c=n.oxw().$implicit,M=n.oxw(2);n.xp6(1),n.Q6J("maxDisplayCount",1)("tags",c.organizations)("matchingText",M.orgNameInput)}}function vt(r,d){1&r&&(n.TgZ(0,"i",39),n._uU(1,"None specified"),n.qZA())}function Tt(r,d){if(1&r&&(n.ynx(0),n._uU(1),n.ALo(2,"timeago"),n.BQk()),2&r){const c=n.oxw().$implicit;n.xp6(1),n.hij(" ",n.lcZ(2,1,c.mostRecentActionTimestamp)," ")}}function xt(r,d){1&r&&n._uU(0," -- ")}function Mt(r,d){if(1&r&&(n.TgZ(0,"tr",31)(1,"td",23),n._UZ(2,"cvc-user-tag",32),n.qZA(),n.TgZ(3,"td",33),n.YNc(4,ht,2,1,"ng-container",0),n.YNc(5,zt,2,0,"ng-template",null,34,n.W1O),n.qZA(),n.TgZ(7,"td"),n.YNc(8,Ct,2,3,"div",0),n.YNc(9,vt,2,0,"ng-template",null,35,n.W1O),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.ALo(13,"enumToTitle"),n.qZA(),n.TgZ(14,"td",36),n.YNc(15,Tt,3,3,"ng-container",0),n.YNc(16,xt,1,0,"ng-template",null,37,n.W1O),n.qZA(),n.TgZ(18,"td",38),n._uU(19),n.qZA(),n.TgZ(20,"td",38),n._uU(21),n.qZA()()),2&r){const c=d.$implicit,M=n.MAs(6),U=n.MAs(10),J=n.MAs(17);n.xp6(2),n.Q6J("user",c),n.xp6(2),n.Q6J("ngIf",c.name)("ngIfElse",M),n.xp6(4),n.Q6J("ngIf",c.organizations.length>0)("ngIfElse",U),n.xp6(4),n.hij(" ",n.lcZ(13,10,c.role)," "),n.xp6(3),n.Q6J("ngIf",c.mostRecentActionTimestamp)("ngIfElse",J),n.xp6(4),n.hij(" ",c.statsHash.submittedEvidenceItems," "),n.xp6(2),n.hij(" ",c.statsHash.revisions," ")}}const Ut=function(){return{x:"680px",y:"800px"}};function bt(r,d){if(1&r){const c=n.EpF();n.TgZ(0,"nz-table",9,10),n.NdJ("cvcTableScrollOnScroll",function(U){return n.CHM(c),n.oxw().scrollEvent$.next(U)}),n.ALo(2,"ngrxPush"),n.ALo(3,"ngrxPush"),n.ALo(4,"ngrxPush"),n.ALo(5,"ngrxPush"),n.TgZ(6,"thead",11),n.NdJ("nzSortOrderChange",function(U){return n.CHM(c),n.oxw().sortChange$.next(U)}),n.TgZ(7,"tr",12)(8,"th",13),n._uU(9," User "),n.qZA(),n.TgZ(10,"th",14),n._uU(11," Name "),n.qZA(),n.TgZ(12,"th",15),n._uU(13," Organizations "),n.qZA(),n.TgZ(14,"th",16),n._uU(15," Role "),n.qZA(),n.TgZ(16,"th",17),n._uU(17," Last Action "),n.qZA(),n.TgZ(18,"th",18),n._UZ(19,"i",19),n._uU(20," Count "),n.qZA(),n.TgZ(21,"th",20),n._UZ(22,"i",21),n._uU(23," Count "),n.qZA()(),n.TgZ(24,"tr",22),n._UZ(25,"th",23),n.TgZ(26,"th")(27,"cvc-clearable-input-filter",24),n.NdJ("inputModelChange",function(U){return n.CHM(c),n.oxw().nameInput=U})("inputModelChange",function(){return n.CHM(c),n.oxw().filterChange$.next()}),n.qZA()(),n.TgZ(28,"th")(29,"cvc-clearable-input-filter",24),n.NdJ("inputModelChange",function(U){return n.CHM(c),n.oxw().orgNameInput=U})("inputModelChange",function(){return n.CHM(c),n.oxw().filterChange$.next()}),n.qZA()(),n.TgZ(30,"th")(31,"nz-select",25),n.NdJ("ngModelChange",function(){return n.CHM(c),n.oxw().filterChange$.next()})("ngModelChange",function(U){return n.CHM(c),n.oxw().roleInput=U}),n._UZ(32,"nz-option",26)(33,"nz-option",27)(34,"nz-option",28),n.qZA()(),n._UZ(35,"th")(36,"th",29)(37,"th",29),n.qZA()(),n.TgZ(38,"tbody"),n.YNc(39,Mt,22,12,"ng-template",30),n.qZA()()}if(2&r){const c=n.oxw();n.Q6J("nzData",n.lcZ(2,21,c.row$))("nzLoading",n.lcZ(3,23,c.initialLoading$))("cvcAutoHeightTable",25)("nzVirtualItemSize",29)("cvcTableScrollQueryRef",c.queryRef)("cvcTableScrollPageInfo",n.lcZ(4,25,c.pageInfo$))("cvcTableScrollToIndex",n.lcZ(5,27,c.scrollIndex$))("nzVirtualForTrackBy",c.trackByIndex)("nzScroll",n.DdM(29,Ut))("nzFrontPagination",!1)("nzShowPagination",!1),n.xp6(10),n.Q6J("nzColumnKey",c.sortColumns.Name)("nzSortFn",!0),n.xp6(4),n.Q6J("nzColumnKey",c.sortColumns.Role)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",c.sortColumns.LastAction)("nzSortFn",!0),n.xp6(11),n.Q6J("inputModel",c.nameInput),n.xp6(2),n.Q6J("inputModel",c.orgNameInput),n.xp6(2),n.Q6J("nzDropdownMatchSelectWidth",!1)("ngModel",c.roleInput)}}function yt(r,d){}function At(r,d){if(1&r&&(n.ynx(0),n.YNc(1,yt,0,0,"ng-template",6),n.BQk()),2&r){const c=n.oxw(2);n.xp6(1),n.Q6J("ngTemplateOutlet",c.cvcTitleTemplate)}}function Zt(r,d){if(1&r&&(n.ynx(0),n._uU(1),n.BQk()),2&r){const c=n.oxw(2);n.xp6(1),n.hij(" ",c.cvcTitle," ")}}function Pt(r,d){if(1&r&&(n.YNc(0,At,2,1,"ng-container",41),n.YNc(1,Zt,2,1,"ng-container",41),n.TgZ(2,"span",42),n._UZ(3,"cvc-table-counts",43),n.qZA()),2&r){const c=n.oxw();n.Q6J("ngIf",c.cvcTitleTemplate),n.xp6(1),n.Q6J("ngIf",c.cvcTitle),n.xp6(2),n.Q6J("cvcTableCountsConnection",c.connection$)}}function Ot(r,d){1&r&&(n.TgZ(0,"nz-tag",46),n._UZ(1,"i",47),n.TgZ(2,"span"),n._uU(3,"Loading\u2026"),n.qZA()())}function Et(r,d){if(1&r&&(n.YNc(0,Ot,4,0,"nz-tag",44),n.ALo(1,"ngrxPush"),n._UZ(2,"cvc-no-more-rows",45),n.ALo(3,"ngrxPush")),2&r){const c=n.oxw();n.Q6J("ngIf",n.lcZ(1,2,c.moreLoading$)),n.xp6(2),n.Q6J("cvcShowTag",n.lcZ(3,4,c.noMoreRows$))}}let B=class{constructor(d,c){this.gql=d,this.cdr=c,this.initialPageSize=35,this.isScrolling=!1,this.sortColumns=g.IRu,this.noMoreRows$=new f.X(!1),this.scrollEvent$=new f.X("stop"),this.sortChange$=new C.xQ,this.filterChange$=new C.xQ,this.scrollIndex$=new C.xQ}set initialUserFilters(d){d&&Object.assign(this,d)}ngOnInit(){this.queryRef=this.gql.watch({first:this.initialPageSize,sortBy:{column:g.IRu.LastAction,direction:g.SrV.Desc}}),this.result$=this.queryRef.valueChanges,this.initialLoading$=this.result$.pipe((0,D.j)("loading"),(0,w.x)(),(0,L.o)(d=>!1!==d,!0)),this.moreLoading$=this.result$.pipe((0,D.j)("loading"),(0,w.x)(),(0,k.T)(2)),this.connection$=this.result$.pipe((0,D.j)("data","users"),(0,$.h)(I.ep)),this.row$=this.connection$.pipe((0,D.j)("edges"),(0,$.h)(I.ep),(0,V.U)(d=>d.map(c=>c.node))),this.pageInfo$=this.connection$.pipe((0,D.j)("pageInfo"),(0,$.h)(I.ep)),this.sortChange$.pipe((0,Z.t)(this)).subscribe(d=>{this.queryRef.refetch({sortBy:(0,E._)(d)})}),this.filterChange$.pipe((0,ct.b)(500),(0,Z.t)(this)).subscribe(()=>{this.refresh()}),this.scrollEvent$.pipe((0,V.U)(d=>"stop"!==d),(0,w.x)(),(0,Z.t)(this)).subscribe(d=>{this.isScrolling=d,this.cdr.detectChanges()}),this.scrollEvent$.pipe((0,$.h)(d=>"bottom"===d),(0,G.M)(this.pageInfo$),(0,V.U)(([d,c])=>c),(0,Z.t)(this)).subscribe(d=>{d.hasNextPage||(this.noMoreRows$.next(!0),this.cdr.detectChanges(),setInterval(()=>this.noMoreRows$.next(!1)))})}refresh(){this.queryRef.refetch({userName:this.nameInput?this.nameInput:void 0,orgName:this.orgNameInput?{name:this.orgNameInput}:void 0,userRole:this.roleInput?this.roleInput:void 0}).then(()=>this.scrollIndex$.next(0)),this.cdr.detectChanges()}trackByIndex(d,c){return c.id}};B.\u0275fac=function(d){return new(d||B)(n.Y36(g.tJ6),n.Y36(n.sBO))},B.\u0275cmp=n.Xpm({type:B,selectors:[["cvc-users-table"]],inputs:{cvcHeight:"cvcHeight",cvcTitleTemplate:"cvcTitleTemplate",cvcTitle:"cvcTitle",initialPageSize:"initialPageSize",initialUserFilters:"initialUserFilters"},decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["setHeightCard",""],["table",""],["titleTemplate",""],["extraTemplate",""],["nzSize","small","cvcAutoHeightCard","","cvcAutoHeightTarget","viewport",3,"nzTitle","nzExtra"],[3,"ngTemplateOutlet"],[1,"card-container",3,"ngStyle"],["cvcAutoHeightCard","","nzSize","small",3,"nzTitle","nzExtra"],["nzSize","small","cvcTableScroll","",3,"nzData","nzLoading","cvcAutoHeightTable","nzVirtualItemSize","cvcTableScrollQueryRef","cvcTableScrollPageInfo","cvcTableScrollToIndex","nzVirtualForTrackBy","nzScroll","nzFrontPagination","nzShowPagination","cvcTableScrollOnScroll"],["virtualTable",""],[3,"nzSortOrderChange"],[1,"col-header-row"],["nzWidth","200px","nzLeft",""],["nzWidth","150px",3,"nzColumnKey","nzSortFn"],["nzWidth","300px"],["nzWidth","80px",3,"nzColumnKey","nzSortFn"],["nzWidth","85px","nzAlign","right",3,"nzColumnKey","nzSortFn"],["nzWidth","75px","nzRight","","nzAlign","right","nz-tooltip","","nzTooltipTitle","Evidence Count"],["nz-icon","","nzType","civic-evidence"],["nzWidth","75px","nzRight","","nzAlign","right","nz-tooltip","","nzTooltipTitle","Revision Count"],["nz-icon","","nzType","civic-revision"],[1,"filter-row"],["nzLeft",""],[3,"inputModel","inputModelChange"],["nzAllowClear","","nzSize","small","nzPlaceHolder","Any",3,"nzDropdownMatchSelectWidth","ngModel","ngModelChange"],["nzValue","ADMIN","nzLabel","Admin"],["nzValue","CURATOR","nzLabel","Curator"],["nzValue","EDITOR","nzLabel","Editor"],["nzRight",""],["nz-virtual-scroll",""],[1,"data-row"],[3,"user"],[1,"overflow-ellipsis"],["nameElse",""],["orgElse",""],["nzAlign","right"],["eventElse",""],["nzRight","","nzAlign","right"],["nz-typography","","nzType","secondary"],["tagType","organization",3,"maxDisplayCount","tags","matchingText"],[4,"ngIf"],[1,"table-info"],[3,"cvcTableCountsConnection"],["nzColor","processing",4,"ngIf"],[3,"cvcShowTag"],["nzColor","processing"],["nz-icon","","nzType","sync","nzSpin",""]],template:function(d,c){if(1&d&&(n.YNc(0,it,3,3,"ng-container",0),n.YNc(1,at,3,6,"ng-template",null,1,n.W1O),n.YNc(3,bt,40,30,"ng-template",null,2,n.W1O),n.YNc(5,Pt,4,3,"ng-template",null,3,n.W1O),n.YNc(7,Et,4,6,"ng-template",null,4,n.W1O)),2&d){const M=n.MAs(2);n.Q6J("ngIf",!c.cvcHeight)("ngIfElse",M)}},directives:[p.O5,Y.bd,pt.D,p.tP,p.PC,S.N8,_t.y,dt.q,S.Om,S.$Z,S.Uo,S._C,S.qn,S.qD,S.UX,X.SY,x.w,z.Ls,P.p,q.Vq,j.JJ,j.On,q.Ip,S.p0,S.zu,ut.I,u.ZU,gt.T,tt.B,W.j,N.H],pipes:[R.fM,ot.I,H.wr],styles:["nz-card[_ngcontent-%COMP%]:first-of-type     .ant-card-body{padding:0;margin-top:1px}.table-info[_ngcontent-%COMP%]{margin-left:.5rem}tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]{white-space:nowrap}tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell.align-right[_ngcontent-%COMP%]     .ant-table-column-title{text-align:right}tr.filter-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]{padding:3px 4px}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]{white-space:nowrap}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]   .anticon.attribute-icon[_ngcontent-%COMP%]{color:#595959}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell.overflow-ellipsis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell.button-cell[_ngcontent-%COMP%]{padding:0}tr.data-row[_ngcontent-%COMP%]   td.align-right[_ngcontent-%COMP%], tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%], tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%], tr.filter-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%]{text-align:right}[_nghost-%COMP%]{display:block}"]}),B=(0,A.gn)([(0,Z.c)()],B);var It=i(160);function St(r,d){1&r&&(n.TgZ(0,"a",13),n._UZ(1,"i",14),n._uU(2," View Contributor Docs "),n.qZA())}const Nt=[{path:"",component:(()=>{class r{constructor(){}}return r.\u0275fac=function(c){return new(c||r)},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-users"]],decls:1,vars:0,template:function(c,M){1&c&&n._UZ(0,"router-outlet")},directives:[T.lC],styles:[""]}),r})(),data:{displayName:"Contributors"},children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(c){return new(c||r)},r.\u0275cmp=n.Xpm({type:r,selectors:[["users-home"]],decls:19,vars:5,consts:[[1,"site-page-header"],[1,"header-content"],["nzFlex","64px",1,"header-icon"],["nz-icon","","nzTheme","twotone","nzType","civic-curator",3,"nzTwotoneColor"],["nzFlex","0 1 600px",1,"header-description"],["nz-typography","","nzEllipsis","","nzExpandable","",3,"nzEllipsisRows"],["nzFlex","auto",1,"header-links"],["nzDirection","vertical",1,"docs-buttons"],["nz-button","","href","https://civic.readthedocs.io/en/latest/using/users.html","target","_blank","nzSize","small","nzBlock","",4,"nzSpaceItem"],["nz-row",""],["nz-col","",3,"nzSpan"],[1,"content"],["cvcTitle","Browse All Contributors"],["nz-button","","href","https://civic.readthedocs.io/en/latest/using/users.html","target","_blank","nzSize","small","nzBlock",""],["nz-icon","","nzType","link","nzTheme","outline"]],template:function(c,M){1&c&&(n._UZ(0,"cvc-section-navigation"),n.TgZ(1,"nz-page-header",0)(2,"nz-page-header-content")(3,"nz-row",1)(4,"nz-col",2),n._UZ(5,"i",3),n.ALo(6,"entityColor"),n.qZA(),n.TgZ(7,"nz-col",4)(8,"h2"),n._uU(9,"Contributors"),n.qZA(),n.TgZ(10,"p",5),n._uU(11,"CIViC depends on its users to add to its knowledgebase and curate its content. Anyone may join CIViC as a Curator and begin contributing."),n.qZA()(),n.TgZ(12,"nz-col",6)(13,"nz-space",7),n.YNc(14,St,3,0,"a",8),n.qZA()()(),n.TgZ(15,"div",9)(16,"div",10)(17,"div",11),n._UZ(18,"cvc-users-table",12),n.qZA()()()()()),2&c&&(n.xp6(5),n.Q6J("nzTwotoneColor",n.lcZ(6,3,"Curator")),n.xp6(5),n.Q6J("nzEllipsisRows",2),n.xp6(6),n.Q6J("nzSpan",24))},directives:[m.I,v.$O,v.u5,h.SK,h.t3,z.Ls,x.w,u.ZU,t.NU,t.$1,y.ix,B],pipes:[It.a],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),r})(),data:{displayName:"Home"}},{path:":userId",data:{breadcrumb:"DISPLAYNAME"},children:[{path:"",loadChildren:()=>Promise.resolve().then(i.bind(i,7600)).then(r=>r.UsersDetailModule)}]}]}];let Jt=(()=>{class r{}return r.\u0275fac=function(c){return new(c||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[[T.Bz.forChild(Nt)],T.Bz]}),r})();var Dt=i(9476),rt=i(4125),st=i(4989),Qt=i(271),Lt=i(8525),Rt=i(897),lt=i(7946),nt=i(6905),Bt=i(7026),Ft=i(3111),$t=i(1433),Yt=i(9240),Q=i(7345);let Wt=(()=>{class r{}return r.\u0275fac=function(c){return new(c||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[[p.ez,j.u5,R.WG,y.sL,Y.vh,z.PV,q.LV,S.HQ,W.X,X.cg,u.ZJ,Ft.n,$t.c,rt.k,st.X,Qt.y,Dt.L,nt.s,Lt.T,Yt.w,Rt.$,lt.x,Q.W,H.$L.forChild({formatter:{useClass:Bt.x,provide:H.KP}})]]}),r})();var et=i(5630);let wt=(()=>{class r{}return r.\u0275fac=function(c){return new(c||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[[p.ez,v.KJ,z.PV,h.Jb,y.sL,t.zf,u.ZJ,et.D,Wt,nt.s]]}),r})();var kt=i(9441);let jt=(()=>{class r{}return r.\u0275fac=function(c){return new(c||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[[p.ez,z.PV,kt.s]]}),r})();var Ht=i(7600),Kt=i(5291);let Vt=(()=>{class r{}return r.\u0275fac=function(c){return new(c||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[[p.ez,Kt.t]]}),r})();var Gt=i(767);let Xt=(()=>{class r{}return r.\u0275fac=function(c){return new(c||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[[p.ez,Gt.Q]]}),r})();var qt=i(2832);let tn=(()=>{class r{}return r.\u0275fac=function(c){return new(c||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[[p.ez,qt.W]]}),r})();var nn=i(7525),en=i(1150),on=i(6114),an=i(2712),rn=i(3212);let sn=(()=>{class r{}return r.\u0275fac=function(c){return new(c||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[[p.ez,j.u5,R.WG,X.cg,nn.j,h.Jb,y.sL,Y.vh,z.PV,on.Wr,an.FT,rn.E,nt.s,en.N]]}),r})(),ln=(()=>{class r{}return r.\u0275fac=function(c){return new(c||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[[p.ez,T.Bz,R.WG,Jt,wt,jt,Ht.UsersDetailModule,Vt,Xt,tn,sn]]}),r})()}}]);