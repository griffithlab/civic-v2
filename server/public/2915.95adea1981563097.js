"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[2915],{9409:(Z,L,n)=>{n.d(L,{z:()=>e});var m=n(47157),r=n(73664);let e=(()=>{class u{transform(o){return void 0!==o&&(0,m.FG)(o)}static#t=this.\u0275fac=function(f){return new(f||u)};static#n=this.\u0275pipe=r.EJ8({name:"canPerformEndorsementActions",type:u,pure:!0})}return u})()},13397:(Z,L,n)=>{n.d(L,{A:()=>e});var m=n(47157),r=n(73664);let e=(()=>{class u{transform(o,f,E,M){if(void 0!==o){if("create"===f)return this.getCreateTooltip(o,E);{const O=E.endorsements.nodes.find(D=>D.id===M);if(void 0!==O){if("revoke"===f)return this.getRevokeTooltip(o,O);if("approveChanges"===f)return this.getApproveChangesTooltip(o,O)}}}}getCreateTooltip(o,f){if(o.mostRecentOrg){if((0,m.pb)(o,f))return`Endorse ${f.name} under the authority of ${o.mostRecentOrg.name}`;if(!(0,m.G2)(f))return`${f.name} must be accepted and unflagged to be endorsed.`;if(!(0,m.KP)(o)){let E=`Your organization, ${o.mostRecentOrg.name}, does not have endorsement authority.`;const M=(0,m.tT)(o,f);return M&&M.length>0&&(E+=` You may switch to ${M[0].name}, which does have endorsement authority, to endorse this assertion.`),E}if((0,m.pl)(o,f)){let E=`${f.name} has already been endorsed by ${o.mostRecentOrg.name}.`;const M=(0,m.tT)(o,f);return M&&M.length>0&&(E+=` You may switch to ${M[0].name}, which also has endorsement authority and no current endorsements.`),E}}}getRevokeTooltip(o,f){if((0,m.VG)(o,f))return`Revoke endorsement of ${f.assertion.name} under the authority of ${f.organization.name}.`;if(!(0,m.FG)(o))return"You do not have privileges to perform endorsement actions.";if(!(0,m.bd)(f))return"Only live endorsements may be revoked.";if(!(0,m.j9)(o,f)){let E=`${f.assertion.name} may only be revoked by a ${f.organization.name} editor with endorsing privileges.`;return(0,m.vx)(o,f)&&(E+=" As you are a member, you may switch your organization and revoke this endorsement."),E}}getApproveChangesTooltip(o,f){if((0,m.iU)(o,f))return`Approve changes to ${f.assertion.name} under the authority of ${f.organization.name}.`;if(!(0,m.FG)(o))return"You do not have permission to perform endorsement actions.";if(!(0,m.bd)(f))return"Only endorsements under review have changes that may be approved.";if(!(0,m.G2)(f.assertion)){let E=`${f.assertion.name} must be accepted and unflagged for its changes to be approved.`;return f.assertion.flags.totalCount>0&&(E+=` Resolve active flag${f.assertion.flags.totalCount>1?"s":""} to approve changes.`),E}if(!(0,m.j9)(o,f)){let E=`Changes to ${f.assertion.name} may only be approved under the authority of ${f.organization.name}.`;return(0,m.vx)(o,f)&&(E+=" As you are a member, may switch your organization and approve changes to this assertion."),E}}static#t=this.\u0275fac=function(f){return new(f||u)};static#n=this.\u0275pipe=r.EJ8({name:"endorsementActionTooltip",type:u,pure:!0})}return u})()},17481:(Z,L,n)=>{n.d(L,{$:()=>Q,u:()=>W});var m=n(31635),r=n(87941),e=n(40372),u=n(17035),g=n(73664),o=n(48728),f=n(17705),E=n(89079),M=n(84341),O=n(66376),D=n(57806),z=n(25701),l=n(25930),x=n(41951);const b=["switchElement"];function X(G,K){1&G&&g.nrm(0,"nz-icon",3)}function Y(G,K){if(1&G&&(g.qex(0),g.EFF(1),g.bVm()),2&G){const y=g.XpG(2);g.R7$(),g.JRh(y.nzCheckedChildren)}}function s(G,K){if(1&G&&g.DNE(0,Y,2,1,"ng-container",6),2&G){const y=g.XpG();g.Y8G("nzStringTemplateOutlet",y.nzCheckedChildren)}}function N(G,K){if(1&G&&(g.qex(0),g.EFF(1),g.bVm()),2&G){const y=g.XpG(2);g.R7$(),g.JRh(y.nzUnCheckedChildren)}}function H(G,K){if(1&G&&g.DNE(0,N,2,1,"ng-container",6),2&G){const y=g.XpG();g.Y8G("nzStringTemplateOutlet",y.nzUnCheckedChildren)}}let W=(()=>{let G,K=[],y=[];return class rt{static#t=(()=>{const C="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;G=[(0,O.H4)()],(0,m.G4)(null,null,G,{kind:"field",name:"nzSize",static:!1,private:!1,access:{has:P=>"nzSize"in P,get:P=>P.nzSize,set:(P,t)=>{P.nzSize=t}},metadata:C},K,y),C&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C})})();_nzModuleName="switch";nzConfigService=(0,o.WQX)(O.yx);el=(0,o.WQX)(g.aKT).nativeElement;ngZone=(0,o.WQX)(g.SKi);cdr=(0,o.WQX)(f.gRc);focusMonitor=(0,o.WQX)(r.F);directionality=(0,o.WQX)(e.D);destroyRef=(0,o.WQX)(o.abz);isChecked=!1;onChange=()=>{};onTouched=()=>{};switchElement;nzLoading=!1;nzDisabled=!1;nzControl=!1;nzCheckedChildren=null;nzUnCheckedChildren=null;nzSize=(0,m.zF)(this,K,"default");nzId=((0,m.zF)(this,y),null);dir="ltr";isNzDisableFirstChange=!0;updateValue(C){this.isChecked!==C&&(this.isChecked=C,this.onChange(this.isChecked))}focus(){this.focusMonitor.focusVia(this.switchElement.nativeElement,"keyboard")}blur(){this.switchElement.nativeElement.blur()}constructor(){this.destroyRef.onDestroy(()=>{this.focusMonitor.stopMonitoring(this.switchElement.nativeElement)})}ngOnInit(){this.directionality.change.pipe((0,E.pQ)(this.destroyRef)).subscribe(C=>{this.dir=C,this.cdr.detectChanges()}),this.dir=this.directionality.value,(0,z.wN)(this.el,"click").pipe((0,E.pQ)(this.destroyRef)).subscribe(C=>{C.preventDefault(),!(this.nzControl||this.nzDisabled||this.nzLoading)&&this.ngZone.run(()=>{this.updateValue(!this.isChecked),this.cdr.markForCheck()})}),(0,z.wN)(this.switchElement.nativeElement,"keydown").pipe((0,E.pQ)(this.destroyRef)).subscribe(C=>{if(this.nzControl||this.nzDisabled||this.nzLoading)return;const{keyCode:P}=C;P!==u.L&&P!==u.R&&P!==u.S&&P!==u.c||(C.preventDefault(),this.ngZone.run(()=>{P===u.L?this.updateValue(!1):P===u.R?this.updateValue(!0):(P===u.S||P===u.c)&&this.updateValue(!this.isChecked),this.cdr.markForCheck()}))})}ngAfterViewInit(){this.focusMonitor.monitor(this.switchElement.nativeElement,!0).pipe((0,E.pQ)(this.destroyRef)).subscribe(C=>{C||Promise.resolve().then(()=>this.onTouched())})}writeValue(C){this.isChecked=C,this.cdr.markForCheck()}registerOnChange(C){this.onChange=C}registerOnTouched(C){this.onTouched=C}setDisabledState(C){this.nzDisabled=this.isNzDisableFirstChange&&this.nzDisabled||C,this.isNzDisableFirstChange=!1,this.cdr.markForCheck()}static \u0275fac=function(P){return new(P||rt)};static \u0275cmp=g.VBU({type:rt,selectors:[["nz-switch"]],viewQuery:function(P,t){if(1&P&&g.GBs(b,7),2&P){let S;g.mGM(S=g.lsd())&&(t.switchElement=S.first)}},inputs:{nzLoading:[2,"nzLoading","nzLoading",f.L39],nzDisabled:[2,"nzDisabled","nzDisabled",f.L39],nzControl:[2,"nzControl","nzControl",f.L39],nzCheckedChildren:"nzCheckedChildren",nzUnCheckedChildren:"nzUnCheckedChildren",nzSize:"nzSize",nzId:"nzId"},exportAs:["nzSwitch"],features:[g.Jv_([{provide:M.kq,useExisting:(0,o.Rfq)(()=>rt),multi:!0}])],decls:8,vars:15,consts:[["switchElement",""],["nz-wave","","type","button",1,"ant-switch",3,"disabled","nzWaveExtraNode"],[1,"ant-switch-handle"],["nzType","loading",1,"ant-switch-loading-icon"],[1,"ant-switch-inner"],[1,"ant-click-animating-node"],[4,"nzStringTemplateOutlet"]],template:function(P,t){1&P&&(g.j41(0,"button",1,0)(2,"span",2),g.nVh(3,X,1,0,"nz-icon",3),g.k0s(),g.j41(4,"span",4),g.nVh(5,s,1,1,"ng-container")(6,H,1,1,"ng-container"),g.k0s(),g.nrm(7,"div",5),g.k0s()),2&P&&(g.AVh("ant-switch-checked",t.isChecked)("ant-switch-loading",t.nzLoading)("ant-switch-disabled",t.nzDisabled)("ant-switch-small","small"===t.nzSize)("ant-switch-rtl","rtl"===t.dir),g.Y8G("disabled",t.nzDisabled)("nzWaveExtraNode",!0),g.BMQ("id",t.nzId),g.R7$(3),g.vxM(t.nzLoading?3:-1),g.R7$(2),g.vxM(t.isChecked?5:6))},dependencies:[l.o7,l.p,x.Y3,x.Dn,D.C,D.m],encapsulation:2,changeDetection:0})}})(),Q=(()=>{class G{static \u0275fac=function(U){return new(U||G)};static \u0275mod=g.$C({type:G});static \u0275inj=o.G2t({imports:[W]})}return G})()},22041:(Z,L,n)=>{n.r(L),n.d(L,{AssertionsModule:()=>R});var m=n(72200),r=n(38132),e=n(7391),u=n(3062),g=n(97529),o=n(17481),f=n(97660),E=n(41951),M=n(14124),O=n(50513),D=n(97685),z=n(64917),l=n(73664),x=n(48728);let b=(()=>{class h{static#t=this.\u0275fac=function(T){return new(T||h)};static#n=this.\u0275mod=l.$C({type:h});static#e=this.\u0275inj=x.G2t({imports:[m.MD,r.iI,E.Y3,e.kT,u.ZJ,g.f3,o.$,O.Z,D.pc,z.i,f.u,M.C]})}return h})();var X=n(41305),Y=n(61774),s=n(16389),N=n(25930),H=n(14441),k=n(29765),W=n(83075);function Q(h,tt){1&h&&(l.j41(0,"button",17),l.nrm(1,"i",18),l.EFF(2," Submit New Assertion "),l.k0s())}function G(h,tt){if(1&h&&(l.qex(0),l.DNE(1,Q,3,0,"button",16),l.bVm()),2&h){const j=tt.ngrxLet;l.R7$(),l.Y8G("ngIf",j.signedIn)}}function K(h,tt){if(1&h&&l.DNE(0,G,2,1,"ng-container",15),2&h){const j=l.XpG();l.Y8G("ngrxLet",j.viewer$)}}function y(h,tt){1&h&&(l.j41(0,"a",19),l.nrm(1,"i",20),l.EFF(2," View Assertion Model Docs "),l.k0s())}function U(h,tt){1&h&&(l.j41(0,"a",21),l.nrm(1,"i",20),l.EFF(2," View Assertion Curation Docs "),l.k0s())}let C=(()=>{class h{constructor(j){this.viewerService=j,this.viewer$=this.viewerService.viewer$}ngOnInit(){}static#t=this.\u0275fac=function(T){return new(T||h)(l.rXU(X.q))};static#n=this.\u0275cmp=l.VBU({type:h,selectors:[["assertions-home"]],standalone:!1,decls:22,vars:6,consts:[["assertionActions",""],[3,"actionsTpl"],[1,"site-page-header"],[1,"header-content"],["nzFlex","64px",1,"header-icon"],["nz-icon","","nzTheme","twotone","nzType","civic-assertion",3,"nzTwotoneColor"],["nzFlex","0 1 600px",1,"header-description"],["nz-typography","","nzEllipsis","","nzExpandable","",3,"nzEllipsisRows"],["nzFlex","auto",1,"header-links"],["nzDirection","vertical",1,"docs-buttons"],["nz-button","","href","https://civic.readthedocs.io/en/latest/model/assertions.html","target","_blank","nzSize","small","nzBlock","",4,"nzSpaceItem"],["nz-button","","href","https://civic.readthedocs.io/en/latest/curating/assertions.html","target","_blank","nzSize","small","nzBlock","",4,"nzSpaceItem"],[3,"nzSpan"],[1,"content"],["cvcTitle","Browse All Assertions"],[4,"ngrxLet"],["routerLink","/assertions/add/submit","nz-button","","nzSize","small",4,"ngIf"],["routerLink","/assertions/add/submit","nz-button","","nzSize","small"],["nz-icon","","nzType","plus-circle"],["nz-button","","href","https://civic.readthedocs.io/en/latest/model/assertions.html","target","_blank","nzSize","small","nzBlock",""],["nz-icon","","nzType","link","nzTheme","outline"],["nz-button","","href","https://civic.readthedocs.io/en/latest/curating/assertions.html","target","_blank","nzSize","small","nzBlock",""]],template:function(T,d){if(1&T&&(l.nrm(0,"cvc-section-navigation",1),l.DNE(1,K,1,1,"ng-template",null,0,l.C5r),l.j41(3,"nz-page-header",2)(4,"nz-page-header-content")(5,"nz-row",3)(6,"nz-col",4),l.nrm(7,"i",5),l.nI1(8,"entityColor"),l.k0s(),l.j41(9,"nz-col",6)(10,"h2"),l.EFF(11,"Assertions"),l.k0s(),l.j41(12,"p",7),l.EFF(13," A CIViC Assertion summarizes a collection of Evidence Items that cover predictive/therapeutic, diagnostic, prognostic or predisposing clinical information for a variant in a specific cancer context. "),l.k0s()(),l.j41(14,"nz-col",8)(15,"nz-space",9),l.DNE(16,y,3,0,"a",10)(17,U,3,0,"a",11),l.k0s()()(),l.j41(18,"nz-row")(19,"nz-col",12)(20,"div",13),l.nrm(21,"cvc-assertions-table",14),l.k0s()()()()()),2&T){const p=l.sdS(2);l.Y8G("actionsTpl",p),l.R7$(7),l.Y8G("nzTwotoneColor",l.bMT(8,4,"Assertion")),l.R7$(5),l.Y8G("nzEllipsisRows",2),l.R7$(7),l.Y8G("nzSpan",24)}},dependencies:[m.bT,Y.Nj,r.Wk,E.Dn,e.Di,u.WB,u.zR,g.Uq,g.e,O.a,s.c,N.p,D.U5,D.Dq,H.z,k.n,W.R],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]})}return h})();var P=n(56609);const S=[{path:"",component:(()=>{class h{constructor(){}static#t=this.\u0275fac=function(T){return new(T||h)};static#n=this.\u0275cmp=l.VBU({type:h,selectors:[["app-assertions"]],standalone:!1,decls:1,vars:0,template:function(T,d){1&T&&l.nrm(0,"router-outlet")},dependencies:[P.n3],encapsulation:2})}return h})(),children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:C,data:{breadcrumb:"Home"}},{path:"add",loadChildren:()=>Promise.all([n.e(2076),n.e(7240)]).then(n.bind(n,57240)).then(h=>h.AssertionAddModule),data:{breadcrumb:"Add"}},{path:":assertionId",data:{breadcrumb:"DISPLAYNAME"},children:[{path:"",loadChildren:()=>Promise.all([n.e(8414),n.e(6161),n.e(262),n.e(1467),n.e(9991),n.e(7673)]).then(n.bind(n,30054)).then(h=>h.AssertionsDetailModule)},{path:"revise",loadChildren:()=>Promise.resolve().then(n.bind(n,69065)).then(h=>h.AssertionsReviseModule),data:{breadcrumb:"Revise"}}]}]},{path:"revise",loadChildren:()=>Promise.all([n.e(2076),n.e(7240)]).then(n.bind(n,57240)).then(h=>h.AssertionAddModule)}];let V=(()=>{class h{static#t=this.\u0275fac=function(T){return new(T||h)};static#n=this.\u0275mod=l.$C({type:h});static#e=this.\u0275inj=x.G2t({imports:[r.iI.forChild(S),b,r.iI]})}return h})();var w=n(69065),q=n(82242),et=n(55780);let B=(()=>{class h{static#t=this.\u0275fac=function(T){return new(T||h)};static#n=this.\u0275mod=l.$C({type:h});static#e=this.\u0275inj=x.G2t({imports:[m.MD,et.E,q.i]})}return h})(),R=(()=>{class h{static#t=this.\u0275fac=function(T){return new(T||h)};static#n=this.\u0275mod=l.$C({type:h});static#e=this.\u0275inj=x.G2t({imports:[m.MD,V,w.AssertionsReviseModule,B]})}return h})()},25128:(Z,L,n)=>{n.d(L,{K:()=>O});var m=n(72200),r=n(56506),e=n(73664),u=n(84341),g=n(21011);const f={name:"comment-textarea",component:(()=>{class D extends r.PU{constructor(){super(...arguments),this.defaultOptions={defaultValue:"",validation:{messages:{minlength:(l,x)=>`Comments must be at least ${x.templateOptions?.minLength} characters in length.`}},templateOptions:{rows:4}}}static#t=this.\u0275fac=(()=>{let l;return function(b){return(l||(l=e.xGo(D)))(b||D)}})();static#n=this.\u0275cmp=e.VBU({type:D,selectors:[["comment-textarea-type"]],standalone:!1,features:[e.Vt3],decls:1,vars:2,consts:[["nz-input","",3,"formControl","formlyAttributes"]],template:function(x,b){1&x&&e.nrm(0,"textarea",0),2&x&&e.Y8G("formControl",b.formControl)("formlyAttributes",b.field)},dependencies:[u.me,u.BC,u.l_,r.cU,g.Sy],encapsulation:2,changeDetection:0})}return D})(),wrappers:["form-field"]};var E=n(38927),M=n(48728);let O=(()=>{class D{static#t=this.\u0275fac=function(x){return new(x||D)};static#n=this.\u0275mod=e.$C({type:D});static#e=this.\u0275inj=M.G2t({imports:[m.MD,u.X1,r.qy.forChild({types:[f]}),E.PQ,g.j]})}return D})()},28134:(Z,L,n)=>{n.d(L,{l:()=>s});var m=n(72200),r=n(38132),e=n(1236),u=n(75699),g=n(41951),o=n(47086),f=n(22142),E=n(51209),M=n(64917),O=n(25703),D=n(62e3),z=n(38415),l=n(27556),x=n(73664),b=n(48728);let X=(()=>{class N{static#t=this.\u0275fac=function(W){return new(W||N)};static#n=this.\u0275mod=x.$C({type:N});static#e=this.\u0275inj=b.G2t({imports:[m.MD,O.Ti,D.WF,g.Y3,E.k,o.C,f.x,M.i,z.g,l.F]})}return N})();var Y=n(34994);let s=(()=>{class N{static#t=this.\u0275fac=function(W){return new(W||N)};static#n=this.\u0275mod=x.$C({type:N});static#e=this.\u0275inj=b.G2t({imports:[m.MD,r.iI,e.MC,u.T,g.Y3,X,M.i,Y.a]})}return N})()},43424:(Z,L,n)=>{n.d(L,{T:()=>e});var m=n(47157),r=n(73664);let e=(()=>{class u{transform(o,f){return void 0!==o&&(0,m.pb)(o,f)}static#t=this.\u0275fac=function(f){return new(f||u)};static#n=this.\u0275pipe=r.EJ8({name:"canCreateEndorsement",type:u,pure:!0})}return u})()},47157:(Z,L,n)=>{function m(z){return void 0!==z&&void 0!==z.mostRecentOrg&&z.signedIn&&z.canModerate&&z.endorsableOrgIds.length>0}function r(z){return"ACTIVE"===z.status||"REQUIRES_REVIEW"===z.status}function e(z){return"ACCEPTED"===z.status&&0===z.flags.totalCount}function u(z){return void 0!==z.mostRecentOrg&&z.endorsableOrgIds.includes(z.mostRecentOrg.id)}function g(z,l){return z.mostRecentOrg?.id===l.organization.id}function o(z,l){return m(z)&&r(l)&&e(l.assertion)&&g(z,l)}function f(z,l){return m(z)&&r(l)&&g(z,l)}function E(z,l){return!!(m(z)&&u(z)&&e(l))&&!l.endorsements.nodes.some(x=>o(z,x))}function M(z,l){return l.endorsements.nodes.some(x=>o(z,x))}function O(z,l){const x=z.mostRecentOrg?.id,b=z.endorsableOrgIds.filter(s=>s!==x);if(0===b.length)return;const X=l.endorsements.nodes.filter(r),Y=z.user?.organizations.filter(s=>{const N=X.every(H=>H.organization.id!==s.id);return b.includes(s.id)&&N});return Y&&Y.length>0?Y:void 0}function D(z,l){const x=z.endorsableOrgIds.find(b=>b!==l.organization.id);if(x)return z.user?.organizations.find(b=>b.id===x)}n.d(L,{FG:()=>m,G2:()=>e,KP:()=>u,VG:()=>f,bd:()=>r,iU:()=>o,j9:()=>g,pb:()=>E,pl:()=>M,tT:()=>O,vx:()=>D})},55780:(Z,L,n)=>{n.d(L,{E:()=>Ut});var m=n(17705),r=n(48728),e=n(89079),u=n(69145),g=n(5964),o=n(96354),f=n(69199),E=n(24608),M=n(72200),O=n(23617),D=n(50513),z=n(12617),l=n(41951),x=n(29438),b=n(7391),X=n(11672),Y=n(19448),s=n(64917),N=n(74621),H=n(9409),k=n(13397),W=n(74696),Q=n(62e3),G=n(22839),K=n(98920),y=n(54492),U=n(76393),C=n(75699),P=n(47157),t=n(73664);let S=(()=>{class a{transform(c,_){return void 0!==c&&(0,P.VG)(c,_)}static#t=this.\u0275fac=function(_){return new(_||a)};static#n=this.\u0275pipe=t.EJ8({name:"canRevokeEndorsement",type:a,pure:!0})}return a})();var V=n(19692);let w=(()=>{class a{transform(c,_){return void 0!==c&&"REQUIRES_REVIEW"===_.status&&(0,P.iU)(c,_)}static#t=this.\u0275fac=function(_){return new(_||a)};static#n=this.\u0275pipe=t.EJ8({name:"canApproveEndorsement",type:a,pure:!0})}return a})();var q=n(41305),et=n(8139),B=n(56408),R=n(56440);function h(a,I){if(1&a&&(t.j41(0,"div",9),t.nrm(1,"img",10),t.k0s()),2&a){t.XpG();const c=t.r8f(0);t.R7$(),t.Y8G("alt",t.mNQ(c.organization.name))("src",t.mNQ(c.organization.profileImagePath),t.B4B)}}function tt(a,I){1&a&&t.EFF(0," Previously endorsed by ")}function j(a,I){1&a&&t.EFF(0," Endorsed by ")}function T(a,I){1&a&&t.EFF(0," Endorsement under review by ")}function d(a,I){if(1&a&&(t.j41(0,"span",11),t.nVh(1,tt,1,0)(2,j,1,0)(3,T,1,0),t.EFF(4),t.k0s()),2&a){let c;t.XpG();const _=t.r8f(0);t.R7$(),t.vxM("REVOKED"===(c=_.status)?1:"ACTIVE"===c?2:"REQUIRES_REVIEW"===c?3:-1),t.R7$(3),t.SpI(" ",_.organization.name," ")}}function p(a,I){if(1&a&&(t.j41(0,"strong"),t.EFF(1),t.k0s(),t.EFF(2," has been endorsed by "),t.j41(3,"strong"),t.EFF(4),t.k0s(),t.EFF(5," under the authority of editor "),t.j41(6,"strong"),t.EFF(7),t.k0s()),2&a){t.XpG();const c=t.r8f(1),_=t.r8f(2),F=t.r8f(3);t.R7$(),t.JRh(c),t.R7$(3),t.JRh(_),t.R7$(3),t.SpI(" ",F,".")}}function i(a,I){if(1&a&&(t.j41(0,"strong"),t.EFF(1),t.k0s(),t.EFF(2," endorsement has been revoked by "),t.j41(3,"strong"),t.EFF(4),t.k0s(),t.EFF(5," under the authority of editor "),t.j41(6,"strong"),t.EFF(7),t.k0s()),2&a){t.XpG();const c=t.r8f(1),_=t.r8f(2),F=t.r8f(3);t.R7$(),t.JRh(c),t.R7$(3),t.JRh(_),t.R7$(3),t.SpI(" ",F,".")}}function v(a,I){if(1&a&&(t.EFF(0," Post-endorsement changes to "),t.j41(1,"strong"),t.EFF(2),t.k0s(),t.EFF(3," require review by a "),t.j41(4,"strong"),t.EFF(5),t.k0s(),t.EFF(6," editor with endorsing privileges. ")),2&a){t.XpG();const c=t.r8f(1),_=t.r8f(2);t.R7$(2),t.JRh(c),t.R7$(3),t.JRh(_)}}function A(a,I){1&a&&t.eu8(0)}function $(a,I){if(1&a&&(t.j41(0,"nz-collapse",13)(1,"nz-collapse-panel",14)(2,"div",15),t.DNE(3,A,1,0,"ng-container",16),t.k0s()()()),2&a){t.XpG();const c=t.sdS(11),_=t.sdS(13);t.Y8G("nzBordered",!1),t.R7$(),t.Y8G("nzExtra",c),t.R7$(),t.Y8G("nzGap",8),t.R7$(),t.Y8G("ngTemplateOutlet",_)}}function nt(a,I){1&a&&t.eu8(0)}function st(a,I){if(1&a&&(t.j41(0,"nz-collapse",13)(1,"nz-collapse-panel",17)(2,"div",15),t.DNE(3,nt,1,0,"ng-container",16),t.k0s()()()),2&a){t.XpG();const c=t.sdS(11),_=t.sdS(13);t.Y8G("nzBordered",!1),t.R7$(),t.Y8G("nzExtra",c),t.R7$(),t.Y8G("nzGap",8),t.R7$(),t.Y8G("ngTemplateOutlet",_)}}function it(a,I){1&a&&t.eu8(0)}function gt(a,I){if(1&a&&(t.j41(0,"nz-collapse",13)(1,"nz-collapse-panel",18)(2,"div",15),t.DNE(3,it,1,0,"ng-container",16),t.j41(4,"div",19,6),t.nrm(6,"cvc-activity-feed",20),t.k0s()()()()),2&a){const c=t.sdS(5);t.XpG();const _=t.sdS(11),F=t.sdS(13),J=t.XpG(),ot=t.r8f(0);t.Y8G("nzBordered",!1),t.R7$(),t.Y8G("nzActive",!0)("nzExtra",_),t.R7$(),t.Y8G("nzGap",8),t.R7$(),t.Y8G("ngTemplateOutlet",F),t.R7$(3),t.Y8G("cvcFilters",J.feedFilters(ot))("cvcSettings",J.feedSettings())("cvcShowFilters",!1)("cvcAutoHeightTarget",c)("cvcAutoHeightOffset",-40)}}function ut(a,I){1&a&&(t.j41(0,"nz-tag",21),t.EFF(1," Active"),t.k0s())}function ht(a,I){1&a&&(t.j41(0,"nz-tag",22),t.EFF(1," Requires Review"),t.k0s())}function ft(a,I){1&a&&(t.j41(0,"nz-tag",23),t.EFF(1," Revoked"),t.k0s())}function vt(a,I){if(1&a&&(t.j41(0,"span"),t.EFF(1,"Status: "),t.k0s(),t.nVh(2,ut,2,0,"nz-tag",21)(3,ht,2,0,"nz-tag",22)(4,ft,2,0,"nz-tag",23)),2&a){let c;t.XpG(2);const _=t.r8f(0);t.R7$(2),t.vxM("ACTIVE"===(c=_.status)?2:"REQUIRES_REVIEW"===c?3:"REVOKED"===c?4:-1)}}function _t(a,I){if(1&a&&(t.j41(0,"p",31),t.EFF(1),t.k0s()),2&a){t.XpG(4);const c=t.r8f(0);t.R7$(),t.SpI(" ",c.revocationActivity.note," ")}}function zt(a,I){1&a&&(t.j41(0,"p",29),t.EFF(1," No note provided "),t.k0s())}function Ct(a,I){if(1&a&&(t.j41(0,"nz-descriptions-item",30),t.nVh(1,_t,2,1,"p",31)(2,zt,2,0,"p",29),t.k0s()),2&a){t.XpG(3);const c=t.r8f(0);t.R7$(),t.vxM(c.revocationActivity.note?1:2)}}function Et(a,I){if(1&a&&(t.j41(0,"nz-descriptions",24)(1,"nz-descriptions-item",25),t.nrm(2,"cvc-organization-tag",26),t.k0s(),t.j41(3,"nz-descriptions-item",27),t.nrm(4,"cvc-user-tag",28),t.j41(5,"span",29),t.EFF(6),t.nI1(7,"timeAgo"),t.k0s()(),t.nVh(8,Ct,3,1,"nz-descriptions-item",30),t.k0s()),2&a){t.XpG(2);const c=t.r8f(0);t.Y8G("nzColumn",2),t.R7$(2),t.Y8G("org",c.organization)("enablePopover",!1),t.R7$(2),t.Y8G("user",c.user)("enablePopover",!1),t.R7$(2),t.SpI(" ",t.bMT(7,7,c.lastReviewed)," "),t.R7$(2),t.vxM("REVOKED"===c.status&&c.revocationActivity?8:-1)}}function Tt(a,I){if(1&a&&(t.j41(0,"span",12),t.SS7(1)(2)(3),t.nVh(4,p,8,3)(5,i,8,3)(6,v,7,2),t.k0s(),t.nVh(7,$,4,4,"nz-collapse",13)(8,st,4,4,"nz-collapse",13)(9,gt,7,10,"nz-collapse",13),t.DNE(10,vt,5,1,"ng-template",null,4,t.C5r)(12,Et,9,9,"ng-template",null,5,t.C5r)),2&a){let c,_;t.XpG();const F=t.r8f(0);t.R7$(),t.bH3(F.assertion.name),t.R7$(),t.bH3(F.organization.name),t.R7$(),t.bH3(F.user.displayName),t.R7$(),t.vxM("ACTIVE"===(c=F.status)?4:"REVOKED"===c?5:"REQUIRES_REVIEW"===c?6:-1),t.R7$(3),t.vxM("ACTIVE"===(_=F.status)?7:"REVOKED"===_?8:"REQUIRES_REVIEW"===_?9:-1)}}function yt(a,I){if(1&a&&(t.nrm(0,"cvc-endorse-assertion-button",32),t.nI1(1,"canApproveEndorsement"),t.nI1(2,"endorsementActionTooltip")),2&a){t.XpG(3);const c=t.r8f(0),_=t.r8f(1),F=t.r8f(2);t.Y8G("assertionId",_.id)("disabled",!t.i5U(1,3,F,c))("tooltipText",t.ii3(2,6,F,"approveChanges",_,c.id))}}function Mt(a,I){if(1&a&&(t.j41(0,"div",15),t.nVh(1,yt,3,11,"cvc-endorse-assertion-button",32),t.nrm(2,"cvc-endorse-assertion-button",33),t.nI1(3,"canRevokeEndorsement"),t.nI1(4,"endorsementActionTooltip"),t.k0s()),2&a){t.XpG(2);const c=t.r8f(0),_=t.r8f(1),F=t.r8f(2);t.Y8G("nzGap",8),t.R7$(),t.vxM("REQUIRES_REVIEW"===c.status?1:-1),t.R7$(),t.Y8G("assertionId",_.id)("disabled",!t.i5U(3,5,F,c))("tooltipText",t.ii3(4,8,F,"revoke",_,c.id))}}function Pt(a,I){if(1&a&&t.nVh(0,Mt,5,13,"div",15),2&a){t.XpG();const c=t.r8f(0);t.vxM("REVOKED"!==c.status?0:-1)}}let Rt=(()=>{class a{constructor(c){this.viewerService=c,this.cvcEndorsement=m.hFB.required(),this.cvcAssertion=m.hFB.required(),this.viewer=(0,e.ot)(this.viewerService.viewer$)}feedSettings(){return{...y.Nh,showOrganization:!1}}feedFilters(c){return{...y.bR,linkedEndorsementId:c.id,occurredAfter:new Date(c.lastReviewed)}}static#t=this.\u0275fac=function(_){return new(_||a)(t.rXU(q.q))};static#n=this.\u0275cmp=t.VBU({type:a,selectors:[["cvc-endorsement-item"]],inputs:{cvcEndorsement:[1,"cvcEndorsement"],cvcAssertion:[1,"cvcAssertion"]},decls:13,vars:7,consts:[["itemAvatar",""],["itemTitle",""],["itemDescription",""],["itemExtra",""],["endorsementStatus",""],["endorsementDetails",""],["revisionsContainer",""],[3,"nzExtra"],[3,"nzAvatar","nzTitle","nzDescription"],[1,"organization-image-container"],[1,"organization-image",3,"alt","src"],[1,"endorsement-title"],["nz-typography","","nzType","secondary",1,"endorsement-summary"],[3,"nzBordered"],["nzHeader","Show Endorsement Details",3,"nzExtra"],["nz-flex","","nzVertical","",3,"nzGap"],[4,"ngTemplateOutlet"],["nzHeader","Show Revocation Details",3,"nzExtra"],["nzHeader","Show Unendorsed Changes",3,"nzActive","nzExtra"],[1,"revisions-container"],["cvcTitle","Unendorsed Changes",3,"cvcFilters","cvcSettings","cvcShowFilters","cvcAutoHeightTarget","cvcAutoHeightOffset"],["nzColor","success"],["nzColor","processing"],["nzColor","error"],["nzBordered","","nzLayout","vertical","nzSize","small",3,"nzColumn"],["nzTitle","Endorsing Organization"],[3,"org","enablePopover"],["nzTitle","Endorsed by"],[3,"user","enablePopover"],["nz-typography","","nzType","secondary"],["nzTitle","Reason for Revocation","nzSpan","2"],["nz-typography",""],["mode","approveChanges","display","block",3,"assertionId","disabled","tooltipText"],["mode","revoke","display","block",3,"assertionId","disabled","tooltipText"]],template:function(_,F){if(1&_&&(t.SS7(0)(1)(2),t.j41(3,"nz-list-item",7),t.nrm(4,"nz-list-item-meta",8),t.k0s(),t.DNE(5,h,2,4,"ng-template",null,0,t.C5r)(7,d,5,2,"ng-template",null,1,t.C5r)(9,Tt,14,5,"ng-template",null,2,t.C5r)(11,Pt,1,1,"ng-template",null,3,t.C5r)),2&_){const J=t.sdS(6),ot=t.sdS(8),at=t.sdS(10),lt=t.sdS(12);t.bH3(F.cvcEndorsement()),t.R7$(),t.bH3(F.cvcAssertion()),t.R7$(),t.bH3(F.viewer()),t.R7$(),t.Y8G("nzExtra",lt),t.R7$(),t.Y8G("nzAvatar",J)("nzTitle",ot)("nzDescription",at)}},dependencies:[M.MD,M.T3,z.rD,z.lQ,z.qx,b.kT,b.Di,W.GB,W.Vz,W.pc,Q.WF,Q.xA,Q.gr,C.T,C.s,V.y,V.B,s.i,et.N,U.Y,G.m,B.r,K.U,R.r,k.A,S,w,N.C],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-list-item{padding:12px!important;border-bottom:none!important;background-color:#efefef;margin-bottom:12px;border-radius:12px}[_nghost-%COMP%]     nz-list-item-meta{margin-bottom:0!important}[_nghost-%COMP%]     nz-list-item-meta nz-list-item-meta-title>h4{margin-bottom:0!important;line-height:1.2em!important}[_nghost-%COMP%]     nz-list-item-extra{margin-left:12px!important;width:100px}[_nghost-%COMP%]     nz-collapse{border-radius:4px}[_nghost-%COMP%]     nz-collapse>nz-collapse-panel{background-color:#fff;border-radius:4px!important}[_nghost-%COMP%]     nz-collapse>nz-collapse-panel .ant-collapse-header{padding:4px 8px!important;border-radius:4px!important}[_nghost-%COMP%]     nz-collapse>nz-collapse-panel .ant-collapse-header-text{font-weight:500;color:#666}[_nghost-%COMP%]     nz-collapse>nz-collapse-panel .ant-collapse-arrow{color:#999}.endorsement-summary[_ngcontent-%COMP%]{display:inline-block;line-height:1.3em;margin-bottom:8px}.organization-image-container[_ngcontent-%COMP%]{width:48px;height:48px}.organization-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:4px;border:1px solid #aaa}.active[_ngcontent-%COMP%]{background-color:#fffbe6;border:1px solid #ffd666;color:#ad6800}.revoked[_ngcontent-%COMP%]{background-color:#fff1f0;border:1px solid #ff4d4f;color:#a8071a}.review[_ngcontent-%COMP%]{background-color:#f0f5ff;border:1px solid #597ef7;color:#10239e}.revisions-container[_ngcontent-%COMP%]{width:100%;height:250px}"]})}return a})(),Ot=(()=>{class a{transform(c){return void 0!==c&&(0,P.KP)(c)}static#t=this.\u0275fac=function(_){return new(_||a)};static#n=this.\u0275pipe=t.EJ8({name:"currentOrgCanEndorse",type:a,pure:!0})}return a})();var xt=n(43424);function At(a,I){if(1&a&&(t.EFF(0," Your endorsement actions will be executed under the authority granted to you by "),t.j41(1,"strong"),t.EFF(2),t.k0s()),2&a){t.XpG(2);const c=t.r8f(0);t.R7$(2),t.SpI("",null==c||null==c.mostRecentOrg?null:c.mostRecentOrg.name,".")}}function It(a,I){if(1&a&&(t.nrm(0,"nz-alert",6),t.DNE(1,At,3,1,"ng-template",null,2,t.C5r)),2&a){const c=t.sdS(2);t.Y8G("nzMessage",c)}}function Dt(a,I){if(1&a&&(t.j41(0,"span",8)(1,"strong"),t.EFF(2),t.k0s(),t.EFF(3," is unendorsed "),t.k0s()),2&a){let c;const _=t.XpG(2);t.R7$(2),t.JRh(null==(c=_.assertion())?null:c.name)}}function Gt(a,I){if(1&a&&(t.nrm(0,"cvc-endorse-assertion-button",9),t.nI1(1,"canCreateEndorsement"),t.nI1(2,"endorsementActionTooltip")),2&a){t.XpG();const c=t.r8f(0);t.XpG(3);const _=t.r8f(0);t.Y8G("assertionId",c.id)("disabled",!t.i5U(1,3,_,c))("tooltipText",t.brH(2,6,_,"create",c))}}function Ft(a,I){if(1&a&&(t.SS7(0),t.nVh(1,Gt,3,10,"cvc-endorse-assertion-button",9)),2&a){const c=t.bH3(t.XpG(3).assertion());t.R7$(),t.vxM(c?1:-1)}}function bt(a,I){if(1&a&&(t.nVh(0,Ft,2,2),t.nI1(1,"canPerformEndorsementActions")),2&a){t.XpG(2);const c=t.r8f(0);t.vxM(t.bMT(1,1,c)?0:-1)}}function St(a,I){if(1&a&&(t.nrm(0,"nz-empty",7),t.DNE(1,Dt,4,1,"ng-template",null,3,t.C5r)(3,bt,2,3,"ng-template",null,4,t.C5r)),2&a){const c=t.sdS(2),_=t.sdS(4);t.Y8G("nzNotFoundContent",c)("nzNotFoundFooter",_)}}function Bt(a,I){}function Vt(a,I){1&a&&t.nrm(0,"nz-divider",11)}function $t(a,I){1&a&&t.nrm(0,"nz-divider",12)}function Lt(a,I){if(1&a&&t.nVh(0,Bt,0,0)(1,Vt,1,0,"nz-divider",11)(2,$t,1,0,"nz-divider",12),2&a){let c;const _=t.XpG().$implicit;t.vxM("ACTIVE"===(c=_.status)?0:"REQUIRES_REVIEW"===c?1:"REVOKED"===c?2:-1)}}function Nt(a,I){if(1&a&&(t.nVh(0,Lt,3,1),t.nrm(1,"cvc-endorsement-item",10)),2&a){const c=I.$implicit,_=I.index;t.XpG();const F=t.r8f(1),J=t.r8f(5);t.vxM(c.status!==(null==J[_-1]?null:J[_-1].status)?0:-1),t.R7$(),t.Y8G("cvcEndorsement",c)("cvcAssertion",F)}}const mt=[u.B4I.Active,u.B4I.RequiresReview,u.B4I.Revoked];let Ut=(()=>{class a{constructor(c,_,F,J){this.endorsementsGQL=c,this.assertionGQL=_,this.injector=F,this.viewerService=J,this.assertionId=m.hFB.required(),this.pageSize=5,this.viewer=(0,e.ot)(this.viewerService.viewer$),this.errors=(0,r.vPA)([]),this.successMessage=(0,r.vPA)(void 0)}ngOnInit(){this.queryRef=this.endorsementsGQL.watch({assertionId:this.assertionId()},{fetchPolicy:"network-only"}),(0,r.N4e)(this.injector,()=>{this.endorsements=(0,e.ot)(this.queryRef.valueChanges.pipe((0,E.E)("data","endorsements","nodes"),(0,g.p)(f.kP),(0,o.T)(c=>[...c].sort((_,F)=>{const J=mt.indexOf(_.status),ot=mt.indexOf(F.status);return J!==ot?J-ot:new Date(F.updatedAt).getTime()-new Date(_.updatedAt).getTime()}))),{initialValue:[]}),this.assertion=(0,e.ot)(this.assertionGQL.watch({assertionId:this.assertionId()},{fetchPolicy:"cache-only"}).valueChanges.pipe((0,E.E)("data","assertion")),{initialValue:void 0})})}static#t=this.\u0275fac=function(_){return new(_||a)(t.rXU(u.ZEQ),t.rXU(u.kKs),t.rXU(r.uvJ),t.rXU(q.q))};static#n=this.\u0275cmp=t.VBU({type:a,selectors:[["cvc-endorsement-list"]],inputs:{assertionId:[1,"assertionId"]},decls:11,vars:11,consts:[["noResult",""],["endorsement",""],["endorsementMessage",""],["emptyContent",""],["emptyFooter",""],["nzSize","small","nzItemLayout","vertical",3,"nzDataSource","nzRenderItem","nzNoResult"],["nzType","info","nzShowIcon","",2,"margin-bottom","12px",3,"nzMessage"],[3,"nzNotFoundContent","nzNotFoundFooter"],["nz-typography","","nzType","secondary"],["mode","endorse",3,"assertionId","disabled","tooltipText"],[3,"cvcEndorsement","cvcAssertion"],["nzText","Endorsements Under Review","nzOrientation","left"],["nzText","Revoked Endorsements","nzOrientation","left"]],template:function(_,F){if(1&_&&(t.SS7(0)(1),t.nVh(2,It,3,1),t.nI1(3,"canPerformEndorsementActions"),t.nI1(4,"currentOrgCanEndorse"),t.SS7(5),t.j41(6,"nz-list",5),t.DNE(7,St,5,2,"ng-template",null,0,t.C5r)(9,Nt,2,3,"ng-template",null,1,t.C5r),t.k0s()),2&_){const J=t.sdS(8),ot=t.sdS(10),at=t.bH3(F.viewer());t.R7$(),t.bH3(F.assertion()),t.R7$(),t.vxM(t.bMT(3,6,at)&&t.bMT(4,8,at)?2:-1),t.R7$(3);const lt=t.bH3(F.endorsements());t.R7$(),t.Y8G("nzDataSource",lt)("nzRenderItem",ot)("nzNoResult",J)}},dependencies:[M.MD,O.$,O.Y,D.Z,z.rD,z.eE,l.Y3,x.Yb,b.kT,b.Di,X._v,X.RW,Y.g,Y.j,s.i,N.C,H.z,k.A,Rt,Ot,xt.T],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return a})()},58238:(Z,L,n)=>{n.d(L,{S:()=>T});var m=n(40505),r=n(1236),e=n(73664),u=n(48728),g=n(72200),o=n(38132),f=n(75699),E=n(41951),M=n(69199),O=n(96354),D=n(5964),z=n(69145),l=n(25703),x=n(62e3),b=n(69062),X=n(90959),Y=n(77855),s=n(38415),N=n(32033),H=n(61774),k=n(83075);function W(d,p){if(1&d&&(e.nrm(0,"i",11),e.nI1(1,"entityColor"),e.EFF(2)),2&d){const i=e.XpG().ngIf;e.Y8G("nzTwotoneColor",e.bMT(1,2,"VariantGroup")),e.R7$(2),e.SpI(" ",i.name," ")}}function Q(d,p){if(1&d&&e.nrm(0,"cvc-entity-child-counts",12),2&d){const i=e.XpG().ngIf;e.Y8G("cvcEntity",i)}}function G(d,p){if(1&d&&e.EFF(0),2&d){const i=e.XpG().ngIf;e.SpI(" ",i.description," ")}}function K(d,p){1&d&&e.nrm(0,"cvc-empty-value",7)}function y(d,p){if(1&d&&e.nrm(0,"cvc-feature-variant-tag",15),2&d){const i=p.$implicit;e.Y8G("enablePopover",!1)("variant",i.node)}}function U(d,p){if(1&d&&(e.j41(0,"nz-descriptions-item",13)(1,"cvc-tag-list"),e.DNE(2,y,1,2,"cvc-feature-variant-tag",14),e.k0s()()),2&d){const i=e.XpG().ngIf;e.R7$(2),e.Y8G("ngForOf",i.variants.edges)}}function C(d,p){if(1&d&&e.nrm(0,"cvc-source-tag",18),2&d){const i=p.$implicit;e.Y8G("enablePopover",!1)("source",i)}}function P(d,p){if(1&d&&(e.j41(0,"nz-descriptions-item",16)(1,"cvc-tag-list"),e.DNE(2,C,1,2,"cvc-source-tag",17),e.k0s()()),2&d){const i=e.XpG().ngIf;e.R7$(2),e.Y8G("ngForOf",i.sources)}}function t(d,p){if(1&d&&(e.qex(0),e.j41(1,"nz-card",4),e.DNE(2,W,3,4,"ng-template",null,0,e.C5r)(4,Q,1,1,"ng-template",null,1,e.C5r),e.j41(6,"nz-descriptions",5)(7,"nz-descriptions-item",6),e.nVh(8,G,1,1)(9,K,1,0,"cvc-empty-value",7),e.k0s()(),e.j41(10,"nz-descriptions",8),e.DNE(11,U,3,1,"nz-descriptions-item",9)(12,P,3,1,"nz-descriptions-item",10),e.k0s()(),e.bVm()),2&d){const i=p.ngIf,v=e.sdS(3),A=e.sdS(5);e.R7$(),e.Y8G("nzTitle",v)("nzExtra",A),e.R7$(5),e.Y8G("nzColumn",1),e.R7$(2),e.vxM(i.description?8:9),e.R7$(2),e.Y8G("nzColumn",2),e.R7$(),e.Y8G("ngIf",i.variants.edges.length>0),e.R7$(),e.Y8G("ngIf",i.sources.length>0)}}let S=(()=>{class d{constructor(i,v){this.gql=i,this.elementRef=v,this.contentRendered=new e.bkB,this.resizeObserver=new ResizeObserver(()=>{this.contentRendered.emit()})}ngOnInit(){this.variantGroup$=this.gql.watch({variantGroupId:this.variantGroupId}).valueChanges.pipe((0,O.T)(({data:i})=>i?.variantGroup),(0,D.p)(M.kP))}ngAfterViewInit(){this.resizeObserver.observe(this.elementRef.nativeElement)}ngOnDestroy(){this.resizeObserver.disconnect()}static#t=this.\u0275fac=function(v){return new(v||d)(e.rXU(z.gwr),e.rXU(e.aKT))};static#n=this.\u0275cmp=e.VBU({type:d,selectors:[["cvc-variant-group-popover"]],inputs:{variantGroupId:"variantGroupId"},outputs:{contentRendered:"contentRendered"},standalone:!1,decls:3,vars:3,consts:[["cardTitle",""],["cardExtra",""],["id","popover-content"],[4,"ngIf"],["nzBordered","false","id","card-content",3,"nzTitle","nzExtra"],["nzLayout","vertical","nzBordered","","nzSize","small",3,"nzColumn"],["nzTitle","Description"],["cvcEmptyCategory","unspecified"],["nzSize","small","nzBordered","true",3,"nzColumn"],["nzTitle","Variants","nzSpan","2",4,"ngIf"],["nzTitle","Sources","nzSpan","2",4,"ngIf"],["nz-icon","","nzTheme","twotone","nzType","civic-variantgroup",3,"nzTwotoneColor"],["cvcRoute","variant-groups",3,"cvcEntity"],["nzTitle","Variants","nzSpan","2"],[3,"enablePopover","variant",4,"ngFor","ngForOf"],[3,"enablePopover","variant"],["nzTitle","Sources","nzSpan","2"],[3,"enablePopover","source",4,"ngFor","ngForOf"],[3,"enablePopover","source"]],template:function(v,A){1&v&&(e.j41(0,"div",2),e.DNE(1,t,13,7,"ng-container",3),e.nI1(2,"ngrxPush"),e.k0s()),2&v&&(e.R7$(),e.Y8G("ngIf",e.bMT(2,1,A.variantGroup$)))},dependencies:[g.Sq,g.bT,l.cK,x.xA,x.gr,E.Dn,b.D,X.j,Y.M,s.g,N.o,H.L9,k.R],styles:["[_nghost-%COMP%]{display:block;margin:-8px -12px}[_nghost-%COMP%]     .ant-card-body{padding:0;margin-top:1px}[_nghost-%COMP%]     .ant-descriptions-view{border:none;border-top:1px solid #f0f0f0}.popover-text[_ngcontent-%COMP%]{width:100%;padding:8px;border-bottom:1px solid #f0f0f0}#popover-content[_ngcontent-%COMP%]{max-width:500px;max-height:700px;overflow:auto}[_nghost-%COMP%]     nz-descriptions[nzLayout=horizontal] .ant-descriptions-item-label{text-align:right}[_nghost-%COMP%]     nz-descriptions .ant-descriptions-item-label{font-weight:550}[_nghost-%COMP%]     nz-descriptions .ant-descriptions-header{margin-top:4px;margin-bottom:4px;padding-left:8px}[_nghost-%COMP%]     nz-descriptions .ant-descriptions-title{font-weight:500;color:#00000073;font-size:12px}[_nghost-%COMP%]     nz-descriptions .ant-descriptions-item-content p:last-of-type{margin-bottom:0}#popover-content[_ngcontent-%COMP%]{min-width:400px;min-height:100px}"]})}return d})();var V=n(12387);function w(d,p){}function q(d,p){if(1&d&&(e.qex(0),e.j41(1,"a",5),e.DNE(2,w,0,0,"ng-template",6),e.k0s(),e.bVm()),2&d){const i=e.XpG(),v=e.sdS(2);e.R7$(),e.Y8G("routerLink",i.variantgroup.link),e.R7$(),e.Y8G("ngTemplateOutlet",v)}}function et(d,p){}function B(d,p){if(1&d){const i=e.RV6();e.j41(0,"cvc-variant-group-popover",8),e.bIt("contentRendered",function(){u.eBV(i);const A=e.XpG(2);return u.Njj(A.updatePopoverPosition())}),e.k0s()}if(2&d){const i=e.XpG(2);e.Y8G("variantGroupId",i.variantgroup.id)}}function R(d,p){if(1&d&&(e.j41(0,"nz-tag",7),e.DNE(1,et,0,0,"ng-template",6),e.k0s(),e.DNE(2,B,1,1,"ng-template",null,3,e.C5r)),2&d){const i=e.sdS(3),v=e.XpG(),A=e.sdS(6);e.Y8G("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",v.enablePopover?i:void 0)("nzPopoverPlacement",v.popoverPlacement),e.R7$(),e.Y8G("ngTemplateOutlet",A)}}function h(d,p){}function tt(d,p){if(1&d&&e.DNE(0,h,0,0,"ng-template",6),2&d){e.XpG();const i=e.sdS(2);e.Y8G("ngTemplateOutlet",i)}}function j(d,p){if(1&d&&(e.j41(0,"cvc-icon-badges",9),e.nrm(1,"i",10),e.nI1(2,"entityColor"),e.k0s(),e.EFF(3)),2&d){const i=e.XpG();e.Y8G("flagged",i.variantgroup.flagged)("entityColor",i.iconColor),e.R7$(),e.Y8G("nzTwotoneColor",e.bMT(2,4,"VariantGroup")),e.R7$(2),e.SpI(" ",i.variantgroup.name,"\n")}}let T=(()=>{class d{constructor(){this.linked=!0,this.enablePopover=!0,this.popoverPlacement="top",this.iconColor=(0,m.P)("VariantGroup")}updatePopoverPosition(){this.popover&&this.popover.updatePosition()}ngAfterViewInit(){this.popoverList.length>0&&(this.popover=this.popoverList.first)}static#t=this.\u0275fac=function(v){return new(v||d)};static#n=this.\u0275cmp=e.VBU({type:d,selectors:[["cvc-variant-group-tag"]],viewQuery:function(v,A){if(1&v&&e.GBs(r.L_,5),2&v){let $;e.mGM($=e.lsd())&&(A.popoverList=$)}},inputs:{variantgroup:"variantgroup",linked:"linked",enablePopover:"enablePopover",popoverPlacement:"popoverPlacement"},standalone:!1,decls:7,vars:2,consts:[["tag",""],["unlinked",""],["tagContent",""],["popoverContent",""],[4,"ngIf","ngIfElse"],[3,"routerLink"],[3,"ngTemplateOutlet"],["nz-popover","",3,"nzPopoverMouseEnterDelay","nzPopoverContent","nzPopoverPlacement"],[3,"contentRendered","variantGroupId"],[3,"flagged","entityColor"],["nz-icon","","nzType","civic-variantgroup","nzTheme","twotone",3,"nzTwotoneColor"]],template:function(v,A){if(1&v&&e.DNE(0,q,3,2,"ng-container",4)(1,R,4,4,"ng-template",null,0,e.C5r)(3,tt,1,1,"ng-template",null,1,e.C5r)(5,j,4,6,"ng-template",null,2,e.C5r),2&v){const $=e.sdS(4);e.Y8G("ngIf",A.linked)("ngIfElse",$)}},dependencies:[g.bT,g.T3,o.Wk,r.L_,f.s,E.Dn,S,V.N,k.R],encapsulation:2,changeDetection:0})}return d})()},69065:(Z,L,n)=>{n.r(L),n.d(L,{AssertionsReviseModule:()=>p});var m=n(72200),r=n(38132),e=n(99172),u=n(96354),g=n(24608),o=n(73664),f=n(69145),E=n(56609),M=n(41305),O=n(3062),D=n(97685),z=n(41951),l=n(7391),x=n(5473),b=n(29765),X=n(97529),Y=n(12261),s=n(83075),N=n(61774);function H(i,v){if(1&i&&(o.j41(0,"span",12)(1,"strong"),o.EFF(2),o.k0s(),o.EFF(3," Parents:"),o.k0s()),2&i){const A=o.XpG(2).ngIf;o.R7$(2),o.JRh(A.name)}}function k(i,v){if(1&i&&(o.j41(0,"span",13),o.nrm(1,"cvc-molecular-profile-tag",14),o.k0s()),2&i){const A=o.XpG(2).ngIf;o.R7$(),o.Y8G("molecularProfile",A.molecularProfile)("enablePopover",!1)}}function W(i,v){1&i&&(o.j41(0,"nz-space",9),o.DNE(1,H,4,1,"span",10)(2,k,2,2,"span",11),o.k0s())}function Q(i,v){1&i&&(o.j41(0,"div"),o.nrm(1,"router-outlet"),o.k0s())}function G(i,v){1&i&&(o.j41(0,"nz-row",15)(1,"div",16),o.nrm(2,"cvc-login-prompt"),o.k0s()())}function K(i,v){if(1&i&&(o.qex(0),o.nrm(1,"cvc-section-navigation",3),o.DNE(2,W,3,0,"ng-template",null,0,o.C5r),o.j41(4,"nz-page-header",4)(5,"nz-page-header-title",5),o.EFF(6," REVISE "),o.nrm(7,"i",6),o.nI1(8,"entityColor"),o.EFF(9),o.k0s(),o.j41(10,"nz-page-header-content")(11,"div",7),o.DNE(12,Q,2,0,"div",8),o.nI1(13,"ngrxPush"),o.DNE(14,G,3,0,"ng-template",null,1,o.C5r),o.k0s()()(),o.bVm()),2&i){const A=v.ngIf,$=o.sdS(3),nt=o.sdS(15),st=o.XpG();o.R7$(),o.Y8G("displayName",A.name)("relationsTpl",$),o.R7$(6),o.Y8G("nzTwotoneColor",o.bMT(8,6,"Assertion")),o.R7$(2),o.SpI(" ",A.name," "),o.R7$(3),o.Y8G("ngIf",o.bMT(13,8,st.isSignedIn$))("ngIfElse",nt)}}let y=(()=>{class i{constructor(A,$,nt){this.gql=A,this.route=$,this.viewerService=nt,this.routeSub=this.route.params.subscribe(st=>{let it=this.gql.watch({assertionId:+st.assertionId}).valueChanges;this.loading$=it.pipe((0,g.E)("loading"),(0,e.Z)(!0)),this.assertion$=it.pipe((0,g.E)("data","assertion"))})}ngOnInit(){this.isSignedIn$=this.viewerService.viewer$.pipe((0,u.T)(A=>A.signedIn))}ngOnDestroy(){this.routeSub.unsubscribe()}static#t=this.\u0275fac=function($){return new($||i)(o.rXU(f.kKs),o.rXU(E.nX),o.rXU(M.q))};static#n=this.\u0275cmp=o.VBU({type:i,selectors:[["cvc-assertions-revise-view"]],standalone:!1,decls:2,vars:3,consts:[["assertionRelations",""],["notSignedIn",""],[4,"ngIf"],[3,"displayName","relationsTpl"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzTheme","twotone","nzType","civic-assertion",3,"nzTwotoneColor"],[1,"content"],[4,"ngIf","ngIfElse"],["nzDirection","horizontal"],["nz-typography","","class","label",4,"nzSpaceItem"],["class","tags",4,"nzSpaceItem"],["nz-typography","",1,"label"],[1,"tags"],[3,"molecularProfile","enablePopover"],["nzSpan","24","nzJustify","center"],["nz-col","","nzSpan","6"]],template:function($,nt){1&$&&(o.DNE(0,K,16,10,"ng-container",2),o.nI1(1,"async")),2&$&&o.Y8G("ngIf",o.bMT(1,1,nt.assertion$))},dependencies:[m.bT,E.n3,O.WB,O.k9,O.zR,D.U5,D.Dq,z.Dn,l.Di,x.z,b.n,X.Uq,X.e,Y.h,m.Jj,s.R,N.L9],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]})}return i})();var U=n(25703),C=n(61912),P=n(92090),t=n(48728);let S=(()=>{class i{static#t=this.\u0275fac=function($){return new($||i)};static#n=this.\u0275mod=o.$C({type:i});static#e=this.\u0275inj=t.G2t({imports:[m.MD,X.f3,U.Ti,C.i3,D.pc,P.B]})}return i})();var V=n(45847);function w(i,v){if(1&i&&(o.qex(0),o.nrm(1,"cvc-assertion-revise-form",2),o.bVm()),2&i){const A=o.XpG();o.R7$(),o.Y8G("assertionId",A.assertionId)}}function q(i,v){1&i&&o.EFF(0,"Loading Assertion...")}const B=[{path:"",component:y,data:{breadcrumb:"Revise"},children:[{path:"",redirectTo:"suggest",pathMatch:"full"},{path:"suggest",component:(()=>{class i{constructor(A){this.route=A,this.routeParams$=this.route.params.subscribe($=>{this.assertionId=+$.assertionId})}ngOnDestroy(){this.routeParams$.unsubscribe()}static#t=this.\u0275fac=function($){return new($||i)(o.rXU(E.nX))};static#n=this.\u0275cmp=o.VBU({type:i,selectors:[["cvc-assertions-suggest-page"]],standalone:!1,decls:3,vars:2,consts:[["loadingAssertion",""],[4,"ngIf","ngIfElse"],[3,"assertionId"]],template:function($,nt){if(1&$&&o.DNE(0,w,2,1,"ng-container",1)(1,q,1,0,"ng-template",null,0,o.C5r),2&$){const st=o.sdS(2);o.Y8G("ngIf",nt.assertionId)("ngIfElse",st)}},dependencies:[m.bT,V.Z],encapsulation:2})}return i})(),data:{breadcrumb:"Suggest Revision"}}]}];let R=(()=>{class i{static#t=this.\u0275fac=function($){return new($||i)};static#n=this.\u0275mod=o.$C({type:i});static#e=this.\u0275inj=t.G2t({imports:[r.iI.forChild(B),S,r.iI]})}return i})();var h=n(14124),tt=n(25128),j=n(13688),T=n(60996),d=n(64917);let p=(()=>{class i{static#t=this.\u0275fac=function($){return new($||i)};static#n=this.\u0275mod=o.$C({type:i});static#e=this.\u0275inj=t.G2t({imports:[m.MD,R,O.ZJ,D.pc,z.Y3,l.kT,D.pc,d.i,T.o,h.C,tt.K,X.f3,j.A]})}return i})()},74621:(Z,L,n)=>{n.d(L,{C:()=>j});var m=n(31635),r=n(72200),e=n(17705),u=n(48728),g=n(23597),o=n(89079),f=n(84341),E=n(71226),M=n(49894),O=n(50513),D=n(19448),z=n(41951),l=n(21011),x=n(52096),b=n(97685),X=n(1177),Y=n(35154),s=n(73664),N=n(69145),H=n(74222),k=n(41305),W=n(16389),Q=n(25930);const G=["endorseModalContent"],K=["revokeModalContent"],y=["approveChangesModalContent"],U=["modalTitle"],C=["modalFooter"];function P(T,d){if(1&T){const p=s.RV6();s.j41(0,"button",6),s.bIt("click",function(){u.eBV(p);const v=s.XpG();return u.Njj(v.createModal())}),s.nrm(1,"i",7),s.EFF(2),s.k0s()}if(2&T){const p=s.XpG(),i=s.r8f(0);s.Y8G("nzType",i.type)("nzSize",i.size)("disabled",i.disabled)("nzDanger",i.danger)("nzBlock","block"===i.display)("nzLoading",p.isSubmitting())("nzTooltipTitle",i.tooltipText),s.R7$(),s.Y8G("nzType",i.icon),s.R7$(),s.SpI(" ",i.label," ")}}function t(T,d){1&T&&s.EFF(0," Endorse This Assertion ")}function S(T,d){1&T&&s.EFF(0," Revoke This Assertion's Endorsement ")}function V(T,d){1&T&&s.EFF(0," Approve Changes to This Assertion's Endorsement ")}function w(T,d){if(1&T&&s.nVh(0,t,1,0)(1,S,1,0)(2,V,1,0),2&T){const p=s.XpG();s.vxM("endorse"===p.mode()?0:"revoke"===p.mode()?1:"approveChanges"===p.mode()?2:-1)}}function q(T,d){if(1&T&&(s.j41(0,"nz-spin",8)(1,"span"),s.EFF(2," You are about to formally "),s.j41(3,"strong"),s.EFF(4),s.k0s(),s.EFF(5,". Are you sure you wish to proceed? "),s.k0s()()),2&T){let p;const i=s.XpG();s.Y8G("nzSpinning",i.isSubmitting()),s.R7$(4),s.SpI(" Endorse this Assertion on behalf of ",null==(p=i.mostRecentOrg())?null:p.name," ")}}function et(T,d){if(1&T){const p=s.RV6();s.j41(0,"nz-spin",8)(1,"span"),s.EFF(2," You are about to formally "),s.j41(3,"strong"),s.EFF(4),s.k0s(),s.EFF(5,". Are you sure you wish to proceed? "),s.k0s(),s.nrm(6,"nz-divider",9),s.j41(7,"textarea",10),s.mxI("ngModelChange",function(v){u.eBV(p);const A=s.XpG();return s.DH7(A.revocationComment,v)||(A.revocationComment=v),u.Njj(v)}),s.k0s()()}if(2&T){let p;const i=s.XpG();s.Y8G("nzSpinning",i.isSubmitting()),s.R7$(4),s.SpI(" Revoke ",null==(p=i.mostRecentOrg())?null:p.name,"'s Endorsement of this Assertion"),s.R7$(3),s.R50("ngModel",i.revocationComment)}}function B(T,d){if(1&T&&(s.EFF(0," Before approving this Assertion's changes, ensure that they do not effect the original endorsement by "),s.j41(1,"strong"),s.EFF(2),s.k0s(),s.EFF(3,".\n")),2&T){let p;const i=s.XpG();s.R7$(2),s.JRh(null==(p=i.mostRecentOrg())?null:p.name)}}function R(T,d){if(1&T){const p=s.RV6();s.j41(0,"button",14),s.bIt("click",function(){u.eBV(p);const v=s.XpG(2);return u.Njj(v.perform())}),s.EFF(1),s.k0s()}if(2&T){let p;const i=s.XpG(2),v="endorse"===i.mode()?"Endorse":"Approve Changes";s.Y8G("nzTooltipTrigger",i.mostRecentOrg()?"hover":null)("nzTooltipTitle","For "+(null==(p=i.mostRecentOrg())?null:p.name)),s.R7$(),s.SpI(" ",v," ")}}function h(T,d){if(1&T){const p=s.RV6();s.j41(0,"button",15),s.bIt("click",function(){u.eBV(p);const v=s.XpG(2);return u.Njj(v.perform())}),s.EFF(1," Revoke Endorsement "),s.k0s()}if(2&T){let p;const i=s.XpG(2),v=i.revocationComment();s.Y8G("disabled",null==v||v.length<10)("nzTooltipTrigger",i.mostRecentOrg()?"hover":null)("nzTooltipTitle","For "+(null==(p=i.mostRecentOrg())?null:p.name))}}function tt(T,d){if(1&T){const p=s.RV6();s.j41(0,"button",11),s.bIt("click",function(){const v=u.eBV(p).modalRef;return u.Njj(v.destroy())}),s.EFF(1," Cancel "),s.k0s(),s.nVh(2,R,2,3,"button",12),s.nVh(3,h,2,3,"button",13)}if(2&T){const p=s.XpG();s.R7$(2),s.vxM("endorse"===p.mode()||"approveChanges"===p.mode()?2:-1),s.R7$(),s.vxM("revoke"===p.mode()?3:-1)}}let j=class ct{constructor(d,p,i,v,A,$,nt){this.endorseAssertionGql=d,this.revokeEndorsementGql=p,this.assertionDetailGql=i,this.endorsementListGql=v,this.networkErrorService=A,this.viewerService=$,this.modal=nt,this.assertionId=e.hFB.required(),this.mode=e.hFB.required(),this.size=(0,e.hFB)("small"),this.type=(0,e.hFB)("default"),this.display=(0,e.hFB)("inline"),this.disabled=(0,e.hFB)(!1),this.tooltipText=(0,e.hFB)(),this.onEndorsed=(0,e.CGW)(),this.isSubmitting=(0,u.vPA)(!1),this.revocationComment=(0,u.vPA)(void 0),this.viewer=(0,o.ot)(this.viewerService.viewer$),this.mostRecentOrg=(0,g.EW)(()=>this.viewer()?.mostRecentOrg),this.endorseAssertionMutator=new E.E(this.networkErrorService),this.revokeAssertionMutator=new E.E(this.networkErrorService),this.buttonConfig=(0,g.EW)(()=>this.mode()?this.getButtonConfig():void 0)}getButtonConfig(){const d={size:this.size(),type:this.type(),display:this.display(),disabled:this.disabled(),danger:!1,tooltipText:this.tooltipText()};switch(this.mode()){case"endorse":return{...d,label:"Endorse",icon:"safety-certificate"};case"revoke":return{...d,label:"Revoke",icon:"stop",type:"primary",danger:!0};case"approveChanges":return{...d,label:"Approve",icon:"safety-certificate",type:"primary"};default:return}}createModal(){const d=this.mode(),p={nzTitle:this.modalTitle,nzFooter:this.modalFooter};"endorse"===d?this.modal.create({...p,nzContent:this.endorseModalContent}):"revoke"===d?this.modal.create({...p,nzContent:this.revokeModalContent}):"approveChanges"===d&&this.modal.create({...p,nzContent:this.approveChangesModalContent})}perform(){this.isSubmitting.set(!0);let d,p={refetchQueries:[{query:this.assertionDetailGql.document,variables:{assertionId:this.assertionId()}},{query:this.endorsementListGql.document,variables:{assertionId:this.assertionId()}}]};d="endorse"===this.mode()||"approveChanges"===this.mode()?this.endorseAssertionMutator.mutate(this.endorseAssertionGql,{input:{assertionId:this.assertionId(),organizationId:this.mostRecentOrg()?.id}},p):this.revokeAssertionMutator.mutate(this.revokeEndorsementGql,{input:{assertionId:this.assertionId(),organizationId:this.mostRecentOrg()?.id,comment:this.revocationComment()||""}},p),d.submitSuccess$.pipe((0,M.s)(this)).subscribe(i=>{i&&(this.isSubmitting.set(!1),this.onEndorsed.emit({action:this.mode(),success:!0,errors:[]}),this.modal.closeAll())}),d.submitError$.pipe((0,M.s)(this)).subscribe(i=>{i.length>0&&(this.isSubmitting.set(!1),this.onEndorsed.emit({action:this.mode(),success:!1,errors:i}),this.modal.closeAll())}),d.isSubmitting$.pipe((0,M.s)(this)).subscribe(i=>{this.isSubmitting.set(i)})}static#t=this.\u0275fac=function(p){return new(p||ct)(s.rXU(N.pZ5),s.rXU(N.rGS),s.rXU(N.kKs),s.rXU(N.ZEQ),s.rXU(H.N),s.rXU(k.q),s.rXU(x.N_))};static#n=this.\u0275cmp=s.VBU({type:ct,selectors:[["cvc-endorse-assertion-button"]],viewQuery:function(p,i){if(1&p&&(s.GBs(G,5),s.GBs(K,5),s.GBs(y,5),s.GBs(U,5),s.GBs(C,5)),2&p){let v;s.mGM(v=s.lsd())&&(i.endorseModalContent=v.first),s.mGM(v=s.lsd())&&(i.revokeModalContent=v.first),s.mGM(v=s.lsd())&&(i.approveChangesModalContent=v.first),s.mGM(v=s.lsd())&&(i.modalTitle=v.first),s.mGM(v=s.lsd())&&(i.modalFooter=v.first)}},inputs:{assertionId:[1,"assertionId"],mode:[1,"mode"],size:[1,"size"],type:[1,"type"],display:[1,"display"],disabled:[1,"disabled"],tooltipText:[1,"tooltipText"]},outputs:{onEndorsed:"onEndorsed"},decls:12,vars:2,consts:[["modalTitle",""],["endorseModalContent",""],["revokeModalContent",""],["approveChangesModalContent",""],["modalFooter",""],["nz-button","","nz-tooltip","",3,"nzType","nzSize","disabled","nzDanger","nzBlock","nzLoading","nzTooltipTitle"],["nz-button","","nz-tooltip","",3,"click","nzType","nzSize","disabled","nzDanger","nzBlock","nzLoading","nzTooltipTitle"],["nz-icon","",3,"nzType"],[3,"nzSpinning"],[1,"endorsement-divider"],["placeholder","Enter a reason for revoking this Endorsement","rows","4","nz-input","",3,"ngModelChange","ngModel"],["nz-button","","nzSize","small",3,"click"],["nzType","primary","nzSize","small","nz-button","","nz-tooltip","",3,"nzTooltipTrigger","nzTooltipTitle"],["nzType","primary","nzSize","small","nz-button","","nz-tooltip","",3,"disabled","nzTooltipTrigger","nzTooltipTitle"],["nzType","primary","nzSize","small","nz-button","","nz-tooltip","",3,"click","nzTooltipTrigger","nzTooltipTitle"],["nzType","primary","nzSize","small","nz-button","","nz-tooltip","",3,"click","disabled","nzTooltipTrigger","nzTooltipTitle"]],template:function(p,i){if(1&p&&(s.SS7(0),s.nVh(1,P,3,9,"button",5),s.DNE(2,w,3,1,"ng-template",null,0,s.C5r)(4,q,6,2,"ng-template",null,1,s.C5r)(6,et,8,3,"ng-template",null,2,s.C5r)(8,B,4,1,"ng-template",null,3,s.C5r)(10,tt,4,2,"ng-template",null,4,s.C5r)),2&p){const v=s.bH3(i.buttonConfig());s.R7$(),s.vxM(v?1:-1)}},dependencies:[r.MD,f.YN,f.me,f.BC,f.vS,f.X1,l.j,l.Sy,O.Z,O.a,W.c,Q.p,z.Y3,z.Dn,Y.Qt,Y.LH,x.U6,X.V,X.a,b.pc,D.g,D.j],styles:["[_nghost-%COMP%]{display:block}.endorsement-divider[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}"]})};j=(0,m.Cg)([(0,M.d)()],j)},74696:(Z,L,n)=>{n.d(L,{GB:()=>K,Vz:()=>G,pc:()=>W});var m=n(31635),r=n(73664),e=n(48728),u=n(17705),g=n(89079),o=n(5964),f=n(40713),E=n(66376),M=n(26841),O=n(57806),D=n(25701),z=n(41951),l=n(40372);const x=["*"],b=["collapseHeader"];function X(y,U){if(1&y&&(r.qex(0),r.nrm(1,"nz-icon",7),r.bVm()),2&y){const C=U.$implicit,P=r.XpG(2);r.R7$(),r.Y8G("nzType",C||"right")("nzRotate",P.nzActive?90:0)}}function Y(y,U){if(1&y&&(r.j41(0,"div"),r.DNE(1,X,2,2,"ng-container",3),r.k0s()),2&y){const C=r.XpG();r.R7$(),r.Y8G("nzStringTemplateOutlet",C.nzExpandedIcon)}}function s(y,U){if(1&y&&(r.qex(0),r.EFF(1),r.bVm()),2&y){const C=r.XpG();r.R7$(),r.JRh(C.nzHeader)}}function N(y,U){if(1&y&&(r.qex(0),r.EFF(1),r.bVm()),2&y){const C=r.XpG(2);r.R7$(),r.JRh(C.nzExtra)}}function H(y,U){if(1&y&&(r.j41(0,"div",4),r.DNE(1,N,2,1,"ng-container",3),r.k0s()),2&y){const C=r.XpG();r.R7$(),r.Y8G("nzStringTemplateOutlet",C.nzExtra)}}const k="collapse";let W=(()=>{let y,P,V,U=[],C=[],t=[],S=[],w=[],q=[];return class dt{static#t=(()=>{const B="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;y=[(0,E.H4)()],P=[(0,E.H4)()],V=[(0,E.H4)()],(0,m.G4)(null,null,y,{kind:"field",name:"nzAccordion",static:!1,private:!1,access:{has:R=>"nzAccordion"in R,get:R=>R.nzAccordion,set:(R,h)=>{R.nzAccordion=h}},metadata:B},U,C),(0,m.G4)(null,null,P,{kind:"field",name:"nzBordered",static:!1,private:!1,access:{has:R=>"nzBordered"in R,get:R=>R.nzBordered,set:(R,h)=>{R.nzBordered=h}},metadata:B},t,S),(0,m.G4)(null,null,V,{kind:"field",name:"nzGhost",static:!1,private:!1,access:{has:R=>"nzGhost"in R,get:R=>R.nzGhost,set:(R,h)=>{R.nzGhost=h}},metadata:B},w,q),B&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:B})})();cdr=(0,e.WQX)(u.gRc);directionality=(0,e.WQX)(l.D);destroyRef=(0,e.WQX)(e.abz);_nzModuleName=k;nzAccordion=(0,m.zF)(this,U,!1);nzBordered=((0,m.zF)(this,C),(0,m.zF)(this,t,!0));nzGhost=((0,m.zF)(this,S),(0,m.zF)(this,w,!1));nzExpandIconPosition=((0,m.zF)(this,q),"start");dir="ltr";listOfNzCollapsePanelComponent=[];constructor(){(0,E._g)(k,()=>this.cdr.markForCheck())}ngOnInit(){this.directionality.change?.pipe((0,g.pQ)(this.destroyRef)).subscribe(B=>{this.dir=B,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(B){this.listOfNzCollapsePanelComponent.push(B)}removePanel(B){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(B),1)}click(B){this.nzAccordion&&!B.nzActive&&this.listOfNzCollapsePanelComponent.filter(R=>R!==B).forEach(R=>{R.nzActive&&(R.nzActive=!1,R.nzActiveChange.emit(R.nzActive),R.markForCheck())}),B.nzActive=!B.nzActive,B.nzActiveChange.emit(B.nzActive)}static \u0275fac=function(R){return new(R||dt)};static \u0275cmp=r.VBU({type:dt,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(R,h){2&R&&r.AVh("ant-collapse-icon-position-start","start"===h.nzExpandIconPosition)("ant-collapse-icon-position-end","end"===h.nzExpandIconPosition)("ant-collapse-ghost",h.nzGhost)("ant-collapse-borderless",!h.nzBordered)("ant-collapse-rtl","rtl"===h.dir)},inputs:{nzAccordion:[2,"nzAccordion","nzAccordion",u.L39],nzBordered:[2,"nzBordered","nzBordered",u.L39],nzGhost:[2,"nzGhost","nzGhost",u.L39],nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],ngContentSelectors:x,decls:1,vars:0,template:function(R,h){1&R&&(r.NAR(),r.SdG(0))},encapsulation:2,changeDetection:0})}})();const Q="collapsePanel";let G=(()=>{let y,U=[],C=[];return class pt{static#t=(()=>{const t="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;y=[(0,E.H4)()],(0,m.G4)(null,null,y,{kind:"field",name:"nzShowArrow",static:!1,private:!1,access:{has:S=>"nzShowArrow"in S,get:S=>S.nzShowArrow,set:(S,V)=>{S.nzShowArrow=V}},metadata:t},U,C),t&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:t})})();ngZone=(0,e.WQX)(r.SKi);cdr=(0,e.WQX)(u.gRc);destroyRef=(0,e.WQX)(e.abz);nzCollapseComponent=(0,e.WQX)(W,{host:!0});noAnimation=(0,e.WQX)(M.z,{optional:!0});_nzModuleName=Q;nzActive=!1;nzDisabled=!1;nzShowArrow=(0,m.zF)(this,U,!0);nzExtra=(0,m.zF)(this,C);nzHeader;nzExpandedIcon;nzActiveChange=new r.bkB;collapseHeader;markForCheck(){this.cdr.markForCheck()}constructor(){(0,E._g)(Q,()=>this.cdr.markForCheck()),this.destroyRef.onDestroy(()=>{this.nzCollapseComponent.removePanel(this)})}ngOnInit(){this.nzCollapseComponent.addPanel(this),(0,D.wN)(this.collapseHeader.nativeElement,"click").pipe((0,o.p)(()=>!this.nzDisabled),(0,g.pQ)(this.destroyRef)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})})}static \u0275fac=function(S){return new(S||pt)};static \u0275cmp=r.VBU({type:pt,selectors:[["nz-collapse-panel"]],viewQuery:function(S,V){if(1&S&&r.GBs(b,7),2&S){let w;r.mGM(w=r.lsd())&&(V.collapseHeader=w.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(S,V){2&S&&r.AVh("ant-collapse-no-arrow",!V.nzShowArrow)("ant-collapse-item-active",V.nzActive)("ant-collapse-item-disabled",V.nzDisabled)},inputs:{nzActive:[2,"nzActive","nzActive",u.L39],nzDisabled:[2,"nzDisabled","nzDisabled",u.L39],nzShowArrow:[2,"nzShowArrow","nzShowArrow",u.L39],nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],ngContentSelectors:x,decls:9,vars:8,consts:[["collapseHeader",""],["role","button",1,"ant-collapse-header"],[1,"ant-collapse-header-text"],[4,"nzStringTemplateOutlet"],[1,"ant-collapse-extra"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],[1,"ant-collapse-arrow",3,"nzType","nzRotate"]],template:function(S,V){1&S&&(r.NAR(),r.j41(0,"div",1,0),r.nVh(2,Y,2,1,"div"),r.j41(3,"span",2),r.DNE(4,s,2,1,"ng-container",3),r.k0s(),r.nVh(5,H,2,1,"div",4),r.k0s(),r.j41(6,"div",5)(7,"div",6),r.SdG(8),r.k0s()()),2&S&&(r.BMQ("aria-expanded",V.nzActive),r.R7$(2),r.vxM(V.nzShowArrow?2:-1),r.R7$(2),r.Y8G("nzStringTemplateOutlet",V.nzHeader),r.R7$(),r.vxM(V.nzExtra?5:-1),r.R7$(),r.AVh("ant-collapse-content-active",V.nzActive),r.Y8G("@.disabled",!(null==V.noAnimation||!V.noAnimation.nzNoAnimation))("@collapseMotion",V.nzActive?"expanded":"hidden"))},dependencies:[O.C,O.m,z.Y3,z.Dn],encapsulation:2,data:{animation:[f.GE]},changeDetection:0})}})(),K=(()=>{class y{static \u0275fac=function(P){return new(P||y)};static \u0275mod=r.$C({type:y});static \u0275inj=e.G2t({imports:[G]})}return y})()},90959:(Z,L,n)=>{n.d(L,{j:()=>g});var m=n(73664),r=n(83100),e=n(3245),u=n(24247);let g=(()=>{class o{constructor(){this.enablePopover=!0,this.truncateLongName=!1,this.linked=!0}ngOnInit(){if(void 0===this.variant)throw new Error("cvc-feature-variant-tag requires LinkableVariant input, none supplied.");if(this.variant.feature&&(this.feature=this.variant.feature),void 0===this.feature)throw new Error("cvc-feature-variant-tag requires a Feature, either as an input or on the Variant")}static#t=this.\u0275fac=function(M){return new(M||o)};static#n=this.\u0275cmp=m.VBU({type:o,selectors:[["cvc-feature-variant-tag"]],inputs:{variant:"variant",feature:"feature",enablePopover:"enablePopover",truncateLongName:"truncateLongName",linked:"linked"},standalone:!1,decls:3,vars:8,consts:[[3,"feature","enablePopover","linked","truncateLongName"],[3,"variant","enablePopover","linked","truncateLongName"]],template:function(M,O){1&M&&(m.j41(0,"cvc-tag-group"),m.nrm(1,"cvc-feature-tag",0)(2,"cvc-variant-tag",1),m.k0s()),2&M&&(m.R7$(),m.Y8G("feature",O.feature)("enablePopover",O.enablePopover)("linked",O.linked)("truncateLongName",O.truncateLongName),m.R7$(),m.Y8G("variant",O.variant)("enablePopover",O.enablePopover)("linked",O.linked)("truncateLongName",O.truncateLongName))},dependencies:[r.V,e._,u.L],styles:["[_nghost-%COMP%]     nz-tag.rejected, [_nghost-%COMP%]     nz-tag.submitted, [_nghost-%COMP%]     nz-tag.accepted, [_nghost-%COMP%]     nz-tag.deprecated{border-right-width:2px}[_nghost-%COMP%]     nz-tag.rejected, [_nghost-%COMP%]     nz-tag.deprecated{border-color:#e6e6e6;background-color:#fff;color:#999999d9}[_nghost-%COMP%]     nz-tag.submitted{border-color:#ffe58f}[_nghost-%COMP%]     nz-tag.accepted{border-color:#b7eb8f}[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}return o})()}}]);