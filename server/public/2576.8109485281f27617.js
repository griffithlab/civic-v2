"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[2576],{82576:(ct,y,n)=>{n.r(y),n.d(y,{VariantGroupsReviseModule:()=>dt});var d=n(72200),M=n(13688),F=n(14124),P=n(64917),g=n(97529),G=n(41951),c=n(3062),C=n(97685),O=n(7391),I=n(38132),T=n(99172),E=n(96354),V=n(24608),t=n(73664),u=n(69145),m=n(56609),$=n(41305),j=n(29765),B=n(12261),X=n(83075),w=n(61774);function U(r,e){1&r&&(t.j41(0,"div"),t.nrm(1,"router-outlet"),t.k0s())}function D(r,e){1&r&&(t.j41(0,"nz-row",8)(1,"div",9),t.nrm(2,"cvc-login-prompt"),t.k0s()())}function Y(r,e){if(1&r&&(t.qex(0),t.nrm(1,"cvc-section-navigation",2),t.j41(2,"nz-page-header",3)(3,"nz-page-header-title",4),t.EFF(4," REVISE "),t.nrm(5,"i",5),t.nI1(6,"entityColor"),t.EFF(7),t.k0s(),t.j41(8,"nz-page-header-content")(9,"div",6),t.DNE(10,U,2,0,"div",7),t.nI1(11,"ngrxPush"),t.DNE(12,D,3,0,"ng-template",null,0,t.C5r),t.k0s()()(),t.bVm()),2&r){const o=e.ngIf,i=t.sdS(13),a=t.XpG();t.R7$(),t.Y8G("displayName",o.name),t.R7$(4),t.Y8G("nzTwotoneColor",t.bMT(6,5,"VariantGroup")),t.R7$(2),t.SpI(" ",o.name," "),t.R7$(3),t.Y8G("ngIf",t.bMT(11,7,a.isSignedIn$))("ngIfElse",i)}}let N=(()=>{var r;class e{constructor(i,a,s){this.gql=i,this.route=a,this.viewerService=s,this.routeSub=this.route.params.subscribe(h=>{let S=this.gql.watch({variantGroupId:+h.variantGroupId}).valueChanges;this.loading$=S.pipe((0,V.E)("loading"),(0,T.Z)(!0)),this.variantGroup$=S.pipe((0,V.E)("data","variantGroup"))})}ngOnInit(){this.isSignedIn$=this.viewerService.viewer$.pipe((0,E.T)(i=>i.signedIn))}ngOnDestroy(){this.routeSub.unsubscribe()}static#t=r=()=>(this.\u0275fac=function(a){return new(a||e)(t.rXU(u.IbX),t.rXU(m.nX),t.rXU($.q))},this.\u0275cmp=t.VBU({type:e,selectors:[["cvc-variant-groups-revise-view"]],standalone:!1,decls:2,vars:3,consts:[["notSignedIn",""],[4,"ngIf"],[3,"displayName"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzTheme","twotone","nzType","civic-variantgroup",3,"nzTwotoneColor"],[1,"content"],[4,"ngIf","ngIfElse"],["nzSpan","24","nzJustify","center"],["nz-col","","nzSpan","6"]],template:function(a,s){1&a&&(t.DNE(0,Y,14,9,"ng-container",1),t.nI1(1,"async")),2&a&&t.Y8G("ngIf",t.bMT(1,1,s.variantGroup$))},dependencies:[d.bT,m.n3,c.WB,c.k9,c.zR,G.Dn,j.n,B.h,g.Uq,g.e,d.Jj,X.R,w.L9],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}))}return r(),e})();var b=n(38927),L=n(50513),A=n(66026),Q=n(55316),p=n(2615);let J=(()=>{var r;class e{static#t=r=()=>(this.\u0275fac=function(a){return new(a||e)},this.\u0275mod=t.$C({type:e}),this.\u0275inj=p.G2t({imports:[d.MD,b.PQ,L.Z,A.m,Q.P]}))}return r(),e})(),Z=(()=>{var r;class e{static#t=r=()=>(this.\u0275fac=function(a){return new(a||e)},this.\u0275mod=t.$C({type:e}),this.\u0275inj=p.G2t({imports:[d.MD,J]}))}return r(),e})();var W=n(31635),l=n(84341),H=n(71226),z=n(73038),x=n(49894),K=n(21413);const k=[{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Variant Group"}},fieldGroup:[{key:"name",type:"base-input",props:{label:"Variant Group Name",required:!0}},{key:"description",type:"base-textarea",props:{tooltip:"User-defined summary of the clinical relevance of this Variant Group.",placeholder:"Enter a Variant Group Summary",label:"Variant Group Summary",required:!0,rows:5}},{key:"sourceIds",type:"source-multi-select",wrappers:["form-field"],props:{required:!1}},{key:"variantIds",type:"variant-multi-select",props:{label:"Variants",required:!0,requireFeature:!1,showManagerBtn:!0}}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"textarea",props:{label:"Comment",required:!0}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Variant Group Revision",align:"right"}}]}]}];var R,q=n(17705),_=n(74222),tt=n(56506),et=n(68721);function nt(r,e){if(1&r&&(t.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or you may view them "),t.j41(1,"a",4),t.EFF(2,"here."),t.k0s()),2&r){const o=t.XpG();t.R7$(),t.Y8G("href",t.mNQ(o.url),t.B4B)}}function rt(r,e){if(1&r){const o=t.RV6();t.j41(0,"form",5),t.bIt("ngSubmit",function(){p.eBV(o);const a=t.XpG();return p.Njj(a.onSubmit(a.model))}),t.j41(1,"formly-form",6),t.bIt("modelChange",function(a){p.eBV(o);const s=t.XpG();return p.Njj(s.model=a)}),t.k0s()()}if(2&r){const o=t.XpG();t.Y8G("formGroup",o.form),t.R7$(),t.Y8G("form",o.form)("fields",o.fields)("model",o.model)("options",o.options)}}function at(r,e){1&r&&t.EFF(0," Loading Variant Group... ")}let f=(class v{constructor(e,o,i,a){this.revisableFieldsGQL=e,this.submitRevisionsGQL=o,this.networkErrorService=i,this.cdr=a,this.form=new l.J3({}),this.fields=k,this.state={formReady$:new K.B},this.options={formState:this.state},this.reviseAssertionMutator=new H.E(this.networkErrorService)}onSubmit(e){if(console.log("------ Variant Group Suggestion Added ------"),console.log(e),!this.variantGroupId)return;let o=(0,z.t9)(this.variantGroupId,e);o&&(this.mutationState=this.reviseAssertionMutator.mutate(this.submitRevisionsGQL,{input:o}))}ngOnInit(){this.url=`/variant-groups/${this.variantGroupId}/revisions`}ngOnDestroy(){}ngAfterViewInit(){this.revisableFieldsGQL.fetch({variantGroupId:this.variantGroupId}).pipe((0,x.s)(this)).subscribe({next:({data:{variantGroup:e}})=>{e&&(this.model={id:e.id,fields:(0,z.G_)(e)},this.cdr.detectChanges())},error:e=>{console.error("Error retrieving variantgroupItem."),console.error(e)},complete:()=>{this.state.formReady$.next(!0)}})}static#t=R=()=>(this.\u0275fac=function(o){return new(o||v)(t.rXU(u.FEq),t.rXU(u.IxG),t.rXU(_.N),t.rXU(q.gRc))},this.\u0275cmp=t.VBU({type:v,selectors:[["cvc-variantgroup-revise-form"]],inputs:{variantGroupId:"variantGroupId"},standalone:!1,decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Variant Group",3,"mutationState","redirectUrl","successMessage"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(o,i){if(1&o&&(t.j41(0,"cvc-form-submission-status-display",2),t.DNE(1,nt,3,2,"ng-template",null,0,t.C5r)(3,rt,2,5,"form",3)(4,at,1,0,"ng-template",null,1,t.C5r),t.k0s()),2&o){const a=t.sdS(2),s=t.sdS(5);t.Y8G("mutationState",i.mutationState)("redirectUrl",i.url)("successMessage",a),t.R7$(3),t.Y8G("ngIf",i.model)("ngIfElse",s)}},dependencies:[d.bT,b.CA,l.qT,l.cb,l.j4,tt.JA,et.G],encapsulation:2}),this)},R());function ot(r,e){if(1&r&&(t.qex(0),t.nrm(1,"cvc-variantgroup-revise-form",2),t.bVm()),2&r){const o=t.XpG();t.R7$(),t.Y8G("variantGroupId",o.variantGroupId)}}function it(r,e){1&r&&t.EFF(0,"Loading Variant Group...")}f=(0,W.Cg)([(0,x.d)()],f);const st=[{path:"",component:N,data:{breadcrumb:"Revise"},children:[{path:"",redirectTo:"suggest",pathMatch:"full"},{path:"suggest",component:(()=>{var r;class e{constructor(i){this.route=i,this.routeParams$=this.route.params.subscribe(a=>{this.variantGroupId=+a.variantGroupId})}ngOnDestroy(){this.routeParams$.unsubscribe()}static#t=r=()=>(this.\u0275fac=function(a){return new(a||e)(t.rXU(m.nX))},this.\u0275cmp=t.VBU({type:e,selectors:[["cvc-variant-groups-suggest-page"]],standalone:!1,decls:3,vars:2,consts:[["loadingVariantGroup",""],[4,"ngIf","ngIfElse"],[3,"variantGroupId"]],template:function(a,s){if(1&a&&t.DNE(0,ot,2,1,"ng-container",1)(1,it,1,0,"ng-template",null,0,t.C5r),2&a){const h=t.sdS(2);t.Y8G("ngIf",s.variantGroupId)("ngIfElse",h)}},dependencies:[d.bT,f],encapsulation:2}))}return r(),e})(),data:{breadcrumb:"Suggest Revision"}}]}];let pt=(()=>{var r;class e{static#t=r=()=>(this.\u0275fac=function(a){return new(a||e)},this.\u0275mod=t.$C({type:e}),this.\u0275inj=p.G2t({imports:[I.iI.forChild(st),Z,I.iI]}))}return r(),e})(),dt=(()=>{var r;class e{static#t=r=()=>(this.\u0275fac=function(a){return new(a||e)},this.\u0275mod=t.$C({type:e}),this.\u0275inj=p.G2t({imports:[d.MD,pt,c.ZJ,C.pc,G.Y3,O.kT,C.pc,P.i,F.C,M.A,g.f3]}))}return r(),e})()}}]);