"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[2385],{22385:(b,G,i)=>{i.d(G,{p:()=>V});var u=i(72200),C=i(69543),M=i(61774),P=i(25703),v=i(41951),g=i(38927),h=i(84341),I=i(17481),z=i(97529),S=i(1997),d=i(42172),D=i(50513),l=i(64917),n=i(97685),O=i(72968),E=i(29438),F=i(11672),R=i(1177),x=i(53146),y=i(35154),a=i(73664),A=i(2615),T=i(16389),f=i(25930),$=i(27120),B=i(68573),_=i(69145);let j=(()=>{var r;class s{transform(e){switch(e){case _.H1z.Commented:case _.H1z.CommentDeleted:return"civic-comment";case _.H1z.RevisionSuggested:case _.H1z.RevisionAccepted:case _.H1z.RevisionRejected:case _.H1z.RevisionSuperseded:return"civic-revision";case _.H1z.Flagged:case _.H1z.FlagResolved:return"civic-flag";case _.H1z.AssertionSubmitted:case _.H1z.AssertionAccepted:case _.H1z.AssertionRejected:return"civic-assertion";case _.H1z.Submitted:case _.H1z.Accepted:case _.H1z.Rejected:return"civic-evidence";case _.H1z.PublicationSuggested:case _.H1z.CuratedSourceSuggestion:case _.H1z.RejectedSourceSuggestion:case _.H1z.RequeuedSourceSuggestion:return"file-add";case _.H1z.Reverted:return"civic-evidence";case _.H1z.AssertionReverted:return"civic-assertion";case _.H1z.DeprecatedVariant:return"civic-variant";case _.H1z.DeprecatedFeature:case _.H1z.FeatureCreated:return"civic-feature";case _.H1z.DeprecatedMolecularProfile:case _.H1z.ComplexMolecularProfileCreated:return"civic-molecularprofile";case _.H1z.VariantCreated:return"civic-variant";default:return e}}static#n=r=()=>(this.\u0275fac=function(t){return new(t||s)},this.\u0275pipe=a.EJ8({name:"iconNameForEventAction",type:s,pure:!0,standalone:!1}))}return r(),s})();function L(r,s){if(1&r&&(a.nrm(0,"i",6),a.nI1(1,"iconNameForEventAction")),2&r){const o=a.XpG(2).$implicit;a.Y8G("nzType",a.bMT(1,1,o.action))}}function N(r,s){if(1&r&&(a.j41(0,"nz-timeline-item",4),a.DNE(1,L,2,3,"ng-template",null,0,a.C5r),a.nrm(3,"cvc-event-timeline-item",5),a.k0s()),2&r){const o=a.sdS(2),e=a.XpG().$implicit,t=a.XpG(2);a.Y8G("nzDot",o),a.R7$(3),a.Y8G("event",e)("tagDisplay",t.tagDisplay)}}function U(r,s){if(1&r&&(a.qex(0),a.DNE(1,N,4,3,"nz-timeline-item",3),a.bVm()),2&r){const o=s.$implicit;a.R7$(),a.Y8G("ngIf",o)}}function K(r,s){if(1&r&&(a.j41(0,"nz-timeline"),a.DNE(1,U,2,1,"ng-container",2),a.k0s()),2&r){const o=a.XpG();a.R7$(),a.Y8G("ngForOf",o.events)}}let W=(()=>{var r;class s{constructor(){this.tagDisplay="displayAll"}ngOnInit(){if(void 0===this.events)throw new Error("cvc-feed-item component requires array of EventFeedNodeFragment input.")}static#n=r=()=>(this.\u0275fac=function(t){return new(t||s)},this.\u0275cmp=a.VBU({type:s,selectors:[["cvc-event-timeline"]],inputs:{events:"events",tagDisplay:"tagDisplay"},standalone:!1,decls:1,vars:1,consts:[["timelineDotTemplate",""],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"nzDot",4,"ngIf"],[3,"nzDot"],[3,"event","tagDisplay"],["nz-icon","","nzTheme","twotone",1,"item-icon",3,"nzType"]],template:function(t,c){1&t&&a.DNE(0,K,2,1,"nz-timeline",1),2&t&&a.Y8G("ngIf",null==c.events?null:c.events.length)},dependencies:[u.Sq,u.bT,T.c,v.Dn,$.SO,$.XJ,B.O,j],styles:["[_nghost-%COMP%]{display:block}.item-icon[_ngcontent-%COMP%]{font-size:18px}.timeline-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .timeline-item[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{margin-top:2px}.timeline-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-left:4px}nz-timeline[_ngcontent-%COMP%]     ul li:last-child{padding-bottom:0}nz-timeline[_ngcontent-%COMP%]     ul li:last-child .ant-timeline-item-content{min-height:0;padding-bottom:8px}.timestamp[_ngcontent-%COMP%]{text-align:right}.comment-title[_ngcontent-%COMP%]{padding-right:24px}.comment-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400}.comment-card[_ngcontent-%COMP%]{width:100%}"]}))}return r(),s})();var Y=i(9365),X=i(27793);let V=(()=>{var r;class s{static#n=r=()=>(this.\u0275fac=function(t){return new(t||s)},this.\u0275mod=a.$C({type:s}),this.\u0275inj=A.G2t({imports:[u.MD,h.YN,D.Z,P.Ti,v.Y3,g.PQ,S.DH,I.$,z.f3,n.pc,F._v,E.Yb,R.V,x.W2,y.Qt,d.a,l.i,O.K,l.i]}))}return r(),s})();a.wjB(C.e,[u.bT,h.BC,h.vS,M.Nj,D.a,T.c,f.p,P.cK,z.Uq,z.e,I.u,n.U5,n.Dq,F.RW,E.PM,R.a,x.dz,y.LH,W,Y.T],[u.Pc,M.L9,X.s])},42172:(b,G,i)=>{i.d(G,{a:()=>A});var u=i(72200),C=i(41951),M=i(22839),P=i(7391),v=i(64917),g=i(89238),h=i(69269),I=i(93988),z=i(86936),S=i(87051),d=i(98920),D=i(35154),l=i(27120),n=i(97529),O=i(24415),E=i(50513),F=i(51209),R=i(65023),x=i(56912),y=i(2615),a=i(73664);let A=(()=>{var T;class f{static#n=T=()=>(this.\u0275fac=function(_){return new(_||f)},this.\u0275mod=a.$C({type:f}),this.\u0275inj=y.G2t({imports:[u.MD,E.Z,C.Y3,D.Qt,P.kT,l.ki,n.f3,O.O,M.m,v.i,g.e,h.P,x.l,I.e,z.G,S.U,d.U,F.k,R.J]}))}return T(),f})()},69543:(b,G,i)=>{i.d(G,{e:()=>s});var O,u=i(31635),C=i(69145),M=i(21413),P=i(23294),v=i(5964),g=i(96354),h=i(89085),I=i(96697),z=i(56977),S=i(45312),d=i(69199),D=i(49894),l=i(2615),n=i(73664);const E=()=>[];function F(o,e){if(1&o&&(n.qex(0),n.nrm(1,"cvc-event-timeline",15),n.bVm()),2&o){const t=n.XpG().ngIf,c=n.XpG(3);n.R7$(),n.Y8G("events",t)("tagDisplay",c.tagDisplay)}}function R(o,e){if(1&o){const t=n.RV6();n.j41(0,"div",17)(1,"button",18),n.bIt("click",function(){l.eBV(t);const p=n.XpG().ngIf,m=n.XpG(4);return l.Njj(m.fetchMore(p.endCursor))}),n.EFF(2," Load More "),n.k0s()()}}function x(o,e){if(1&o&&(n.qex(0),n.DNE(1,R,3,0,"div",16),n.bVm()),2&o){const t=e.ngIf;n.R7$(),n.Y8G("ngIf",t.hasNextPage&&t.endCursor)}}function y(o,e){if(1&o&&(n.qex(0),n.j41(1,"nz-row",6)(2,"nz-col",14),n.DNE(3,F,2,2,"ng-container",5)(4,x,2,1,"ng-container",13),n.nI1(5,"ngrxPush"),n.k0s()(),n.bVm()),2&o){const t=e.ngIf,c=n.XpG(3),p=n.sdS(5);n.R7$(),n.Y8G("nzGutter",16),n.R7$(2),n.Y8G("ngIf",t.length)("ngIfElse",p),n.R7$(),n.Y8G("ngIf",n.bMT(5,4,c.pageInfo$))}}function a(o,e){if(1&o){const t=n.RV6();n.j41(0,"nz-badge",21)(1,"button",22),n.bIt("click",function(){l.eBV(t);const p=n.XpG(6);return l.Njj(p.refresh())}),n.EFF(2," New Event(s) "),n.k0s()()}if(2&o){const t=n.XpG().ngrxLet,c=n.XpG(5);n.Y8G("nzCount",t-c.originalEventCount)}}function A(o,e){if(1&o&&(n.qex(0),n.DNE(1,a,3,1,"nz-badge",20),n.bVm()),2&o){const t=e.ngrxLet,c=n.XpG(5);n.R7$(),n.Y8G("ngIf",t&&t>c.originalEventCount)}}function T(o,e){if(1&o&&(n.qex(0),n.DNE(1,A,2,1,"ng-container",19),n.bVm()),2&o){const t=n.XpG(4);n.R7$(),n.Y8G("ngrxLet",t.newEventCount$)}}function f(o,e){if(1&o&&n.DNE(0,T,2,1,"ng-container",13),2&o){const t=n.XpG(3);n.Y8G("ngIf",t.pollForNewEvents&&t.originalEventCount)}}function $(o,e){if(1&o&&(n.j41(0,"nz-card",12),n.DNE(1,y,6,6,"ng-container",13),n.nI1(2,"ngrxPush"),n.DNE(3,f,1,1,"ng-template",null,1,n.C5r),n.k0s()),2&o){const t=n.sdS(4),c=n.XpG(2);n.Y8G("nzTitle",c.showFilters?"Events":void 0)("nzExtra",t),n.R7$(),n.Y8G("ngIf",n.bMT(2,3,c.events$))}}function B(o,e){if(1&o){const t=n.RV6();n.j41(0,"span"),n.EFF(1," Show Child Events "),n.j41(2,"nz-switch",24),n.mxI("ngModelChange",function(p){l.eBV(t);const m=n.XpG(3);return n.DH7(m.showChildren,p)||(m.showChildren=p),l.Njj(p)}),n.bIt("ngModelChange",function(){l.eBV(t);const p=n.XpG(3);return l.Njj(p.onShowChildrenToggle())}),n.k0s()()}if(2&o){const t=n.XpG(3);n.R7$(2),n.R50("ngModel",t.showChildren)}}function _(o,e){1&o&&(n.EFF(0),n.nI1(1,"eventVerbiage")),2&o&&n.SpI(" ",n.i5U(1,1,e.$implicit.id,"action-filter")," ")}function j(o,e){if(1&o&&n.nrm(0,"nz-avatar",30),2&o){const t=n.XpG().$implicit;n.Y8G("nzSrc",t.profileImagePath)}}function L(o,e){if(1&o&&(n.nrm(0,"nz-avatar",31),n.nI1(1,"uppercase")),2&o){const t=n.XpG().$implicit;n.Y8G("nzText",n.bMT(1,1,t.displayName.charAt(0)))}}function N(o,e){if(1&o&&(n.DNE(0,j,1,1,"nz-avatar",29)(1,L,2,3,"ng-template",null,3,n.C5r),n.j41(3,"span"),n.EFF(4),n.k0s()),2&o){const t=e.$implicit,c=n.sdS(2);n.Y8G("ngIf",t.profileImagePath)("ngIfElse",c),n.R7$(4),n.JRh(t.displayName)}}function U(o,e){if(1&o){const t=n.RV6();n.j41(0,"cvc-participant-list",28),n.nI1(1,"ngrxPush"),n.bIt("participantSelectedEvent",function(p){l.eBV(t);const m=n.XpG(4);return l.Njj(m.onOriginatingUserSelected(p))}),n.DNE(2,N,5,3,"ng-template",null,2,n.C5r),n.k0s()}if(2&o){const t=n.XpG(4);n.Y8G("participantList",n.bMT(1,1,t.participants$)||n.lJ4(3,E))}}function K(o,e){if(1&o&&(n.j41(0,"nz-col"),n.EFF(1),n.k0s()),2&o){const t=e.$implicit;n.R7$(),n.SpI(" ",t.name," ")}}function W(o,e){if(1&o){const t=n.RV6();n.j41(0,"cvc-participant-list",32),n.nI1(1,"ngrxPush"),n.bIt("participantSelectedEvent",function(p){l.eBV(t);const m=n.XpG(4);return l.Njj(m.onOrganizationSelected(p))}),n.DNE(2,K,2,1,"ng-template",null,2,n.C5r),n.k0s()}if(2&o){const t=n.XpG(4);n.Y8G("participantList",n.bMT(1,1,t.organizations$)||n.lJ4(3,E))}}function Y(o,e){if(1&o){const t=n.RV6();n.qex(0),n.j41(1,"cvc-participant-list",25),n.nI1(2,"ngrxPush"),n.bIt("participantSelectedEvent",function(p){l.eBV(t);const m=n.XpG(3);return l.Njj(m.onActionSelected(p))}),n.DNE(3,_,2,4,"ng-template",null,2,n.C5r),n.k0s(),n.DNE(5,U,4,4,"cvc-participant-list",26)(6,W,4,4,"cvc-participant-list",27),n.bVm()}if(2&o){const t=n.XpG(3);n.R7$(),n.Y8G("participantList",n.bMT(2,3,t.actions$)||n.lJ4(5,E)),n.R7$(4),n.Y8G("ngIf",!t.userId),n.R7$(),n.Y8G("ngIf",!t.organizationId)}}function X(o,e){1&o&&(n.j41(0,"nz-space",8),n.DNE(1,B,3,1,"span",23)(2,Y,7,6,"ng-container",23),n.k0s())}function V(o,e){if(1&o&&(n.qex(0),n.j41(1,"nz-row",6)(2,"nz-col",7)(3,"nz-space",8),n.DNE(4,$,5,5,"nz-card",9),n.k0s()(),n.j41(5,"nz-col",10),n.DNE(6,X,3,0,"nz-space",11),n.k0s()(),n.bVm()),2&o){const t=n.XpG();n.R7$(),n.Y8G("nzGutter",16),n.R7$(),n.Y8G("nzSpan",t.showFilters?"18":"24"),n.R7$(4),n.Y8G("ngIf",t.showFilters)}}function r(o,e){1&o&&n.nrm(0,"nz-empty",33)}let s=(class H{constructor(e,t){this.gql=e,this.eventCountGql=t,this.tagDisplay="displayAll",this.mode=C.Qt1.Subject,this.showFilters=!0,this.pageSize=15,this.pollForNewEvents=!0,this.includeAutomatedEvents=!0,this.destroy$=new M.B,this.showChildren=!1}ngOnInit(){this.initialQueryVars={subject:this.subscribable,organizationId:this.organizationId,originatingUserId:this.userId,first:this.pageSize,mode:this.mode,showFilters:this.showFilters,includeAutomatedEvents:this.includeAutomatedEvents},this.queryRef=this.gql.watch(this.initialQueryVars),this.pollForNewEvents&&S.c.production&&(this.newEventCount$=this.eventCountGql.watch(this.initialQueryVars,{fetchPolicy:"no-cache",pollInterval:3e4}).valueChanges.pipe((0,v.p)(d.kP),(0,g.T)(({data:e})=>e?.events?.unfilteredCount),(0,z.Q)(this.destroy$))),this.results$=this.queryRef.valueChanges,this.pageInfo$=this.results$.pipe((0,g.T)(({data:e})=>e.events.pageInfo)),this.events$=this.results$.pipe((0,h.E)("data","events","edges"),(0,v.p)(d.kP),(0,g.T)(e=>e.map(t=>t.node))),this.loading$=this.results$.pipe((0,g.T)(({loading:e})=>e),(0,P.F)()),this.unfilteredCount$=this.results$.pipe((0,g.T)(e=>e.data),(0,v.p)(d.kP),(0,g.T)(({events:e})=>e.unfilteredCount)),this.unfilteredCount$.pipe((0,I.s)(1),(0,D.s)(this)).subscribe(e=>this.originalEventCount=e),this.showFilters&&(this.participants$=this.results$.pipe((0,v.p)(d.kP),(0,g.T)(({data:e})=>e.events.uniqueParticipants)),this.organizations$=this.results$.pipe((0,v.p)(d.kP),(0,g.T)(({data:e})=>e.events.participatingOrganizations)),this.actions$=this.results$.pipe((0,v.p)(d.kP),(0,g.T)(({data:e})=>e.events?.eventTypes?.map(t=>({id:t}))||[])))}fetchMore(e){this.queryRef.fetchMore({variables:{first:this.pageSize,after:e}})}onOrganizationSelected(e){this.queryRef.refetch({organizationId:e?.id,showFilters:this.showFilters})}onActionSelected(e){this.queryRef.refetch({eventType:e?e.id:void 0,showFilters:this.showFilters})}onOriginatingUserSelected(e){this.queryRef.refetch({originatingUserId:e?.id,showFilters:this.showFilters})}refresh(){this.queryRef.refetch().then(({data:e})=>{this.originalEventCount=e.events.unfilteredCount})}onShowChildrenToggle(){let e;this.subscribable?(e={id:this.subscribable.id,entityType:this.subscribable.entityType,includeChildren:this.showChildren},this.tagDisplay=this.showChildren?"displayAll":"hideSubject"):e=void 0,this.queryRef.refetch({...this.initialQueryVars,subject:e,showFilters:this.showFilters})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}static#n=O=()=>(this.\u0275fac=function(t){return new(t||H)(n.rXU(C.XxZ),n.rXU(C.Ei5))},this.\u0275cmp=n.VBU({type:H,selectors:[["cvc-event-feed"]],inputs:{subscribable:"subscribable",subscribableName:"subscribableName",organizationId:"organizationId",userId:"userId",tagDisplay:"tagDisplay",mode:"mode",showFilters:"showFilters",pageSize:"pageSize",pollForNewEvents:"pollForNewEvents",includeAutomatedEvents:"includeAutomatedEvents"},standalone:!1,decls:6,vars:7,consts:[["noEvents",""],["refreshFeed",""],["itemTemplate",""],["noAvatar",""],["nzTip","Loading",3,"nzSpinning"],[4,"ngIf","ngIfElse"],[3,"nzGutter"],[3,"nzSpan"],["nzDirection","vertical",2,"width","100%"],[3,"nzTitle","nzExtra",4,"nzSpaceItem"],["nzSpan","6"],["nzDirection","vertical","style","width: 100%",4,"ngIf"],[3,"nzTitle","nzExtra"],[4,"ngIf"],["nzSpan","24",1,"timeline"],[3,"events","tagDisplay"],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","default","nzSize","small","nzBlock","",3,"click"],[4,"ngrxLet"],[3,"nzCount",4,"ngIf"],[3,"nzCount"],["nz-button","","nz-tooltip","Click to Refresh",3,"click"],[4,"nzSpaceItem"],["nzSize","small",3,"ngModelChange","ngModel"],["listTitle","Action",3,"participantSelectedEvent","participantList"],["listTitle","Curator",3,"participantList","participantSelectedEvent",4,"ngIf"],["listTitle","Organization",3,"participantList","participantSelectedEvent",4,"ngIf"],["listTitle","Curator",3,"participantSelectedEvent","participantList"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["listTitle","Organization",3,"participantSelectedEvent","participantList"],["nzNotFoundImage","simple","nzNotFoundContent","No Events"]],template:function(t,c){if(1&t&&(n.j41(0,"nz-spin",4),n.nI1(1,"ngrxPush"),n.DNE(2,V,7,3,"ng-container",5),n.nI1(3,"ngrxPush"),n.DNE(4,r,1,0,"ng-template",null,0,n.C5r),n.k0s()),2&t){const p=n.sdS(5);n.Y8G("nzSpinning",n.bMT(1,3,c.loading$)),n.R7$(2),n.Y8G("ngIf",n.bMT(3,5,c.unfilteredCount$))("ngIfElse",p)}},styles:["[_nghost-%COMP%]{display:block}.timeline[_ngcontent-%COMP%]{padding-top:6px;padding-left:6px}#event-filters[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]:last-child{margin-right:0}#event-filters[_ngcontent-%COMP%]   #participant-filter[_ngcontent-%COMP%]{width:200px}#event-filters[_ngcontent-%COMP%]   #organization-filter[_ngcontent-%COMP%]{width:250px}"]}),this)},O());s=(0,u.Cg)([(0,D.d)()],s)}}]);