(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{H2p9:function(e,t,n){"use strict";n.d(t,"a",function(){return k});var i=n("fXoL"),r=n("ofXK"),a=n("tyNb"),o=n("ZyQt"),s=n("+oEP"),c=n("lJxs"),l=n("l/kO"),p=n("JA5x"),d=n("xB20"),u=n("FwiY"),b=n("tFHu"),f=n("9A8T");function g(e,t){if(1&e&&(i.Pb(0,"i",7),i.Gc(1)),2&e){const e=i.ec().ngIf;i.Cb(1),i.Ic(" ",e.name," ")}}function m(e,t){if(1&e&&(i.Ub(0,"cvc-link-tag",9),i.Gc(1),i.Tb()),2&e){const e=i.ec(2).ngIf;i.lc("href",e.url),i.Cb(1),i.Ic(" ",e.soid," ")}}function h(e,t){if(1&e&&i.Ec(0,m,2,2,"cvc-link-tag",8),2&e){const e=i.ec().ngIf;i.lc("ngIf","N/A"!=e.soid)}}function v(e,t){if(1&e&&(i.Sb(0),i.Ub(1,"nz-card",2),i.Ec(2,g,2,1,"ng-template",null,3,i.Fc),i.Ec(4,h,1,1,"ng-template",null,4,i.Fc),i.Ub(6,"nz-descriptions",5),i.Ub(7,"nz-descriptions-item",6),i.Gc(8),i.Tb(),i.Tb(),i.Tb(),i.Rb()),2&e){const e=t.ngIf,n=i.uc(3),r=i.uc(5);i.Cb(1),i.lc("nzTitle",n)("nzExtra",r),i.Cb(5),i.lc("nzColumn",2),i.Cb(2),i.Ic(" ",e.variantCount," ")}}let y=(()=>{class e{constructor(e){this.gql=e}ngOnInit(){if(null==this.variantTypeId)throw new Error("cvc-variant-type-popover requires valid variantTypeId input.");this.variantType$=this.gql.watch({variantTypeId:this.variantTypeId}).valueChanges.pipe(Object(c.a)(({data:e})=>e.variantTypePopover))}}return e.\u0275fac=function(t){return new(t||e)(i.Ob(l.tc))},e.\u0275cmp=i.Ib({type:e,selectors:[["cvc-variant-type-popover"]],inputs:{variantTypeId:"variantTypeId"},decls:3,vars:3,consts:[["id","popover-content"],[4,"ngIf"],["nzBordered","false","id","card-content",3,"nzTitle","nzExtra"],["cardTitle",""],["linkout",""],["nzSize","small","nzBordered","true",3,"nzColumn"],["nzTitle","Variants","nzSpan","2"],["nz-icon","","nzType","civic-varianttype",1,"variant-type-tag-icon"],["tooltip","View on SequenceOntology.org",3,"href",4,"ngIf"],["tooltip","View on SequenceOntology.org",3,"href"]],template:function(e,t){1&e&&(i.Ub(0,"div",0),i.Ec(1,v,9,4,"ng-container",1),i.fc(2,"ngrxPush"),i.Tb()),2&e&&(i.Cb(1),i.lc("ngIf",i.gc(2,1,t.variantType$)))},directives:[r.q,p.a,d.a,d.b,u.b,b.a],pipes:[f.b],styles:["[_nghost-%COMP%]{display:block;margin:-8px -12px}[_nghost-%COMP%]     .ant-card-body{padding:0;margin-top:1px}[_nghost-%COMP%]     .ant-descriptions-view{border:none}[_nghost-%COMP%]     #entity-child-counts{border-top:1px solid #f0f0f0;padding:8px}[_nghost-%COMP%]     #entity-child-counts nz-space{width:100%}[_nghost-%COMP%]     #entity-child-counts nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     #entity-child-counts nz-space-item:last-child nz-tag{margin-right:0}.popover-text[_ngcontent-%COMP%]{width:100%;padding:8px;border-bottom:1px solid #f0f0f0}#popover-content[_ngcontent-%COMP%]{min-width:350px;max-width:500px;min-height:125px}"]}),e})();function z(e,t){}function O(e,t){if(1&e&&(i.Sb(0),i.Ub(1,"a",5),i.Ec(2,z,0,0,"ng-template",6),i.Tb(),i.Rb()),2&e){const e=i.ec(),t=i.uc(2);i.Cb(1),i.nc("routerLink","/variant-types/",e.variantType.id,""),i.Cb(1),i.lc("ngTemplateOutlet",t)}}function C(e,t){}function T(e,t){if(1&e&&(i.Ub(0,"nz-tag",9),i.Ec(1,C,0,0,"ng-template",6),i.Tb()),2&e){i.ec();const e=i.uc(2);i.ec();const t=i.uc(8);i.lc("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",e),i.Cb(1),i.lc("ngTemplateOutlet",t)}}function I(e,t){if(1&e&&i.Pb(0,"cvc-variant-type-popover",10),2&e){const e=i.ec(2);i.lc("variantTypeId",e.variantType.id)}}function w(e,t){if(1&e&&(i.Ec(0,T,2,3,"nz-tag",7),i.Ec(1,I,1,1,"ng-template",null,8,i.Fc)),2&e){const e=i.ec(),t=i.uc(6);i.lc("ngIf",e.enablePopover)("ngIfElse",t)}}function P(e,t){}function S(e,t){if(1&e&&i.Ec(0,P,0,0,"ng-template",6),2&e){i.ec();const e=i.uc(2);i.lc("ngTemplateOutlet",e)}}function E(e,t){}function x(e,t){if(1&e&&(i.Ub(0,"nz-tag"),i.Ec(1,E,0,0,"ng-template",6),i.Tb()),2&e){i.ec();const e=i.uc(8);i.Cb(1),i.lc("ngTemplateOutlet",e)}}function $(e,t){if(1&e&&(i.Pb(0,"i",11),i.Gc(1)),2&e){const e=i.ec();i.Cb(1),i.Ic(" ",e.variantType.name,"\n")}}let k=(()=>{class e{constructor(){this.linked=!0,this.enablePopover=!0}ngOnInit(){if(void 0===this.variantType)throw new Error("cvc-variant-type-tag requires LinkableVariantType input, none supplied.")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Ib({type:e,selectors:[["cvc-variant-type-tag"]],inputs:{variantType:"variantType",linked:"linked",enablePopover:"enablePopover"},decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["tag",""],["unlinked",""],["noPopover",""],["tagContent",""],[3,"routerLink"],[3,"ngTemplateOutlet"],["nz-popover","","nzPopoverPlacement","right","nzPopoverTrigger","hover",3,"nzPopoverMouseEnterDelay","nzPopoverContent",4,"ngIf","ngIfElse"],["variantTypePopover",""],["nz-popover","","nzPopoverPlacement","right","nzPopoverTrigger","hover",3,"nzPopoverMouseEnterDelay","nzPopoverContent"],[3,"variantTypeId"],["nz-icon","","nzType","civic-varianttype","nzTheme","twotone","nzTwotoneColor","#33B358"]],template:function(e,t){if(1&e&&(i.Ec(0,O,3,2,"ng-container",0),i.Ec(1,w,3,2,"ng-template",null,1,i.Fc),i.Ec(3,S,1,1,"ng-template",null,2,i.Fc),i.Ec(5,x,2,1,"ng-template",null,3,i.Fc),i.Ec(7,$,2,1,"ng-template",null,4,i.Fc)),2&e){const e=i.uc(4);i.lc("ngIf",t.linked)("ngIfElse",e)}},directives:[r.q,a.g,r.x,o.a,s.a,y,u.b],styles:["[_nghost-%COMP%]{display:block}"]}),e})()},XIlT:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n("ofXK"),r=n("tyNb"),a=n("ZyQt"),o=n("JA5x"),s=n("zcey"),c=n("xB20"),l=n("9A8T"),p=n("FwiY"),d=n("fXoL");let u=(()=>{class e{}return e.\u0275mod=d.Mb({type:e}),e.\u0275inj=d.Lb({factory:function(t){return new(t||e)},imports:[[i.c,l.c,p.c,o.c,c.c,s.a]]}),e})();var b=n("+oEP");let f=(()=>{class e{}return e.\u0275mod=d.Mb({type:e}),e.\u0275inj=d.Lb({factory:function(t){return new(t||e)},imports:[[i.c,r.h,p.c,a.b,b.b,u]]}),e})()},wdCO:function(e,t,n){"use strict";n.r(t),n.d(t,"VariantsReviseModule",function(){return Oe});var i=n("ofXK"),r=n("tyNb"),a=n("wO+i"),o=n("JX91"),s=n("fXoL"),c=n("l/kO"),l=n("Omhx"),p=n("jPNr"),d=n("FwiY");function u(e,t){if(1&e&&(s.Sb(0),s.Pb(1,"cvc-section-navigation",1),s.Ub(2,"nz-page-header",2),s.Ub(3,"nz-page-header-title",3),s.Gc(4," REVISE "),s.Pb(5,"i",4),s.Gc(6),s.Tb(),s.Ub(7,"nz-page-header-subtitle"),s.Gc(8),s.Tb(),s.Ub(9,"nz-page-header-content"),s.Ub(10,"div",5),s.Pb(11,"router-outlet"),s.Tb(),s.Tb(),s.Tb(),s.Rb()),2&e){const e=t.ngIf;s.Cb(1),s.lc("displayName",e.name),s.Cb(5),s.Ic(" ",e.name," "),s.Cb(2),s.Ic(" ",e.name," ")}}let b=(()=>{class e{constructor(e,t){this.gql=e,this.route=t,this.routeSub=this.route.params.subscribe(e=>{let t=this.gql.watch({variantId:+e.variantId}).valueChanges;this.loading$=t.pipe(Object(a.a)("loading"),Object(o.a)(!0)),this.variant$=t.pipe(Object(a.a)("data","variant")),this.commentsTotal$=this.variant$.pipe(Object(a.a)("comments","totalCount")),this.flagsTotal$=this.variant$.pipe(Object(a.a)("flags","totalCount")),this.revisionsTotal$=this.variant$.pipe(Object(a.a)("revisions","totalCount"))})}ngOnDestroy(){this.routeSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(c.ic),s.Ob(r.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["cvc-variants-revise"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"displayName"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzType","civic:variant"],[1,"content"]],template:function(e,t){1&e&&(s.Ec(0,u,12,3,"ng-container",0),s.fc(1,"async")),2&e&&s.lc("ngIf",s.gc(1,1,t.variant$))},directives:[i.q,l.a,p.a,p.g,d.b,p.e,p.b,r.i],pipes:[i.b],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),e})();var f=n("OtHt"),g=n("J/XB"),m=n("XuDB"),h=n("6fd8"),v=n("CtWS"),y=n("7vSn"),z=n("0FS3"),O=n("OzZK"),C=n("B+r4"),T=n("Wfee"),I=n("ocnv"),w=n("3Pt+"),P=n("xWP1"),S=n("XNiG"),E=n("2Vo4"),x=n("wmZe"),$=n("1G5W"),k=n("nYR2"),M=n("CVmQ");let V=(()=>{class e{constructor(e,t){this.suggestVariantRevisionGQL=e,this.networkErrorService=t,this.destroy$=new S.a,this.isSubmitting$=new E.a(!1),this.submitSuccess$=new E.a(!1),this.submitError$=new E.a([])}suggest(e){this.storeObj={id:e.id,__typename:Object(x.a)("Variant")},this.isSubmitting$.next(!0),this.suggestVariantRevisionGQL.mutate({input:e},{update:(e,{data:{suggestVariantRevision:t}})=>{e.modify({id:e.identify(this.storeObj),fields:{revisions:(e=[])=>t.variant.revisions}})}}).pipe(Object($.a)(this.destroy$),Object(k.a)(()=>{this.isSubmitting$.next(!1)})).subscribe({error:e=>{e.graphQLErrors.length>0?this.submitError$.next(e.graphQLErrors.map(e=>e.message)):e.networkError&&this.networkErrorService.networkError$.next(e.networkError)},complete:()=>{this.submitError$.next([]),this.submitSuccess$.next(!0),this.networkErrorService.networkError$.next(void 0)}})}cleanup(){this.submitError$.next([]),this.submitSuccess$.next(!1),this.isSubmitting$.next(!1),this.networkErrorService.networkError$.next(void 0)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(s.Yb(c.Wb),s.Yb(M.a))},e.\u0275prov=s.Kb({token:e,factory:e.\u0275fac}),e})();var R=n("zAKX"),L=n("9A8T"),G=n("H2p9");function U(e,t){if(1&e&&(s.Ub(0,"nz-option",6),s.Gc(1),s.Tb()),2&e){const e=t.$implicit;s.oc("nzLabel","",e.name," (",e.soid,")"),s.lc("nzValue",e),s.Cb(1),s.Jc(" ",e.name," (",e.soid,") ")}}function A(e,t){if(1&e&&(s.Sb(0),s.Ec(1,U,2,5,"nz-option",5),s.Rb()),2&e){const e=t.ngrxLet;s.Cb(1),s.lc("ngForOf",e)}}function j(e,t){1&e&&s.Gc(0," No variant type found in CIViC that matches the string provided. ")}function F(e,t){if(1&e){const e=s.Vb();s.Sb(0),s.Ub(1,"nz-select",2),s.bc("nzOnSearch",function(t){return s.vc(e),s.ec().to.onSearch(t)}),s.Ec(2,A,2,1,"ng-container",3),s.Tb(),s.Ec(3,j,1,0,"ng-template",null,4,s.Fc),s.Rb()}if(2&e){const e=s.uc(4),t=s.ec();s.Cb(1),s.lc("formControl",t.formControl)("formlyAttributes",t.field)("nzPlaceHolder",t.to.placeholder?t.to.placeholder:null)("nzNotFoundContent",e)("nzShowArrow",t.to.showArrow)("nzFilterOption",t.to.filterOption),s.Cb(1),s.lc("ngrxLet",t.variantTypes$)}}function q(e,t){if(1&e&&s.Pb(0,"cvc-variant-type-tag",7),2&e){const e=s.ec();s.lc("variantType",e.formControl.value)}}const _={name:"variant-type-input",component:(()=>{class e extends z.b{constructor(e){super(),this.variantTypeTypeaheadQuery=e,this.destroy$=new S.a,this.defaultOptions={templateOptions:{placeholder:"Search Variant Types",showArrow:!1,onSearch:()=>{},minLengthSearch:1,optionList:[]}}}ngOnInit(){this.queryRef=this.variantTypeTypeaheadQuery.watch({name:""}),this.variantTypes$=this.queryRef.valueChanges.pipe(Object($.a)(this.destroy$),Object(a.a)("data","variantTypeTypeahead"))}ngAfterViewInit(){this.to.onSearch=e=>{var t;this.to.fieldValue=e,this.to.fieldLength=e.length,e.length<this.to.minLengthSearch||e.length>this.to.maxLength||null===(t=this.queryRef)||void 0===t||t.refetch({name:e})}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(c.vc))},e.\u0275cmp=s.Ib({type:e,selectors:[["cvc-variant-type-input"]],features:[s.zb],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["drugListItem",""],["nzShowSearch","","nzServerSearch","",3,"formControl","formlyAttributes","nzPlaceHolder","nzNotFoundContent","nzShowArrow","nzFilterOption","nzOnSearch"],[4,"ngrxLet"],["sourceLoader",""],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzCustomContent","",3,"nzLabel","nzValue"],[3,"variantType"]],template:function(e,t){if(1&e&&(s.Ec(0,F,5,7,"ng-container",0),s.Ec(1,q,1,1,"ng-template",null,1,s.Fc)),2&e){const e=s.uc(2);s.lc("ngIf",!(null!=t.formControl.value&&t.formControl.value.id))("ngIfElse",e)}},directives:[i.q,R.c,w.o,w.g,z.d,L.a,i.p,R.a,G.a],styles:[""]}),e})()};var B=n("XIlT");const D={types:[_]};let X=(()=>{class e{}return e.\u0275mod=s.Mb({type:e}),e.\u0275inj=s.Lb({factory:function(t){return new(t||e)},imports:[[i.c,w.s,L.c,z.g.forChild(D),R.d,B.a]]}),e})(),N=(()=>{class e{}return e.\u0275mod=s.Mb({type:e}),e.\u0275inj=s.Lb({factory:function(t){return new(t||e)},providers:[V],imports:[[i.c,r.h,w.s,P.b,I.e,T.b,C.b,O.c,z.g.forChild(),y.a,v.a,h.a,m.a,g.a,X]]}),e})();var H=n("4xsP"),Q=n("JA5x");let J=(()=>{class e{}return e.\u0275mod=s.Mb({type:e}),e.\u0275inj=s.Lb({factory:function(t){return new(t||e)},imports:[[i.c,Q.c,C.b,H.c,f.b,N]]}),e})();var K=n("Tdft"),W=n("gEWx");function Y(e){switch(e){case"GRCH37":return"GRCh37 (hg19)";case"GRCH38":return"GRCh38 (hg38)";case"NCBI36":return"NCBI36 (hg18)";default:return e}}var Z=n("lnp5"),ee=n("IjnV"),te=n("JL65"),ne=n("qPVO"),ie=n("RwU8"),re=n("XyyK"),ae=n("C2AL");function oe(e,t){if(1&e&&(s.Ub(0,"nz-form-item"),s.Pb(1,"cvc-form-errors-alert",3),s.Tb()),2&e){const e=s.ec().ngIf;s.Cb(1),s.lc("errors",e)}}function se(e,t){if(1&e&&(s.Sb(0),s.Ec(1,oe,2,1,"nz-form-item",1),s.Rb()),2&e){const e=t.ngIf;s.Cb(1),s.lc("ngIf",e.length>0)}}function ce(e,t){1&e&&(s.Ub(0,"p"),s.Gc(1,"View it on the "),s.Ub(2,"a",7),s.Gc(3,"Revisions Page"),s.Tb(),s.Gc(4," or suggest another revision below."),s.Tb())}function le(e,t){if(1&e&&(s.Sb(0),s.Pb(1,"nz-alert",4),s.Ec(2,ce,5,0,"ng-template",5,6,s.Fc),s.Rb()),2&e){const e=s.uc(3);s.Cb(1),s.lc("nzDescription",e)}}function pe(e,t){if(1&e){const e=s.Vb();s.Ub(0,"nz-form-item"),s.Ub(1,"nz-form-control"),s.Ub(2,"cvc-form-buttons"),s.Ub(3,"cvc-org-selector-btn-group",8),s.bc("selectedOrgChange",function(t){return s.vc(e),s.ec().mostRecentOrg=t}),s.Ub(4,"button",9),s.Gc(5," Suggest Revision "),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()}if(2&e){const e=s.ec();s.Cb(3),s.lc("selectedOrg",e.mostRecentOrg),s.Cb(1),s.lc("disabled",!e.formGroup.valid)}}let de=(()=>{class e{constructor(e,t,n){this.revisionService=e,this.viewerService=t,this.revisableFieldsGQL=n,this.destroy$=new S.a,this.formGroup=new w.i({}),this.formOptions={},this.viewerService.viewer$.pipe(Object($.a)(this.destroy$)).subscribe(e=>{this.organizations=e.organizations,this.mostRecentOrg=e.mostRecentOrg}),this.submitError$=this.revisionService.submitError$,this.isSubmitting$=this.revisionService.isSubmitting$,this.submitSuccess$=this.revisionService.submitSuccess$,this.formFields=[{key:"id",type:"input",hide:!0},{key:"fields.description",type:"textarea",templateOptions:{label:"Description",placeholder:"Enter a description for this variant.",required:!1}},{key:"fields.sources",type:"multi-field",templateOptions:{label:"Sources",addText:"Add another Source"},fieldArray:{type:"source-input",templateOptions:{required:!0}}},{key:"fields.variantAliases",type:"multi-field",templateOptions:{label:"Variant Aliases",addText:"Add an Alias"},fieldArray:{type:"input",templateOptions:{required:!0,placeholder:"Add Alias"}}},{key:"fields.hgvsDescriptions",type:"multi-field",templateOptions:{label:"HGVS Descriptions",addText:"Add an HGVS Description"},fieldArray:{type:"input",templateOptions:{required:!0,placeholder:"Enter an HGVS string"}}},{key:"fields.clinvarIds",type:"multi-field",templateOptions:{label:"ClinVar IDs",addText:"Add a ClinVar ID"},fieldArray:{type:"input",templateOptions:{required:!0,placeholder:"Enter a ClinVar ID"}}},{key:"fields.variantTypes",type:"multi-field",templateOptions:{label:"Variant Types",addText:"Add a Variant Type"},fieldArray:{type:"variant-type-input",templateOptions:{required:!0}}},{template:"<h3>Primary Coordinates</h3>"},{key:"fields.referenceBuild",type:"select",defaultValue:c.Cb.Grch37,templateOptions:{label:"Reference Build",required:!1,options:Object(W.a)(c.Cb).map((e,t)=>({value:e,label:Y(e)}))}},{key:"fields.ensemblVersion",type:"input",templateOptions:{label:"Ensembl Version"},validators:{validation:["ensembl"]}},{key:"fields.fivePrimeCoordinates.chromosome",type:"select",defaultValue:void 0,templateOptions:{label:"Chromosome",required:!1,options:K.a}},{key:"fields.fivePrimeCoordinates.start",type:"input",templateOptions:{label:"Start"},validators:{validation:["integer"]}},{key:"fields.fivePrimeCoordinates.stop",type:"input",templateOptions:{label:"Stop"},validators:{validation:["integer"]}},{key:"fields.fivePrimeCoordinates.representativeTranscript",type:"input",templateOptions:{label:"Representative Transcript"}},{template:"<h3>Secondary Coordinates</h3>"},{key:"fields.threePrimeCoordinates.chromosome",type:"select",defaultValue:void 0,templateOptions:{label:"Chromosome",required:!1,options:K.a}},{key:"fields.threePrimeCoordinates.start",type:"input",templateOptions:{label:"Start"},validators:{validation:["integer"]}},{key:"fields.threePrimeCoordinates.stop",type:"input",templateOptions:{label:"Stop"},validators:{validation:["integer"]}},{key:"fields.threePrimeCoordinates.representativeTranscript",type:"input",templateOptions:{label:"Representative Transcript"}},{key:"comment",type:"comment-textarea",templateOptions:{label:"Comment",placeholder:"Please enter a comment describing your revision.",required:!0,minLength:10}}],this.submitSuccess$.pipe(Object($.a)(this.destroy$)).subscribe(e=>{e&&this.formOptions.resetModel&&this.formOptions.resetModel()})}ngOnInit(){this.revisableFieldsGQL.fetch({variantId:this.variantId}).subscribe(({data:{variant:e}})=>{e?this.formModel=this.toFormModel(e):console.error("Could not retrieve variant."),this.formOptions.updateInitialValue&&this.formOptions.updateInitialValue()})}selectOrg(e){this.mostRecentOrg=e}submitRevision(e){this.revisionService.suggest(this.toRevisionInput(e))}toFormModel(e){var t,n;return{id:e.id,fields:Object.assign(Object.assign({},e),{referenceBases:null===(t=e.fivePrimeCoordinates)||void 0===t?void 0:t.referenceBases,variantBases:null===(n=e.fivePrimeCoordinates)||void 0===n?void 0:n.variantBases}),comment:"",organizationId:void 0}}toRevisionInput(e){const t=e.fields;return Object.assign(Object.assign({},e),{fields:{name:t.name,geneId:t.gene.id,ensemblVersion:+t.ensemblVersion,description:K.f(t.description),clinvarIds:K.b(t.clinvarIds),primaryCoordinates:K.c(t.fivePrimeCoordinates),secondaryCoordinates:K.c(t.threePrimeCoordinates),referenceBases:K.f(t.referenceBases),variantBases:K.f(t.variantBases),referenceBuild:K.e(t.referenceBuild),hgvsDescriptions:t.hgvsDescriptions,sourceIds:e.fields.sources.map(e=>+e.id),variantTypeIds:e.fields.variantTypes.map(e=>+e.id),aliases:e.fields.variantAliases},organizationId:void 0===this.mostRecentOrg?void 0:this.mostRecentOrg.id})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.revisionService.cleanup()}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(V),s.Ob(Z.a),s.Ob(c.qc))},e.\u0275cmp=s.Ib({type:e,selectors:[["cvc-variant-revise-form"]],inputs:{variantId:"variantId"},decls:8,vars:14,consts:[["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[4,"ngIf"],[3,"form","fields","model","options","modelChange"],[3,"errors"],["nzType","success","nzMessage","Suggested Revision Submitted","nzShowIcon","",3,"nzDescription"],["nzSize","small"],["successMessage",""],["routerLink","../revisions"],[3,"selectedOrg","selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"]],template:function(e,t){1&e&&(s.Ub(0,"form",0),s.bc("ngSubmit",function(){return t.submitRevision(t.formModel)}),s.Ec(1,se,2,1,"ng-container",1),s.fc(2,"async"),s.Ec(3,le,4,1,"ng-container",1),s.fc(4,"async"),s.Ub(5,"formly-form",2),s.bc("modelChange",function(e){return t.formModel=e}),s.Tb(),s.Ec(6,pe,6,2,"nz-form-item",1),s.fc(7,"async"),s.Tb()),2&e&&(s.lc("formGroup",t.formGroup),s.Cb(1),s.lc("ngIf",s.gc(2,8,t.submitError$)),s.Cb(2),s.lc("ngIf",s.gc(4,10,t.submitSuccess$)),s.Cb(2),s.lc("form",t.formGroup)("fields",t.formFields)("model",t.formModel)("options",t.formOptions),s.Cb(1),s.lc("ngIf",!s.gc(7,12,t.submitSuccess$)))},directives:[w.u,w.p,I.b,w.j,i.q,z.f,C.c,I.c,ee.a,T.a,r.g,C.a,I.a,te.a,ne.a,O.a,ie.a,re.a,ae.a],pipes:[i.b],styles:[""]}),e})();function ue(e,t){if(1&e&&(s.Sb(0),s.Pb(1,"cvc-variant-revise-form",8),s.Rb()),2&e){const e=s.ec();s.Cb(1),s.lc("variantId",e.variantId)}}function be(e,t){1&e&&s.Gc(0,"Loading Variant...")}const fe=function(){return{rows:1}},ge=function(){return{rows:3}},me=function(){return{rows:4}},he=function(){return{rows:5}},ve=[{path:"",component:b,data:{breadcrumb:"Revise"},children:[{path:"",redirectTo:"suggest",pathMatch:"full"},{path:"suggest",component:(()=>{class e{constructor(e){this.route=e,this.routeParams$=this.route.params.subscribe(e=>{this.variantId=+e.variantId})}ngOnDestroy(){this.routeParams$.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(r.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["cvc-variants-suggest"]],decls:16,vars:11,consts:[[3,"nzGutter"],["nzSpan","16"],[4,"ngIf","ngIfElse"],["loadingVariant",""],["nzSpan","8"],["nzTitle","Instructions","nz-type","inner"],["nzDirection","vertical",2,"width","100%"],[3,"nzParagraph"],[3,"variantId"]],template:function(e,t){if(1&e&&(s.Ub(0,"nz-row",0),s.Ub(1,"nz-col",1),s.Ec(2,ue,2,1,"ng-container",2),s.Ec(3,be,1,0,"ng-template",null,3,s.Fc),s.Tb(),s.Ub(5,"nz-col",4),s.Ub(6,"nz-card",5),s.Ub(7,"nz-space",6),s.Ub(8,"nz-space-item"),s.Pb(9,"nz-skeleton",7),s.Tb(),s.Ub(10,"nz-space-item"),s.Pb(11,"nz-skeleton",7),s.Tb(),s.Ub(12,"nz-space-item"),s.Pb(13,"nz-skeleton",7),s.Tb(),s.Ub(14,"nz-space-item"),s.Pb(15,"nz-skeleton",7),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e){const e=s.uc(4);s.lc("nzGutter",16),s.Cb(2),s.lc("ngIf",t.variantId)("ngIfElse",e),s.Cb(7),s.lc("nzParagraph",s.pc(7,fe)),s.Cb(2),s.lc("nzParagraph",s.pc(8,ge)),s.Cb(2),s.lc("nzParagraph",s.pc(9,me)),s.Cb(2),s.lc("nzParagraph",s.pc(10,he))}},directives:[C.c,C.a,i.q,Q.a,H.a,H.b,f.a,de],styles:[""]}),e})(),data:{breadcrumb:"Suggest Revision"}}]}];let ye=(()=>{class e{}return e.\u0275mod=s.Mb({type:e}),e.\u0275inj=s.Lb({factory:function(t){return new(t||e)},imports:[[r.h.forChild(ve),J],r.h]}),e})();var ze=n("hFUy");let Oe=(()=>{class e{}return e.\u0275mod=s.Mb({type:e}),e.\u0275inj=s.Lb({factory:function(t){return new(t||e)},imports:[[i.c,ye,p.d,d.c,ze.a]]}),e})()}}]);