"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[2043],{7948:(K,L,e)=>{e.d(L,{m:()=>N});var t=e(4650),C=e(6895),o=e(6672),n=e(1102),f=e(3579),U=e(2826),M=e(9001),E=e(8664),Z=e(112),S=e(3193),$=e(125),I=e(5749),h=e(5105);function T(_,g){if(1&_&&(t.ynx(0),t._UZ(1,"span",2),t.BQk()),2&_){const r=t.oxw().$implicit;t.xp6(1),t.Q6J("innerHtml",r.text,t.oJD)}}function O(_,g){if(1&_&&(t.ynx(0),t._UZ(1,"cvc-user-tag",3),t.BQk()),2&_){const r=t.oxw().$implicit;t.xp6(1),t.Q6J("user",r)}}const R=function(_,g,r,W){return{id:_,name:g,link:r,revisionsetId:W}};function F(_,g){if(1&_&&(t.TgZ(0,"span"),t._UZ(1,"cvc-revision-tag",6),t.qZA()),2&_){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("revision",t.l5B(1,R,r.entityId,r.displayName,r.link,r.revisionsetId))}}const J=function(_,g,r){return{id:_,name:g,link:r}};function P(_,g){if(1&_&&(t.TgZ(0,"span"),t._UZ(1,"cvc-gene-tag",7),t.qZA()),2&_){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("gene",t.kEZ(1,J,r.entityId,r.displayName,r.link))}}const B=function(_,g,r,W){return{id:_,name:g,link:r,deprecated:W}};function D(_,g){if(1&_&&(t.TgZ(0,"span"),t._UZ(1,"cvc-variant-tag",8),t.qZA()),2&_){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("variant",t.l5B(1,B,r.entityId,r.displayName,r.link,r.deprecated))}}function Q(_,g){if(1&_&&(t.TgZ(0,"span"),t._UZ(1,"cvc-variant-group-tag",9),t.qZA()),2&_){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("variantgroup",t.kEZ(1,J,r.entityId,r.displayName,r.link))}}const A=function(_,g,r,W){return{id:_,name:g,status:r,link:W}};function z(_,g){if(1&_&&(t.TgZ(0,"span"),t._UZ(1,"cvc-evidence-tag",10),t.qZA()),2&_){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("evidence",t.l5B(1,A,r.entityId,r.displayName,r.status,r.link))}}function d(_,g){if(1&_&&(t.TgZ(0,"span"),t._UZ(1,"cvc-assertion-tag",11),t.qZA()),2&_){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("assertion",t.l5B(1,A,r.entityId,r.displayName,r.status,r.link))}}const i=function(_,g){return{id:_,name:g}};function l(_,g){if(1&_&&(t.TgZ(0,"span"),t._UZ(1,"cvc-organization-tag",12),t.qZA()),2&_){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("org",t.WLB(1,i,r.entityId,r.displayName))}}function m(_,g){if(1&_&&(t.TgZ(0,"span"),t._UZ(1,"cvc-molecular-profile-tag",13),t.qZA()),2&_){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("molecularProfile",t.l5B(1,B,r.entityId,r.displayName,r.link,r.deprecated))}}function u(_,g){if(1&_&&(t.TgZ(0,"span")(1,"nz-tag"),t._UZ(2,"i",14),t._uU(3),t.qZA()()),2&_){const r=t.oxw(2).$implicit;t.xp6(2),t.MGl("nzType","civic-",r.displayName.slice(0,-1),""),t.xp6(1),t.hij(" ",r.displayName,"")}}function x(_,g){if(1&_&&(t.ynx(0)(1,4),t.YNc(2,F,2,6,"span",5),t.YNc(3,P,2,5,"span",5),t.YNc(4,D,2,6,"span",5),t.YNc(5,Q,2,5,"span",5),t.YNc(6,z,2,6,"span",5),t.YNc(7,d,2,6,"span",5),t.YNc(8,l,2,4,"span",5),t.YNc(9,m,2,6,"span",5),t.YNc(10,u,4,2,"span",5),t.BQk()()),2&_){const r=t.oxw().$implicit;t.xp6(1),t.Q6J("ngSwitch",r.tagType),t.xp6(1),t.Q6J("ngSwitchCase","REVISION"),t.xp6(1),t.Q6J("ngSwitchCase","GENE"),t.xp6(1),t.Q6J("ngSwitchCase","VARIANT"),t.xp6(1),t.Q6J("ngSwitchCase","VARIANT_GROUP"),t.xp6(1),t.Q6J("ngSwitchCase","EVIDENCE_ITEM"),t.xp6(1),t.Q6J("ngSwitchCase","ASSERTION"),t.xp6(1),t.Q6J("ngSwitchCase","ORGANIZATION"),t.xp6(1),t.Q6J("ngSwitchCase","MOLECULAR_PROFILE"),t.xp6(1),t.Q6J("ngSwitchCase","ROLE")}}function y(_,g){if(1&_&&(t.ynx(0),t.YNc(1,T,2,1,"ng-container",1),t.YNc(2,O,2,1,"ng-container",1),t.YNc(3,x,11,10,"ng-container",1),t.BQk()),2&_){const r=g.$implicit;t.xp6(1),t.Q6J("ngIf","CommentTextSegment"==r.__typename),t.xp6(1),t.Q6J("ngIf","User"==r.__typename),t.xp6(1),t.Q6J("ngIf","CommentTagSegment"==r.__typename)}}class N{ngOnInit(){if(void 0===this.commentBodySegments)throw new Error("Must pass a list of comment body segments into comment body component.")}}N.\u0275fac=function(g){return new(g||N)},N.\u0275cmp=t.Xpm({type:N,selectors:[["cvc-comment-body"]],inputs:{commentBodySegments:"commentBodySegments"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"innerHtml"],[3,"user"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"revision"],[3,"gene"],[3,"variant"],[3,"variantgroup"],[3,"evidence"],[3,"assertion"],[3,"org"],[3,"molecularProfile"],["nz-icon","","nzTheme","twotone","nzTwotoneColor","#A0D8F5",3,"nzType"]],template:function(g,r){1&g&&t.YNc(0,y,4,3,"ng-container",0),2&g&&t.Q6J("ngForOf",r.commentBodySegments)},dependencies:[C.sg,C.O5,C.RF,C.n9,o.j,n.Ls,f.p,U.w,M.O,E.I,Z.u,S.H,$.I,I.m,h.p],encapsulation:2})},3801:(K,L,e)=>{e.d(L,{D:()=>w});var t=e(7630),C=e(4004),o=e(6579),n=e(4650),f=e(6895),U=e(6616),M=e(7044),E=e(3679),Z=e(1971),S=e(6152),$=e(1102),I=e(4383),h=e(6903),T=e(7579),O=e(2722),R=e(6123),F=e(9350),J=e(9169),P=e(4006),B=e(1664),D=e(6704),Q=e(5681),A=e(9597),z=e(822),d=e(1793),i=e(8227),l=e(9180),m=e(9383);function u(s,a){if(1&s){const c=n.EpF();n.TgZ(0,"nz-alert",7),n.NdJ("nzOnClose",function(){n.CHM(c);const v=n.oxw();return n.KtG(v.onSuccessBannerClose())}),n.qZA()}}function x(s,a){if(1&s&&(n.TgZ(0,"nz-form-item"),n._UZ(1,"cvc-form-errors-alert",8),n.qZA()),2&s){const c=n.oxw();n.xp6(1),n.Q6J("errors",c.errorMessages)}}class y{constructor(a,c,p){this.viewerService=a,this.addCommentGql=c,this.networkErrorService=p,this.commentAddedEvent=new n.vpe,this.destroy$=new T.x,this.success=!1,this.errorMessages=[],this.loading=!1,this.viewerService.viewer$.pipe((0,O.R)(this.destroy$)).subscribe(v=>{this.organizations=v.organizations,this.mostRecentOrg=v.mostRecentOrg}),this.addCommentMutator=new R.U(p)}selectOrg(a){this.mostRecentOrg=a}submitComment(){if(this.commentText){this.errorMessages=[];let c=this.addCommentMutator.mutate(this.addCommentGql,{input:{body:this.commentText,subject:this.subject,organizationId:void 0===this.mostRecentOrg?void 0:this.mostRecentOrg.id}});c.submitSuccess$.pipe((0,O.R)(this.destroy$)).subscribe(p=>{p&&(this.resetForm(),this.success=!0)}),c.submitError$.pipe((0,O.R)(this.destroy$)).subscribe(p=>{p&&(this.errorMessages=p,this.success=!1)}),c.isSubmitting$.pipe((0,O.R)(this.destroy$)).subscribe(p=>{this.loading=p})}}resetForm(){this.commentText="",this.commentAddedEvent.emit()}onSuccessBannerClose(){this.resetForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}y.\u0275fac=function(a){return new(a||y)(n.Y36(F.a),n.Y36(t.iGM),n.Y36(J.Y))},y.\u0275cmp=n.Xpm({type:y,selectors:[["cvc-comment-add-form"]],inputs:{subject:"subject"},outputs:{commentAddedEvent:"commentAddedEvent"},decls:12,vars:6,consts:[["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[4,"ngIf"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[3,"selectedOrg","selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"],["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose"],[3,"errors"]],template:function(a,c){1&a&&(n.TgZ(0,"nz-card"),n.YNc(1,u,1,0,"nz-alert",0),n.TgZ(2,"form",1),n.NdJ("ngSubmit",function(){return c.submitComment()}),n.YNc(3,x,2,1,"nz-form-item",2),n.TgZ(4,"cvc-comment-input-form",3),n.NdJ("commentChange",function(v){return c.commentText=v}),n.qZA(),n.TgZ(5,"nz-spin",4)(6,"nz-form-item")(7,"nz-form-control")(8,"cvc-form-buttons")(9,"cvc-org-selector-btn-group",5),n.NdJ("selectedOrgChange",function(v){return c.mostRecentOrg=v}),n.TgZ(10,"button",6),n._uU(11," Add Comment "),n.qZA()()()()()()()()),2&a&&(n.xp6(1),n.Q6J("ngIf",c.success),n.xp6(2),n.Q6J("ngIf",c.errorMessages.length>0),n.xp6(1),n.Q6J("comment",c.commentText),n.xp6(1),n.Q6J("nzSpinning",c.loading),n.xp6(4),n.Q6J("selectedOrg",c.mostRecentOrg),n.xp6(1),n.Q6J("disabled",c.loading||!(void 0!==c.commentText&&c.commentText.length>=10)))},dependencies:[f.O5,P._Y,P.JL,U.ix,M.w,B.dQ,Z.bd,E.t3,E.SK,D.Lr,D.Nx,D.Fd,Q.W,A.r,P.F,z.V,d.m,i.q,l.Z,m.b],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2});var N=e(8747),_=e(3682),g=e(7948),r=e(5083);function W(s,a){if(1&s&&n._UZ(0,"nz-avatar",4),2&s){const c=n.oxw();n.Q6J("nzSrc",c.comment.commenter.profileImagePath)}}function H(s,a){1&s&&n._UZ(0,"nz-avatar",5)}class G{ngOnInit(){if(void 0===this.comment)throw new Error("Must pass a comment into comment display component.")}}G.\u0275fac=function(a){return new(a||G)},G.\u0275cmp=n.Xpm({type:G,selectors:[["cvc-comment-display"]],inputs:{comment:"comment"},decls:7,vars:7,consts:[[3,"nzAuthor","nzDatetime"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],[3,"commentBodySegments"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","","nzIcon","civic:curator"]],template:function(a,c){if(1&a&&(n.TgZ(0,"nz-comment",0),n.ALo(1,"timeAgo"),n.YNc(2,W,1,1,"nz-avatar",1),n.YNc(3,H,1,0,"ng-template",null,2,n.W1O),n.TgZ(5,"nz-comment-content"),n._UZ(6,"cvc-comment-body",3),n.qZA()()),2&a){const p=n.MAs(4);n.Q6J("nzAuthor",c.comment.commenter.displayName)("nzDatetime",n.lcZ(1,5,c.comment.createdAt)),n.xp6(2),n.Q6J("ngIf",c.comment.commenter.profileImagePath)("ngIfElse",p),n.xp6(4),n.Q6J("commentBodySegments",c.comment.parsedComment)}},dependencies:[f.O5,_.WE,_.DA,_.Y4,I.Dz,g.m,r.x],encapsulation:2});var V=e(2635),b=e(9058);function X(s,a){if(1&s){const c=n.EpF();n.TgZ(0,"div",18)(1,"button",19),n.NdJ("click",function(){n.CHM(c);const v=n.oxw().ngIf,Y=n.oxw(3);return n.KtG(Y.onLoadMore(v.startCursor))}),n._uU(2," Load older comments "),n.qZA()()}}function q(s,a){if(1&s&&(n.TgZ(0,"nz-list-header"),n.YNc(1,X,3,0,"div",17),n.qZA()),2&s){const c=a.ngIf;n.xp6(1),n.Q6J("ngIf",c.hasPreviousPage)}}function k(s,a){if(1&s&&(n.TgZ(0,"nz-list-item"),n._UZ(1,"cvc-comment-display",20),n.qZA()),2&s){const c=a.$implicit;n.xp6(1),n.Q6J("comment",c)}}function nn(s,a){if(1&s&&(n.TgZ(0,"nz-card",13)(1,"nz-list",14),n.ALo(2,"ngrxPush"),n.ALo(3,"ngrxPush"),n.YNc(4,q,2,1,"nz-list-header",15),n.ALo(5,"ngrxPush"),n.YNc(6,k,2,1,"ng-template",null,16,n.W1O),n.qZA()()),2&s){const c=n.MAs(7),p=n.oxw(2);n.xp6(1),n.Q6J("nzDataSource",n.lcZ(2,4,p.comments$))("nzLoading",n.lcZ(3,6,p.loading$))("nzRenderItem",c),n.xp6(3),n.Q6J("ngIf",n.lcZ(5,8,p.pageInfo$))}}function tn(s,a){if(1&s){const c=n.EpF();n.TgZ(0,"cvc-comment-add-form",21),n.NdJ("commentAddedEvent",function(){n.CHM(c);const v=n.oxw(2);return n.KtG(v.refreshList())}),n.qZA()}if(2&s){const c=n.oxw(2);n.Q6J("subject",c.commentable)}}function en(s,a){if(1&s&&n._UZ(0,"nz-avatar",24),2&s){const c=n.oxw().$implicit;n.Q6J("nzSrc",c.profileImagePath)}}function on(s,a){if(1&s&&(n._UZ(0,"nz-avatar",25),n.ALo(1,"uppercase")),2&s){const c=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,c.displayName.charAt(0)))}}function cn(s,a){if(1&s&&(n.YNc(0,en,1,1,"nz-avatar",22),n.YNc(1,on,2,3,"ng-template",null,23,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&s){const c=a.$implicit,p=n.MAs(2);n.Q6J("ngIf",c.profileImagePath)("ngIfElse",p),n.xp6(4),n.Oqu(c.displayName)}}function an(s,a){if(1&s&&n._UZ(0,"nz-avatar",24),2&s){const c=n.oxw().$implicit;n.Q6J("nzSrc",c.profileImagePath)}}function mn(s,a){if(1&s&&(n._UZ(0,"nz-avatar",25),n.ALo(1,"uppercase")),2&s){const c=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,c.displayName.charAt(0)))}}function sn(s,a){if(1&s&&(n.YNc(0,an,1,1,"nz-avatar",22),n.YNc(1,mn,2,3,"ng-template",null,23,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&s){const c=a.$implicit,p=n.MAs(2);n.Q6J("ngIf",c.profileImagePath)("ngIfElse",p),n.xp6(4),n.Oqu(c.displayName)}}function rn(s,a){if(1&s&&(n._UZ(0,"nz-avatar",26),n.TgZ(1,"span"),n._uU(2),n.qZA()),2&s){const c=a.$implicit;n.MGl("nzIcon","civic-",c.tag.displayName,""),n.xp6(2),n.hij("",c.tag.displayName,"s")}}function _n(s,a){if(1&s&&(n._UZ(0,"i",27),n.ALo(1,"iconNameForSubscribableEntity"),n.TgZ(2,"span"),n._uU(3),n.qZA()),2&s){const c=a.$implicit;n.Q6J("nzType",n.lcZ(1,2,c.tag.tagType)),n.xp6(3),n.Oqu(c.tag.displayName)}}const j=function(){return[]};function ln(s,a){if(1&s){const c=n.EpF();n.ynx(0),n.TgZ(1,"nz-row",2)(2,"nz-col",3)(3,"nz-space",4),n.YNc(4,nn,8,10,"nz-card",5),n.YNc(5,tn,1,1,"cvc-comment-add-form",6),n.qZA()(),n.TgZ(6,"nz-col",7)(7,"cvc-participant-list",8),n.NdJ("participantSelectedEvent",function(v){n.CHM(c);const Y=n.oxw();return n.KtG(Y.onCommenterSelected(v))}),n.ALo(8,"ngrxPush"),n.YNc(9,cn,5,3,"ng-template",null,9,n.W1O),n.qZA(),n.TgZ(11,"cvc-participant-list",10),n.NdJ("participantSelectedEvent",function(v){n.CHM(c);const Y=n.oxw();return n.KtG(Y.onMentionedUserSelected(v))}),n.ALo(12,"ngrxPush"),n.YNc(13,sn,5,3,"ng-template",null,9,n.W1O),n.qZA(),n.TgZ(15,"cvc-participant-list",11),n.NdJ("participantSelectedEvent",function(v){n.CHM(c);const Y=n.oxw();return n.KtG(Y.onMentionedRoleSelected(v))}),n.ALo(16,"ngrxPush"),n.YNc(17,rn,3,2,"ng-template",null,9,n.W1O),n.qZA(),n.TgZ(19,"cvc-participant-list",12),n.NdJ("participantSelectedEvent",function(v){n.CHM(c);const Y=n.oxw();return n.KtG(Y.onMentionedEntitySelected(v))}),n.ALo(20,"ngrxPush"),n.YNc(21,_n,4,4,"ng-template",null,9,n.W1O),n.qZA()()(),n.BQk()}if(2&s){const c=n.oxw();n.xp6(1),n.Q6J("nzGutter",16),n.xp6(6),n.Q6J("participantList",n.lcZ(8,5,c.commenters$)||n.DdM(13,j)),n.xp6(4),n.Q6J("participantList",n.lcZ(12,7,c.mentionedUsers$)||n.DdM(14,j)),n.xp6(4),n.Q6J("participantList",n.lcZ(16,9,c.mentionedRoles$)||n.DdM(15,j)),n.xp6(4),n.Q6J("participantList",n.lcZ(20,11,c.mentionedEntities$)||n.DdM(16,j))}}function pn(s,a){if(1&s){const c=n.EpF();n.TgZ(0,"cvc-comment-add-form",21),n.NdJ("commentAddedEvent",function(){n.CHM(c);const v=n.oxw();return n.KtG(v.refreshList())}),n.qZA()}if(2&s){const c=n.oxw();n.Q6J("subject",c.commentable)}}class w{constructor(a){this.gql=a,this.pageSize=5}ngOnInit(){this.queryRef$=this.gql.watch({subject:this.commentable,last:this.pageSize,sortBy:{column:t.h01.Created,direction:t.SrV.Asc}});let a=this.queryRef$.valueChanges;this.pageInfo$=a.pipe((0,C.U)(({data:c})=>c.comments.pageInfo)),this.loading$=a.pipe((0,C.U)(({loading:c})=>c)),this.comments$=a.pipe((0,C.U)(({data:c})=>c.comments.edges.map(p=>p.node))),this.commenters$=a.pipe((0,C.U)(({data:c})=>c.comments.uniqueCommenters)),this.mentionedUsers$=a.pipe((0,C.U)(({data:c})=>c.comments.mentionedUsers)),this.mentionedRoles$=a.pipe((0,C.U)(({data:c})=>c.comments.mentionedRoles.map(p=>({id:`${p.entityId}-${p.tagType}`,tag:p})))),this.mentionedEntities$=a.pipe((0,C.U)(({data:c})=>c.comments.mentionedEntities.map(p=>({id:`${p.entityId}-${p.tagType}`,tag:p})))),this.unfilteredCount$=a.pipe((0,o.j)("data","comments","unfilteredCountForSubject"))}onLoadMore(a){this.queryRef$.fetchMore({variables:{last:this.pageSize,before:a}})}onCommenterSelected(a){this.queryRef$.refetch({originatingUserId:a?.id})}onMentionedUserSelected(a){this.queryRef$.refetch({mentionedUserId:a?.id})}onMentionedRoleSelected(a){if(a){let c=t.i44[a.tag.displayName[0].toUpperCase()+a.tag.displayName.slice(1)];this.queryRef$.refetch({mentionedRole:c})}else this.queryRef$.refetch({mentionedRole:void 0})}onMentionedEntitySelected(a){this.queryRef$.refetch(a?{mentionedEntity:{entityType:a.tag.tagType,id:a.tag.entityId}}:{mentionedEntity:void 0})}refreshList(){this.queryRef$.refetch()}}w.\u0275fac=function(a){return new(a||w)(n.Y36(t.iST))},w.\u0275cmp=n.Xpm({type:w,selectors:[["cvc-comment-list"]],inputs:{commentable:"commentable"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noComments",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical",2,"width","100%"],["nzTitle","Comments",4,"nzSpaceItem"],["id","addComment",3,"subject","commentAddedEvent",4,"nzSpaceItem"],["nzSpan","6"],["listTitle","Commenters",3,"participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Mentioned Users",3,"participantList","participantSelectedEvent"],["listTitle","Mentioned Roles",3,"participantList","participantSelectedEvent"],["listTitle","Mentioned Entities",3,"participantList","participantSelectedEvent"],["nzTitle","Comments"],["nzSize","small","nzItemLayout","horizontal",3,"nzDataSource","nzLoading","nzRenderItem"],[4,"ngIf"],["comment",""],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","link","nzSize","small","nzBlock","",3,"click"],[3,"comment"],["id","addComment",3,"subject","commentAddedEvent"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],[3,"nzIcon"],["nz-icon","",3,"nzType"]],template:function(a,c){if(1&a&&(n.YNc(0,ln,23,17,"ng-container",0),n.ALo(1,"ngrxPush"),n.YNc(2,pn,1,1,"ng-template",null,1,n.W1O)),2&a){const p=n.MAs(3);n.Q6J("ngIf",n.lcZ(1,2,c.unfilteredCount$))("ngIfElse",p)}},dependencies:[f.O5,U.ix,M.w,E.t3,E.SK,Z.bd,S.n_,S.t4,S.AA,$.Ls,I.Dz,h.NU,h.$1,y,N.l,G,f.gd,V.fM,b.j],styles:["[_nghost-%COMP%]{display:block}nz-list-header[_ngcontent-%COMP%]{padding:0;margin:0}nz-list-header[_ngcontent-%COMP%]   [nz-list-load-more][_ngcontent-%COMP%]{margin-top:-.5em;padding-bottom:.5em}"]})},2278:(K,L,e)=>{e.d(L,{l:()=>x});var t=e(6895),C=e(3679),o=e(1971),n=e(6152),f=e(4383),U=e(6903),M=e(2635),E=e(545),Z=e(1150),S=e(3682),$=e(8909),I=e(9444),h=e(4650);class T{}T.\u0275fac=function(N){return new(N||T)},T.\u0275mod=h.oAB({type:T}),T.\u0275inj=h.cJS({imports:[t.ez,S.YM,f.Rt,$.m,I.s]});var O=e(4006),R=e(6212),F=e(6704),J=e(7008),P=e(1825),B=e(4375),D=e(6616),Q=e(4623),A=e(3513),z=e(5681),d=e(3997),i=e(4509),l=e(9597);class m{}m.\u0275fac=function(N){return new(N||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[t.ez,O.UX,M._N,M.pP,D.sL,o.vh,A.we,F.U5,z.j,d.Gl,l.L,O.u5,R.X0,J.B,P.A,B.R,$.m,Q.K,i.w]});var u=e(1102);class x{}x.\u0275fac=function(N){return new(N||x)},x.\u0275mod=h.oAB({type:x}),x.\u0275inj=h.cJS({imports:[t.ez,M._N,M.pP,D.sL,C.Jb,o.vh,n.Ph,u.PV,I.s,f.Rt,U.zf,E.H0,m,Z.N,T]})},9058:(K,L,e)=>{e.d(L,{j:()=>o});var t=e(7630),C=e(4650);class o{transform(f){switch(f){case"ASSERTION":case"Assertion":case t.o71.Assertion:return"civic-assertion";case"EVIDENCE_ITEM":case"EvidenceItem":case t.o71.EvidenceItem:return"civic-evidence";case"GENE":case"Gene":case t.o71.Gene:return"civic-gene";case t.o71.Revision:case"REVISION":case"Revision":return"civic-revision";case t.o71.Variant:case"VARIANT":case"Variant":return"civic-variant";case t.o71.VariantGroup:case"VARIANT_GROUP":case"VariantGroup":return"civic-variant-group";case t.o71.MolecularProfile:case"MOLECULAR_PROFILE":case"MolecularProfile":return"civic-molecularprofile";default:return console.log("String No icon name found for "+f),"border-outer"}}}o.\u0275fac=function(f){return new(f||o)},o.\u0275pipe=C.Yjl({name:"iconNameForSubscribableEntity",type:o,pure:!0})},9383:(K,L,e)=>{e.d(L,{b:()=>A});var t=e(4650),C=e(7579),o=e(7630),n=e(9300),f=e(2722),U=e(4004),M=e(8675),E=e(6579),Z=e(3240),S=e(9350),$=e(6895),I=e(4006),h=e(2635),T=e(3513),O=e(5681),R=e(3997),F=e(7948);function J(z,d){if(1&z&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.BQk()),2&z){const i=d.$implicit;t.xp6(2),t.Oqu(i.displayName)}}function P(z,d){1&z&&(t.ynx(0),t._UZ(1,"nz-spin",8),t.BQk())}function B(z,d){if(1&z&&(t.ynx(0),t._UZ(1,"cvc-comment-body",9),t.BQk()),2&z){const i=d.ngIf;t.xp6(1),t.Q6J("commentBodySegments",i)}}const D=function(){return["#","@","$"]};function Q(z,d){if(1&z){const i=t.EpF();t.ynx(0),t.TgZ(1,"nz-tabset",1)(2,"nz-tab",2)(3,"nz-mention",3),t.NdJ("nzOnSearchChange",function(m){t.CHM(i);const u=t.oxw();return t.KtG(u.onSearchChange(m))})("nzOnSelect",function(){t.CHM(i);const m=t.oxw();return t.KtG(m.suggestions=[])}),t.TgZ(4,"textarea",4),t.NdJ("ngModelChange",function(m){t.CHM(i);const u=t.oxw();return t.KtG(u.commentText=m)})("ngModelChange",function(m){t.CHM(i);const u=t.oxw();return t.KtG(u.onCommentChanged(m))}),t.qZA(),t.YNc(5,J,3,1,"ng-container",5),t.qZA()(),t.TgZ(6,"nz-tab",6),t.NdJ("nzClick",function(){t.CHM(i);const m=t.oxw();return t.KtG(m.onPreviewButtonClicked())}),t.YNc(7,P,2,0,"ng-container",7),t.ALo(8,"ngrxPush"),t.YNc(9,B,2,1,"ng-container",7),t.ALo(10,"ngrxPush"),t.qZA()(),t.BQk()}if(2&z){const i=d.ngrxLet,l=t.oxw();t.xp6(1),t.Q6J("nzAnimated",!1),t.xp6(2),t.Q6J("nzSuggestions",l.suggestions)("nzPrefix",t.DdM(13,D))("nzValueWith",l.autoCompleteValueFor),t.xp6(1),t.Q6J("placeholder",i&&i.canCurate?"Enter comment (minimum length 10. Use @ to mention users; # to link entities)":"Please sign in")("ngModel",l.commentText),t.uIk("disabled",!i||!i.canCurate||null),t.xp6(3),t.Q6J("ngIf",t.lcZ(8,9,l.previewLoading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(10,11,l.previewComment$))}}class A{constructor(d,i,l,m){this.previewCommentGql=d,this.userTypeaheadGql=i,this.entityTypeaheadGql=l,this.viewerService=m,this.commentChange=new t.vpe,this.destroy$=new C.x,this.suggestions=[],this.roleSuggestions=[{displayName:"admins",value:"admins"},{displayName:"editors",value:"editors"}]}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.commentText=this.comment,this.userTypeaheadQueryRef$=this.userTypeaheadGql.watch({queryTerm:""}),this.userTypeaheadQueryRef$.valueChanges.pipe((0,E.j)("data","userTypeahead"),(0,n.h)(Z.ep),(0,f.R)(this.destroy$)).subscribe(d=>this.suggestions=d.map(i=>({displayName:i.username,value:i.username}))),this.entityTypeaheadQueryRef$=this.entityTypeaheadGql.watch({queryTerm:""}),this.entityTypeaheadQueryRef$.valueChanges.pipe((0,E.j)("data","entityTypeahead"),(0,n.h)(Z.ep),(0,f.R)(this.destroy$)).subscribe(d=>this.suggestions=d.map(i=>({displayName:i.displayName,value:this.tagForEntityTypeAndId(i.tagType,i.entityId)})))}ngOnChanges(){this.commentText=this.comment}autoCompleteValueFor(d){return d.value}tagForEntityTypeAndId(d,i){switch(d){case o.mpB.Gene:return`GID${i}`;case o.mpB.Variant:return`VID${i}`;case o.mpB.VariantGroup:return`VGID${i}`;case o.mpB.EvidenceItem:return`EID${i}`;case o.mpB.Assertion:return`AID${i}`;case o.mpB.Revision:return`RID${i}`;case o.mpB.MolecularProfile:return`MPID${i}`;case o.mpB.Role:return Object.keys(o.i44)[i]}}resetForm(){this.commentText=""}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreviewButtonClicked(){this.commentText&&(this.previewComment$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,E.j)("data","previewCommentText"),(0,n.h)(Z.ep)),this.previewLoading$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,U.U)(({loading:d})=>d),(0,M.O)(!0)))}onSearchChange({value:d,prefix:i}){"@"===i?this.userTypeaheadQueryRef$.refetch({queryTerm:d}):"$"==i?this.suggestions=this.roleSuggestions.filter(l=>l.value.startsWith(d)):this.entityTypeaheadQueryRef$.refetch({queryTerm:d})}onCommentChanged(d){this.commentChange.emit(d)}}A.\u0275fac=function(d){return new(d||A)(t.Y36(o.mII),t.Y36(o.vMt),t.Y36(o.GYx),t.Y36(S.a))},A.\u0275cmp=t.Xpm({type:A,selectors:[["cvc-comment-input-form"]],inputs:{comment:"comment"},outputs:{commentChange:"commentChange"},features:[t.TTD],decls:1,vars:1,consts:[[4,"ngrxLet"],[3,"nzAnimated"],["nzTitle","Write"],["nzNotFoundContent","No matches...",3,"nzSuggestions","nzPrefix","nzValueWith","nzOnSearchChange","nzOnSelect"],["nzMentionTrigger","","nz-input","","rows","4",2,"width","100%",3,"placeholder","ngModel","ngModelChange"],[4,"nzMentionSuggestion"],["nzTitle","Preview",3,"nzClick"],[4,"ngIf"],["nzTip","Loading..."],[3,"commentBodySegments"]],template:function(d,i){1&d&&t.YNc(0,Q,11,14,"ng-container",0),2&d&&t.Q6J("ngrxLet",i.viewer$)},dependencies:[$.O5,I.Fj,I.JJ,h.eJ,T.xH,T.xw,O.W,R.YW,R.jO,R.O3,I.On,F.m,h.fM],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2})},3682:(K,L,e)=>{e.d(L,{DA:()=>P,WE:()=>A,Y4:()=>B,YM:()=>d});var t=e(445),C=e(6895),o=e(4650),n=e(6287),f=e(4080),U=e(7579),M=e(2722);function E(i,l){1&i&&o.Hsn(0)}const Z=["*"];function S(i,l){if(1&i&&(o.ynx(0),o._uU(1),o.BQk()),2&i){const m=o.oxw(2);o.xp6(1),o.Oqu(m.nzAuthor)}}function $(i,l){if(1&i&&(o.TgZ(0,"span",8),o.YNc(1,S,2,1,"ng-container",9),o.qZA()),2&i){const m=o.oxw();o.xp6(1),o.Q6J("nzStringTemplateOutlet",m.nzAuthor)}}function I(i,l){if(1&i&&(o.ynx(0),o._uU(1),o.BQk()),2&i){const m=o.oxw(2);o.xp6(1),o.Oqu(m.nzDatetime)}}function h(i,l){if(1&i&&(o.TgZ(0,"span",10),o.YNc(1,I,2,1,"ng-container",9),o.qZA()),2&i){const m=o.oxw();o.xp6(1),o.Q6J("nzStringTemplateOutlet",m.nzDatetime)}}function T(i,l){}function O(i,l){if(1&i&&(o.TgZ(0,"li")(1,"span"),o.YNc(2,T,0,0,"ng-template",13),o.qZA()()),2&i){const m=l.$implicit;o.xp6(2),o.Q6J("nzCommentActionHost",m.content)}}function R(i,l){if(1&i&&(o.TgZ(0,"ul",11),o.YNc(1,O,3,1,"li",12),o.qZA()),2&i){const m=o.oxw();o.xp6(1),o.Q6J("ngForOf",m.actions)}}const F=[[["nz-avatar","nz-comment-avatar",""]],[["nz-comment-content"]],"*"],J=["nz-avatar[nz-comment-avatar]","nz-comment-content","*"];let P=(()=>{class i{}return i.\u0275fac=function(m){return new(m||i)},i.\u0275dir=o.lG2({type:i,selectors:[["nz-avatar","nz-comment-avatar",""]],exportAs:["nzCommentAvatar"]}),i})(),B=(()=>{class i{}return i.\u0275fac=function(m){return new(m||i)},i.\u0275dir=o.lG2({type:i,selectors:[["nz-comment-content"],["","nz-comment-content",""]],hostAttrs:[1,"ant-comment-content-detail"],exportAs:["nzCommentContent"]}),i})(),D=(()=>{class i extends f.Pl{constructor(m,u){super(m,u)}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}ngAfterViewInit(){this.attach(this.nzCommentActionHost)}}return i.\u0275fac=function(m){return new(m||i)(o.Y36(o._Vd),o.Y36(o.s_b))},i.\u0275dir=o.lG2({type:i,selectors:[["","nzCommentActionHost",""]],inputs:{nzCommentActionHost:"nzCommentActionHost"},exportAs:["nzCommentActionHost"],features:[o.qOj]}),i})(),Q=(()=>{class i{constructor(m){this.viewContainerRef=m,this.contentPortal=null}get content(){return this.contentPortal}ngOnInit(){this.contentPortal=new f.UE(this.implicitContent,this.viewContainerRef)}}return i.\u0275fac=function(m){return new(m||i)(o.Y36(o.s_b))},i.\u0275cmp=o.Xpm({type:i,selectors:[["nz-comment-action"]],viewQuery:function(m,u){if(1&m&&o.Gf(o.Rgc,7),2&m){let x;o.iGM(x=o.CRH())&&(u.implicitContent=x.first)}},exportAs:["nzCommentAction"],ngContentSelectors:Z,decls:1,vars:0,template:function(m,u){1&m&&(o.F$t(),o.YNc(0,E,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),i})(),A=(()=>{class i{constructor(m,u){this.cdr=m,this.directionality=u,this.dir="ltr",this.destroy$=new U.x}ngOnInit(){this.directionality.change?.pipe((0,M.R)(this.destroy$)).subscribe(m=>{this.dir=m,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(m){return new(m||i)(o.Y36(o.sBO),o.Y36(t.Is,8))},i.\u0275cmp=o.Xpm({type:i,selectors:[["nz-comment"]],contentQueries:function(m,u,x){if(1&m&&o.Suo(x,Q,4),2&m){let y;o.iGM(y=o.CRH())&&(u.actions=y)}},hostVars:4,hostBindings:function(m,u){2&m&&o.ekj("ant-comment",!0)("ant-comment-rtl","rtl"===u.dir)},inputs:{nzAuthor:"nzAuthor",nzDatetime:"nzDatetime"},exportAs:["nzComment"],ngContentSelectors:J,decls:11,vars:3,consts:[[1,"ant-comment-inner"],[1,"ant-comment-avatar"],[1,"ant-comment-content"],[1,"ant-comment-content-author"],["class","ant-comment-content-author-name",4,"ngIf"],["class","ant-comment-content-author-time",4,"ngIf"],["class","ant-comment-actions",4,"ngIf"],[1,"ant-comment-nested"],[1,"ant-comment-content-author-name"],[4,"nzStringTemplateOutlet"],[1,"ant-comment-content-author-time"],[1,"ant-comment-actions"],[4,"ngFor","ngForOf"],[3,"nzCommentActionHost"]],template:function(m,u){1&m&&(o.F$t(F),o.TgZ(0,"div",0)(1,"div",1),o.Hsn(2),o.qZA(),o.TgZ(3,"div",2)(4,"div",3),o.YNc(5,$,2,1,"span",4),o.YNc(6,h,2,1,"span",5),o.qZA(),o.Hsn(7,1),o.YNc(8,R,2,1,"ul",6),o.qZA()(),o.TgZ(9,"div",7),o.Hsn(10,2),o.qZA()),2&m&&(o.xp6(5),o.Q6J("ngIf",u.nzAuthor),o.xp6(1),o.Q6J("ngIf",u.nzDatetime),o.xp6(2),o.Q6J("ngIf",null==u.actions?null:u.actions.length))},dependencies:[C.sg,C.O5,n.f,D],encapsulation:2,changeDetection:0}),i})(),d=(()=>{class i{}return i.\u0275fac=function(m){return new(m||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[t.vT,C.ez,n.T]}),i})()}}]);