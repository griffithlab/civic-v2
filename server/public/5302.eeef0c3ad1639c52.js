"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[5302],{8253:(_,h,i)=>{i.d(h,{Z:()=>c});var t=i(6814),m=i(4190),s=i(1227),v=i(7165),o=i(2840),n=i(279),f=i(3903),l=i(1403),p=i(5879);let c=(()=>{class a{}return a.\u0275fac=function(T){return new(T||a)},a.\u0275mod=p.oAB({type:a}),a.\u0275inj=p.cJS({imports:[t.ez,m.Bz,o.sL,f.L,v.S,s.g,l.Q,n.s]}),a})()},1679:(_,h,i)=>{i.d(h,{l:()=>D});var t=i(655),m=i(6223),s=i(2024),v=i(7382),o=i(2114),n=i(1791),f=i(9390);const c=(0,i(7570).Z)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"New Evidence Item"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"molecularProfileId",type:"molecular-profile-select",props:{required:!0,tooltip:"A single variant (Simple Molecular Profile) or a combination of variants (Complex Molecular Profile) relevant to the curated evidence.",watchVariantMolecularProfileId:!0}},{key:"sourceId",type:"source-select",props:{required:!0}}]},{wrappers:["form-row"],props:{formRowOptions:{responsive:{xs:24,lg:12,xl:8,xxl:6}}},fieldGroup:[{key:"evidenceType",type:"type-select",props:{required:!0}},{key:"evidenceDirection",type:"direction-select",props:{required:!0}},{key:"significance",type:"significance-select",props:{required:!0}},{key:"diseaseId",type:"disease-select",props:{}},{key:"therapyIds",type:"therapy-multi-select",props:{}},{key:"therapyInteractionType",type:"interaction-select",props:{}},{key:"evidenceLevel",type:"level-select",props:{required:!0}},{key:"rating",type:"rating",props:{required:!0}},{key:"variantOrigin",type:"origin-select",props:{required:!0}},{key:"phenotypeIds",type:"phenotype-multi-select",props:{}}]},{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"description",type:"base-textarea",props:{tooltip:"Your original description of evidence from published literature detailing the association or lack of association between a variant and its predictive, prognostic, diagnostic, predisposing, functional or oncogenic value. ",placeholder:"Enter an Evidence Statement",description:'Data constituting personal or identifying information should not be entered (e.g. <a href="https://www.hipaajournal.com/what-is-protected-health-information/" target="_blank">protected health information (PHI) as defined by HIPAA</a> in the U.S. and/or comparable laws in your jurisdiction).',label:"Evidence Statement",required:!0}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",required:!1,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Evidence Item",align:"right"}}]}]}],f.C);var E,a=i(7398),g=i(2181),T=i(5676),e=i(5879),C=i(313),O=i(4190),M=i(7473),q=i(6814),w=i(3903),L=i(5545),b=i(3599),F=i(9928),$=i(6822),R=i(8091);const U=function(u){return["/evidence",u,"summary"]};function N(u,r){if(1&u&&(e._uU(0," View your new EID "),e.TgZ(1,"a",5),e._uU(2,"here"),e.qZA(),e._uU(3,". You will be redirected shortly. ")),2&u){const d=e.oxw();e.xp6(1),e.Q6J("routerLink",e.VKq(1,U,d.newEvidenceId))}}function Q(u,r){if(1&u&&e._UZ(0,"nz-alert",8),2&u){e.oxw();const d=e.MAs(3);e.Q6J("nzMessage",d)}}function z(u,r){if(1&u&&(e.TgZ(0,"p")(1,"strong"),e._uU(2," Evidence for this Molecular Profile has already been curated from this Source. Please double check that your Evidence has not already been entered. "),e.qZA()(),e._UZ(3,"cvc-evidence-table",9)),2&u){const d=e.oxw(2);e.xp6(3),e.Q6J("molecularProfileId",d.selectedMpId)("sourceId",d.selectedSourceId)}}function B(u,r){if(1&u&&(e.ynx(0),e.YNc(1,Q,1,1,"nz-alert",6),e.YNc(2,z,4,2,"ng-template",null,7,e.W1O),e._UZ(4,"br"),e.BQk()),2&u){const d=r.ngIf;e.xp6(1),e.Q6J("ngIf",d>0)}}function X(u,r){if(1&u&&e._UZ(0,"nz-alert",8),2&u){e.oxw();const d=e.MAs(3);e.Q6J("nzMessage",d)}}function G(u,r){if(1&u&&(e.TgZ(0,"p")(1,"strong"),e._uU(2," This Source has been marked as fully curated by an Editor. Please double check that your intended Evidence Item does not already exist. "),e.qZA()(),e._UZ(3,"cvc-evidence-table",11)),2&u){const d=e.oxw(2);e.xp6(3),e.Q6J("sourceId",d.selectedSourceId)}}function W(u,r){if(1&u&&(e.ynx(0),e.YNc(1,X,1,1,"nz-alert",6),e.YNc(2,G,4,1,"ng-template",null,10,e.W1O),e._UZ(4,"br"),e.BQk()),2&u){const d=r.ngIf;e.xp6(1),e.Q6J("ngIf",d)}}function K(u,r){if(1&u){const d=e.EpF();e.TgZ(0,"form",12),e.NdJ("ngSubmit",function(){e.CHM(d);const y=e.oxw();return e.KtG(y.onSubmit(y.model))}),e.TgZ(1,"formly-form",13),e.NdJ("modelChange",function(y){e.CHM(d);const S=e.oxw();return S.model=y,e.KtG(S.onModelChange(y))}),e.qZA()()}if(2&u){const d=e.oxw();e.Q6J("formGroup",d.form),e.xp6(1),e.Q6J("form",d.form)("fields",d.fields)("model",d.model)("options",d.options)}}function Z(u,r){1&u&&e._uU(0," Loading Evidence Item... ")}let D=((E=class{constructor(r,d,I,y,S,Y,J){this.revisableFieldsGQL=r,this.submitEvidenceGQL=d,this.existingEvidenceGQL=I,this.fullyCuratedSourceGQL=y,this.cdr=S,this.route=Y,this.form=new m.nJ({}),this.fields=c,this.state=new v._,this.options={formState:this.state},this.submitEvidenceMutator=new s.U(J),this.routeSub=this.route.queryParams.subscribe(P=>{if(P.existingEvidenceId){this.existingEvidenceId=+P.existingEvidenceId;let x=this.getFieldConfig("direction-select");x&&(x.props.formMode="clone");let A=this.getFieldConfig("significance-select");A&&(A.props.formMode="clone")}else this.model={fields:{}}})}getFieldConfig(r){return this.fields?.[0].fieldGroup?.find(d=>"fields"===d.key)?.fieldGroup?.find(d=>d.type===r)}ngOnInit(){this.countQueryRef=this.existingEvidenceGQL.watch({molecularProfileId:0,sourceId:0}),this.curatedQueryRef=this.fullyCuratedSourceGQL.watch({sourceId:0}),this.existingEvidenceCount$=this.countQueryRef?.valueChanges.pipe((0,a.U)(r=>r.data?.evidenceItems?.totalCount),(0,g.h)(T.ep),(0,n.t)(this)),this.fullyCuratedSource$=this.curatedQueryRef?.valueChanges.pipe((0,a.U)(r=>r.data?.source?.fullyCurated),(0,n.t)(this))}ngAfterViewInit(){this.existingEvidenceId?this.revisableFieldsGQL.fetch({evidenceId:this.existingEvidenceId}).pipe((0,n.t)(this)).subscribe({next:({data:{evidenceItem:r}})=>{r&&(this.model={fields:(0,o.ux)(r)},this.model.fields.description=void 0,this.cdr.detectChanges())},error:r=>{console.error("Error retrieving evidenceItem."),console.error(r)},complete:()=>{this.state.formReady$.next(!0)}}):this.state.formReady$.next(!0)}onSubmit(r){const d=(0,o.I9)(r);d&&(this.mutationState=this.submitEvidenceMutator.mutate(this.submitEvidenceGQL,{input:d},void 0,I=>{this.newEvidenceId=I.submitEvidence?.evidenceItem.id,this.newEvidenceUrl=`/evidence/${this.newEvidenceId}/summary`}))}onModelChange(r){r.fields.sourceId&&r.fields.molecularProfileId?(r.fields.sourceId!=this.selectedSourceId||r.fields.molecularProfileId!=this.selectedMpId)&&(this.selectedSourceId=r.fields.sourceId,this.selectedMpId=r.fields.molecularProfileId,this.countQueryRef?.refetch({molecularProfileId:r.fields.molecularProfileId,sourceId:r.fields.sourceId})):this.countQueryRef?.refetch({molecularProfileId:0,sourceId:0}),r.fields.sourceId?r.fields.sourceId!=this.selectedSourceId&&(this.selectedSourceId=r.fields.sourceId,this.curatedQueryRef?.refetch({sourceId:this.selectedSourceId})):(this.selectedSourceId=void 0,this.curatedQueryRef?.refetch({sourceId:0}))}ngOnDestroy(){this.options.formState.onDestroy(),this.routeSub.unsubscribe()}}).\u0275fac=function(r){return new(r||E)(e.Y36(C.Q_P),e.Y36(C.WFw),e.Y36(C.vxe),e.Y36(C.s4d),e.Y36(e.sBO),e.Y36(O.gz),e.Y36(M.Y))},E.\u0275cmp=e.Xpm({type:E,selectors:[["cvc-evidence-submit-form"]],decls:10,vars:11,consts:[["entityType","Evidence Item",3,"mutationState","redirectUrl","successMessage"],["success",""],[4,"ngIf"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["loadingModel",""],[3,"routerLink"],["nzType","warning",3,"nzMessage",4,"ngIf"],["duplicateEvidenceAlert",""],["nzType","warning",3,"nzMessage"],["cvcHeight","150",3,"molecularProfileId","sourceId"],["fullyCuratedAlert",""],["cvcHeight","150",3,"sourceId"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[2,"width","100%",3,"form","fields","model","options","modelChange"]],template:function(r,d){if(1&r&&(e.TgZ(0,"cvc-form-submission-status-display",0),e.YNc(1,N,4,3,"ng-template",null,1,e.W1O),e.YNc(3,B,5,1,"ng-container",2),e.ALo(4,"ngrxPush"),e.YNc(5,W,5,1,"ng-container",2),e.ALo(6,"ngrxPush"),e.YNc(7,K,2,5,"form",3),e.YNc(8,Z,1,0,"ng-template",null,4,e.W1O),e.qZA()),2&r){const I=e.MAs(2),y=e.MAs(9);e.Q6J("mutationState",d.mutationState)("redirectUrl",d.newEvidenceUrl)("successMessage",I),e.xp6(3),e.Q6J("ngIf",e.lcZ(4,7,d.existingEvidenceCount$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(6,9,d.fullyCuratedSource$)),e.xp6(2),e.Q6J("ngIf",d.model)("ngIfElse",y)}},dependencies:[q.O5,O.rH,w.r,m._Y,m.JL,m.sg,L.T7,b.Lr,F.F,$.a,R.fM],encapsulation:2,changeDetection:0}),E);D=(0,t.gn)([(0,n.c)()],D)},9390:(_,h,i)=>{i.d(h,{C:()=>m,w:()=>t});const t={geneId:void 0,variantId:void 0,significance:void 0,description:void 0,diseaseId:void 0,therapyIds:void 0,therapyInteractionType:void 0,evidenceDirection:void 0,evidenceLevel:void 0,evidenceType:void 0,molecularProfileId:void 0,phenotypeIds:void 0,rating:void 0,sourceId:void 0,variantOrigin:void 0},m={clientMutationId:void 0,fields:t,comment:void 0,organizationId:void 0}},4607:(_,h,i)=>{i.d(h,{lG:()=>f,yQ:()=>o});var t=i(2),m=i(313),s=i(8645),v=i(3742),o=(()=>((o=o||{}).EVIDENCE="Evidence",o.ASSERTION="Assertion",o))();class f{constructor(p){this.formReady$=new s.x,this.formLayout="vertical",this.validStates=new Map,this.typeOption$=new s.x,this.requiresTherapy$=new s.x,this.requiresDisease$=new s.x,this.requiresAcmgCode$=new s.x,this.requiresAmpLevel$=new s.x,this.requiresClingenCode$=new s.x,this.allowsFdaApproval$=new s.x,this.getTypeOptions=()=>this.entityName==o.ASSERTION?(0,v.o6)(m.uBv).map(c=>c):(0,v.o6)(m.kqt).map(c=>c),this.getSignificanceOptions=c=>this.validStates.get(c)?.significance||[],this.getInteractionOptions=()=>(0,v.o6)(m.wkr).map(c=>c),this.isValidSignificanceOption=(c,a)=>{const g=this.validStates.get(c);return!g||g.significance.includes(a)},this.getDirectionOptions=c=>this.validStates.get(c)?.entityDirection||[],this.isValidDirectionOption=(c,a)=>{const g=this.validStates.get(c);return!g||g.entityDirection.includes(a)},this.requiresTherapy=c=>{const a=this.validStates.get(c);return void 0===a||a.requiresTherapy},this.requiresDisease=c=>{const a=this.validStates.get(c);return void 0===a||a.requiresDisease},this.requiresAcmgCodes=c=>{const a=this.validStates.get(c);return void 0===a||a.requiresAcmgCodes},this.requiresAmpLevel=c=>{const a=this.validStates.get(c);return void 0===a||a.requiresAmpLevel},this.requiresClingenCodes=c=>{const a=this.validStates.get(c);return void 0===a||a.requiresClingenCodes},this.allowsFdaApproval=c=>{const a=this.validStates.get(c);return void 0===a||a.allowsFdaApproval},this.getOptionsFromEnums=c=>0===c.length?[]:c.map(a=>({value:a,label:(0,t.E)(a)})),this.fields={},this.options={},this.enums={},this.requires={},this.entityName=p,this.pluralNames=new Map,this.pluralNames.set(o.ASSERTION,"Assertions"),this.pluralNames.set(o.EVIDENCE,"Evidence")}onDestroy(){}}},7382:(_,h,i)=>{i.d(h,{_:()=>n});var t=i(313),m=i(1791),s=i(5619),v=i(9390),o=i(4607);class n extends o.lG{constructor(){super(o.yQ.EVIDENCE);const l=v.w;this.fields={molecularProfileId$:new s.X(l.molecularProfileId),variantId$:new s.X(l.variantId),variantMolecularProfile$:new s.X(void 0),geneId$:new s.X(l.geneId),evidenceType$:new s.X(l.evidenceType),evidenceLevel$:new s.X(l.evidenceLevel),evidenceDirection$:new s.X(l.evidenceDirection),significance$:new s.X(l.significance),variantOrigin$:new s.X(l.variantOrigin),diseaseId$:new s.X(l.diseaseId),therapyIds$:new s.X(l.therapyIds),therapyInteractionType$:new s.X(l.therapyInteractionType),rating$:new s.X(l.rating),phenotypeIds$:new s.X(l.phenotypeIds),sourceId$:new s.X(l.sourceId)},this.enums={entityType$:new s.X(this.getTypeOptions()),significance$:new s.X([]),direction$:new s.X([]),interaction$:new s.X(this.getInteractionOptions())},this.requires={requiresDisease$:new s.X(!1),requiresTherapy$:new s.X(!1),requiresTherapyInteractionType$:new s.X(!1),requiresClingenCodes$:new s.X(!1),requiresAcmgCodes$:new s.X(!1),requiresAmpLevel$:new s.X(!1),allowsFdaApproval$:new s.X(!1)},this.fields.evidenceType$.pipe((0,m.t)(this,"onDestroy")).subscribe(p=>{if(!p)return Object.entries(this.requires).forEach(([c,a])=>{a.next(!1)}),this.enums.significance$.next([]),void this.enums.direction$.next([]);this.enums.significance$.next(this.getSignificanceOptions(p)),this.enums.direction$.next(this.getDirectionOptions(p)),this.requires.requiresDisease$.next(this.requiresDisease(p)),this.requires.requiresTherapy$.next(this.requiresTherapy(p)),this.requires.requiresTherapyInteractionType$.next(this.requiresTherapy(p)),this.requires.requiresClingenCodes$.next(this.requiresClingenCodes(p)),this.requires.requiresAcmgCodes$.next(this.requiresAcmgCodes(p)),this.requires.allowsFdaApproval$.next(this.allowsFdaApproval(p))}),this.fields.therapyIds$.pipe((0,m.t)(this,"onDestroy")).subscribe(p=>{this.requires.requiresTherapyInteractionType$.next(!!p&&p.length>1)}),this.validStates.set(t.kqt.Predictive,{entityType:t.kqt.Predictive,significance:[t.y1h.Sensitivityresponse,t.y1h.Resistance,t.y1h.AdverseResponse,t.y1h.ReducedSensitivity,t.y1h.Na],entityDirection:[t.tI1.Supports,t.tI1.DoesNotSupport],requiresDisease:!0,requiresTherapy:!0,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.kqt.Diagnostic,{entityType:t.kqt.Diagnostic,significance:[t.y1h.Positive,t.y1h.Negative],entityDirection:[t.tI1.Supports,t.tI1.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.kqt.Prognostic,{entityType:t.kqt.Prognostic,significance:[t.y1h.BetterOutcome,t.y1h.PoorOutcome,t.y1h.Na],entityDirection:[t.tI1.Supports,t.tI1.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.kqt.Oncogenic,{entityType:t.kqt.Oncogenic,significance:[t.y1h.Oncogenicity,t.y1h.Protectiveness],entityDirection:[t.tI1.Supports,t.tI1.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.kqt.Predisposing,{entityType:t.kqt.Predisposing,significance:[t.y1h.Predisposition,t.y1h.Protectiveness],entityDirection:[t.tI1.Supports,t.tI1.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.kqt.Functional,{entityType:t.kqt.Functional,significance:[t.y1h.GainOfFunction,t.y1h.LossOfFunction,t.y1h.UnalteredFunction,t.y1h.Neomorphic,t.y1h.DominantNegative,t.y1h.Unknown],entityDirection:[t.tI1.Supports,t.tI1.DoesNotSupport],requiresDisease:!1,requiresTherapy:!1,requiresAcmgCodes:!1,requiresClingenCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1})}}},7570:(_,h,i)=>{function t(m,s){const v=(n,f)=>{let l;for(let p of n)if(p.fieldGroup)l=v(p.fieldGroup,f);else if(p.key===f){l=p;break}return l},o=(n,f)=>{for(let l of Object.keys(f))if(f[l]instanceof Object&&!Array.isArray(f[l]))o(n,f[l]);else{const p=v(n,l);p&&(p.defaultValue=f[l])}return n};return o(m,s)}i.d(h,{Z:()=>t})},2114:(_,h,i)=>{i.d(h,{Ct:()=>s,I9:()=>v,ux:()=>m});var t=i(1022);function m(o){return{significance:o.significance,description:o.description,diseaseId:o.disease?.id,therapyIds:o.therapies.map(n=>n.id),therapyInteractionType:o.therapyInteractionType,evidenceDirection:o.evidenceDirection,evidenceLevel:o.evidenceLevel,evidenceType:o.evidenceType,molecularProfileId:o.molecularProfile.id,phenotypeIds:o.phenotypes.map(n=>n.id),rating:o.evidenceRating,sourceId:o.source.id,variantOrigin:o.variantOrigin}}function s(o,n){let f=v(n);if(f)return{id:o,comment:f.comment,organizationId:f.organizationId,fields:f.fields}}function v(o){const n=o.fields;if(![n.molecularProfileId,n.variantOrigin,n.sourceId,n.evidenceType,n.significance,n.evidenceLevel,n.evidenceDirection,n.rating].find(l=>void 0===l))return{fields:{molecularProfileId:n.molecularProfileId,variantOrigin:n.variantOrigin,sourceId:n.sourceId,evidenceType:n.evidenceType,significance:n.significance,evidenceLevel:n.evidenceLevel,evidenceDirection:n.evidenceDirection,rating:n.rating,description:t.xt(n.description),diseaseId:t.uP(n.diseaseId),phenotypeIds:n.phenotypeIds?n.phenotypeIds:[],therapyIds:n.therapyIds?n.therapyIds:[],therapyInteractionType:t.uP(n.therapyInteractionType)},organizationId:o.organizationId,comment:o.comment}}}}]);