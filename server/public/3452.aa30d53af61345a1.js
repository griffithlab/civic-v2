"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[3452],{9780:(g,m,t)=>{t.d(m,{A:()=>c});var e=t(6895),u=t(6704),s=t(6616),v=t(5106),r=t(317),n=t(2635),l=t(9676),o=t(4650);class c{}c.\u0275fac=function(d){return new(d||c)},c.\u0275mod=o.oAB({type:c}),c.\u0275inj=o.cJS({imports:[e.ez,n._N,n.pP,u.U5,s.sL,v.S,l.g,r.s]})},9201:(g,m,t)=>{t.d(m,{r:()=>E});var e=t(655),u=t(4006),s=t(6123),v=t(9637),r=t(7404),n=t(9933);const d=(0,t(3612).Z)([{wrappers:["form-layout"],props:{submitLabel:"Revise Evidence Item",showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{title:"Revise Evidence Item"},fieldGroup:[{key:"molecularProfileId",type:"molecular-profile-select",props:{required:!0}},{key:"sourceId",type:"source-select",props:{required:!0}},{key:"evidenceType",type:"type-select",props:{required:!0}},{key:"evidenceDirection",type:"direction-select",props:{required:!0,formMode:"revise"}},{key:"significance",type:"significance-select",props:{required:!0,formMode:"revise"}},{key:"diseaseId",type:"disease-select",props:{}},{key:"therapyIds",type:"therapy-multi-select",props:{}},{key:"therapyInteractionType",type:"interaction-select",props:{}},{key:"evidenceLevel",type:"level-select",props:{required:!0}},{key:"rating",type:"rating",props:{required:!0}},{key:"variantOrigin",type:"origin-select",props:{required:!0}},{key:"phenotypeIds",type:"phenotype-multi-select",props:{}},{key:"description",type:"textarea",wrappers:["form-field"],props:{tooltip:"Your original description of evidence from published literature detailing the association or lack of association between a variant and its predictive, prognostic, diagnostic, predisposing, functional or oncogenic value. ",placeholder:"Enter an Evidence Statement",extraType:"description",description:'Data constituting personal or identifying information should not be entered (e.g. <a href="https://www.hipaajournal.com/what-is-protected-health-information/" target="_blank">protected health information (PHI) as defined by HIPAA</a> in the U.S. and/or comparable laws in your jurisdiction).',label:"Evidence Statement",required:!0,colSpan:24}}]},{wrappers:["form-footer"],fieldGroup:[{key:"comment",type:"textarea",props:{label:"Comment",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Evidence Item Revisions"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{geneId:void 0,variantId:void 0,significance:void 0,description:void 0,diseaseId:void 0,drugIds:[],therapyInteractionType:void 0,evidenceDirection:void 0,evidenceLevel:void 0,evidenceType:void 0,molecularProfileId:void 0,phenotypeIds:[],rating:void 0,sourceId:void 0,variantOrigin:void 0},comment:void 0,organizationId:void 0});var I,i=t(4650),D=t(7630),T=t(9169),C=t(6895),O=t(6704),S=t(6212),q=t(7830);function A(h,f){if(1&h&&(i._uU(0," Revision(s) submitted! You will be redirected to the Revisions page or you can view them "),i.TgZ(1,"a",4),i._uU(2,"here."),i.qZA()),2&h){const p=i.oxw();i.xp6(1),i.s9C("href",p.url,i.LSH)}}function P(h,f){if(1&h){const p=i.EpF();i.TgZ(0,"form",5),i.NdJ("ngSubmit",function(){i.CHM(p);const y=i.oxw();return i.KtG(y.onSubmit(y.model))}),i.TgZ(1,"formly-form",6),i.NdJ("modelChange",function(y){i.CHM(p);const w=i.oxw();return i.KtG(w.model=y)}),i.qZA()()}if(2&h){const p=i.oxw();i.Q6J("formGroup",p.form),i.xp6(1),i.Q6J("form",p.form)("fields",p.fields)("model",p.model)("options",p.options)}}function M(h,f){1&h&&i._uU(0," Loading Evidence Item... ")}let E=((I=class{constructor(f,p,_,y){this.revisableFieldsGQL=f,this.submitRevisionsGQL=p,this.networkErrorService=_,this.cdr=y,this.form=new u.nJ({}),this.fields=d,this.state=new v._,this.options={formState:this.state},this.reviseEvidenceMutator=new s.U(_)}ngOnInit(){this.url=`/evidence/${this.evidenceId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({evidenceId:this.evidenceId}).pipe((0,n.t)(this)).subscribe({next:({data:{evidenceItem:f}})=>{f&&(this.model={id:f.id,fields:(0,r.ux)(f)},this.cdr.detectChanges())},error:f=>{console.error("Error retrieving evidenceItem."),console.error(f)},complete:()=>{this.state.formReady$.next(!0),console.log("evidence item retrieved.")}})}onSubmit(f){if(!this.evidenceId)return;let p=(0,r.Ct)(this.evidenceId,f);p&&(this.mutationState=this.reviseEvidenceMutator.mutate(this.submitRevisionsGQL,{input:p}))}ngOnDestroy(){this.options.formState.onDestroy()}}).\u0275fac=function(f){return new(f||I)(i.Y36(D.h_Y),i.Y36(D.F1Y),i.Y36(T.Y),i.Y36(i.sBO))},I.\u0275cmp=i.Xpm({type:I,selectors:[["cvc-evidence-revise-form"]],inputs:{evidenceId:"evidenceId"},decls:6,vars:5,consts:[["entityType","Evidence Item",3,"mutationState","successMessage","redirectUrl"],["success",""],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["loadingModel",""],[3,"href"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[3,"form","fields","model","options","modelChange"]],template:function(f,p){if(1&f&&(i.TgZ(0,"cvc-form-submission-status-display",0),i.YNc(1,A,3,1,"ng-template",null,1,i.W1O),i.YNc(3,P,2,5,"form",2),i.YNc(4,M,1,0,"ng-template",null,3,i.W1O),i.qZA()),2&f){const _=i.MAs(2),y=i.MAs(5);i.Q6J("mutationState",p.mutationState)("successMessage",_)("redirectUrl",p.url),i.xp6(3),i.Q6J("ngIf",p.model)("ngIfElse",y)}},dependencies:[C.O5,O.Lr,u._Y,u.JL,u.sg,S.T7,q.F],encapsulation:2,changeDetection:0}),I);E=(0,e.gn)([(0,n.c)()],E)},3327:(g,m,t)=>{t.d(m,{C:()=>u,w:()=>e});const e={geneId:void 0,variantId:void 0,significance:void 0,description:void 0,diseaseId:void 0,therapyIds:void 0,therapyInteractionType:void 0,evidenceDirection:void 0,evidenceLevel:void 0,evidenceType:void 0,molecularProfileId:void 0,phenotypeIds:void 0,rating:void 0,sourceId:void 0,variantOrigin:void 0},u={clientMutationId:void 0,fields:e,comment:void 0,organizationId:void 0}},5451:(g,m,t)=>{t.d(m,{lG:()=>l,yQ:()=>r});var e=t(915),u=t(7630),s=t(7579),v=t(444),r=(()=>{return(o=r||(r={})).EVIDENCE="Evidence",o.ASSERTION="Assertion",r;var o})();class l{constructor(c){this.formReady$=new s.x,this.formLayout="vertical",this.validStates=new Map,this.typeOption$=new s.x,this.requiresTherapy$=new s.x,this.requiresDisease$=new s.x,this.requiresAcmgCode$=new s.x,this.requiresAmpLevel$=new s.x,this.requiresClingenCode$=new s.x,this.allowsFdaApproval$=new s.x,this.getTypeOptions=()=>this.entityName==r.ASSERTION?(0,v.o6)(u.uBv).map(a=>a):(0,v.o6)(u.kqt).map(a=>a),this.getSignificanceOptions=a=>this.validStates.get(a)?.significance||[],this.getInteractionOptions=()=>(0,v.o6)(u.wkr).map(a=>a),this.isValidSignificanceOption=(a,d)=>{const i=this.validStates.get(a);return!i||i.significance.includes(d)},this.getDirectionOptions=a=>this.validStates.get(a)?.entityDirection||[],this.isValidDirectionOption=(a,d)=>{const i=this.validStates.get(a);return!i||i.entityDirection.includes(d)},this.requiresTherapy=a=>{const d=this.validStates.get(a);return void 0===d||d.requiresTherapy},this.requiresDisease=a=>{const d=this.validStates.get(a);return void 0===d||d.requiresDisease},this.requiresAcmgCodes=a=>{const d=this.validStates.get(a);return void 0===d||d.requiresAcmgCodes},this.requiresAmpLevel=a=>{const d=this.validStates.get(a);return void 0===d||d.requiresAmpLevel},this.requiresClingenCodes=a=>{const d=this.validStates.get(a);return void 0===d||d.requiresClingenCodes},this.allowsFdaApproval=a=>{const d=this.validStates.get(a);return void 0===d||d.allowsFdaApproval},this.getOptionsFromEnums=a=>0===a.length?[]:a.map(d=>({value:d,label:(0,e.E)(d)})),this.fields={},this.options={},this.enums={},this.requires={},this.entityName=c,this.pluralNames=new Map,this.pluralNames.set(r.ASSERTION,"Assertions"),this.pluralNames.set(r.EVIDENCE,"Evidence")}onDestroy(){}}},9637:(g,m,t)=>{t.d(m,{_:()=>n});var e=t(7630),u=t(9933),s=t(1135),v=t(3327),r=t(5451);class n extends r.lG{constructor(){super(r.yQ.EVIDENCE);const o=v.w;this.fields={molecularProfileId$:new s.X(o.molecularProfileId),variantId$:new s.X(o.variantId),variantMolecularProfile$:new s.X(void 0),geneId$:new s.X(o.geneId),evidenceType$:new s.X(o.evidenceType),evidenceLevel$:new s.X(o.evidenceLevel),evidenceDirection$:new s.X(o.evidenceDirection),significance$:new s.X(o.significance),variantOrigin$:new s.X(o.variantOrigin),diseaseId$:new s.X(o.diseaseId),therapyIds$:new s.X(o.therapyIds),therapyInteractionType$:new s.X(o.therapyInteractionType),rating$:new s.X(o.rating),phenotypeIds$:new s.X(o.phenotypeIds),sourceId$:new s.X(o.sourceId)},this.enums={entityType$:new s.X(this.getTypeOptions()),significance$:new s.X([]),direction$:new s.X([]),interaction$:new s.X(this.getInteractionOptions())},this.requires={requiresDisease$:new s.X(!1),requiresTherapy$:new s.X(!1),requiresTherapyInteractionType$:new s.X(!1),requiresClingenCodes$:new s.X(!1),requiresAcmgCodes$:new s.X(!1),requiresAmpLevel$:new s.X(!1),allowsFdaApproval$:new s.X(!1)},this.fields.evidenceType$.pipe((0,u.t)(this,"onDestroy")).subscribe(c=>{if(!c)return Object.entries(this.requires).forEach(([a,d])=>{d.next(!1)}),this.enums.significance$.next([]),void this.enums.direction$.next([]);this.enums.significance$.next(this.getSignificanceOptions(c)),this.enums.direction$.next(this.getDirectionOptions(c)),this.requires.requiresDisease$.next(this.requiresDisease(c)),this.requires.requiresTherapy$.next(this.requiresTherapy(c)),this.requires.requiresTherapyInteractionType$.next(this.requiresTherapy(c)),this.requires.requiresClingenCodes$.next(this.requiresClingenCodes(c)),this.requires.requiresAcmgCodes$.next(this.requiresAcmgCodes(c)),this.requires.allowsFdaApproval$.next(this.allowsFdaApproval(c))}),this.fields.therapyIds$.pipe((0,u.t)(this,"onDestroy")).subscribe(c=>{this.requires.requiresTherapyInteractionType$.next(!!c&&c.length>1)}),this.validStates.set(e.kqt.Predictive,{entityType:e.kqt.Predictive,significance:[e.y1h.Sensitivityresponse,e.y1h.Resistance,e.y1h.AdverseResponse,e.y1h.ReducedSensitivity,e.y1h.Na],entityDirection:[e.tI1.Supports,e.tI1.DoesNotSupport],requiresDisease:!0,requiresTherapy:!0,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(e.kqt.Diagnostic,{entityType:e.kqt.Diagnostic,significance:[e.y1h.Positive,e.y1h.Negative],entityDirection:[e.tI1.Supports,e.tI1.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(e.kqt.Prognostic,{entityType:e.kqt.Prognostic,significance:[e.y1h.BetterOutcome,e.y1h.PoorOutcome,e.y1h.Na],entityDirection:[e.tI1.Supports,e.tI1.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(e.kqt.Oncogenic,{entityType:e.kqt.Oncogenic,significance:[e.y1h.Oncogenicity,e.y1h.Protectiveness],entityDirection:[e.tI1.Supports,e.tI1.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(e.kqt.Predisposing,{entityType:e.kqt.Predisposing,significance:[e.y1h.Predisposition,e.y1h.Protectiveness],entityDirection:[e.tI1.Supports,e.tI1.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(e.kqt.Functional,{entityType:e.kqt.Functional,significance:[e.y1h.GainOfFunction,e.y1h.LossOfFunction,e.y1h.UnalteredFunction,e.y1h.Neomorphic,e.y1h.DominantNegative,e.y1h.Unknown],entityDirection:[e.tI1.Supports,e.tI1.DoesNotSupport],requiresDisease:!1,requiresTherapy:!1,requiresAcmgCodes:!1,requiresClingenCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1})}}},3612:(g,m,t)=>{function e(u,s){const v=(n,l)=>{let o;for(let c of n)if(c.fieldGroup)o=v(c.fieldGroup,l);else if(c.key===l){o=c;break}return o},r=(n,l)=>{for(let o of Object.keys(l))if(l[o]instanceof Object&&!Array.isArray(l[o]))r(n,l[o]);else{const c=v(n,o);c&&(c.defaultValue=l[o])}return n};return r(u,s)}t.d(m,{Z:()=>e})},7404:(g,m,t)=>{t.d(m,{Ct:()=>s,I9:()=>v,ux:()=>u});var e=t(9289);function u(r){return{significance:r.significance,description:r.description,diseaseId:r.disease?.id,therapyIds:r.therapies.map(n=>n.id),therapyInteractionType:r.therapyInteractionType,evidenceDirection:r.evidenceDirection,evidenceLevel:r.evidenceLevel,evidenceType:r.evidenceType,molecularProfileId:r.molecularProfile.id,phenotypeIds:r.phenotypes.map(n=>n.id),rating:r.evidenceRating,sourceId:r.source.id,variantOrigin:r.variantOrigin}}function s(r,n){let l=v(n);if(l)return{id:r,comment:l.comment,organizationId:l.organizationId,fields:l.fields}}function v(r){const n=r.fields;if(![n.molecularProfileId,n.variantOrigin,n.sourceId,n.evidenceType,n.significance,n.evidenceLevel,n.evidenceDirection,n.rating].find(o=>void 0===o))return{fields:{molecularProfileId:n.molecularProfileId,variantOrigin:n.variantOrigin,sourceId:n.sourceId,evidenceType:n.evidenceType,significance:n.significance,evidenceLevel:n.evidenceLevel,evidenceDirection:n.evidenceDirection,rating:n.rating,description:e.xt(n.description),diseaseId:e.uP(n.diseaseId),phenotypeIds:n.phenotypeIds?n.phenotypeIds:[],therapyIds:n.therapyIds?n.therapyIds:[],therapyInteractionType:e.uP(n.therapyInteractionType)},organizationId:r.organizationId,comment:r.comment}}}}]);