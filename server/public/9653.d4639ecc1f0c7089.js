"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[9653],{9653:(it,T,a)=>{a.r(T),a.d(T,{AssertionAddModule:()=>tt});var c=a(9808),h=a(325),n=a(5e3),I=a(8992),u=a(1945),g=a(647);let L=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["cvc-assertion-add"]],decls:10,vars:0,consts:[["displayName","New"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzType","civic:assertion"],[1,"content"]],template:function(e,i){1&e&&(n._UZ(0,"cvc-section-navigation",0),n.TgZ(1,"nz-page-header",1),n.TgZ(2,"nz-page-header-title",2),n._UZ(3,"i",3),n._uU(4," Add New Assertion "),n.qZA(),n.TgZ(5,"nz-page-header-subtitle"),n._uU(6," Submit and review new assertion items "),n.qZA(),n.TgZ(7,"nz-page-header-content"),n.TgZ(8,"div",4),n._UZ(9,"router-outlet"),n.qZA(),n.qZA(),n.qZA())},directives:[I.I,u.$O,u.u9,g.Ls,u.yG,u.u5,h.lC],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),t})();var d=a(4182),v=a(5109),z=a(4546),_=a(2359),C=a(1894),S=a(6042),b=a(7525),p=a(8776),D=a(1825),w=a(7008),E=a(4375),F=a(7695),M=a(7075),k=a(8390),P=a(3773),U=a(5452),V=a(5743),Z=a(5457),$=a(8006),R=a(7462),J=a(4623),Q=a(3594),j=a(3643),B=a(1135),G=a(2789),K=a(5932),Y=a(3416),H=a(2480),X=a(1830),W=a(4581),q=a(1605),ee=a(5926),te=a(1270),ne=a(3314),ie=a(3759),re=a(4902),ae=a(5486),oe=a(464),se=a(7795),le=a(5472),f=a(8054),x=a(3793);function ce(t,r){if(1&t&&n._UZ(0,"nz-option",2),2&t){const e=r.$implicit;n.Q6J("nzLabel",e.label)("nzValue",e.value)}}let de=(()=>{class t extends p.fS{constructor(){super(),this.defaultOptions={templateOptions:{placeholder:"Manage evidence items",options:[]}}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["cvc-evidence-transfer"]],features:[n.qOj],decls:4,vars:13,consts:[["nzMode","tags",3,"nzPlaceHolder","formControl","formlyAttributes","nzShowSearch","nzMode"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"]],template:function(e,i){1&e&&(n.TgZ(0,"nz-select",0),n.YNc(1,ce,1,2,"nz-option",1),n.ALo(2,"async"),n.ALo(3,"formlySelectOptions"),n.qZA()),2&e&&(n.ekj("ng-dirty",i.showError),n.Q6J("nzPlaceHolder",i.to.placeholder||null)("formControl",i.formControl)("formlyAttributes",i.field)("nzShowSearch",!1)("nzMode","tags"),n.xp6(1),n.Q6J("ngForOf",n.lcZ(2,8,n.xi3(3,10,i.to.options,i.field))))},directives:[f.Vq,d.JJ,d.oH,p.VQ,c.sg,f.Ip],pipes:[c.Ov,x.w],styles:[""]}),t})();var pe=a(6114),me=a(685),fe=a(4170),he=a(226),ue=a(1047);let N=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[he.vT,c.ez,d.u5,pe.Wr,S.sL,ue.o7,fe.YI,g.PV,me.Xo]]}),t})();const Ie={types:[{name:"evidence-transfer",wrappers:["form-field"],component:de}]};let Le=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[c.ez,d.UX,p.X0.forChild(Ie),x.F,N,f.LV]]}),t})();var De=a(373),we=a(4850),O=a(712);function Ee(t,r){if(1&t&&n._UZ(0,"nz-option",2),2&t){const e=r.$implicit;n.Q6J("nzLabel",e.label)("nzValue",e.value)}}const Fe={types:[{name:"evidence-transfer-tmp",wrappers:["form-field"],component:(()=>{class t extends p.fS{constructor(e){super(),this.queryGQL=e,this.testOptions=[{label:"EID525",value:525},{label:"EID5",value:5},{label:"EID870",value:870},{label:"EID24",value:24}],this.defaultOptions={templateOptions:{placeholder:"Manage evidence items",options:this.testOptions}}}ngOnInit(){this.queryRef=this.queryGQL.watch({id:99999,first:10}),this.evidence$=this.queryRef.valueChanges.pipe((0,De.j)("data","evidenceItems","edges"),(0,we.U)(e=>(console.log(e),e.map(({node:i})=>(console.log(i),{value:i.id,label:i.name})))))}ngAfterViewInit(){this.to.onSearch=e=>{e&&this.queryRef.refetch({id:+e})}}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(O.zBv))},t.\u0275cmp=n.Xpm({type:t,selectors:[["cvc-evidence-transfer-tmp"]],features:[n.qOj],decls:3,vars:10,consts:[["nzMode","tags","nzPlaceHolder","Tag Mode",3,"nzPlaceHolder","formControl","formlyAttributes","nzAutoClearSearchValue","nzMode","nzOnSearch"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"]],template:function(e,i){1&e&&(n.TgZ(0,"nz-select",0),n.NdJ("nzOnSearch",function(o){return i.to.onSearch(o)}),n.YNc(1,Ee,1,2,"nz-option",1),n.ALo(2,"async"),n.qZA()),2&e&&(n.ekj("ng-dirty",i.showError),n.Q6J("nzPlaceHolder",i.to.placeholder||null)("formControl",i.formControl)("formlyAttributes",i.field)("nzAutoClearSearchValue",!0)("nzMode","tags"),n.xp6(1),n.Q6J("ngForOf",n.lcZ(2,8,i.evidence$)))},directives:[f.Vq,d.JJ,d.oH,p.VQ,c.sg,f.Ip],pipes:[c.Ov],styles:[""]}),t})()}]};let Me=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[c.ez,d.UX,p.X0.forChild(Fe),x.F,N,f.LV]]}),t})();var ke=a(9946);let Pe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[c.ez,h.Bz,d.UX,v.s,z.U5,_.L,C.Jb,S.sL,b.j,p.X0,D.A,w.B,E.R,F.C,M.l,k.N,P.g,U.C,V.W,Z.$,$.I,R.o,J.K,Q.q,j.q,B.C,G.o,K.A,Y.g,H.r,X.S,W.e,q.e,ee.J,te.i,ne.p,ie.D,re.a,ae.$,oe.N,se.k,le.r,Le,Me,ke.d,v.s]]}),t})(),Ue=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[c.ez,Pe]]}),t})();var Ve=a(6123),m=a(6738),Ze=a(8929),y=a(7625),$e=a(1837),Re=a(9169),Je=a(822);function Qe(t,r){1&t&&n.GkF(0)}function je(t,r){1&t&&n.GkF(0)}function Be(t,r){if(1&t&&(n.TgZ(0,"nz-form-item"),n._UZ(1,"cvc-form-errors-alert",9),n.qZA()),2&t){const e=n.oxw(2);n.xp6(1),n.Q6J("errors",e.errorMessages)}}function Ge(t,r){if(1&t&&(n.TgZ(0,"p"),n._uU(1,"View "),n.TgZ(2,"a",13),n._uU(3,"its details"),n.qZA(),n._uU(4,"."),n.qZA()),2&t){const e=n.oxw(3);n.xp6(2),n.MGl("routerLink","/assertions/",e.newId,"/summary")}}function Ke(t,r){if(1&t&&(n.ynx(0),n._UZ(1,"nz-alert",10),n.YNc(2,Ge,5,1,"ng-template",11,12,n.W1O),n.BQk()),2&t){const e=n.MAs(3);n.xp6(1),n.Q6J("nzDescription",e)}}function Ye(t,r){if(1&t&&(n.YNc(0,Be,2,1,"nz-form-item",8),n.YNc(1,Ke,4,1,"ng-container",8)),2&t){const e=n.oxw();n.Q6J("ngIf",e.errorMessages.length>0),n.xp6(1),n.Q6J("ngIf",e.success)}}function He(t,r){if(1&t&&n._UZ(0,"ngx-json-viewer",14),2&t){const e=n.oxw();n.Q6J("json",e.formModel)}}let Xe=(()=>{class t{constructor(e,i){this.submitAssertionGQL=e,this.networkErrorService=i,this.destroy$=new Ze.xQ,this.formGroup=new d.cw({}),this.formOptions={formState:new $e._},this.success=!1,this.errorMessages=[],this.loading=!1,this.submitAssertionMutator=new Ve.U(i),this.formFields=[{key:"fields",wrappers:["form-container"],templateOptions:{label:"Add Assertion Form"},fieldGroup:[{key:"gene",type:"gene-array",templateOptions:{maxCount:1,required:!0}},{key:"variant",type:"variant-array",templateOptions:{required:!0,maxCount:1,allowCreate:!1}},{key:"variantOrigin",type:"variant-origin-select",templateOptions:{required:!0}},{key:"disease",type:"disease-array",templateOptions:{maxCount:1,allowCreate:!1}},{key:"evidenceType",type:"evidence-type-select",templateOptions:{label:"Assertion Type",required:!0}},{key:"evidenceDirection",type:"evidence-direction-select",templateOptions:{label:"Assertion Direction",required:!0}},{key:"clinicalSignificance",type:"clinical-significance-select",templateOptions:{required:!0}},{key:"drugs",type:"drug-array",templateOptions:{allowCreate:!1}},{key:"drugInteractionType",type:"drug-interaction-select",templateOptions:{}},{key:"ampLevel",type:"amp-level-input",templateOptions:{}},{key:"acmgCodes",type:"acmg-code-array",templateOptions:{label:"ACMG/AMP Code(s)"}},{key:"phenotypes",type:"phenotype-array",templateOptions:{}},{key:"nccnGuideline",type:"nccn-guideline-input",templateOptions:{}},{key:"nccnGuidelineVersion",type:"nccn-version-input",templateOptions:{}},{key:"fdaRegulatoryApproval",type:"fda-approval-checkbox",templateOptions:{}},{key:"fdaCompanionTest",type:"fda-test-checkbox",templateOptions:{}},{key:"summary",type:"cvc-textarea",templateOptions:{label:"Assertion Summary",helpText:"A short, one sentence summary of this new assertion",placeholder:"No description provided",required:!0}},{key:"description",type:"cvc-textarea",templateOptions:{label:"Assertion Statement",helpText:"A complete, original description of this new assertion, limited to one paragraph",placeholder:"No description provided",required:!0}},{key:"evidenceItems",type:"multi-field",wrappers:["form-field"],templateOptions:{label:"Evidence Items",helpText:"Evidence Items that support the assertion.",addText:"Specify EIDs"},fieldArray:{type:"evidence-input",templateOptions:{required:!0}}},{key:"comment",type:"comment-textarea",templateOptions:{label:"Comment",helpText:"Please provide any additional comments you wish to make about this evidence item. This comment will appear as the first comment in this item's comment thread.",placeholder:"Please enter a comment describing your revision.",required:!0,minLength:10}},{key:"organization",type:"org-submit-button",templateOptions:{submitLabel:"Submit Evidence Item Revision",submitSize:"large"}}]}]}toSubmitInput(e){var i,s;if(e){const o=e.fields;return{comment:o.comment,organizationId:null===(i=o.organization)||void 0===i?void 0:i.id,fields:{description:m.xt(o.description),summary:m.xt(o.summary),variantId:o.variant[0].id,geneId:o.gene[0].id,variantOrigin:o.variantOrigin,assertionType:o.evidenceType,clinicalSignificance:o.clinicalSignificance,diseaseId:m.uP(o.disease[0].id),assertionDirection:o.evidenceDirection,phenotypeIds:o.phenotypes.map(l=>l.id),drugIds:o.drugs.map(l=>l.id),drugInteractionType:m.uP(o.drugInteractionType),ampLevel:m.uP(o.ampLevel),nccnGuidelineId:m.uP(null===(s=o.nccnGuideline)||void 0===s?void 0:s.id),nccnGuidelineVersion:m.xt(o.nccnGuidelineVersion),acmgCodeIds:o.acmgCodes.map(l=>l.id),fdaCompanionTest:o.fdaCompanionTest,fdaRegulatoryApproval:o.fdaRegulatoryApproval,evidenceItemIds:o.evidenceItems.map(l=>l.id)}}}}submitAssertion(e){let i=this.toSubmitInput(e);if(i){let s=this.submitAssertionMutator.mutate(this.submitAssertionGQL,{input:i},o=>{this.newId=o.submitAssertion.assertion.id});s.submitSuccess$.pipe((0,y.R)(this.destroy$)).subscribe(o=>{o&&(this.success=!0)}),s.submitError$.pipe((0,y.R)(this.destroy$)).subscribe(o=>{o&&(this.errorMessages=o,this.success=!1)}),s.isSubmitting$.pipe((0,y.R)(this.destroy$)).subscribe(o=>{this.loading=o})}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(O.LLl),n.Y36(Re.Y))},t.\u0275cmp=n.Xpm({type:t,selectors:[["cvc-assertion-submit-form"]],decls:10,vars:9,consts:[["nzTip","Submitting",3,"nzSpinning"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[4,"ngTemplateOutlet"],[3,"form","fields","model","options","modelChange"],["formMessages",""],["nz-row",""],["nz-col","","nzSpan","24"],[3,"json",4,"ngIf"],[4,"ngIf"],[3,"errors"],["nzType","success","nzMessage","Assertion Submitted","nzShowIcon","",3,"nzDescription"],["nzSize","small"],["successMessage",""],[3,"routerLink"],[3,"json"]],template:function(e,i){if(1&e&&(n.TgZ(0,"nz-spin",0),n.TgZ(1,"form",1),n.NdJ("ngSubmit",function(){return i.submitAssertion(i.formModel)}),n.YNc(2,Qe,1,0,"ng-container",2),n.TgZ(3,"formly-form",3),n.NdJ("modelChange",function(o){return i.formModel=o}),n.qZA(),n.YNc(4,je,1,0,"ng-container",2),n.qZA(),n.YNc(5,Ye,2,2,"ng-template",null,4,n.W1O),n.qZA(),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n.YNc(9,He,1,1,"ngx-json-viewer",7),n.qZA(),n.qZA()),2&e){const s=n.MAs(6);n.Q6J("nzSpinning",i.loading),n.xp6(1),n.Q6J("formGroup",i.formGroup),n.xp6(1),n.Q6J("ngTemplateOutlet",s),n.xp6(1),n.Q6J("form",i.formGroup)("fields",i.formFields)("model",i.formModel)("options",i.formOptions),n.xp6(1),n.Q6J("ngTemplateOutlet",s),n.xp6(5),n.Q6J("ngIf",i.formModel)}},directives:[b.W,d._Y,d.JL,z.Lr,d.sg,c.tP,p.T7,c.O5,C.SK,z.Nx,Je.V,_.r,h.yS,C.t3,v.Y],styles:["[_nghost-%COMP%]{display:block}"]}),t})();const We=[{path:"",component:L,children:[{path:"",redirectTo:"submit",pathMatch:"full"},{path:"submit",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["cvc-assertion-submit"]],decls:1,vars:0,template:function(e,i){1&e&&n._UZ(0,"cvc-assertion-submit-form")},directives:[Xe],styles:[""]}),t})(),data:{breadcrumb:"Submit New Assertion"}}]}];let qe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[h.Bz.forChild(We),Ue],h.Bz]}),t})();var et=a(5630);let tt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[c.ez,qe,u.KJ,g.PV,et.D]]}),t})()}}]);