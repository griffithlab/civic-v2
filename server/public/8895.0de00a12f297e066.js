"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[8895],{7948:(sn,W,e)=>{e.d(W,{m:()=>f});var o=e(5e3),s=e(9808),_=e(125),t=e(9297),n=e(3193),u=e(8664),M=e(112),Z=e(9001),A=e(2826),b=e(5749),w=e(8481),x=e(647);function O(C,j){if(1&C&&(o.ynx(0),o._UZ(1,"span",2),o.BQk()),2&C){const m=o.oxw().$implicit;o.xp6(1),o.Q6J("innerHtml",m.text,o.oJD)}}function T(C,j){if(1&C&&(o.ynx(0),o._UZ(1,"cvc-user-tag",3),o.BQk()),2&C){const m=o.oxw().$implicit;o.xp6(1),o.Q6J("user",m)}}const J=function(C,j,m){return{id:C,name:j,link:m}};function H(C,j){if(1&C&&(o.TgZ(0,"span"),o._UZ(1,"cvc-revision-tag",6),o.qZA()),2&C){const m=o.oxw(2).$implicit;o.xp6(1),o.Q6J("revision",o.kEZ(1,J,m.entityId,m.displayName,m.link))}}function R(C,j){if(1&C&&(o.TgZ(0,"span"),o._UZ(1,"cvc-gene-tag",7),o.qZA()),2&C){const m=o.oxw(2).$implicit;o.xp6(1),o.Q6J("gene",o.kEZ(1,J,m.entityId,m.displayName,m.link))}}function U(C,j){if(1&C&&(o.TgZ(0,"span"),o._UZ(1,"cvc-variant-tag",8),o.qZA()),2&C){const m=o.oxw(2).$implicit;o.xp6(1),o.Q6J("variant",o.kEZ(1,J,m.entityId,m.displayName,m.link))}}function Y(C,j){if(1&C&&(o.TgZ(0,"span"),o._UZ(1,"cvc-variant-group-tag",9),o.qZA()),2&C){const m=o.oxw(2).$implicit;o.xp6(1),o.Q6J("variantgroup",o.kEZ(1,J,m.entityId,m.displayName,m.link))}}const $=function(C,j,m,q){return{id:C,name:j,status:m,link:q}};function D(C,j){if(1&C&&(o.TgZ(0,"span"),o._UZ(1,"cvc-evidence-tag",10),o.qZA()),2&C){const m=o.oxw(2).$implicit;o.xp6(1),o.Q6J("evidence",o.l5B(1,$,m.entityId,m.displayName,m.status,m.link))}}function K(C,j){if(1&C&&(o.TgZ(0,"span"),o._UZ(1,"cvc-assertion-tag",11),o.qZA()),2&C){const m=o.oxw(2).$implicit;o.xp6(1),o.Q6J("assertion",o.l5B(1,$,m.entityId,m.displayName,m.status,m.link))}}const L=function(C,j){return{id:C,name:j}};function B(C,j){if(1&C&&(o.TgZ(0,"span"),o._UZ(1,"cvc-organization-tag",12),o.qZA()),2&C){const m=o.oxw(2).$implicit;o.xp6(1),o.Q6J("org",o.WLB(1,L,m.entityId,m.displayName))}}function G(C,j){if(1&C&&(o.TgZ(0,"span"),o.TgZ(1,"nz-tag"),o._UZ(2,"i",13),o._uU(3),o.qZA(),o.qZA()),2&C){const m=o.oxw(2).$implicit;o.xp6(2),o.MGl("nzType","civic-",m.displayName.slice(0,-1),""),o.xp6(1),o.hij(" ",m.displayName,"")}}function p(C,j){if(1&C&&(o.ynx(0),o.ynx(1,4),o.YNc(2,H,2,5,"span",5),o.YNc(3,R,2,5,"span",5),o.YNc(4,U,2,5,"span",5),o.YNc(5,Y,2,5,"span",5),o.YNc(6,D,2,6,"span",5),o.YNc(7,K,2,6,"span",5),o.YNc(8,B,2,4,"span",5),o.YNc(9,G,4,2,"span",5),o.BQk(),o.BQk()),2&C){const m=o.oxw().$implicit;o.xp6(1),o.Q6J("ngSwitch",m.tagType),o.xp6(1),o.Q6J("ngSwitchCase","REVISION"),o.xp6(1),o.Q6J("ngSwitchCase","GENE"),o.xp6(1),o.Q6J("ngSwitchCase","VARIANT"),o.xp6(1),o.Q6J("ngSwitchCase","VARIANT_GROUP"),o.xp6(1),o.Q6J("ngSwitchCase","EVIDENCE_ITEM"),o.xp6(1),o.Q6J("ngSwitchCase","ASSERTION"),o.xp6(1),o.Q6J("ngSwitchCase","ORGANIZATION"),o.xp6(1),o.Q6J("ngSwitchCase","ROLE")}}function S(C,j){if(1&C&&(o.ynx(0),o.YNc(1,O,2,1,"ng-container",1),o.YNc(2,T,2,1,"ng-container",1),o.YNc(3,p,10,9,"ng-container",1),o.BQk()),2&C){const m=j.$implicit;o.xp6(1),o.Q6J("ngIf","CommentTextSegment"==m.__typename),o.xp6(1),o.Q6J("ngIf","User"==m.__typename),o.xp6(1),o.Q6J("ngIf","CommentTagSegment"==m.__typename)}}let f=(()=>{class C{ngOnInit(){if(void 0===this.commentBodySegments)throw new Error("Must pass a list of comment body segments into comment body component.")}}return C.\u0275fac=function(m){return new(m||C)},C.\u0275cmp=o.Xpm({type:C,selectors:[["cvc-comment-body"]],inputs:{commentBodySegments:"commentBodySegments"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"innerHtml"],[3,"user"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"revision"],[3,"gene"],[3,"variant"],[3,"variantgroup"],[3,"evidence"],[3,"assertion"],[3,"org"],["nz-icon","","nzTheme","twotone","nzTwotoneColor","#A0D8F5",3,"nzType"]],template:function(m,q){1&m&&o.YNc(0,S,4,3,"ng-container",0),2&m&&o.Q6J("ngForOf",q.commentBodySegments)},directives:[s.sg,s.O5,_.I,s.RF,s.n9,t.p,n.H,u.I,M.u,Z.O,A.w,b.m,w.j,x.Ls],styles:[""]}),C})()},8909:(sn,W,e)=>{e.d(W,{m:()=>O});var o=e(9808),s=e(9401),_=e(8369),t=e(209),n=e(4867),u=e(7677),M=e(3309),Z=e(7345),A=e(9476),b=e(8481),w=e(647),x=e(5e3);let O=(()=>{class T{}return T.\u0275fac=function(H){return new(H||T)},T.\u0275mod=x.oAB({type:T}),T.\u0275inj=x.cJS({imports:[[o.ez,b.X,w.PV,s.y,_.W,t.i,n.Q,u.G,M.U,Z.W,A.L]]}),T})()},3801:(sn,W,e)=>{e.d(W,{D:()=>On});var o=e(712),s=e(4850),_=e(373),t=e(5e3),n=e(9808),u=e(1894),M=e(8144),Z=e(7484),A=e(3762),b=e(6042),w=e(2683),x=e(1344),O=e(6699),T=e(7948),J=e(8625);function H(E,tn){if(1&E&&t._UZ(0,"nz-avatar",4),2&E){const v=t.oxw();t.Q6J("nzSrc",v.comment.commenter.profileImagePath)}}function R(E,tn){1&E&&t._UZ(0,"nz-avatar",5)}let U=(()=>{class E{ngOnInit(){if(void 0===this.comment)throw new Error("Must pass a comment into comment display component.")}}return E.\u0275fac=function(v){return new(v||E)},E.\u0275cmp=t.Xpm({type:E,selectors:[["cvc-comment-display"]],inputs:{comment:"comment"},decls:7,vars:7,consts:[[3,"nzAuthor","nzDatetime"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],[3,"commentBodySegments"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","","nzIcon","civic:curator"]],template:function(v,Q){if(1&v&&(t.TgZ(0,"nz-comment",0),t.ALo(1,"timeago"),t.YNc(2,H,1,1,"nz-avatar",1),t.YNc(3,R,1,0,"ng-template",null,2,t.W1O),t.TgZ(5,"nz-comment-content"),t._UZ(6,"cvc-comment-body",3),t.qZA(),t.qZA()),2&v){const X=t.MAs(4);t.Q6J("nzAuthor",Q.comment.commenter.displayName)("nzDatetime",t.lcZ(1,5,Q.comment.createdAt)),t.xp6(2),t.Q6J("ngIf",Q.comment.commenter.profileImagePath)("ngIfElse",X),t.xp6(4),t.Q6J("commentBodySegments",Q.comment.parsedComment)}},directives:[x.WE,n.O5,O.Dz,x.DA,x.Y4,T.m],pipes:[J.wr],styles:[""]}),E})();var Y=e(8929),$=e(7625),D=e(6123),K=e(9350),L=e(9169),B=e(2359),G=e(4182),p=e(4546),S=e(822),f=e(9383),C=e(7525),j=e(9180),m=e(8227),q=e(2643),I=e(1793);function an(E,tn){if(1&E){const v=t.EpF();t.TgZ(0,"nz-alert",7),t.NdJ("nzOnClose",function(){return t.CHM(v),t.oxw().onSuccessBannerClose()}),t.qZA()}}function rn(E,tn){if(1&E&&(t.TgZ(0,"nz-form-item"),t._UZ(1,"cvc-form-errors-alert",8),t.qZA()),2&E){const v=t.oxw();t.xp6(1),t.Q6J("errors",v.errorMessages)}}let mn=(()=>{class E{constructor(v,Q,X){this.viewerService=v,this.addCommentGql=Q,this.networkErrorService=X,this.commentAddedEvent=new t.vpe,this.destroy$=new Y.xQ,this.success=!1,this.errorMessages=[],this.loading=!1,this.viewerService.viewer$.pipe((0,$.R)(this.destroy$)).subscribe(gn=>{this.organizations=gn.organizations,this.mostRecentOrg=gn.mostRecentOrg}),this.addCommentMutator=new D.U(X)}selectOrg(v){this.mostRecentOrg=v}submitComment(){if(this.commentText){this.errorMessages=[];let Q=this.addCommentMutator.mutate(this.addCommentGql,{input:{body:this.commentText,subject:this.subject,organizationId:void 0===this.mostRecentOrg?void 0:this.mostRecentOrg.id}});Q.submitSuccess$.pipe((0,$.R)(this.destroy$)).subscribe(X=>{X&&(this.resetForm(),this.success=!0)}),Q.submitError$.pipe((0,$.R)(this.destroy$)).subscribe(X=>{X&&(this.errorMessages=X,this.success=!1)}),Q.isSubmitting$.pipe((0,$.R)(this.destroy$)).subscribe(X=>{this.loading=X})}}resetForm(){this.commentText="",this.commentAddedEvent.emit()}onSuccessBannerClose(){this.resetForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return E.\u0275fac=function(v){return new(v||E)(t.Y36(K.a),t.Y36(o.iGM),t.Y36(L.Y))},E.\u0275cmp=t.Xpm({type:E,selectors:[["cvc-comment-add-form"]],inputs:{subject:"subject"},outputs:{commentAddedEvent:"commentAddedEvent"},decls:12,vars:6,consts:[["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[4,"ngIf"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[3,"selectedOrg","selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"],["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose"],[3,"errors"]],template:function(v,Q){1&v&&(t.TgZ(0,"nz-card"),t.YNc(1,an,1,0,"nz-alert",0),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return Q.submitComment()}),t.YNc(3,rn,2,1,"nz-form-item",2),t.TgZ(4,"cvc-comment-input-form",3),t.NdJ("commentChange",function(gn){return Q.commentText=gn}),t.qZA(),t.TgZ(5,"nz-spin",4),t.TgZ(6,"nz-form-item"),t.TgZ(7,"nz-form-control"),t.TgZ(8,"cvc-form-buttons"),t.TgZ(9,"cvc-org-selector-btn-group",5),t.NdJ("selectedOrgChange",function(gn){return Q.mostRecentOrg=gn}),t.TgZ(10,"button",6),t._uU(11," Add Comment "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&v&&(t.xp6(1),t.Q6J("ngIf",Q.success),t.xp6(2),t.Q6J("ngIf",Q.errorMessages.length>0),t.xp6(1),t.Q6J("comment",Q.commentText),t.xp6(1),t.Q6J("nzSpinning",Q.loading),t.xp6(4),t.Q6J("selectedOrg",Q.mostRecentOrg),t.xp6(1),t.Q6J("disabled",Q.loading||!(void 0!==Q.commentText&&Q.commentText.length>=10)))},directives:[Z.bd,n.O5,B.r,G._Y,G.JL,G.F,p.Lr,u.SK,p.Nx,S.V,f.b,C.W,u.t3,p.Fd,j.Z,m.q,b.ix,q.dQ,I.m,w.w],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2}),E})();var F=e(8747),on=e(647),g=e(6949),z=e(9058);function V(E,tn){if(1&E){const v=t.EpF();t.TgZ(0,"div",18),t.TgZ(1,"button",19),t.NdJ("click",function(){t.CHM(v);const X=t.oxw().ngIf;return t.oxw(3).onLoadMore(X.startCursor)}),t._uU(2,"Load older comments "),t.qZA(),t.qZA()}}function en(E,tn){if(1&E&&(t.TgZ(0,"nz-list-header"),t.YNc(1,V,3,0,"div",17),t.qZA()),2&E){const v=tn.ngIf;t.xp6(1),t.Q6J("ngIf",v.hasPreviousPage)}}function ln(E,tn){if(1&E&&(t.TgZ(0,"nz-list-item"),t._UZ(1,"cvc-comment-display",20),t.qZA()),2&E){const v=tn.$implicit;t.xp6(1),t.Q6J("comment",v)}}function nn(E,tn){if(1&E&&(t.TgZ(0,"nz-card",13),t.TgZ(1,"nz-list",14),t.ALo(2,"ngrxPush"),t.ALo(3,"ngrxPush"),t.YNc(4,en,2,1,"nz-list-header",15),t.ALo(5,"ngrxPush"),t.YNc(6,ln,2,1,"ng-template",null,16,t.W1O),t.qZA(),t.qZA()),2&E){const v=t.MAs(7),Q=t.oxw(2);t.xp6(1),t.Q6J("nzDataSource",t.lcZ(2,4,Q.comments$))("nzLoading",t.lcZ(3,6,Q.loading$))("nzRenderItem",v),t.xp6(3),t.Q6J("ngIf",t.lcZ(5,8,Q.pageInfo$))}}function _n(E,tn){if(1&E){const v=t.EpF();t.TgZ(0,"cvc-comment-add-form",21),t.NdJ("commentAddedEvent",function(){return t.CHM(v),t.oxw(2).refreshList()}),t.qZA()}if(2&E){const v=t.oxw(2);t.Q6J("subject",v.commentable)}}function pn(E,tn){if(1&E&&t._UZ(0,"nz-avatar",24),2&E){const v=t.oxw().$implicit;t.Q6J("nzSrc",v.profileImagePath)}}function Cn(E,tn){if(1&E&&(t._UZ(0,"nz-avatar",25),t.ALo(1,"uppercase")),2&E){const v=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,v.displayName.charAt(0)))}}function zn(E,tn){if(1&E&&(t.YNc(0,pn,1,1,"nz-avatar",22),t.YNc(1,Cn,2,3,"ng-template",null,23,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&E){const v=tn.$implicit,Q=t.MAs(2);t.Q6J("ngIf",v.profileImagePath)("ngIfElse",Q),t.xp6(4),t.Oqu(v.displayName)}}function Tn(E,tn){if(1&E&&t._UZ(0,"nz-avatar",24),2&E){const v=t.oxw().$implicit;t.Q6J("nzSrc",v.profileImagePath)}}function un(E,tn){if(1&E&&(t._UZ(0,"nz-avatar",25),t.ALo(1,"uppercase")),2&E){const v=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,v.displayName.charAt(0)))}}function vn(E,tn){if(1&E&&(t.YNc(0,Tn,1,1,"nz-avatar",22),t.YNc(1,un,2,3,"ng-template",null,23,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&E){const v=tn.$implicit,Q=t.MAs(2);t.Q6J("ngIf",v.profileImagePath)("ngIfElse",Q),t.xp6(4),t.Oqu(v.displayName)}}function hn(E,tn){if(1&E&&(t._UZ(0,"nz-avatar",26),t.TgZ(1,"span"),t._uU(2),t.qZA()),2&E){const v=tn.$implicit;t.MGl("nzIcon","civic-",v.tag.displayName,""),t.xp6(2),t.hij("",v.tag.displayName,"s")}}function xn(E,tn){if(1&E&&(t._UZ(0,"i",27),t.ALo(1,"iconNameForSubscribableEntity"),t.TgZ(2,"span"),t._uU(3),t.qZA()),2&E){const v=tn.$implicit;t.Q6J("nzType",t.lcZ(1,2,v.tag.tagType)),t.xp6(3),t.Oqu(v.tag.displayName)}}function fn(E,tn){if(1&E){const v=t.EpF();t.ynx(0),t.TgZ(1,"nz-row",2),t.TgZ(2,"nz-col",3),t.TgZ(3,"nz-space",4),t.YNc(4,nn,8,10,"nz-card",5),t.YNc(5,_n,1,1,"cvc-comment-add-form",6),t.qZA(),t.qZA(),t.TgZ(6,"nz-col",7),t.TgZ(7,"cvc-participant-list",8),t.NdJ("participantSelectedEvent",function(X){return t.CHM(v),t.oxw().onCommenterSelected(X)}),t.ALo(8,"ngrxPush"),t.YNc(9,zn,5,3,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(11,"cvc-participant-list",10),t.NdJ("participantSelectedEvent",function(X){return t.CHM(v),t.oxw().onMentionedUserSelected(X)}),t.ALo(12,"ngrxPush"),t.YNc(13,vn,5,3,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(15,"cvc-participant-list",11),t.NdJ("participantSelectedEvent",function(X){return t.CHM(v),t.oxw().onMentionedRoleSelected(X)}),t.ALo(16,"ngrxPush"),t.YNc(17,hn,3,2,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(19,"cvc-participant-list",12),t.NdJ("participantSelectedEvent",function(X){return t.CHM(v),t.oxw().onMentionedEntitySelected(X)}),t.ALo(20,"ngrxPush"),t.YNc(21,xn,4,4,"ng-template",null,9,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&E){const v=t.oxw();t.xp6(1),t.Q6J("nzGutter",16),t.xp6(6),t.Q6J("participantList",t.lcZ(8,5,v.commenters$)),t.xp6(4),t.Q6J("participantList",t.lcZ(12,7,v.mentionedUsers$)),t.xp6(4),t.Q6J("participantList",t.lcZ(16,9,v.mentionedRoles$)),t.xp6(4),t.Q6J("participantList",t.lcZ(20,11,v.mentionedEntities$))}}function yn(E,tn){if(1&E){const v=t.EpF();t.TgZ(0,"cvc-comment-add-form",21),t.NdJ("commentAddedEvent",function(){return t.CHM(v),t.oxw().refreshList()}),t.qZA()}if(2&E){const v=t.oxw();t.Q6J("subject",v.commentable)}}let On=(()=>{class E{constructor(v){this.gql=v,this.pageSize=5}ngOnInit(){this.queryRef$=this.gql.watch({subject:this.commentable,last:this.pageSize,sortBy:{column:o.h01.Created,direction:o.SrV.Asc}});let v=this.queryRef$.valueChanges;this.pageInfo$=v.pipe((0,s.U)(({data:Q})=>Q.comments.pageInfo)),this.loading$=v.pipe((0,s.U)(({loading:Q})=>Q)),this.comments$=v.pipe((0,s.U)(({data:Q})=>Q.comments.edges.map(X=>X.node))),this.commenters$=v.pipe((0,s.U)(({data:Q})=>Q.comments.uniqueCommenters)),this.mentionedUsers$=v.pipe((0,s.U)(({data:Q})=>Q.comments.mentionedUsers)),this.mentionedRoles$=v.pipe((0,s.U)(({data:Q})=>Q.comments.mentionedRoles.map(X=>({id:`${X.entityId}-${X.tagType}`,tag:X})))),this.mentionedEntities$=v.pipe((0,s.U)(({data:Q})=>Q.comments.mentionedEntities.map(X=>({id:`${X.entityId}-${X.tagType}`,tag:X})))),this.unfilteredCount$=v.pipe((0,_.j)("data","comments","unfilteredCountForSubject"))}onLoadMore(v){this.queryRef$.fetchMore({variables:{last:this.pageSize,before:v}})}onCommenterSelected(v){this.queryRef$.refetch({originatingUserId:null==v?void 0:v.id})}onMentionedUserSelected(v){this.queryRef$.refetch({mentionedUserId:null==v?void 0:v.id})}onMentionedRoleSelected(v){if(v){let Q=o.i44[v.tag.displayName[0].toUpperCase()+v.tag.displayName.slice(1)];this.queryRef$.refetch({mentionedRole:Q})}else this.queryRef$.refetch({mentionedRole:void 0})}onMentionedEntitySelected(v){this.queryRef$.refetch(v?{mentionedEntity:{entityType:v.tag.tagType,id:v.tag.entityId}}:{mentionedEntity:void 0})}refreshList(){this.queryRef$.refetch()}}return E.\u0275fac=function(v){return new(v||E)(t.Y36(o.iST))},E.\u0275cmp=t.Xpm({type:E,selectors:[["cvc-comment-list"]],inputs:{commentable:"commentable"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noComments",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical",2,"width","100%"],["nzTitle","Comments",4,"nzSpaceItem"],["id","addComment",3,"subject","commentAddedEvent",4,"nzSpaceItem"],["nzSpan","6"],["listTitle","Commenters",3,"participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Mentioned Users",3,"participantList","participantSelectedEvent"],["listTitle","Mentioned Roles",3,"participantList","participantSelectedEvent"],["listTitle","Mentioned Entities",3,"participantList","participantSelectedEvent"],["nzTitle","Comments"],["nzSize","small","nzItemLayout","horizontal",3,"nzDataSource","nzLoading","nzRenderItem"],[4,"ngIf"],["comment",""],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","link","nzSize","small","nzBlock","",3,"click"],[3,"comment"],["id","addComment",3,"subject","commentAddedEvent"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],[3,"nzIcon"],["nz-icon","",3,"nzType"]],template:function(v,Q){if(1&v&&(t.YNc(0,fn,23,13,"ng-container",0),t.ALo(1,"ngrxPush"),t.YNc(2,yn,1,1,"ng-template",null,1,t.W1O)),2&v){const X=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,Q.unfilteredCount$))("ngIfElse",X)}},directives:[n.O5,u.SK,u.t3,M.NU,M.$1,Z.bd,A.n_,A.t4,b.ix,w.w,A.AA,U,mn,F.l,O.Dz,on.Ls],pipes:[g.fM,n.gd,z.j],styles:["[_nghost-%COMP%]{display:block}nz-list-header[_ngcontent-%COMP%]{padding:0;margin:0}nz-list-header[_ngcontent-%COMP%]   [nz-list-load-more][_ngcontent-%COMP%]{margin-top:-.5em;padding-bottom:.5em}"]}),E})()},2278:(sn,W,e)=>{e.d(W,{l:()=>q});var o=e(9808),s=e(1894),_=e(7484),t=e(3762),n=e(6699),u=e(8144),M=e(6949),Z=e(6559),A=e(1150),b=e(1344),w=e(8625),x=e(7026),O=e(8909),T=e(5e3);let J=(()=>{class I{}return I.\u0275fac=function(rn){return new(rn||I)},I.\u0275mod=T.oAB({type:I}),I.\u0275inj=T.cJS({imports:[[o.ez,b.YM,n.Rt,w.$L.forChild({formatter:{useClass:x.x,provide:w.KP}}),O.m]]}),I})();var H=e(4182),R=e(8776),U=e(4546),Y=e(7008),$=e(1825),D=e(4375),K=e(6042),L=e(4623),B=e(868),G=e(7525),p=e(4921),S=e(4509),f=e(2359);let C=(()=>{class I{}return I.\u0275fac=function(rn){return new(rn||I)},I.\u0275mod=T.oAB({type:I}),I.\u0275inj=T.cJS({imports:[[o.ez,H.UX,M.WG,K.sL,_.vh,B.we,U.U5,G.j,p.Gl,f.L,H.u5,R.X0,Y.B,$.A,D.R,O.m,L.K,S.w]]}),I})();var j=e(647),m=e(9444);let q=(()=>{class I{}return I.\u0275fac=function(rn){return new(rn||I)},I.\u0275mod=T.oAB({type:I}),I.\u0275inj=T.cJS({imports:[[o.ez,M.WG,K.sL,s.Jb,_.vh,t.Ph,j.PV,m.s,n.Rt,u.zf,Z.H0,C,A.N,J]]}),I})()},7036:(sn,W,e)=>{e.d(W,{L:()=>gt});var o=e(712),s=e(373),_=e(4850),t=e(5e3),n=e(9808),u=e(1894),M=e(8144),Z=e(8929),A=e(7625),b=e(9350),w=e(2359),x=e(7484),O=e(7948),T=e(5737),J=e(6123),H=e(9169),R=e(6949),U=e(404),Y=e(6042),$=e(2643),D=e(2683),K=e(3610),L=e(647),B=e(4182),G=e(4546),p=e(9383),S=e(7525),f=e(9180),C=e(8227),j=e(1793);function m(r,y){if(1&r){const c=t.EpF();t.TgZ(0,"nz-alert",4),t.NdJ("nzOnClose",function(){return t.CHM(c),t.oxw().onSuccessBannerClose()}),t.qZA()}}function q(r,y){}function I(r,y){1&r&&t.YNc(0,q,0,0,"ng-template")}function an(r,y){if(1&r&&(t.ynx(0),t.YNc(1,I,1,0,void 0,9),t.BQk()),2&r){t.oxw(2);const c=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",c)}}function rn(r,y){if(1&r&&(t.ynx(0),t.YNc(1,an,2,1,"ng-container",5),t.BQk()),2&r){const c=t.oxw().ngrxLet,h=t.MAs(5),N=t.oxw();t.xp6(1),t.Q6J("ngIf",c.isEditor||c.isAdmin||N.flag.flaggingUser.id===c.id)("ngIfElse",h)}}function mn(r,y){}function F(r,y){1&r&&t.YNc(0,mn,0,0,"ng-template")}function on(r,y){if(1&r&&(t.TgZ(0,"span",10),t.YNc(1,F,1,0,void 0,9),t.qZA()),2&r){t.oxw();const c=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",c)}}function g(r,y){}function z(r,y){1&r&&t.YNc(0,g,0,0,"ng-template")}function V(r,y){if(1&r&&(t.TgZ(0,"span",11),t.YNc(1,z,1,0,void 0,9),t.qZA()),2&r){t.oxw();const c=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",c)}}function en(r,y){if(1&r){const c=t.EpF();t.TgZ(0,"button",13),t.NdJ("nzPopoverVisibleChange",function(N){return t.CHM(c),t.oxw(3).flagResolvePopoverVisible=N})("click",function(){t.CHM(c);const N=t.oxw(3);return N.flagResolvePopoverVisible=!N.flagResolvePopoverVisible}),t._uU(1," Resolve Flag "),t._UZ(2,"i",14),t.qZA()}if(2&r){const c=t.oxw(2).ngrxLet,h=t.oxw(),N=t.MAs(3),cn=t.MAs(5);t.Q6J("nzPopoverTitle",N)("nzPopoverVisible",h.flagResolvePopoverVisible)("nzPopoverContent",cn)("nzPopoverTrigger",void 0)("disabled",!c.signedIn||c.isCurator&&h.flag.flaggingUser.id!=c.id)}}function ln(r,y){if(1&r&&t.YNc(0,en,3,5,"button",12),2&r){const c=t.oxw(2);t.Q6J("ngIf",!c.success)}}function nn(r,y){if(1&r&&(t.ynx(0),t.YNc(1,rn,2,2,"ng-container",5),t.YNc(2,on,2,1,"ng-template",null,6,t.W1O),t.YNc(4,V,2,1,"ng-template",null,7,t.W1O),t.YNc(6,ln,1,1,"ng-template",null,8,t.W1O),t.BQk()),2&r){const c=y.ngrxLet,h=t.MAs(3);t.xp6(1),t.Q6J("ngIf",c.signedIn)("ngIfElse",h)}}const _n=function(){return{float:"right"}};function pn(r,y){if(1&r){const c=t.EpF();t._uU(0," Resolve Flag "),t.TgZ(1,"span",15),t.TgZ(2,"i",16),t.NdJ("click",function(){t.CHM(c);const N=t.oxw();return N.flagResolvePopoverVisible=!1,N.errorMessages=[]}),t.qZA(),t.qZA()}2&r&&(t.xp6(1),t.Q6J("ngStyle",t.DdM(1,_n)))}function Cn(r,y){if(1&r&&t._UZ(0,"nz-alert",25),2&r){t.oxw();const c=t.MAs(2);t.Q6J("nzDescription",c)}}function zn(r,y){if(1&r&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&r){const c=y.$implicit;t.xp6(1),t.hij(" ",c," ")}}function Tn(r,y){if(1&r&&(t.TgZ(0,"ul"),t.YNc(1,zn,2,1,"li",26),t.qZA()),2&r){const c=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",c.errorMessages)}}function un(r,y){if(1&r){const c=t.EpF();t.YNc(0,Cn,1,1,"nz-alert",17),t.YNc(1,Tn,2,1,"ng-template",null,18,t.W1O),t.TgZ(3,"nz-card",19),t.TgZ(4,"form",20),t.NdJ("ngSubmit",function(){return t.CHM(c),t.oxw().resolveFlag()}),t.TgZ(5,"cvc-comment-input-form",21),t.NdJ("commentChange",function(N){return t.CHM(c),t.oxw().comment=N}),t.qZA(),t.TgZ(6,"nz-spin",22),t.TgZ(7,"nz-form-item"),t.TgZ(8,"nz-form-control"),t.TgZ(9,"cvc-form-buttons"),t.TgZ(10,"cvc-org-selector-btn-group",23),t.NdJ("selectedOrgChange",function(N){return t.CHM(c),t.oxw().onOrgSelected(N)}),t.TgZ(11,"button",24),t._uU(12," Resolve "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const c=t.oxw();t.Q6J("ngIf",c.errorMessages.length>0),t.xp6(5),t.Q6J("comment",c.comment),t.xp6(1),t.Q6J("nzSpinning",c.loading),t.xp6(5),t.Q6J("disabled",!(void 0!==c.comment&&c.comment.length>=10))}}let vn=(()=>{class r{constructor(c,h,N){this.gql=c,this.viewerService=h,this.networkErrorService=N,this.errorMessages=[],this.loading=!1,this.success=!1,this.flagResolvePopoverVisible=!1,this.destroy$=new Z.xQ,this.resolveFlagMutator=new J.U(N)}ngOnInit(){if(void 0===this.flag)throw new Error("Must pass a Flag in to resolve component.");this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(c=>{this.selectedOrg=c.mostRecentOrg})}onOrgSelected(c){this.selectedOrg=c}resolveFlag(){var c;if(this.comment){this.errorMessages=[];let h=this.resolveFlagMutator.mutate(this.gql,{input:{id:this.flag.id,comment:this.comment,organizationId:null===(c=this.selectedOrg)||void 0===c?void 0:c.id}});h.submitSuccess$.pipe((0,A.R)(this.destroy$)).subscribe(N=>{N&&(this.flagResolvePopoverVisible=!1,this.success=!0,this.flagResolvedCallback&&this.flagResolvedCallback())}),h.submitError$.pipe((0,A.R)(this.destroy$)).subscribe(N=>{N.length>0&&(this.success=!1,this.errorMessages=N)}),h.isSubmitting$.pipe((0,A.R)(this.destroy$)).subscribe(N=>{this.loading=N})}}onSuccessBannerClose(){this.success=!1,this.flagResolvedCallback&&this.flagResolvedCallback()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return r.\u0275fac=function(c){return new(c||r)(t.Y36(o.EwB),t.Y36(b.a),t.Y36(H.Y))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cvc-flag-resolve-form"]],inputs:{flag:"flag",flagResolvedCallback:"flagResolvedCallback"},decls:6,vars:2,consts:[["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],[4,"ngrxLet"],["flagResolvePopoverTitleTemplate",""],["flagResolvePopoverContentTemplate",""],["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["noPermissions",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to resolve flag."],["nz-tooltip","","nzTooltipTitle","If you are not an editor, you can only resolve flags you opened."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click",4,"ngIf"],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click"],["nz-icon","","nzType","caret-down","nzTheme","outline"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription",4,"ngIf"],["errorContents",""],["nzType","inner",2,"width","300px"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[3,"selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription"],[4,"ngFor","ngForOf"]],template:function(c,h){1&c&&(t.YNc(0,m,1,0,"nz-alert",0),t.YNc(1,nn,8,2,"ng-container",1),t.YNc(2,pn,3,2,"ng-template",null,2,t.W1O),t.YNc(4,un,13,4,"ng-template",null,3,t.W1O)),2&c&&(t.Q6J("ngIf",h.success),t.xp6(1),t.Q6J("ngrxLet",h.viewer$))},directives:[n.O5,w.r,R.eJ,n.tP,U.SY,Y.ix,$.dQ,D.w,K.lU,L.Ls,n.PC,n.sg,x.bd,B._Y,B.JL,B.F,G.Lr,p.b,S.W,u.SK,G.Nx,u.t3,G.Fd,f.Z,C.q,j.m],styles:[""]}),r})();var hn=e(3618),xn=e(125),fn=e(4590),yn=e(685),On=e(8625);function E(r,y){if(1&r){const c=t.EpF();t.TgZ(0,"nz-alert",5),t.NdJ("nzOnClose",function(){const cn=t.CHM(c).$implicit;return t.oxw().onErrorBannerClose(cn)}),t.qZA()}2&r&&t.Q6J("nzMessage",y.$implicit)}function tn(r,y){if(1&r){const c=t.EpF();t.TgZ(0,"nz-alert",6),t.NdJ("nzOnClose",function(){return t.CHM(c),t.oxw().onSuccessBannerClose()}),t.qZA()}if(2&r){const c=t.oxw();t.MGl("nzMessage","Revision(s) successfully ",c.success,".")}}function v(r,y){if(1&r&&t._UZ(0,"cvc-comment-body",15),2&r){const c=t.oxw(2).$implicit;t.Q6J("commentBodySegments",c.openComment.parsedComment)}}function Q(r,y){if(1&r&&(t.ynx(0),t._UZ(1,"cvc-flag-resolve-form",16),t.BQk()),2&r){const c=t.oxw(2).$implicit,h=t.oxw(2);t.xp6(1),t.Q6J("flag",c)("flagResolvedCallback",h.flagResolvedCallback)}}function X(r,y){if(1&r&&(t.ynx(0),t._UZ(1,"cvc-comment-body",15),t.BQk()),2&r){const c=t.oxw(3).$implicit;t.xp6(1),t.Q6J("commentBodySegments",c.resolutionComment.parsedComment)}}function gn(r,y){if(1&r&&t._UZ(0,"cvc-user-tag",21),2&r){const c=t.oxw(3).$implicit;t.Q6J("user",c.resolvingUser)}}function An(r,y){if(1&r&&(t.TgZ(0,"nz-row"),t.TgZ(1,"nz-col",17),t.YNc(2,X,2,1,"ng-container",18),t.qZA(),t.TgZ(3,"nz-col",19),t._uU(4," Resolved By "),t.YNc(5,gn,1,1,"cvc-user-tag",20),t._uU(6),t.ALo(7,"timeago"),t.qZA(),t.qZA()),2&r){const c=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngIf",c.resolutionComment),t.xp6(3),t.Q6J("ngIf",void 0!==c.resolvingUser),t.xp6(1),t.hij(" ",t.lcZ(7,3,c.resolvedAt)," ")}}function En(r,y){if(1&r&&(t._UZ(0,"i",22),t._uU(1)),2&r){const c=t.oxw(2).$implicit;t.xp6(1),t.hij(" FID",c.id," ")}}function Zn(r,y){if(1&r&&(t.TgZ(0,"span"),t.TgZ(1,"span",26),t._uU(2,"Flagged By"),t.qZA(),t._UZ(3,"cvc-user-tag",21),t.TgZ(4,"span",26),t._uU(5),t.ALo(6,"timeago"),t.qZA(),t.qZA()),2&r){const c=t.oxw(3).$implicit;t.xp6(3),t.Q6J("user",c.flaggingUser),t.xp6(2),t.Oqu(t.lcZ(6,2,c.createdAt))}}function Rn(r,y){if(1&r&&t._UZ(0,"cvc-status-tag",27),2&r){const c=t.oxw(3).$implicit;t.Q6J("status",c.state)}}function In(r,y){1&r&&(t.TgZ(0,"nz-space",23),t.YNc(1,Zn,7,4,"span",24),t.YNc(2,Rn,1,1,"cvc-status-tag",25),t.qZA())}function Ln(r,y){if(1&r&&(t.TgZ(0,"nz-card",10),t.YNc(1,v,1,1,"cvc-comment-body",11),t._UZ(2,"nz-divider"),t.YNc(3,Q,2,2,"ng-container",3),t.YNc(4,An,8,5,"ng-template",null,12,t.W1O),t.YNc(6,En,2,1,"ng-template",null,13,t.W1O),t.YNc(8,In,3,0,"ng-template",null,14,t.W1O),t.qZA()),2&r){const c=t.MAs(5),h=t.MAs(7),N=t.MAs(9),cn=t.oxw().$implicit;t.Q6J("nzTitle",h)("nzExtra",N),t.xp6(1),t.Q6J("ngIf",cn.openComment),t.xp6(2),t.Q6J("ngIf","OPEN"==cn.state)("ngIfElse",c)}}function dn(r,y){1&r&&(t.ynx(0),t.YNc(1,Ln,10,5,"nz-card",9),t.BQk())}function Pn(r,y){if(1&r&&(t.ynx(0),t.TgZ(1,"nz-space",7),t.YNc(2,dn,2,0,"ng-container",8),t.qZA(),t.BQk()),2&r){const c=t.oxw();t.xp6(2),t.Q6J("ngForOf",c.flags)}}function Sn(r,y){1&r&&t._UZ(0,"nz-empty",28)}let Fn=(()=>{class r{constructor(c){this.viewerService=c,this.isLoading=!1,this.success=!1,this.destroy$=new Z.xQ}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(c=>{this.mostRecentOrg=c.mostRecentOrg})}setupMutationResultHandlers(c,h){c.submitSuccess$.pipe((0,A.R)(this.destroy$)).subscribe(N=>{N&&(this.isLoading=!1,this.errors=void 0,this.success=h)}),c.submitError$.pipe((0,A.R)(this.destroy$)).subscribe(N=>{N.length>0&&(this.isLoading=!1,this.success=!1,this.errors=N)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(c){var h;this.errors=null===(h=this.errors)||void 0===h?void 0:h.filter(N=>N!=c)}onSuccessBannerClose(){this.success=!1}}return r.\u0275fac=function(c){return new(c||r)(t.Y36(b.a))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cvc-flag-list"]],inputs:{flags:"flags",flagResolvedCallback:"flagResolvedCallback"},decls:6,vars:4,consts:[["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],["nzTitle","Flags",1,"card-list"],[4,"ngIf","ngIfElse"],["noFlags",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose"],["nzDirection","vertical"],[4,"ngFor","ngForOf"],["nzType","inner",3,"nzTitle","nzExtra",4,"nzSpaceItem"],["nzType","inner",3,"nzTitle","nzExtra"],[3,"commentBodySegments",4,"ngIf"],["flagResolved",""],["flagCardHeaderTitle",""],["flagCardHeaderExtra",""],[3,"commentBodySegments"],[3,"flag","flagResolvedCallback"],["nzSpan","16"],[4,"ngIf"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"user"],["nz-icon","","nzType","civic:flag"],["nzSize","small"],[4,"nzSpaceItem"],[3,"status",4,"nzSpaceItem"],["nz-typography","","nzType","secondary"],[3,"status"],["nzNotFoundImage","simple","nzNotFoundContent","No Flags matching filters"]],template:function(c,h){if(1&c&&(t.YNc(0,E,1,1,"nz-alert",0),t.YNc(1,tn,1,1,"nz-alert",1),t.TgZ(2,"nz-card",2),t.YNc(3,Pn,3,1,"ng-container",3),t.YNc(4,Sn,1,0,"ng-template",null,4,t.W1O),t.qZA()),2&c){const N=t.MAs(5);t.Q6J("ngForOf",h.errors),t.xp6(1),t.Q6J("ngIf",h.success),t.xp6(2),t.Q6J("ngIf",h.flags&&h.flags.length>0)("ngIfElse",N)}},directives:[n.sg,w.r,n.O5,x.bd,M.NU,M.$1,O.m,T.g,vn,u.SK,u.t3,hn.ZU,xn.I,L.Ls,D.w,fn.h,yn.p9],pipes:[On.wr],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}),r})();var Nn=e(1243);function Dn(r,y){if(1&r){const c=t.EpF();t.TgZ(0,"nz-alert",8),t.NdJ("nzOnClose",function(){return t.CHM(c),t.oxw().onSuccessBannerClose()}),t.qZA()}}function bn(r,y){if(1&r&&t._UZ(0,"nz-alert",9),2&r){t.oxw();const c=t.MAs(4);t.Q6J("nzDescription",c)}}function Qn(r,y){if(1&r&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&r){const c=y.$implicit;t.xp6(1),t.hij(" ",c," ")}}function Un(r,y){if(1&r&&(t.TgZ(0,"ul"),t.YNc(1,Qn,2,1,"li",10),t.qZA()),2&r){const c=t.oxw();t.xp6(1),t.Q6J("ngForOf",c.errorMessages)}}function Jn(r,y){}function Bn(r,y){1&r&&t.YNc(0,Jn,0,0,"ng-template")}function Yn(r,y){if(1&r&&(t.ynx(0),t.YNc(1,Bn,1,0,void 0,15),t.BQk()),2&r){t.oxw();const c=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",c)}}function $n(r,y){}function Wn(r,y){1&r&&t.YNc(0,$n,0,0,"ng-template")}function wn(r,y){if(1&r&&(t.TgZ(0,"span",16),t.YNc(1,Wn,1,0,void 0,15),t.qZA()),2&r){t.oxw();const c=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",c)}}function jn(r,y){if(1&r&&(t.TgZ(0,"button",17),t._uU(1),t.ALo(2,"enumToTitle"),t.qZA()),2&r){const c=t.oxw().ngrxLet,h=t.oxw();t.Q6J("disabled",!(void 0!==h.comment&&h.comment.length>=10&&c.signedIn)),t.xp6(1),t.hij(" Flag ",t.lcZ(2,2,h.flaggable.entityType)," ")}}function Kn(r,y){if(1&r){const c=t.EpF();t.ynx(0),t.TgZ(1,"cvc-form-buttons"),t.TgZ(2,"cvc-org-selector-btn-group",11),t.NdJ("selectedOrgChange",function(N){return t.CHM(c),t.oxw().onOrgSelected(N)}),t.YNc(3,Yn,2,1,"ng-container",12),t.YNc(4,wn,2,1,"ng-template",null,13,t.W1O),t.YNc(6,jn,3,4,"ng-template",null,14,t.W1O),t.qZA(),t.qZA(),t.BQk()}if(2&r){const c=y.ngrxLet,h=t.MAs(5);t.xp6(3),t.Q6J("ngIf",c.signedIn)("ngIfElse",h)}}let Vn=(()=>{class r{constructor(c,h,N){this.gql=c,this.viewerService=h,this.networkErrorService=N,this.errorMessages=[],this.success=!1,this.loading=!1,this.comment="",this.destroy$=new Z.xQ,this.addFlagMutator=new J.U(N)}ngOnInit(){if(this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(c=>{this.selectedOrg=c.mostRecentOrg}),void 0===this.flaggable)throw new Error("Must pass a flagggable into flag add component")}onOrgSelected(c){this.selectedOrg=c}submitFlag(){var c;this.errorMessages=[];let h={comment:this.comment,subject:this.flaggable,organizationId:null===(c=this.selectedOrg)||void 0===c?void 0:c.id},N=this.addFlagMutator.mutate(this.gql,{input:h});N.submitSuccess$.pipe((0,A.R)(this.destroy$)).subscribe(cn=>{cn&&(this.flagAddedCallback&&this.flagAddedCallback(),this.success=!0,this.comment="")}),N.submitError$.pipe((0,A.R)(this.destroy$)).subscribe(cn=>{cn.length>0&&(this.errorMessages=cn)}),N.isSubmitting$.pipe((0,A.R)(this.destroy$)).subscribe(cn=>{this.loading=cn})}onSuccessBannerClose(){this.success=!1}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return r.\u0275fac=function(c){return new(c||r)(t.Y36(o.B0s),t.Y36(b.a),t.Y36(H.Y))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cvc-flag-add-form"]],inputs:{flaggable:"flaggable",flagAddedCallback:"flagAddedCallback"},decls:11,vars:5,consts:[["nzType","inner"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription",4,"ngIf"],["errorContents",""],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[4,"ngrxLet"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription"],[4,"ngFor","ngForOf"],[3,"selectedOrgChange"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to flag entity."],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"]],template:function(c,h){1&c&&(t.TgZ(0,"nz-card",0),t.YNc(1,Dn,1,0,"nz-alert",1),t.YNc(2,bn,1,1,"nz-alert",2),t.YNc(3,Un,2,1,"ng-template",null,3,t.W1O),t.TgZ(5,"form",4),t.NdJ("ngSubmit",function(){return h.submitFlag()}),t.TgZ(6,"cvc-comment-input-form",5),t.NdJ("commentChange",function(cn){return h.comment=cn}),t.qZA(),t.TgZ(7,"nz-spin",6),t.TgZ(8,"nz-form-item"),t.TgZ(9,"nz-form-control"),t.YNc(10,Kn,8,2,"ng-container",7),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&c&&(t.xp6(1),t.Q6J("ngIf",h.success),t.xp6(1),t.Q6J("ngIf",h.errorMessages.length>0),t.xp6(4),t.Q6J("comment",h.comment),t.xp6(1),t.Q6J("nzSpinning",h.loading),t.xp6(3),t.Q6J("ngrxLet",h.viewer$))},directives:[x.bd,n.O5,w.r,n.sg,B._Y,B.JL,B.F,G.Lr,p.b,S.W,u.SK,G.Nx,u.t3,G.Fd,R.eJ,f.Z,C.q,n.tP,U.SY,Y.ix,$.dQ,j.m,D.w],pipes:[Nn.I],styles:[""]}),r})();var Hn=e(8747),Gn=e(6699);function Xn(r,y){if(1&r&&(t._UZ(0,"cvc-flag-list",13),t.ALo(1,"ngrxPush")),2&r){const c=t.oxw(2);t.Q6J("flags",t.lcZ(1,2,c.flags$))("flagResolvedCallback",c.refresh)}}function kn(r,y){if(1&r){const c=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(c);const N=t.oxw(2).ngrxLet;return t.oxw(2).loadMore(null==N?null:N.endCursor)}),t._uU(1,"Load More"),t.qZA()}}function qn(r,y){1&r&&(t.ynx(0),t.YNc(1,kn,2,0,"button",15),t.BQk())}function nt(r,y){if(1&r&&(t.ynx(0),t.YNc(1,qn,2,0,"ng-container",14),t.BQk()),2&r){const c=y.ngrxLet;t.xp6(1),t.Q6J("ngIf",null==c?null:c.hasNextPage)}}function tt(r,y){if(1&r&&t._UZ(0,"cvc-flag-add-form",17),2&r){const c=t.oxw(2);t.Q6J("flaggable",c.flaggable)("flagAddedCallback",c.refresh)}}function et(r,y){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&r){const c=y.$implicit;t.xp6(1),t.Oqu(c.displayName)}}function ot(r,y){if(1&r&&t._UZ(0,"nz-avatar",20),2&r){const c=t.oxw().$implicit;t.Q6J("nzSrc",c.profileImagePath)}}function it(r,y){if(1&r&&(t._UZ(0,"nz-avatar",21),t.ALo(1,"uppercase")),2&r){const c=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,c.username.charAt(0)))}}function at(r,y){if(1&r&&(t.YNc(0,ot,1,1,"nz-avatar",18),t.YNc(1,it,2,3,"ng-template",null,19,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&r){const c=y.$implicit,h=t.MAs(2);t.Q6J("ngIf",c.profileImagePath)("ngIfElse",h),t.xp6(4),t.Oqu(c.username)}}function st(r,y){if(1&r&&t._UZ(0,"nz-avatar",20),2&r){const c=t.oxw().$implicit;t.Q6J("nzSrc",c.profileImagePath)}}function ct(r,y){if(1&r&&(t._UZ(0,"nz-avatar",21),t.ALo(1,"uppercase")),2&r){const c=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,c.username.charAt(0)))}}function rt(r,y){if(1&r&&(t.YNc(0,st,1,1,"nz-avatar",18),t.YNc(1,ct,2,3,"ng-template",null,19,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&r){const c=y.$implicit,h=t.MAs(2);t.Q6J("ngIf",c.profileImagePath)("ngIfElse",h),t.xp6(4),t.Oqu(c.username)}}function _t(r,y){if(1&r){const c=t.EpF();t.ynx(0),t.TgZ(1,"nz-row",2),t.TgZ(2,"nz-col",3),t.TgZ(3,"nz-space",4),t.YNc(4,Xn,2,4,"cvc-flag-list",5),t.YNc(5,nt,2,1,"ng-container",6),t.YNc(6,tt,1,2,"cvc-flag-add-form",7),t.qZA(),t.qZA(),t.TgZ(7,"nz-col",8),t.TgZ(8,"cvc-participant-list",9),t.NdJ("participantSelectedEvent",function(N){return t.CHM(c),t.oxw().onStateSelected(N)}),t.YNc(9,et,2,1,"ng-template",null,10,t.W1O),t.qZA(),t.TgZ(11,"cvc-participant-list",11),t.NdJ("participantSelectedEvent",function(N){return t.CHM(c),t.oxw().onFlaggingUsersSelected(N)}),t.ALo(12,"ngrxPush"),t.YNc(13,at,5,3,"ng-template",null,10,t.W1O),t.qZA(),t.TgZ(15,"cvc-participant-list",12),t.NdJ("participantSelectedEvent",function(N){return t.CHM(c),t.oxw().onResolvingUsersSelected(N)}),t.ALo(16,"ngrxPush"),t.YNc(17,rt,5,3,"ng-template",null,10,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&r){const c=t.oxw();t.xp6(1),t.Q6J("nzGutter",16),t.xp6(4),t.Q6J("ngrxLet",c.pageInfo$),t.xp6(3),t.Q6J("preselectedOption",c.selectableStates[0])("participantList",c.selectableStates),t.xp6(3),t.Q6J("participantList",t.lcZ(12,6,c.uniqueFlaggingUsers$)),t.xp6(4),t.Q6J("participantList",t.lcZ(16,8,c.uniqueResolvingUsers$))}}function lt(r,y){if(1&r&&t._UZ(0,"cvc-flag-add-form",17),2&r){const c=t.oxw();t.Q6J("flaggable",c.flaggable)("flagAddedCallback",c.refresh)}}let gt=(()=>{class r{constructor(c){this.gql=c,this.defaultPageSize=5,this.selectableStates=[{id:1,displayName:"Open",value:o.BQZ.Open},{id:2,displayName:"Resolved",value:o.BQZ.Resolved}]}ngOnInit(){if(null==this.flaggable)throw new Error("Must pass a flaggable into flag list");this.queryRef=this.gql.watch({first:this.defaultPageSize,flaggable:this.flaggable,state:o.BQZ.Open}),this.refresh=()=>{this.queryRef.refetch()},this.results$=this.queryRef.valueChanges,this.flags$=this.results$.pipe((0,s.j)("data","flags","edges"),(0,_.U)(c=>c.map(h=>h.node))),this.pageInfo$=this.results$.pipe((0,s.j)("data","flags","pageInfo")),this.unfilteredCount$=this.results$.pipe((0,s.j)("data","flags","unfilteredCountForSubject")),this.uniqueFlaggingUsers$=this.results$.pipe((0,_.U)(({data:c})=>{var h;return null===(h=c.flags)||void 0===h?void 0:h.uniqueFlaggingUsers})),this.uniqueResolvingUsers$=this.results$.pipe((0,_.U)(({data:c})=>{var h;return null===(h=c.flags)||void 0===h?void 0:h.uniqueResolvingUsers}))}onFlaggingUsersSelected(c){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},flaggingUserId:c?c.id:void 0})}onResolvingUsersSelected(c){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},resolvingUserId:c?c.id:void 0})}onStateSelected(c){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},state:c?c.value:void 0})}loadMore(c){var h;null===(h=this.queryRef)||void 0===h||h.fetchMore({variables:{first:this.defaultPageSize,after:c}})}}return r.\u0275fac=function(c){return new(c||r)(t.Y36(o.rzy))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cvc-flag-list-and-filter"]],inputs:{flaggable:"flaggable"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noFlags",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"flags","flagResolvedCallback",4,"nzSpaceItem"],[4,"ngrxLet"],[3,"flaggable","flagAddedCallback",4,"nzSpaceItem"],["nzSpan","6"],["listTitle","Flag State",3,"preselectedOption","participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Flagging Users",3,"participantList","participantSelectedEvent"],["listTitle","Resolving Users",3,"participantList","participantSelectedEvent"],[3,"flags","flagResolvedCallback"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[3,"flaggable","flagAddedCallback"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"]],template:function(c,h){if(1&c&&(t.YNc(0,_t,19,10,"ng-container",0),t.ALo(1,"ngrxPush"),t.YNc(2,lt,1,2,"ng-template",null,1,t.W1O)),2&c){const N=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,h.unfilteredCount$))("ngIfElse",N)}},directives:[n.O5,u.SK,u.t3,M.NU,M.$1,Fn,R.eJ,Y.ix,$.dQ,D.w,Vn,Hn.l,Gn.Dz],pipes:[R.fM,n.gd],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}),r})()},4271:(sn,W,e)=>{e.d(W,{M:()=>ln});var o=e(9808),s=e(6949),_=e(3868),t=e(7345),n=e(7484),u=e(4546),M=e(3762),Z=e(8625),A=e(4182),b=e(1825),w=e(6042),x=e(4375),O=e(2359),T=e(404),J=e(9444),H=e(4509),R=e(7525),U=e(5e3);let Y=(()=>{class nn{}return nn.\u0275fac=function(pn){return new(pn||nn)},nn.\u0275mod=U.oAB({type:nn}),nn.\u0275inj=U.cJS({imports:[[o.ez,A.u5,A.UX,s.WG,u.U5,w.sL,n.vh,O.L,T.cg,R.j,b.A,x.R,J.s,H.w]]}),nn})();var $=e(9779),D=e(8144),K=e(1894),L=e(8481),B=e(3618),G=e(6699),p=e(3580),S=e(8018),f=e(6286),C=e(4867),j=e(8645),m=e(685),q=e(4466),I=e(6114),an=e(5737),rn=e(647),mn=e(3610),F=e(1047);let on=(()=>{class nn{}return nn.\u0275fac=function(pn){return new(pn||nn)},nn.\u0275mod=U.oAB({type:nn}),nn.\u0275inj=U.cJS({imports:[[o.ez,A.UX,s.WG,w.sL,u.U5,A.u5,O.L,n.vh,mn.$6,rn.PV,T.cg,R.j,H.w,x.R,b.A]]}),nn})();var g=e(7026),z=e(8909);let V=(()=>{class nn{}return nn.\u0275fac=function(pn){return new(pn||nn)},nn.\u0275mod=U.oAB({type:nn}),nn.\u0275inj=U.cJS({imports:[[o.ez,K.Jb,M.Ph,n.vh,D.zf,L.X,B.ZJ,G.Rt,m.Xo,I.Wr,an.S,T.cg,M.Ph,mn.$6,rn.PV,F.o7,A.u5,Z.$L.forChild({formatter:{useClass:g.x,provide:Z.KP}}),b.A,$.s,t.W,p.Q,S.e,f.y,C.Q,j.M,q.x,w.sL,O.L,s.WG,on,an.S,z.m]]}),nn})();var en=e(1150);let ln=(()=>{class nn{}return nn.\u0275fac=function(pn){return new(pn||nn)},nn.\u0275mod=U.oAB({type:nn}),nn.\u0275inj=U.cJS({imports:[[o.ez,A.u5,s.WG,Z.$L.forChild({formatter:{useClass:g.x,provide:Z.KP}}),w.sL,u.U5,_.aF,w.sL,t.W,M.Ph,n.vh,Y,V,m.Xo,en.N,G.Rt,D.zf]]}),nn})()},8168:(sn,W,e)=>{e.d(W,{Y:()=>s});var o=e(5e3);let s=(()=>{class _{constructor(){}}return _.\u0275fac=function(n){return new(n||_)},_.\u0275dir=o.lG2({type:_,selectors:[["","cvcFlaggableOptions",""]]}),_})()},5623:(sn,W,e)=>{e.d(W,{o:()=>H});var o=e(5e3),s=e(8168),_=e(9808),t=e(4401),n=e(647),u=e(404);const M=["cvcFlaggable",""];function Z(R,U){1&R&&o.Hsn(0)}function A(R,U){1&R&&o.GkF(0)}function b(R,U){if(1&R&&(o.ynx(0),o.YNc(1,A,1,0,"ng-container",2),o.BQk()),2&R){o.oxw();const Y=o.MAs(1);o.xp6(1),o.Q6J("ngTemplateOutlet",Y)}}function w(R,U){if(1&R&&(o.TgZ(0,"a",6),o._UZ(1,"i",7),o.qZA()),2&R){o.oxw();const Y=o.MAs(5);o.xp6(1),o.Q6J("nzTooltipTitle",Y)}}function x(R,U){if(1&R&&o._uU(0),2&R){const Y=o.oxw(2);o.hij(" ",Y.flags," open flags ")}}function O(R,U){1&R&&o.GkF(0)}function T(R,U){if(1&R&&(o.ynx(0),o.TgZ(1,"nz-ribbon",3),o.YNc(2,w,2,1,"ng-template",null,4,o.W1O),o.YNc(4,x,1,1,"ng-template",null,5,o.W1O),o.YNc(6,O,1,0,"ng-container",2),o.qZA(),o.BQk()),2&R){const Y=o.MAs(3);o.oxw();const $=o.MAs(1);o.xp6(1),o.Q6J("nzText",Y),o.xp6(5),o.Q6J("ngTemplateOutlet",$)}}const J=["*"];let H=(()=>{class R{constructor(Y){this.renderer=Y}ngOnChanges(){this.flags&&0===this.flags?this.removeFlagged():this.addFlagged()}ngAfterViewInit(){this.flags&&0===this.flags?this.removeFlagged():this.addFlagged()}addFlagged(){this.flaggedChild&&this.renderer.addClass(this.flaggedChild.nativeElement,"flaggedChild")}removeFlagged(){this.flaggedChild&&this.renderer.removeClass(this.flaggedChild.nativeElement,"flaggedChild")}}return R.\u0275fac=function(Y){return new(Y||R)(o.Y36(o.Qsj))},R.\u0275cmp=o.Xpm({type:R,selectors:[["","cvcFlaggable",""]],contentQueries:function(Y,$,D){if(1&Y&&o.Suo(D,s.Y,5,o.SBq),2&Y){let K;o.iGM(K=o.CRH())&&($.flaggedChild=K.first)}},inputs:{flags:"flags",entity:"entity"},features:[o.TTD],attrs:M,ngContentSelectors:J,decls:4,vars:2,consts:[["flaggedContent",""],[4,"ngIf"],[4,"ngTemplateOutlet"],["nzPlacement","start","nzColor","#ff3333",3,"nzText"],["flaggedText",""],["flaggedTooltip",""],["routerLink","flags",2,"color","#FFF"],["nz-icon","","nzType","flag","nzTheme","fill","nz-tooltip","","nzTooltipPlacement","top","nzTooltipColor","#FF3333",3,"nzTooltipTitle"]],template:function(Y,$){1&Y&&(o.F$t(),o.YNc(0,Z,1,0,"ng-template",null,0,o.W1O),o.YNc(2,b,2,1,"ng-container",1),o.YNc(3,T,7,2,"ng-container",1)),2&Y&&(o.xp6(2),o.Q6J("ngIf",0===$.flags),o.xp6(1),o.Q6J("ngIf",$.flags))},directives:[_.O5,_.tP,t.F9,n.Ls,u.SY],styles:[""]}),R})()},4682:(sn,W,e)=>{e.d(W,{m:()=>M});var o=e(9808),s=e(404),_=e(3618),t=e(4401),n=e(647),u=e(5e3);let M=(()=>{class Z{}return Z.\u0275fac=function(b){return new(b||Z)},Z.\u0275mod=u.oAB({type:Z}),Z.\u0275inj=u.cJS({imports:[[o.ez,n.PV,t.mS,s.cg,_.ZJ]]}),Z})()},1835:(sn,W,e)=>{e.d(W,{i:()=>g});var o=e(9808),s=e(7484),_=e(3762),t=e(1894),n=e(5e3);let u=(()=>{class z{}return z.\u0275fac=function(en){return new(en||z)},z.\u0275mod=n.oAB({type:z}),z.\u0275inj=n.cJS({imports:[[o.ez,t.Jb]]}),z})();var M=e(8144);let Z=(()=>{class z{}return z.\u0275fac=function(en){return new(en||z)},z.\u0275mod=n.oAB({type:z}),z.\u0275inj=n.cJS({imports:[[o.ez,s.vh,_.Ph,t.Jb,M.zf]]}),z})();var A=e(9779),b=e(1825),w=e(8481),x=e(3618),O=e(6699),T=e(8625),J=e(7345),H=e(3580),R=e(8018),U=e(6286),Y=e(4867),$=e(8645),D=e(5482),K=e(685),L=e(4466),B=e(6114),G=e(5737),p=e(404),S=e(6042),f=e(2359),C=e(6949),j=e(647),m=e(3610),q=e(1047),I=e(4182),an=e(9444),rn=e(3098),mn=e(7026),F=e(4509),on=e(8909);let g=(()=>{class z{}return z.\u0275fac=function(en){return new(en||z)},z.\u0275mod=n.oAB({type:z}),z.\u0275inj=n.cJS({imports:[[o.ez,t.Jb,_.Ph,s.vh,M.zf,w.X,x.ZJ,O.Rt,K.Xo,B.Wr,G.S,p.cg,_.Ph,m.$6,j.PV,q.o7,rn.q6,G.S,I.u5,T.$L.forChild({formatter:{useClass:mn.x,provide:T.KP}}),b.A,Z,A.s,u,J.W,H.Q,R.e,U.y,Y.Q,$.M,L.x,F.w,an.s,on.m,D.cD,S.sL,f.L,C.WG]]}),z})()},8291:(sn,W,e)=>{e.d(W,{a:()=>fe});var o=e(712),s=e(373),_=e(4850),t=e(1059),n=e(5e3),u=e(325),M=e(9808),Z=e(1894),A=e(8144),b=e(8929),w=e(6123),x=e(7625),O=e(9350),T=e(9169),J=e(2359),H=e(6949),R=e(7484),U=e(5482),Y=e(3762);const $=["itemTemplate"],D=function(i){return{$implicit:i}};function K(i,l){if(1&i&&(n.TgZ(0,"nz-list-item",9),n.TgZ(1,"span",10),n.GkF(2,11),n.qZA(),n.qZA()),2&i){const a=l.$implicit,d=n.oxw();n.xp6(2),n.Q6J("ngTemplateOutlet",d.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,D,a))}}function L(i,l){if(1&i&&n._UZ(0,"nz-list-empty",12),2&i){const a=n.oxw();n.MGl("nzNoResult","No ",a.entityType,"")}}function B(i,l){if(1&i&&(n.TgZ(0,"nz-list-item",14),n.TgZ(1,"span",10),n.GkF(2,11),n.qZA(),n.qZA()),2&i){const a=l.$implicit,d=n.oxw(3);n.xp6(2),n.Q6J("ngTemplateOutlet",d.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,D,a))}}function G(i,l){if(1&i&&n._UZ(0,"nz-list-empty",12),2&i){const a=n.oxw(3);n.MGl("nzNoResult","No ",a.entityType," Removed")}}function p(i,l){if(1&i&&(n.TgZ(0,"nz-list",2),n.YNc(1,B,3,4,"nz-list-item",13),n.YNc(2,G,1,1,"nz-list-empty",4),n.qZA()),2&i){const a=n.oxw(2);n.MGl("nzHeader","Removed ",a.entityType,""),n.xp6(1),n.Q6J("ngForOf",a.diffObject.removedObjects),n.xp6(1),n.Q6J("ngIf",0===a.diffObject.removedObjects.length)}}function S(i,l){1&i&&(n.ynx(0),n.YNc(1,p,3,3,"nz-list",7),n.BQk())}function f(i,l){if(1&i&&(n.TgZ(0,"nz-list-item",16),n.TgZ(1,"span",10),n.GkF(2,11),n.qZA(),n.qZA()),2&i){const a=l.$implicit,d=n.oxw(2);n.xp6(2),n.Q6J("ngTemplateOutlet",d.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,D,a))}}function C(i,l){if(1&i&&n._UZ(0,"nz-list-empty",12),2&i){const a=n.oxw(2);n.MGl("nzNoResult","No ",a.entityType," Added")}}function j(i,l){if(1&i&&(n.TgZ(0,"nz-list",2),n.YNc(1,f,3,4,"nz-list-item",15),n.YNc(2,C,1,1,"nz-list-empty",4),n.qZA()),2&i){const a=n.oxw();n.MGl("nzHeader","Added ",a.entityType,""),n.xp6(1),n.Q6J("ngForOf",a.diffObject.addedObjects),n.xp6(1),n.Q6J("ngIf",0===a.diffObject.addedObjects.length)}}function m(i,l){if(1&i&&(n.TgZ(0,"nz-list-item",18),n.TgZ(1,"span",10),n.GkF(2,11),n.qZA(),n.qZA()),2&i){const a=l.$implicit,d=n.oxw(3);n.xp6(2),n.Q6J("ngTemplateOutlet",d.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,D,a))}}function q(i,l){if(1&i&&n._UZ(0,"nz-list-empty",12),2&i){const a=n.oxw(3);n.MGl("nzNoResult","No ",a.entityType," Kept")}}function I(i,l){if(1&i&&(n.TgZ(0,"nz-list",2),n.YNc(1,m,3,4,"nz-list-item",17),n.YNc(2,q,1,1,"nz-list-empty",4),n.qZA()),2&i){const a=n.oxw(2);n.MGl("nzHeader","Kept ",a.entityType,""),n.xp6(1),n.Q6J("ngForOf",a.diffObject.keptObjects),n.xp6(1),n.Q6J("ngIf",0===a.diffObject.keptObjects.length)}}function an(i,l){1&i&&(n.ynx(0),n.YNc(1,I,3,3,"nz-list",7),n.BQk())}function rn(i,l){if(1&i&&(n.TgZ(0,"nz-list-item",19),n.TgZ(1,"span",10),n.GkF(2,11),n.qZA(),n.qZA()),2&i){const a=l.$implicit,d=n.oxw();n.xp6(2),n.Q6J("ngTemplateOutlet",d.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,D,a))}}function mn(i,l){if(1&i&&n._UZ(0,"nz-list-empty",12),2&i){const a=n.oxw();n.MGl("nzNoResult","No ",a.entityType,"")}}let F=(()=>{class i{constructor(){}ngOnInit(){if(void 0===this.diffObject)throw new Error("Must specify a diffObject.");if(void 0===this.entityType)throw new Error("Must specify an entityType.")}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=n.Xpm({type:i,selectors:[["cvc-revision-list-diff"]],contentQueries:function(a,d,P){if(1&a&&n.Suo(P,$,5),2&a){let k;n.iGM(k=n.CRH())&&(d.itemTemplateRef=k.first)}},inputs:{diffObject:"diffObject",entityType:"entityType"},decls:14,vars:12,consts:[[3,"nzGutter"],[3,"nzSpan"],["nzBordered","","nzType","inner","nzSize","small",3,"nzHeader"],["ngClass","current",4,"ngFor","ngForOf"],[3,"nzNoResult",4,"ngIf"],["nzDirection","vertical"],[4,"ngIf"],["nzBordered","","nzType","inner","nzSize","small",3,"nzHeader",4,"nzSpaceItem"],["ngClass","suggested",4,"ngFor","ngForOf"],["ngClass","current"],["nz-typography",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"nzNoResult"],["ngClass","removed",4,"ngFor","ngForOf"],["ngClass","removed"],["ngClass","added",4,"ngFor","ngForOf"],["ngClass","added"],["ngClass","kept",4,"ngFor","ngForOf"],["ngClass","kept"],["ngClass","suggested"]],template:function(a,d){1&a&&(n.TgZ(0,"nz-row",0),n.TgZ(1,"nz-col",1),n.TgZ(2,"nz-list",2),n.YNc(3,K,3,4,"nz-list-item",3),n.YNc(4,L,1,1,"nz-list-empty",4),n.qZA(),n.qZA(),n.TgZ(5,"nz-col",1),n.TgZ(6,"nz-space",5),n.YNc(7,S,2,0,"ng-container",6),n.YNc(8,j,3,3,"nz-list",7),n.YNc(9,an,2,0,"ng-container",6),n.qZA(),n.qZA(),n.TgZ(10,"nz-col",1),n.TgZ(11,"nz-list",2),n.YNc(12,rn,3,4,"nz-list-item",8),n.YNc(13,mn,1,1,"nz-list-empty",4),n.qZA(),n.qZA(),n.qZA()),2&a&&(n.Q6J("nzGutter",16),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(1),n.MGl("nzHeader","Original ",d.entityType," List"),n.xp6(1),n.Q6J("ngForOf",d.diffObject.currentObjects),n.xp6(1),n.Q6J("ngIf",0===d.diffObject.currentObjects.length),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.Q6J("ngIf",d.diffObject.currentObjects.length>0),n.xp6(2),n.Q6J("ngIf",d.diffObject.currentObjects.length>0),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(1),n.MGl("nzHeader","Revised ",d.entityType," List"),n.xp6(1),n.Q6J("ngForOf",d.diffObject.suggestedObjects),n.xp6(1),n.Q6J("ngIf",0===d.diffObject.suggestedObjects.length))},directives:[Z.SK,Z.t3,Y.n_,M.sg,Y.AA,M.mk,M.tP,M.O5,Y.I2,A.NU,A.$1],styles:["[_nghost-%COMP%]{display:block}nz-list[_ngcontent-%COMP%]   .kept[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{background-color:#f6ffed;color:#135200}nz-list[_ngcontent-%COMP%]   .removed[_ngcontent-%COMP%]{background-color:#fff1f0;color:#820014}nz-list[_ngcontent-%COMP%]   .suggested[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-space[_ngcontent-%COMP%]{width:100%}"]}),i})();var on=e(6906),g=e(4022),z=e(7469),V=e(8481),en=e(7701),ln=e(7956),nn=e(8664);let _n=(()=>{class i{constructor(){}ngOnInit(){if(void 0===this.left)throw new Error("Must provide a left side of the diff.");if(void 0===this.right)throw new Error("Must provide a right side of the diff.");if(void 0===this.entityType)throw new Error("Must provide a diff.")}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=n.Xpm({type:i,selectors:[["cvc-revision-value-diff"]],inputs:{currentValue:"currentValue",suggestedValue:"suggestedValue",left:"left",right:"right",entityType:"entityType"},decls:15,vars:10,consts:[[3,"nzGutter"],[3,"nzSpan"],[3,"innerHtml"],[1,"diff","suggested"],[1,"background"]],template:function(a,d){1&a&&(n.TgZ(0,"nz-row",0),n.TgZ(1,"nz-col",1),n.TgZ(2,"h4"),n._uU(3),n.qZA(),n._UZ(4,"div",2),n.qZA(),n.TgZ(5,"nz-col",1),n.TgZ(6,"h4"),n._uU(7),n.qZA(),n._UZ(8,"div",2),n.qZA(),n.TgZ(9,"nz-col",1),n.TgZ(10,"h4"),n._uU(11),n.qZA(),n.TgZ(12,"div",3),n.TgZ(13,"div",4),n._uU(14),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&a&&(n.Q6J("nzGutter",16),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.hij("Original ",d.entityType,""),n.xp6(1),n.Q6J("innerHtml",d.left,n.oJD),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.hij("",d.entityType," Diff"),n.xp6(1),n.Q6J("innerHtml",d.right,n.oJD),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.hij("Revised ",d.entityType,""),n.xp6(3),n.hij(" ",d.suggestedValue," "))},directives:[Z.SK,Z.t3],styles:[":host{display:block}.diff{overflow:auto;width:100%}.diff .background{padding:4px 8px}.diff.insertions .background{background:#f6ffed;color:#237804}.diff.deletions .background{background:#fff1f0;color:#a8071a}.diff.suggested .background,.diff.original .background{background:#f0f5ff;color:#10239e}.diff del,.diff ins{text-decoration:none}.diff del strong{font-weight:400;background:#fcc}.diff ins strong{font-weight:400;background:#9f9}.diff .del{font-weight:400;background:#fee;color:#b00}.diff .ins{font-weight:400;background:#dfd;color:#080}ul{list-style:none}\n"],encapsulation:2}),i})();var pn=e(5737),Cn=e(7948),zn=e(3618),Tn=e(125),un=e(647),vn=e(2683),hn=e(3610),xn=e(4590),fn=e(6042),yn=e(6114),On=e(404),E=e(685),tn=e(2643),v=e(9383),Q=e(8227),X=e(1793),gn=e(3098),An=e(1243),En=e(8625);function Zn(i,l){if(1&i){const a=n.EpF();n.TgZ(0,"nz-alert",4),n.NdJ("nzOnClose",function(){const k=n.CHM(a).$implicit;return n.oxw().onErrorBannerClose(k)}),n.qZA()}2&i&&n.Q6J("nzMessage",l.$implicit)}function Rn(i,l){if(1&i){const a=n.EpF();n.TgZ(0,"nz-alert",5),n.NdJ("nzOnClose",function(){return n.CHM(a),n.oxw().onSuccessBannerClose()}),n.qZA()}if(2&i){const a=n.oxw();n.MGl("nzMessage","Revision(s) successfully ",a.success,".")}}function In(i,l){1&i&&n._UZ(0,"cvc-source-tag",20),2&i&&n.Q6J("source",l.$implicit)}function Ln(i,l){if(1&i&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",18),n.YNc(2,In,1,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&i){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}const dn=function(i,l,a){return{id:i,name:l,link:a}};function Pn(i,l){if(1&i&&n._UZ(0,"cvc-disease-tag",22),2&i){const a=l.$implicit;n.Q6J("disease",n.kEZ(1,dn,a.id,a.displayName,a.link))}}function Sn(i,l){if(1&i&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",21),n.YNc(2,Pn,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&i){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function Fn(i,l){if(1&i&&n._UZ(0,"cvc-drug-tag",24),2&i){const a=l.$implicit;n.Q6J("drug",n.kEZ(1,dn,a.id,a.displayName,a.link))}}function Nn(i,l){if(1&i&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",23),n.YNc(2,Fn,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&i){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function Dn(i,l){if(1&i&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&i){const a=l.$implicit;n.xp6(1),n.hij(" ",a.displayName," ")}}function bn(i,l){if(1&i&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",25),n.YNc(2,Dn,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&i){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function Qn(i,l){if(1&i&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&i){const a=l.$implicit;n.xp6(1),n.hij(" ",a.displayName," ")}}function Un(i,l){if(1&i&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",26),n.YNc(2,Qn,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&i){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function Jn(i,l){if(1&i&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&i){const a=l.$implicit;n.xp6(1),n.hij(" ",a.displayName," ")}}function Bn(i,l){if(1&i&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",27),n.YNc(2,Jn,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&i){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function Yn(i,l){if(1&i&&n._UZ(0,"cvc-variant-type-tag",29),2&i){const a=l.$implicit;n.Q6J("variantType",n.kEZ(1,dn,a.id,a.displayName,a.link))}}function $n(i,l){if(1&i&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",28),n.YNc(2,Yn,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&i){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function Wn(i,l){if(1&i&&n._UZ(0,"cvc-phenotype-tag",31),2&i){const a=l.$implicit;n.Q6J("phenotype",n.kEZ(1,dn,a.id,a.displayName,a.link))}}function wn(i,l){if(1&i&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",30),n.YNc(2,Wn,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&i){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function jn(i,l){if(1&i&&n._UZ(0,"cvc-variant-tag",33),2&i){const a=l.$implicit;n.Q6J("variant",n.kEZ(1,dn,a.id,a.displayName,a.link))}}function Kn(i,l){if(1&i&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",32),n.YNc(2,jn,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&i){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function Vn(i,l){if(1&i&&n._UZ(0,"cvc-variant-tag",33),2&i){const a=l.$implicit;n.Q6J("variant",n.kEZ(1,dn,a.id,a.displayName,a.link))}}function Hn(i,l){if(1&i&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",34),n.YNc(2,Vn,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&i){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function Gn(i,l){1&i&&n._UZ(0,"cvc-source-tag",20),2&i&&n.Q6J("source",l.$implicit)}function Xn(i,l){if(1&i&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",35),n.YNc(2,Gn,1,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&i){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",a.linkoutData.diffValue)}}function kn(i,l){if(1&i&&(n.ynx(0),n._UZ(1,"cvc-revision-value-diff",36),n.BQk()),2&i){const a=n.oxw().$implicit;n.xp6(1),n.Q6J("currentValue",a.currentValue)("suggestedValue",a.suggestedValue)("left",a.linkoutData.diffValue.left)("right",a.linkoutData.diffValue.right)("entityType",a.linkoutData.name)}}function qn(i,l){if(1&i&&(n.ynx(0),n._UZ(1,"cvc-comment-body",40),n.BQk()),2&i){const a=n.oxw(2).$implicit;n.xp6(1),n.Q6J("commentBodySegments",a.resolutionComment.parsedComment)}}function nt(i,l){if(1&i&&n._UZ(0,"cvc-user-tag",41),2&i){const a=n.oxw(2).$implicit;n.Q6J("user",a.resolver)}}function tt(i,l){if(1&i&&(n.ynx(0),n._UZ(1,"nz-divider"),n.TgZ(2,"nz-row"),n.TgZ(3,"nz-col",37),n.YNc(4,qn,2,1,"ng-container",15),n.qZA(),n.TgZ(5,"nz-col",38),n._uU(6),n.ALo(7,"enumToTitle"),n.YNc(8,nt,1,1,"cvc-user-tag",39),n._uU(9),n.ALo(10,"timeago"),n.qZA(),n.qZA(),n.BQk()),2&i){const a=n.oxw().$implicit;n.xp6(4),n.Q6J("ngIf",a.resolutionComment),n.xp6(2),n.hij(" ",n.lcZ(7,4,a.status)," By "),n.xp6(2),n.Q6J("ngIf",void 0!==a.resolver),n.xp6(1),n.hij(" ",n.lcZ(10,6,a.resolvedAt)," ")}}function et(i,l){if(1&i&&(n.TgZ(0,"span"),n._UZ(1,"i",43),n._uU(2),n.TgZ(3,"span"),n._uU(4),n.qZA(),n.qZA()),2&i){const a=n.oxw(2).$implicit;n.xp6(2),n.hij(" RID",a.id," "),n.xp6(2),n.hij("",a.linkoutData.name," Updated")}}function ot(i,l){if(1&i&&n._UZ(0,"i",46),2&i){n.oxw();const a=n.MAs(3);n.Q6J("nzPopoverContent",a)}}function it(i,l){if(1&i&&n._UZ(0,"cvc-comment-body",40),2&i){const a=n.oxw(3).$implicit;n.Q6J("commentBodySegments",a.creationComment.parsedComment)}}function at(i,l){1&i&&(n.ynx(0),n.YNc(1,ot,1,1,"i",44),n.YNc(2,it,1,1,"ng-template",null,45,n.W1O),n.BQk())}function st(i,l){if(1&i&&(n.TgZ(0,"nz-space"),n.YNc(1,et,5,2,"span",42),n.YNc(2,at,4,0,"ng-container",15),n.qZA()),2&i){const a=n.oxw().$implicit;n.xp6(2),n.Q6J("ngIf",a.creationComment)}}function ct(i,l){if(1&i&&(n.ynx(0),n.TgZ(1,"span",53),n._uU(2,"Submitted By"),n.qZA(),n._UZ(3,"cvc-user-tag",41),n.BQk()),2&i){const a=n.oxw(3).$implicit;n.xp6(3),n.Q6J("user",a.revisor)}}function rt(i,l){1&i&&(n.TgZ(0,"span",53),n._uU(1,"Submitted"),n.qZA())}function _t(i,l){if(1&i&&(n.TgZ(0,"span"),n.YNc(1,ct,4,1,"ng-container",51),n.YNc(2,rt,2,0,"ng-template",null,52,n.W1O),n.TgZ(4,"span",53),n._uU(5),n.ALo(6,"timeago"),n.qZA(),n.qZA()),2&i){const a=n.MAs(3),d=n.oxw(2).$implicit;n.xp6(1),n.Q6J("ngIf",d.revisor)("ngIfElse",a),n.xp6(4),n.Oqu(n.lcZ(6,3,d.createdAt))}}function lt(i,l){if(1&i&&n._UZ(0,"cvc-status-tag",54),2&i){const a=n.oxw(2).$implicit;n.Q6J("status",a.status)}}function gt(i,l){1&i&&n._UZ(0,"nz-divider",55)}function r(i,l){if(1&i){const a=n.EpF();n.TgZ(0,"a",56),n.NdJ("click",function(){n.CHM(a);const P=n.oxw(2).$implicit;return n.oxw(3).onChangesetSelected(P.revisionsetId)}),n._uU(1,"Show Group"),n.qZA()}}function y(i,l){1&i&&n._UZ(0,"nz-divider",55)}function c(i,l){1&i&&n._UZ(0,"label",59),2&i&&n.Q6J("nzDisabled",!0)}function h(i,l){1&i&&n._UZ(0,"label",62),2&i&&n.Q6J("nzDisabled",!0)}function N(i,l){if(1&i){const a=n.EpF();n.TgZ(0,"label",63),n.NdJ("nzCheckedChange",function(P){n.CHM(a);const k=n.oxw(5).$implicit;return n.oxw(3).onRevisionCheckboxClicked(P,k.id)}),n.qZA()}}function cn(i,l){if(1&i&&(n.YNc(0,h,1,1,"label",60),n.YNc(1,N,1,0,"ng-template",null,61,n.W1O)),2&i){const a=n.MAs(2),d=n.oxw(4).$implicit,P=n.oxw(2).ngrxLet;n.Q6J("ngIf",P.isCurator&&P.id!=(null==d.revisor?null:d.revisor.id))("ngIfElse",a)}}function pt(i,l){if(1&i&&(n.TgZ(0,"span"),n.YNc(1,c,1,1,"label",57),n.YNc(2,cn,3,2,"ng-template",null,58,n.W1O),n.qZA()),2&i){const a=n.MAs(3),d=n.oxw(5).ngrxLet;n.xp6(1),n.Q6J("ngIf",!d.signedIn)("ngIfElse",a)}}function mt(i,l){1&i&&(n.ynx(0),n.YNc(1,y,1,0,"nz-divider",49),n.YNc(2,pt,4,2,"span",42),n.BQk())}function dt(i,l){if(1&i&&(n.TgZ(0,"nz-space",47),n.NdJ("click",function(d){return d.stopPropagation()}),n.YNc(1,_t,7,5,"span",42),n.YNc(2,lt,1,1,"cvc-status-tag",48),n.YNc(3,gt,1,0,"nz-divider",49),n.YNc(4,r,2,0,"a",50),n.YNc(5,mt,3,0,"ng-container",15),n.qZA()),2&i){const a=n.oxw().$implicit;n.xp6(5),n.Q6J("ngIf","NEW"===a.status)}}function ut(i,l){if(1&i&&(n.TgZ(0,"nz-collapse-panel",11),n.ynx(1,12),n.YNc(2,Ln,4,1,"ng-container",13),n.YNc(3,Sn,4,1,"ng-container",13),n.YNc(4,Nn,4,1,"ng-container",13),n.YNc(5,bn,4,1,"ng-container",13),n.YNc(6,Un,4,1,"ng-container",13),n.YNc(7,Bn,4,1,"ng-container",13),n.YNc(8,$n,4,1,"ng-container",13),n.YNc(9,wn,4,1,"ng-container",13),n.YNc(10,Kn,4,1,"ng-container",13),n.YNc(11,Hn,4,1,"ng-container",13),n.YNc(12,Xn,4,1,"ng-container",13),n.YNc(13,kn,2,5,"ng-container",14),n.BQk(),n.YNc(14,tt,11,8,"ng-container",15),n.YNc(15,st,3,1,"ng-template",null,16,n.W1O),n.YNc(17,dt,6,1,"ng-template",null,17,n.W1O),n.qZA()),2&i){const a=l.$implicit,d=n.MAs(16),P=n.MAs(18);n.Q6J("nzHeader",d)("nzExtra",P)("nzActive",!0),n.xp6(1),n.Q6J("ngSwitch",a.fieldName),n.xp6(1),n.Q6J("ngSwitchCase","source_ids"),n.xp6(1),n.Q6J("ngSwitchCase","disease_id"),n.xp6(1),n.Q6J("ngSwitchCase","drug_ids"),n.xp6(1),n.Q6J("ngSwitchCase","variant_alias_ids"),n.xp6(1),n.Q6J("ngSwitchCase","clinvar_entry_ids"),n.xp6(1),n.Q6J("ngSwitchCase","hgvs_expression_ids"),n.xp6(1),n.Q6J("ngSwitchCase","variant_type_ids"),n.xp6(1),n.Q6J("ngSwitchCase","phenotype_ids"),n.xp6(1),n.Q6J("ngSwitchCase","variant_id"),n.xp6(1),n.Q6J("ngSwitchCase","variant_ids"),n.xp6(1),n.Q6J("ngSwitchCase","source_id"),n.xp6(2),n.Q6J("ngIf","NEW"!==a.status)}}function vt(i,l){if(1&i&&(n.TgZ(0,"nz-collapse",9),n.YNc(1,ut,19,16,"nz-collapse-panel",10),n.qZA()),2&i){const a=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",a.untypedRevisons)}}function ft(i,l){1&i&&n._UZ(0,"nz-empty",64)}function Ct(i,l){if(1&i&&(n.ynx(0),n.TgZ(1,"nz-card",6),n.YNc(2,vt,2,1,"nz-collapse",7),n.YNc(3,ft,1,0,"ng-template",null,8,n.W1O),n.qZA(),n.BQk()),2&i){const a=n.MAs(4),d=n.oxw(),P=n.MAs(4);n.xp6(1),n.Q6J("nzExtra",P),n.xp6(1),n.Q6J("ngIf",d.revisions&&d.revisions.length>0)("ngIfElse",a)}}function zt(i,l){}function Tt(i,l){1&i&&n.YNc(0,zt,0,0,"ng-template")}function ht(i,l){if(1&i&&(n.ynx(0),n.YNc(1,Tt,1,0,void 0,73),n.BQk()),2&i){n.oxw();const a=n.MAs(5);n.xp6(1),n.Q6J("ngTemplateOutlet",a)}}function xt(i,l){}function yt(i,l){1&i&&n.YNc(0,xt,0,0,"ng-template")}function Ot(i,l){if(1&i&&(n.TgZ(0,"span",74),n.YNc(1,yt,1,0,void 0,73),n.qZA()),2&i){n.oxw();const a=n.MAs(5);n.xp6(1),n.Q6J("ngTemplateOutlet",a)}}function Mt(i,l){if(1&i){const a=n.EpF();n.TgZ(0,"button",75),n.NdJ("nzPopoverVisibleChange",function(P){return n.CHM(a),n.oxw(7).validationPopoverVisible=P})("click",function(){n.CHM(a);const P=n.oxw(7);return P.validationPopoverVisible=!P.validationPopoverVisible}),n._uU(1," Review Selected Revisions "),n._UZ(2,"i",76),n.qZA()}if(2&i){const a=n.oxw(2).ngrxLet,d=n.MAs(7),P=n.MAs(9),k=n.oxw(5);n.Q6J("nzPopoverTitle",d)("nzPopoverVisible",k.validationPopoverVisible)("nzPopoverContent",P)("nzPopoverTrigger",void 0)("disabled",0===k.selectedRevisionIds.length||!a.signedIn)}}function At(i,l){if(1&i&&(n.TgZ(0,"span"),n.YNc(1,ht,2,1,"ng-container",51),n.YNc(2,Ot,2,1,"ng-template",null,71,n.W1O),n.YNc(4,Mt,3,5,"ng-template",null,72,n.W1O),n.qZA()),2&i){const a=n.MAs(3),d=n.oxw().ngrxLet;n.xp6(1),n.Q6J("ngIf",d.signedIn)("ngIfElse",a)}}function Et(i,l){if(1&i&&n._UZ(0,"i",78),2&i){n.oxw(4);const a=n.MAs(3);n.Q6J("nzPopoverContent",a)}}function Zt(i,l){1&i&&(n.ynx(0),n.YNc(1,Et,1,1,"i",77),n.BQk())}const Rt=function(){return{float:"right"}};function It(i,l){if(1&i){const a=n.EpF();n._uU(0," Review Selected Revisions "),n.TgZ(1,"span",79),n.TgZ(2,"i",80),n.NdJ("click",function(){return n.CHM(a),n.oxw(6).validationPopoverVisible=!1}),n.qZA(),n.qZA()}2&i&&(n.xp6(1),n.Q6J("ngStyle",n.DdM(1,Rt)))}function Lt(i,l){if(1&i){const a=n.EpF();n.TgZ(0,"cvc-comment-input-form",83),n.NdJ("commentChange",function(P){return n.CHM(a),n.oxw(7).revisionComment=P}),n.qZA()}if(2&i){const a=n.oxw(7);n.Q6J("comment",a.revisionComment)}}function Pt(i,l){if(1&i){const a=n.EpF();n.TgZ(0,"span"),n.TgZ(1,"cvc-org-selector-btn-group",84),n.NdJ("selectedOrgChange",function(P){return n.CHM(a),n.oxw(8).mostRecentOrg=P}),n.TgZ(2,"button",85),n.NdJ("click",function(){return n.CHM(a),n.oxw(8).onRejectRevisionsClicked()}),n._uU(3," Reject Revision "),n.qZA(),n.qZA(),n.qZA()}if(2&i){const a=n.oxw(8);n.xp6(1),n.Q6J("selectedOrg",a.mostRecentOrg),n.xp6(1),n.Q6J("nzLoading",a.isLoading)("disabled",void 0===a.revisionComment||a.revisionComment.length<10)}}function St(i,l){if(1&i){const a=n.EpF();n.TgZ(0,"span"),n.TgZ(1,"cvc-org-selector-btn-group",84),n.NdJ("selectedOrgChange",function(P){return n.CHM(a),n.oxw(8).mostRecentOrg=P}),n.TgZ(2,"button",86),n.NdJ("click",function(){return n.CHM(a),n.oxw(8).onAcceptRevisionClicked()}),n._uU(3," Accept Revision "),n.qZA(),n.qZA(),n.qZA()}if(2&i){const a=n.oxw(4).ngrxLet,d=n.oxw(4);n.xp6(1),n.Q6J("selectedOrg",d.mostRecentOrg),n.xp6(1),n.Q6J("nzLoading",d.isLoading)("disabled",!(0==a&&(void 0===d.revisionComment||""===d.revisionComment||d.revisionComment.length>=10)))}}function Ft(i,l){if(1&i&&n._UZ(0,"i",88),2&i){n.oxw(6);const a=n.MAs(3);n.Q6J("nzPopoverContent",a)}}function Nt(i,l){if(1&i&&(n.TgZ(0,"span"),n.YNc(1,Ft,1,1,"i",87),n.qZA()),2&i){const a=n.oxw(4).ngrxLet;n.xp6(1),n.Q6J("ngIf",a>0)}}function Dt(i,l){1&i&&(n.TgZ(0,"span"),n.TgZ(1,"nz-space"),n.YNc(2,Pt,4,3,"span",42),n.YNc(3,St,4,3,"span",42),n.YNc(4,Nt,2,1,"span",42),n.qZA(),n.qZA())}function bt(i,l){1&i&&(n.TgZ(0,"nz-space",81),n.YNc(1,Lt,1,1,"cvc-comment-input-form",82),n.YNc(2,Dt,5,0,"span",42),n.qZA())}function Qt(i,l){if(1&i&&(n.ynx(0),n.TgZ(1,"div",66),n.TgZ(2,"div",67),n.TgZ(3,"nz-space",68),n.YNc(4,At,6,2,"span",42),n.YNc(5,Zt,2,0,"ng-container",15),n.qZA(),n.YNc(6,It,3,2,"ng-template",null,69,n.W1O),n.YNc(8,bt,3,0,"ng-template",null,70,n.W1O),n.qZA(),n.qZA(),n.BQk()),2&i){const a=n.oxw().ngrxLet;n.xp6(5),n.Q6J("ngIf",a>0)}}function Ut(i,l){if(1&i&&(n.ynx(0),n.YNc(1,Qt,10,1,"ng-container",2),n.BQk()),2&i){const a=n.oxw(4);n.xp6(1),n.Q6J("ngrxLet",a.viewer$)}}function Jt(i,l){if(1&i&&(n.TgZ(0,"nz-list-item"),n._uU(1),n.qZA()),2&i){const a=l.$implicit;n.xp6(1),n.Oqu(a)}}function Bt(i,l){if(1&i&&(n.TgZ(0,"nz-card",90),n.TgZ(1,"nz-list",91),n.YNc(2,Jt,2,1,"nz-list-item",92),n.qZA(),n.qZA()),2&i){const a=n.oxw(3).ngrxLet;n.xp6(2),n.Q6J("ngForOf",a)}}function Yt(i,l){if(1&i&&(n.TgZ(0,"span"),n.YNc(1,Bt,3,1,"nz-card",89),n.qZA()),2&i){const a=n.oxw(2).ngrxLet;n.xp6(1),n.Q6J("ngIf",a.length>0)}}function $t(i,l){if(1&i&&(n.TgZ(0,"nz-descriptions-item",97),n._uU(1),n.qZA()),2&i){const a=l.$implicit;n.Q6J("nzTitle",a.fieldName),n.xp6(1),n.Oqu(a.error)}}function Wt(i,l){if(1&i&&(n.TgZ(0,"nz-card",94),n.TgZ(1,"nz-descriptions",95),n.YNc(2,$t,2,2,"nz-descriptions-item",96),n.qZA(),n.qZA()),2&i){const a=n.oxw(4).ngrxLet;n.xp6(2),n.Q6J("ngForOf",a)}}function wt(i,l){if(1&i&&(n.TgZ(0,"span"),n.YNc(1,Wt,3,1,"nz-card",93),n.qZA()),2&i){const a=n.oxw(3).ngrxLet;n.xp6(1),n.Q6J("ngIf",a.length>0)}}function jt(i,l){1&i&&(n.TgZ(0,"nz-space",81),n.YNc(1,Yt,2,1,"span",42),n.YNc(2,wt,2,1,"span",42),n.qZA())}function Kt(i,l){if(1&i&&(n.ynx(0),n.YNc(1,Ut,2,1,"ng-container",2),n.YNc(2,jt,3,0,"ng-template",null,65,n.W1O),n.BQk()),2&i){const a=n.oxw(3);n.xp6(1),n.Q6J("ngrxLet",a.totalErrorCount$)}}function Vt(i,l){if(1&i&&(n.ynx(0),n.YNc(1,Kt,4,1,"ng-container",2),n.BQk()),2&i){const a=n.oxw(2);n.xp6(1),n.Q6J("ngrxLet",a.genericErrors$)}}function Ht(i,l){if(1&i&&n.YNc(0,Vt,2,1,"ng-container",2),2&i){const a=n.oxw();n.Q6J("ngrxLet",a.validationErrors$)}}let Gt=(()=>{class i{constructor(a,d,P,k,Mn){this.viewerService=a,this.networkErrorService=d,this.acceptRevisionsGql=P,this.rejectRevisionsGql=k,this.validationGql=Mn,this.selectedRevisionIds=[],this.isLoading=!1,this.success=!1,this.validationPopoverVisible=!1,this.destroy$=new b.xQ,this.revisionSetSelectedEvent=new n.vpe,this.revisionMutationCompleted=new n.vpe,this.acceptRevisionsMutator=new w.U(d),this.rejectRevisionsMutator=new w.U(d)}ngOnChanges(a){this.untypedRevisons=this.revisions,this.selectedRevisionIds=[],this.queryRef&&this.queryRef.refetch({ids:this.selectedRevisionIds})}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(a=>{this.mostRecentOrg=a.mostRecentOrg}),this.queryRef=this.validationGql.watch({ids:[]}),this.genericErrors$=this.queryRef.valueChanges.pipe((0,_.U)(({data:a})=>a.validateRevisionsForAcceptance.genericErrors)),this.validationErrors$=this.queryRef.valueChanges.pipe((0,_.U)(({data:a})=>a.validateRevisionsForAcceptance.validationErrors)),this.totalErrorCount$=this.queryRef.valueChanges.pipe((0,_.U)(({data:a})=>a.validateRevisionsForAcceptance.genericErrors.length+a.validateRevisionsForAcceptance.validationErrors.length),(0,t.O)(0)),this.untypedRevisons=this.revisions}onChangesetSelected(a){this.revisionSetSelectedEvent.emit(a)}onRevisionCheckboxClicked(a,d){a?this.selectedRevisionIds.push(d):this.selectedRevisionIds=this.selectedRevisionIds.filter(P=>P!=d),this.queryRef.refetch({ids:this.selectedRevisionIds})}setupMutationResultHandlers(a,d){a.submitSuccess$.pipe((0,x.R)(this.destroy$)).subscribe(P=>{P&&(this.isLoading=!1,this.revisionMutationCompleted.emit(),this.errors=void 0,this.success=d,this.validationPopoverVisible=!1,this.selectedRevisionIds=[])}),a.submitError$.pipe((0,x.R)(this.destroy$)).subscribe(P=>{P.length>0&&(this.isLoading=!1,this.success=!1,this.errors=P,this.validationPopoverVisible=!1,this.selectedRevisionIds=[])})}onRejectRevisionsClicked(){var a;if(this.revisionComment&&""!==this.revisionComment){this.isLoading=!0;let d=this.rejectRevisionsMutator.mutate(this.rejectRevisionsGql,{input:{ids:this.selectedRevisionIds,organizationId:null===(a=this.mostRecentOrg)||void 0===a?void 0:a.id,comment:this.revisionComment}});this.setupMutationResultHandlers(d,"rejected")}}onAcceptRevisionClicked(){var a;this.isLoading=!0;let d=this.acceptRevisionsMutator.mutate(this.acceptRevisionsGql,{input:{ids:this.selectedRevisionIds,organizationId:null===(a=this.mostRecentOrg)||void 0===a?void 0:a.id,comment:""===this.revisionComment?void 0:this.revisionComment}});this.setupMutationResultHandlers(d,"accepted")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(a){var d;this.errors=null===(d=this.errors)||void 0===d?void 0:d.filter(P=>P!=a)}onSuccessBannerClose(){this.success=!1}}return i.\u0275fac=function(a){return new(a||i)(n.Y36(O.a),n.Y36(T.Y),n.Y36(o.ti),n.Y36(o.VZq),n.Y36(o.Qzn))},i.\u0275cmp=n.Xpm({type:i,selectors:[["cvc-revision-list"]],inputs:{revisions:"revisions"},outputs:{revisionSetSelectedEvent:"revisionSetSelectedEvent",revisionMutationCompleted:"revisionMutationCompleted"},features:[n.TTD],decls:5,vars:3,consts:[["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],[4,"ngrxLet"],["moderationButtons",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose"],["nzTitle","Revisions",1,"card-list",3,"nzExtra"],["class","revision-list",4,"ngIf","ngIfElse"],["noRevisions",""],[1,"revision-list"],[3,"nzHeader","nzExtra","nzActive",4,"ngFor","ngForOf"],[3,"nzHeader","nzExtra","nzActive"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"],["revCardHeaderTitle",""],["revCardHeaderExtra",""],["entityType","Sources",3,"diffObject"],["itemTemplate",""],[3,"source"],["entityType","Disease",3,"diffObject"],[3,"disease"],["entityType","Drugs",3,"diffObject"],[3,"drug"],["entityType","Variant Aliases",3,"diffObject"],["entityType","ClinVar Entries",3,"diffObject"],["entityType","HGVS Expressions",3,"diffObject"],["entityType","Variant Types",3,"diffObject"],[3,"variantType"],["entityType","Phenotypes",3,"diffObject"],[3,"phenotype"],["entityType","Variant",3,"diffObject"],[3,"variant"],["entityType","Variants",3,"diffObject"],["entityType","Source",3,"diffObject"],[3,"currentValue","suggestedValue","left","right","entityType"],["nzSpan","16"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"commentBodySegments"],[3,"user"],[4,"nzSpaceItem"],["nz-icon","","nzType","civic:revision"],["nz-popover","","nz-icon","","nzType","comment","nzTheme","outline",3,"nzPopoverContent",4,"nzSpaceItem"],["creationCommentTemplate",""],["nz-popover","","nz-icon","","nzType","comment","nzTheme","outline",3,"nzPopoverContent"],["nzSize","small",3,"click"],[3,"status",4,"nzSpaceItem"],["nzType","vertical",4,"nzSpaceItem"],["nz-button","","nzType","link",3,"click",4,"nzSpaceItem"],[4,"ngIf","ngIfElse"],["noRevisor",""],["nz-typography","","nzType","secondary"],[3,"status"],["nzType","vertical"],["nz-button","","nzType","link",3,"click"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions.",3,"nzDisabled",4,"ngIf","ngIfElse"],["loggedIn",""],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions.",3,"nzDisabled"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Curators may only reject their own revisions.",3,"nzDisabled",4,"ngIf","ngIfElse"],["canRevise",""],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Curators may only reject their own revisions.",3,"nzDisabled"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Select Revision for Acceptance/Rejection",3,"nzCheckedChange"],["nzNotFoundImage","simple","nzNotFoundContent","No Revisions matching filters"],["validationErrorTemplate",""],["nz-row","",2,"margin-top","1em"],["nz-col","","nzSpan","24",2,"text-align","right"],["nzDirection","horizontal"],["validationPopoverTitleTemplate",""],["validationPopoverContentTemplate",""],["notSignedIn",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click"],["nz-icon","","nzType","caret-down","nzTheme","outline"],["nz-icon","","nzType","exclamation-circle","nzTheme","twotone","nzTwotoneColor","red","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent",4,"nzSpaceItem"],["nz-icon","","nzType","exclamation-circle","nzTheme","twotone","nzTwotoneColor","red","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzDirection","vertical"],[3,"comment","commentChange",4,"nzSpaceItem"],[3,"comment","commentChange"],[3,"selectedOrg","selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzSize","small","nzDanger","",3,"nzLoading","disabled","click"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzSize","small",3,"nzLoading","disabled","click"],["nz-icon","","nzTwotoneColor","red","nzType","exclamation-circle","nzTheme","twotone","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent",4,"ngIf"],["nz-icon","","nzTwotoneColor","red","nzType","exclamation-circle","nzTheme","twotone","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent"],["nzTitle","Errors",4,"ngIf"],["nzTitle","Errors"],["nzSize","small"],[4,"ngFor","ngForOf"],["nzTitle","Validation Errors",4,"ngIf"],["nzTitle","Validation Errors"],["nzBordered",""],[3,"nzTitle",4,"ngFor","ngForOf"],[3,"nzTitle"]],template:function(a,d){1&a&&(n.YNc(0,Zn,1,1,"nz-alert",0),n.YNc(1,Rn,1,1,"nz-alert",1),n.YNc(2,Ct,5,3,"ng-container",2),n.YNc(3,Ht,1,1,"ng-template",null,3,n.W1O)),2&a&&(n.Q6J("ngForOf",d.errors),n.xp6(1),n.Q6J("ngIf",d.success),n.xp6(1),n.Q6J("ngrxLet",d.viewer$))},directives:[M.sg,J.r,M.O5,H.eJ,R.bd,U.yH,U.Zv,M.RF,M.n9,F,on.T,g.n,z.u,V.j,en.j,ln.i,nn.I,M.ED,_n,pn.g,Z.SK,Z.t3,Cn.m,zn.ZU,Tn.I,A.NU,A.$1,un.Ls,vn.w,hn.lU,xn.h,fn.ix,yn.Ie,On.SY,E.p9,M.tP,tn.dQ,M.PC,v.b,Q.q,X.m,Y.n_,Y.AA,gn.R7,gn.uj],pipes:[An.I,En.wr],styles:["[_nghost-%COMP%]{display:block}nz-list[_ngcontent-%COMP%]   .kept[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{background-color:#f6ffed;color:#135200}nz-list[_ngcontent-%COMP%]   .removed[_ngcontent-%COMP%]{background-color:#fff1f0;color:#820014}nz-list[_ngcontent-%COMP%]   .suggested[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}"]}),i})();var Xt=e(8747),kt=e(6699);function qt(i,l){if(1&i){const a=n.EpF();n.TgZ(0,"cvc-revision-list",14),n.NdJ("revisionSetSelectedEvent",function(P){return n.CHM(a),n.oxw(2).onRevisionSetSelected(P)})("revisionMutationCompleted",function(){return n.CHM(a),n.oxw(2).refresh()}),n.ALo(1,"ngrxPush"),n.qZA()}if(2&i){const a=n.oxw(2);n.Q6J("revisions",n.lcZ(1,1,a.revisions$))}}function ne(i,l){if(1&i){const a=n.EpF();n.TgZ(0,"button",17),n.NdJ("click",function(){n.CHM(a);const P=n.oxw(2).ngrxLet;return n.oxw(2).loadMore(null==P?null:P.endCursor)}),n._uU(1,"Load More"),n.qZA()}}function te(i,l){1&i&&(n.ynx(0),n.YNc(1,ne,2,0,"button",16),n.BQk())}function ee(i,l){if(1&i&&(n.ynx(0),n.YNc(1,te,2,0,"ng-container",15),n.BQk()),2&i){const a=l.ngrxLet;n.xp6(1),n.Q6J("ngIf",null==a?null:a.hasNextPage)}}function oe(i,l){if(1&i){const a=n.EpF();n.TgZ(0,"nz-row"),n.TgZ(1,"nz-tag",19),n.NdJ("nzOnClose",function(){return n.CHM(a),n.oxw(3).onSetFilterClearClicked()}),n._uU(2),n.qZA(),n.qZA()}if(2&i){const a=n.oxw(3);n.xp6(2),n.hij("Group: ",a.filteredSet,"")}}function ie(i,l){1&i&&(n.TgZ(0,"nz-space",4),n.YNc(1,oe,3,1,"nz-row",18),n.qZA())}function ae(i,l){if(1&i&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&i){const a=l.$implicit;n.xp6(1),n.Oqu(a.displayName)}}function se(i,l){if(1&i&&n._UZ(0,"nz-avatar",22),2&i){const a=n.oxw().$implicit;n.Q6J("nzSrc",a.profileImagePath)}}function ce(i,l){if(1&i&&(n._UZ(0,"nz-avatar",23),n.ALo(1,"uppercase")),2&i){const a=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,a.username.charAt(0)))}}function re(i,l){if(1&i&&(n.YNc(0,se,1,1,"nz-avatar",20),n.YNc(1,ce,2,3,"ng-template",null,21,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&i){const a=l.$implicit,d=n.MAs(2);n.Q6J("ngIf",a.profileImagePath)("ngIfElse",d),n.xp6(4),n.Oqu(a.username)}}function _e(i,l){if(1&i&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&i){const a=l.$implicit;n.xp6(1),n.Oqu(a.displayName)}}function le(i,l){if(1&i&&n._UZ(0,"nz-avatar",22),2&i){const a=n.oxw().$implicit;n.Q6J("nzSrc",a.profileImagePath)}}function ge(i,l){if(1&i&&(n._UZ(0,"nz-avatar",23),n.ALo(1,"uppercase")),2&i){const a=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,a.username.charAt(0)))}}function pe(i,l){if(1&i&&(n.YNc(0,le,1,1,"nz-avatar",20),n.YNc(1,ge,2,3,"ng-template",null,21,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&i){const a=l.$implicit,d=n.MAs(2);n.Q6J("ngIf",a.profileImagePath)("ngIfElse",d),n.xp6(4),n.Oqu(a.username)}}function me(i,l){if(1&i){const a=n.EpF();n.ynx(0),n.TgZ(1,"nz-row",2),n.TgZ(2,"nz-col",3),n.TgZ(3,"nz-space",4),n.YNc(4,qt,2,3,"cvc-revision-list",5),n.YNc(5,ee,2,1,"ng-container",6),n.qZA(),n.qZA(),n.TgZ(6,"nz-col",7),n.YNc(7,ie,2,0,"nz-space",8),n.TgZ(8,"cvc-participant-list",9),n.NdJ("participantSelectedEvent",function(P){return n.CHM(a),n.oxw().onStatusSelected(P)}),n.YNc(9,ae,2,1,"ng-template",null,10,n.W1O),n.qZA(),n.TgZ(11,"cvc-participant-list",11),n.NdJ("participantSelectedEvent",function(P){return n.CHM(a),n.oxw().onRevisorSelected(P)}),n.ALo(12,"ngrxPush"),n.YNc(13,re,5,3,"ng-template",null,10,n.W1O),n.qZA(),n.TgZ(15,"cvc-participant-list",12),n.NdJ("participantSelectedEvent",function(P){return n.CHM(a),n.oxw().onFieldNameSelected(P)}),n.ALo(16,"ngrxPush"),n.YNc(17,_e,2,1,"ng-template",null,10,n.W1O),n.qZA(),n.TgZ(19,"cvc-participant-list",13),n.NdJ("participantSelectedEvent",function(P){return n.CHM(a),n.oxw().onResolverSelected(P)}),n.ALo(20,"ngrxPush"),n.YNc(21,pe,5,3,"ng-template",null,10,n.W1O),n.qZA(),n.qZA(),n.qZA(),n.BQk()}if(2&i){const a=n.oxw();n.xp6(1),n.Q6J("nzGutter",16),n.xp6(4),n.Q6J("ngrxLet",a.pageInfo$),n.xp6(2),n.Q6J("ngIf",a.filteredSet),n.xp6(1),n.Q6J("preselectedOption",a.selectableStatuses[0])("participantList",a.selectableStatuses),n.xp6(3),n.Q6J("participantList",n.lcZ(12,8,a.uniqueRevisors$)),n.xp6(4),n.Q6J("participantList",n.lcZ(16,10,a.revisionFields$)),n.xp6(4),n.Q6J("participantList",n.lcZ(20,12,a.uniqueResolvers$))}}function de(i,l){1&i&&(n.ynx(0),n.TgZ(1,"nz-row",25),n._UZ(2,"i",26),n.qZA(),n.BQk())}function ue(i,l){1&i&&n._UZ(0,"nz-empty",27)}function ve(i,l){if(1&i&&(n.YNc(0,de,3,0,"ng-container",0),n.ALo(1,"ngrxPush"),n.YNc(2,ue,1,0,"ng-template",null,24,n.W1O)),2&i){const a=n.MAs(3),d=n.oxw();n.Q6J("ngIf",n.lcZ(1,2,d.isLoading$))("ngIfElse",a)}}let fe=(()=>{class i{constructor(a,d){this.gql=a,this.route=d,this.filteredSet=void 0,this.selectableStatuses=[{id:4,displayName:"New",value:o.FJi.New},{id:1,displayName:"Accepted",value:o.FJi.Accepted},{id:2,displayName:"Rejected",value:o.FJi.Rejected},{id:3,displayName:"Superseded",value:o.FJi.Superseded}],this.defaultPageSize=10}ngOnInit(){this.routeSub=this.route.params.subscribe(a=>{this.queryRef=this.gql.watch({first:this.defaultPageSize,subject:{id:this.id,entityType:this.entityType},status:o.FJi.New});let d=this.queryRef.valueChanges;this.revisions$=d.pipe((0,s.j)("data","revisions","edges"),(0,_.U)(P=>P.map(k=>k.node))),this.isLoading$=d.pipe((0,_.U)(P=>P.loading),(0,t.O)(!0)),this.pageInfo$=d.pipe((0,s.j)("data","revisions","pageInfo")),this.uniqueRevisors$=d.pipe((0,_.U)(({data:P})=>{var k;return null===(k=P.revisions)||void 0===k?void 0:k.uniqueRevisors})),this.uniqueResolvers$=d.pipe((0,_.U)(({data:P})=>{var k;return null===(k=P.revisions)||void 0===k?void 0:k.uniqueResolvers})),this.revisionFields$=d.pipe((0,_.U)(({data:P})=>{var k;return null===(k=P.revisions)||void 0===k?void 0:k.revisedFieldNames.map((Mn,Ce)=>Object.assign(Object.assign({},Mn),{id:Ce}))})),this.unfilteredCount$=d.pipe((0,s.j)("data","revisions","unfilteredCountForSubject"))})}ngOnDestroy(){var a;null===(a=this.routeSub)||void 0===a||a.unsubscribe()}onFieldNameSelected(a){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},fieldName:a?a.name:void 0})}onRevisorSelected(a){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},originatingUserId:a?a.id:void 0})}onResolverSelected(a){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},resolvingUserId:a?a.id:void 0})}onStatusSelected(a){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},status:a?a.value:void 0})}onRevisionSetSelected(a){this.filteredSet=a,this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},revisionsetId:a||void 0})}onSetFilterClearClicked(){this.filteredSet=void 0,this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},revisionsetId:void 0})}refresh(){this.queryRef.refetch()}loadMore(a){var d;null===(d=this.queryRef)||void 0===d||d.fetchMore({variables:{first:this.defaultPageSize,after:a}})}}return i.\u0275fac=function(a){return new(a||i)(n.Y36(o.L5n),n.Y36(u.gz))},i.\u0275cmp=n.Xpm({type:i,selectors:[["cvc-revisions-list-and-filter"]],inputs:{id:"id",entityType:"entityType"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noRevisions",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"revisions","revisionSetSelectedEvent","revisionMutationCompleted",4,"nzSpaceItem"],[4,"ngrxLet"],["nzSpan","6"],["nzDirection","vertical",4,"ngIf"],["listTitle","Revision Status",3,"preselectedOption","participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Revisors",3,"participantList","participantSelectedEvent"],["listTitle","Fields Revised",3,"participantList","participantSelectedEvent"],["listTitle","Resolvers",3,"participantList","participantSelectedEvent"],[3,"revisions","revisionSetSelectedEvent","revisionMutationCompleted"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[4,"nzSpaceItem"],["nzMode","closeable",3,"nzOnClose"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["noneFound",""],["nzJustify","center"],["nz-icon","","nzType","loading",2,"font-size","32px"],["nzNotFoundImage","simple","nzNotFoundContent","Entity has no Revisions"]],template:function(a,d){if(1&a&&(n.YNc(0,me,23,14,"ng-container",0),n.ALo(1,"ngrxPush"),n.YNc(2,ve,4,4,"ng-template",null,1,n.W1O)),2&a){const P=n.MAs(3);n.Q6J("ngIf",n.lcZ(1,2,d.unfilteredCount$))("ngIfElse",P)}},directives:[M.O5,Z.SK,Z.t3,A.NU,A.$1,Gt,H.eJ,fn.ix,tn.dQ,vn.w,V.j,Xt.l,kt.Dz,un.Ls,E.p9],pipes:[H.fM,M.gd],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}),i})()},2914:(sn,W,e)=>{e.d(W,{A:()=>H});var o=e(9808),s=e(6949),_=e(1894),t=e(3762),n=e(7484),u=e(8144),M=e(8481),Z=e(3618),A=e(1150),b=e(6699),w=e(1835),x=e(685),O=e(6042),T=e(647),J=e(5e3);let H=(()=>{class R{}return R.\u0275fac=function(Y){return new(Y||R)},R.\u0275mod=J.oAB({type:R}),R.\u0275inj=J.cJS({imports:[[o.ez,s.WG,_.Jb,t.Ph,n.vh,u.zf,M.X,Z.ZJ,b.Rt,x.Xo,O.sL,T.PV,A.N,w.i]]}),R})()},759:(sn,W,e)=>{e.d(W,{N:()=>G});var o=e(373),s=e(5e3),_=e(712),t=e(3618),n=e(9808),u=e(325),M=e(6699),Z=e(3610),A=e(6265),b=e(3762),w=e(2937);function x(p,S){1&p&&(s.ynx(0),s._uU(1,", "),s.BQk())}function O(p,S){if(1&p&&(s.ynx(0),s._uU(1),s.ALo(2,"eventVerbiage"),s.YNc(3,x,2,0,"ng-container",10),s.BQk()),2&p){const f=S.$implicit,C=S.last;s.xp6(1),s.hij(" ",s.Dn7(2,2,f.action,"contributor-card",f.count),""),s.xp6(2),s.Q6J("ngIf",!C)}}function T(p,S){if(1&p&&(s.TgZ(0,"nz-list",8),s.TgZ(1,"nz-list-item"),s._uU(2," Contributions: "),s.YNc(3,O,4,6,"ng-container",9),s.qZA(),s.TgZ(4,"nz-list-item"),s._uU(5),s.ALo(6,"date"),s.qZA(),s.qZA()),2&p){const f=s.oxw(2).$implicit;s.xp6(3),s.Q6J("ngForOf",f.uniqueActions),s.xp6(2),s.hij(" Last Contribution: ",s.lcZ(6,2,f.lastActionDate)," ")}}function J(p,S){if(1&p&&(s.TgZ(0,"cvc-user-popover",6),s.YNc(1,T,7,4,"ng-template",null,7,s.W1O),s.qZA()),2&p){const f=s.oxw().$implicit;s.Q6J("userId",f.user.id)}}function H(p,S){if(1&p&&(s.TgZ(0,"a",3),s._UZ(1,"nz-avatar",4),s.YNc(2,J,3,1,"ng-template",null,5,s.W1O),s.qZA()),2&p){const f=S.$implicit,C=s.MAs(3);s.MGl("routerLink","/users/",f.user.id,""),s.xp6(1),s.Q6J("nzSize",14)("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",C)("nzSrc",f.user.profileImagePath)}}function R(p,S){if(1&p&&(s.ynx(0),s.YNc(1,H,4,5,"a",2),s.BQk()),2&p){const f=s.oxw();s.xp6(1),s.Q6J("ngForOf",f.sortedContributors)}}function U(p,S){1&p&&s._uU(0," None\n")}let Y=(()=>{class p{ngOnInit(){if(void 0===this.contributors)throw new Error("Must pass a list of contributors into the contributor stack");this.sortedContributors=this.contributors.slice(),this.sortedContributors.sort((f,C)=>C.totalActionCount-f.totalActionCount)}}return p.\u0275fac=function(f){return new(f||p)},p.\u0275cmp=s.Xpm({type:p,selectors:[["cvc-contributor-stack"]],inputs:{contributors:"contributors"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noContributors",""],["class","avatar",3,"routerLink",4,"ngFor","ngForOf"],[1,"avatar",3,"routerLink"],["nz-popover","","nzPopoverTrigger","hover","nzPopoverPlacement","bottomRight","nzIcon","user","nzSize","small",3,"nzSize","nzPopoverMouseEnterDelay","nzPopoverContent","nzSrc"],["curatorPopover",""],[3,"userId"],["additionalMetadata",""],["nzHeader","Activity"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(f,C){if(1&f&&(s.YNc(0,R,2,1,"ng-container",0),s.YNc(1,U,1,0,"ng-template",null,1,s.W1O)),2&f){const j=s.MAs(2);s.Q6J("ngIf",C.sortedContributors&&C.sortedContributors.length>0)("ngIfElse",j)}},directives:[n.O5,n.sg,u.yS,M.Dz,Z.lU,A.q,b.n_,b.AA],pipes:[w.R,n.uU],styles:[""]}),p})();var $=e(6949);function D(p,S){if(1&p&&(s.ynx(0),s._UZ(1,"cvc-contributor-stack",5),s.BQk()),2&p){const f=S.ngIf;s.xp6(1),s.Q6J("contributors",f)}}function K(p,S){1&p&&s._uU(0," None ")}function L(p,S){if(1&p&&(s.ynx(0),s._UZ(1,"cvc-contributor-stack",5),s.BQk()),2&p){const f=S.ngIf;s.xp6(1),s.Q6J("contributors",f)}}function B(p,S){1&p&&s._uU(0," None ")}let G=(()=>{class p{constructor(f){this.gql=f}ngOnInit(){if(void 0===this.subscribable)throw new Error("Must pass a subscribable into ContributorAvatars component.");let f=this.gql.watch({subscribable:this.subscribable}).valueChanges;this.curators$=f.pipe((0,o.j)("data","contributors","curators")),this.editors$=f.pipe((0,o.j)("data","contributors","editors"))}}return p.\u0275fac=function(f){return new(f||p)(s.Y36(_.kQf))},p.\u0275cmp=s.Xpm({type:p,selectors:[["cvc-contributor-avatars"]],inputs:{subscribable:"subscribable"},decls:14,vars:8,consts:[["nz-typography","","nzType","secondary",1,"role-group-label"],[1,"role-group"],[4,"ngIf","ngIfElse"],["noCurators",""],["noEditors",""],[3,"contributors"]],template:function(f,C){if(1&f&&(s.TgZ(0,"span",0),s._uU(1,"Curators:"),s.qZA(),s.TgZ(2,"div",1),s.YNc(3,D,2,1,"ng-container",2),s.ALo(4,"ngrxPush"),s.YNc(5,K,1,0,"ng-template",null,3,s.W1O),s.qZA(),s.TgZ(7,"span",0),s._uU(8,"Editors:"),s.qZA(),s.TgZ(9,"div",1),s.YNc(10,L,2,1,"ng-container",2),s.ALo(11,"ngrxPush"),s.YNc(12,B,1,0,"ng-template",null,4,s.W1O),s.qZA()),2&f){const j=s.MAs(6),m=s.MAs(13);s.xp6(3),s.Q6J("ngIf",s.lcZ(4,4,C.curators$))("ngIfElse",j),s.xp6(7),s.Q6J("ngIf",s.lcZ(11,6,C.editors$))("ngIfElse",m)}},directives:[t.ZU,n.O5,Y],pipes:[$.fM],styles:["[_nghost-%COMP%]{display:inline-block}.role-group-label[_ngcontent-%COMP%]{margin-left:12px}.role-group[_ngcontent-%COMP%]{display:inline-block}.role-group[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{display:inline-block;margin-left:2px}"]}),p})()},5750:(sn,W,e)=>{e.d(W,{Z:()=>x});var o=e(9808),s=e(6949),_=e(3618),t=e(325),n=e(6699),u=e(3610),M=e(9444),Z=e(3762),A=e(6081),b=e(5e3);let w=(()=>{class O{}return O.\u0275fac=function(J){return new(J||O)},O.\u0275mod=b.oAB({type:O}),O.\u0275inj=b.cJS({imports:[[o.ez,t.Bz,n.Rt,u.$6,Z.Ph,M.s,A.J]]}),O})(),x=(()=>{class O{}return O.\u0275fac=function(J){return new(J||O)},O.\u0275mod=b.oAB({type:O}),O.\u0275inj=b.cJS({imports:[[o.ez,s.WG,_.ZJ,w]]}),O})()},9077:(sn,W,e)=>{e.d(W,{Q:()=>R});var o=e(6123),s=e(712),_=e(8929),t=e(4850),n=e(7625),u=e(5e3),M=e(9169),Z=e(9808),A=e(6042),b=e(2643),w=e(2683),x=e(404),O=e(647),T=e(6949);function J(U,Y){if(1&U){const $=u.EpF();u.ynx(0),u.TgZ(1,"button",2),u.NdJ("click",function(){return u.CHM($),u.oxw().unsubscribe()}),u._UZ(2,"i",3),u.qZA(),u.BQk()}if(2&U){const $=u.oxw();u.xp6(1),u.Q6J("nzLoading",$.isSubmitting)}}function H(U,Y){if(1&U){const $=u.EpF();u.TgZ(0,"button",4),u.NdJ("click",function(){return u.CHM($),u.oxw().subscribe()}),u._UZ(1,"i",5),u.qZA()}if(2&U){const $=u.oxw();u.Q6J("nzLoading",$.isSubmitting)}}let R=(()=>{class U{constructor($,D,K,L){this.isSubscribedGQL=$,this.unsubscribeMutation=D,this.subscribeMutation=K,this.networkErrorService=L,this.isSubmitting=!1,this.destroy$=new _.xQ,this.unsubscribeMutator=new o.U(L),this.subscribeMutator=new o.U(L)}ngOnInit(){if(void 0===this.viewer)throw new Error("Must pass in a viewer to the CvcEntitySubscriptionButtonComponent");if(void 0===this.typename)throw new Error("Must pass in a typename to the CvcEntitySubscriptionButtonComponent");if(void 0===this.subscribableId)throw new Error("Must pass in a subscribableId to the CvcEntitySubscriptionButtonComponent");this.subscribable={id:this.subscribableId,entityType:s.o71[this.typename]},this.queryRef=this.isSubscribedGQL.watch({subscribable:this.subscribable}),this.existingSubscription$=this.queryRef.valueChanges.pipe((0,t.U)(({data:D})=>D.subscriptionForEntity))}subscribe(){this.subscribable&&(this.isSubmitting=!0,this.subscribeMutator.mutate(this.subscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,n.R)(this.destroy$)).subscribe(D=>{var K;D&&(null===(K=this.queryRef)||void 0===K||K.refetch(),this.isSubmitting=!1)}))}unsubscribe(){this.subscribable&&(this.isSubmitting=!0,this.unsubscribeMutator.mutate(this.unsubscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,n.R)(this.destroy$)).subscribe(D=>{var K;D&&(null===(K=this.queryRef)||void 0===K||K.refetch(),this.isSubmitting=!1)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return U.\u0275fac=function($){return new($||U)(u.Y36(s.A4J),u.Y36(s.m$d),u.Y36(s.jMx),u.Y36(M.Y))},U.\u0275cmp=u.Xpm({type:U,selectors:[["cvc-entity-subscription-button"]],inputs:{viewer:"viewer",typename:"typename",subscribableId:"subscribableId"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noSub",""],["nz-button","","nz-tooltip","Unsubscribe","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","bell","nzTheme","fill"],["nz-button","","nz-tooltip","Subscribe","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","bell","nzTheme","outline"]],template:function($,D){if(1&$&&(u.YNc(0,J,3,1,"ng-container",0),u.ALo(1,"ngrxPush"),u.YNc(2,H,2,1,"ng-template",null,1,u.W1O)),2&$){const K=u.MAs(3);u.Q6J("ngIf",u.lcZ(1,2,D.existingSubscription$))("ngIfElse",K)}},directives:[Z.O5,A.ix,b.dQ,w.w,x.SY,O.Ls],pipes:[T.fM],styles:["[_nghost-%COMP%]{display:block}"]}),U})()},4609:(sn,W,e)=>{e.d(W,{g:()=>M});var o=e(9808),s=e(6042),_=e(6949),t=e(647),n=e(404),u=e(5e3);let M=(()=>{class Z{}return Z.\u0275fac=function(b){return new(b||Z)},Z.\u0275mod=u.oAB({type:Z}),Z.\u0275inj=u.cJS({imports:[[o.ez,s.sL,t.PV,n.cg,_.WG]]}),Z})()},4590:(sn,W,e)=>{e.d(W,{h:()=>w});var o=e(5e3),s=e(9808),_=e(8481),t=e(647);function n(x,O){1&x&&o._UZ(0,"i",7)}function u(x,O){1&x&&o._UZ(0,"i",8)}function M(x,O){1&x&&o._UZ(0,"i",9)}function Z(x,O){1&x&&o._UZ(0,"i",10)}function A(x,O){1&x&&o._UZ(0,"i",10)}function b(x,O){if(1&x&&(o.TgZ(0,"nz-tag",1),o.ynx(1,2),o.YNc(2,n,1,0,"i",3),o.YNc(3,u,1,0,"i",4),o.YNc(4,M,1,0,"i",5),o.YNc(5,Z,1,0,"i",6),o.YNc(6,A,1,0,"i",6),o.BQk(),o._uU(7),o.ALo(8,"titlecase"),o.qZA()),2&x){const T=o.oxw();o.Q6J("nzColor",T.tagStatus),o.xp6(1),o.Q6J("ngSwitch",T.tagStatus),o.xp6(1),o.Q6J("ngSwitchCase","success"),o.xp6(1),o.Q6J("ngSwitchCase","error"),o.xp6(1),o.Q6J("ngSwitchCase","warning"),o.xp6(1),o.Q6J("ngSwitchCase","processing"),o.xp6(1),o.Q6J("ngSwitchCase","default"),o.xp6(1),o.hij(" ",o.lcZ(8,8,T.status),"\n")}}let w=(()=>{class x{constructor(){this.statusColorMap={ACCEPTED:"success",REJECTED:"error",SUBMITTED:"warning",NEW:"processing",SUPERSEDED:"default",OPEN:"error",RESOLVED:"default"}}set status(T){this._status=T,T&&(this.tagStatus=this.statusColorMap[T])}get status(){return this._status}ngOnInit(){if(void 0===this.status)throw new Error("Must pass a valid EvidenceStatus or RevisionStatus to cvc-status-tag component")}}return x.\u0275fac=function(T){return new(T||x)},x.\u0275cmp=o.Xpm({type:x,selectors:[["cvc-status-tag"]],inputs:{status:"status"},decls:1,vars:1,consts:[[3,"nzColor",4,"ngIf"],[3,"nzColor"],[3,"ngSwitch"],["nz-icon","","nzType","check-circle",4,"ngSwitchCase"],["nz-icon","","nzType","close-circle",4,"ngSwitchCase"],["nz-icon","","nzType","exclamation-circle",4,"ngSwitchCase"],["nz-icon","",4,"ngSwitchCase"],["nz-icon","","nzType","check-circle"],["nz-icon","","nzType","close-circle"],["nz-icon","","nzType","exclamation-circle"],["nz-icon",""]],template:function(T,J){1&T&&o.YNc(0,b,9,10,"nz-tag",0),2&T&&o.Q6J("ngIf",J.tagStatus)},directives:[s.O5,_.j,s.RF,s.n9,t.Ls],pipes:[s.rS],styles:[""]}),x})()},4466:(sn,W,e)=>{e.d(W,{x:()=>n});var o=e(9808),s=e(8481),_=e(647),t=e(5e3);let n=(()=>{class u{}return u.\u0275fac=function(Z){return new(Z||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[[o.ez,s.X,_.PV]]}),u})()},2233:(sn,W,e)=>{e.d(W,{P:()=>w});var o=e(5e3),s=e(325),_=e(1894),t=e(868),n=e(9808),u=e(647);const M=["tabBarExtraContent"];function Z(x,O){if(1&x&&o.GkF(0,5),2&x){const T=o.oxw();o.Q6J("ngTemplateOutlet",T.tabBarExtraContent||null)}}function A(x,O){if(1&x&&(o.TgZ(0,"a",7),o._UZ(1,"i",8),o._uU(2),o.qZA()),2&x){const T=o.oxw().$implicit;o.Q6J("routerLink",T.routeName),o.xp6(1),o.Q6J("nzType",T.iconName),o.xp6(1),o.hij(" ",T.tabLabel," ")}}function b(x,O){1&x&&(o.TgZ(0,"nz-tab"),o.YNc(1,A,3,3,"a",6),o.qZA())}let w=(()=>{class x{constructor(T){this.router=T,this.selectedTabIndex=this.getActivatedRouteIndex(this.router.url)}getActivatedRouteIndex(T){var J;return null===(J=this.tabs)||void 0===J?void 0:J.findIndex(H=>T.includes(H.routeName))}}return x.\u0275fac=function(T){return new(T||x)(o.Y36(s.F0))},x.\u0275cmp=o.Xpm({type:x,selectors:[["cvc-tab-navigation"]],contentQueries:function(T,J,H){if(1&T&&o.Suo(H,M,5),2&T){let R;o.iGM(R=o.CRH())&&(J.tabBarExtraContent=R.first)}},inputs:{entity:"entity",tabs:"tabs"},decls:6,vars:3,consts:[["id","section-tabs"],["nzSpan","24"],["nzLinkRouter","","nzType","card","nzSize","small",3,"nzSelectedIndex","nzTabBarExtraContent"],["extraTpl",""],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["nz-tab-link","",3,"routerLink",4,"nzTabLink"],["nz-tab-link","",3,"routerLink"],["nz-icon","",3,"nzType"]],template:function(T,J){if(1&T&&(o.TgZ(0,"nz-row",0),o.TgZ(1,"nz-col",1),o.TgZ(2,"nz-tabset",2),o.YNc(3,Z,1,1,"ng-template",null,3,o.W1O),o.YNc(5,b,2,0,"nz-tab",4),o.qZA(),o.qZA(),o.qZA()),2&T){const H=o.MAs(4);o.xp6(2),o.Q6J("nzSelectedIndex",J.selectedTabIndex)("nzTabBarExtraContent",H),o.xp6(3),o.Q6J("ngForOf",J.tabs)}},directives:[_.SK,_.t3,t.xH,n.tP,n.sg,t.xw,t.Fx,t.Ao,s.yS,u.Ls],styles:["[_nghost-%COMP%]{display:block}"]}),x})()},8762:(sn,W,e)=>{e.d(W,{c:()=>Z});var o=e(9808),s=e(868),_=e(1894),t=e(325),n=e(647),u=e(6949),M=e(5e3);let Z=(()=>{class A{}return A.\u0275fac=function(w){return new(w||A)},A.\u0275mod=M.oAB({type:A}),A.\u0275inj=M.cJS({imports:[[o.ez,t.Bz,s.we,_.Jb,n.PV,u.WG]]}),A})()},7701:(sn,W,e)=>{e.d(W,{j:()=>j});var o=e(6654),s=e(5e3),_=e(9808),t=e(325),n=e(8481),u=e(3610),M=e(4850),Z=e(712),A=e(7484),b=e(647),w=e(6550),x=e(3098),O=e(6949);function T(m,q){if(1&m&&(s._UZ(0,"i",7),s._uU(1)),2&m){const I=s.oxw().ngIf;s.xp6(1),s.hij(" ",I.name," ")}}function J(m,q){if(1&m&&(s.TgZ(0,"cvc-link-tag",9),s._uU(1),s.qZA()),2&m){const I=s.oxw(2).ngIf;s.Q6J("href",I.url),s.xp6(1),s.hij(" ",I.soid," ")}}function H(m,q){if(1&m&&s.YNc(0,J,2,2,"cvc-link-tag",8),2&m){const I=s.oxw().ngIf;s.Q6J("ngIf","N/A"!=I.soid)}}function R(m,q){if(1&m&&(s.ynx(0),s.TgZ(1,"nz-card",2),s.YNc(2,T,2,1,"ng-template",null,3,s.W1O),s.YNc(4,H,1,1,"ng-template",null,4,s.W1O),s.TgZ(6,"nz-descriptions",5),s.TgZ(7,"nz-descriptions-item",6),s._uU(8),s.qZA(),s.qZA(),s.qZA(),s.BQk()),2&m){const I=q.ngIf,an=s.MAs(3),rn=s.MAs(5);s.xp6(1),s.Q6J("nzTitle",an)("nzExtra",rn),s.xp6(5),s.Q6J("nzColumn",2),s.xp6(2),s.hij(" ",I.variantCount," ")}}let U=(()=>{class m{constructor(I){this.gql=I}ngOnInit(){if(null==this.variantTypeId)throw new Error("cvc-variant-type-popover requires valid variantTypeId input.");this.variantType$=this.gql.watch({variantTypeId:this.variantTypeId}).valueChanges.pipe((0,M.U)(({data:I})=>I.variantTypePopover))}}return m.\u0275fac=function(I){return new(I||m)(s.Y36(Z.tw_))},m.\u0275cmp=s.Xpm({type:m,selectors:[["cvc-variant-type-popover"]],inputs:{variantTypeId:"variantTypeId"},decls:3,vars:3,consts:[["id","popover-content"],[4,"ngIf"],["nzBordered","false","id","card-content",3,"nzTitle","nzExtra"],["cardTitle",""],["linkout",""],["nzSize","small","nzBordered","true",3,"nzColumn"],["nzTitle","Variants","nzSpan","2"],["nz-icon","","nzType","civic-varianttype",1,"variant-type-tag-icon"],["tooltip","View on SequenceOntology.org",3,"href",4,"ngIf"],["tooltip","View on SequenceOntology.org",3,"href"]],template:function(I,an){1&I&&(s.TgZ(0,"div",0),s.YNc(1,R,9,4,"ng-container",1),s.ALo(2,"ngrxPush"),s.qZA()),2&I&&(s.xp6(1),s.Q6J("ngIf",s.lcZ(2,1,an.variantType$)))},directives:[_.O5,A.bd,b.Ls,w.l,x.R7,x.uj],pipes:[O.fM],styles:["[_nghost-%COMP%]{display:block;margin:-8px -12px}[_nghost-%COMP%]     .ant-card-body{padding:0;margin-top:1px}[_nghost-%COMP%]     .ant-descriptions-view{border:none}[_nghost-%COMP%]     #entity-child-counts{border-top:1px solid #f0f0f0;padding:8px}[_nghost-%COMP%]     #entity-child-counts nz-space{width:100%}[_nghost-%COMP%]     #entity-child-counts nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     #entity-child-counts nz-space-item:last-child nz-tag{margin-right:0}.popover-text[_ngcontent-%COMP%]{width:100%;padding:8px;border-bottom:1px solid #f0f0f0}#popover-content[_ngcontent-%COMP%]{min-width:350px;max-width:500px;min-height:125px}"]}),m})();function Y(m,q){}function $(m,q){if(1&m&&(s.ynx(0),s.TgZ(1,"a",5),s.YNc(2,Y,0,0,"ng-template",6),s.qZA(),s.BQk()),2&m){const I=s.oxw(),an=s.MAs(2);s.xp6(1),s.Q6J("routerLink",I.variantType.link),s.xp6(1),s.Q6J("ngTemplateOutlet",an)}}function D(m,q){}function K(m,q){if(1&m&&(s.TgZ(0,"nz-tag",9),s.YNc(1,D,0,0,"ng-template",6),s.qZA()),2&m){s.oxw();const I=s.MAs(2);s.oxw();const an=s.MAs(8);s.Q6J("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",I),s.xp6(1),s.Q6J("ngTemplateOutlet",an)}}function L(m,q){if(1&m&&s._UZ(0,"cvc-variant-type-popover",10),2&m){const I=s.oxw(2);s.Q6J("variantTypeId",I.variantType.id)}}function B(m,q){if(1&m&&(s.YNc(0,K,2,3,"nz-tag",7),s.YNc(1,L,1,1,"ng-template",null,8,s.W1O)),2&m){const I=s.oxw(),an=s.MAs(6);s.Q6J("ngIf",I.enablePopover)("ngIfElse",an)}}function G(m,q){}function p(m,q){if(1&m&&s.YNc(0,G,0,0,"ng-template",6),2&m){s.oxw();const I=s.MAs(2);s.Q6J("ngTemplateOutlet",I)}}function S(m,q){}function f(m,q){if(1&m&&(s.TgZ(0,"nz-tag"),s.YNc(1,S,0,0,"ng-template",6),s.qZA()),2&m){s.oxw();const I=s.MAs(8);s.xp6(1),s.Q6J("ngTemplateOutlet",I)}}function C(m,q){if(1&m&&(s._UZ(0,"i",11),s._uU(1)),2&m){const I=s.oxw();s.xp6(1),s.hij(" ",I.variantType.name,"\n")}}let j=(()=>{class m extends o.a{constructor(){super(),this.linked=!0,this.enablePopover=!0}idFunction(){return this.variantType.id}ngOnInit(){if(void 0===this.variantType)throw new Error("cvc-variant-type-tag requires LinkableVariantType input, none supplied.")}}return m.\u0275fac=function(I){return new(I||m)},m.\u0275cmp=s.Xpm({type:m,selectors:[["cvc-variant-type-tag"]],inputs:{variantType:"variantType",linked:"linked",enablePopover:"enablePopover"},features:[s.qOj],decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["tag",""],["unlinked",""],["noPopover",""],["tagContent",""],[3,"routerLink"],[3,"ngTemplateOutlet"],["nz-popover","","nzPopoverPlacement","right","nzPopoverTrigger","hover",3,"nzPopoverMouseEnterDelay","nzPopoverContent",4,"ngIf","ngIfElse"],["variantTypePopover",""],["nz-popover","","nzPopoverPlacement","right","nzPopoverTrigger","hover",3,"nzPopoverMouseEnterDelay","nzPopoverContent"],[3,"variantTypeId"],["nz-icon","","nzType","civic-varianttype","nzTheme","twotone","nzTwotoneColor","#33B358"]],template:function(I,an){if(1&I&&(s.YNc(0,$,3,2,"ng-container",0),s.YNc(1,B,3,2,"ng-template",null,1,s.W1O),s.YNc(3,p,1,1,"ng-template",null,2,s.W1O),s.YNc(5,f,2,1,"ng-template",null,3,s.W1O),s.YNc(7,C,2,1,"ng-template",null,4,s.W1O)),2&I){const rn=s.MAs(4);s.Q6J("ngIf",an.linked)("ngIfElse",rn)}},directives:[_.O5,t.yS,_.tP,n.j,u.lU,U,b.Ls],styles:["[_nghost-%COMP%]{display:block}"]}),m})()},8645:(sn,W,e)=>{e.d(W,{M:()=>x});var o=e(9808),s=e(325),_=e(8481),t=e(7484),n=e(3630),u=e(3098),M=e(6949),Z=e(647),A=e(5e3);let b=(()=>{class O{}return O.\u0275fac=function(J){return new(J||O)},O.\u0275mod=A.oAB({type:O}),O.\u0275inj=A.cJS({imports:[[o.ez,M.WG,Z.PV,t.vh,u.q6,n.X]]}),O})();var w=e(3610);let x=(()=>{class O{}return O.\u0275fac=function(J){return new(J||O)},O.\u0275mod=A.oAB({type:O}),O.\u0275inj=A.cJS({imports:[[o.ez,s.Bz,Z.PV,_.X,w.$6,b]]}),O})()},1243:(sn,W,e)=>{e.d(W,{I:()=>s});var o=e(5e3);let s=(()=>{class _{transform(n){if(n){let M=n.toLowerCase().replace(/_/g," ").split(" ");for(var u=0;u<M.length;u++)M[u]=M[u].charAt(0).toUpperCase()+M[u].slice(1);return M.join(" ")}return""}}return _.\u0275fac=function(n){return new(n||_)},_.\u0275pipe=o.Yjl({name:"enumToTitle",type:_,pure:!0}),_})()},9058:(sn,W,e)=>{e.d(W,{j:()=>_});var o=e(712),s=e(5e3);let _=(()=>{class t{transform(u){switch(u){case"ASSERTION":case"Assertion":case o.o71.Assertion:return"civic:assertion";case"EVIDENCE_ITEM":case"EvidenceItem":case o.o71.EvidenceItem:return"civic:evidence";case"GENE":case"Gene":case o.o71.Gene:return"civic:gene";case o.o71.Revision:case"REVISION":case"Revision":return"civic:revision";case o.o71.Variant:case"VARIANT":case"Variant":return"civic:variant";case o.o71.VariantGroup:case"VARIANT_GROUP":case"VariantGrou":return"civic:variant-group";default:return console.log("String No icon name found for "+u),"border-outer"}}}return t.\u0275fac=function(u){return new(u||t)},t.\u0275pipe=s.Yjl({name:"iconNameForSubscribableEntity",type:t,pure:!0}),t})()},9383:(sn,W,e)=>{e.d(W,{b:()=>$});var o=e(5e3),s=e(8929),_=e(712),t=e(4850),n=e(7625),u=e(1059),M=e(9350),Z=e(6949),A=e(868),b=e(4921),w=e(4182),x=e(9808),O=e(7525),T=e(7948);function J(D,K){if(1&D&&(o.ynx(0),o.TgZ(1,"span"),o._uU(2),o.qZA(),o.BQk()),2&D){const L=K.$implicit;o.xp6(2),o.Oqu(L.displayName)}}function H(D,K){1&D&&(o.ynx(0),o._UZ(1,"nz-spin",8),o.BQk())}function R(D,K){if(1&D&&(o.ynx(0),o._UZ(1,"cvc-comment-body",9),o.BQk()),2&D){const L=K.ngIf;o.xp6(1),o.Q6J("commentBodySegments",L)}}const U=function(){return["#","@","$"]};function Y(D,K){if(1&D){const L=o.EpF();o.ynx(0),o.TgZ(1,"nz-tabset",1),o.TgZ(2,"nz-tab",2),o.TgZ(3,"nz-mention",3),o.NdJ("nzOnSearchChange",function(G){return o.CHM(L),o.oxw().onSearchChange(G)})("nzOnSelect",function(){return o.CHM(L),o.oxw().suggestions=[]}),o.TgZ(4,"textarea",4),o.NdJ("ngModelChange",function(G){return o.CHM(L),o.oxw().commentText=G})("ngModelChange",function(G){return o.CHM(L),o.oxw().onCommentChanged(G)}),o.qZA(),o.YNc(5,J,3,1,"ng-container",5),o.qZA(),o.qZA(),o.TgZ(6,"nz-tab",6),o.NdJ("nzClick",function(){return o.CHM(L),o.oxw().onPreviewButtonClicked()}),o.YNc(7,H,2,0,"ng-container",7),o.ALo(8,"ngrxPush"),o.YNc(9,R,2,1,"ng-container",7),o.ALo(10,"ngrxPush"),o.qZA(),o.qZA(),o.BQk()}if(2&D){const L=K.ngrxLet,B=o.oxw();o.xp6(1),o.Q6J("nzAnimated",!1),o.xp6(2),o.Q6J("nzSuggestions",B.suggestions)("nzPrefix",o.DdM(13,U))("nzValueWith",B.autoCompleteValueFor),o.xp6(1),o.Q6J("placeholder",L&&L.canCurate?"Enter comment (minimum length 10. Use @ to mention users; # to link entities)":"Please sign in")("ngModel",B.commentText),o.uIk("disabled",!L||!L.canCurate||null),o.xp6(3),o.Q6J("ngIf",o.lcZ(8,9,B.previewLoading$)),o.xp6(2),o.Q6J("ngIf",o.lcZ(10,11,B.previewComment$))}}let $=(()=>{class D{constructor(L,B,G,p){this.previewCommentGql=L,this.userTypeaheadGql=B,this.entityTypeaheadGql=G,this.viewerService=p,this.commentChange=new o.vpe,this.destroy$=new s.xQ,this.suggestions=[],this.roleSuggestions=[{displayName:"admins",value:"admins"},{displayName:"editors",value:"editors"}]}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.commentText=this.comment,this.userTypeaheadQueryRef$=this.userTypeaheadGql.watch({queryTerm:""}),this.userTypeaheadQueryRef$.valueChanges.pipe((0,t.U)(({data:L})=>L.userTypeahead),(0,n.R)(this.destroy$)).subscribe(L=>this.suggestions=L.map(B=>({displayName:B.username,value:B.username}))),this.entityTypeaheadQueryRef$=this.entityTypeaheadGql.watch({queryTerm:""}),this.entityTypeaheadQueryRef$.valueChanges.pipe((0,t.U)(({data:L})=>L.entityTypeahead),(0,n.R)(this.destroy$)).subscribe(L=>this.suggestions=L.map(B=>({displayName:B.displayName,value:this.tagForEntityTypeAndId(B.tagType,B.entityId)})))}ngOnChanges(){this.commentText=this.comment}autoCompleteValueFor(L){return L.value}tagForEntityTypeAndId(L,B){switch(L){case _.mpB.Gene:return`GID${B}`;case _.mpB.Variant:return`VID${B}`;case _.mpB.VariantGroup:return`VGID${B}`;case _.mpB.EvidenceItem:return`EID${B}`;case _.mpB.Assertion:return`AID${B}`;case _.mpB.Revision:return`RID${B}`;case _.mpB.Role:return Object.keys(_.i44)[B]}}resetForm(){this.commentText=""}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreviewButtonClicked(){this.commentText&&(this.previewComment$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,t.U)(({data:L})=>L.previewCommentText)),this.previewLoading$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,t.U)(({loading:L})=>L),(0,u.O)(!0)))}onSearchChange({value:L,prefix:B}){"@"===B?this.userTypeaheadQueryRef$.refetch({queryTerm:L}):"$"==B?this.suggestions=this.roleSuggestions.filter(G=>G.value.startsWith(L)):this.entityTypeaheadQueryRef$.refetch({queryTerm:L})}onCommentChanged(L){this.commentChange.emit(L)}}return D.\u0275fac=function(L){return new(L||D)(o.Y36(_.mII),o.Y36(_.vMt),o.Y36(_.GYx),o.Y36(M.a))},D.\u0275cmp=o.Xpm({type:D,selectors:[["cvc-comment-input-form"]],inputs:{comment:"comment"},outputs:{commentChange:"commentChange"},features:[o.TTD],decls:1,vars:1,consts:[[4,"ngrxLet"],[3,"nzAnimated"],["nzTitle","Write"],["nzNotFoundContent","No matches...",3,"nzSuggestions","nzPrefix","nzValueWith","nzOnSearchChange","nzOnSelect"],["nzMentionTrigger","","nz-input","","rows","4",2,"width","100%",3,"placeholder","ngModel","ngModelChange"],[4,"nzMentionSuggestion"],["nzTitle","Preview",3,"nzClick"],[4,"ngIf"],["nzTip","Loading..."],[3,"commentBodySegments"]],template:function(L,B){1&L&&o.YNc(0,Y,11,14,"ng-container",0),2&L&&o.Q6J("ngrxLet",B.viewer$)},directives:[Z.eJ,A.xH,A.xw,b.YW,b.jO,w.Fj,w.JJ,w.On,b.O3,x.O5,O.W,T.m],pipes:[Z.fM],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2}),D})()},4509:(sn,W,e)=>{e.d(W,{w:()=>H});var o=e(9808),s=e(4182),_=e(7484),t=e(4546),n=e(7008),u=e(1825),M=e(4375),Z=e(6042),A=e(4623),b=e(868),w=e(6949),x=e(8909),O=e(7525),T=e(4921),J=e(5e3);let H=(()=>{class R{}return R.\u0275fac=function(Y){return new(Y||R)},R.\u0275mod=J.oAB({type:R}),R.\u0275inj=J.cJS({imports:[[o.ez,s.UX,w.WG,Z.sL,_.vh,b.we,t.U5,O.j,T.Gl,s.u5,n.B,u.A,M.R,x.m,A.K]]}),R})()},1344:(sn,W,e)=>{e.d(W,{DA:()=>Y,WE:()=>L,Y4:()=>$,YM:()=>G});var o=e(226),s=e(9808),_=e(5e3),t=e(969),n=e(7429),u=e(8929),M=e(7625);function Z(p,S){1&p&&_.Hsn(0)}const A=["*"];function b(p,S){if(1&p&&(_.ynx(0),_._uU(1),_.BQk()),2&p){const f=_.oxw(2);_.xp6(1),_.Oqu(f.nzAuthor)}}function w(p,S){if(1&p&&(_.TgZ(0,"span",8),_.YNc(1,b,2,1,"ng-container",9),_.qZA()),2&p){const f=_.oxw();_.xp6(1),_.Q6J("nzStringTemplateOutlet",f.nzAuthor)}}function x(p,S){if(1&p&&(_.ynx(0),_._uU(1),_.BQk()),2&p){const f=_.oxw(2);_.xp6(1),_.Oqu(f.nzDatetime)}}function O(p,S){if(1&p&&(_.TgZ(0,"span",10),_.YNc(1,x,2,1,"ng-container",9),_.qZA()),2&p){const f=_.oxw();_.xp6(1),_.Q6J("nzStringTemplateOutlet",f.nzDatetime)}}function T(p,S){}function J(p,S){if(1&p&&(_.TgZ(0,"li"),_.TgZ(1,"span"),_.YNc(2,T,0,0,"ng-template",13),_.qZA(),_.qZA()),2&p){const f=S.$implicit;_.xp6(2),_.Q6J("nzCommentActionHost",f.content)}}function H(p,S){if(1&p&&(_.TgZ(0,"ul",11),_.YNc(1,J,3,1,"li",12),_.qZA()),2&p){const f=_.oxw();_.xp6(1),_.Q6J("ngForOf",f.actions)}}const R=[[["nz-avatar","nz-comment-avatar",""]],[["nz-comment-content"]],"*"],U=["nz-avatar[nz-comment-avatar]","nz-comment-content","*"];let Y=(()=>{class p{}return p.\u0275fac=function(f){return new(f||p)},p.\u0275dir=_.lG2({type:p,selectors:[["nz-avatar","nz-comment-avatar",""]],exportAs:["nzCommentAvatar"]}),p})(),$=(()=>{class p{}return p.\u0275fac=function(f){return new(f||p)},p.\u0275dir=_.lG2({type:p,selectors:[["nz-comment-content"],["","nz-comment-content",""]],hostAttrs:[1,"ant-comment-content-detail"],exportAs:["nzCommentContent"]}),p})(),D=(()=>{class p extends n.Pl{constructor(f,C){super(f,C)}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}ngAfterViewInit(){this.attach(this.nzCommentActionHost)}}return p.\u0275fac=function(f){return new(f||p)(_.Y36(_._Vd),_.Y36(_.s_b))},p.\u0275dir=_.lG2({type:p,selectors:[["","nzCommentActionHost",""]],inputs:{nzCommentActionHost:"nzCommentActionHost"},exportAs:["nzCommentActionHost"],features:[_.qOj]}),p})(),K=(()=>{class p{constructor(f){this.viewContainerRef=f,this.contentPortal=null}get content(){return this.contentPortal}ngOnInit(){this.contentPortal=new n.UE(this.implicitContent,this.viewContainerRef)}}return p.\u0275fac=function(f){return new(f||p)(_.Y36(_.s_b))},p.\u0275cmp=_.Xpm({type:p,selectors:[["nz-comment-action"]],viewQuery:function(f,C){if(1&f&&_.Gf(_.Rgc,7),2&f){let j;_.iGM(j=_.CRH())&&(C.implicitContent=j.first)}},exportAs:["nzCommentAction"],ngContentSelectors:A,decls:1,vars:0,template:function(f,C){1&f&&(_.F$t(),_.YNc(0,Z,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),p})(),L=(()=>{class p{constructor(f,C){this.cdr=f,this.directionality=C,this.dir="ltr",this.destroy$=new u.xQ}ngOnInit(){var f;null===(f=this.directionality.change)||void 0===f||f.pipe((0,M.R)(this.destroy$)).subscribe(C=>{this.dir=C,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return p.\u0275fac=function(f){return new(f||p)(_.Y36(_.sBO),_.Y36(o.Is,8))},p.\u0275cmp=_.Xpm({type:p,selectors:[["nz-comment"]],contentQueries:function(f,C,j){if(1&f&&_.Suo(j,K,4),2&f){let m;_.iGM(m=_.CRH())&&(C.actions=m)}},hostVars:4,hostBindings:function(f,C){2&f&&_.ekj("ant-comment",!0)("ant-comment-rtl","rtl"===C.dir)},inputs:{nzAuthor:"nzAuthor",nzDatetime:"nzDatetime"},exportAs:["nzComment"],ngContentSelectors:U,decls:11,vars:3,consts:[[1,"ant-comment-inner"],[1,"ant-comment-avatar"],[1,"ant-comment-content"],[1,"ant-comment-content-author"],["class","ant-comment-content-author-name",4,"ngIf"],["class","ant-comment-content-author-time",4,"ngIf"],["class","ant-comment-actions",4,"ngIf"],[1,"ant-comment-nested"],[1,"ant-comment-content-author-name"],[4,"nzStringTemplateOutlet"],[1,"ant-comment-content-author-time"],[1,"ant-comment-actions"],[4,"ngFor","ngForOf"],[3,"nzCommentActionHost"]],template:function(f,C){1&f&&(_.F$t(R),_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.Hsn(2),_.qZA(),_.TgZ(3,"div",2),_.TgZ(4,"div",3),_.YNc(5,w,2,1,"span",4),_.YNc(6,O,2,1,"span",5),_.qZA(),_.Hsn(7,1),_.YNc(8,H,2,1,"ul",6),_.qZA(),_.qZA(),_.TgZ(9,"div",7),_.Hsn(10,2),_.qZA()),2&f&&(_.xp6(5),_.Q6J("ngIf",C.nzAuthor),_.xp6(1),_.Q6J("ngIf",C.nzDatetime),_.xp6(2),_.Q6J("ngIf",null==C.actions?null:C.actions.length))},directives:[s.O5,t.f,s.sg,D],encapsulation:2,changeDetection:0}),p})(),G=(()=>{class p{}return p.\u0275fac=function(f){return new(f||p)},p.\u0275mod=_.oAB({type:p}),p.\u0275inj=_.cJS({imports:[[o.vT,s.ez,t.T]]}),p})()},4921:(sn,W,e)=>{e.d(W,{YW:()=>an,Gl:()=>mn,O3:()=>C,jO:()=>I});var o=e(226),s=e(2845),_=e(9808),t=e(5e3),n=e(4182),u=e(647),M=e(8929),Z=e(2916),A=e(6787),b=e(3753),w=e(655),x=e(1159),O=e(7429),T=e(1059),J=e(7545),H=e(6950),R=e(1721);const U=["items"];function Y(F,on){1&F&&t.GkF(0)}const $=function(F){return{$implicit:F}};function D(F,on){if(1&F&&(t.ynx(0),t.YNc(1,Y,1,0,"ng-container",8),t.BQk()),2&F){const g=t.oxw().$implicit,z=t.oxw(2);t.xp6(1),t.Q6J("ngTemplateOutlet",z.suggestionTemplate)("ngTemplateOutletContext",t.VKq(2,$,g))}}function K(F,on){if(1&F&&t._uU(0),2&F){const g=t.oxw().$implicit,z=t.oxw(2);t.Oqu(z.nzValueWith(g))}}function L(F,on){if(1&F){const g=t.EpF();t.TgZ(0,"li",4,5),t.NdJ("click",function(){const en=t.CHM(g).$implicit;return t.oxw(2).selectSuggestion(en)}),t.YNc(2,D,2,4,"ng-container",6),t.YNc(3,K,1,1,"ng-template",null,7,t.W1O),t.qZA()}if(2&F){const g=on.index,z=t.MAs(4),V=t.oxw(2);t.ekj("focus",g===V.activeIndex),t.xp6(2),t.Q6J("ngIf",V.suggestionTemplate)("ngIfElse",z)}}function B(F,on){1&F&&(t.TgZ(0,"span"),t._UZ(1,"i",11),t.qZA())}function G(F,on){if(1&F&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&F){const g=t.oxw(3);t.xp6(1),t.Oqu(g.nzNotFoundContent)}}function p(F,on){if(1&F&&(t.TgZ(0,"li",9),t.YNc(1,B,2,0,"span",10),t.YNc(2,G,2,1,"span",10),t.qZA()),2&F){const g=t.oxw(2);t.xp6(1),t.Q6J("ngIf",g.nzLoading),t.xp6(1),t.Q6J("ngIf",!g.nzLoading)}}function S(F,on){if(1&F&&(t.TgZ(0,"ul",1),t.YNc(1,L,5,4,"li",2),t.YNc(2,p,3,2,"li",3),t.qZA()),2&F){const g=t.oxw();t.xp6(1),t.Q6J("ngForOf",g.filteredSuggestions),t.xp6(1),t.Q6J("ngIf",0===g.filteredSuggestions.length)}}const f=["*"];let C=(()=>{class F{}return F.\u0275fac=function(g){return new(g||F)},F.\u0275dir=t.lG2({type:F,selectors:[["","nzMentionSuggestion",""]],exportAs:["nzMentionSuggestion"]}),F})();let m=(()=>{class F{constructor(){this.triggerChange$=new M.xQ}triggerChanged(){return this.triggerChange$.asObservable()}registerTrigger(g){this.trigger!==g&&(this.trigger=g,this.triggerChange$.next(g))}ngOnDestroy(){this.triggerChange$.complete()}}return F.\u0275fac=function(g){return new(g||F)},F.\u0275prov=t.Yz7({token:F,factory:F.\u0275fac}),F})();const q={provide:n.JU,useExisting:(0,t.Gpc)(()=>I),multi:!0};let I=(()=>{class F{constructor(g,z){this.el=g,this.nzMentionService=z,this.onChange=()=>{},this.onTouched=()=>{},this.onFocusin=new t.vpe,this.onBlur=new t.vpe,this.onInput=new t.vpe,this.onKeydown=new t.vpe,this.onClick=new t.vpe}completeEvents(){this.onFocusin.complete(),this.onBlur.complete(),this.onInput.complete(),this.onKeydown.complete(),this.onClick.complete()}focus(g){this.el.nativeElement.focus(),this.el.nativeElement.setSelectionRange(g,g)}insertMention(g){const z=this.el.nativeElement.value,V=`${g.mention} `,en=[z.slice(0,g.startPos+1),V,z.slice(g.endPos,z.length)].join("");this.el.nativeElement.value=en,this.focus(g.startPos+V.length+1),this.onChange(en),this.value=en}writeValue(g){this.value=g,this.el.nativeElement.value="string"==typeof g?g:""}registerOnChange(g){this.onChange=g}registerOnTouched(g){this.onTouched=g}ngAfterViewInit(){this.nzMentionService.registerTrigger(this)}ngOnDestroy(){this.completeEvents()}}return F.\u0275fac=function(g){return new(g||F)(t.Y36(t.SBq),t.Y36(m))},F.\u0275dir=t.lG2({type:F,selectors:[["input","nzMentionTrigger",""],["textarea","nzMentionTrigger",""]],hostAttrs:["autocomplete","off"],hostBindings:function(g,z){1&g&&t.NdJ("focusin",function(){return z.onFocusin.emit()})("blur",function(){return z.onBlur.emit()})("input",function(en){return z.onInput.emit(en)})("keydown",function(en){return z.onKeydown.emit(en)})("click",function(en){return z.onClick.emit(en)})},exportAs:["nzMentionTrigger"],features:[t._Bn([q])]}),F})(),an=(()=>{class F{constructor(g,z,V,en,ln,nn){this.ngZone=g,this.ngDocument=z,this.cdr=V,this.overlay=en,this.viewContainerRef=ln,this.nzMentionService=nn,this.nzValueWith=_n=>_n,this.nzPrefix="@",this.nzLoading=!1,this.nzNotFoundContent="\u65e0\u5339\u914d\u7ed3\u679c\uff0c\u8f7b\u6572\u7a7a\u683c\u5b8c\u6210\u8f93\u5165",this.nzPlacement="bottom",this.nzSuggestions=[],this.nzOnSelect=new t.vpe,this.nzOnSearchChange=new t.vpe,this.isOpen=!1,this.filteredSuggestions=[],this.suggestionTemplate=null,this.activeIndex=-1,this.previousValue=null,this.cursorMention=null,this.overlayRef=null}set suggestionChild(g){g&&(this.suggestionTemplate=g)}get triggerNativeElement(){return this.trigger.el.nativeElement}get focusItemElement(){var g;const z=null===(g=this.items)||void 0===g?void 0:g.toArray();return z&&z[this.activeIndex]?z[this.activeIndex].nativeElement:null}ngOnInit(){this.nzMentionService.triggerChanged().subscribe(g=>{this.trigger=g,this.bindTriggerEvents(),this.closeDropdown(),this.overlayRef=null})}ngOnChanges(g){g.hasOwnProperty("nzSuggestions")&&this.isOpen&&(this.previousValue=null,this.activeIndex=-1,this.resetDropdown(!1))}ngAfterViewInit(){this.items.changes.pipe((0,T.O)(this.items),(0,J.w)(()=>{const g=this.items.toArray();return new Z.y(z=>this.ngZone.runOutsideAngular(()=>(0,A.T)(...g.map(V=>(0,b.R)(V.nativeElement,"mousedown"))).subscribe(z)))})).subscribe(g=>{g.preventDefault()})}ngOnDestroy(){this.closeDropdown()}closeDropdown(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.overlayRef.detach(),this.overlayOutsideClickSubscription.unsubscribe(),this.isOpen=!1,this.cdr.markForCheck())}openDropdown(){this.attachOverlay(),this.isOpen=!0,this.cdr.markForCheck()}getMentions(){return this.trigger?(0,R.qR)(this.trigger.value,this.nzPrefix):[]}selectSuggestion(g){const z=this.nzValueWith(g);this.trigger.insertMention({mention:z,startPos:this.cursorMentionStart,endPos:this.cursorMentionEnd}),this.nzOnSelect.emit(g),this.closeDropdown(),this.activeIndex=-1}handleInput(g){const z=g.target;this.trigger.onChange(z.value),this.trigger.value=z.value,this.resetDropdown()}handleKeydown(g){const z=g.keyCode;if(this.isOpen&&z===x.K5&&-1!==this.activeIndex&&this.filteredSuggestions.length)this.selectSuggestion(this.filteredSuggestions[this.activeIndex]),g.preventDefault();else if(z===x.oh||z===x.SV)this.resetDropdown(),g.stopPropagation();else{if(this.isOpen&&(z===x.Mf||z===x.hY))return void this.closeDropdown();this.isOpen&&z===x.LH&&(this.setPreviousItemActive(),g.preventDefault(),g.stopPropagation()),this.isOpen&&z===x.JH&&(this.setNextItemActive(),g.preventDefault(),g.stopPropagation())}}handleClick(){this.resetDropdown()}bindTriggerEvents(){this.trigger.onInput.subscribe(g=>this.handleInput(g)),this.trigger.onKeydown.subscribe(g=>this.handleKeydown(g)),this.trigger.onClick.subscribe(()=>this.handleClick())}suggestionsFilter(g,z){const V=g.substring(1);if(this.previousValue===g&&g!==this.cursorMention[0])return;this.previousValue=g,z&&this.nzOnSearchChange.emit({value:this.cursorMention.substring(1),prefix:this.cursorMention[0]});const en=V.toLowerCase();this.filteredSuggestions=this.nzSuggestions.filter(ln=>this.nzValueWith(ln).toLowerCase().includes(en))}resetDropdown(g=!0){if(this.resetCursorMention(),"string"!=typeof this.cursorMention||!this.canOpen())return void this.closeDropdown();this.suggestionsFilter(this.cursorMention,g);const z=this.filteredSuggestions.indexOf(this.cursorMention.substring(1));this.activeIndex=z>=0?z:0,this.openDropdown()}setNextItemActive(){this.activeIndex=this.activeIndex+1<=this.filteredSuggestions.length-1?this.activeIndex+1:0,this.cdr.markForCheck(),this.scrollToFocusItem()}setPreviousItemActive(){this.activeIndex=this.activeIndex-1<0?this.filteredSuggestions.length-1:this.activeIndex-1,this.cdr.markForCheck(),this.scrollToFocusItem()}scrollToFocusItem(){this.focusItemElement&&this.focusItemElement.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}canOpen(){const g=this.triggerNativeElement;return!g.readOnly&&!g.disabled}resetCursorMention(){const g=this.triggerNativeElement.value.replace(/[\r\n]/g," ")||"",z=this.triggerNativeElement.selectionStart,V="string"==typeof this.nzPrefix?[this.nzPrefix]:this.nzPrefix;let en=V.length;for(;en>=0;){const ln=g.lastIndexOf(V[en],z),nn=g.indexOf(" ",z)>-1?g.indexOf(" ",z):g.length,_n=g.substring(ln,nn);if(!(ln>0&&" "!==g[ln-1]||ln<0||_n.includes(V[en],1)||_n.includes(" ")))return this.cursorMention=_n,this.cursorMentionStart=ln,void(this.cursorMentionEnd=nn);this.cursorMention=null,this.cursorMentionStart=-1,this.cursorMentionEnd=-1,en--}}updatePositions(){const g=(0,R.Ly)(this.triggerNativeElement,this.cursorMentionStart),z=g.top-this.triggerNativeElement.getBoundingClientRect().height-this.triggerNativeElement.scrollTop+("bottom"===this.nzPlacement?g.height-6:-6);this.positionStrategy.withDefaultOffsetX(g.left-this.triggerNativeElement.scrollLeft).withDefaultOffsetY(z),"bottom"===this.nzPlacement&&this.positionStrategy.withPositions([...H.fG]),"top"===this.nzPlacement&&this.positionStrategy.withPositions([...H.A7]),this.positionStrategy.apply()}subscribeOverlayOutsideClick(){return(0,A.T)(this.overlayRef.outsidePointerEvents(),(0,b.R)(this.ngDocument,"touchend")).subscribe(g=>{var z;const V=g.target;this.isOpen&&V!==this.trigger.el.nativeElement&&!(null===(z=this.overlayRef)||void 0===z?void 0:z.overlayElement.contains(V))&&this.closeDropdown()})}attachOverlay(){this.overlayRef||(this.portal=new O.UE(this.suggestionsTemp,this.viewContainerRef),this.overlayRef=this.overlay.create(this.getOverlayConfig())),this.overlayRef&&!this.overlayRef.hasAttached()&&(this.overlayRef.attach(this.portal),this.overlayOutsideClickSubscription=this.subscribeOverlayOutsideClick()),this.updatePositions()}getOverlayConfig(){return new s.X_({positionStrategy:this.getOverlayPosition(),scrollStrategy:this.overlay.scrollStrategies.reposition(),disposeOnNavigation:!0})}getOverlayPosition(){const g=[new s.tR({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new s.tR({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"})];return this.positionStrategy=this.overlay.position().flexibleConnectedTo(this.trigger.el).withPositions(g).withFlexibleDimensions(!1).withPush(!1),this.positionStrategy}}return F.\u0275fac=function(g){return new(g||F)(t.Y36(t.R0b),t.Y36(_.K0,8),t.Y36(t.sBO),t.Y36(s.aV),t.Y36(t.s_b),t.Y36(m))},F.\u0275cmp=t.Xpm({type:F,selectors:[["nz-mention"]],contentQueries:function(g,z,V){if(1&g&&t.Suo(V,C,5,t.Rgc),2&g){let en;t.iGM(en=t.CRH())&&(z.suggestionChild=en.first)}},viewQuery:function(g,z){if(1&g&&(t.Gf(t.Rgc,5),t.Gf(U,5,t.SBq)),2&g){let V;t.iGM(V=t.CRH())&&(z.suggestionsTemp=V.first),t.iGM(V=t.CRH())&&(z.items=V)}},inputs:{nzValueWith:"nzValueWith",nzPrefix:"nzPrefix",nzLoading:"nzLoading",nzNotFoundContent:"nzNotFoundContent",nzPlacement:"nzPlacement",nzSuggestions:"nzSuggestions"},outputs:{nzOnSelect:"nzOnSelect",nzOnSearchChange:"nzOnSearchChange"},exportAs:["nzMention"],features:[t._Bn([m]),t.TTD],ngContentSelectors:f,decls:3,vars:0,consts:[["suggestions",""],[1,"ant-mention-dropdown"],["class","ant-mention-dropdown-item",3,"focus","click",4,"ngFor","ngForOf"],["class","ant-mention-dropdown-notfound ant-mention-dropdown-item",4,"ngIf"],[1,"ant-mention-dropdown-item",3,"click"],["items",""],[4,"ngIf","ngIfElse"],["defaultSuggestion",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-mention-dropdown-notfound","ant-mention-dropdown-item"],[4,"ngIf"],["nz-icon","","nzType","loading"]],template:function(g,z){1&g&&(t.F$t(),t.Hsn(0),t.YNc(1,S,3,2,"ng-template",null,0,t.W1O))},directives:[_.sg,_.O5,_.tP,u.Ls],encapsulation:2,changeDetection:0}),(0,w.gn)([(0,R.yF)()],F.prototype,"nzLoading",void 0),F})(),mn=(()=>{class F{}return F.\u0275fac=function(g){return new(g||F)},F.\u0275mod=t.oAB({type:F}),F.\u0275inj=t.cJS({imports:[[o.vT,_.ez,n.u5,s.U8,u.PV]]}),F})()}}]);