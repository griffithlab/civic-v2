"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[5384],{6371:(Z,N,o)=>{o.d(N,{O:()=>x});var a=o(60177),s=o(97529),b=o(12617),y=o(25703),n=o(97685),t=o(75699),d=o(7391),f=o(72968),T=o(29438),M=o(30869),Y=o(11672),G=o(50513),W=o(41951),k=o(54438);let x=(()=>{class H{static{this.\u0275fac=function(V){return new(V||H)}}static{this.\u0275mod=k.$C({type:H})}static{this.\u0275inj=k.G2t({imports:[a.MD,s.f3,b.rD,y.Ti,n.pc,t.T,d.kT,T.Yb,Y._v,G.Zw,W.Y3,f.K,M.S]})}}return H})()},16269:(Z,N,o)=>{o.d(N,{f:()=>h});var a=o(24608),s=o(54438),b=o(69145),y=o(60177),n=o(7391),t=o(51188),d=o(29438),f=o(1236),T=o(62e3),M=o(72702),Y=o(27793);function G(u,z){1&u&&(s.qex(0),s.EFF(1,", "),s.bVm())}function W(u,z){if(1&u&&(s.qex(0),s.EFF(1),s.nI1(2,"eventVerbiage"),s.DNE(3,G,2,0,"ng-container",12),s.bVm()),2&u){const R=z.$implicit,D=z.last;s.R7$(),s.SpI(" ",s.brH(2,2,R.action,"contributor-card",R.count)," "),s.R7$(2),s.Y8G("ngIf",!D)}}function k(u,z){if(1&u&&(s.j41(0,"nz-descriptions",8)(1,"nz-descriptions-item",9),s.DNE(2,W,4,6,"ng-container",10),s.k0s(),s.j41(3,"nz-descriptions-item",11),s.EFF(4),s.nI1(5,"date"),s.k0s()()),2&u){const R=s.XpG(2).$implicit;s.Y8G("nzColumn",1),s.R7$(2),s.Y8G("ngForOf",R.uniqueActions),s.R7$(2),s.SpI(" ",s.bMT(5,3,R.lastActionDate)," ")}}function x(u,z){if(1&u&&(s.j41(0,"cvc-user-popover",7),s.DNE(1,k,6,5,"ng-template",null,2,s.C5r),s.k0s()),2&u){const R=s.XpG().$implicit;s.Y8G("userId",R.user.id)}}function H(u,z){if(1&u&&(s.j41(0,"a",5),s.nrm(1,"nz-avatar",6),s.DNE(2,x,3,1,"ng-template",null,1,s.C5r),s.k0s()),2&u){const R=z.$implicit,D=s.sdS(3);s.Mz_("routerLink","/users/",R.user.id,""),s.R7$(),s.Y8G("nzSize",14)("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",D)("nzSrc",R.user.profileImagePath)}}function Q(u,z){if(1&u&&(s.qex(0),s.DNE(1,H,4,6,"a",4),s.bVm()),2&u){const R=s.XpG();s.R7$(),s.Y8G("ngForOf",R.sortedContributors)}}function E(u,z){1&u&&s.EFF(0," None ")}let V=(()=>{class u{ngOnInit(){if(void 0===this.contributors)throw new Error("Must pass a list of contributors into the contributor stack");this.sortedContributors=this.contributors.slice(),this.sortedContributors.sort((R,D)=>D.totalActionCount-R.totalActionCount)}static{this.\u0275fac=function(D){return new(D||u)}}static{this.\u0275cmp=s.VBU({type:u,selectors:[["cvc-contributor-stack"]],inputs:{contributors:"contributors"},standalone:!1,decls:3,vars:2,consts:[["noContributors",""],["curatorPopover",""],["additionalMetadata",""],[4,"ngIf","ngIfElse"],["class","avatar",3,"routerLink",4,"ngFor","ngForOf"],[1,"avatar",3,"routerLink"],["nz-popover","","nzPopoverTrigger","hover","nzPopoverPlacement","bottomRight","nzIcon","user","nzSize","small",3,"nzSize","nzPopoverMouseEnterDelay","nzPopoverContent","nzSrc"],[3,"userId"],["nzBordered","","nzTitle","Activity","nzSize","small",3,"nzColumn"],["nzTitle","Contributions"],[4,"ngFor","ngForOf"],["nzTitle","Last Contribution"],[4,"ngIf"]],template:function(D,$){if(1&D&&s.DNE(0,Q,2,1,"ng-container",3)(1,E,1,0,"ng-template",null,0,s.C5r),2&D){const O=s.sdS(2);s.Y8G("ngIf",$.sortedContributors&&$.sortedContributors.length>0)("ngIfElse",O)}},dependencies:[y.Sq,y.bT,t.Wk,d.PM,f.L_,T.xA,T.gr,M.M,y.vh,Y.s],encapsulation:2})}}return u})();var S=o(61774);function X(u,z){if(1&u&&(s.qex(0),s.nrm(1,"cvc-contributor-stack",5),s.bVm()),2&u){const R=z.ngIf;s.R7$(),s.Y8G("contributors",R)}}function I(u,z){1&u&&s.EFF(0," None ")}function P(u,z){if(1&u&&(s.qex(0),s.nrm(1,"cvc-contributor-stack",5),s.bVm()),2&u){const R=z.ngIf;s.R7$(),s.Y8G("contributors",R)}}function U(u,z){1&u&&s.EFF(0," None ")}let h=(()=>{class u{constructor(R){this.gql=R}ngOnInit(){if(void 0===this.subscribable)throw new Error("Must pass a subscribable into ContributorAvatars component.");let R=this.gql.watch({subscribable:this.subscribable}).valueChanges;this.curators$=R.pipe((0,a.E)("data","contributors","curators")),this.editors$=R.pipe((0,a.E)("data","contributors","editors"))}static{this.\u0275fac=function(D){return new(D||u)(s.rXU(b.wBW))}}static{this.\u0275cmp=s.VBU({type:u,selectors:[["cvc-contributor-avatars"]],inputs:{subscribable:"subscribable"},standalone:!1,decls:14,vars:8,consts:[["noCurators",""],["noEditors",""],["nz-typography","","nzType","secondary",1,"role-group-label"],[1,"role-group"],[4,"ngIf","ngIfElse"],[3,"contributors"]],template:function(D,$){if(1&D&&(s.j41(0,"span",2),s.EFF(1,"Curators:"),s.k0s(),s.j41(2,"div",3),s.DNE(3,X,2,1,"ng-container",4),s.nI1(4,"ngrxPush"),s.DNE(5,I,1,0,"ng-template",null,0,s.C5r),s.k0s(),s.j41(7,"span",2),s.EFF(8,"Editors:"),s.k0s(),s.j41(9,"div",3),s.DNE(10,P,2,1,"ng-container",4),s.nI1(11,"ngrxPush"),s.DNE(12,U,1,0,"ng-template",null,1,s.C5r),s.k0s()),2&D){const O=s.sdS(6),J=s.sdS(13);s.R7$(3),s.Y8G("ngIf",s.bMT(4,4,$.curators$))("ngIfElse",O),s.R7$(7),s.Y8G("ngIf",s.bMT(11,6,$.editors$))("ngIfElse",J)}},dependencies:[y.bT,n.Di,V,S.L9],styles:["[_nghost-%COMP%]{display:inline-block}.role-group-label[_ngcontent-%COMP%]{margin-left:12px}.role-group[_ngcontent-%COMP%]{display:inline-block}.role-group[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{display:inline-block;margin-left:2px}"]})}}return u})()},27268:(Z,N,o)=>{o.d(N,{G:()=>on});var a=o(60177),s=o(33190),b=o(22839),y=o(25703),n=o(38927),t=o(12617),d=o(89417),f=o(64917),T=o(34308),M=o(23842),Y=o(23617),G=o(50513),W=o(82983),k=o(35154),x=o(54438);let H=(()=>{class L{static{this.\u0275fac=function(w){return new(w||L)}}static{this.\u0275mod=x.$C({type:L})}static{this.\u0275inj=x.G2t({imports:[a.MD,d.YN,d.X1,n.PQ,G.Zw,y.Ti,Y.$,k.Qt,W.V,M.k,f.i,T.I]})}}return L})();var Q=o(77169),E=o(824),V=o(11542),S=o(89590),X=o(51209),I=o(89802),P=o(35493),U=o(87051),h=o(41951),u=o(1236);let z=(()=>{class L{static{this.\u0275fac=function(w){return new(w||L)}}static{this.\u0275mod=x.$C({type:L})}static{this.\u0275inj=x.G2t({imports:[a.MD,d.X1,G.Zw,n.PQ,d.YN,Y.$,y.Ti,u.MC,h.Y3,k.Qt,W.V,T.I,M.k]})}}return L})();var R=o(29438),D=o(2986),$=o(19448),O=o(11672),J=o(97529),nn=o(21011),tn=o(97685),j=o(75699),F=o(7391);let B=(()=>{class L{static{this.\u0275fac=function(w){return new(w||L)}}static{this.\u0275mod=x.$C({type:L})}static{this.\u0275inj=x.G2t({imports:[a.MD,J.f3,t.rD,y.Ti,tn.pc,j.T,F.kT,R.Yb,O._v,D.IJ,$.g,k.Qt,t.rD,u.MC,h.Y3,nn.j,d.YN,X.k,b.m,E.J,I._,V.X,U.U,P.G,S.R,f.i,G.Zw,Y.$,z,$.g,Q.W]})}}return L})();var en=o(72968);let on=(()=>{class L{static{this.\u0275fac=function(w){return new(w||L)}}static{this.\u0275mod=x.$C({type:L})}static{this.\u0275inj=x.G2t({imports:[a.MD,d.YN,G.Zw,n.PQ,s.Sw,G.Zw,b.m,t.rD,y.Ti,H,B,O._v,en.K,R.Yb,tn.pc,f.i]})}}return L})()},27793:(Z,N,o)=>{o.d(N,{s:()=>b});var a=o(69145),s=o(54438);let b=(()=>{class y{transform(t,d="contributor-card",f=0){return"contributor-card"===d?this.contributorVerbiage(t,f):"action-filter"===d?this.actionFilterVerbiage(t):this.eventFeedVerbiage(t)}eventFeedVerbiage(t){switch(t){case a.H1z.Commented:return"added comment";case a.H1z.RevisionSuggested:return"suggested revision";case a.H1z.RevisionAccepted:return"accepted revision";case a.H1z.RevisionRejected:return"rejected revision";case a.H1z.RevisionSuperseded:return"closed revision";case a.H1z.Flagged:return"opened new flag";case a.H1z.FlagResolved:return"resolved flag";case a.H1z.AssertionSubmitted:return"submitted assertion";case a.H1z.AssertionAccepted:return"accepted assertion";case a.H1z.AssertionRejected:return"rejected assertion";case a.H1z.Submitted:return"submitted evidence item";case a.H1z.Accepted:return"accepted evidence item";case a.H1z.Rejected:return"rejected evidence item";case a.H1z.PublicationSuggested:return"created source suggestion";case a.H1z.CuratedSourceSuggestion:return"finished curating source suggestion";case a.H1z.RejectedSourceSuggestion:return"rejected source suggestion";case a.H1z.RequeuedSourceSuggestion:return"requeued source suggestion";case a.H1z.Reverted:return"reverted evidence item";case a.H1z.AssertionReverted:return"reverted assertion";case a.H1z.DeprecatedVariant:return"deprecated variant";case a.H1z.DeprecatedFeature:return"deprecated feature";case a.H1z.DeprecatedMolecularProfile:return"deprecated molecular profile";case a.H1z.VariantCreated:return"created variant";case a.H1z.FeatureCreated:return"created feature";case a.H1z.ComplexMolecularProfileCreated:return"created complex molecular profile";case a.H1z.CommentDeleted:return"deleted comment";default:return t}}actionFilterVerbiage(t){switch(t){case a.H1z.Commented:return"commented";case a.H1z.RevisionSuggested:return"revision suggested";case a.H1z.RevisionAccepted:return"revision accepted";case a.H1z.RevisionRejected:return"revision rejected";case a.H1z.RevisionSuperseded:return"revision closed";case a.H1z.Flagged:return"flag opened";case a.H1z.FlagResolved:return"flag resolved";case a.H1z.AssertionSubmitted:return"assertion submitted";case a.H1z.AssertionAccepted:return"assertion accepted";case a.H1z.AssertionRejected:return"assertion rejected";case a.H1z.Submitted:return"evidence item submitted";case a.H1z.Accepted:return"evidence item accepted";case a.H1z.Rejected:return"evidence item rejected";case a.H1z.PublicationSuggested:return"source suggestion created";case a.H1z.CuratedSourceSuggestion:return"source suggestion curated";case a.H1z.RejectedSourceSuggestion:return"source suggestion rejected";case a.H1z.RequeuedSourceSuggestion:return"source suggestion requeued";case a.H1z.Reverted:return"evidence item reverted";case a.H1z.AssertionReverted:return"assertion reverted";case a.H1z.DeprecatedVariant:return"variant deprecated";case a.H1z.DeprecatedMolecularProfile:return"molecular profile deprecated";case a.H1z.VariantCreated:return"variant created";case a.H1z.ComplexMolecularProfileCreated:return"complex molecular profile created";case a.H1z.CommentDeleted:return"comment deleted";default:return t}}contributorVerbiage(t,d){switch(t){case a.H1z.Commented:return 1==d?"left a comment on this entity":`left ${d} comments on this entity`;case a.H1z.RevisionSuggested:return 1==d?"suggested a revision to this entity":`suggested ${d} revisions on this entity`;case a.H1z.RevisionAccepted:return 1==d?"accepted a revision to this entity":`accepted ${d} revisions on this entity`;case a.H1z.RevisionRejected:return 1==d?"rejected a revision to this entity":`rejected ${d} revisions on this entity`;case a.H1z.RevisionSuperseded:return 1==d?"closed a revision to this entity":`closed ${d} revisions on this entity`;case a.H1z.Flagged:return 1==d?"opened new flag on this entity":`opened ${d} new flags on this entity`;case a.H1z.FlagResolved:return 1==d?"resolved a flag on this entity":`resolved ${d} flags on this entity`;case a.H1z.AssertionSubmitted:return"submitted this assertion";case a.H1z.AssertionAccepted:return"accepted this assertion";case a.H1z.AssertionRejected:return"rejected this assertion";case a.H1z.Submitted:return"submitted this evidence item";case a.H1z.Accepted:return"accepted this evidence item";case a.H1z.Rejected:return"rejected this evidence item";case a.H1z.PublicationSuggested:return"";case a.H1z.CuratedSourceSuggestion:return"finished curating this source suggestion";case a.H1z.RejectedSourceSuggestion:return"rejected this source suggestion";case a.H1z.RequeuedSourceSuggestion:return"requeued this source suggestion";case a.H1z.AssertionReverted:return"reverted this assertion";case a.H1z.Reverted:return"reverted this evidence item";case a.H1z.DeprecatedVariant:return"deprecated this variant";case a.H1z.DeprecatedMolecularProfile:return"deprecated this molecular profile";case a.H1z.DeprecatedFeature:return"deprecated this feature";case a.H1z.FeatureCreated:return"created this feature";case a.H1z.VariantCreated:return"created this variant";case a.H1z.ComplexMolecularProfileCreated:return"created this complex molecular profile";default:return t}}static{this.\u0275fac=function(d){return new(d||y)}}static{this.\u0275pipe=s.EJ8({name:"eventVerbiage",type:y,pure:!0,standalone:!1})}}return y})()},30869:(Z,N,o)=>{o.d(N,{S:()=>on});var a=o(60177),s=o(25703),b=o(12617),y=o(97529),n=o(54438);let t=(()=>{class L{static{this.\u0275fac=function(w){return new(w||L)}}static{this.\u0275mod=n.$C({type:L})}static{this.\u0275inj=n.G2t({imports:[a.MD,y.f3]})}}return L})();var d=o(65757),f=o(51209),T=o(97685),M=o(75699),Y=o(7391),G=o(29438),W=o(22839),k=o(824),x=o(11542),H=o(35493),Q=o(74696),E=o(11672),V=o(89590),S=o(2986),X=o(19448),I=o(35154),P=o(50513),U=o(23617),h=o(41951),u=o(1236),z=o(21011),R=o(89417),D=o(64917),$=o(62e3),O=o(34308),J=o(77169),nn=o(86936),tn=o(89802),j=o(60996),F=o(56912),B=o(47086),en=o(98920);let on=(()=>{class L{static{this.\u0275fac=function(w){return new(w||L)}}static{this.\u0275mod=n.$C({type:L})}static{this.\u0275inj=n.G2t({imports:[a.MD,y.f3,b.rD,s.Ti,T.pc,M.T,Y.kT,G.Yb,E._v,S.IJ,X.g,I.Qt,b.rD,u.MC,h.Y3,z.j,$.WF,X.g,R.YN,d.v,F.l,f.k,t,W.m,k.J,tn._,x.X,B.C,nn.G,H.G,V.R,O.I,j.o,D.i,J.W,en.U,Q.GB,P.Zw,U.$]})}}return L})()},45269:(Z,N,o)=>{o.d(N,{o:()=>V});var a=o(71226),s=o(69145),b=o(21413),y=o(5964),n=o(56977),t=o(69199),d=o(24608),f=o(54438),T=o(74222),M=o(60177),Y=o(50513),G=o(16389),W=o(25930),k=o(41951),x=o(35154),H=o(61774);function Q(S,X){if(1&S){const I=f.RV6();f.qex(0),f.j41(1,"button",2),f.bIt("click",function(){f.eBV(I);const U=f.XpG();return f.Njj(U.unsubscribe())}),f.nrm(2,"i",3),f.k0s(),f.bVm()}if(2&S){const I=f.XpG();f.R7$(),f.Y8G("nzLoading",I.isSubmitting)}}function E(S,X){if(1&S){const I=f.RV6();f.j41(0,"button",4),f.bIt("click",function(){f.eBV(I);const U=f.XpG();return f.Njj(U.subscribe())}),f.nrm(1,"i",5),f.k0s()}if(2&S){const I=f.XpG();f.Y8G("nzLoading",I.isSubmitting)}}let V=(()=>{class S{constructor(I,P,U,h){this.isSubscribedGQL=I,this.unsubscribeMutation=P,this.subscribeMutation=U,this.networkErrorService=h,this.isSubmitting=!1,this.destroy$=new b.B,this.unsubscribeMutator=new a.E(h),this.subscribeMutator=new a.E(h)}ngOnInit(){if(void 0===this.viewer)throw new Error("Must pass in a viewer to the CvcEntitySubscriptionButtonComponent");if(void 0===this.typename)throw new Error("Must pass in a typename to the CvcEntitySubscriptionButtonComponent");if(void 0===this.subscribableId)throw new Error("Must pass in a subscribableId to the CvcEntitySubscriptionButtonComponent");this.subscribable={id:this.subscribableId,entityType:s.V9U[this.typename]},this.queryRef=this.isSubscribedGQL.watch({subscribable:this.subscribable}),this.existingSubscription$=this.queryRef.valueChanges.pipe((0,d.E)("data","subscriptionForEntity"),(0,y.p)(t.kP))}subscribe(){this.subscribable&&(this.isSubmitting=!0,this.subscribeMutator.mutate(this.subscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,n.Q)(this.destroy$)).subscribe(P=>{P&&(this.queryRef?.refetch(),this.isSubmitting=!1)}))}unsubscribe(){this.subscribable&&(this.isSubmitting=!0,this.unsubscribeMutator.mutate(this.unsubscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,n.Q)(this.destroy$)).subscribe(P=>{P&&(this.queryRef?.refetch(),this.isSubmitting=!1)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(P){return new(P||S)(f.rXU(s.aUH),f.rXU(s.ytN),f.rXU(s.RSy),f.rXU(T.N))}}static{this.\u0275cmp=f.VBU({type:S,selectors:[["cvc-entity-subscription-button"]],inputs:{viewer:"viewer",typename:"typename",subscribableId:"subscribableId"},standalone:!1,decls:4,vars:4,consts:[["noSub",""],[4,"ngIf","ngIfElse"],["nz-button","","nz-tooltip","Unsubscribe","nzSize","small",3,"click","nzLoading"],["nz-icon","","nzType","bell","nzTheme","fill"],["nz-button","","nz-tooltip","Subscribe","nzSize","small",3,"click","nzLoading"],["nz-icon","","nzType","bell","nzTheme","outline"]],template:function(P,U){if(1&P&&(f.DNE(0,Q,3,1,"ng-container",1),f.nI1(1,"ngrxPush"),f.DNE(2,E,2,1,"ng-template",null,0,f.C5r)),2&P){const h=f.sdS(3);f.Y8G("ngIf",f.bMT(1,2,U.existingSubscription$))("ngIfElse",h)}},dependencies:[M.bT,Y.aO,G.c,W.p,k.Dn,x.LH,H.L9],styles:["[_nghost-%COMP%]{display:block}"]})}}return S})()},45736:(Z,N,o)=>{o.d(N,{V:()=>t});var a=o(60177),s=o(50513),b=o(41951),y=o(35154),n=o(54438);let t=(()=>{class d{static{this.\u0275fac=function(M){return new(M||d)}}static{this.\u0275mod=n.$C({type:d})}static{this.\u0275inj=n.G2t({imports:[a.MD,s.Zw,b.Y3,y.Qt]})}}return d})()},67428:(Z,N,o)=>{o.d(N,{v:()=>s});var a=o(54438);let s=(()=>{class b{constructor(){}static{this.\u0275fac=function(t){return new(t||b)}}static{this.\u0275dir=a.FsC({type:b,selectors:[["","cvcFlaggableOptions",""]],standalone:!1})}}return b})()},68103:(Z,N,o)=>{o.d(N,{m:()=>Y});var a=o(60177),s=o(7391),b=o(51188),y=o(29438),n=o(1236),t=o(64917),d=o(82225),f=o(62e3),T=o(54438);let M=(()=>{class G{static{this.\u0275fac=function(x){return new(x||G)}}static{this.\u0275mod=T.$C({type:G})}static{this.\u0275inj=T.G2t({imports:[a.MD,b.iI,y.Yb,n.MC,f.WF,t.i,d.h]})}}return G})(),Y=(()=>{class G{static{this.\u0275fac=function(x){return new(x||G)}}static{this.\u0275mod=T.$C({type:G})}static{this.\u0275inj=T.G2t({imports:[a.MD,s.kT,M]})}}return G})()},71896:(Z,N,o)=>{o.d(N,{Y:()=>f});var a=o(60177),s=o(35154),b=o(7391),y=o(53146),n=o(41951),t=o(51188),d=o(54438);let f=(()=>{class T{static{this.\u0275fac=function(G){return new(G||T)}}static{this.\u0275mod=d.$C({type:T})}static{this.\u0275inj=d.G2t({imports:[a.MD,t.iI,n.Y3,y.W2,s.Qt,b.kT]})}}return T})()},74055:(Z,N,o)=>{o.d(N,{B:()=>_i});var a=o(69145),s=o(96354),b=o(99172),y=o(24608),n=o(54438),t=o(51188),d=o(60177),f=o(61774),T=o(97529),M=o(97685),Y=o(75699),G=o(29438),W=o(11672),k=o(50513),x=o(16389),H=o(25930),Q=o(41951),E=o(9365),V=o(21413),S=o(5964),X=o(84572),I=o(71226),P=o(56977),U=o(69199),h=o(41305),u=o(74222),z=o(12617),R=o(25703),D=o(7391),$=o(2986),O=o(19448),J=o(35154),nn=o(1236),tn=o(62e3);let j=(()=>{class e{transform(i){return i?i.replace(/([a-z])([A-Z])/g,"$1 $2"):""}static{this.\u0275fac=function(_){return new(_||e)}}static{this.\u0275pipe=n.EJ8({name:"camelToWords",type:e,pure:!0,standalone:!1})}}return e})();const F=["itemTemplate"],B=e=>({$implicit:e});function en(e,l){if(1&e&&(n.qex(0),n.j41(1,"span",12),n.eu8(2,13),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit,_=n.XpG();n.R7$(2),n.Y8G("ngTemplateOutlet",_.itemTemplateRef||null)("ngTemplateOutletContext",n.eq3(2,B,i))}}function on(e,l){if(1&e&&(n.j41(0,"nz-tag",14),n.EFF(1),n.nI1(2,"camelToWords"),n.k0s()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Lme("Deleted ",n.bMT(2,2,i.entityType)," ",i.id,"")}}function L(e,l){if(1&e&&(n.j41(0,"nz-list-item",10),n.DNE(1,en,3,4,"ng-container",11)(2,on,3,4,"ng-template",null,0,n.C5r),n.k0s()),2&e){const i=l.$implicit,_=n.sdS(3);n.R7$(),n.Y8G("ngIf",!i.deleted)("ngIfElse",_)}}function _n(e,l){if(1&e&&n.nrm(0,"nz-list-empty",15),2&e){const i=n.XpG();n.Mz_("nzNoResult","No ",i.entityType,"")}}function q(e,l){if(1&e&&(n.qex(0),n.j41(1,"span",12),n.eu8(2,13),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit,_=n.XpG(3);n.R7$(2),n.Y8G("ngTemplateOutlet",_.itemTemplateRef||null)("ngTemplateOutletContext",n.eq3(2,B,i))}}function w(e,l){if(1&e&&(n.j41(0,"nz-tag",14),n.EFF(1),n.nI1(2,"camelToWords"),n.k0s()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Lme("Deleted ",n.bMT(2,2,i.entityType)," ",i.id,"")}}function un(e,l){if(1&e&&(n.j41(0,"nz-list-item",17),n.DNE(1,q,3,4,"ng-container",11)(2,w,3,4,"ng-template",null,0,n.C5r),n.k0s()),2&e){const i=l.$implicit,_=n.sdS(3);n.R7$(),n.Y8G("ngIf",!i.deleted)("ngIfElse",_)}}function vn(e,l){if(1&e&&n.nrm(0,"nz-list-empty",15),2&e){const i=n.XpG(3);n.Mz_("nzNoResult","No ",i.entityType," Removed")}}function pn(e,l){if(1&e&&(n.j41(0,"nz-list",3),n.DNE(1,un,4,2,"nz-list-item",16)(2,vn,1,2,"nz-list-empty",5),n.k0s()),2&e){const i=n.XpG(2);n.Mz_("nzHeader","Removed ",i.entityType,""),n.R7$(),n.Y8G("ngForOf",i.diffObject.removedObjects),n.R7$(),n.Y8G("ngIf",0===i.diffObject.removedObjects.length)}}function zn(e,l){1&e&&(n.qex(0),n.DNE(1,pn,3,4,"nz-list",8),n.bVm())}function Cn(e,l){if(1&e&&(n.qex(0),n.j41(1,"span",12),n.eu8(2,13),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit,_=n.XpG(2);n.R7$(2),n.Y8G("ngTemplateOutlet",_.itemTemplateRef||null)("ngTemplateOutletContext",n.eq3(2,B,i))}}function hn(e,l){if(1&e&&(n.j41(0,"nz-tag",14),n.EFF(1),n.nI1(2,"camelToWords"),n.k0s()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Lme("Deleted ",n.bMT(2,2,i.entityType)," ",i.id,"")}}function Rn(e,l){if(1&e&&(n.j41(0,"nz-list-item",19),n.DNE(1,Cn,3,4,"ng-container",11)(2,hn,3,4,"ng-template",null,0,n.C5r),n.k0s()),2&e){const i=l.$implicit,_=n.sdS(3);n.R7$(),n.Y8G("ngIf",!i.deleted)("ngIfElse",_)}}function Tn(e,l){if(1&e&&n.nrm(0,"nz-list-empty",15),2&e){const i=n.XpG(2);n.Mz_("nzNoResult","No ",i.entityType," Added")}}function En(e,l){if(1&e&&(n.j41(0,"nz-list",3),n.DNE(1,Rn,4,2,"nz-list-item",18)(2,Tn,1,2,"nz-list-empty",5),n.k0s()),2&e){const i=n.XpG();n.Mz_("nzHeader","Added ",i.entityType,""),n.R7$(),n.Y8G("ngForOf",i.diffObject.addedObjects),n.R7$(),n.Y8G("ngIf",0===i.diffObject.addedObjects.length)}}function bn(e,l){if(1&e&&(n.qex(0),n.j41(1,"span",12),n.eu8(2,13),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit,_=n.XpG(3);n.R7$(2),n.Y8G("ngTemplateOutlet",_.itemTemplateRef||null)("ngTemplateOutletContext",n.eq3(2,B,i))}}function yn(e,l){if(1&e&&(n.j41(0,"nz-tag",14),n.EFF(1),n.nI1(2,"camelToWords"),n.k0s()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Lme("Deleted ",n.bMT(2,2,i.entityType)," ",i.id,"")}}function Fn(e,l){if(1&e&&(n.j41(0,"nz-list-item",21),n.DNE(1,bn,3,4,"ng-container",11)(2,yn,3,4,"ng-template",null,0,n.C5r),n.k0s()),2&e){const i=l.$implicit,_=n.sdS(3);n.R7$(),n.Y8G("ngIf",!i.deleted)("ngIfElse",_)}}function Gn(e,l){if(1&e&&n.nrm(0,"nz-list-empty",15),2&e){const i=n.XpG(3);n.Mz_("nzNoResult","No ",i.entityType," Kept")}}function Sn(e,l){if(1&e&&(n.j41(0,"nz-list",3),n.DNE(1,Fn,4,2,"nz-list-item",20)(2,Gn,1,2,"nz-list-empty",5),n.k0s()),2&e){const i=n.XpG(2);n.Mz_("nzHeader","Kept ",i.entityType,""),n.R7$(),n.Y8G("ngForOf",i.diffObject.keptObjects),n.R7$(),n.Y8G("ngIf",0===i.diffObject.keptObjects.length)}}function xn(e,l){1&e&&(n.qex(0),n.DNE(1,Sn,3,4,"nz-list",8),n.bVm())}function Dn(e,l){if(1&e&&(n.qex(0),n.j41(1,"span",12),n.eu8(2,13),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit,_=n.XpG();n.R7$(2),n.Y8G("ngTemplateOutlet",_.itemTemplateRef||null)("ngTemplateOutletContext",n.eq3(2,B,i))}}function In(e,l){if(1&e&&(n.j41(0,"nz-tag",14),n.EFF(1),n.nI1(2,"camelToWords"),n.k0s()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Lme("Deleted ",n.bMT(2,2,i.entityType)," ",i.id,"")}}function $n(e,l){if(1&e&&(n.j41(0,"nz-list-item",22),n.DNE(1,Dn,3,4,"ng-container",11)(2,In,3,4,"ng-template",null,0,n.C5r),n.k0s()),2&e){const i=l.$implicit,_=n.sdS(3);n.R7$(),n.Y8G("ngIf",!i.deleted)("ngIfElse",_)}}function On(e,l){if(1&e&&n.nrm(0,"nz-list-empty",15),2&e){const i=n.XpG();n.Mz_("nzNoResult","No ",i.entityType,"")}}let Ln=(()=>{class e{constructor(){}ngOnInit(){if(void 0===this.diffObject)throw new Error("Must specify a diffObject.");if(void 0===this.entityType)throw new Error("Must specify an entityType.")}static{this.\u0275fac=function(_){return new(_||e)}}static{this.\u0275cmp=n.VBU({type:e,selectors:[["cvc-revision-list-diff"]],contentQueries:function(_,p,C){if(1&_&&n.wni(C,F,5),2&_){let K;n.mGM(K=n.lsd())&&(p.itemTemplateRef=K.first)}},inputs:{diffObject:"diffObject",entityType:"entityType"},standalone:!1,decls:14,vars:14,consts:[["deleted",""],[3,"nzGutter"],[3,"nzSpan"],["nzBordered","","nzType","inner","nzSize","small",3,"nzHeader"],["ngClass","current",4,"ngFor","ngForOf"],[3,"nzNoResult",4,"ngIf"],["nzDirection","vertical"],[4,"ngIf"],["nzBordered","","nzType","inner","nzSize","small",3,"nzHeader",4,"nzSpaceItem"],["ngClass","suggested",4,"ngFor","ngForOf"],["ngClass","current"],[4,"ngIf","ngIfElse"],["nz-typography",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nzColor","error"],[3,"nzNoResult"],["ngClass","removed",4,"ngFor","ngForOf"],["ngClass","removed"],["ngClass","added",4,"ngFor","ngForOf"],["ngClass","added"],["ngClass","kept",4,"ngFor","ngForOf"],["ngClass","kept"],["ngClass","suggested"]],template:function(_,p){1&_&&(n.j41(0,"nz-row",1)(1,"nz-col",2)(2,"nz-list",3),n.DNE(3,L,4,2,"nz-list-item",4)(4,_n,1,2,"nz-list-empty",5),n.k0s()(),n.j41(5,"nz-col",2)(6,"nz-space",6),n.DNE(7,zn,2,0,"ng-container",7)(8,En,3,4,"nz-list",8)(9,xn,2,0,"ng-container",7),n.k0s()(),n.j41(10,"nz-col",2)(11,"nz-list",3),n.DNE(12,$n,4,2,"nz-list-item",9)(13,On,1,2,"nz-list-empty",5),n.k0s()()()),2&_&&(n.Y8G("nzGutter",16),n.R7$(),n.Y8G("nzSpan",8),n.R7$(),n.Mz_("nzHeader","Original ",p.entityType," List"),n.R7$(),n.Y8G("ngForOf",p.diffObject.currentObjects),n.R7$(),n.Y8G("ngIf",0===p.diffObject.currentObjects.length),n.R7$(),n.Y8G("nzSpan",8),n.R7$(2),n.Y8G("ngIf",p.diffObject.currentObjects.length>0),n.R7$(2),n.Y8G("ngIf",p.diffObject.currentObjects.length>0),n.R7$(),n.Y8G("nzSpan",8),n.R7$(),n.Mz_("nzHeader","Revised ",p.entityType," List"),n.R7$(),n.Y8G("ngForOf",p.diffObject.suggestedObjects),n.R7$(),n.Y8G("ngIf",0===p.diffObject.suggestedObjects.length))},dependencies:[d.YU,d.Sq,d.bT,d.T3,z.eE,z.nt,z.lQ,T.Uq,T.e,Y.s,M.U5,M.Dq,j],styles:["[_nghost-%COMP%]{display:block}nz-list[_ngcontent-%COMP%]   .kept[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{background-color:#f6ffed;color:#135200}nz-list[_ngcontent-%COMP%]   .removed[_ngcontent-%COMP%]{background-color:#fff1f0;color:#820014}nz-list[_ngcontent-%COMP%]   .suggested[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-space[_ngcontent-%COMP%]{width:100%}"]})}}return e})();var jn=o(3245),Mn=o(69062);let Pn=(()=>{class e{constructor(){}ngOnInit(){if(void 0===this.left)throw new Error("Must provide a left side of the diff.");if(void 0===this.right)throw new Error("Must provide a right side of the diff.");if(void 0===this.entityType)throw new Error("Must provide a diff.")}static{this.\u0275fac=function(_){return new(_||e)}}static{this.\u0275cmp=n.VBU({type:e,selectors:[["cvc-revision-value-diff"]],inputs:{currentValue:"currentValue",suggestedValue:"suggestedValue",left:"left",right:"right",entityType:"entityType"},standalone:!1,decls:15,vars:10,consts:[[3,"nzGutter"],[3,"nzSpan"],[3,"innerHtml"],[1,"diff","suggested"],[1,"background"]],template:function(_,p){1&_&&(n.j41(0,"nz-row",0)(1,"nz-col",1)(2,"h4"),n.EFF(3),n.k0s(),n.nrm(4,"div",2),n.k0s(),n.j41(5,"nz-col",1)(6,"h4"),n.EFF(7),n.k0s(),n.nrm(8,"div",2),n.k0s(),n.j41(9,"nz-col",1)(10,"h4"),n.EFF(11),n.k0s(),n.j41(12,"div",3)(13,"div",4),n.EFF(14),n.k0s()()()()),2&_&&(n.Y8G("nzGutter",16),n.R7$(),n.Y8G("nzSpan",8),n.R7$(2),n.SpI("Original ",p.entityType,""),n.R7$(),n.Y8G("innerHtml",p.left,n.npT),n.R7$(),n.Y8G("nzSpan",8),n.R7$(2),n.SpI("",p.entityType," Diff"),n.R7$(),n.Y8G("innerHtml",p.right,n.npT),n.R7$(),n.Y8G("nzSpan",8),n.R7$(2),n.SpI("Revised ",p.entityType,""),n.R7$(3),n.SpI(" ",p.suggestedValue," "))},dependencies:[T.Uq,T.e],styles:[":host{display:block}.diff{overflow:auto;width:100%}.diff .background{padding:4px 8px}.diff.insertions .background{background:#f6ffed;color:#237804}.diff.deletions .background{background:#fff1f0;color:#a8071a}.diff.suggested .background,.diff.original .background{background:#f0f5ff;color:#10239e}.diff del,.diff ins{text-decoration:none}.diff del strong{font-weight:400;background:#fcc}.diff ins strong{font-weight:400;background:#9f9}.diff .del{font-weight:400;background:#fee;color:#b00}.diff .ins{font-weight:400;background:#dfd;color:#080}ul{list-style:none}\n"],encapsulation:2})}}return e})();var An=o(56408),Nn=o(88741),Yn=o(99563),sn=o(7047),Vn=o(90959),Xn=o(39045),Bn=o(86073),kn=o(50311),Un=o(65566),Hn=o(5473),Wn=o(4126),Kn=o(56440),gn=o(74696),Qn=o(23617),Jn=o(61845),wn=o(83075),Zn=o(8139);const mn=(e,l,i,_,p)=>({id:e,name:l,link:i,deprecated:_,flagged:p}),an=(e,l,i,_)=>({id:e,name:l,link:i,deprecated:_}),dn=(e,l,i)=>({id:e,name:l,link:i}),fn=(e,l,i,_,p,C)=>({id:e,name:l,link:i,feature:_,deprecated:p,flagged:C}),qn=(e,l,i,_,p)=>({id:e,name:l,link:i,status:_,flagged:p}),nt=()=>({float:"right"});function tt(e,l){if(1&e){const i=n.RV6();n.j41(0,"nz-alert",17),n.bIt("nzOnClose",function(){const p=n.eBV(i).$implicit,C=n.XpG();return n.Njj(C.onErrorBannerClose(p))}),n.k0s()}2&e&&n.Y8G("nzMessage",l.$implicit)}function et(e,l){if(1&e){const i=n.RV6();n.j41(0,"nz-alert",18),n.bIt("nzOnClose",function(){n.eBV(i);const p=n.XpG();return n.Njj(p.onSuccessBannerClose())}),n.k0s()}if(2&e){const i=n.XpG();n.Mz_("nzMessage","Revision(s) successfully ",i.success,".")}}function rn(e,l){if(1&e&&n.nrm(0,"cvc-feature-tag",29),2&e){const i=l.$implicit;n.Y8G("feature",n.s1E(1,mn,i.id,i.displayName,i.link,i.deprecated,i.flagged))}}function it(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",28),n.DNE(2,rn,1,7,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function ot(e,l){1&e&&n.nrm(0,"cvc-source-tag",31),2&e&&n.Y8G("source",l.$implicit)}function st(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",30),n.DNE(2,ot,1,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function at(e,l){if(1&e&&n.nrm(0,"cvc-disease-tag",33),2&e){const i=l.$implicit;n.Y8G("disease",n.ziG(1,an,i.id,i.displayName,i.link,i.deprecated))}}function rt(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",32),n.DNE(2,at,1,6,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function lt(e,l){if(1&e&&n.nrm(0,"cvc-molecular-profile-tag",35),2&e){const i=l.$implicit;n.Y8G("molecularProfile",n.s1E(1,mn,i.id,i.displayName,i.link,i.deprecated,i.flagged))}}function ct(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",34),n.DNE(2,lt,1,7,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function _t(e,l){if(1&e&&n.nrm(0,"cvc-therapy-tag",37),2&e){const i=l.$implicit;n.Y8G("therapy",n.ziG(1,an,i.id,i.displayName,i.link,i.deprecated))}}function pt(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",36),n.DNE(2,_t,1,6,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function gt(e,l){if(1&e&&n.nrm(0,"cvc-therapy-tag",37),2&e){const i=l.$implicit;n.Y8G("therapy",n.ziG(1,an,i.id,i.displayName,i.link,i.deprecated))}}function mt(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",36),n.DNE(2,gt,1,6,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function dt(e,l){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=l.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function ft(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",38),n.DNE(2,dt,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function ut(e,l){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=l.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function vt(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",39),n.DNE(2,ut,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function zt(e,l){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=l.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function Ct(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",40),n.DNE(2,zt,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function ht(e,l){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=l.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function c(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",41),n.DNE(2,ht,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function g(e,l){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=l.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function r(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",42),n.DNE(2,g,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function m(e,l){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=l.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function v(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",43),n.DNE(2,m,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function A(e,l){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=l.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function ln(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",44),n.DNE(2,A,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function Gt(e,l){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=l.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function St(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",45),n.DNE(2,Gt,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function xt(e,l){if(1&e&&n.nrm(0,"cvc-variant-type-tag",47),2&e){const i=l.$implicit;n.Y8G("variantType",n.sMw(1,dn,i.id,i.displayName,i.link))}}function Dt(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",46),n.DNE(2,xt,1,5,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function It(e,l){if(1&e&&n.nrm(0,"cvc-phenotype-tag",49),2&e){const i=l.$implicit;n.Y8G("phenotype",n.sMw(1,dn,i.id,i.displayName,i.link))}}function $t(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",48),n.DNE(2,It,1,5,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function Ot(e,l){if(1&e&&n.nrm(0,"cvc-feature-variant-tag",51),2&e){const i=l.$implicit;n.Y8G("variant",n.l4e(1,fn,i.id,i.displayName,i.link,i.feature,i.deprecated,i.flagged))}}function Lt(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",50),n.DNE(2,Ot,1,8,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function jt(e,l){if(1&e&&n.nrm(0,"cvc-feature-variant-tag",51),2&e){const i=l.$implicit;n.Y8G("variant",n.l4e(1,fn,i.id,i.displayName,i.link,i.feature,i.deprecated,i.flagged))}}function Mt(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",52),n.DNE(2,jt,1,8,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function Pt(e,l){1&e&&n.nrm(0,"cvc-source-tag",31),2&e&&n.Y8G("source",l.$implicit)}function At(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",53),n.DNE(2,Pt,1,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function Nt(e,l){if(1&e&&n.nrm(0,"cvc-evidence-tag",55),2&e){const i=l.$implicit;n.Y8G("evidence",n.s1E(1,qn,i.id,i.displayName,i.link,i.status,i.flagged))}}function Yt(e,l){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",54),n.DNE(2,Nt,1,7,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function Vt(e,l){if(1&e&&(n.qex(0),n.nrm(1,"cvc-revision-value-diff",56),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("currentValue",i.currentValue)("suggestedValue",i.suggestedValue)("left",i.linkoutData.diffValue.left)("right",i.linkoutData.diffValue.right)("entityType",i.linkoutData.name)}}function Xt(e,l){if(1&e&&(n.qex(0),n.nrm(1,"cvc-comment-body",60),n.bVm()),2&e){const i=n.XpG(2).$implicit;n.R7$(),n.Y8G("commentBodySegments",i.resolutionActivity.parsedNote)}}function Bt(e,l){if(1&e&&n.nrm(0,"cvc-user-tag",61),2&e){const i=n.XpG(2).$implicit;n.Y8G("user",i.resolutionActivity.user)}}function kt(e,l){if(1&e&&(n.qex(0),n.nrm(1,"nz-divider"),n.j41(2,"nz-row")(3,"nz-col",57),n.DNE(4,Xt,2,1,"ng-container",27),n.k0s(),n.j41(5,"nz-col",58),n.EFF(6),n.nI1(7,"enumToTitle"),n.DNE(8,Bt,1,1,"cvc-user-tag",59),n.EFF(9),n.nI1(10,"timeAgo"),n.k0s()(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(4),n.Y8G("ngIf",null==i.resolutionActivity?null:i.resolutionActivity.parsedNote),n.R7$(2),n.SpI(" ",n.bMT(7,4,i.status)," By "),n.R7$(2),n.Y8G("ngIf",void 0!==(null==i.resolutionActivity?null:i.resolutionActivity.user)),n.R7$(),n.SpI(" ",n.bMT(10,6,null==i.resolutionActivity?null:i.resolutionActivity.createdAt)," ")}}function Ut(e,l){if(1&e&&(n.j41(0,"span"),n.nrm(1,"i",63),n.nI1(2,"entityColor"),n.EFF(3),n.j41(4,"span"),n.EFF(5),n.k0s()()),2&e){const i=n.XpG(2).$implicit;n.R7$(),n.Y8G("nzTwotoneColor",n.bMT(2,3,"Revision")),n.R7$(2),n.SpI(" RID",i.id," "),n.R7$(2),n.SpI("",i.linkoutData.name," Updated")}}function Ht(e,l){if(1&e&&n.nrm(0,"i",65),2&e){n.XpG();const i=n.sdS(3);n.Y8G("nzPopoverContent",i)}}function Wt(e,l){if(1&e&&n.nrm(0,"cvc-comment-body",60),2&e){const i=n.XpG(3).$implicit;n.Y8G("commentBodySegments",i.creationActivity.parsedNote)}}function Kt(e,l){1&e&&(n.qex(0),n.DNE(1,Ht,1,1,"i",64)(2,Wt,1,1,"ng-template",null,5,n.C5r),n.bVm())}function Qt(e,l){if(1&e&&(n.j41(0,"nz-space"),n.DNE(1,Ut,6,5,"span",62)(2,Kt,4,0,"ng-container",27),n.k0s()),2&e){const i=n.XpG().$implicit;n.R7$(2),n.Y8G("ngIf",null==i.creationActivity?null:i.creationActivity.parsedNote)}}function Jt(e,l){if(1&e&&(n.j41(0,"span",71),n.EFF(1," for\xa0 "),n.k0s(),n.nrm(2,"cvc-organization-tag",72)),2&e){const i=n.XpG(4).$implicit;n.R7$(2),n.Y8G("org",i.creationActivity.organization)}}function wt(e,l){if(1&e&&(n.qex(0),n.j41(1,"span",71),n.EFF(2," By\xa0 "),n.k0s(),n.nrm(3,"cvc-user-tag",61),n.DNE(4,Jt,3,1),n.bVm()),2&e){const i=n.XpG(3).$implicit;n.R7$(3),n.Y8G("user",i.creationActivity.user),n.R7$(),n.vxM(null!=i.creationActivity&&i.creationActivity.organization?4:-1)}}function Zt(e,l){1&e&&(n.j41(0,"span",71),n.EFF(1,"Submitted"),n.k0s())}function qt(e,l){if(1&e&&(n.j41(0,"span"),n.DNE(1,wt,5,2,"ng-container",70)(2,Zt,2,0,"ng-template",null,6,n.C5r),n.j41(4,"span",71),n.EFF(5),n.nI1(6,"timeAgo"),n.k0s()()),2&e){const i=n.sdS(3),_=n.XpG(2).$implicit;n.R7$(),n.Y8G("ngIf",null==_.creationActivity?null:_.creationActivity.user)("ngIfElse",i),n.R7$(4),n.JRh(n.bMT(6,3,_.createdAt))}}function ne(e,l){if(1&e&&n.nrm(0,"cvc-status-tag",73),2&e){const i=n.XpG(2).$implicit;n.Y8G("status",i.status)}}function te(e,l){1&e&&n.nrm(0,"nz-divider",74)}function ee(e,l){if(1&e){const i=n.RV6();n.j41(0,"a",75),n.bIt("click",function(){n.eBV(i);const p=n.XpG(2).$implicit,C=n.XpG(3);return n.Njj(C.onChangesetSelected(p.revisionSetId))}),n.EFF(1,"Show Group"),n.k0s()}}function ie(e,l){1&e&&n.nrm(0,"nz-divider",74)}function oe(e,l){1&e&&n.nrm(0,"label",77),2&e&&n.Y8G("nzDisabled",!0)}function se(e,l){1&e&&n.nrm(0,"label",79),2&e&&n.Y8G("nzDisabled",!0)}function ae(e,l){if(1&e){const i=n.RV6();n.j41(0,"label",80),n.bIt("nzCheckedChange",function(p){n.eBV(i);const C=n.XpG(5).$implicit,K=n.XpG(3);return n.Njj(K.onRevisionCheckboxClicked(p,C.id))}),n.k0s()}}function re(e,l){if(1&e&&n.DNE(0,se,1,1,"label",78)(1,ae,1,0,"ng-template",null,8,n.C5r),2&e){const i=n.sdS(2),_=n.XpG(4).$implicit,p=n.XpG(2).ngrxLet;n.Y8G("ngIf",p.isCurator&&p.id!=(null==_.creationActivity?null:_.creationActivity.user.id))("ngIfElse",i)}}function le(e,l){if(1&e&&(n.j41(0,"span"),n.DNE(1,oe,1,1,"label",76)(2,re,3,2,"ng-template",null,7,n.C5r),n.k0s()),2&e){const i=n.sdS(3),_=n.XpG(5).ngrxLet;n.R7$(),n.Y8G("ngIf",!_.signedIn)("ngIfElse",i)}}function ce(e,l){1&e&&(n.qex(0),n.DNE(1,ie,1,0,"nz-divider",68)(2,le,4,2,"span",62),n.bVm())}function _e(e,l){if(1&e){const i=n.RV6();n.j41(0,"nz-space",66),n.bIt("click",function(p){return n.eBV(i),n.Njj(p.stopPropagation())}),n.DNE(1,qt,7,5,"span",62)(2,ne,1,1,"cvc-status-tag",67)(3,te,1,0,"nz-divider",68)(4,ee,2,0,"a",69)(5,ce,3,0,"ng-container",27),n.k0s()}if(2&e){const i=n.XpG().$implicit;n.R7$(5),n.Y8G("ngIf","NEW"===i.status)}}function pe(e,l){if(1&e&&(n.j41(0,"nz-collapse-panel",23),n.qex(1,24),n.DNE(2,it,4,1,"ng-container",25)(3,st,4,1,"ng-container",25)(4,rt,4,1,"ng-container",25)(5,ct,4,1,"ng-container",25)(6,pt,4,1,"ng-container",25)(7,mt,4,1,"ng-container",25)(8,ft,4,1,"ng-container",25)(9,vt,4,1,"ng-container",25)(10,Ct,4,1,"ng-container",25)(11,c,4,1,"ng-container",25)(12,r,4,1,"ng-container",25)(13,v,4,1,"ng-container",25)(14,ln,4,1,"ng-container",25)(15,St,4,1,"ng-container",25)(16,Dt,4,1,"ng-container",25)(17,$t,4,1,"ng-container",25)(18,Lt,4,1,"ng-container",25)(19,Mt,4,1,"ng-container",25)(20,At,4,1,"ng-container",25)(21,Yt,4,1,"ng-container",25)(22,Vt,2,5,"ng-container",26),n.bVm(),n.DNE(23,kt,11,8,"ng-container",27)(24,Qt,3,1,"ng-template",null,2,n.C5r)(26,_e,6,1,"ng-template",null,3,n.C5r),n.k0s()),2&e){const i=l.$implicit,_=n.sdS(25),p=n.sdS(27);n.Y8G("nzHeader",_)("nzExtra",p)("nzActive",!0),n.R7$(),n.Y8G("ngSwitch",i.fieldName),n.R7$(),n.Y8G("ngSwitchCase","feature_id"),n.R7$(),n.Y8G("ngSwitchCase","source_ids"),n.R7$(),n.Y8G("ngSwitchCase","disease_id"),n.R7$(),n.Y8G("ngSwitchCase","molecular_profile_id"),n.R7$(),n.Y8G("ngSwitchCase","drug_ids"),n.R7$(),n.Y8G("ngSwitchCase","therapy_ids"),n.R7$(),n.Y8G("ngSwitchCase","variant_alias_ids"),n.R7$(),n.Y8G("ngSwitchCase","feature_alias_ids"),n.R7$(),n.Y8G("ngSwitchCase","molecular_profile_alias_ids"),n.R7$(),n.Y8G("ngSwitchCase","clinvar_entry_ids"),n.R7$(),n.Y8G("ngSwitchCase","clingen_code_ids"),n.R7$(),n.Y8G("ngSwitchCase","acmg_code_ids"),n.R7$(),n.Y8G("ngSwitchCase","nccn_guideline_id"),n.R7$(),n.Y8G("ngSwitchCase","hgvs_description_ids"),n.R7$(),n.Y8G("ngSwitchCase","variant_type_ids"),n.R7$(),n.Y8G("ngSwitchCase","phenotype_ids"),n.R7$(),n.Y8G("ngSwitchCase","variant_id"),n.R7$(),n.Y8G("ngSwitchCase","variant_ids"),n.R7$(),n.Y8G("ngSwitchCase","source_id"),n.R7$(),n.Y8G("ngSwitchCase","evidence_item_ids"),n.R7$(2),n.Y8G("ngIf","NEW"!==i.status)}}function ge(e,l){if(1&e&&(n.j41(0,"nz-collapse",21),n.DNE(1,pe,28,25,"nz-collapse-panel",22),n.k0s()),2&e){const i=n.XpG(2);n.R7$(),n.Y8G("ngForOf",i.untypedRevisons)}}function me(e,l){1&e&&n.nrm(0,"nz-empty",81)}function de(e,l){if(1&e&&(n.qex(0),n.j41(1,"nz-card",19),n.DNE(2,ge,2,1,"nz-collapse",20)(3,me,1,0,"ng-template",null,1,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.sdS(4),_=n.XpG(),p=n.sdS(4);n.R7$(),n.Y8G("nzExtra",p),n.R7$(),n.Y8G("ngIf",_.revisions&&_.revisions.length>0)("ngIfElse",i)}}function fe(e,l){}function ue(e,l){1&e&&n.DNE(0,fe,0,0,"ng-template")}function ve(e,l){if(1&e&&(n.qex(0),n.DNE(1,ue,1,0,null,85),n.bVm()),2&e){n.XpG();const i=n.sdS(5);n.R7$(),n.Y8G("ngTemplateOutlet",i)}}function ze(e,l){}function Ce(e,l){1&e&&n.DNE(0,ze,0,0,"ng-template")}function he(e,l){if(1&e&&(n.j41(0,"span",86),n.DNE(1,Ce,1,0,null,85),n.k0s()),2&e){n.XpG();const i=n.sdS(5);n.R7$(),n.Y8G("ngTemplateOutlet",i)}}function Re(e,l){if(1&e){const i=n.RV6();n.j41(0,"button",87),n.mxI("nzPopoverVisibleChange",function(p){n.eBV(i);const C=n.XpG(7);return n.DH7(C.validationPopoverVisible,p)||(C.validationPopoverVisible=p),n.Njj(p)}),n.bIt("click",function(){n.eBV(i);const p=n.XpG(7);return n.Njj(p.validationPopoverVisible=!p.validationPopoverVisible)}),n.EFF(1," Review Selected Revisions "),n.nrm(2,"i",88),n.k0s()}if(2&e){const i=n.XpG(2).ngrxLet,_=n.sdS(7),p=n.sdS(9),C=n.XpG(5);n.Y8G("nzPopoverTitle",_),n.R50("nzPopoverVisible",C.validationPopoverVisible),n.Y8G("nzPopoverContent",p)("nzPopoverTrigger",void 0)("disabled",0===C.selectedRevisionIds.length||!i.signedIn)}}function Te(e,l){if(1&e&&(n.j41(0,"span"),n.DNE(1,ve,2,1,"ng-container",70)(2,he,2,1,"ng-template",null,12,n.C5r)(4,Re,3,5,"ng-template",null,13,n.C5r),n.k0s()),2&e){const i=n.sdS(3),_=n.XpG().ngrxLet;n.R7$(),n.Y8G("ngIf",_.signedIn)("ngIfElse",i)}}function Ee(e,l){if(1&e&&n.nrm(0,"i",90),2&e){n.XpG(4);const i=n.sdS(3);n.Y8G("nzPopoverContent",i)}}function be(e,l){1&e&&(n.qex(0),n.DNE(1,Ee,1,1,"i",89),n.bVm())}function ye(e,l){if(1&e){const i=n.RV6();n.EFF(0," Review Selected Revisions "),n.j41(1,"span",91)(2,"i",92),n.bIt("click",function(){n.eBV(i);const p=n.XpG(6);return n.Njj(p.validationPopoverVisible=!1)}),n.k0s()()}2&e&&(n.R7$(),n.Y8G("ngStyle",n.lJ4(1,nt)))}function Fe(e,l){if(1&e){const i=n.RV6();n.j41(0,"cvc-comment-input-form",95),n.mxI("commentChange",function(p){n.eBV(i);const C=n.XpG(7);return n.DH7(C.revisionComment,p)||(C.revisionComment=p),n.Njj(p)}),n.k0s()}if(2&e){const i=n.XpG(7);n.R50("comment",i.revisionComment)}}function Ge(e,l){if(1&e){const i=n.RV6();n.j41(0,"span")(1,"button",96),n.bIt("click",function(){n.eBV(i);const p=n.XpG(8);return n.Njj(p.onRejectRevisionsClicked())}),n.EFF(2," Reject Revision "),n.k0s()()}if(2&e){const i=n.XpG(8);n.R7$(),n.Y8G("nzLoading",i.isLoading)("disabled",void 0===i.revisionComment||i.revisionComment.length<10)("nzTooltipTrigger",i.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==i.mostRecentOrg?null:i.mostRecentOrg.name))}}function Se(e,l){if(1&e){const i=n.RV6();n.j41(0,"span")(1,"button",97),n.bIt("click",function(){n.eBV(i);const p=n.XpG(8);return n.Njj(p.onAcceptRevisionClicked())}),n.EFF(2," Accept Revision "),n.k0s()()}if(2&e){const i=n.XpG(4).ngrxLet,_=n.XpG(4);n.R7$(),n.Y8G("nzLoading",_.isLoading)("disabled",!(0==i&&(void 0===_.revisionComment||""===_.revisionComment||_.revisionComment.length>=10)))("nzTooltipTrigger",_.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==_.mostRecentOrg?null:_.mostRecentOrg.name))}}function xe(e,l){if(1&e&&n.nrm(0,"i",99),2&e){n.XpG(6);const i=n.sdS(3);n.Y8G("nzPopoverContent",i)}}function De(e,l){if(1&e&&(n.j41(0,"span"),n.DNE(1,xe,1,1,"i",98),n.k0s()),2&e){const i=n.XpG(4).ngrxLet;n.R7$(),n.Y8G("ngIf",i&&i>0)}}function Ie(e,l){1&e&&(n.j41(0,"span")(1,"nz-space"),n.DNE(2,Ge,3,4,"span",62)(3,Se,3,4,"span",62)(4,De,2,1,"span",62),n.k0s()())}function $e(e,l){1&e&&(n.j41(0,"nz-space",93),n.DNE(1,Fe,1,1,"cvc-comment-input-form",94)(2,Ie,5,0,"span",62),n.k0s())}function Oe(e,l){if(1&e&&(n.qex(0),n.j41(1,"div",82)(2,"div",83)(3,"nz-space",84),n.DNE(4,Te,6,2,"span",62)(5,be,2,0,"ng-container",27),n.k0s(),n.DNE(6,ye,3,2,"ng-template",null,10,n.C5r)(8,$e,3,0,"ng-template",null,11,n.C5r),n.k0s()(),n.bVm()),2&e){const i=n.XpG().ngrxLet;n.R7$(5),n.Y8G("ngIf",i&&i>0)}}function Le(e,l){if(1&e&&(n.qex(0),n.DNE(1,Oe,10,1,"ng-container",16),n.bVm()),2&e){const i=n.XpG(4);n.R7$(),n.Y8G("ngrxLet",i.viewer$)}}function je(e,l){if(1&e&&(n.j41(0,"nz-list-item"),n.EFF(1),n.k0s()),2&e){const i=l.$implicit;n.R7$(),n.JRh(i)}}function Me(e,l){if(1&e&&(n.j41(0,"nz-card",101)(1,"nz-list",102),n.DNE(2,je,2,1,"nz-list-item",103),n.k0s()()),2&e){const i=n.XpG(3).ngrxLet;n.R7$(2),n.Y8G("ngForOf",i)}}function Pe(e,l){if(1&e&&(n.j41(0,"span"),n.DNE(1,Me,3,1,"nz-card",100),n.k0s()),2&e){const i=n.XpG(2).ngrxLet;n.R7$(),n.Y8G("ngIf",i&&i.length>0)}}function Ae(e,l){if(1&e&&(n.j41(0,"nz-descriptions-item",108),n.EFF(1),n.k0s()),2&e){const i=l.$implicit;n.Y8G("nzTitle",i.fieldName),n.R7$(),n.JRh(i.error)}}function Ne(e,l){if(1&e&&(n.j41(0,"nz-card",105)(1,"nz-descriptions",106),n.DNE(2,Ae,2,2,"nz-descriptions-item",107),n.k0s()()),2&e){const i=n.XpG(4).ngrxLet;n.R7$(2),n.Y8G("ngForOf",i)}}function Ye(e,l){if(1&e&&(n.j41(0,"span"),n.DNE(1,Ne,3,1,"nz-card",104),n.k0s()),2&e){const i=n.XpG(3).ngrxLet;n.R7$(),n.Y8G("ngIf",i&&i.length>0)}}function Ve(e,l){1&e&&(n.j41(0,"nz-space",93),n.DNE(1,Pe,2,1,"span",62)(2,Ye,2,1,"span",62),n.k0s())}function Xe(e,l){if(1&e&&(n.qex(0),n.DNE(1,Le,2,1,"ng-container",16)(2,Ve,3,0,"ng-template",null,9,n.C5r),n.bVm()),2&e){const i=n.XpG(3);n.R7$(),n.Y8G("ngrxLet",i.totalErrorCount$)}}function Be(e,l){if(1&e&&(n.qex(0),n.DNE(1,Xe,4,1,"ng-container",16),n.bVm()),2&e){const i=n.XpG(2);n.R7$(),n.Y8G("ngrxLet",i.genericErrors$)}}function ke(e,l){if(1&e&&n.DNE(0,Be,2,1,"ng-container",16),2&e){const i=n.XpG();n.Y8G("ngrxLet",i.validationErrors$)}}let Ue=(()=>{class e{constructor(i,_,p,C,K){this.viewerService=i,this.networkErrorService=_,this.acceptRevisionsGql=p,this.rejectRevisionsGql=C,this.validationGql=K,this.refetchQueries=[],this.selectedRevisionIds=[],this.isLoading=!1,this.success=!1,this.validationPopoverVisible=!1,this.destroy$=new V.B,this.revisionSetSelectedEvent=new n.bkB,this.revisionMutationCompleted=new n.bkB,this.acceptRevisionsMutator=new I.E(this.networkErrorService),this.rejectRevisionsMutator=new I.E(this.networkErrorService),this.viewer$=this.viewerService.viewer$}ngOnChanges(i){this.untypedRevisons=this.revisions,this.selectedRevisionIds=[],this.queryRef&&this.queryRef.refetch({ids:this.selectedRevisionIds})}ngOnInit(){this.viewerService.viewer$.subscribe(i=>{this.mostRecentOrg=i.mostRecentOrg}),this.queryRef=this.validationGql.watch({ids:[]}),this.genericErrors$=this.queryRef.valueChanges.pipe((0,y.E)("data","validateRevisionsForAcceptance","genericErrors"),(0,S.p)(U.kP),(0,b.Z)([])),this.validationErrors$=this.queryRef.valueChanges.pipe((0,y.E)("data","validateRevisionsForAcceptance","validationErrors"),(0,S.p)(U.kP),(0,b.Z)([])),this.totalErrorCount$=(0,X.z)([this.genericErrors$,this.validationErrors$]).pipe((0,s.T)(([i,_])=>i.length+_.length),(0,b.Z)(0)),this.untypedRevisons=this.revisions}onChangesetSelected(i){this.revisionSetSelectedEvent.emit(i)}onRevisionCheckboxClicked(i,_){i?this.selectedRevisionIds.push(_):this.selectedRevisionIds=this.selectedRevisionIds.filter(p=>p!=_),this.queryRef.refetch({ids:this.selectedRevisionIds})}setupMutationResultHandlers(i,_){i.submitSuccess$.pipe((0,P.Q)(this.destroy$)).subscribe(p=>{p&&(this.isLoading=!1,this.revisionMutationCompleted.emit(),this.errors=void 0,this.success=_,this.validationPopoverVisible=!1,this.selectedRevisionIds=[],this.revisionComment=void 0)}),i.submitError$.pipe((0,P.Q)(this.destroy$)).subscribe(p=>{p.length>0&&(this.isLoading=!1,this.success=!1,this.errors=p,this.validationPopoverVisible=!1,this.selectedRevisionIds=[])})}onRejectRevisionsClicked(){if(this.revisionComment&&""!==this.revisionComment){this.isLoading=!0;let i=this.rejectRevisionsMutator.mutate(this.rejectRevisionsGql,{input:{ids:this.selectedRevisionIds,organizationId:this.mostRecentOrg?.id,comment:this.revisionComment}},{refetchQueries:this.refetchQueries});this.setupMutationResultHandlers(i,"rejected")}}onAcceptRevisionClicked(){this.isLoading=!0;let i=this.acceptRevisionsMutator.mutate(this.acceptRevisionsGql,{input:{ids:this.selectedRevisionIds,organizationId:this.mostRecentOrg?.id,comment:""===this.revisionComment?void 0:this.revisionComment}},{refetchQueries:this.refetchQueries});this.setupMutationResultHandlers(i,"accepted")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(i){this.errors=this.errors?.filter(_=>_!=i)}onSuccessBannerClose(){this.success=!1}static{this.\u0275fac=function(_){return new(_||e)(n.rXU(h.q),n.rXU(u.N),n.rXU(a.QZR),n.rXU(a.BMV),n.rXU(a.ZFx))}}static{this.\u0275cmp=n.VBU({type:e,selectors:[["cvc-revision-list"]],inputs:{revisions:"revisions",refetchQueries:"refetchQueries"},outputs:{revisionSetSelectedEvent:"revisionSetSelectedEvent",revisionMutationCompleted:"revisionMutationCompleted"},standalone:!1,features:[n.OA$],decls:5,vars:3,consts:[["moderationButtons",""],["noRevisions",""],["revCardHeaderTitle",""],["revCardHeaderExtra",""],["itemTemplate",""],["creationCommentTemplate",""],["noRevisor",""],["loggedIn",""],["canRevise",""],["validationErrorTemplate",""],["validationPopoverTitleTemplate",""],["validationPopoverContentTemplate",""],["notSignedIn",""],["submitButton",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],[4,"ngrxLet"],["nzBanner","","nzType","error","nzCloseable","",3,"nzOnClose","nzMessage"],["nzBanner","","nzType","success","nzCloseable","",3,"nzOnClose","nzMessage"],["nzTitle","Revisions",1,"card-list",3,"nzExtra"],["class","revision-list",4,"ngIf","ngIfElse"],[1,"revision-list"],[3,"nzHeader","nzExtra","nzActive",4,"ngFor","ngForOf"],[3,"nzHeader","nzExtra","nzActive"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"],["entityType","Feature",3,"diffObject"],[3,"feature"],["entityType","Sources",3,"diffObject"],[3,"source"],["entityType","Disease",3,"diffObject"],[3,"disease"],["entityType","Molecular Profile",3,"diffObject"],[3,"molecularProfile"],["entityType","Therapies",3,"diffObject"],[3,"therapy"],["entityType","Variant Aliases",3,"diffObject"],["entityType","Feature Aliases",3,"diffObject"],["entityType","Molecular Profile Aliases",3,"diffObject"],["entityType","ClinVar Entries",3,"diffObject"],["entityType","ClinGen/CGC/VICC Code(s)",3,"diffObject"],["entityType","ACMG/AMP Code(s)",3,"diffObject"],["entityType","NCCN Guideline",3,"diffObject"],["entityType","HGVS Descriptions",3,"diffObject"],["entityType","Variant Types",3,"diffObject"],[3,"variantType"],["entityType","Phenotypes",3,"diffObject"],[3,"phenotype"],["entityType","Variant",3,"diffObject"],[3,"variant"],["entityType","Variants",3,"diffObject"],["entityType","Source",3,"diffObject"],["entityType","Evidence",3,"diffObject"],[3,"evidence"],[3,"currentValue","suggestedValue","left","right","entityType"],["nzSpan","16"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"commentBodySegments"],[3,"user"],[4,"nzSpaceItem"],["nz-icon","","nzTheme","twotone","nzType","civic-revision",3,"nzTwotoneColor"],["nz-popover","","nz-icon","","nzType","comment","nzTheme","outline",3,"nzPopoverContent",4,"nzSpaceItem"],["nz-popover","","nz-icon","","nzType","comment","nzTheme","outline",3,"nzPopoverContent"],["nzSize","small",3,"click"],[3,"status",4,"nzSpaceItem"],["nzType","vertical",4,"nzSpaceItem"],["nz-button","","nzType","link",3,"click",4,"nzSpaceItem"],[4,"ngIf","ngIfElse"],["nz-typography","","nzType","secondary"],[3,"org"],[3,"status"],["nzType","vertical"],["nz-button","","nzType","link",3,"click"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions.",3,"nzDisabled",4,"ngIf","ngIfElse"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions.",3,"nzDisabled"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Curators may only reject their own revisions.",3,"nzDisabled",4,"ngIf","ngIfElse"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Curators may only reject their own revisions.",3,"nzDisabled"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Select Revision for Acceptance/Rejection",3,"nzCheckedChange"],["nzNotFoundImage","simple","nzNotFoundContent","No Revisions matching filters"],["nz-row","",2,"margin-top","1em"],["nz-col","","nzSpan","24",2,"text-align","right"],["nzDirection","horizontal"],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverVisibleChange","click","nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled"],["nz-icon","","nzType","caret-down","nzTheme","outline"],["nz-icon","","nzType","exclamation-circle","nzTheme","twotone","nzTwotoneColor","red","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent",4,"nzSpaceItem"],["nz-icon","","nzType","exclamation-circle","nzTheme","twotone","nzTwotoneColor","red","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzDirection","vertical"],[3,"comment","commentChange",4,"nzSpaceItem"],[3,"commentChange","comment"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzSize","small","nzDanger","","nz-tooltip","",3,"click","nzLoading","disabled","nzTooltipTrigger","nzTooltipTitle"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzSize","small","nz-tooltip","",3,"click","nzLoading","disabled","nzTooltipTrigger","nzTooltipTitle"],["nz-icon","","nzTwotoneColor","red","nzType","exclamation-circle","nzTheme","twotone","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent",4,"ngIf"],["nz-icon","","nzTwotoneColor","red","nzType","exclamation-circle","nzTheme","twotone","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent"],["nzTitle","Errors",4,"ngIf"],["nzTitle","Errors"],["nzSize","small"],[4,"ngFor","ngForOf"],["nzTitle","Validation Errors",4,"ngIf"],["nzTitle","Validation Errors"],["nzBordered",""],[3,"nzTitle",4,"ngFor","ngForOf"],[3,"nzTitle"]],template:function(_,p){1&_&&n.DNE(0,tt,1,1,"nz-alert",14)(1,et,1,2,"nz-alert",15)(2,de,5,3,"ng-container",16)(3,ke,1,1,"ng-template",null,0,n.C5r),2&_&&(n.Y8G("ngForOf",p.errors),n.R7$(),n.Y8G("ngIf",p.success),n.R7$(),n.Y8G("ngrxLet",p.viewer$))},dependencies:[d.Sq,d.bT,d.T3,d.B3,d.ux,d.e1,d.fG,T.Uq,T.e,z.eE,z.lQ,R.cK,M.U5,M.Dq,Y.s,D.Di,W.RW,$.$g,O.j,J.LH,nn.L_,Q.Dn,tn.xA,tn.gr,Ln,jn._,Mn.D,Pn,An.r,Nn.Y,Yn.R,sn.A,Vn.j,Xn.J,Bn.h,kn.g,Un.K,Hn.z,Wn.p,Kn.r,gn.Vz,gn.pc,k.aO,x.c,H.p,Qn.Y,f.Nj,Jn.f,wn.R,Zn.N],styles:["[_nghost-%COMP%]{display:block}nz-list[_ngcontent-%COMP%]   .kept[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{background-color:#f6ffed;color:#135200}nz-list[_ngcontent-%COMP%]   .removed[_ngcontent-%COMP%]{background-color:#fff1f0;color:#820014}nz-list[_ngcontent-%COMP%]   .suggested[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}"]})}}return e})();const Rt=()=>[];function He(e,l){if(1&e){const i=n.RV6();n.j41(0,"cvc-revision-list",16),n.nI1(1,"ngrxPush"),n.bIt("revisionSetSelectedEvent",function(p){n.eBV(i);const C=n.XpG(2);return n.Njj(C.onRevisionSetSelected(p))})("revisionMutationCompleted",function(){n.eBV(i);const p=n.XpG(2);return n.Njj(p.refresh())}),n.k0s()}if(2&e){const i=n.XpG(2);n.Y8G("revisions",n.bMT(1,2,i.revisions$))("refetchQueries",i.refetchQueries)}}function We(e,l){if(1&e){const i=n.RV6();n.j41(0,"button",19),n.bIt("click",function(){n.eBV(i);const p=n.XpG(2).ngrxLet,C=n.XpG(2);return n.Njj(C.loadMore(null==p?null:p.endCursor))}),n.EFF(1," Load More "),n.k0s()}}function Ke(e,l){1&e&&(n.qex(0),n.DNE(1,We,2,0,"button",18),n.bVm())}function Qe(e,l){if(1&e&&(n.qex(0),n.DNE(1,Ke,2,0,"ng-container",17),n.bVm()),2&e){const i=l.ngrxLet;n.R7$(),n.Y8G("ngIf",i&&(null==i?null:i.hasNextPage)&&i.endCursor)}}function Je(e,l){if(1&e){const i=n.RV6();n.j41(0,"nz-row")(1,"nz-tag",21),n.bIt("nzOnClose",function(){n.eBV(i);const p=n.XpG(3);return n.Njj(p.onSetFilterClearClicked())}),n.EFF(2),n.k0s()()}if(2&e){const i=n.XpG(3);n.R7$(2),n.SpI("Group: ",i.filteredSet,"")}}function we(e,l){1&e&&(n.j41(0,"nz-space",7),n.DNE(1,Je,3,1,"nz-row",20),n.k0s())}function Ze(e,l){if(1&e&&(n.j41(0,"span"),n.EFF(1),n.k0s()),2&e){const i=l.$implicit;n.R7$(),n.JRh(i.displayName)}}function qe(e,l){if(1&e&&n.nrm(0,"nz-avatar",23),2&e){const i=n.XpG().$implicit;n.Y8G("nzSrc",i.profileImagePath)}}function ni(e,l){if(1&e&&(n.nrm(0,"nz-avatar",24),n.nI1(1,"uppercase")),2&e){const i=n.XpG().$implicit;n.Y8G("nzText",n.bMT(1,1,i.username.charAt(0)))}}function ti(e,l){if(1&e&&(n.DNE(0,qe,1,1,"nz-avatar",22)(1,ni,2,3,"ng-template",null,2,n.C5r),n.j41(3,"span"),n.EFF(4),n.k0s()),2&e){const i=l.$implicit,_=n.sdS(2);n.Y8G("ngIf",i.profileImagePath)("ngIfElse",_),n.R7$(4),n.JRh(i.username)}}function ei(e,l){if(1&e&&(n.j41(0,"span"),n.EFF(1),n.k0s()),2&e){const i=l.$implicit;n.R7$(),n.JRh(i.displayName)}}function ii(e,l){if(1&e&&n.nrm(0,"nz-avatar",23),2&e){const i=n.XpG().$implicit;n.Y8G("nzSrc",i.profileImagePath)}}function oi(e,l){if(1&e&&(n.nrm(0,"nz-avatar",24),n.nI1(1,"uppercase")),2&e){const i=n.XpG().$implicit;n.Y8G("nzText",n.bMT(1,1,i.username.charAt(0)))}}function si(e,l){if(1&e&&(n.DNE(0,ii,1,1,"nz-avatar",22)(1,oi,2,3,"ng-template",null,2,n.C5r),n.j41(3,"span"),n.EFF(4),n.k0s()),2&e){const i=l.$implicit,_=n.sdS(2);n.Y8G("ngIf",i.profileImagePath)("ngIfElse",_),n.R7$(4),n.JRh(i.username)}}function ai(e,l){if(1&e){const i=n.RV6();n.qex(0),n.j41(1,"nz-row",5)(2,"nz-col",6)(3,"nz-space",7),n.DNE(4,He,2,4,"cvc-revision-list",8)(5,Qe,2,1,"ng-container",9),n.k0s()(),n.j41(6,"nz-col",10),n.DNE(7,we,2,0,"nz-space",11),n.j41(8,"cvc-participant-list",12),n.bIt("participantSelectedEvent",function(p){n.eBV(i);const C=n.XpG();return n.Njj(C.onStatusSelected(p))}),n.DNE(9,Ze,2,1,"ng-template",null,1,n.C5r),n.k0s(),n.j41(11,"cvc-participant-list",13),n.nI1(12,"ngrxPush"),n.bIt("participantSelectedEvent",function(p){n.eBV(i);const C=n.XpG();return n.Njj(C.onRevisorSelected(p))}),n.DNE(13,ti,5,3,"ng-template",null,1,n.C5r),n.k0s(),n.j41(15,"cvc-participant-list",14),n.nI1(16,"ngrxPush"),n.bIt("participantSelectedEvent",function(p){n.eBV(i);const C=n.XpG();return n.Njj(C.onFieldNameSelected(p))}),n.DNE(17,ei,2,1,"ng-template",null,1,n.C5r),n.k0s(),n.j41(19,"cvc-participant-list",15),n.nI1(20,"ngrxPush"),n.bIt("participantSelectedEvent",function(p){n.eBV(i);const C=n.XpG();return n.Njj(C.onResolverSelected(p))}),n.DNE(21,si,5,3,"ng-template",null,1,n.C5r),n.k0s()()(),n.bVm()}if(2&e){const i=n.XpG();n.R7$(),n.Y8G("nzGutter",16),n.R7$(4),n.Y8G("ngrxLet",i.pageInfo$),n.R7$(2),n.Y8G("ngIf",i.filteredSet),n.R7$(),n.Y8G("preselectedOption",i.preselectedRevisionStatus)("participantList",i.selectableStatuses),n.R7$(3),n.Y8G("participantList",n.bMT(12,8,i.uniqueRevisors$)||n.lJ4(14,Rt)),n.R7$(4),n.Y8G("participantList",n.bMT(16,10,i.revisionFields$)||n.lJ4(15,Rt)),n.R7$(4),n.Y8G("participantList",n.bMT(20,12,i.uniqueResolvers$)||n.lJ4(16,Rt))}}function ri(e,l){1&e&&(n.qex(0),n.j41(1,"nz-row",25),n.nrm(2,"i",26),n.k0s(),n.bVm())}function li(e,l){1&e&&n.nrm(0,"nz-empty",27)}function ci(e,l){if(1&e&&(n.DNE(0,ri,3,0,"ng-container",4),n.nI1(1,"ngrxPush"),n.DNE(2,li,1,0,"ng-template",null,3,n.C5r)),2&e){const i=n.sdS(3),_=n.XpG();n.Y8G("ngIf",n.bMT(1,2,_.isLoading$))("ngIfElse",i)}}let _i=(()=>{class e{constructor(i,_,p,C,K,cn,Tt,pi,gi,mi,di,fi,ui,vi){this.gql=i,this.route=_,this.variantDetailGql=p,this.variantSummaryGql=C,this.variantGroupDetailGql=K,this.variantGroupSummaryGql=cn,this.assertionDetailGql=Tt,this.assertionSummaryGql=pi,this.featureDetailGql=gi,this.featureSummaryGql=mi,this.evidenceDetailGql=di,this.evidenceSummaryGql=fi,this.molecularProfileDetailGql=ui,this.molecularProfileSummaryGql=vi,this.filteredSet=void 0,this.selectableStatuses=[{id:4,displayName:"New",value:a.W14.New},{id:1,displayName:"Accepted",value:a.W14.Accepted},{id:2,displayName:"Rejected",value:a.W14.Rejected},{id:3,displayName:"Superseded",value:a.W14.Superseded}],this.preselectedRevisionStatus=this.selectableStatuses[0],this.defaultPageSize=10,this.refetchQueries=[]}ngOnInit(){switch(this.routeSub=this.route.params.subscribe(i=>{this.queryParamsSub=this.route.queryParams.subscribe(_=>{let p={first:this.defaultPageSize,subject:this.moderated,status:a.W14.New};_.revisionSetId&&(this.filteredSet=+_.revisionSetId,this.preselectedRevisionStatus=void 0,p.status=void 0,p.revisionSetId=+_.revisionSetId),this.queryRef=this.gql.watch(p);let C=this.queryRef.valueChanges;this.revisions$=C.pipe((0,y.E)("data","revisions","edges"),(0,s.T)(K=>K.map(cn=>cn.node))),this.isLoading$=C.pipe((0,s.T)(K=>K.loading),(0,b.Z)(!0)),this.pageInfo$=C.pipe((0,y.E)("data","revisions","pageInfo")),this.uniqueRevisors$=C.pipe((0,s.T)(({data:K})=>K.revisions?.uniqueRevisors)),this.uniqueResolvers$=C.pipe((0,s.T)(({data:K})=>K.revisions?.uniqueResolvers)),this.revisionFields$=C.pipe((0,s.T)(({data:K})=>K.revisions?.revisedFieldNames.map((cn,Tt)=>({...cn,id:Tt})))),this.unfilteredCount$=C.pipe((0,y.E)("data","revisions","unfilteredCountForSubject"))})}),this.moderated.entityType){case a.BlQ.Variant:return this.refetchQueries.push({query:this.variantDetailGql.document,variables:{variantId:this.moderated.id}}),void this.refetchQueries.push({query:this.variantSummaryGql.document,variables:{variantId:this.moderated.id}});case a.BlQ.Assertion:return this.refetchQueries.push({query:this.assertionDetailGql.document,variables:{assertionId:this.moderated.id}}),void this.refetchQueries.push({query:this.assertionSummaryGql.document,variables:{assertionId:this.moderated.id}});case a.BlQ.EvidenceItem:return this.refetchQueries.push({query:this.evidenceDetailGql.document,variables:{evidenceId:this.moderated.id}}),void this.refetchQueries.push({query:this.evidenceSummaryGql.document,variables:{evidenceId:this.moderated.id}});case a.BlQ.Feature:return this.refetchQueries.push({query:this.featureDetailGql.document,variables:{featureId:this.moderated.id}}),void this.refetchQueries.push({query:this.featureSummaryGql.document,variables:{featureId:this.moderated.id}});case a.BlQ.VariantGroup:return this.refetchQueries.push({query:this.variantGroupDetailGql.document,variables:{variantGroupId:this.moderated.id}}),void this.refetchQueries.push({query:this.variantGroupSummaryGql.document,variables:{variantGroupId:this.moderated.id}});case a.BlQ.MolecularProfile:return this.refetchQueries.push({query:this.molecularProfileDetailGql.document,variables:{molecularProfileId:this.moderated.id}}),void this.refetchQueries.push({query:this.molecularProfileSummaryGql.document,variables:{molecularProfileId:this.moderated.id}})}}ngOnDestroy(){this.routeSub?.unsubscribe(),this.queryParamsSub?.unsubscribe()}onFieldNameSelected(i){this.queryRef.refetch({subject:this.moderated,fieldName:i?i.name:void 0})}onRevisorSelected(i){this.queryRef.refetch({subject:this.moderated,originatingUserId:i?i.id:void 0})}onResolverSelected(i){this.queryRef.refetch({subject:this.moderated,resolvingUserId:i?i.id:void 0})}onStatusSelected(i){this.preselectedRevisionStatus=i,this.queryRef.refetch({subject:this.moderated,status:i?i.value:void 0})}onRevisionSetSelected(i){this.filteredSet=i,this.queryRef.refetch({subject:this.moderated,revisionSetId:i||void 0})}onSetFilterClearClicked(){this.filteredSet=void 0,this.queryRef.refetch({subject:this.moderated,revisionSetId:void 0})}refresh(){this.queryRef.refetch()}loadMore(i){this.queryRef?.fetchMore({variables:{first:this.defaultPageSize,after:i}})}static{this.\u0275fac=function(_){return new(_||e)(n.rXU(a.xPr),n.rXU(t.nX),n.rXU(a.N47),n.rXU(a.yLZ),n.rXU(a.IbX),n.rXU(a.sAe),n.rXU(a.kKs),n.rXU(a.fqJ),n.rXU(a.ULh),n.rXU(a.gUZ),n.rXU(a.fQd),n.rXU(a.Ype),n.rXU(a.Tj8),n.rXU(a.SPr))}}static{this.\u0275cmp=n.VBU({type:e,selectors:[["cvc-revisions-list-and-filter"]],inputs:{moderated:"moderated"},standalone:!1,decls:4,vars:4,consts:[["noRevisions",""],["itemTemplate",""],["noAvatar",""],["noneFound",""],[4,"ngIf","ngIfElse"],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"revisions","refetchQueries","revisionSetSelectedEvent","revisionMutationCompleted",4,"nzSpaceItem"],[4,"ngrxLet"],["nzSpan","6"],["nzDirection","vertical",4,"ngIf"],["listTitle","Filter by Revision Status",3,"participantSelectedEvent","preselectedOption","participantList"],["listTitle","Filter by Revisor",3,"participantSelectedEvent","participantList"],["listTitle","Filter by Field",3,"participantSelectedEvent","participantList"],["listTitle","Filter by Resolver",3,"participantSelectedEvent","participantList"],[3,"revisionSetSelectedEvent","revisionMutationCompleted","revisions","refetchQueries"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[4,"nzSpaceItem"],["nzMode","closeable",3,"nzOnClose"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["nzJustify","center"],["nz-icon","","nzType","loading",2,"font-size","32px"],["nzNotFoundImage","simple","nzNotFoundContent","Entity has no Revisions"]],template:function(_,p){if(1&_&&(n.DNE(0,ai,23,17,"ng-container",4),n.nI1(1,"ngrxPush"),n.DNE(2,ci,4,4,"ng-template",null,0,n.C5r)),2&_){const C=n.sdS(3);n.Y8G("ngIf",n.bMT(1,2,p.unfilteredCount$))("ngIfElse",C)}},dependencies:[d.bT,f.Nj,T.Uq,T.e,M.U5,M.Dq,Y.s,G.PM,W.RW,k.aO,x.c,H.p,Q.Dn,E.T,Ue,d.Pc,f.L9],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]})}}return e})()},74696:(Z,N,o)=>{o.d(N,{GB:()=>U,Vz:()=>P,pc:()=>X});var a=o(31635),s=o(54438),b=o(56977),y=o(5964),n=o(40713),t=o(66376),d=o(26841),f=o(57806),T=o(21025),M=o(70317),Y=o(41951),G=o(28203);const W=["*"],k=["collapseHeader"];function x(h,u){if(1&h&&(s.qex(0),s.nrm(1,"span",7),s.bVm()),2&h){const z=u.$implicit,R=s.XpG(2);s.R7$(),s.Y8G("nzType",z||"right")("nzRotate",R.nzActive?90:0)}}function H(h,u){if(1&h&&(s.j41(0,"div"),s.DNE(1,x,2,2,"ng-container",3),s.k0s()),2&h){const z=s.XpG();s.R7$(),s.Y8G("nzStringTemplateOutlet",z.nzExpandedIcon)}}function Q(h,u){if(1&h&&(s.qex(0),s.EFF(1),s.bVm()),2&h){const z=s.XpG();s.R7$(),s.JRh(z.nzHeader)}}function E(h,u){if(1&h&&(s.qex(0),s.EFF(1),s.bVm()),2&h){const z=s.XpG(2);s.R7$(),s.JRh(z.nzExtra)}}function V(h,u){if(1&h&&(s.j41(0,"div",4),s.DNE(1,E,2,1,"ng-container",3),s.k0s()),2&h){const z=s.XpG();s.R7$(),s.Y8G("nzStringTemplateOutlet",z.nzExtra)}}const S="collapse";let X=(()=>{let h,R,O,u=[],z=[],D=[],$=[],J=[],nn=[];return class Et{static{const j="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;h=[(0,t.H4)()],R=[(0,t.H4)()],O=[(0,t.H4)()],(0,a.G4)(null,null,h,{kind:"field",name:"nzAccordion",static:!1,private:!1,access:{has:F=>"nzAccordion"in F,get:F=>F.nzAccordion,set:(F,B)=>{F.nzAccordion=B}},metadata:j},u,z),(0,a.G4)(null,null,R,{kind:"field",name:"nzBordered",static:!1,private:!1,access:{has:F=>"nzBordered"in F,get:F=>F.nzBordered,set:(F,B)=>{F.nzBordered=B}},metadata:j},D,$),(0,a.G4)(null,null,O,{kind:"field",name:"nzGhost",static:!1,private:!1,access:{has:F=>"nzGhost"in F,get:F=>F.nzGhost,set:(F,B)=>{F.nzGhost=B}},metadata:j},J,nn),j&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:j})}nzConfigService;cdr;directionality;destroy$;_nzModuleName=S;nzAccordion=(0,a.zF)(this,u,!1);nzBordered=((0,a.zF)(this,z),(0,a.zF)(this,D,!0));nzGhost=((0,a.zF)(this,$),(0,a.zF)(this,J,!1));nzExpandIconPosition=((0,a.zF)(this,nn),"start");dir="ltr";listOfNzCollapsePanelComponent=[];constructor(j,F,B,en){this.nzConfigService=j,this.cdr=F,this.directionality=B,this.destroy$=en,this.nzConfigService.getConfigChangeEventForComponent(S).pipe((0,b.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,b.Q)(this.destroy$)).subscribe(j=>{this.dir=j,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(j){this.listOfNzCollapsePanelComponent.push(j)}removePanel(j){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(j),1)}click(j){this.nzAccordion&&!j.nzActive&&this.listOfNzCollapsePanelComponent.filter(F=>F!==j).forEach(F=>{F.nzActive&&(F.nzActive=!1,F.nzActiveChange.emit(F.nzActive),F.markForCheck())}),j.nzActive=!j.nzActive,j.nzActiveChange.emit(j.nzActive)}static \u0275fac=function(F){return new(F||Et)(s.rXU(t.yx),s.rXU(s.gRc),s.rXU(G.dS),s.rXU(T.y4))};static \u0275cmp=s.VBU({type:Et,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(F,B){2&F&&s.AVh("ant-collapse-icon-position-start","start"===B.nzExpandIconPosition)("ant-collapse-icon-position-end","end"===B.nzExpandIconPosition)("ant-collapse-ghost",B.nzGhost)("ant-collapse-borderless",!B.nzBordered)("ant-collapse-rtl","rtl"===B.dir)},inputs:{nzAccordion:[2,"nzAccordion","nzAccordion",s.L39],nzBordered:[2,"nzBordered","nzBordered",s.L39],nzGhost:[2,"nzGhost","nzGhost",s.L39],nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],features:[s.Jv_([T.y4])],ngContentSelectors:W,decls:1,vars:0,template:function(F,B){1&F&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})}})();const I="collapsePanel";let P=(()=>{let h,u=[],z=[];return class bt{static{const D="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;h=[(0,t.H4)()],(0,a.G4)(null,null,h,{kind:"field",name:"nzShowArrow",static:!1,private:!1,access:{has:$=>"nzShowArrow"in $,get:$=>$.nzShowArrow,set:($,O)=>{$.nzShowArrow=O}},metadata:D},u,z),D&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:D})}nzConfigService;ngZone;cdr;destroy$;_nzModuleName=I;nzActive=!1;nzDisabled=!1;nzShowArrow=(0,a.zF)(this,u,!0);nzExtra=(0,a.zF)(this,z);nzHeader;nzExpandedIcon;nzActiveChange=new s.bkB;collapseHeader;markForCheck(){this.cdr.markForCheck()}nzCollapseComponent=(0,s.WQX)(X,{host:!0});noAnimation=(0,s.WQX)(d.z,{optional:!0});constructor(D,$,O,J){this.nzConfigService=D,this.ngZone=$,this.cdr=O,this.destroy$=J,this.nzConfigService.getConfigChangeEventForComponent(I).pipe((0,b.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.nzCollapseComponent.addPanel(this),(0,M.wN)(this.collapseHeader.nativeElement,"click").pipe((0,y.p)(()=>!this.nzDisabled),(0,b.Q)(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})})}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}static \u0275fac=function($){return new($||bt)(s.rXU(t.yx),s.rXU(s.SKi),s.rXU(s.gRc),s.rXU(T.y4))};static \u0275cmp=s.VBU({type:bt,selectors:[["nz-collapse-panel"]],viewQuery:function($,O){if(1&$&&s.GBs(k,7),2&$){let J;s.mGM(J=s.lsd())&&(O.collapseHeader=J.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function($,O){2&$&&s.AVh("ant-collapse-no-arrow",!O.nzShowArrow)("ant-collapse-item-active",O.nzActive)("ant-collapse-item-disabled",O.nzDisabled)},inputs:{nzActive:[2,"nzActive","nzActive",s.L39],nzDisabled:[2,"nzDisabled","nzDisabled",s.L39],nzShowArrow:[2,"nzShowArrow","nzShowArrow",s.L39],nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],features:[s.Jv_([T.y4])],ngContentSelectors:W,decls:9,vars:8,consts:[["collapseHeader",""],["role","button",1,"ant-collapse-header"],[1,"ant-collapse-header-text"],[4,"nzStringTemplateOutlet"],[1,"ant-collapse-extra"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"]],template:function($,O){1&$&&(s.NAR(),s.j41(0,"div",1,0),s.DNE(2,H,2,1,"div"),s.j41(3,"span",2),s.DNE(4,Q,2,1,"ng-container",3),s.k0s(),s.DNE(5,V,2,1,"div",4),s.k0s(),s.j41(6,"div",5)(7,"div",6),s.SdG(8),s.k0s()()),2&$&&(s.BMQ("aria-expanded",O.nzActive),s.R7$(2),s.vxM(O.nzShowArrow?2:-1),s.R7$(2),s.Y8G("nzStringTemplateOutlet",O.nzHeader),s.R7$(),s.vxM(O.nzExtra?5:-1),s.R7$(),s.AVh("ant-collapse-content-active",O.nzActive),s.Y8G("@.disabled",!(null==O.noAnimation||!O.noAnimation.nzNoAnimation))("@collapseMotion",O.nzActive?"expanded":"hidden"))},dependencies:[f.C,f.m,Y.Y3,Y.Dn],encapsulation:2,data:{animation:[n.GE]},changeDetection:0})}})(),U=(()=>{class h{static \u0275fac=function(R){return new(R||h)};static \u0275mod=s.$C({type:h});static \u0275inj=s.G2t({imports:[P]})}return h})()},78821:(Z,N,o)=>{o.d(N,{H:()=>Q});var a=o(54438),s=o(67428),b=o(60177),y=o(51188),n=o(41951),t=o(53146),d=o(35154);const f=["cvcFlaggable",""],T=["*"];function M(E,V){1&E&&a.SdG(0)}function Y(E,V){1&E&&a.eu8(0)}function G(E,V){if(1&E&&(a.qex(0),a.DNE(1,Y,1,0,"ng-container",4),a.bVm()),2&E){a.XpG();const S=a.sdS(1);a.R7$(),a.Y8G("ngTemplateOutlet",S)}}function W(E,V){if(1&E&&(a.j41(0,"a",6),a.nrm(1,"i",7),a.k0s()),2&E){a.XpG();const S=a.sdS(5);a.R7$(),a.Y8G("nzTooltipTitle",S)}}function k(E,V){if(1&E&&a.EFF(0),2&E){const S=a.XpG(2);a.SpI(" ",S.flags," open flags ")}}function x(E,V){1&E&&a.eu8(0)}function H(E,V){if(1&E&&(a.qex(0),a.j41(1,"nz-ribbon",5),a.DNE(2,W,2,1,"ng-template",null,1,a.C5r)(4,k,1,1,"ng-template",null,2,a.C5r)(6,x,1,0,"ng-container",4),a.k0s(),a.bVm()),2&E){const S=a.sdS(3);a.XpG();const X=a.sdS(1);a.R7$(),a.Y8G("nzText",S),a.R7$(5),a.Y8G("ngTemplateOutlet",X)}}let Q=(()=>{class E{constructor(S){this.renderer=S}ngOnChanges(){this.flags&&0===this.flags?this.removeFlagged():this.addFlagged()}ngAfterViewInit(){this.flags&&0===this.flags?this.removeFlagged():this.addFlagged()}addFlagged(){this.flaggedChild&&this.renderer.addClass(this.flaggedChild.nativeElement,"flaggedChild")}removeFlagged(){this.flaggedChild&&this.renderer.removeClass(this.flaggedChild.nativeElement,"flaggedChild")}static{this.\u0275fac=function(X){return new(X||E)(a.rXU(a.sFG))}}static{this.\u0275cmp=a.VBU({type:E,selectors:[["","cvcFlaggable",""]],contentQueries:function(X,I,P){if(1&X&&a.wni(P,s.v,5,a.aKT),2&X){let U;a.mGM(U=a.lsd())&&(I.flaggedChild=U.first)}},inputs:{flags:"flags",entity:"entity"},standalone:!1,features:[a.OA$],attrs:f,ngContentSelectors:T,decls:4,vars:2,consts:[["flaggedContent",""],["flaggedText",""],["flaggedTooltip",""],[4,"ngIf"],[4,"ngTemplateOutlet"],["nzPlacement","start","nzColor","#ff3333",3,"nzText"],["routerLink","flags",2,"color","#fff"],["nz-icon","","nzType","flag","nzTheme","fill","nz-tooltip","","nzTooltipPlacement","top","nzTooltipColor","#FF3333",3,"nzTooltipTitle"]],template:function(X,I){1&X&&(a.NAR(),a.DNE(0,M,1,0,"ng-template",null,0,a.C5r)(2,G,2,1,"ng-container",3)(3,H,7,2,"ng-container",3)),2&X&&(a.R7$(2),a.Y8G("ngIf",0===I.flags),a.R7$(),a.Y8G("ngIf",I.flags))},dependencies:[b.bT,b.T3,y.Wk,n.Dn,t.KI,d.LH],encapsulation:2})}}return E})()},94097:(Z,N,o)=>{o.d(N,{b:()=>ht});var a=o(69145),s=o(5964),b=o(96354),y=o(24608),n=o(69199),t=o(54438),d=o(60177),f=o(61774),T=o(50513),M=o(16389),Y=o(25930),G=o(97529),W=o(31635),k=o(71226),x=o(49894),H=o(41305),Q=o(74222),E=o(89417),V=o(38927),S=o(25703),X=o(23617),I=o(35154),P=o(82983),U=o(41939),h=o(65566),u=o(61845);function z(c,g){if(1&c){const r=t.RV6();t.j41(0,"nz-alert",10),t.bIt("nzOnClose",function(){t.eBV(r);const v=t.XpG();return t.Njj(v.onSuccessBannerClose())}),t.k0s()}}function R(c,g){if(1&c&&t.nrm(0,"nz-alert",11),2&c){t.XpG();const r=t.sdS(4);t.Y8G("nzDescription",r)}}function D(c,g){if(1&c&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&c){const r=g.$implicit;t.R7$(),t.JRh(r)}}function $(c,g){if(1&c&&(t.j41(0,"ul"),t.DNE(1,D,2,1,"li",12),t.k0s()),2&c){const r=t.XpG();t.R7$(),t.Y8G("ngForOf",r.errorMessages)}}function O(c,g){}function J(c,g){1&c&&t.DNE(0,O,0,0,"ng-template")}function nn(c,g){if(1&c&&(t.qex(0),t.DNE(1,J,1,0,null,14),t.bVm()),2&c){t.XpG();const r=t.sdS(6);t.R7$(),t.Y8G("ngTemplateOutlet",r)}}function tn(c,g){}function j(c,g){1&c&&t.DNE(0,tn,0,0,"ng-template")}function F(c,g){if(1&c&&(t.j41(0,"span",15),t.DNE(1,j,1,0,null,14),t.k0s()),2&c){t.XpG();const r=t.sdS(6);t.R7$(),t.Y8G("ngTemplateOutlet",r)}}function B(c,g){if(1&c&&(t.j41(0,"button",16),t.EFF(1),t.nI1(2,"enumToTitle"),t.k0s()),2&c){const r=t.XpG().ngrxLet,m=t.XpG();t.Y8G("disabled",!(void 0!==m.comment&&m.comment.length>=10&&r.signedIn))("nzTooltipTrigger",m.selectedOrg?"hover":null)("nzTooltipTitle","For "+(null==m.selectedOrg?null:m.selectedOrg.name)),t.R7$(),t.SpI(" Flag ",t.bMT(2,4,m.flaggable.entityType)," ")}}function en(c,g){if(1&c&&(t.qex(0),t.j41(1,"cvc-form-buttons"),t.DNE(2,nn,2,1,"ng-container",13)(3,F,2,1,"ng-template",null,1,t.C5r)(5,B,3,6,"ng-template",null,2,t.C5r),t.k0s(),t.bVm()),2&c){const r=g.ngrxLet,m=t.sdS(4);t.R7$(2),t.Y8G("ngIf",r.signedIn)("ngIfElse",m)}}let on=class yt{constructor(g,r,m){this.gql=g,this.viewerService=r,this.networkErrorService=m,this.errorMessages=[],this.success=!1,this.loading=!1,this.comment="",this.addFlagMutator=new k.E(this.networkErrorService),this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.pipe((0,x.s)(this)).subscribe(v=>{this.selectedOrg=v.mostRecentOrg})}ngOnInit(){if(void 0===this.flaggable)throw new Error("Must pass a flagggable into flag add component")}onOrgSelected(g){this.selectedOrg=g}submitFlag(){this.errorMessages=[];let r=this.addFlagMutator.mutate(this.gql,{input:{comment:this.comment,subject:this.flaggable,organizationId:this.selectedOrg?.id}});r.submitSuccess$.pipe((0,x.s)(this)).subscribe(m=>{m&&(this.flagAddedCallback&&this.flagAddedCallback(),this.success=!0,this.comment="")}),r.submitError$.pipe((0,x.s)(this)).subscribe(m=>{m.length>0&&(this.errorMessages=m)}),r.isSubmitting$.pipe((0,x.s)(this)).subscribe(m=>{this.loading=m})}onSuccessBannerClose(){this.success=!1}static{this.\u0275fac=function(r){return new(r||yt)(t.rXU(a.GOU),t.rXU(H.q),t.rXU(Q.N))}}static{this.\u0275cmp=t.VBU({type:yt,selectors:[["cvc-flag-add-form"]],inputs:{flaggable:"flaggable",flagAddedCallback:"flagAddedCallback"},standalone:!1,decls:11,vars:5,consts:[["errorContents",""],["notSignedIn",""],["submitButton",""],["nzType","inner"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription",4,"ngIf"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"commentChange","comment"],["nzTip","Submitting",3,"nzSpinning"],[4,"ngrxLet"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to flag entity."],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small","nz-tooltip","",3,"disabled","nzTooltipTrigger","nzTooltipTitle"]],template:function(r,m){if(1&r){const v=t.RV6();t.j41(0,"nz-card",3),t.DNE(1,z,1,0,"nz-alert",4)(2,R,1,1,"nz-alert",5)(3,$,2,1,"ng-template",null,0,t.C5r),t.j41(5,"form",6),t.bIt("ngSubmit",function(){return t.eBV(v),t.Njj(m.submitFlag())}),t.j41(6,"cvc-comment-input-form",7),t.mxI("commentChange",function(ln){return t.eBV(v),t.DH7(m.comment,ln)||(m.comment=ln),t.Njj(ln)}),t.k0s(),t.j41(7,"nz-spin",8)(8,"nz-form-item")(9,"nz-form-control"),t.DNE(10,en,7,2,"ng-container",9),t.k0s()()()()()}2&r&&(t.R7$(),t.Y8G("ngIf",m.success),t.R7$(),t.Y8G("ngIf",m.errorMessages.length>0),t.R7$(4),t.R50("comment",m.comment),t.R7$(),t.Y8G("nzSpinning",m.loading),t.R7$(3),t.Y8G("ngrxLet",m.viewer$))},dependencies:[d.Sq,d.bT,d.T3,E.qT,E.cb,E.cV,f.Nj,G.Uq,G.e,V.CA,V.Ls,V.zS,T.aO,M.c,Y.p,S.cK,X.Y,I.LH,P.a,U.l,h.K,u.f],encapsulation:2,changeDetection:0})}};on=(0,W.Cg)([(0,x.d)()],on);var L=o(21413),_n=o(56977),q=o(97685),w=o(7391),un=o(11672),vn=o(19448),pn=o(41951),zn=o(56408),Cn=o(50311),hn=o(1236);const Rn=()=>({float:"right"});function Tn(c,g){if(1&c){const r=t.RV6();t.j41(0,"nz-alert",8),t.bIt("nzOnClose",function(){t.eBV(r);const v=t.XpG();return t.Njj(v.onSuccessBannerClose())}),t.k0s()}}function En(c,g){}function bn(c,g){1&c&&t.DNE(0,En,0,0,"ng-template")}function yn(c,g){if(1&c&&(t.qex(0),t.DNE(1,bn,1,0,null,10),t.bVm()),2&c){t.XpG(2);const r=t.sdS(7);t.R7$(),t.Y8G("ngTemplateOutlet",r)}}function Fn(c,g){if(1&c&&(t.qex(0),t.DNE(1,yn,2,1,"ng-container",9),t.bVm()),2&c){const r=t.XpG().ngrxLet,m=t.sdS(5),v=t.XpG();t.R7$(),t.Y8G("ngIf",r.isEditor||r.isAdmin||v.flag.openActivity.user.id===r.id)("ngIfElse",m)}}function Gn(c,g){}function Sn(c,g){1&c&&t.DNE(0,Gn,0,0,"ng-template")}function xn(c,g){if(1&c&&(t.j41(0,"span",11),t.DNE(1,Sn,1,0,null,10),t.k0s()),2&c){t.XpG();const r=t.sdS(7);t.R7$(),t.Y8G("ngTemplateOutlet",r)}}function Dn(c,g){}function In(c,g){1&c&&t.DNE(0,Dn,0,0,"ng-template")}function $n(c,g){if(1&c&&(t.j41(0,"span",12),t.DNE(1,In,1,0,null,10),t.k0s()),2&c){t.XpG();const r=t.sdS(7);t.R7$(),t.Y8G("ngTemplateOutlet",r)}}function On(c,g){if(1&c){const r=t.RV6();t.j41(0,"button",14),t.mxI("nzPopoverVisibleChange",function(v){t.eBV(r);const A=t.XpG(3);return t.DH7(A.flagResolvePopoverVisible,v)||(A.flagResolvePopoverVisible=v),t.Njj(v)}),t.bIt("click",function(){t.eBV(r);const v=t.XpG(3);return t.Njj(v.flagResolvePopoverVisible=!v.flagResolvePopoverVisible)}),t.EFF(1," Resolve Flag "),t.nrm(2,"i",15),t.k0s()}if(2&c){const r=t.XpG(2).ngrxLet,m=t.XpG(),v=t.sdS(3),A=t.sdS(5);t.Y8G("nzPopoverTitle",v),t.R50("nzPopoverVisible",m.flagResolvePopoverVisible),t.Y8G("nzPopoverContent",A)("nzPopoverTrigger",void 0)("disabled",!r.signedIn||r.isCurator&&m.flag.openActivity.user.id!=r.id)}}function Ln(c,g){if(1&c&&t.DNE(0,On,3,5,"button",13),2&c){const r=t.XpG(2);t.Y8G("ngIf",!r.success)}}function jn(c,g){if(1&c&&(t.qex(0),t.DNE(1,Fn,2,2,"ng-container",9)(2,xn,2,1,"ng-template",null,2,t.C5r)(4,$n,2,1,"ng-template",null,3,t.C5r)(6,Ln,1,1,"ng-template",null,4,t.C5r),t.bVm()),2&c){const r=g.ngrxLet,m=t.sdS(3);t.R7$(),t.Y8G("ngIf",r.signedIn)("ngIfElse",m)}}function Mn(c,g){if(1&c){const r=t.RV6();t.EFF(0," Resolve Flag "),t.j41(1,"span",16)(2,"i",17),t.bIt("click",function(){t.eBV(r);const v=t.XpG();return v.flagResolvePopoverVisible=!1,t.Njj(v.errorMessages=[])}),t.k0s()()}2&c&&(t.R7$(),t.Y8G("ngStyle",t.lJ4(1,Rn)))}function Pn(c,g){if(1&c&&t.nrm(0,"nz-alert",24),2&c){t.XpG();const r=t.sdS(2);t.Y8G("nzDescription",r)}}function An(c,g){if(1&c&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&c){const r=g.$implicit;t.R7$(),t.JRh(r)}}function Nn(c,g){if(1&c&&(t.j41(0,"ul"),t.DNE(1,An,2,1,"li",25),t.k0s()),2&c){const r=t.XpG(2);t.R7$(),t.Y8G("ngForOf",r.errorMessages)}}function Yn(c,g){if(1&c){const r=t.RV6();t.DNE(0,Pn,1,1,"nz-alert",18)(1,Nn,2,1,"ng-template",null,5,t.C5r),t.j41(3,"nz-card",19)(4,"form",20),t.bIt("ngSubmit",function(){t.eBV(r);const v=t.XpG();return t.Njj(v.resolveFlag())}),t.j41(5,"cvc-comment-input-form",21),t.mxI("commentChange",function(v){t.eBV(r);const A=t.XpG();return t.DH7(A.comment,v)||(A.comment=v),t.Njj(v)}),t.k0s(),t.j41(6,"nz-spin",22)(7,"nz-form-item")(8,"nz-form-control")(9,"cvc-form-buttons")(10,"button",23),t.EFF(11," Resolve "),t.k0s()()()()()()()}if(2&c){const r=t.XpG();t.Y8G("ngIf",r.errorMessages.length>0),t.R7$(5),t.R50("comment",r.comment),t.R7$(),t.Y8G("nzSpinning",r.loading),t.R7$(4),t.Y8G("disabled",!(void 0!==r.comment&&r.comment.length>=10))("nzTooltipTrigger",r.selectedOrg?"hover":null)("nzTooltipTitle","For "+(null==r.selectedOrg?null:r.selectedOrg.name))}}let sn=class Ft{constructor(g,r,m){this.gql=g,this.viewerService=r,this.networkErrorService=m,this.errorMessages=[],this.loading=!1,this.success=!1,this.flagResolvePopoverVisible=!1,this.resolveFlagMutator=new k.E(this.networkErrorService),this.viewer$=this.viewerService.viewer$}ngOnInit(){if(void 0===this.flag)throw new Error("Must pass a Flag in to resolve component.");this.viewerService.viewer$.pipe((0,x.s)(this)).subscribe(g=>{this.selectedOrg=g.mostRecentOrg})}onOrgSelected(g){this.selectedOrg=g}resolveFlag(){if(this.comment){this.errorMessages=[];let g=this.resolveFlagMutator.mutate(this.gql,{input:{id:this.flag.id,comment:this.comment,organizationId:this.selectedOrg?.id}});g.submitSuccess$.pipe((0,x.s)(this)).subscribe(r=>{r&&(this.flagResolvePopoverVisible=!1,this.success=!0,this.flagResolvedCallback&&this.flagResolvedCallback())}),g.submitError$.pipe((0,x.s)(this)).subscribe(r=>{r.length>0&&(this.success=!1,this.errorMessages=r)}),g.isSubmitting$.pipe((0,x.s)(this)).subscribe(r=>{this.loading=r})}}onSuccessBannerClose(){this.success=!1,this.flagResolvedCallback&&this.flagResolvedCallback()}static{this.\u0275fac=function(r){return new(r||Ft)(t.rXU(a.reo),t.rXU(H.q),t.rXU(Q.N))}}static{this.\u0275cmp=t.VBU({type:Ft,selectors:[["cvc-flag-resolve-form"]],inputs:{flag:"flag",flagResolvedCallback:"flagResolvedCallback"},standalone:!1,decls:6,vars:2,consts:[["flagResolvePopoverTitleTemplate",""],["flagResolvePopoverContentTemplate",""],["notSignedIn",""],["noPermissions",""],["submitButton",""],["errorContents",""],["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],[4,"ngrxLet"],["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to resolve flag."],["nz-tooltip","","nzTooltipTitle","If you are not an editor, you can only resolve flags you opened."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click",4,"ngIf"],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverVisibleChange","click","nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled"],["nz-icon","","nzType","caret-down","nzTheme","outline"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription",4,"ngIf"],["nzType","inner",2,"width","300px"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"commentChange","comment"],["nzTip","Submitting",3,"nzSpinning"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small","nz-tooltip","",3,"disabled","nzTooltipTrigger","nzTooltipTitle"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription"],[4,"ngFor","ngForOf"]],template:function(r,m){1&r&&t.DNE(0,Tn,1,0,"nz-alert",6)(1,jn,8,2,"ng-container",7)(2,Mn,3,2,"ng-template",null,0,t.C5r)(4,Yn,12,6,"ng-template",null,1,t.C5r),2&r&&(t.Y8G("ngIf",m.success),t.R7$(),t.Y8G("ngrxLet",m.viewer$))},dependencies:[d.Sq,d.bT,d.T3,d.B3,E.qT,E.cb,f.Nj,T.aO,M.c,Y.p,G.Uq,G.e,V.CA,V.Ls,V.zS,E.cV,X.Y,S.cK,hn.L_,pn.Dn,I.LH,P.a,h.K,U.l],encapsulation:2})}};sn=(0,W.Cg)([(0,x.d)()],sn);var Vn=o(4126),Xn=o(83075),Bn=o(8139);function kn(c,g){if(1&c){const r=t.RV6();t.j41(0,"nz-alert",8),t.bIt("nzOnClose",function(){const v=t.eBV(r).$implicit,A=t.XpG();return t.Njj(A.onErrorBannerClose(v))}),t.k0s()}2&c&&t.Y8G("nzMessage",g.$implicit)}function Un(c,g){if(1&c){const r=t.RV6();t.j41(0,"nz-alert",9),t.bIt("nzOnClose",function(){t.eBV(r);const v=t.XpG();return t.Njj(v.onSuccessBannerClose())}),t.k0s()}if(2&c){const r=t.XpG();t.Mz_("nzMessage","Revision(s) successfully ",r.success,".")}}function Hn(c,g){if(1&c&&t.nrm(0,"cvc-comment-body",15),2&c){const r=t.XpG(2).$implicit;t.Y8G("commentBodySegments",r.openActivity.parsedNote)}}function Wn(c,g){if(1&c&&(t.qex(0),t.nrm(1,"cvc-flag-resolve-form",16),t.bVm()),2&c){const r=t.XpG(2).$implicit,m=t.XpG(2);t.R7$(),t.Y8G("flag",r)("flagResolvedCallback",m.flagResolvedCallback)}}function Kn(c,g){if(1&c&&(t.qex(0),t.nrm(1,"cvc-comment-body",15),t.bVm()),2&c){const r=t.XpG(3).$implicit;t.R7$(),t.Y8G("commentBodySegments",r.resolutionActivity.parsedNote)}}function gn(c,g){if(1&c&&t.nrm(0,"cvc-user-tag",21),2&c){const r=t.XpG(3).$implicit;t.Y8G("user",r.resolutionActivity.user)}}function Qn(c,g){if(1&c&&(t.j41(0,"nz-row")(1,"nz-col",17),t.DNE(2,Kn,2,1,"ng-container",18),t.k0s(),t.j41(3,"nz-col",19),t.EFF(4," Resolved By "),t.DNE(5,gn,1,1,"cvc-user-tag",20),t.EFF(6),t.nI1(7,"timeAgo"),t.k0s()()),2&c){const r=t.XpG(2).$implicit;t.R7$(2),t.Y8G("ngIf",r.resolutionActivity),t.R7$(3),t.Y8G("ngIf",void 0!==r.resolutionActivity),t.R7$(),t.SpI(" ",t.bMT(7,3,null==r.resolutionActivity?null:r.resolutionActivity.createdAt)," ")}}function Jn(c,g){if(1&c&&(t.nrm(0,"i",22),t.nI1(1,"entityColor"),t.EFF(2)),2&c){const r=t.XpG(2).$implicit;t.Y8G("nzTwotoneColor",t.bMT(1,2,"Flag")),t.R7$(2),t.SpI(" FID",r.id," ")}}function wn(c,g){if(1&c&&(t.j41(0,"span")(1,"span",26),t.EFF(2,"Flagged By"),t.k0s(),t.nrm(3,"cvc-user-tag",21),t.j41(4,"span",26),t.EFF(5),t.nI1(6,"timeAgo"),t.k0s()()),2&c){const r=t.XpG(3).$implicit;t.R7$(3),t.Y8G("user",r.openActivity.user),t.R7$(2),t.JRh(t.bMT(6,2,r.openActivity.createdAt))}}function Zn(c,g){if(1&c&&t.nrm(0,"cvc-status-tag",27),2&c){const r=t.XpG(3).$implicit;t.Y8G("status",r.state)}}function mn(c,g){1&c&&(t.j41(0,"nz-space",23),t.DNE(1,wn,7,4,"span",24)(2,Zn,1,1,"cvc-status-tag",25),t.k0s())}function an(c,g){if(1&c&&(t.j41(0,"nz-card",13),t.DNE(1,Hn,1,1,"cvc-comment-body",14),t.nrm(2,"nz-divider"),t.DNE(3,Wn,2,2,"ng-container",7)(4,Qn,8,5,"ng-template",null,1,t.C5r)(6,Jn,3,4,"ng-template",null,2,t.C5r)(8,mn,3,0,"ng-template",null,3,t.C5r),t.k0s()),2&c){const r=t.sdS(5),m=t.sdS(7),v=t.sdS(9),A=t.XpG().$implicit;t.Y8G("nzTitle",m)("nzExtra",v),t.R7$(),t.Y8G("ngIf",A.openActivity),t.R7$(2),t.Y8G("ngIf","OPEN"==A.state)("ngIfElse",r)}}function dn(c,g){1&c&&(t.qex(0),t.DNE(1,an,10,5,"nz-card",12),t.bVm())}function fn(c,g){if(1&c&&(t.qex(0),t.j41(1,"nz-space",10),t.DNE(2,dn,2,0,"ng-container",11),t.k0s(),t.bVm()),2&c){const r=t.XpG();t.R7$(2),t.Y8G("ngForOf",r.flags)}}function qn(c,g){1&c&&t.nrm(0,"nz-empty",28)}let nt=(()=>{class c{constructor(r){this.viewerService=r,this.isLoading=!1,this.success=!1,this.destroy$=new L.B}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(r=>{this.mostRecentOrg=r.mostRecentOrg})}setupMutationResultHandlers(r,m){r.submitSuccess$.pipe((0,_n.Q)(this.destroy$)).subscribe(v=>{v&&(this.isLoading=!1,this.errors=void 0,this.success=m)}),r.submitError$.pipe((0,_n.Q)(this.destroy$)).subscribe(v=>{v.length>0&&(this.isLoading=!1,this.success=!1,this.errors=v)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(r){this.errors=this.errors?.filter(m=>m!=r)}onSuccessBannerClose(){this.success=!1}static{this.\u0275fac=function(m){return new(m||c)(t.rXU(H.q))}}static{this.\u0275cmp=t.VBU({type:c,selectors:[["cvc-flag-list"]],inputs:{flags:"flags",flagResolvedCallback:"flagResolvedCallback"},standalone:!1,decls:6,vars:4,consts:[["noFlags",""],["flagResolved",""],["flagCardHeaderTitle",""],["flagCardHeaderExtra",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],["nzTitle","Flags",1,"card-list"],[4,"ngIf","ngIfElse"],["nzBanner","","nzType","error","nzCloseable","",3,"nzOnClose","nzMessage"],["nzBanner","","nzType","success","nzCloseable","",3,"nzOnClose","nzMessage"],["nzDirection","vertical"],[4,"ngFor","ngForOf"],["nzType","inner",3,"nzTitle","nzExtra",4,"nzSpaceItem"],["nzType","inner",3,"nzTitle","nzExtra"],[3,"commentBodySegments",4,"ngIf"],[3,"commentBodySegments"],[3,"flag","flagResolvedCallback"],["nzSpan","16"],[4,"ngIf"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"user"],["nz-icon","","nzTheme","twotone","nzType","civic-flag",3,"nzTwotoneColor"],["nzSize","small"],[4,"nzSpaceItem"],[3,"status",4,"nzSpaceItem"],["nz-typography","","nzType","secondary"],[3,"status"],["nzNotFoundImage","simple","nzNotFoundContent","No Flags matching filters"]],template:function(m,v){if(1&m&&(t.DNE(0,kn,1,1,"nz-alert",4)(1,Un,1,2,"nz-alert",5),t.j41(2,"nz-card",6),t.DNE(3,fn,3,1,"ng-container",7)(4,qn,1,0,"ng-template",null,0,t.C5r),t.k0s()),2&m){const A=t.sdS(5);t.Y8G("ngForOf",v.errors),t.R7$(),t.Y8G("ngIf",v.success),t.R7$(2),t.Y8G("ngIf",v.flags&&v.flags.length>0)("ngIfElse",A)}},dependencies:[d.Sq,d.bT,G.Uq,G.e,S.cK,q.U5,q.Dq,w.Di,un.RW,vn.j,pn.Dn,zn.r,Cn.g,M.c,X.Y,sn,Vn.p,Xn.R,Bn.N],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]})}}return c})();var tt=o(9365),et=o(29438);const rn=()=>[];function it(c,g){if(1&c&&(t.nrm(0,"cvc-flag-list",14),t.nI1(1,"ngrxPush")),2&c){const r=t.XpG(2);t.Y8G("flags",t.bMT(1,2,r.flags$)||t.lJ4(4,rn))("flagResolvedCallback",r.refresh)}}function ot(c,g){if(1&c){const r=t.RV6();t.j41(0,"button",17),t.bIt("click",function(){t.eBV(r);const v=t.XpG(2).ngrxLet,A=t.XpG(2);return t.Njj(A.loadMore(null==v?null:v.endCursor))}),t.EFF(1," Load More "),t.k0s()}}function st(c,g){1&c&&(t.qex(0),t.DNE(1,ot,2,0,"button",16),t.bVm())}function at(c,g){if(1&c&&(t.qex(0),t.DNE(1,st,2,0,"ng-container",15),t.bVm()),2&c){const r=g.ngrxLet;t.R7$(),t.Y8G("ngIf",r&&(null==r?null:r.hasNextPage)&&r.endCursor)}}function rt(c,g){if(1&c&&t.nrm(0,"cvc-flag-add-form",18),2&c){const r=t.XpG(2);t.Y8G("flaggable",r.flaggable)("flagAddedCallback",r.refresh)}}function lt(c,g){if(1&c&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&c){const r=g.$implicit;t.R7$(),t.JRh(r.displayName)}}function ct(c,g){if(1&c){const r=t.RV6();t.j41(0,"cvc-participant-list",19),t.bIt("participantSelectedEvent",function(v){t.eBV(r);const A=t.XpG(2);return t.Njj(A.onStateSelected(v))}),t.DNE(1,lt,2,1,"ng-template",null,1,t.C5r),t.k0s()}if(2&c){const r=t.XpG(2);t.Y8G("preselectedOption",r.selectableStates[0])("participantList",r.selectableStates)}}function _t(c,g){if(1&c&&t.nrm(0,"nz-avatar",22),2&c){const r=t.XpG().$implicit;t.Y8G("nzSrc",r.profileImagePath)}}function pt(c,g){if(1&c&&(t.nrm(0,"nz-avatar",23),t.nI1(1,"uppercase")),2&c){const r=t.XpG().$implicit;t.Y8G("nzText",t.bMT(1,1,r.username.charAt(0)))}}function gt(c,g){if(1&c&&(t.DNE(0,_t,1,1,"nz-avatar",21)(1,pt,2,3,"ng-template",null,2,t.C5r),t.j41(3,"span"),t.EFF(4),t.k0s()),2&c){const r=g.$implicit,m=t.sdS(2);t.Y8G("ngIf",r.profileImagePath)("ngIfElse",m),t.R7$(4),t.JRh(r.username)}}function mt(c,g){if(1&c){const r=t.RV6();t.j41(0,"cvc-participant-list",20),t.nI1(1,"ngrxPush"),t.bIt("participantSelectedEvent",function(v){t.eBV(r);const A=t.XpG(2);return t.Njj(A.onFlaggingUsersSelected(v))}),t.DNE(2,gt,5,3,"ng-template",null,1,t.C5r),t.k0s()}if(2&c){const r=t.XpG(2);t.Y8G("participantList",t.bMT(1,1,r.uniqueFlaggingUsers$)||t.lJ4(3,rn))}}function dt(c,g){if(1&c&&t.nrm(0,"nz-avatar",22),2&c){const r=t.XpG().$implicit;t.Y8G("nzSrc",r.profileImagePath)}}function ft(c,g){if(1&c&&(t.nrm(0,"nz-avatar",23),t.nI1(1,"uppercase")),2&c){const r=t.XpG().$implicit;t.Y8G("nzText",t.bMT(1,1,r.username.charAt(0)))}}function ut(c,g){if(1&c&&(t.DNE(0,dt,1,1,"nz-avatar",21)(1,ft,2,3,"ng-template",null,2,t.C5r),t.j41(3,"span"),t.EFF(4),t.k0s()),2&c){const r=g.$implicit,m=t.sdS(2);t.Y8G("ngIf",r.profileImagePath)("ngIfElse",m),t.R7$(4),t.JRh(r.username)}}function vt(c,g){if(1&c){const r=t.RV6();t.j41(0,"cvc-participant-list",24),t.nI1(1,"ngrxPush"),t.bIt("participantSelectedEvent",function(v){t.eBV(r);const A=t.XpG(2);return t.Njj(A.onResolvingUsersSelected(v))}),t.DNE(2,ut,5,3,"ng-template",null,1,t.C5r),t.k0s()}if(2&c){const r=t.XpG(2);t.Y8G("participantList",t.bMT(1,1,r.uniqueResolvingUsers$)||t.lJ4(3,rn))}}function zt(c,g){if(1&c&&(t.qex(0),t.j41(1,"nz-row",4)(2,"nz-col",5)(3,"nz-space",6),t.DNE(4,it,2,5,"cvc-flag-list",7)(5,at,2,1,"ng-container",8)(6,rt,1,2,"cvc-flag-add-form",9),t.k0s()(),t.j41(7,"nz-col",10)(8,"nz-space",6),t.DNE(9,ct,3,2,"cvc-participant-list",11)(10,mt,4,4,"cvc-participant-list",12)(11,vt,4,4,"cvc-participant-list",13),t.k0s()()(),t.bVm()),2&c){const r=t.XpG();t.R7$(),t.Y8G("nzGutter",16),t.R7$(4),t.Y8G("ngrxLet",r.pageInfo$)}}function Ct(c,g){if(1&c&&t.nrm(0,"cvc-flag-add-form",18),2&c){const r=t.XpG();t.Y8G("flaggable",r.flaggable)("flagAddedCallback",r.refresh)}}let ht=(()=>{class c{constructor(r){this.gql=r,this.defaultPageSize=5,this.selectableStates=[{id:1,displayName:"Open",value:a.Qfy.Open},{id:2,displayName:"Resolved",value:a.Qfy.Resolved}]}ngOnInit(){if(null==this.flaggable)throw new Error("Must pass a flaggable into flag list");this.queryRef=this.gql.watch({first:this.defaultPageSize,flaggable:this.flaggable,state:a.Qfy.Open}),this.refresh=()=>{this.queryRef.refetch()},this.results$=this.queryRef.valueChanges,this.flags$=this.results$.pipe((0,y.E)("data","flags","edges"),(0,s.p)(n.kP),(0,b.T)(r=>r.map(m=>m.node))),this.pageInfo$=this.results$.pipe((0,y.E)("data","flags","pageInfo")),this.unfilteredCount$=this.results$.pipe((0,y.E)("data","flags","unfilteredCountForSubject")),this.uniqueFlaggingUsers$=this.results$.pipe((0,b.T)(({data:r})=>r.flags?.uniqueFlaggingUsers)),this.uniqueResolvingUsers$=this.results$.pipe((0,b.T)(({data:r})=>r.flags?.uniqueResolvingUsers))}onFlaggingUsersSelected(r){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},flaggingUserId:r?r.id:void 0})}onResolvingUsersSelected(r){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},resolvingUserId:r?r.id:void 0})}onStateSelected(r){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},state:r?r.value:void 0})}loadMore(r){this.queryRef?.fetchMore({variables:{first:this.defaultPageSize,after:r}})}static{this.\u0275fac=function(m){return new(m||c)(t.rXU(a.HnF))}}static{this.\u0275cmp=t.VBU({type:c,selectors:[["cvc-flag-list-and-filter"]],inputs:{flaggable:"flaggable"},standalone:!1,decls:4,vars:4,consts:[["noFlags",""],["itemTemplate",""],["noAvatar",""],[4,"ngIf","ngIfElse"],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"flags","flagResolvedCallback",4,"nzSpaceItem"],[4,"ngrxLet"],[3,"flaggable","flagAddedCallback",4,"nzSpaceItem"],["nzSpan","6"],["listTitle","Flag State",3,"preselectedOption","participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Flagging Users",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Resolving Users",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],[3,"flags","flagResolvedCallback"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[3,"flaggable","flagAddedCallback"],["listTitle","Flag State",3,"participantSelectedEvent","preselectedOption","participantList"],["listTitle","Flagging Users",3,"participantSelectedEvent","participantList"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["listTitle","Resolving Users",3,"participantSelectedEvent","participantList"]],template:function(m,v){if(1&m&&(t.DNE(0,zt,12,2,"ng-container",3),t.nI1(1,"ngrxPush"),t.DNE(2,Ct,1,2,"ng-template",null,0,t.C5r)),2&m){const A=t.sdS(3);t.Y8G("ngIf",t.bMT(1,2,v.unfilteredCount$))("ngIfElse",A)}},dependencies:[d.bT,f.Nj,T.aO,M.c,Y.p,G.Uq,G.e,on,nt,tt.T,et.PM,q.U5,q.Dq,d.Pc,f.L9],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]})}}return c})()}}]);