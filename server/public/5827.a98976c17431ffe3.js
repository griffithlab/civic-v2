"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[5827],{4902:(T,m,n)=>{n.d(m,{I:()=>t,r:()=>g});const t={featureId:void 0,variantId:void 0,significance:void 0,description:void 0,diseaseId:void 0,therapyIds:void 0,therapyInteractionType:void 0,evidenceDirection:void 0,evidenceLevel:void 0,evidenceType:void 0,molecularProfileId:void 0,phenotypeIds:void 0,rating:void 0,sourceId:void 0,variantOrigin:void 0},g={clientMutationId:void 0,fields:t,comment:void 0,organizationId:void 0}},5183:(T,m,n)=>{n.d(m,{$L:()=>d,zn:()=>p});var t=n(896),g=n(9145),i=n(1413),h=n(1018),d=function(o){return o.EVIDENCE="Evidence",o.ASSERTION="Assertion",o}(d||{});class p{constructor(l){this.formReady$=new i.B,this.formLayout="vertical",this.formMode="add",this.validStates=new Map,this.typeOption$=new i.B,this.requiresTherapy$=new i.B,this.requiresDisease$=new i.B,this.requiresAcmgCode$=new i.B,this.requiresAmpLevel$=new i.B,this.requiresClingenCode$=new i.B,this.allowsFdaApproval$=new i.B,this.getTypeOptions=()=>this.entityName==d.ASSERTION?(0,h.KF)(g.XEW).map(s=>s):(0,h.KF)(g.M1P).map(s=>s),this.getSignificanceOptions=s=>this.validStates.get(s)?.significance||[],this.getInteractionOptions=()=>(0,h.KF)(g.qld).map(s=>s),this.isValidSignificanceOption=(s,c)=>{const v=this.validStates.get(s);return!v||v.significance.includes(c)},this.getDirectionOptions=s=>this.validStates.get(s)?.entityDirection||[],this.isValidDirectionOption=(s,c)=>{const v=this.validStates.get(s);return!v||v.entityDirection.includes(c)},this.requiresTherapy=s=>{const c=this.validStates.get(s);return void 0===c||c.requiresTherapy},this.requiresDisease=s=>{const c=this.validStates.get(s);return void 0===c||c.requiresDisease},this.requiresAcmgCodes=s=>{const c=this.validStates.get(s);return void 0===c||c.requiresAcmgCodes},this.requiresAmpLevel=s=>{const c=this.validStates.get(s);return void 0===c||c.requiresAmpLevel},this.requiresClingenCodes=s=>{const c=this.validStates.get(s);return void 0===c||c.requiresClingenCodes},this.allowsFdaApproval=s=>{const c=this.validStates.get(s);return void 0===c||c.allowsFdaApproval},this.getOptionsFromEnums=s=>0===s.length?[]:s.map(c=>({value:c,label:(0,t.u)(c)})),this.fields={},this.options={},this.enums={},this.requires={},this.entityName=l,this.pluralNames=new Map,this.pluralNames.set(d.ASSERTION,"Assertions"),this.pluralNames.set(d.EVIDENCE,"Evidence")}onDestroy(){}}},9447:(T,m,n)=>{n.d(m,{D:()=>r});var t=n(9145),g=n(9894),i=n(4412),h=n(4902),d=n(5183);class r extends d.zn{constructor(){super(d.$L.EVIDENCE);const o=h.I;this.fields={molecularProfileId$:new i.t(o.molecularProfileId),variantId$:new i.t(o.variantId),variantMolecularProfile$:new i.t(void 0),featureId$:new i.t(o.featureId),evidenceType$:new i.t(o.evidenceType),evidenceLevel$:new i.t(o.evidenceLevel),evidenceDirection$:new i.t(o.evidenceDirection),significance$:new i.t(o.significance),variantOrigin$:new i.t(o.variantOrigin),diseaseId$:new i.t(o.diseaseId),therapyIds$:new i.t(o.therapyIds),therapyInteractionType$:new i.t(o.therapyInteractionType),rating$:new i.t(o.rating),phenotypeIds$:new i.t(o.phenotypeIds),sourceId$:new i.t(o.sourceId),description$:new i.t(void 0),comment$:new i.t(void 0)},this.enums={entityType$:new i.t(this.getTypeOptions()),significance$:new i.t([]),direction$:new i.t([]),interaction$:new i.t(this.getInteractionOptions())},this.requires={requiresDisease$:new i.t(!1),requiresTherapy$:new i.t(!1),requiresTherapyInteractionType$:new i.t(!1),requiresClingenCodes$:new i.t(!1),requiresAcmgCodes$:new i.t(!1),requiresAmpLevel$:new i.t(!1),allowsFdaApproval$:new i.t(!1)},this.fields.evidenceType$.pipe((0,g.s)(this,"onDestroy")).subscribe(l=>{if(!l)return Object.entries(this.requires).forEach(([s,c])=>{c.next(!1)}),this.enums.significance$.next([]),void this.enums.direction$.next([]);this.enums.significance$.next(this.getSignificanceOptions(l)),this.enums.direction$.next(this.getDirectionOptions(l)),this.requires.requiresDisease$.next(this.requiresDisease(l)),this.requires.requiresTherapy$.next(this.requiresTherapy(l)),this.requires.requiresTherapyInteractionType$.next(this.requiresTherapy(l)),this.requires.requiresClingenCodes$.next(this.requiresClingenCodes(l)),this.requires.requiresAcmgCodes$.next(this.requiresAcmgCodes(l)),this.requires.allowsFdaApproval$.next(this.allowsFdaApproval(l))}),this.fields.therapyIds$.pipe((0,g.s)(this,"onDestroy")).subscribe(l=>{this.requires.requiresTherapyInteractionType$.next(!!l&&l.length>1)}),this.validStates.set(t.M1P.Predictive,{entityType:t.M1P.Predictive,significance:[t.Vue.Sensitivityresponse,t.Vue.Resistance,t.Vue.AdverseResponse,t.Vue.ReducedSensitivity,t.Vue.Na],entityDirection:[t.$Ni.Supports,t.$Ni.DoesNotSupport],requiresDisease:!0,requiresTherapy:!0,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.M1P.Diagnostic,{entityType:t.M1P.Diagnostic,significance:[t.Vue.Positive,t.Vue.Negative],entityDirection:[t.$Ni.Supports,t.$Ni.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.M1P.Prognostic,{entityType:t.M1P.Prognostic,significance:[t.Vue.BetterOutcome,t.Vue.PoorOutcome,t.Vue.Na],entityDirection:[t.$Ni.Supports,t.$Ni.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.M1P.Oncogenic,{entityType:t.M1P.Oncogenic,significance:[t.Vue.Oncogenicity,t.Vue.Protectiveness],entityDirection:[t.$Ni.Supports,t.$Ni.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.M1P.Predisposing,{entityType:t.M1P.Predisposing,significance:[t.Vue.Predisposition,t.Vue.Protectiveness],entityDirection:[t.$Ni.Supports,t.$Ni.DoesNotSupport],requiresDisease:!0,requiresTherapy:!1,requiresClingenCodes:!1,requiresAcmgCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1}),this.validStates.set(t.M1P.Functional,{entityType:t.M1P.Functional,significance:[t.Vue.GainOfFunction,t.Vue.LossOfFunction,t.Vue.UnalteredFunction,t.Vue.Neomorphic,t.Vue.DominantNegative,t.Vue.Unknown],entityDirection:[t.$Ni.Supports,t.$Ni.DoesNotSupport],requiresDisease:!1,requiresTherapy:!1,requiresAcmgCodes:!1,requiresClingenCodes:!1,requiresAmpLevel:!1,allowsFdaApproval:!1})}}},5128:(T,m,n)=>{n.d(m,{K:()=>l});var t=n(177),g=n(8524),i=n(4438),h=n(9417),d=n(1011);const p={name:"comment-textarea",component:(()=>{class s extends g.PU{constructor(){super(...arguments),this.defaultOptions={defaultValue:"",validation:{messages:{minlength:(v,y)=>`Comments must be at least ${y.templateOptions?.minLength} characters in length.`}},templateOptions:{rows:4}}}static{this.\u0275fac=(()=>{let v;return function(E){return(v||(v=i.xGo(s)))(E||s)}})()}static{this.\u0275cmp=i.VBU({type:s,selectors:[["comment-textarea-type"]],features:[i.Vt3],decls:1,vars:2,consts:[["nz-input","",3,"formControl","formlyAttributes"]],template:function(y,E){1&y&&i.nrm(0,"textarea",0),2&y&&i.Y8G("formControl",E.formControl)("formlyAttributes",E.field)},dependencies:[h.me,h.BC,h.l_,g.ch,d.Sy],encapsulation:2,changeDetection:0})}}return s})(),wrappers:["form-field"]};var o=n(8927);let l=(()=>{class s{static{this.\u0275fac=function(y){return new(y||s)}}static{this.\u0275mod=i.$C({type:s})}static{this.\u0275inj=i.G2t({imports:[t.MD,h.X1,g.qy.forChild({types:[p]}),o.PQ,d.j]})}}return s})()},7480:(T,m,n)=>{function t(g,i){const h=(r,p)=>{let o;for(let l of r)if(l.fieldGroup)o=h(l.fieldGroup,p);else if(l.key===p){o=l;break}return o},d=(r,p)=>{for(let o of Object.keys(p))if(p[o]instanceof Object&&!Array.isArray(p[o]))d(r,p[o]);else{const l=h(r,o);l&&(l.defaultValue=p[o])}return r};return d(g,i)}n.d(m,{A:()=>t})},5540:(T,m,n)=>{n.d(m,{LC:()=>g,ep:()=>i,kO:()=>h});var t=n(5741);function g(d){return{significance:d.significance,description:d.description,diseaseId:d.disease?.id,therapyIds:d.therapies.map(r=>r.id),therapyInteractionType:d.therapyInteractionType,evidenceDirection:d.evidenceDirection,evidenceLevel:d.evidenceLevel,evidenceType:d.evidenceType,molecularProfileId:d.molecularProfile.id,phenotypeIds:d.phenotypes.map(r=>r.id),rating:d.evidenceRating,sourceId:d.source.id,variantOrigin:d.variantOrigin}}function i(d,r){let p=h(r);if(p)return{id:d,comment:p.comment,organizationId:p.organizationId,fields:p.fields}}function h(d){const r=d.fields;if(![r.molecularProfileId,r.variantOrigin,r.sourceId,r.evidenceType,r.significance,r.evidenceLevel,r.evidenceDirection,r.rating].find(o=>void 0===o))return{fields:{molecularProfileId:r.molecularProfileId,variantOrigin:r.variantOrigin,sourceId:r.sourceId,evidenceType:r.evidenceType,significance:r.significance,evidenceLevel:r.evidenceLevel,evidenceDirection:r.evidenceDirection,rating:r.rating,description:t.q2(r.description),diseaseId:t.pz(r.diseaseId),phenotypeIds:r.phenotypeIds?r.phenotypeIds:[],therapyIds:r.therapyIds?r.therapyIds:[],therapyInteractionType:t.pz(r.therapyInteractionType)},organizationId:d.organizationId,comment:d.comment}}},5709:(T,m,n)=>{n.r(m),n.d(m,{EvidenceReviseModule:()=>J});var t=n(177),g=n(3688),i=n(4124),h=n(4917),d=n(5128),r=n(7529),p=n(996),o=n(1951),l=n(3062),s=n(7685),c=n(7391),v=n(1188),y=n(9172),E=n(6354),$=n(4608),e=n(4438),O=n(9145),M=n(1305),S=n(5473),x=n(9765),z=n(2261),A=n(1774),w=n(3075);function F(a,I){if(1&a&&(e.j41(0,"span",12)(1,"strong"),e.EFF(2),e.k0s(),e.EFF(3," Parents:"),e.k0s()),2&a){const u=e.XpG(2).ngIf;e.R7$(2),e.JRh(u.name)}}function R(a,I){if(1&a&&(e.j41(0,"span",13),e.nrm(1,"cvc-molecular-profile-tag",14),e.k0s()),2&a){const u=e.XpG(2).ngIf;e.R7$(),e.Y8G("molecularProfile",u.molecularProfile)("enablePopover",!1)}}function V(a,I){1&a&&(e.j41(0,"nz-space",9),e.DNE(1,F,4,1,"span",10)(2,R,2,2,"span",11),e.k0s())}function q(a,I){1&a&&(e.j41(0,"div"),e.nrm(1,"router-outlet"),e.k0s())}function N(a,I){1&a&&(e.j41(0,"nz-row",15)(1,"div",16),e.nrm(2,"cvc-login-prompt"),e.k0s()())}function _(a,I){if(1&a&&(e.qex(0),e.nrm(1,"cvc-section-navigation",3),e.DNE(2,V,3,0,"ng-template",null,0,e.C5r),e.j41(4,"nz-page-header",4)(5,"nz-page-header-title",5),e.EFF(6," REVISE "),e.nrm(7,"i",6),e.nI1(8,"entityColor"),e.EFF(9),e.k0s(),e.j41(10,"nz-page-header-content")(11,"div",7),e.DNE(12,q,2,0,"div",8),e.nI1(13,"ngrxPush"),e.DNE(14,N,3,0,"ng-template",null,1,e.C5r),e.k0s()()(),e.bVm()),2&a){const u=I.ngIf,f=e.sdS(3),C=e.sdS(15),P=e.XpG();e.R7$(),e.Y8G("displayName",u.name)("relationsTpl",f),e.R7$(6),e.Y8G("nzTwotoneColor",e.bMT(8,6,"EvidenceItem")),e.R7$(2),e.SpI(" ",u.name," "),e.R7$(3),e.Y8G("ngIf",e.bMT(13,8,P.isSignedIn$))("ngIfElse",C)}}let L=(()=>{class a{constructor(u,f,C){this.gql=u,this.route=f,this.viewerService=C,this.routeSub=this.route.params.subscribe(P=>{let D=this.gql.watch({evidenceId:+P.evidenceId}).valueChanges;this.loading$=D.pipe((0,$.E)("loading"),(0,y.Z)(!0)),this.evidence$=D.pipe((0,$.E)("data","evidenceItem")),this.commentsTotal$=this.evidence$.pipe((0,$.E)("comments","totalCount")),this.flagsTotal$=this.evidence$.pipe((0,$.E)("flags","totalCount")),this.revisionsTotal$=this.evidence$.pipe((0,$.E)("revisions","totalCount"))})}ngOnInit(){this.isSignedIn$=this.viewerService.viewer$.pipe((0,E.T)(u=>u.signedIn))}ngOnDestroy(){this.routeSub.unsubscribe()}static{this.\u0275fac=function(f){return new(f||a)(e.rXU(O.fQd),e.rXU(v.nX),e.rXU(M.q))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["cvc-evidence-revise"]],decls:2,vars:3,consts:[["evidenceRelations",""],["notSignedIn",""],[4,"ngIf"],[3,"displayName","relationsTpl"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzTheme","twotone","nzType","civic-evidence",3,"nzTwotoneColor"],[1,"content"],[4,"ngIf","ngIfElse"],["nzDirection","horizontal"],["nz-typography","","class","label",4,"nzSpaceItem"],["class","tags",4,"nzSpaceItem"],["nz-typography","",1,"label"],[1,"tags"],[3,"molecularProfile","enablePopover"],["nzSpan","24","nzJustify","center"],["nz-col","","nzSpan","6"]],template:function(f,C){1&f&&(e.DNE(0,_,16,10,"ng-container",2),e.nI1(1,"async")),2&f&&e.Y8G("ngIf",e.bMT(1,1,C.evidence$))},dependencies:[t.bT,v.n3,l.WB,l.k9,l.zR,s.U5,s.Dq,r.Uq,r.e,o.Dn,c.Di,S.z,x.n,z.h,t.Jj,A.L9,w.R],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]})}}return a})();var b=n(5703),B=n(1912),U=n(1724);let G=(()=>{class a{static{this.\u0275fac=function(f){return new(f||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[t.MD,r.f3,b.Ti,B.i3,s.pc,U.y]})}}return a})();var j=n(6905);function K(a,I){if(1&a&&(e.qex(0),e.nrm(1,"cvc-evidence-revise-form",2),e.bVm()),2&a){const u=e.XpG();e.R7$(),e.Y8G("evidenceId",u.evidenceId)}}function W(a,I){1&a&&e.EFF(0,"Loading Evidence...")}const X=[{path:"",component:L,data:{breadcrumb:"Revise"},children:[{path:"",redirectTo:"suggest",pathMatch:"full"},{path:"suggest",component:(()=>{class a{constructor(u){this.route=u,this.routeParams$=this.route.params.subscribe(f=>{this.evidenceId=+f.evidenceId})}ngOnDestroy(){this.routeParams$.unsubscribe()}static{this.\u0275fac=function(f){return new(f||a)(e.rXU(v.nX))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["cvc-evidence-suggest"]],decls:3,vars:2,consts:[["loadingEvidence",""],[4,"ngIf","ngIfElse"],[3,"evidenceId"]],template:function(f,C){if(1&f&&e.DNE(0,K,2,1,"ng-container",1)(1,W,1,0,"ng-template",null,0,e.C5r),2&f){const P=e.sdS(2);e.Y8G("ngIf",C.evidenceId)("ngIfElse",P)}},dependencies:[t.bT,j._],encapsulation:2})}}return a})(),data:{breadcrumb:"Suggest Revision"}}]}];let Y=(()=>{class a{static{this.\u0275fac=function(f){return new(f||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[v.iI.forChild(X),G,v.iI]})}}return a})(),J=(()=>{class a{static{this.\u0275fac=function(f){return new(f||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[t.MD,Y,l.ZJ,s.pc,r.f3,o.Y3,c.kT,s.pc,p.o,h.i,i.C,d.K,g.A]})}}return a})()}}]);