"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[327],{7948:(Q,N,e)=>{e.d(N,{m:()=>_});var t=e(5e3),u=e(9808),o=e(125),n=e(3579),E=e(3193),T=e(8664),B=e(112),I=e(9001),P=e(2826),h=e(5749),D=e(8481),L=e(5017);function U(c,z){if(1&c&&(t.ynx(0),t._UZ(1,"span",2),t.BQk()),2&c){const s=t.oxw().$implicit;t.xp6(1),t.Q6J("innerHtml",s.text,t.oJD)}}function g(c,z){if(1&c&&(t.ynx(0),t._UZ(1,"cvc-user-tag",3),t.BQk()),2&c){const s=t.oxw().$implicit;t.xp6(1),t.Q6J("user",s)}}const M=function(c,z,s){return{id:c,name:z,link:s}};function v(c,z){if(1&c&&(t.TgZ(0,"span"),t._UZ(1,"cvc-revision-tag",6),t.qZA()),2&c){const s=t.oxw(2).$implicit;t.xp6(1),t.Q6J("revision",t.kEZ(1,M,s.entityId,s.displayName,s.link))}}function x(c,z){if(1&c&&(t.TgZ(0,"span"),t._UZ(1,"cvc-gene-tag",7),t.qZA()),2&c){const s=t.oxw(2).$implicit;t.xp6(1),t.Q6J("gene",t.kEZ(1,M,s.entityId,s.displayName,s.link))}}function Z(c,z){if(1&c&&(t.TgZ(0,"span"),t._UZ(1,"cvc-variant-tag",8),t.qZA()),2&c){const s=t.oxw(2).$implicit;t.xp6(1),t.Q6J("variant",t.kEZ(1,M,s.entityId,s.displayName,s.link))}}function S(c,z){if(1&c&&(t.TgZ(0,"span"),t._UZ(1,"cvc-variant-group-tag",9),t.qZA()),2&c){const s=t.oxw(2).$implicit;t.xp6(1),t.Q6J("variantgroup",t.kEZ(1,M,s.entityId,s.displayName,s.link))}}const W=function(c,z,s,$){return{id:c,name:z,status:s,link:$}};function y(c,z){if(1&c&&(t.TgZ(0,"span"),t._UZ(1,"cvc-evidence-tag",10),t.qZA()),2&c){const s=t.oxw(2).$implicit;t.xp6(1),t.Q6J("evidence",t.l5B(1,W,s.entityId,s.displayName,s.status,s.link))}}function R(c,z){if(1&c&&(t.TgZ(0,"span"),t._UZ(1,"cvc-assertion-tag",11),t.qZA()),2&c){const s=t.oxw(2).$implicit;t.xp6(1),t.Q6J("assertion",t.l5B(1,W,s.entityId,s.displayName,s.status,s.link))}}const l=function(c,z){return{id:c,name:z}};function p(c,z){if(1&c&&(t.TgZ(0,"span"),t._UZ(1,"cvc-organization-tag",12),t.qZA()),2&c){const s=t.oxw(2).$implicit;t.xp6(1),t.Q6J("org",t.WLB(1,l,s.entityId,s.displayName))}}function O(c,z){if(1&c&&(t.TgZ(0,"span")(1,"nz-tag"),t._UZ(2,"i",13),t._uU(3),t.qZA()()),2&c){const s=t.oxw(2).$implicit;t.xp6(2),t.MGl("nzType","civic-",s.displayName.slice(0,-1),""),t.xp6(1),t.hij(" ",s.displayName,"")}}function i(c,z){if(1&c&&(t.ynx(0)(1,4),t.YNc(2,v,2,5,"span",5),t.YNc(3,x,2,5,"span",5),t.YNc(4,Z,2,5,"span",5),t.YNc(5,S,2,5,"span",5),t.YNc(6,y,2,6,"span",5),t.YNc(7,R,2,6,"span",5),t.YNc(8,p,2,4,"span",5),t.YNc(9,O,4,2,"span",5),t.BQk()()),2&c){const s=t.oxw().$implicit;t.xp6(1),t.Q6J("ngSwitch",s.tagType),t.xp6(1),t.Q6J("ngSwitchCase","REVISION"),t.xp6(1),t.Q6J("ngSwitchCase","GENE"),t.xp6(1),t.Q6J("ngSwitchCase","VARIANT"),t.xp6(1),t.Q6J("ngSwitchCase","VARIANT_GROUP"),t.xp6(1),t.Q6J("ngSwitchCase","EVIDENCE_ITEM"),t.xp6(1),t.Q6J("ngSwitchCase","ASSERTION"),t.xp6(1),t.Q6J("ngSwitchCase","ORGANIZATION"),t.xp6(1),t.Q6J("ngSwitchCase","ROLE")}}function f(c,z){if(1&c&&(t.ynx(0),t.YNc(1,U,2,1,"ng-container",1),t.YNc(2,g,2,1,"ng-container",1),t.YNc(3,i,10,9,"ng-container",1),t.BQk()),2&c){const s=z.$implicit;t.xp6(1),t.Q6J("ngIf","CommentTextSegment"==s.__typename),t.xp6(1),t.Q6J("ngIf","User"==s.__typename),t.xp6(1),t.Q6J("ngIf","CommentTagSegment"==s.__typename)}}let _=(()=>{class c{ngOnInit(){if(void 0===this.commentBodySegments)throw new Error("Must pass a list of comment body segments into comment body component.")}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275cmp=t.Xpm({type:c,selectors:[["cvc-comment-body"]],inputs:{commentBodySegments:"commentBodySegments"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"innerHtml"],[3,"user"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"revision"],[3,"gene"],[3,"variant"],[3,"variantgroup"],[3,"evidence"],[3,"assertion"],[3,"org"],["nz-icon","","nzTheme","twotone","nzTwotoneColor","#A0D8F5",3,"nzType"]],template:function(s,$){1&s&&t.YNc(0,f,4,3,"ng-container",0),2&s&&t.Q6J("ngForOf",$.commentBodySegments)},directives:[u.sg,u.O5,o.I,u.RF,u.n9,n.p,E.H,T.I,B.u,I.O,P.w,h.m,D.j,L.Ls],styles:[""]}),c})()},8909:(Q,N,e)=>{e.d(N,{m:()=>U});var t=e(9808),u=e(7488),o=e(8369),n=e(209),E=e(4867),T=e(7677),B=e(3309),I=e(7345),P=e(9476),h=e(8481),D=e(5017),L=e(5e3);let U=(()=>{class g{}return g.\u0275fac=function(v){return new(v||g)},g.\u0275mod=L.oAB({type:g}),g.\u0275inj=L.cJS({imports:[[t.ez,h.X,D.PV,u.y,o.W,n.i,E.Q,T.G,B.U,I.W,P.L]]}),g})()},3801:(Q,N,e)=>{e.d(N,{D:()=>ln});var t=e(7630),u=e(4850),o=e(373),n=e(5e3),E=e(9808),T=e(1894),B=e(8144),I=e(7484),P=e(3762),h=e(6042),D=e(2683),L=e(1344),U=e(6699),g=e(7948),M=e(8625);function v(m,C){if(1&m&&n._UZ(0,"nz-avatar",4),2&m){const a=n.oxw();n.Q6J("nzSrc",a.comment.commenter.profileImagePath)}}function x(m,C){1&m&&n._UZ(0,"nz-avatar",5)}let Z=(()=>{class m{ngOnInit(){if(void 0===this.comment)throw new Error("Must pass a comment into comment display component.")}}return m.\u0275fac=function(a){return new(a||m)},m.\u0275cmp=n.Xpm({type:m,selectors:[["cvc-comment-display"]],inputs:{comment:"comment"},decls:7,vars:7,consts:[[3,"nzAuthor","nzDatetime"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],[3,"commentBodySegments"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","","nzIcon","civic:curator"]],template:function(a,r){if(1&a&&(n.TgZ(0,"nz-comment",0),n.ALo(1,"timeago"),n.YNc(2,v,1,1,"nz-avatar",1),n.YNc(3,x,1,0,"ng-template",null,2,n.W1O),n.TgZ(5,"nz-comment-content"),n._UZ(6,"cvc-comment-body",3),n.qZA()()),2&a){const d=n.MAs(4);n.Q6J("nzAuthor",r.comment.commenter.displayName)("nzDatetime",n.lcZ(1,5,r.comment.createdAt)),n.xp6(2),n.Q6J("ngIf",r.comment.commenter.profileImagePath)("ngIfElse",d),n.xp6(4),n.Q6J("commentBodySegments",r.comment.parsedComment)}},directives:[L.WE,E.O5,U.Dz,L.DA,L.Y4,g.m],pipes:[M.wr],styles:[""]}),m})();var S=e(8929),W=e(7625),y=e(6123),R=e(9350),l=e(9169),p=e(2359),O=e(3075),i=e(4546),f=e(822),_=e(9383),c=e(7525),z=e(9180),s=e(8227),$=e(2643),A=e(1793);function F(m,C){if(1&m){const a=n.EpF();n.TgZ(0,"nz-alert",7),n.NdJ("nzOnClose",function(){return n.CHM(a),n.oxw().onSuccessBannerClose()}),n.qZA()}}function K(m,C){if(1&m&&(n.TgZ(0,"nz-form-item"),n._UZ(1,"cvc-form-errors-alert",8),n.qZA()),2&m){const a=n.oxw();n.xp6(1),n.Q6J("errors",a.errorMessages)}}let Y=(()=>{class m{constructor(a,r,d){this.viewerService=a,this.addCommentGql=r,this.networkErrorService=d,this.commentAddedEvent=new n.vpe,this.destroy$=new S.xQ,this.success=!1,this.errorMessages=[],this.loading=!1,this.viewerService.viewer$.pipe((0,W.R)(this.destroy$)).subscribe(J=>{this.organizations=J.organizations,this.mostRecentOrg=J.mostRecentOrg}),this.addCommentMutator=new y.U(d)}selectOrg(a){this.mostRecentOrg=a}submitComment(){if(this.commentText){this.errorMessages=[];let r=this.addCommentMutator.mutate(this.addCommentGql,{input:{body:this.commentText,subject:this.subject,organizationId:void 0===this.mostRecentOrg?void 0:this.mostRecentOrg.id}});r.submitSuccess$.pipe((0,W.R)(this.destroy$)).subscribe(d=>{d&&(this.resetForm(),this.success=!0)}),r.submitError$.pipe((0,W.R)(this.destroy$)).subscribe(d=>{d&&(this.errorMessages=d,this.success=!1)}),r.isSubmitting$.pipe((0,W.R)(this.destroy$)).subscribe(d=>{this.loading=d})}}resetForm(){this.commentText="",this.commentAddedEvent.emit()}onSuccessBannerClose(){this.resetForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return m.\u0275fac=function(a){return new(a||m)(n.Y36(R.a),n.Y36(t.iGM),n.Y36(l.Y))},m.\u0275cmp=n.Xpm({type:m,selectors:[["cvc-comment-add-form"]],inputs:{subject:"subject"},outputs:{commentAddedEvent:"commentAddedEvent"},decls:12,vars:6,consts:[["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[4,"ngIf"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[3,"selectedOrg","selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"],["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose"],[3,"errors"]],template:function(a,r){1&a&&(n.TgZ(0,"nz-card"),n.YNc(1,F,1,0,"nz-alert",0),n.TgZ(2,"form",1),n.NdJ("ngSubmit",function(){return r.submitComment()}),n.YNc(3,K,2,1,"nz-form-item",2),n.TgZ(4,"cvc-comment-input-form",3),n.NdJ("commentChange",function(J){return r.commentText=J}),n.qZA(),n.TgZ(5,"nz-spin",4)(6,"nz-form-item")(7,"nz-form-control")(8,"cvc-form-buttons")(9,"cvc-org-selector-btn-group",5),n.NdJ("selectedOrgChange",function(J){return r.mostRecentOrg=J}),n.TgZ(10,"button",6),n._uU(11," Add Comment "),n.qZA()()()()()()()()),2&a&&(n.xp6(1),n.Q6J("ngIf",r.success),n.xp6(2),n.Q6J("ngIf",r.errorMessages.length>0),n.xp6(1),n.Q6J("comment",r.commentText),n.xp6(1),n.Q6J("nzSpinning",r.loading),n.xp6(4),n.Q6J("selectedOrg",r.mostRecentOrg),n.xp6(1),n.Q6J("disabled",r.loading||!(void 0!==r.commentText&&r.commentText.length>=10)))},directives:[I.bd,E.O5,p.r,O._Y,O.JL,O.F,i.Lr,T.SK,i.Nx,f.V,_.b,c.W,T.t3,i.Fd,z.Z,s.q,h.ix,$.dQ,A.m,D.w],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2}),m})();var G=e(8747),b=e(5017),j=e(6949),H=e(9058);function V(m,C){if(1&m){const a=n.EpF();n.TgZ(0,"div",18)(1,"button",19),n.NdJ("click",function(){n.CHM(a);const d=n.oxw().ngIf;return n.oxw(3).onLoadMore(d.startCursor)}),n._uU(2,"Load older comments "),n.qZA()()}}function w(m,C){if(1&m&&(n.TgZ(0,"nz-list-header"),n.YNc(1,V,3,0,"div",17),n.qZA()),2&m){const a=C.ngIf;n.xp6(1),n.Q6J("ngIf",a.hasPreviousPage)}}function X(m,C){if(1&m&&(n.TgZ(0,"nz-list-item"),n._UZ(1,"cvc-comment-display",20),n.qZA()),2&m){const a=C.$implicit;n.xp6(1),n.Q6J("comment",a)}}function q(m,C){if(1&m&&(n.TgZ(0,"nz-card",13)(1,"nz-list",14),n.ALo(2,"ngrxPush"),n.ALo(3,"ngrxPush"),n.YNc(4,w,2,1,"nz-list-header",15),n.ALo(5,"ngrxPush"),n.YNc(6,X,2,1,"ng-template",null,16,n.W1O),n.qZA()()),2&m){const a=n.MAs(7),r=n.oxw(2);n.xp6(1),n.Q6J("nzDataSource",n.lcZ(2,4,r.comments$))("nzLoading",n.lcZ(3,6,r.loading$))("nzRenderItem",a),n.xp6(3),n.Q6J("ngIf",n.lcZ(5,8,r.pageInfo$))}}function k(m,C){if(1&m){const a=n.EpF();n.TgZ(0,"cvc-comment-add-form",21),n.NdJ("commentAddedEvent",function(){return n.CHM(a),n.oxw(2).refreshList()}),n.qZA()}if(2&m){const a=n.oxw(2);n.Q6J("subject",a.commentable)}}function nn(m,C){if(1&m&&n._UZ(0,"nz-avatar",24),2&m){const a=n.oxw().$implicit;n.Q6J("nzSrc",a.profileImagePath)}}function tn(m,C){if(1&m&&(n._UZ(0,"nz-avatar",25),n.ALo(1,"uppercase")),2&m){const a=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,a.displayName.charAt(0)))}}function en(m,C){if(1&m&&(n.YNc(0,nn,1,1,"nz-avatar",22),n.YNc(1,tn,2,3,"ng-template",null,23,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&m){const a=C.$implicit,r=n.MAs(2);n.Q6J("ngIf",a.profileImagePath)("ngIfElse",r),n.xp6(4),n.Oqu(a.displayName)}}function on(m,C){if(1&m&&n._UZ(0,"nz-avatar",24),2&m){const a=n.oxw().$implicit;n.Q6J("nzSrc",a.profileImagePath)}}function an(m,C){if(1&m&&(n._UZ(0,"nz-avatar",25),n.ALo(1,"uppercase")),2&m){const a=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,a.displayName.charAt(0)))}}function mn(m,C){if(1&m&&(n.YNc(0,on,1,1,"nz-avatar",22),n.YNc(1,an,2,3,"ng-template",null,23,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&m){const a=C.$implicit,r=n.MAs(2);n.Q6J("ngIf",a.profileImagePath)("ngIfElse",r),n.xp6(4),n.Oqu(a.displayName)}}function cn(m,C){if(1&m&&(n._UZ(0,"nz-avatar",26),n.TgZ(1,"span"),n._uU(2),n.qZA()),2&m){const a=C.$implicit;n.MGl("nzIcon","civic-",a.tag.displayName,""),n.xp6(2),n.hij("",a.tag.displayName,"s")}}function sn(m,C){if(1&m&&(n._UZ(0,"i",27),n.ALo(1,"iconNameForSubscribableEntity"),n.TgZ(2,"span"),n._uU(3),n.qZA()),2&m){const a=C.$implicit;n.Q6J("nzType",n.lcZ(1,2,a.tag.tagType)),n.xp6(3),n.Oqu(a.tag.displayName)}}function rn(m,C){if(1&m){const a=n.EpF();n.ynx(0),n.TgZ(1,"nz-row",2)(2,"nz-col",3)(3,"nz-space",4),n.YNc(4,q,8,10,"nz-card",5),n.YNc(5,k,1,1,"cvc-comment-add-form",6),n.qZA()(),n.TgZ(6,"nz-col",7)(7,"cvc-participant-list",8),n.NdJ("participantSelectedEvent",function(d){return n.CHM(a),n.oxw().onCommenterSelected(d)}),n.ALo(8,"ngrxPush"),n.YNc(9,en,5,3,"ng-template",null,9,n.W1O),n.qZA(),n.TgZ(11,"cvc-participant-list",10),n.NdJ("participantSelectedEvent",function(d){return n.CHM(a),n.oxw().onMentionedUserSelected(d)}),n.ALo(12,"ngrxPush"),n.YNc(13,mn,5,3,"ng-template",null,9,n.W1O),n.qZA(),n.TgZ(15,"cvc-participant-list",11),n.NdJ("participantSelectedEvent",function(d){return n.CHM(a),n.oxw().onMentionedRoleSelected(d)}),n.ALo(16,"ngrxPush"),n.YNc(17,cn,3,2,"ng-template",null,9,n.W1O),n.qZA(),n.TgZ(19,"cvc-participant-list",12),n.NdJ("participantSelectedEvent",function(d){return n.CHM(a),n.oxw().onMentionedEntitySelected(d)}),n.ALo(20,"ngrxPush"),n.YNc(21,sn,4,4,"ng-template",null,9,n.W1O),n.qZA()()(),n.BQk()}if(2&m){const a=n.oxw();n.xp6(1),n.Q6J("nzGutter",16),n.xp6(6),n.Q6J("participantList",n.lcZ(8,5,a.commenters$)),n.xp6(4),n.Q6J("participantList",n.lcZ(12,7,a.mentionedUsers$)),n.xp6(4),n.Q6J("participantList",n.lcZ(16,9,a.mentionedRoles$)),n.xp6(4),n.Q6J("participantList",n.lcZ(20,11,a.mentionedEntities$))}}function _n(m,C){if(1&m){const a=n.EpF();n.TgZ(0,"cvc-comment-add-form",21),n.NdJ("commentAddedEvent",function(){return n.CHM(a),n.oxw().refreshList()}),n.qZA()}if(2&m){const a=n.oxw();n.Q6J("subject",a.commentable)}}let ln=(()=>{class m{constructor(a){this.gql=a,this.pageSize=5}ngOnInit(){this.queryRef$=this.gql.watch({subject:this.commentable,last:this.pageSize,sortBy:{column:t.h01.Created,direction:t.SrV.Asc}});let a=this.queryRef$.valueChanges;this.pageInfo$=a.pipe((0,u.U)(({data:r})=>r.comments.pageInfo)),this.loading$=a.pipe((0,u.U)(({loading:r})=>r)),this.comments$=a.pipe((0,u.U)(({data:r})=>r.comments.edges.map(d=>d.node))),this.commenters$=a.pipe((0,u.U)(({data:r})=>r.comments.uniqueCommenters)),this.mentionedUsers$=a.pipe((0,u.U)(({data:r})=>r.comments.mentionedUsers)),this.mentionedRoles$=a.pipe((0,u.U)(({data:r})=>r.comments.mentionedRoles.map(d=>({id:`${d.entityId}-${d.tagType}`,tag:d})))),this.mentionedEntities$=a.pipe((0,u.U)(({data:r})=>r.comments.mentionedEntities.map(d=>({id:`${d.entityId}-${d.tagType}`,tag:d})))),this.unfilteredCount$=a.pipe((0,o.j)("data","comments","unfilteredCountForSubject"))}onLoadMore(a){this.queryRef$.fetchMore({variables:{last:this.pageSize,before:a}})}onCommenterSelected(a){this.queryRef$.refetch({originatingUserId:null==a?void 0:a.id})}onMentionedUserSelected(a){this.queryRef$.refetch({mentionedUserId:null==a?void 0:a.id})}onMentionedRoleSelected(a){if(a){let r=t.i44[a.tag.displayName[0].toUpperCase()+a.tag.displayName.slice(1)];this.queryRef$.refetch({mentionedRole:r})}else this.queryRef$.refetch({mentionedRole:void 0})}onMentionedEntitySelected(a){this.queryRef$.refetch(a?{mentionedEntity:{entityType:a.tag.tagType,id:a.tag.entityId}}:{mentionedEntity:void 0})}refreshList(){this.queryRef$.refetch()}}return m.\u0275fac=function(a){return new(a||m)(n.Y36(t.iST))},m.\u0275cmp=n.Xpm({type:m,selectors:[["cvc-comment-list"]],inputs:{commentable:"commentable"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noComments",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical",2,"width","100%"],["nzTitle","Comments",4,"nzSpaceItem"],["id","addComment",3,"subject","commentAddedEvent",4,"nzSpaceItem"],["nzSpan","6"],["listTitle","Commenters",3,"participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Mentioned Users",3,"participantList","participantSelectedEvent"],["listTitle","Mentioned Roles",3,"participantList","participantSelectedEvent"],["listTitle","Mentioned Entities",3,"participantList","participantSelectedEvent"],["nzTitle","Comments"],["nzSize","small","nzItemLayout","horizontal",3,"nzDataSource","nzLoading","nzRenderItem"],[4,"ngIf"],["comment",""],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","link","nzSize","small","nzBlock","",3,"click"],[3,"comment"],["id","addComment",3,"subject","commentAddedEvent"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],[3,"nzIcon"],["nz-icon","",3,"nzType"]],template:function(a,r){if(1&a&&(n.YNc(0,rn,23,13,"ng-container",0),n.ALo(1,"ngrxPush"),n.YNc(2,_n,1,1,"ng-template",null,1,n.W1O)),2&a){const d=n.MAs(3);n.Q6J("ngIf",n.lcZ(1,2,r.unfilteredCount$))("ngIfElse",d)}},directives:[E.O5,T.SK,T.t3,B.NU,B.$1,I.bd,P.n_,P.t4,h.ix,D.w,P.AA,Z,Y,G.l,U.Dz,b.Ls],pipes:[j.fM,E.gd,H.j],styles:["[_nghost-%COMP%]{display:block}nz-list-header[_ngcontent-%COMP%]{padding:0;margin:0}nz-list-header[_ngcontent-%COMP%]   [nz-list-load-more][_ngcontent-%COMP%]{margin-top:-.5em;padding-bottom:.5em}"]}),m})()},2278:(Q,N,e)=>{e.d(N,{l:()=>$});var t=e(9808),u=e(1894),o=e(7484),n=e(3762),E=e(6699),T=e(8144),B=e(6949),I=e(6559),P=e(1150),h=e(1344),D=e(8625),L=e(7026),U=e(8909),g=e(5e3);let M=(()=>{class A{}return A.\u0275fac=function(K){return new(K||A)},A.\u0275mod=g.oAB({type:A}),A.\u0275inj=g.cJS({imports:[[t.ez,h.YM,E.Rt,D.$L.forChild({formatter:{useClass:L.x,provide:D.KP}}),U.m]]}),A})();var v=e(3075),x=e(8776),Z=e(4546),S=e(7008),W=e(1825),y=e(4375),R=e(6042),l=e(4623),p=e(868),O=e(7525),i=e(4921),f=e(4509),_=e(2359);let c=(()=>{class A{}return A.\u0275fac=function(K){return new(K||A)},A.\u0275mod=g.oAB({type:A}),A.\u0275inj=g.cJS({imports:[[t.ez,v.UX,B.WG,R.sL,o.vh,p.we,Z.U5,O.j,i.Gl,_.L,v.u5,x.X0,S.B,W.A,y.R,U.m,l.K,f.w]]}),A})();var z=e(5017),s=e(6905);let $=(()=>{class A{}return A.\u0275fac=function(K){return new(K||A)},A.\u0275mod=g.oAB({type:A}),A.\u0275inj=g.cJS({imports:[[t.ez,B.WG,R.sL,u.Jb,o.vh,n.Ph,z.PV,s.s,E.Rt,T.zf,I.H0,c,P.N,M]]}),A})()},2233:(Q,N,e)=>{e.d(N,{P:()=>U});var t=e(5e3),u=e(325),o=e(1894),n=e(868),E=e(9808),T=e(5017),B=e(4401);const I=["tabBarExtraContent"];function P(g,M){if(1&g&&t.GkF(0,5),2&g){const v=t.oxw();t.Q6J("ngTemplateOutlet",v.tabBarExtraContent||null)}}const h=function(){return{transform:"scale(0.75, 0.75) translate(0, -2px)"}};function D(g,M){if(1&g&&(t.TgZ(0,"a",7),t._UZ(1,"i",8),t._uU(2),t._UZ(3,"nz-badge",9),t.qZA()),2&g){const v=t.oxw().$implicit;t.Q6J("routerLink",v.routeName),t.xp6(1),t.Q6J("nzType",v.iconName),t.xp6(1),t.hij(" ",v.tabLabel," "),t.xp6(1),t.MGl("nzTitle","There are ",v.badgeCount," outstanding revisions."),t.Q6J("nzCount",v.badgeCount)("nzStyle",t.DdM(6,h))}}function L(g,M){1&g&&(t.TgZ(0,"nz-tab"),t.YNc(1,D,4,7,"a",6),t.qZA())}let U=(()=>{class g{constructor(v){this.router=v,this.selectedTabIndex=this.getActivatedRouteIndex(this.router.url)}getActivatedRouteIndex(v){var x;return null===(x=this.tabs)||void 0===x?void 0:x.findIndex(Z=>v.includes(Z.routeName))}}return g.\u0275fac=function(v){return new(v||g)(t.Y36(u.F0))},g.\u0275cmp=t.Xpm({type:g,selectors:[["cvc-tab-navigation"]],contentQueries:function(v,x,Z){if(1&v&&t.Suo(Z,I,5),2&v){let S;t.iGM(S=t.CRH())&&(x.tabBarExtraContent=S.first)}},inputs:{entity:"entity",tabs:"tabs"},decls:6,vars:3,consts:[["id","section-tabs"],["nzSpan","24"],["nzLinkRouter","","nzType","card","nzSize","small",3,"nzSelectedIndex","nzTabBarExtraContent"],["extraTpl",""],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["nz-tab-link","",3,"routerLink",4,"nzTabLink"],["nz-tab-link","",3,"routerLink"],["nz-icon","",3,"nzType"],["nzStandalone","",3,"nzCount","nzTitle","nzStyle"]],template:function(v,x){if(1&v&&(t.TgZ(0,"nz-row",0)(1,"nz-col",1)(2,"nz-tabset",2),t.YNc(3,P,1,1,"ng-template",null,3,t.W1O),t.YNc(5,L,2,0,"nz-tab",4),t.qZA()()()),2&v){const Z=t.MAs(4);t.xp6(2),t.Q6J("nzSelectedIndex",x.selectedTabIndex)("nzTabBarExtraContent",Z),t.xp6(3),t.Q6J("ngForOf",x.tabs)}},directives:[o.SK,o.t3,n.xH,E.tP,E.sg,n.xw,n.Fx,n.Ao,u.yS,T.Ls,B.x7],styles:["[_nghost-%COMP%]{display:block}"]}),g})()},8762:(Q,N,e)=>{e.d(N,{c:()=>P});var t=e(9808),u=e(868),o=e(1894),n=e(325),E=e(5017),T=e(6949),B=e(4401),I=e(5e3);let P=(()=>{class h{}return h.\u0275fac=function(L){return new(L||h)},h.\u0275mod=I.oAB({type:h}),h.\u0275inj=I.cJS({imports:[[t.ez,n.Bz,u.we,o.Jb,E.PV,B.mS,T.WG]]}),h})()},9058:(Q,N,e)=>{e.d(N,{j:()=>o});var t=e(7630),u=e(5e3);let o=(()=>{class n{transform(T){switch(T){case"ASSERTION":case"Assertion":case t.o71.Assertion:return"civic:assertion";case"EVIDENCE_ITEM":case"EvidenceItem":case t.o71.EvidenceItem:return"civic:evidence";case"GENE":case"Gene":case t.o71.Gene:return"civic:gene";case t.o71.Revision:case"REVISION":case"Revision":return"civic:revision";case t.o71.Variant:case"VARIANT":case"Variant":return"civic:variant";case t.o71.VariantGroup:case"VARIANT_GROUP":case"VariantGroup":return"civic:variant-group";default:return console.log("String No icon name found for "+T),"border-outer"}}}return n.\u0275fac=function(T){return new(T||n)},n.\u0275pipe=u.Yjl({name:"iconNameForSubscribableEntity",type:n,pure:!0}),n})()},9383:(Q,N,e)=>{e.d(N,{b:()=>W});var t=e(5e3),u=e(8929),o=e(7630),n=e(4850),E=e(7625),T=e(1059),B=e(9350),I=e(6949),P=e(868),h=e(4921),D=e(3075),L=e(9808),U=e(7525),g=e(7948);function M(y,R){if(1&y&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.BQk()),2&y){const l=R.$implicit;t.xp6(2),t.Oqu(l.displayName)}}function v(y,R){1&y&&(t.ynx(0),t._UZ(1,"nz-spin",8),t.BQk())}function x(y,R){if(1&y&&(t.ynx(0),t._UZ(1,"cvc-comment-body",9),t.BQk()),2&y){const l=R.ngIf;t.xp6(1),t.Q6J("commentBodySegments",l)}}const Z=function(){return["#","@","$"]};function S(y,R){if(1&y){const l=t.EpF();t.ynx(0),t.TgZ(1,"nz-tabset",1)(2,"nz-tab",2)(3,"nz-mention",3),t.NdJ("nzOnSearchChange",function(O){return t.CHM(l),t.oxw().onSearchChange(O)})("nzOnSelect",function(){return t.CHM(l),t.oxw().suggestions=[]}),t.TgZ(4,"textarea",4),t.NdJ("ngModelChange",function(O){return t.CHM(l),t.oxw().commentText=O})("ngModelChange",function(O){return t.CHM(l),t.oxw().onCommentChanged(O)}),t.qZA(),t.YNc(5,M,3,1,"ng-container",5),t.qZA()(),t.TgZ(6,"nz-tab",6),t.NdJ("nzClick",function(){return t.CHM(l),t.oxw().onPreviewButtonClicked()}),t.YNc(7,v,2,0,"ng-container",7),t.ALo(8,"ngrxPush"),t.YNc(9,x,2,1,"ng-container",7),t.ALo(10,"ngrxPush"),t.qZA()(),t.BQk()}if(2&y){const l=R.ngrxLet,p=t.oxw();t.xp6(1),t.Q6J("nzAnimated",!1),t.xp6(2),t.Q6J("nzSuggestions",p.suggestions)("nzPrefix",t.DdM(13,Z))("nzValueWith",p.autoCompleteValueFor),t.xp6(1),t.Q6J("placeholder",l&&l.canCurate?"Enter comment (minimum length 10. Use @ to mention users; # to link entities)":"Please sign in")("ngModel",p.commentText),t.uIk("disabled",!l||!l.canCurate||null),t.xp6(3),t.Q6J("ngIf",t.lcZ(8,9,p.previewLoading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(10,11,p.previewComment$))}}let W=(()=>{class y{constructor(l,p,O,i){this.previewCommentGql=l,this.userTypeaheadGql=p,this.entityTypeaheadGql=O,this.viewerService=i,this.commentChange=new t.vpe,this.destroy$=new u.xQ,this.suggestions=[],this.roleSuggestions=[{displayName:"admins",value:"admins"},{displayName:"editors",value:"editors"}]}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.commentText=this.comment,this.userTypeaheadQueryRef$=this.userTypeaheadGql.watch({queryTerm:""}),this.userTypeaheadQueryRef$.valueChanges.pipe((0,n.U)(({data:l})=>l.userTypeahead),(0,E.R)(this.destroy$)).subscribe(l=>this.suggestions=l.map(p=>({displayName:p.username,value:p.username}))),this.entityTypeaheadQueryRef$=this.entityTypeaheadGql.watch({queryTerm:""}),this.entityTypeaheadQueryRef$.valueChanges.pipe((0,n.U)(({data:l})=>l.entityTypeahead),(0,E.R)(this.destroy$)).subscribe(l=>this.suggestions=l.map(p=>({displayName:p.displayName,value:this.tagForEntityTypeAndId(p.tagType,p.entityId)})))}ngOnChanges(){this.commentText=this.comment}autoCompleteValueFor(l){return l.value}tagForEntityTypeAndId(l,p){switch(l){case o.mpB.Gene:return`GID${p}`;case o.mpB.Variant:return`VID${p}`;case o.mpB.VariantGroup:return`VGID${p}`;case o.mpB.EvidenceItem:return`EID${p}`;case o.mpB.Assertion:return`AID${p}`;case o.mpB.Revision:return`RID${p}`;case o.mpB.MolecularProfile:return`MPID${p}`;case o.mpB.Role:return Object.keys(o.i44)[p]}}resetForm(){this.commentText=""}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreviewButtonClicked(){this.commentText&&(this.previewComment$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,n.U)(({data:l})=>l.previewCommentText)),this.previewLoading$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,n.U)(({loading:l})=>l),(0,T.O)(!0)))}onSearchChange({value:l,prefix:p}){"@"===p?this.userTypeaheadQueryRef$.refetch({queryTerm:l}):"$"==p?this.suggestions=this.roleSuggestions.filter(O=>O.value.startsWith(l)):this.entityTypeaheadQueryRef$.refetch({queryTerm:l})}onCommentChanged(l){this.commentChange.emit(l)}}return y.\u0275fac=function(l){return new(l||y)(t.Y36(o.mII),t.Y36(o.vMt),t.Y36(o.GYx),t.Y36(B.a))},y.\u0275cmp=t.Xpm({type:y,selectors:[["cvc-comment-input-form"]],inputs:{comment:"comment"},outputs:{commentChange:"commentChange"},features:[t.TTD],decls:1,vars:1,consts:[[4,"ngrxLet"],[3,"nzAnimated"],["nzTitle","Write"],["nzNotFoundContent","No matches...",3,"nzSuggestions","nzPrefix","nzValueWith","nzOnSearchChange","nzOnSelect"],["nzMentionTrigger","","nz-input","","rows","4",2,"width","100%",3,"placeholder","ngModel","ngModelChange"],[4,"nzMentionSuggestion"],["nzTitle","Preview",3,"nzClick"],[4,"ngIf"],["nzTip","Loading..."],[3,"commentBodySegments"]],template:function(l,p){1&l&&t.YNc(0,S,11,14,"ng-container",0),2&l&&t.Q6J("ngrxLet",p.viewer$)},directives:[I.eJ,P.xH,P.xw,h.YW,h.jO,D.Fj,D.JJ,D.On,h.O3,L.O5,U.W,g.m],pipes:[I.fM],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2}),y})()},4509:(Q,N,e)=>{e.d(N,{w:()=>v});var t=e(9808),u=e(3075),o=e(7484),n=e(4546),E=e(7008),T=e(1825),B=e(4375),I=e(6042),P=e(4623),h=e(868),D=e(6949),L=e(8909),U=e(7525),g=e(4921),M=e(5e3);let v=(()=>{class x{}return x.\u0275fac=function(S){return new(S||x)},x.\u0275mod=M.oAB({type:x}),x.\u0275inj=M.cJS({imports:[[t.ez,u.UX,D.WG,I.sL,o.vh,h.we,n.U5,U.j,g.Gl,u.u5,E.B,T.A,B.R,L.m,P.K]]}),x})()},1344:(Q,N,e)=>{e.d(N,{DA:()=>S,WE:()=>l,Y4:()=>W,YM:()=>O});var t=e(226),u=e(9808),o=e(5e3),n=e(969),E=e(7429),T=e(8929),B=e(7625);function I(i,f){1&i&&o.Hsn(0)}const P=["*"];function h(i,f){if(1&i&&(o.ynx(0),o._uU(1),o.BQk()),2&i){const _=o.oxw(2);o.xp6(1),o.Oqu(_.nzAuthor)}}function D(i,f){if(1&i&&(o.TgZ(0,"span",8),o.YNc(1,h,2,1,"ng-container",9),o.qZA()),2&i){const _=o.oxw();o.xp6(1),o.Q6J("nzStringTemplateOutlet",_.nzAuthor)}}function L(i,f){if(1&i&&(o.ynx(0),o._uU(1),o.BQk()),2&i){const _=o.oxw(2);o.xp6(1),o.Oqu(_.nzDatetime)}}function U(i,f){if(1&i&&(o.TgZ(0,"span",10),o.YNc(1,L,2,1,"ng-container",9),o.qZA()),2&i){const _=o.oxw();o.xp6(1),o.Q6J("nzStringTemplateOutlet",_.nzDatetime)}}function g(i,f){}function M(i,f){if(1&i&&(o.TgZ(0,"li")(1,"span"),o.YNc(2,g,0,0,"ng-template",13),o.qZA()()),2&i){const _=f.$implicit;o.xp6(2),o.Q6J("nzCommentActionHost",_.content)}}function v(i,f){if(1&i&&(o.TgZ(0,"ul",11),o.YNc(1,M,3,1,"li",12),o.qZA()),2&i){const _=o.oxw();o.xp6(1),o.Q6J("ngForOf",_.actions)}}const x=[[["nz-avatar","nz-comment-avatar",""]],[["nz-comment-content"]],"*"],Z=["nz-avatar[nz-comment-avatar]","nz-comment-content","*"];let S=(()=>{class i{}return i.\u0275fac=function(_){return new(_||i)},i.\u0275dir=o.lG2({type:i,selectors:[["nz-avatar","nz-comment-avatar",""]],exportAs:["nzCommentAvatar"]}),i})(),W=(()=>{class i{}return i.\u0275fac=function(_){return new(_||i)},i.\u0275dir=o.lG2({type:i,selectors:[["nz-comment-content"],["","nz-comment-content",""]],hostAttrs:[1,"ant-comment-content-detail"],exportAs:["nzCommentContent"]}),i})(),y=(()=>{class i extends E.Pl{constructor(_,c){super(_,c)}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}ngAfterViewInit(){this.attach(this.nzCommentActionHost)}}return i.\u0275fac=function(_){return new(_||i)(o.Y36(o._Vd),o.Y36(o.s_b))},i.\u0275dir=o.lG2({type:i,selectors:[["","nzCommentActionHost",""]],inputs:{nzCommentActionHost:"nzCommentActionHost"},exportAs:["nzCommentActionHost"],features:[o.qOj]}),i})(),R=(()=>{class i{constructor(_){this.viewContainerRef=_,this.contentPortal=null}get content(){return this.contentPortal}ngOnInit(){this.contentPortal=new E.UE(this.implicitContent,this.viewContainerRef)}}return i.\u0275fac=function(_){return new(_||i)(o.Y36(o.s_b))},i.\u0275cmp=o.Xpm({type:i,selectors:[["nz-comment-action"]],viewQuery:function(_,c){if(1&_&&o.Gf(o.Rgc,7),2&_){let z;o.iGM(z=o.CRH())&&(c.implicitContent=z.first)}},exportAs:["nzCommentAction"],ngContentSelectors:P,decls:1,vars:0,template:function(_,c){1&_&&(o.F$t(),o.YNc(0,I,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),i})(),l=(()=>{class i{constructor(_,c){this.cdr=_,this.directionality=c,this.dir="ltr",this.destroy$=new T.xQ}ngOnInit(){var _;null===(_=this.directionality.change)||void 0===_||_.pipe((0,B.R)(this.destroy$)).subscribe(c=>{this.dir=c,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(_){return new(_||i)(o.Y36(o.sBO),o.Y36(t.Is,8))},i.\u0275cmp=o.Xpm({type:i,selectors:[["nz-comment"]],contentQueries:function(_,c,z){if(1&_&&o.Suo(z,R,4),2&_){let s;o.iGM(s=o.CRH())&&(c.actions=s)}},hostVars:4,hostBindings:function(_,c){2&_&&o.ekj("ant-comment",!0)("ant-comment-rtl","rtl"===c.dir)},inputs:{nzAuthor:"nzAuthor",nzDatetime:"nzDatetime"},exportAs:["nzComment"],ngContentSelectors:Z,decls:11,vars:3,consts:[[1,"ant-comment-inner"],[1,"ant-comment-avatar"],[1,"ant-comment-content"],[1,"ant-comment-content-author"],["class","ant-comment-content-author-name",4,"ngIf"],["class","ant-comment-content-author-time",4,"ngIf"],["class","ant-comment-actions",4,"ngIf"],[1,"ant-comment-nested"],[1,"ant-comment-content-author-name"],[4,"nzStringTemplateOutlet"],[1,"ant-comment-content-author-time"],[1,"ant-comment-actions"],[4,"ngFor","ngForOf"],[3,"nzCommentActionHost"]],template:function(_,c){1&_&&(o.F$t(x),o.TgZ(0,"div",0)(1,"div",1),o.Hsn(2),o.qZA(),o.TgZ(3,"div",2)(4,"div",3),o.YNc(5,D,2,1,"span",4),o.YNc(6,U,2,1,"span",5),o.qZA(),o.Hsn(7,1),o.YNc(8,v,2,1,"ul",6),o.qZA()(),o.TgZ(9,"div",7),o.Hsn(10,2),o.qZA()),2&_&&(o.xp6(5),o.Q6J("ngIf",c.nzAuthor),o.xp6(1),o.Q6J("ngIf",c.nzDatetime),o.xp6(2),o.Q6J("ngIf",null==c.actions?null:c.actions.length))},directives:[u.O5,n.f,u.sg,y],encapsulation:2,changeDetection:0}),i})(),O=(()=>{class i{}return i.\u0275fac=function(_){return new(_||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[[t.vT,u.ez,n.T]]}),i})()}}]);