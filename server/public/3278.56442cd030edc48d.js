"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[3278],{9814:(X,y,e)=>{e.d(y,{O:()=>Z});var S=e(655),T=e(3154),d=e(7630),m=e(4987),x=e(591),C=e(8929),f=e(3240),h=e(4850),_=e(373),M=e(5778),A=e(4290),J=e(1307),p=e(2198),Q=e(13),N=e(7168),t=e(5e3),r=e(9350),g=e(9808),z=e(7484),E=e(5851),u=e(1132),$=e(727),Y=e(7451),F=e(404),w=e(2683),H=e(5017),I=e(8054),v=e(3075),R=e(2166),V=e(8481),b=e(6906),B=e(125),D=e(3193),W=e(8664),j=e(4022),U=e(6042),L=e(2643),G=e(325),K=e(3610),l=e(7625),O=e(6123),P=e(9169),q=e(8144),k=e(2359),tt=e(822),nt=e(1047),et=e(7525),ot=e(9180),ct=e(8227),at=e(1793);function it(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"nz-alert",6),t.NdJ("nzOnClose",function(){return t.CHM(n),t.oxw().onSuccessBannerClose()}),t.qZA()}}function st(o,c){if(1&o&&t._UZ(0,"cvc-form-errors-alert",7),2&o){const n=t.oxw();t.Q6J("errors",n.errorMessages)}}function rt(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"textarea",8),t.NdJ("ngModelChange",function(a){return t.CHM(n),t.oxw().reason=a}),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("ngModel",n.reason)}}function lt(o,c){1&o&&t._UZ(0,"nz-option",13)}function gt(o,c){1&o&&t._UZ(0,"nz-option",14)}function ut(o,c){1&o&&t._UZ(0,"nz-option",15)}function pt(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"nz-select",9),t.NdJ("ngModelChange",function(a){return t.CHM(n),t.oxw().newStatus=a}),t.YNc(1,lt,1,0,"nz-option",10),t.YNc(2,gt,1,0,"nz-option",11),t.YNc(3,ut,1,0,"nz-option",12),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("ngModel",n.newStatus),t.xp6(1),t.Q6J("ngIf","NEW"==n.currentStatus),t.xp6(1),t.Q6J("ngIf","NEW"!=n.currentStatus),t.xp6(1),t.Q6J("ngIf","NEW"==n.currentStatus)}}function dt(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"nz-spin",16)(1,"cvc-form-buttons")(2,"cvc-org-selector-btn-group",17),t.NdJ("selectedOrgChange",function(a){return t.CHM(n),t.oxw().mostRecentOrg=a}),t.TgZ(3,"button",18),t.NdJ("click",function(){return t.CHM(n),t.oxw().updateSourceSuggestionStatus()}),t._uU(4," Update Source Suggestion status "),t.qZA()()()()}if(2&o){const n=t.oxw();t.Q6J("nzSpinning",n.loading),t.xp6(2),t.Q6J("selectedOrg",n.mostRecentOrg),t.xp6(1),t.Q6J("disabled",n.loading)}}let mt=(()=>{class o{constructor(n,i,a){this.viewerService=n,this.networkErrorService=i,this.updateSuggestionStatusGql=a,this.commentAddedEvent=new t.vpe,this.destroy$=new C.xQ,this.success=!1,this.errorMessages=[],this.loading=!1,this.viewerService.viewer$.pipe((0,l.R)(this.destroy$)).subscribe(s=>{this.organizations=s.organizations,this.mostRecentOrg=s.mostRecentOrg}),this.sourceSuggestionStatusMutator=new O.U(i)}selectOrg(n){this.mostRecentOrg=n}updateSourceSuggestionStatus(){var n;if(this.newStatus){let i=this.sourceSuggestionStatusMutator.mutate(this.updateSuggestionStatusGql,{input:{id:this.sourceSuggestionId,newStatus:this.newStatus,reason:this.reason,organizationId:null===(n=this.mostRecentOrg)||void 0===n?void 0:n.id}});i.submitSuccess$.pipe((0,l.R)(this.destroy$)).subscribe(a=>{this.resetForm(),this.success=!0}),i.submitError$.pipe((0,l.R)(this.destroy$)).subscribe(a=>{a&&(this.errorMessages=a)}),i.isSubmitting$.pipe((0,l.R)(this.destroy$)).subscribe(a=>{this.loading=a})}}resetForm(){this.commentText=""}onSuccessBannerClose(){this.resetForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(r.a),t.Y36(P.Y),t.Y36(d.wRZ))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-update-source-suggestion-form"]],inputs:{sourceSuggestionId:"sourceSuggestionId",currentStatus:"currentStatus"},outputs:{commentAddedEvent:"commentAddedEvent"},decls:7,vars:2,consts:[["nzDirection","vertical"],["nzBanner","","nzMessage","Status Updated","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],[3,"errors",4,"ngIf"],["rows","4","nz-input","",3,"ngModel","ngModelChange",4,"nzSpaceItem"],["nzPlaceHolder","New Status","required","true",3,"ngModel","ngModelChange",4,"nzSpaceItem"],["nzTip","Submitting",3,"nzSpinning",4,"nzSpaceItem"],["nzBanner","","nzMessage","Status Updated","nzType","success","nzCloseable","",3,"nzOnClose"],[3,"errors"],["rows","4","nz-input","",3,"ngModel","ngModelChange"],["nzPlaceHolder","New Status","required","true",3,"ngModel","ngModelChange"],["nzValue","CURATED","nzLabel","Curated",4,"ngIf"],["nzValue","NEW","nzLabel","New",4,"ngIf"],["nzValue","REJECTED","nzLabel","Rejected",4,"ngIf"],["nzValue","CURATED","nzLabel","Curated"],["nzValue","NEW","nzLabel","New"],["nzValue","REJECTED","nzLabel","Rejected"],["nzTip","Submitting",3,"nzSpinning"],[3,"selectedOrg","selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled","click"]],template:function(n,i){1&n&&(t.TgZ(0,"nz-card")(1,"nz-space",0),t.YNc(2,it,1,0,"nz-alert",1),t.YNc(3,st,1,1,"cvc-form-errors-alert",2),t.YNc(4,rt,1,1,"textarea",3),t.YNc(5,pt,4,4,"nz-select",4),t.YNc(6,dt,5,3,"nz-spin",5),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("ngIf",i.success),t.xp6(1),t.Q6J("ngIf",i.errorMessages.length))},directives:[z.bd,q.NU,g.O5,k.r,tt.V,q.$1,nt.Zp,v.Fj,v.JJ,v.On,I.Vq,v.Q7,I.Ip,et.W,ot.Z,ct.q,U.ix,L.dQ,at.m,w.w],styles:[""],encapsulation:2}),o})();var _t=e(3667),vt=e(3388),Ct=e(6949),ht=e(160);function zt(o,c){}function St(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"nz-card",6),t.YNc(2,zt,0,0,"ng-template",7),t.qZA(),t.BQk()),2&o){t.oxw();const n=t.MAs(8),i=t.MAs(10),a=t.MAs(4);t.xp6(1),t.Q6J("nzTitle",n)("nzExtra",i),t.xp6(1),t.Q6J("ngTemplateOutlet",a)}}function Tt(o,c){}const xt=function(o){return{height:o}};function ft(o,c){if(1&o&&(t.TgZ(0,"div",8)(1,"nz-card",9),t.YNc(2,Tt,0,0,"ng-template",7),t.qZA()()),2&o){const n=t.oxw(),i=t.MAs(8),a=t.MAs(10),s=t.MAs(4);t.Q6J("ngStyle",t.VKq(4,xt,n.cvcHeight)),t.xp6(1),t.Q6J("nzTitle",i)("nzExtra",a),t.xp6(1),t.Q6J("ngTemplateOutlet",s)}}function Mt(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"cvc-clearable-input-filter",30),t.NdJ("inputModelChange",function(a){return t.CHM(n),t.oxw(2).submitterInput=a})("inputModelChange",function(){return t.CHM(n),t.oxw(2).filterChange$.next()}),t.qZA()}if(2&o){const n=t.oxw(2);t.Q6J("inputModel",n.submitterInput)}}function Zt(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"nz-tag",54),t._uU(2),t.ALo(3,"lowercase"),t.qZA(),t.BQk()),2&o){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,n.status)," ")}}function It(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"nz-tag",55),t._uU(2),t.ALo(3,"lowercase"),t.qZA(),t.BQk()),2&o){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,n.status)," ")}}function bt(o,c){if(1&o&&t._UZ(0,"i",58),2&o){const n=t.oxw(2).$implicit,i=t.oxw(2);t.Q6J("nzTooltipTitle",i.isScrolling?"":n.reason)}}function yt(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"nz-tag",56),t.YNc(2,bt,1,1,"i",57),t._uU(3),t.ALo(4,"lowercase"),t.qZA(),t.BQk()),2&o){const n=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",n.reason&&""!=n.reason),t.xp6(1),t.hij(" ",t.lcZ(4,2,n.status)," ")}}function At(o,c){if(1&o&&t._UZ(0,"cvc-source-tag",59),2&o){const n=t.oxw().$implicit;t.Q6J("source",n.source)}}function Jt(o,c){if(1&o&&t._UZ(0,"cvc-user-tag",60),2&o){const n=t.oxw().$implicit;t.Q6J("user",n.user)}}function Qt(o,c){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.source.displayType," ")}}function Nt(o,c){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.source.citationId," ")}}function Ut(o,c){if(1&o&&t._UZ(0,"cvc-gene-tag",61),2&o){const n=t.oxw().$implicit;t.Q6J("gene",n.gene)}}function Ot(o,c){if(1&o&&t._UZ(0,"cvc-variant-tag",62),2&o){const n=t.oxw().$implicit;t.Q6J("variant",n.variant)("truncateLongName",!0)}}function Pt(o,c){if(1&o&&t._UZ(0,"cvc-disease-tag",63),2&o){const n=t.oxw().$implicit;t.Q6J("disease",n.disease)("truncateLongName",!0)}}const $t=function(o,c,n,i){return{geneId:o,sourceId:c,variantId:n,diseaseId:i}};function Ft(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"nz-button-group")(1,"button",64),t._UZ(2,"i",65),t.qZA(),t.TgZ(3,"button",66),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().$implicit;return t.oxw(2).setFormInputs(a.id,a.status)}),t._UZ(4,"i",67),t.qZA()()}if(2&o){const n=t.oxw().$implicit,i=t.oxw(2),a=t.MAs(6);t.xp6(1),t.Q6J("queryParams",t.l5B(7,$t,null==n.gene?null:n.gene.id,null==n.source?null:n.source.id,null==n.variant?null:n.variant.id,null==n.disease?null:n.disease.id))("disabled",n.status!=i.status.New)("nzTooltipTitle",i.isScrolling?"":"Create Evidence with this Source")("nzTooltipMouseEnterDelay",1),t.xp6(2),t.Q6J("nzTooltipTitle",i.isScrolling?"":"Manage Source Suggestion")("nzTooltipMouseEnterDelay",1)("nzPopoverContent",a)}}function wt(o,c){1&o&&(t.ynx(0),t._uU(1," -- "),t.BQk())}function Lt(o,c){if(1&o&&(t.TgZ(0,"tr",41)(1,"td",42),t.ynx(2,43),t.ALo(3,"lowercase"),t.YNc(4,Zt,4,3,"ng-container",44),t.YNc(5,It,4,3,"ng-container",44),t.YNc(6,yt,5,4,"ng-container",44),t.BQk(),t.qZA(),t.TgZ(7,"td",25),t.YNc(8,At,1,1,"cvc-source-tag",45),t.qZA(),t.TgZ(9,"td",46),t._UZ(10,"i",17),t.ALo(11,"entityColor"),t.qZA(),t.TgZ(12,"td"),t.YNc(13,Jt,1,1,"cvc-user-tag",47),t.qZA(),t.TgZ(14,"td"),t.YNc(15,Qt,2,1,"ng-container",48),t.qZA(),t.TgZ(16,"td"),t.YNc(17,Nt,2,1,"ng-container",48),t.qZA(),t.TgZ(18,"td"),t.YNc(19,Ut,1,1,"cvc-gene-tag",49),t.qZA(),t.TgZ(20,"td"),t.YNc(21,Ot,1,2,"cvc-variant-tag",50),t.qZA(),t.TgZ(22,"td"),t.YNc(23,Pt,1,2,"cvc-disease-tag",51),t.qZA(),t.TgZ(24,"td",52),t._uU(25),t.ALo(26,"date"),t.qZA(),t.TgZ(27,"td",53),t.YNc(28,Ft,5,12,"nz-button-group",48),t.YNc(29,wt,2,0,"ng-container",48),t.qZA()()),2&o){const n=c.$implicit,i=t.oxw(2);t.xp6(2),t.Q6J("ngSwitch",t.lcZ(3,16,n.status)),t.xp6(2),t.Q6J("ngSwitchCase","curated"),t.xp6(1),t.Q6J("ngSwitchCase","new"),t.xp6(1),t.Q6J("ngSwitchCase","rejected"),t.xp6(2),t.Q6J("ngIf",n.source),t.xp6(1),t.Q6J("nzTooltipTitle",i.isScrolling?"":n.initialComment),t.xp6(1),t.Q6J("nzTwotoneColor",t.lcZ(11,18,"Comment")),t.xp6(3),t.Q6J("ngIf",n.user),t.xp6(2),t.Q6J("ngIf",n.source),t.xp6(2),t.Q6J("ngIf",n.source),t.xp6(2),t.Q6J("ngIf",n.gene),t.xp6(2),t.Q6J("ngIf",n.variant),t.xp6(2),t.Q6J("ngIf",n.disease),t.xp6(2),t.hij(" ",t.lcZ(26,20,n.createdAt)," "),t.xp6(3),t.Q6J("ngIf",i.isSignedIn),t.xp6(1),t.Q6J("ngIf",!i.isSignedIn)}}const Et=function(){return{x:"680px",y:"800px"}},Yt=function(){return["descend","ascend",null]};function Ht(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"nz-table",10,11),t.NdJ("cvcTableScrollOnScroll",function(a){return t.CHM(n),t.oxw().scrollEvent$.next(a)}),t.ALo(2,"ngrxPush"),t.ALo(3,"ngrxPush"),t.ALo(4,"ngrxPush"),t.ALo(5,"ngrxPush"),t.TgZ(6,"thead",12),t.NdJ("nzSortOrderChange",function(a){return t.CHM(n),t.oxw().sortChange$.next(a)}),t.TgZ(7,"tr",13)(8,"th",14),t._uU(9," Status "),t.qZA(),t.TgZ(10,"th",15),t._uU(11," Citation "),t.qZA(),t.TgZ(12,"th",16),t._UZ(13,"i",17),t.ALo(14,"entityColor"),t.qZA(),t.TgZ(15,"th",18),t._uU(16," Submitter "),t.qZA(),t.TgZ(17,"th",19),t._uU(18," Type "),t.qZA(),t.TgZ(19,"th",19),t._uU(20," ID "),t.qZA(),t.TgZ(21,"th",20),t._uU(22," Gene "),t.qZA(),t.TgZ(23,"th",21),t._uU(24," Variant "),t.qZA(),t.TgZ(25,"th",18),t._uU(26," Disease "),t.qZA(),t.TgZ(27,"th",22),t._uU(28," Submitted "),t.qZA(),t.TgZ(29,"th",23),t._uU(30," Actions "),t.qZA()(),t.TgZ(31,"tr",24)(32,"th",25)(33,"nz-select",26),t.NdJ("ngModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()})("ngModelChange",function(a){return t.CHM(n),t.oxw().statusInput=a}),t._UZ(34,"nz-option",27)(35,"nz-option",28)(36,"nz-option",29),t.qZA()(),t.TgZ(37,"th",25)(38,"cvc-clearable-input-filter",30),t.NdJ("inputModelChange",function(a){return t.CHM(n),t.oxw().citationInput=a})("inputModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()}),t.qZA()(),t._UZ(39,"th"),t.TgZ(40,"th"),t.YNc(41,Mt,1,1,"cvc-clearable-input-filter",31),t.qZA(),t.TgZ(42,"th")(43,"nz-select",32),t.NdJ("ngModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()})("ngModelChange",function(a){return t.CHM(n),t.oxw().sourceTypeInput=a}),t._UZ(44,"nz-option",33)(45,"nz-option",34),t.qZA()(),t.TgZ(46,"th")(47,"cvc-clearable-input-filter",35),t.NdJ("inputModelChange",function(a){return t.CHM(n),t.oxw().citationIdInput=a})("inputModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()}),t.qZA()(),t.TgZ(48,"th")(49,"cvc-clearable-input-filter",36),t.NdJ("inputModelChange",function(a){return t.CHM(n),t.oxw().geneNameInput=a})("inputModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()}),t.qZA()(),t.TgZ(50,"th")(51,"cvc-clearable-input-filter",37),t.NdJ("inputModelChange",function(a){return t.CHM(n),t.oxw().variantNameInput=a})("inputModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()}),t.qZA()(),t.TgZ(52,"th")(53,"cvc-clearable-input-filter",38),t.NdJ("inputModelChange",function(a){return t.CHM(n),t.oxw().diseaseNameInput=a})("inputModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()}),t.qZA()(),t._UZ(54,"th")(55,"th",39),t.qZA()(),t.TgZ(56,"tbody"),t.YNc(57,Lt,30,22,"ng-template",40),t.qZA()()}if(2&o){const n=t.oxw();t.Q6J("nzData",t.lcZ(2,38,n.row$))("nzLoading",t.lcZ(3,40,n.initialLoading$))("cvcAutoHeightTable",25)("nzVirtualItemSize",29)("cvcTableScrollQueryRef",n.queryRef)("cvcTableScrollPageInfo",t.lcZ(4,42,n.pageInfo$))("cvcTableScrollToIndex",t.lcZ(5,44,n.scrollIndex$))("nzVirtualForTrackBy",n.trackByIndex)("nzScroll",t.DdM(48,Et))("nzFrontPagination",!1)("nzShowPagination",!1),t.xp6(10),t.Q6J("nzColumnKey",n.sortColumns.Citation)("nzSortFn",!0),t.xp6(3),t.Q6J("nzTwotoneColor",t.lcZ(14,46,"Comment")),t.xp6(2),t.Q6J("nzColumnKey",n.sortColumns.Submitter)("nzSortFn",!0),t.xp6(2),t.Q6J("nzColumnKey",n.sortColumns.SourceType)("nzSortFn",!0),t.xp6(2),t.Q6J("nzColumnKey",n.sortColumns.CitationId)("nzSortFn",!0),t.xp6(2),t.Q6J("nzColumnKey",n.sortColumns.GeneName)("nzSortFn",!0),t.xp6(2),t.Q6J("nzColumnKey",n.sortColumns.VariantName)("nzSortFn",!0),t.xp6(2),t.Q6J("nzColumnKey",n.sortColumns.DiseaseName)("nzSortFn",!0),t.xp6(2),t.Q6J("nzColumnKey",n.sortColumns.CreatedAt)("nzSortDirections",t.DdM(49,Yt))("nzSortFn",!0),t.xp6(6),t.Q6J("nzDropdownMatchSelectWidth",!1)("ngModel",n.statusInput),t.xp6(5),t.Q6J("inputModel",n.citationInput),t.xp6(3),t.Q6J("ngIf",!n.submitterId),t.xp6(2),t.Q6J("ngModel",n.sourceTypeInput),t.xp6(4),t.Q6J("inputModel",n.citationIdInput),t.xp6(2),t.Q6J("inputModel",n.geneNameInput),t.xp6(2),t.Q6J("inputModel",n.variantNameInput),t.xp6(2),t.Q6J("inputModel",n.diseaseNameInput)}}function Rt(o,c){if(1&o&&t._UZ(0,"cvc-update-source-suggestion-form",69),2&o){const n=t.oxw(2);t.Q6J("currentStatus",n.selectedStatus)("sourceSuggestionId",n.selectedSourceId)}}function Vt(o,c){if(1&o&&t.YNc(0,Rt,1,2,"cvc-update-source-suggestion-form",68),2&o){const n=t.oxw();t.Q6J("ngIf",n.selectedSourceId&&n.selectedStatus)}}function Bt(o,c){}function Dt(o,c){if(1&o&&(t.ynx(0),t.YNc(1,Bt,0,0,"ng-template",7),t.BQk()),2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("ngTemplateOutlet",n.cvcTitleTemplate)}}function Wt(o,c){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.cvcTitle," ")}}function jt(o,c){if(1&o&&(t._UZ(0,"i",70),t.ALo(1,"entityColor"),t.YNc(2,Dt,2,1,"ng-container",48),t.YNc(3,Wt,2,1,"ng-container",48),t.TgZ(4,"span",71),t._UZ(5,"cvc-table-counts",72),t.qZA()),2&o){const n=t.oxw();t.Q6J("nzTwotoneColor",t.lcZ(1,4,"Source")),t.xp6(2),t.Q6J("ngIf",n.cvcTitleTemplate),t.xp6(1),t.Q6J("ngIf",n.cvcTitle),t.xp6(2),t.Q6J("cvcTableCountsConnection",n.connection$)}}function Gt(o,c){1&o&&(t.TgZ(0,"nz-tag",75),t._UZ(1,"i",76),t.TgZ(2,"span"),t._uU(3,"Loading\u2026"),t.qZA()())}function Kt(o,c){if(1&o&&(t.YNc(0,Gt,4,0,"nz-tag",73),t.ALo(1,"ngrxPush"),t._UZ(2,"cvc-no-more-rows",74),t.ALo(3,"ngrxPush")),2&o){const n=t.oxw();t.Q6J("ngIf",t.lcZ(1,2,n.moreLoading$)),t.xp6(2),t.Q6J("cvcShowTag",t.lcZ(3,4,n.noMoreRows$))}}let Z=class{constructor(c,n,i){this.gql=c,this.viewerService=n,this.cdr=i,this.initialPageSize=35,this.isScrolling=!1,this.statusInput=d.F3s.New,this.sortColumns=d.jw9,this.status=d.F3s,this.showManageForm=!1,this.noMoreRows$=new x.X(!1),this.scrollEvent$=new x.X("stop"),this.sortChange$=new C.xQ,this.filterChange$=new C.xQ,this.scrollIndex$=new C.xQ,this.viewerService.viewer$.pipe((0,h.U)(a=>a.signedIn),(0,m.t)(this)).subscribe(a=>this.isSignedIn=a)}set initialUserFilters(c){c&&Object.assign(this,c)}ngOnInit(){this.queryRef=this.gql.watch({first:this.initialPageSize,sourceId:this.sourceId,submitterId:this.submitterId,status:this.status.New,sortBy:{column:this.sortColumns.CreatedAt,direction:d.SrV.Desc}}),this.result$=this.queryRef.valueChanges,this.initialLoading$=this.result$.pipe((0,_.j)("loading"),(0,M.x)(),(0,A.o)(c=>!1!==c,!0)),this.moreLoading$=this.result$.pipe((0,_.j)("loading"),(0,M.x)(),(0,J.T)(2)),this.connection$=this.result$.pipe((0,_.j)("data","sourceSuggestions"),(0,p.h)(f.ep)),this.row$=this.connection$.pipe((0,_.j)("edges"),(0,p.h)(f.ep),(0,h.U)(c=>c.map(n=>n.node))),this.pageInfo$=this.connection$.pipe((0,_.j)("pageInfo"),(0,p.h)(f.ep)),this.sortChange$.pipe((0,m.t)(this)).subscribe(c=>{this.queryRef.refetch({sortBy:(0,T._)(c)})}),this.filterChange$.pipe((0,Q.b)(500),(0,m.t)(this)).subscribe(()=>{this.refresh()}),this.scrollEvent$.pipe((0,h.U)(c=>"stop"!==c),(0,M.x)(),(0,m.t)(this)).subscribe(c=>{this.isScrolling=c,this.cdr.detectChanges()}),this.scrollEvent$.pipe((0,p.h)(c=>"bottom"===c),(0,N.M)(this.pageInfo$),(0,h.U)(([c,n])=>n),(0,m.t)(this)).subscribe(c=>{c.hasNextPage||(this.noMoreRows$.next(!0),this.cdr.detectChanges(),setInterval(()=>this.noMoreRows$.next(!1)))})}refresh(){this.queryRef.refetch({citationId:this.citationIdInput?+this.citationIdInput:void 0,sourceType:this.sourceTypeInput?this.sourceTypeInput:void 0,sourceId:this.sourceIdInput?+this.sourceIdInput:void 0,geneName:this.geneNameInput,variantName:this.variantNameInput,diseaseName:this.diseaseNameInput,comment:this.commentInput,submitter:this.submitterInput,citation:this.citationInput,status:this.statusInput?this.statusInput:void 0}).then(()=>this.scrollIndex$.next(0)),this.cdr.detectChanges()}setFormInputs(c,n){this.selectedSourceId=c,this.selectedStatus=n,this.showManageForm=!0}closePopover(){this.showManageForm=!1}trackByIndex(c,n){return n.id}};Z.\u0275fac=function(c){return new(c||Z)(t.Y36(d.WRV),t.Y36(r.a),t.Y36(t.sBO))},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["cvc-source-suggestions-table"]],inputs:{cvcHeight:"cvcHeight",sourceId:"sourceId",submitterId:"submitterId",cvcTitleTemplate:"cvcTitleTemplate",cvcTitle:"cvcTitle",initialPageSize:"initialPageSize",initialUserFilters:"initialUserFilters"},decls:11,vars:2,consts:[[4,"ngIf","ngIfElse"],["setHeightCard",""],["table",""],["manageSuggestionTemplate",""],["titleTemplate",""],["extraTemplate",""],["nzSize","small","cvcAutoHeightCard","","cvcAutoHeightTarget","viewport",3,"nzTitle","nzExtra"],[3,"ngTemplateOutlet"],[1,"card-container",3,"ngStyle"],["cvcAutoHeightCard","","nzSize","small",3,"nzTitle","nzExtra"],["nzSize","small","cvcTableScroll","",3,"nzData","nzLoading","cvcAutoHeightTable","nzVirtualItemSize","cvcTableScrollQueryRef","cvcTableScrollPageInfo","cvcTableScrollToIndex","nzVirtualForTrackBy","nzScroll","nzFrontPagination","nzShowPagination","cvcTableScrollOnScroll"],["virtualTable",""],[3,"nzSortOrderChange"],[1,"col-header-row"],["nzWidth","100px","nzLeft",""],["nzWidth","425px","nzLeft","",3,"nzColumnKey","nzSortFn"],["nzWidth","24px","nzAlign","center","nz-tooltip","","nzTooltipTitle","Submitter Comment"],["nz-icon","","nzTheme","twotone","nzType","civic-comment",3,"nzTwotoneColor"],["nzWidth","200px",3,"nzColumnKey","nzSortFn"],["nzWidth","80px",3,"nzColumnKey","nzSortFn"],["nzWidth","120px",3,"nzColumnKey","nzSortFn"],["nzWidth","170px",3,"nzColumnKey","nzSortFn"],["nzWidth","90px","nzSortOrder","descend",3,"nzColumnKey","nzSortDirections","nzSortFn"],["nzWidth","70px","nzRight","","nzAlign","center"],[1,"filter-row"],["nzLeft",""],["nzAllowClear","","nzSize","small","nzPlaceHolder","Any",3,"nzDropdownMatchSelectWidth","ngModel","ngModelChange"],["nzValue","NEW","nzLabel","new"],["nzValue","CURATED","nzLabel","curated"],["nzValue","REJECTED","nzLabel","rejected"],[3,"inputModel","inputModelChange"],[3,"inputModel","inputModelChange",4,"ngIf"],["nzAllowClear","","nzSize","small","nzPlaceHolder","Any",3,"ngModel","ngModelChange"],["nzValue","PUBMED","nzLabel","PubMed"],["nzValue","ASCO","nzLabel","ASCO"],["placeholderText","ID",3,"inputModel","inputModelChange"],["placeholderText","Gene",3,"inputModel","inputModelChange"],["placeholderText","Variant",3,"inputModel","inputModelChange"],["placeholderText","Disease",3,"inputModel","inputModelChange"],["nzRight",""],["nz-virtual-scroll",""],[1,"data-row"],["nzLeft","","nzAlign","center"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"source",4,"ngIf"],["nzAlign","center","nz-tooltip","","nzTooltipPlacement","top",3,"nzTooltipTitle"],[3,"user",4,"ngIf"],[4,"ngIf"],[3,"gene",4,"ngIf"],[3,"variant","truncateLongName",4,"ngIf"],[3,"disease","truncateLongName",4,"ngIf"],["nzAlign","right"],["nzRight","","nzAlign","center",1,"button-cell"],["nzColor","green",1,"status-tag"],["nzColor","orange",1,"status-tag"],["nzColor","volcano",1,"status-tag"],["nz-icon","","nz-tooltip","","nzType","civic-comment",3,"nzTooltipTitle",4,"ngIf"],["nz-icon","","nz-tooltip","","nzType","civic-comment",3,"nzTooltipTitle"],[3,"source"],[3,"user"],[3,"gene"],[3,"variant","truncateLongName"],[3,"disease","truncateLongName"],["routerLink","/evidence/add/submit","nz-button","","nzSize","small","nz-tooltip","",3,"queryParams","disabled","nzTooltipTitle","nzTooltipMouseEnterDelay"],["nz-icon","","nzType","civic-evidence"],["nz-button","","nzSize","small","nz-popover","","nzPopoverTitle","Manage Source Suggestion","nzPopoverPlacement","left","nzPopoverTrigger","click","nz-tooltip","","nzTooltipPlacement","top",3,"nzTooltipTitle","nzTooltipMouseEnterDelay","nzPopoverContent","click"],["nz-icon","","nzType","civic-source"],[3,"currentStatus","sourceSuggestionId",4,"ngIf"],[3,"currentStatus","sourceSuggestionId"],["nz-icon","","nzTheme","twotone","nzType","civic-source",3,"nzTwotoneColor"],[1,"table-info"],[3,"cvcTableCountsConnection"],["nzColor","processing",4,"ngIf"],[3,"cvcShowTag"],["nzColor","processing"],["nz-icon","","nzType","sync","nzSpin",""]],template:function(c,n){if(1&c&&(t.YNc(0,St,3,3,"ng-container",0),t.YNc(1,ft,3,6,"ng-template",null,1,t.W1O),t.YNc(3,Ht,58,50,"ng-template",null,2,t.W1O),t.YNc(5,Vt,1,1,"ng-template",null,3,t.W1O),t.YNc(7,jt,6,6,"ng-template",null,4,t.W1O),t.YNc(9,Kt,4,6,"ng-template",null,5,t.W1O)),2&c){const i=t.MAs(2);t.Q6J("ngIf",!n.cvcHeight)("ngIfElse",i)}},directives:[g.O5,z.bd,E.D,g.tP,g.PC,u.N8,$.y,Y.q,u.Om,u.$Z,u.Uo,u._C,u.qn,u.qD,u.UX,F.SY,w.w,H.Ls,I.Vq,v.JJ,v.On,I.Ip,R.p,u.p0,u.zu,g.RF,g.n9,V.j,b.T,B.I,D.H,W.I,j.n,U.fY,U.ix,L.dQ,G.rH,K.lU,mt,_t.B,vt.H],pipes:[Ct.fM,ht.a,g.i8,g.uU],styles:["[_nghost-%COMP%]{display:block}nz-card[_ngcontent-%COMP%]:first-of-type     .ant-card-body{padding:0;margin-top:1px}.table-info[_ngcontent-%COMP%]{margin-left:.5rem}tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]{white-space:nowrap}tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell.align-right[_ngcontent-%COMP%]     .ant-table-column-title{text-align:right}tr.filter-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]{padding:3px 4px}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]{white-space:nowrap}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]   .anticon.attribute-icon[_ngcontent-%COMP%]{color:#595959}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell.overflow-ellipsis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell.button-cell[_ngcontent-%COMP%]{padding:0}tr.data-row[_ngcontent-%COMP%]   td.align-right[_ngcontent-%COMP%], tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%], tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%], tr.filter-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%]{text-align:right}.status-tag[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),Z=(0,S.gn)([(0,m.c)()],Z)},2832:(X,y,e)=>{e.d(y,{W:()=>K});var S=e(9808),T=e(3075),d=e(325),m=e(3580),x=e(3309),C=e(4125),f=e(271),h=e(8525),_=e(9779),M=e(7345),A=e(4867),J=e(6905),p=e(3111),Q=e(1433),N=e(9240),t=e(7008),r=e(8776),g=e(7484),z=e(4546),E=e(1825),u=e(4375),$=e(6042),Y=e(868),F=e(6949),w=e(7525),H=e(2359),I=e(1047),v=e(8054),R=e(4509),V=e(8144),b=e(5e3);let B=(()=>{class l{}return l.\u0275fac=function(P){return new(P||l)},l.\u0275mod=b.oAB({type:l}),l.\u0275inj=b.cJS({imports:[[S.ez,T.UX,F.WG,$.sL,g.vh,Y.we,z.U5,w.j,H.L,I.o7,v.LV,V.zf,T.u5,r.X0,t.B,E.A,u.R,R.w]]}),l})();var D=e(5017),W=e(3610),j=e(1132),U=e(8481),L=e(404),G=e(3618);let K=(()=>{class l{}return l.\u0275fac=function(P){return new(P||l)},l.\u0275mod=b.oAB({type:l}),l.\u0275inj=b.cJS({imports:[[S.ez,T.u5,F.WG,d.Bz,$.sL,g.vh,D.PV,W.$6,v.LV,j.HQ,U.X,L.cg,G.ZJ,N.w,h.T,f.y,p.n,Q.c,C.k,m.Q,t.B,x.U,J.s,_.s,B,M.W,A.Q]]}),l})()},7677:(X,y,e)=>{e.d(y,{G:()=>t});var S=e(9808),T=e(325),d=e(3610),m=e(8481),x=e(5017),C=e(897),f=e(9779),h=e(4867),_=e(6905),M=e(6949),A=e(7484),J=e(3098),p=e(5e3);let Q=(()=>{class r{}return r.\u0275fac=function(z){return new(z||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({imports:[[S.ez,M.WG,A.vh,J.q6,x.PV,f.s,h.Q,C.$,_.s]]}),r})();var N=e(6429);let t=(()=>{class r{}return r.\u0275fac=function(z){return new(z||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({imports:[[S.ez,T.Bz,d.$6,m.X,x.PV,Q,_.s,N.C]]}),r})()}}]);