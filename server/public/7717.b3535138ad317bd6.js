"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[7717],{3220:(z,f,e)=>{e.d(f,{l:()=>O});var t=e(5e3),M=e(6715),h=e(9808),m=e(8481),d=e(3610);const v=function(i){return{"matched-tag":i}};function g(i,u){if(1&i&&(t.TgZ(0,"div",2),t.TgZ(1,"nz-tag"),t._uU(2),t.qZA(),t.qZA()),2&i){const _=u.$implicit,r=t.oxw();t.Q6J("ngClass",t.VKq(2,v,r.matchingText&&_.toLowerCase().includes(r.matchingText))),t.xp6(2),t.Oqu(_)}}function E(i,u){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const _=t.oxw(2);t.xp6(1),t.hij("",_.matchedHiddenCount," of ")}}function n(i,u){if(1&i){const _=t.EpF();t.TgZ(0,"nz-tag",5),t.NdJ("click",function(){return t.CHM(_),t.oxw().onOverflowClicked()}),t._uU(1," +"),t.YNc(2,E,2,1,"span",6),t._uU(3),t.qZA()}if(2&i){const _=t.oxw(),r=t.MAs(5);t.Q6J("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",r),t.xp6(2),t.Q6J("ngIf",_.matchedHiddenCount>0),t.xp6(1),t.hij("",_.hiddenCount," more ")}}function P(i,u){if(1&i&&(t.TgZ(0,"div",2),t.TgZ(1,"nz-tag"),t._uU(2),t.qZA(),t.qZA()),2&i){const _=u.$implicit,r=t.oxw(2);t.Q6J("ngClass",t.VKq(2,v,r.matchingText&&_.toLowerCase().includes(r.matchingText))),t.xp6(2),t.Oqu(_)}}function p(i,u){if(1&i&&(t.TgZ(0,"cvc-tag-list",0),t.YNc(1,P,3,4,"div",1),t.qZA()),2&i){const _=t.oxw();t.xp6(1),t.Q6J("ngForOf",_.hiddenTags)}}let O=(()=>{class i{constructor(){this.maxDisplayCount=2,this.matchedHiddenCount=0}ngOnInit(){this.calculateDisplayedTags()}calculateDisplayedTags(){var _,r,T,I;if(this.displayedTags=null===(_=this.tags)||void 0===_?void 0:_.slice(0,this.maxDisplayCount),this.hiddenTags=null===(r=this.tags)||void 0===r?void 0:r.slice(this.maxDisplayCount),this.hiddenCount=null===(T=this.hiddenTags)||void 0===T?void 0:T.length,this.matchingText=null===(I=this.matchingText)||void 0===I?void 0:I.toLowerCase(),this.matchingText&&this.hiddenTags){let D=this.matchingText;this.hiddenTags.forEach(Z=>{Z.toLowerCase().includes(D)&&(this.matchedHiddenCount+=1)})}}onOverflowClicked(){var _;this.maxDisplayCount=(null===(_=this.tags)||void 0===_?void 0:_.length)||0,this.calculateDisplayedTags()}}return i.\u0275fac=function(_){return new(_||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["cvc-plain-tag-overflow"]],inputs:{matchingText:"matchingText",tags:"tags",maxDisplayCount:"maxDisplayCount"},decls:6,vars:5,consts:[["size","xs"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["class","overflow-tag","nz-popover","","nzPopoverPlacement","top","nzPopoverTrigger","hover",3,"nzPopoverMouseEnterDelay","nzPopoverContent","click",4,"ngIf"],["additionalTagPopover",""],["nz-popover","","nzPopoverPlacement","top","nzPopoverTrigger","hover",1,"overflow-tag",3,"nzPopoverMouseEnterDelay","nzPopoverContent","click"],[4,"ngIf"]],template:function(_,r){1&_&&(t.TgZ(0,"cvc-tag-list",0),t.YNc(1,g,3,4,"div",1),t.TgZ(2,"div",2),t.YNc(3,n,4,4,"nz-tag",3),t.qZA(),t.YNc(4,p,2,1,"ng-template",null,4,t.W1O),t.qZA()),2&_&&(t.xp6(1),t.Q6J("ngForOf",r.displayedTags),t.xp6(1),t.Q6J("ngClass",t.VKq(3,v,r.matchedHiddenCount>0)),t.xp6(1),t.Q6J("ngIf",r.hiddenCount&&r.hiddenCount>0))},directives:[M.$,h.sg,h.mk,m.j,h.O5,d.lU],styles:[".matched-tag[_ngcontent-%COMP%]{font-weight:700}"]}),i})()},3968:(z,f,e)=>{e.d(f,{T:()=>v});var t=e(9808),M=e(897),h=e(8481),m=e(3610),d=e(5e3);let v=(()=>{class g{}return g.\u0275fac=function(n){return new(n||g)},g.\u0275mod=d.oAB({type:g}),g.\u0275inj=d.cJS({imports:[[t.ez,h.X,m.$6,M.$]]}),g})()},3575:(z,f,e)=>{e.d(f,{d:()=>N});var t=e(712),M=e(3154),h=e(8929),m=e(4850),d=e(373),v=e(1059),g=e(2986),E=e(13),n=e(5e3),P=e(7484),p=e(592),O=e(647),i=e(2683),u=e(8054),_=e(4182),r=e(2166),T=e(9808),I=e(6906),D=e(3220),Z=e(6949),A=e(6042),x=e(2643),U=e(3618);function y(l,c){if(1&l&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._UZ(2,"cvc-source-tag",20),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._UZ(10,"cvc-plain-tag-overflow",21),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA(),n.TgZ(13,"td"),n._uU(14),n.qZA(),n.TgZ(15,"td",22),n._uU(16),n.qZA(),n.qZA()),2&l){const o=c.$implicit,a=n.oxw();n.xp6(2),n.Q6J("source",o),n.xp6(2),n.hij(" ",o.displayType," "),n.xp6(2),n.hij(" ",o.citationId," "),n.xp6(2),n.hij(" ",o.name," "),n.xp6(2),n.Q6J("tags",o.authors)("matchingText",a.authorInput),n.xp6(2),n.hij(" ",o.publicationYear," "),n.xp6(2),n.hij(" ",o.journal," "),n.xp6(2),n.Oqu(o.evidenceItemCount)}}function L(l,c){if(1&l){const o=n.EpF();n.TgZ(0,"button",26),n.NdJ("click",function(){n.CHM(o);const C=n.oxw(2).ngrxLet;return n.oxw().loadMore(C.endCursor)}),n._uU(1),n.qZA()}if(2&l){const o=n.oxw(3);n.xp6(1),n.hij("Load ",o.pageSize," More")}}function S(l,c){if(1&l&&(n.TgZ(0,"tr"),n.TgZ(1,"td",24),n.YNc(2,L,2,1,"button",25),n.qZA(),n.qZA()),2&l){const o=n.oxw().ngrxLet;n.xp6(2),n.Q6J("ngIf",o.hasNextPage)}}function K(l,c){if(1&l&&(n.ynx(0),n.YNc(1,S,3,1,"tr",23),n.BQk()),2&l){const o=c.ngrxLet;n.xp6(1),n.Q6J("ngIf",o.hasNextPage)}}function B(l,c){}function b(l,c){if(1&l&&(n.ynx(0),n.YNc(1,B,0,0,"ng-template",30),n.BQk()),2&l){const o=n.oxw(2);n.xp6(1),n.Q6J("ngTemplateOutlet",o.cvcTitleTemplate)}}function R(l,c){if(1&l&&(n.ynx(0),n._uU(1),n.BQk()),2&l){const o=n.oxw(2);n.xp6(1),n.hij(" ",o.cvcTitle," ")}}function W(l,c){if(1&l&&(n.TgZ(0,"span",31),n._uU(1),n.qZA()),2&l){const o=c.ngIf,a=n.oxw(2);n.xp6(1),n.lnq(" (",a.totalCount," total, showing ",a.visibleCount," of ",o," filtered) ")}}function J(l,c){1&l&&(n.TgZ(0,"span",31),n._uU(1," (0 total) "),n.qZA())}function Q(l,c){if(1&l&&(n._UZ(0,"i",27),n.YNc(1,b,2,1,"ng-container",23),n.YNc(2,R,2,1,"ng-container",23),n.YNc(3,W,2,3,"span",28),n.ALo(4,"ngrxPush"),n.YNc(5,J,2,0,"ng-template",null,29,n.W1O)),2&l){const o=n.MAs(6),a=n.oxw();n.xp6(1),n.Q6J("ngIf",a.cvcTitleTemplate),n.xp6(1),n.Q6J("ngIf",a.cvcTitle),n.xp6(1),n.Q6J("ngIf",n.lcZ(4,4,a.filteredCount$))("ngIfElse",o)}}let N=(()=>{class l{constructor(o){this.gql=o,this.debouncedQuery=new h.xQ,this.pageSize=25,this.sortColumns=t.kQl,this.visibleCount=this.pageSize,this.loadedPages=1}ngOnInit(){this.queryRef=this.gql.watch({first:this.pageSize,clinicalTrialId:this.clinicalTrialId}),this.data$=this.queryRef.valueChanges.pipe((0,m.U)(o=>({data:o.data,loading:o.loading,networkStatus:o.networkStatus}))),this.isLoading$=this.data$.pipe((0,d.j)("loading"),(0,v.O)(!0)),this.sources$=this.data$.pipe((0,d.j)("data","browseSources","edges"),(0,m.U)(o=>o.map(a=>a.node))),this.pageInfo$=this.data$.pipe((0,d.j)("data","browseSources","pageInfo")),this.filteredCount$=this.data$.pipe((0,d.j)("data","browseSources","filteredCount")),this.filteredCount$.pipe((0,g.q)(1)).subscribe(o=>this.totalCount=o),this.filteredCount$.subscribe(o=>{o<this.pageSize?this.visibleCount=o:(this.visibleCount=this.pageSize*this.loadedPages,this.visibleCount>o&&(this.visibleCount=o))}),this.debouncedQuery.pipe((0,E.b)(500)).subscribe(o=>this.refresh()),this.textInputCallback=()=>{this.debouncedQuery.next()}}refresh(){var o;this.loadedPages=1,null===(o=this.queryRef)||void 0===o||o.refetch({citationId:this.citationIdInput?+this.citationIdInput:void 0,author:this.authorInput,year:this.yearInput?+this.yearInput:void 0,journal:this.journalInput,name:this.nameInput,sourceType:this.sourceTypeInput})}onSortChanged(o){var a;this.loadedPages=1,null===(a=this.queryRef)||void 0===a||a.refetch({sortBy:(0,M._)(o)})}onModelChanged(){this.debouncedQuery.next()}ngOnDestroy(){this.debouncedQuery.unsubscribe()}loadMore(o){var a;null===(a=this.queryRef)||void 0===a||a.fetchMore({variables:{first:this.pageSize,after:o}}),this.loadedPages+=1}}return l.\u0275fac=function(o){return new(o||l)(n.Y36(t.IZ6))},l.\u0275cmp=n.Xpm({type:l,selectors:[["cvc-sources-table"]],inputs:{clinicalTrialId:"clinicalTrialId",cvcTitleTemplate:"cvcTitleTemplate",cvcTitle:"cvcTitle"},decls:45,vars:36,consts:[[3,"nzTitle"],[3,"nzData","nzLoading","nzFrontPagination","nzShowPagination"],["sourcesTable",""],[3,"nzSortOrderChange"],["nzWidth","15%"],[3,"nzColumnKey","nzSortFn"],["nzWidth","25%",3,"nzColumnKey","nzSortFn"],["nzRight","",3,"nzColumnKey","nzSortFn"],["nz-icon","","nzType","civic:evidence","nz-tooltip","","nzTooltipTitle","Evidence Count"],["nzAllowClear","","nzPlaceHolder","Choose",3,"ngModel","ngModelChange"],["nzValue","PUBMED","nzLabel","PubMed"],["nzValue","ASCO","nzLabel","ASCO"],["placeholderText","ID",3,"inputModel","onInputChanged","inputModelChange"],["placeholderText","Name",3,"inputModel","onInputChanged","inputModelChange"],["placeholderText","Authors",3,"inputModel","onInputChanged","inputModelChange"],["placeholderText","Year",3,"inputModel","onInputChanged","inputModelChange"],["placeholderText","Journal",3,"inputModel","onInputChanged","inputModelChange"],[4,"ngFor","ngForOf"],[4,"ngrxLet"],["titleTemplate",""],[3,"source"],[3,"tags","matchingText"],["nzRight",""],[4,"ngIf"],["colspan","8"],["nz-button","","nzBlock","",3,"click",4,"ngIf"],["nz-button","","nzBlock","",3,"click"],["nz-icon","","nzType","civic:source"],["nz-typography","","nzType","secondary",4,"ngIf","ngIfElse"],["noData",""],[3,"ngTemplateOutlet"],["nz-typography","","nzType","secondary"]],template:function(o,a){if(1&o&&(n.TgZ(0,"nz-card",0),n.TgZ(1,"nz-table",1,2),n.ALo(3,"ngrxPush"),n.ALo(4,"ngrxPush"),n.TgZ(5,"thead",3),n.NdJ("nzSortOrderChange",function(s){return a.onSortChanged(s)}),n.TgZ(6,"tr"),n.TgZ(7,"th",4),n._uU(8," Citation "),n.qZA(),n.TgZ(9,"th",5),n._uU(10," Source Type "),n.qZA(),n.TgZ(11,"th",5),n._uU(12," ID "),n.qZA(),n.TgZ(13,"th",6),n._uU(14," Name "),n.qZA(),n.TgZ(15,"th",5),n._uU(16," Authors "),n.qZA(),n.TgZ(17,"th",5),n._uU(18," Year "),n.qZA(),n.TgZ(19,"th",5),n._uU(20," Journal "),n.qZA(),n.TgZ(21,"th",7),n._UZ(22,"i",8),n.qZA(),n.qZA(),n.TgZ(23,"tr"),n._UZ(24,"th"),n.TgZ(25,"th"),n.TgZ(26,"nz-select",9),n.NdJ("ngModelChange",function(){return a.onModelChanged()})("ngModelChange",function(s){return a.sourceTypeInput=s}),n._UZ(27,"nz-option",10),n._UZ(28,"nz-option",11),n.qZA(),n.qZA(),n.TgZ(29,"th"),n.TgZ(30,"cvc-clearable-input-filter",12),n.NdJ("inputModelChange",function(s){return a.citationIdInput=s}),n.qZA(),n.qZA(),n.TgZ(31,"th"),n.TgZ(32,"cvc-clearable-input-filter",13),n.NdJ("inputModelChange",function(s){return a.nameInput=s}),n.qZA(),n.qZA(),n.TgZ(33,"th"),n.TgZ(34,"cvc-clearable-input-filter",14),n.NdJ("inputModelChange",function(s){return a.authorInput=s}),n.qZA(),n.qZA(),n.TgZ(35,"th"),n.TgZ(36,"cvc-clearable-input-filter",15),n.NdJ("inputModelChange",function(s){return a.yearInput=s}),n.qZA(),n.qZA(),n.TgZ(37,"th"),n.TgZ(38,"cvc-clearable-input-filter",16),n.NdJ("inputModelChange",function(s){return a.journalInput=s}),n.qZA(),n.qZA(),n._UZ(39,"th"),n.qZA(),n.qZA(),n.TgZ(40,"tbody"),n.YNc(41,y,17,9,"tr",17),n.YNc(42,K,2,1,"ng-container",18),n.qZA(),n.qZA(),n.qZA(),n.YNc(43,Q,7,6,"ng-template",null,19,n.W1O)),2&o){const C=n.MAs(2),s=n.MAs(44);n.Q6J("nzTitle",s),n.xp6(1),n.Q6J("nzData",n.lcZ(3,32,a.sources$))("nzLoading",n.lcZ(4,34,a.isLoading$))("nzFrontPagination",!1)("nzShowPagination",!1),n.xp6(8),n.Q6J("nzColumnKey",a.sortColumns.SourceType)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",a.sortColumns.CitationId)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",a.sortColumns.Name)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",a.sortColumns.Authors)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",a.sortColumns.Year)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",a.sortColumns.Journal)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",a.sortColumns.EvidenceCount)("nzSortFn",!0),n.xp6(5),n.Q6J("ngModel",a.sourceTypeInput),n.xp6(4),n.Q6J("inputModel",a.citationIdInput)("onInputChanged",a.textInputCallback),n.xp6(2),n.Q6J("inputModel",a.nameInput)("onInputChanged",a.textInputCallback),n.xp6(2),n.Q6J("inputModel",a.authorInput)("onInputChanged",a.textInputCallback),n.xp6(2),n.Q6J("inputModel",a.yearInput)("onInputChanged",a.textInputCallback),n.xp6(2),n.Q6J("inputModel",a.journalInput)("onInputChanged",a.textInputCallback),n.xp6(3),n.Q6J("ngForOf",C.data),n.xp6(1),n.Q6J("ngrxLet",a.pageInfo$)}},directives:[P.bd,p.N8,p.Om,p.$Z,p.Uo,p._C,p.qD,p.qn,O.Ls,i.w,u.Vq,_.JJ,_.On,u.Ip,r.p,p.p0,T.sg,I.T,D.l,Z.eJ,T.O5,A.ix,x.dQ,T.tP,U.ZU],pipes:[Z.fM],styles:["[_nghost-%COMP%]{display:block}"]}),l})()},7279:(z,f,e)=>{e.d(f,{h:()=>u});var t=e(9808),M=e(592),h=e(8054),m=e(4125),d=e(4182),v=e(9779),g=e(6949),E=e(3968),n=e(6042),P=e(647),p=e(3618),O=e(7484),i=e(5e3);let u=(()=>{class _{}return _.\u0275fac=function(T){return new(T||_)},_.\u0275mod=i.oAB({type:_}),_.\u0275inj=i.cJS({imports:[[t.ez,d.u5,g.WG,M.HQ,h.LV,P.PV,p.ZJ,O.vh,n.sL,m.k,v.s,E.T]]}),_})()}}]);