"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[327],{7948:($,I,e)=>{e.d(I,{m:()=>Y});var t=e(5e3),u=e(9808),o=e(125),n=e(3579),E=e(3193),T=e(8664),P=e(112),L=e(9001),y=e(2826),x=e(5749),O=e(8511),A=e(8481),D=e(5017);function d(m,v){if(1&m&&(t.ynx(0),t._UZ(1,"span",2),t.BQk()),2&m){const r=t.oxw().$implicit;t.xp6(1),t.Q6J("innerHtml",r.text,t.oJD)}}function h(m,v){if(1&m&&(t.ynx(0),t._UZ(1,"cvc-user-tag",3),t.BQk()),2&m){const r=t.oxw().$implicit;t.xp6(1),t.Q6J("user",r)}}const g=function(m,v,r,F){return{id:m,name:v,link:r,revisionsetId:F}};function z(m,v){if(1&m&&(t.TgZ(0,"span"),t._UZ(1,"cvc-revision-tag",6),t.qZA()),2&m){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("revision",t.l5B(1,g,r.entityId,r.displayName,r.link,r.revisionsetId))}}const N=function(m,v,r){return{id:m,name:v,link:r}};function R(m,v){if(1&m&&(t.TgZ(0,"span"),t._UZ(1,"cvc-gene-tag",7),t.qZA()),2&m){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("gene",t.kEZ(1,N,r.entityId,r.displayName,r.link))}}const U=function(m,v,r,F){return{id:m,name:v,link:r,deprecated:F}};function W(m,v){if(1&m&&(t.TgZ(0,"span"),t._UZ(1,"cvc-variant-tag",8),t.qZA()),2&m){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("variant",t.l5B(1,U,r.entityId,r.displayName,r.link,r.deprecated))}}function Z(m,v){if(1&m&&(t.TgZ(0,"span"),t._UZ(1,"cvc-variant-group-tag",9),t.qZA()),2&m){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("variantgroup",t.kEZ(1,N,r.entityId,r.displayName,r.link))}}const J=function(m,v,r,F){return{id:m,name:v,status:r,link:F}};function M(m,v){if(1&m&&(t.TgZ(0,"span"),t._UZ(1,"cvc-evidence-tag",10),t.qZA()),2&m){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("evidence",t.l5B(1,J,r.entityId,r.displayName,r.status,r.link))}}function B(m,v){if(1&m&&(t.TgZ(0,"span"),t._UZ(1,"cvc-assertion-tag",11),t.qZA()),2&m){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("assertion",t.l5B(1,J,r.entityId,r.displayName,r.status,r.link))}}const a=function(m,v){return{id:m,name:v}};function s(m,v){if(1&m&&(t.TgZ(0,"span"),t._UZ(1,"cvc-organization-tag",12),t.qZA()),2&m){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("org",t.WLB(1,a,r.entityId,r.displayName))}}function _(m,v){if(1&m&&(t.TgZ(0,"span"),t._UZ(1,"cvc-molecular-profile-tag",13),t.qZA()),2&m){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("molecularProfile",t.l5B(1,U,r.entityId,r.displayName,r.link,r.deprecated))}}function f(m,v){if(1&m&&(t.TgZ(0,"span")(1,"nz-tag"),t._UZ(2,"i",14),t._uU(3),t.qZA()()),2&m){const r=t.oxw(2).$implicit;t.xp6(2),t.MGl("nzType","civic-",r.displayName.slice(0,-1),""),t.xp6(1),t.hij(" ",r.displayName,"")}}function Q(m,v){if(1&m&&(t.ynx(0)(1,4),t.YNc(2,z,2,6,"span",5),t.YNc(3,R,2,5,"span",5),t.YNc(4,W,2,6,"span",5),t.YNc(5,Z,2,5,"span",5),t.YNc(6,M,2,6,"span",5),t.YNc(7,B,2,6,"span",5),t.YNc(8,s,2,4,"span",5),t.YNc(9,_,2,6,"span",5),t.YNc(10,f,4,2,"span",5),t.BQk()()),2&m){const r=t.oxw().$implicit;t.xp6(1),t.Q6J("ngSwitch",r.tagType),t.xp6(1),t.Q6J("ngSwitchCase","REVISION"),t.xp6(1),t.Q6J("ngSwitchCase","GENE"),t.xp6(1),t.Q6J("ngSwitchCase","VARIANT"),t.xp6(1),t.Q6J("ngSwitchCase","VARIANT_GROUP"),t.xp6(1),t.Q6J("ngSwitchCase","EVIDENCE_ITEM"),t.xp6(1),t.Q6J("ngSwitchCase","ASSERTION"),t.xp6(1),t.Q6J("ngSwitchCase","ORGANIZATION"),t.xp6(1),t.Q6J("ngSwitchCase","MOLECULAR_PROFILE"),t.xp6(1),t.Q6J("ngSwitchCase","ROLE")}}function K(m,v){if(1&m&&(t.ynx(0),t.YNc(1,d,2,1,"ng-container",1),t.YNc(2,h,2,1,"ng-container",1),t.YNc(3,Q,11,10,"ng-container",1),t.BQk()),2&m){const r=v.$implicit;t.xp6(1),t.Q6J("ngIf","CommentTextSegment"==r.__typename),t.xp6(1),t.Q6J("ngIf","User"==r.__typename),t.xp6(1),t.Q6J("ngIf","CommentTagSegment"==r.__typename)}}let Y=(()=>{class m{ngOnInit(){if(void 0===this.commentBodySegments)throw new Error("Must pass a list of comment body segments into comment body component.")}}return m.\u0275fac=function(r){return new(r||m)},m.\u0275cmp=t.Xpm({type:m,selectors:[["cvc-comment-body"]],inputs:{commentBodySegments:"commentBodySegments"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"innerHtml"],[3,"user"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"revision"],[3,"gene"],[3,"variant"],[3,"variantgroup"],[3,"evidence"],[3,"assertion"],[3,"org"],[3,"molecularProfile"],["nz-icon","","nzTheme","twotone","nzTwotoneColor","#A0D8F5",3,"nzType"]],template:function(r,F){1&r&&t.YNc(0,K,4,3,"ng-container",0),2&r&&t.Q6J("ngForOf",F.commentBodySegments)},directives:[u.sg,u.O5,o.I,u.RF,u.n9,n.p,E.H,T.I,P.u,L.O,y.w,x.m,O.p,A.j,D.Ls],styles:[""]}),m})()},8909:($,I,e)=>{e.d(I,{m:()=>d});var t=e(9808),u=e(7488),o=e(8369),n=e(209),E=e(4867),T=e(7677),P=e(3309),L=e(7345),y=e(9476),x=e(8481),O=e(5017),A=e(2467),D=e(5e3);let d=(()=>{class h{}return h.\u0275fac=function(z){return new(z||h)},h.\u0275mod=D.oAB({type:h}),h.\u0275inj=D.cJS({imports:[[t.ez,x.X,O.PV,u.y,o.W,n.i,E.Q,T.G,P.U,L.W,y.L,A.u]]}),h})()},3801:($,I,e)=>{e.d(I,{D:()=>ln});var t=e(7630),u=e(4850),o=e(373),n=e(5e3),E=e(9808),T=e(1894),P=e(8144),L=e(7484),y=e(3762),x=e(6042),O=e(2683),A=e(1344),D=e(6699),d=e(7948),h=e(8625);function g(c,C){if(1&c&&n._UZ(0,"nz-avatar",4),2&c){const i=n.oxw();n.Q6J("nzSrc",i.comment.commenter.profileImagePath)}}function z(c,C){1&c&&n._UZ(0,"nz-avatar",5)}let N=(()=>{class c{ngOnInit(){if(void 0===this.comment)throw new Error("Must pass a comment into comment display component.")}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=n.Xpm({type:c,selectors:[["cvc-comment-display"]],inputs:{comment:"comment"},decls:7,vars:7,consts:[[3,"nzAuthor","nzDatetime"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],[3,"commentBodySegments"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","","nzIcon","civic:curator"]],template:function(i,l){if(1&i&&(n.TgZ(0,"nz-comment",0),n.ALo(1,"timeago"),n.YNc(2,g,1,1,"nz-avatar",1),n.YNc(3,z,1,0,"ng-template",null,2,n.W1O),n.TgZ(5,"nz-comment-content"),n._UZ(6,"cvc-comment-body",3),n.qZA()()),2&i){const p=n.MAs(4);n.Q6J("nzAuthor",l.comment.commenter.displayName)("nzDatetime",n.lcZ(1,5,l.comment.createdAt)),n.xp6(2),n.Q6J("ngIf",l.comment.commenter.profileImagePath)("ngIfElse",p),n.xp6(4),n.Q6J("commentBodySegments",l.comment.parsedComment)}},directives:[A.WE,E.O5,D.Dz,A.DA,A.Y4,d.m],pipes:[h.wr],styles:[""]}),c})();var R=e(8929),U=e(7625),W=e(6123),Z=e(9350),J=e(9169),M=e(2359),B=e(3075),a=e(4546),s=e(822),_=e(9383),f=e(7525),Q=e(9180),K=e(8227),Y=e(2643),m=e(6612);function v(c,C){if(1&c){const i=n.EpF();n.TgZ(0,"nz-alert",7),n.NdJ("nzOnClose",function(){return n.CHM(i),n.oxw().onSuccessBannerClose()}),n.qZA()}}function r(c,C){if(1&c&&(n.TgZ(0,"nz-form-item"),n._UZ(1,"cvc-form-errors-alert",8),n.qZA()),2&c){const i=n.oxw();n.xp6(1),n.Q6J("errors",i.errorMessages)}}let F=(()=>{class c{constructor(i,l,p){this.viewerService=i,this.addCommentGql=l,this.networkErrorService=p,this.commentAddedEvent=new n.vpe,this.destroy$=new R.xQ,this.success=!1,this.errorMessages=[],this.loading=!1,this.viewerService.viewer$.pipe((0,U.R)(this.destroy$)).subscribe(S=>{this.organizations=S.organizations,this.mostRecentOrg=S.mostRecentOrg}),this.addCommentMutator=new W.U(p)}selectOrg(i){this.mostRecentOrg=i}submitComment(){if(this.commentText){this.errorMessages=[];let l=this.addCommentMutator.mutate(this.addCommentGql,{input:{body:this.commentText,subject:this.subject,organizationId:void 0===this.mostRecentOrg?void 0:this.mostRecentOrg.id}});l.submitSuccess$.pipe((0,U.R)(this.destroy$)).subscribe(p=>{p&&(this.resetForm(),this.success=!0)}),l.submitError$.pipe((0,U.R)(this.destroy$)).subscribe(p=>{p&&(this.errorMessages=p,this.success=!1)}),l.isSubmitting$.pipe((0,U.R)(this.destroy$)).subscribe(p=>{this.loading=p})}}resetForm(){this.commentText="",this.commentAddedEvent.emit()}onSuccessBannerClose(){this.resetForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return c.\u0275fac=function(i){return new(i||c)(n.Y36(Z.a),n.Y36(t.iGM),n.Y36(J.Y))},c.\u0275cmp=n.Xpm({type:c,selectors:[["cvc-comment-add-form"]],inputs:{subject:"subject"},outputs:{commentAddedEvent:"commentAddedEvent"},decls:12,vars:6,consts:[["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[4,"ngIf"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[3,"selectedOrg","selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"],["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose"],[3,"errors"]],template:function(i,l){1&i&&(n.TgZ(0,"nz-card"),n.YNc(1,v,1,0,"nz-alert",0),n.TgZ(2,"form",1),n.NdJ("ngSubmit",function(){return l.submitComment()}),n.YNc(3,r,2,1,"nz-form-item",2),n.TgZ(4,"cvc-comment-input-form",3),n.NdJ("commentChange",function(S){return l.commentText=S}),n.qZA(),n.TgZ(5,"nz-spin",4)(6,"nz-form-item")(7,"nz-form-control")(8,"cvc-form-buttons")(9,"cvc-org-selector-btn-group",5),n.NdJ("selectedOrgChange",function(S){return l.mostRecentOrg=S}),n.TgZ(10,"button",6),n._uU(11," Add Comment "),n.qZA()()()()()()()()),2&i&&(n.xp6(1),n.Q6J("ngIf",l.success),n.xp6(2),n.Q6J("ngIf",l.errorMessages.length>0),n.xp6(1),n.Q6J("comment",l.commentText),n.xp6(1),n.Q6J("nzSpinning",l.loading),n.xp6(4),n.Q6J("selectedOrg",l.mostRecentOrg),n.xp6(1),n.Q6J("disabled",l.loading||!(void 0!==l.commentText&&l.commentText.length>=10)))},directives:[L.bd,E.O5,M.r,B._Y,B.JL,B.F,a.Lr,T.SK,a.Nx,s.V,_.b,f.W,T.t3,a.Fd,Q.Z,K.q,x.ix,Y.dQ,m.m,O.w],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2}),c})();var j=e(8747),G=e(5017),H=e(6949),b=e(9058);function V(c,C){if(1&c){const i=n.EpF();n.TgZ(0,"div",18)(1,"button",19),n.NdJ("click",function(){n.CHM(i);const p=n.oxw().ngIf;return n.oxw(3).onLoadMore(p.startCursor)}),n._uU(2,"Load older comments "),n.qZA()()}}function w(c,C){if(1&c&&(n.TgZ(0,"nz-list-header"),n.YNc(1,V,3,0,"div",17),n.qZA()),2&c){const i=C.ngIf;n.xp6(1),n.Q6J("ngIf",i.hasPreviousPage)}}function X(c,C){if(1&c&&(n.TgZ(0,"nz-list-item"),n._UZ(1,"cvc-comment-display",20),n.qZA()),2&c){const i=C.$implicit;n.xp6(1),n.Q6J("comment",i)}}function q(c,C){if(1&c&&(n.TgZ(0,"nz-card",13)(1,"nz-list",14),n.ALo(2,"ngrxPush"),n.ALo(3,"ngrxPush"),n.YNc(4,w,2,1,"nz-list-header",15),n.ALo(5,"ngrxPush"),n.YNc(6,X,2,1,"ng-template",null,16,n.W1O),n.qZA()()),2&c){const i=n.MAs(7),l=n.oxw(2);n.xp6(1),n.Q6J("nzDataSource",n.lcZ(2,4,l.comments$))("nzLoading",n.lcZ(3,6,l.loading$))("nzRenderItem",i),n.xp6(3),n.Q6J("ngIf",n.lcZ(5,8,l.pageInfo$))}}function k(c,C){if(1&c){const i=n.EpF();n.TgZ(0,"cvc-comment-add-form",21),n.NdJ("commentAddedEvent",function(){return n.CHM(i),n.oxw(2).refreshList()}),n.qZA()}if(2&c){const i=n.oxw(2);n.Q6J("subject",i.commentable)}}function nn(c,C){if(1&c&&n._UZ(0,"nz-avatar",24),2&c){const i=n.oxw().$implicit;n.Q6J("nzSrc",i.profileImagePath)}}function tn(c,C){if(1&c&&(n._UZ(0,"nz-avatar",25),n.ALo(1,"uppercase")),2&c){const i=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,i.displayName.charAt(0)))}}function en(c,C){if(1&c&&(n.YNc(0,nn,1,1,"nz-avatar",22),n.YNc(1,tn,2,3,"ng-template",null,23,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&c){const i=C.$implicit,l=n.MAs(2);n.Q6J("ngIf",i.profileImagePath)("ngIfElse",l),n.xp6(4),n.Oqu(i.displayName)}}function on(c,C){if(1&c&&n._UZ(0,"nz-avatar",24),2&c){const i=n.oxw().$implicit;n.Q6J("nzSrc",i.profileImagePath)}}function an(c,C){if(1&c&&(n._UZ(0,"nz-avatar",25),n.ALo(1,"uppercase")),2&c){const i=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,i.displayName.charAt(0)))}}function mn(c,C){if(1&c&&(n.YNc(0,on,1,1,"nz-avatar",22),n.YNc(1,an,2,3,"ng-template",null,23,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&c){const i=C.$implicit,l=n.MAs(2);n.Q6J("ngIf",i.profileImagePath)("ngIfElse",l),n.xp6(4),n.Oqu(i.displayName)}}function cn(c,C){if(1&c&&(n._UZ(0,"nz-avatar",26),n.TgZ(1,"span"),n._uU(2),n.qZA()),2&c){const i=C.$implicit;n.MGl("nzIcon","civic-",i.tag.displayName,""),n.xp6(2),n.hij("",i.tag.displayName,"s")}}function rn(c,C){if(1&c&&(n._UZ(0,"i",27),n.ALo(1,"iconNameForSubscribableEntity"),n.TgZ(2,"span"),n._uU(3),n.qZA()),2&c){const i=C.$implicit;n.Q6J("nzType",n.lcZ(1,2,i.tag.tagType)),n.xp6(3),n.Oqu(i.tag.displayName)}}function sn(c,C){if(1&c){const i=n.EpF();n.ynx(0),n.TgZ(1,"nz-row",2)(2,"nz-col",3)(3,"nz-space",4),n.YNc(4,q,8,10,"nz-card",5),n.YNc(5,k,1,1,"cvc-comment-add-form",6),n.qZA()(),n.TgZ(6,"nz-col",7)(7,"cvc-participant-list",8),n.NdJ("participantSelectedEvent",function(p){return n.CHM(i),n.oxw().onCommenterSelected(p)}),n.ALo(8,"ngrxPush"),n.YNc(9,en,5,3,"ng-template",null,9,n.W1O),n.qZA(),n.TgZ(11,"cvc-participant-list",10),n.NdJ("participantSelectedEvent",function(p){return n.CHM(i),n.oxw().onMentionedUserSelected(p)}),n.ALo(12,"ngrxPush"),n.YNc(13,mn,5,3,"ng-template",null,9,n.W1O),n.qZA(),n.TgZ(15,"cvc-participant-list",11),n.NdJ("participantSelectedEvent",function(p){return n.CHM(i),n.oxw().onMentionedRoleSelected(p)}),n.ALo(16,"ngrxPush"),n.YNc(17,cn,3,2,"ng-template",null,9,n.W1O),n.qZA(),n.TgZ(19,"cvc-participant-list",12),n.NdJ("participantSelectedEvent",function(p){return n.CHM(i),n.oxw().onMentionedEntitySelected(p)}),n.ALo(20,"ngrxPush"),n.YNc(21,rn,4,4,"ng-template",null,9,n.W1O),n.qZA()()(),n.BQk()}if(2&c){const i=n.oxw();n.xp6(1),n.Q6J("nzGutter",16),n.xp6(6),n.Q6J("participantList",n.lcZ(8,5,i.commenters$)),n.xp6(4),n.Q6J("participantList",n.lcZ(12,7,i.mentionedUsers$)),n.xp6(4),n.Q6J("participantList",n.lcZ(16,9,i.mentionedRoles$)),n.xp6(4),n.Q6J("participantList",n.lcZ(20,11,i.mentionedEntities$))}}function _n(c,C){if(1&c){const i=n.EpF();n.TgZ(0,"cvc-comment-add-form",21),n.NdJ("commentAddedEvent",function(){return n.CHM(i),n.oxw().refreshList()}),n.qZA()}if(2&c){const i=n.oxw();n.Q6J("subject",i.commentable)}}let ln=(()=>{class c{constructor(i){this.gql=i,this.pageSize=5}ngOnInit(){this.queryRef$=this.gql.watch({subject:this.commentable,last:this.pageSize,sortBy:{column:t.h01.Created,direction:t.SrV.Asc}});let i=this.queryRef$.valueChanges;this.pageInfo$=i.pipe((0,u.U)(({data:l})=>l.comments.pageInfo)),this.loading$=i.pipe((0,u.U)(({loading:l})=>l)),this.comments$=i.pipe((0,u.U)(({data:l})=>l.comments.edges.map(p=>p.node))),this.commenters$=i.pipe((0,u.U)(({data:l})=>l.comments.uniqueCommenters)),this.mentionedUsers$=i.pipe((0,u.U)(({data:l})=>l.comments.mentionedUsers)),this.mentionedRoles$=i.pipe((0,u.U)(({data:l})=>l.comments.mentionedRoles.map(p=>({id:`${p.entityId}-${p.tagType}`,tag:p})))),this.mentionedEntities$=i.pipe((0,u.U)(({data:l})=>l.comments.mentionedEntities.map(p=>({id:`${p.entityId}-${p.tagType}`,tag:p})))),this.unfilteredCount$=i.pipe((0,o.j)("data","comments","unfilteredCountForSubject"))}onLoadMore(i){this.queryRef$.fetchMore({variables:{last:this.pageSize,before:i}})}onCommenterSelected(i){this.queryRef$.refetch({originatingUserId:null==i?void 0:i.id})}onMentionedUserSelected(i){this.queryRef$.refetch({mentionedUserId:null==i?void 0:i.id})}onMentionedRoleSelected(i){if(i){let l=t.i44[i.tag.displayName[0].toUpperCase()+i.tag.displayName.slice(1)];this.queryRef$.refetch({mentionedRole:l})}else this.queryRef$.refetch({mentionedRole:void 0})}onMentionedEntitySelected(i){this.queryRef$.refetch(i?{mentionedEntity:{entityType:i.tag.tagType,id:i.tag.entityId}}:{mentionedEntity:void 0})}refreshList(){this.queryRef$.refetch()}}return c.\u0275fac=function(i){return new(i||c)(n.Y36(t.iST))},c.\u0275cmp=n.Xpm({type:c,selectors:[["cvc-comment-list"]],inputs:{commentable:"commentable"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noComments",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical",2,"width","100%"],["nzTitle","Comments",4,"nzSpaceItem"],["id","addComment",3,"subject","commentAddedEvent",4,"nzSpaceItem"],["nzSpan","6"],["listTitle","Commenters",3,"participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Mentioned Users",3,"participantList","participantSelectedEvent"],["listTitle","Mentioned Roles",3,"participantList","participantSelectedEvent"],["listTitle","Mentioned Entities",3,"participantList","participantSelectedEvent"],["nzTitle","Comments"],["nzSize","small","nzItemLayout","horizontal",3,"nzDataSource","nzLoading","nzRenderItem"],[4,"ngIf"],["comment",""],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","link","nzSize","small","nzBlock","",3,"click"],[3,"comment"],["id","addComment",3,"subject","commentAddedEvent"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],[3,"nzIcon"],["nz-icon","",3,"nzType"]],template:function(i,l){if(1&i&&(n.YNc(0,sn,23,13,"ng-container",0),n.ALo(1,"ngrxPush"),n.YNc(2,_n,1,1,"ng-template",null,1,n.W1O)),2&i){const p=n.MAs(3);n.Q6J("ngIf",n.lcZ(1,2,l.unfilteredCount$))("ngIfElse",p)}},directives:[E.O5,T.SK,T.t3,P.NU,P.$1,L.bd,y.n_,y.t4,x.ix,O.w,y.AA,N,F,j.l,D.Dz,G.Ls],pipes:[H.fM,E.gd,b.j],styles:["[_nghost-%COMP%]{display:block}nz-list-header[_ngcontent-%COMP%]{padding:0;margin:0}nz-list-header[_ngcontent-%COMP%]   [nz-list-load-more][_ngcontent-%COMP%]{margin-top:-.5em;padding-bottom:.5em}"]}),c})()},2278:($,I,e)=>{e.d(I,{l:()=>Y});var t=e(9808),u=e(1894),o=e(7484),n=e(3762),E=e(6699),T=e(8144),P=e(6949),L=e(6559),y=e(1150),x=e(1344),O=e(8625),A=e(7026),D=e(8909),d=e(5e3);let h=(()=>{class m{}return m.\u0275fac=function(r){return new(r||m)},m.\u0275mod=d.oAB({type:m}),m.\u0275inj=d.cJS({imports:[[t.ez,x.YM,E.Rt,O.$L.forChild({formatter:{useClass:A.x,provide:O.KP}}),D.m]]}),m})();var g=e(3075),z=e(8776),N=e(4546),R=e(7008),U=e(1825),W=e(4375),Z=e(6042),J=e(4623),M=e(868),B=e(7525),a=e(4921),s=e(4509),_=e(2359);let f=(()=>{class m{}return m.\u0275fac=function(r){return new(r||m)},m.\u0275mod=d.oAB({type:m}),m.\u0275inj=d.cJS({imports:[[t.ez,g.UX,P.WG,Z.sL,o.vh,M.we,N.U5,B.j,a.Gl,_.L,g.u5,z.X0,R.B,U.A,W.R,D.m,J.K,s.w]]}),m})();var Q=e(5017),K=e(6905);let Y=(()=>{class m{}return m.\u0275fac=function(r){return new(r||m)},m.\u0275mod=d.oAB({type:m}),m.\u0275inj=d.cJS({imports:[[t.ez,P.WG,Z.sL,u.Jb,o.vh,n.Ph,Q.PV,K.s,E.Rt,T.zf,L.H0,f,y.N,h]]}),m})()},2233:($,I,e)=>{e.d(I,{P:()=>D});var t=e(5e3),u=e(325),o=e(1894),n=e(868),E=e(9808),T=e(5017),P=e(4401);const L=["tabBarExtraContent"];function y(d,h){if(1&d&&t.GkF(0,5),2&d){const g=t.oxw();t.Q6J("ngTemplateOutlet",g.tabBarExtraContent||null)}}const x=function(){return{transform:"scale(0.75, 0.75) translate(0, -2px)"}};function O(d,h){if(1&d&&(t.TgZ(0,"a",7),t._UZ(1,"i",8),t._uU(2),t._UZ(3,"nz-badge",9),t.qZA()),2&d){const g=t.oxw().$implicit;t.Q6J("routerLink",g.routeName),t.xp6(1),t.Q6J("nzType",g.iconName),t.xp6(1),t.hij(" ",g.tabLabel," "),t.xp6(1),t.MGl("nzTitle","There are ",g.badgeCount," outstanding revisions."),t.Q6J("nzCount",g.badgeCount)("nzStyle",t.DdM(6,x))}}function A(d,h){1&d&&(t.TgZ(0,"nz-tab"),t.YNc(1,O,4,7,"a",6),t.qZA())}let D=(()=>{class d{constructor(g){this.router=g,this.selectedTabIndex=this.getActivatedRouteIndex(this.router.url)}getActivatedRouteIndex(g){var z;return null===(z=this.tabs)||void 0===z?void 0:z.findIndex(N=>g.includes(N.routeName))}}return d.\u0275fac=function(g){return new(g||d)(t.Y36(u.F0))},d.\u0275cmp=t.Xpm({type:d,selectors:[["cvc-tab-navigation"]],contentQueries:function(g,z,N){if(1&g&&t.Suo(N,L,5),2&g){let R;t.iGM(R=t.CRH())&&(z.tabBarExtraContent=R.first)}},inputs:{entity:"entity",tabs:"tabs"},decls:6,vars:3,consts:[["id","section-tabs"],["nzSpan","24"],["nzLinkRouter","","nzType","card","nzSize","small",3,"nzSelectedIndex","nzTabBarExtraContent"],["extraTpl",""],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["nz-tab-link","",3,"routerLink",4,"nzTabLink"],["nz-tab-link","",3,"routerLink"],["nz-icon","",3,"nzType"],["nzStandalone","",3,"nzCount","nzTitle","nzStyle"]],template:function(g,z){if(1&g&&(t.TgZ(0,"nz-row",0)(1,"nz-col",1)(2,"nz-tabset",2),t.YNc(3,y,1,1,"ng-template",null,3,t.W1O),t.YNc(5,A,2,0,"nz-tab",4),t.qZA()()()),2&g){const N=t.MAs(4);t.xp6(2),t.Q6J("nzSelectedIndex",z.selectedTabIndex)("nzTabBarExtraContent",N),t.xp6(3),t.Q6J("ngForOf",z.tabs)}},directives:[o.SK,o.t3,n.xH,E.tP,E.sg,n.xw,n.Fx,n.Ao,u.yS,T.Ls,P.x7],styles:["[_nghost-%COMP%]{display:block}"]}),d})()},8762:($,I,e)=>{e.d(I,{c:()=>y});var t=e(9808),u=e(868),o=e(1894),n=e(325),E=e(5017),T=e(6949),P=e(4401),L=e(5e3);let y=(()=>{class x{}return x.\u0275fac=function(A){return new(A||x)},x.\u0275mod=L.oAB({type:x}),x.\u0275inj=L.cJS({imports:[[t.ez,n.Bz,u.we,o.Jb,E.PV,P.mS,T.WG]]}),x})()},9058:($,I,e)=>{e.d(I,{j:()=>o});var t=e(7630),u=e(5e3);let o=(()=>{class n{transform(T){switch(T){case"ASSERTION":case"Assertion":case t.o71.Assertion:return"civic-assertion";case"EVIDENCE_ITEM":case"EvidenceItem":case t.o71.EvidenceItem:return"civic-evidence";case"GENE":case"Gene":case t.o71.Gene:return"civic-gene";case t.o71.Revision:case"REVISION":case"Revision":return"civic-revision";case t.o71.Variant:case"VARIANT":case"Variant":return"civic-variant";case t.o71.VariantGroup:case"VARIANT_GROUP":case"VariantGroup":return"civic-variant-group";case t.o71.MolecularProfile:case"MOLECULAR_PROFILE":case"MolecularProfile":return"civic-molecularprofile";default:return console.log("String No icon name found for "+T),"border-outer"}}}return n.\u0275fac=function(T){return new(T||n)},n.\u0275pipe=u.Yjl({name:"iconNameForSubscribableEntity",type:n,pure:!0}),n})()},9383:($,I,e)=>{e.d(I,{b:()=>J});var t=e(5e3),u=e(8929),o=e(7630),n=e(373),E=e(2198),T=e(7625),P=e(4850),L=e(1059),y=e(3240),x=e(9350),O=e(6949),A=e(868),D=e(4921),d=e(3075),h=e(9808),g=e(7525),z=e(7948);function N(M,B){if(1&M&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.BQk()),2&M){const a=B.$implicit;t.xp6(2),t.Oqu(a.displayName)}}function R(M,B){1&M&&(t.ynx(0),t._UZ(1,"nz-spin",8),t.BQk())}function U(M,B){if(1&M&&(t.ynx(0),t._UZ(1,"cvc-comment-body",9),t.BQk()),2&M){const a=B.ngIf;t.xp6(1),t.Q6J("commentBodySegments",a)}}const W=function(){return["#","@","$"]};function Z(M,B){if(1&M){const a=t.EpF();t.ynx(0),t.TgZ(1,"nz-tabset",1)(2,"nz-tab",2)(3,"nz-mention",3),t.NdJ("nzOnSearchChange",function(_){return t.CHM(a),t.oxw().onSearchChange(_)})("nzOnSelect",function(){return t.CHM(a),t.oxw().suggestions=[]}),t.TgZ(4,"textarea",4),t.NdJ("ngModelChange",function(_){return t.CHM(a),t.oxw().commentText=_})("ngModelChange",function(_){return t.CHM(a),t.oxw().onCommentChanged(_)}),t.qZA(),t.YNc(5,N,3,1,"ng-container",5),t.qZA()(),t.TgZ(6,"nz-tab",6),t.NdJ("nzClick",function(){return t.CHM(a),t.oxw().onPreviewButtonClicked()}),t.YNc(7,R,2,0,"ng-container",7),t.ALo(8,"ngrxPush"),t.YNc(9,U,2,1,"ng-container",7),t.ALo(10,"ngrxPush"),t.qZA()(),t.BQk()}if(2&M){const a=B.ngrxLet,s=t.oxw();t.xp6(1),t.Q6J("nzAnimated",!1),t.xp6(2),t.Q6J("nzSuggestions",s.suggestions)("nzPrefix",t.DdM(13,W))("nzValueWith",s.autoCompleteValueFor),t.xp6(1),t.Q6J("placeholder",a&&a.canCurate?"Enter comment (minimum length 10. Use @ to mention users; # to link entities)":"Please sign in")("ngModel",s.commentText),t.uIk("disabled",!a||!a.canCurate||null),t.xp6(3),t.Q6J("ngIf",t.lcZ(8,9,s.previewLoading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(10,11,s.previewComment$))}}let J=(()=>{class M{constructor(a,s,_,f){this.previewCommentGql=a,this.userTypeaheadGql=s,this.entityTypeaheadGql=_,this.viewerService=f,this.commentChange=new t.vpe,this.destroy$=new u.xQ,this.suggestions=[],this.roleSuggestions=[{displayName:"admins",value:"admins"},{displayName:"editors",value:"editors"}]}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.commentText=this.comment,this.userTypeaheadQueryRef$=this.userTypeaheadGql.watch({queryTerm:""}),this.userTypeaheadQueryRef$.valueChanges.pipe((0,n.j)("data","userTypeahead"),(0,E.h)(y.ep),(0,T.R)(this.destroy$)).subscribe(a=>this.suggestions=a.map(s=>({displayName:s.username,value:s.username}))),this.entityTypeaheadQueryRef$=this.entityTypeaheadGql.watch({queryTerm:""}),this.entityTypeaheadQueryRef$.valueChanges.pipe((0,n.j)("data","entityTypeahead"),(0,E.h)(y.ep),(0,T.R)(this.destroy$)).subscribe(a=>this.suggestions=a.map(s=>({displayName:s.displayName,value:this.tagForEntityTypeAndId(s.tagType,s.entityId)})))}ngOnChanges(){this.commentText=this.comment}autoCompleteValueFor(a){return a.value}tagForEntityTypeAndId(a,s){switch(a){case o.mpB.Gene:return`GID${s}`;case o.mpB.Variant:return`VID${s}`;case o.mpB.VariantGroup:return`VGID${s}`;case o.mpB.EvidenceItem:return`EID${s}`;case o.mpB.Assertion:return`AID${s}`;case o.mpB.Revision:return`RID${s}`;case o.mpB.MolecularProfile:return`MPID${s}`;case o.mpB.Role:return Object.keys(o.i44)[s]}}resetForm(){this.commentText=""}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreviewButtonClicked(){this.commentText&&(this.previewComment$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,n.j)("data","previewCommentText"),(0,E.h)(y.ep)),this.previewLoading$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,P.U)(({loading:a})=>a),(0,L.O)(!0)))}onSearchChange({value:a,prefix:s}){"@"===s?this.userTypeaheadQueryRef$.refetch({queryTerm:a}):"$"==s?this.suggestions=this.roleSuggestions.filter(_=>_.value.startsWith(a)):this.entityTypeaheadQueryRef$.refetch({queryTerm:a})}onCommentChanged(a){this.commentChange.emit(a)}}return M.\u0275fac=function(a){return new(a||M)(t.Y36(o.mII),t.Y36(o.vMt),t.Y36(o.GYx),t.Y36(x.a))},M.\u0275cmp=t.Xpm({type:M,selectors:[["cvc-comment-input-form"]],inputs:{comment:"comment"},outputs:{commentChange:"commentChange"},features:[t.TTD],decls:1,vars:1,consts:[[4,"ngrxLet"],[3,"nzAnimated"],["nzTitle","Write"],["nzNotFoundContent","No matches...",3,"nzSuggestions","nzPrefix","nzValueWith","nzOnSearchChange","nzOnSelect"],["nzMentionTrigger","","nz-input","","rows","4",2,"width","100%",3,"placeholder","ngModel","ngModelChange"],[4,"nzMentionSuggestion"],["nzTitle","Preview",3,"nzClick"],[4,"ngIf"],["nzTip","Loading..."],[3,"commentBodySegments"]],template:function(a,s){1&a&&t.YNc(0,Z,11,14,"ng-container",0),2&a&&t.Q6J("ngrxLet",s.viewer$)},directives:[O.eJ,A.xH,A.xw,D.YW,D.jO,d.Fj,d.JJ,d.On,D.O3,h.O5,g.W,z.m],pipes:[O.fM],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2}),M})()},4509:($,I,e)=>{e.d(I,{w:()=>g});var t=e(9808),u=e(3075),o=e(7484),n=e(4546),E=e(7008),T=e(1825),P=e(4375),L=e(6042),y=e(4623),x=e(868),O=e(6949),A=e(8909),D=e(7525),d=e(4921),h=e(5e3);let g=(()=>{class z{}return z.\u0275fac=function(R){return new(R||z)},z.\u0275mod=h.oAB({type:z}),z.\u0275inj=h.cJS({imports:[[t.ez,u.UX,O.WG,L.sL,o.vh,x.we,n.U5,D.j,d.Gl,u.u5,E.B,T.A,P.R,A.m,y.K]]}),z})()},1344:($,I,e)=>{e.d(I,{DA:()=>R,WE:()=>J,Y4:()=>U,YM:()=>B});var t=e(226),u=e(9808),o=e(5e3),n=e(969),E=e(7429),T=e(8929),P=e(7625);function L(a,s){1&a&&o.Hsn(0)}const y=["*"];function x(a,s){if(1&a&&(o.ynx(0),o._uU(1),o.BQk()),2&a){const _=o.oxw(2);o.xp6(1),o.Oqu(_.nzAuthor)}}function O(a,s){if(1&a&&(o.TgZ(0,"span",8),o.YNc(1,x,2,1,"ng-container",9),o.qZA()),2&a){const _=o.oxw();o.xp6(1),o.Q6J("nzStringTemplateOutlet",_.nzAuthor)}}function A(a,s){if(1&a&&(o.ynx(0),o._uU(1),o.BQk()),2&a){const _=o.oxw(2);o.xp6(1),o.Oqu(_.nzDatetime)}}function D(a,s){if(1&a&&(o.TgZ(0,"span",10),o.YNc(1,A,2,1,"ng-container",9),o.qZA()),2&a){const _=o.oxw();o.xp6(1),o.Q6J("nzStringTemplateOutlet",_.nzDatetime)}}function d(a,s){}function h(a,s){if(1&a&&(o.TgZ(0,"li")(1,"span"),o.YNc(2,d,0,0,"ng-template",13),o.qZA()()),2&a){const _=s.$implicit;o.xp6(2),o.Q6J("nzCommentActionHost",_.content)}}function g(a,s){if(1&a&&(o.TgZ(0,"ul",11),o.YNc(1,h,3,1,"li",12),o.qZA()),2&a){const _=o.oxw();o.xp6(1),o.Q6J("ngForOf",_.actions)}}const z=[[["nz-avatar","nz-comment-avatar",""]],[["nz-comment-content"]],"*"],N=["nz-avatar[nz-comment-avatar]","nz-comment-content","*"];let R=(()=>{class a{}return a.\u0275fac=function(_){return new(_||a)},a.\u0275dir=o.lG2({type:a,selectors:[["nz-avatar","nz-comment-avatar",""]],exportAs:["nzCommentAvatar"]}),a})(),U=(()=>{class a{}return a.\u0275fac=function(_){return new(_||a)},a.\u0275dir=o.lG2({type:a,selectors:[["nz-comment-content"],["","nz-comment-content",""]],hostAttrs:[1,"ant-comment-content-detail"],exportAs:["nzCommentContent"]}),a})(),W=(()=>{class a extends E.Pl{constructor(_,f){super(_,f)}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}ngAfterViewInit(){this.attach(this.nzCommentActionHost)}}return a.\u0275fac=function(_){return new(_||a)(o.Y36(o._Vd),o.Y36(o.s_b))},a.\u0275dir=o.lG2({type:a,selectors:[["","nzCommentActionHost",""]],inputs:{nzCommentActionHost:"nzCommentActionHost"},exportAs:["nzCommentActionHost"],features:[o.qOj]}),a})(),Z=(()=>{class a{constructor(_){this.viewContainerRef=_,this.contentPortal=null}get content(){return this.contentPortal}ngOnInit(){this.contentPortal=new E.UE(this.implicitContent,this.viewContainerRef)}}return a.\u0275fac=function(_){return new(_||a)(o.Y36(o.s_b))},a.\u0275cmp=o.Xpm({type:a,selectors:[["nz-comment-action"]],viewQuery:function(_,f){if(1&_&&o.Gf(o.Rgc,7),2&_){let Q;o.iGM(Q=o.CRH())&&(f.implicitContent=Q.first)}},exportAs:["nzCommentAction"],ngContentSelectors:y,decls:1,vars:0,template:function(_,f){1&_&&(o.F$t(),o.YNc(0,L,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),a})(),J=(()=>{class a{constructor(_,f){this.cdr=_,this.directionality=f,this.dir="ltr",this.destroy$=new T.xQ}ngOnInit(){var _;null===(_=this.directionality.change)||void 0===_||_.pipe((0,P.R)(this.destroy$)).subscribe(f=>{this.dir=f,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return a.\u0275fac=function(_){return new(_||a)(o.Y36(o.sBO),o.Y36(t.Is,8))},a.\u0275cmp=o.Xpm({type:a,selectors:[["nz-comment"]],contentQueries:function(_,f,Q){if(1&_&&o.Suo(Q,Z,4),2&_){let K;o.iGM(K=o.CRH())&&(f.actions=K)}},hostVars:4,hostBindings:function(_,f){2&_&&o.ekj("ant-comment",!0)("ant-comment-rtl","rtl"===f.dir)},inputs:{nzAuthor:"nzAuthor",nzDatetime:"nzDatetime"},exportAs:["nzComment"],ngContentSelectors:N,decls:11,vars:3,consts:[[1,"ant-comment-inner"],[1,"ant-comment-avatar"],[1,"ant-comment-content"],[1,"ant-comment-content-author"],["class","ant-comment-content-author-name",4,"ngIf"],["class","ant-comment-content-author-time",4,"ngIf"],["class","ant-comment-actions",4,"ngIf"],[1,"ant-comment-nested"],[1,"ant-comment-content-author-name"],[4,"nzStringTemplateOutlet"],[1,"ant-comment-content-author-time"],[1,"ant-comment-actions"],[4,"ngFor","ngForOf"],[3,"nzCommentActionHost"]],template:function(_,f){1&_&&(o.F$t(z),o.TgZ(0,"div",0)(1,"div",1),o.Hsn(2),o.qZA(),o.TgZ(3,"div",2)(4,"div",3),o.YNc(5,O,2,1,"span",4),o.YNc(6,D,2,1,"span",5),o.qZA(),o.Hsn(7,1),o.YNc(8,g,2,1,"ul",6),o.qZA()(),o.TgZ(9,"div",7),o.Hsn(10,2),o.qZA()),2&_&&(o.xp6(5),o.Q6J("ngIf",f.nzAuthor),o.xp6(1),o.Q6J("ngIf",f.nzDatetime),o.xp6(2),o.Q6J("ngIf",null==f.actions?null:f.actions.length))},directives:[u.O5,n.f,u.sg,W],encapsulation:2,changeDetection:0}),a})(),B=(()=>{class a{}return a.\u0275fac=function(_){return new(_||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[[t.vT,u.ez,n.T]]}),a})()}}]);