"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[4009],{6936:(E,u,e)=>{e.d(u,{G:()=>g});var s=e(177),d=e(1188),c=e(5699),r=e(1236),o=e(5103),t=e(4666),i=e(4917),p=e(3146),_=e(4994),f=e(3953);let g=(()=>{class n{static#e=this.\u0275fac=function(D){return new(D||n)};static#t=this.\u0275mod=f.$C({type:n});static#n=this.\u0275inj=f.G2t({imports:[s.MD,d.iI,p.W2,c.T,r.MC,o.Y3,t.v,i.i,_.a]})}return n})()},8920:(E,u,e)=>{e.d(u,{U:()=>m});var s=e(177),d=e(1188),c=e(5699),r=e(5103),o=e(7529),t=e(7054),i=e(2e3),p=e(5703),_=e(3357),f=e(3953);let g=(()=>{class l{static#e=this.\u0275fac=function(M){return new(M||l)};static#t=this.\u0275mod=f.$C({type:l});static#n=this.\u0275inj=f.G2t({imports:[s.MD,p.Ti,o.f3,i.WF,t.L,_.P]})}return l})();var n=e(1236);let m=(()=>{class l{static#e=this.\u0275fac=function(M){return new(M||l)};static#t=this.\u0275mod=f.$C({type:l});static#n=this.\u0275inj=f.G2t({imports:[s.MD,d.iI,c.T,r.Y3,n.MC,g]})}return l})()},9374:(E,u,e)=>{e.d(u,{r:()=>m});var s=e(177),d=e(2142),c=e(5699),r=e(1236),o=e(9192),t=e(8920),i=e(7051),p=e(9802),_=e(5493),f=e(6912),g=e(7086),n=e(3953);let m=(()=>{class l{static#e=this.\u0275fac=function(M){return new(M||l)};static#t=this.\u0275mod=n.$C({type:l});static#n=this.\u0275inj=n.G2t({imports:[s.MD,c.T,r.MC,d.x,p._,o.J,t.U,f.l,i.U,_.G,g.C]})}return l})()},5493:(E,u,e)=>{e.d(u,{G:()=>n});var s=e(177),d=e(1188),c=e(5699),r=e(5703),o=e(7054),t=e(2e3),i=e(5103),p=e(4917),_=e(3953);let f=(()=>{class m{static#e=this.\u0275fac=function(y){return new(y||m)};static#t=this.\u0275mod=_.$C({type:m});static#n=this.\u0275inj=_.G2t({imports:[s.MD,i.Y3,r.Ti,t.WF,p.i,o.L]})}return m})();var g=e(1236);let n=(()=>{class m{static#e=this.\u0275fac=function(y){return new(y||m)};static#t=this.\u0275mod=_.$C({type:m});static#n=this.\u0275inj=_.G2t({imports:[s.MD,d.iI,i.Y3,c.T,g.MC,f]})}return m})()},7292:(E,u,e)=>{e.d(u,{H:()=>c});var d=e(3953);let c=(()=>{class r{transform(t,i="display-string"){return void 0===t?"":"display-string"===i?function s(r){switch(r){case"COMBINATION":return"Combination";case"SEQUENTIAL":return"Sequential";case"SUBSTITUTES":return"Substitutes";default:return r}}(t):`civic-${t.replace(/_/g,"").toLowerCase()}`}static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275pipe=d.EJ8({name:"therapyInteractionEnumDisplay",type:r,pure:!0})}return r})()},5847:(E,u,e)=>{e.d(u,{Z:()=>T});var s=e(1635),d=e(9417),c=e(1226),r=e(7593),o=e(9894);const f=(0,e(7480).A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Assertion"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"molecularProfileId",type:"molecular-profile-select",props:{required:!0,watchVariantMolecularProfileId:!0}}]},{wrappers:["form-row"],props:{formRowOptions:{responsive:{xs:24,lg:12,xl:8,xxl:6}}},fieldGroup:[{key:"assertionType",type:"type-select",props:{required:!0}},{key:"assertionDirection",type:"direction-select",props:{required:!0}},{key:"significance",type:"significance-select",props:{required:!0}},{key:"diseaseId",type:"disease-select",props:{}},{key:"therapyIds",type:"therapy-multi-select",props:{}},{key:"therapyInteractionType",type:"interaction-select",props:{}},{key:"variantOrigin",type:"origin-select",props:{required:!0}},{key:"phenotypeIds",type:"phenotype-multi-select",props:{}},{key:"ampLevel",type:"amp-category-select",props:{}},{key:"acmgCodeIds",type:"acmg-code-multi-select",props:{}},{key:"clingenCodeIds",type:"clingen-code-multi-select",props:{}},{key:"nccnGuidelineId",type:"nccn-guideline-select",props:{}},{key:"nccnGuidelineVersion",type:"nccn-guideline-version-input",props:{}},{key:"fdaRegulatoryApproval",type:"fda-regulatory-approval-checkbox",props:{}},{key:"fdaCompanionTest",type:"fda-companion-test-checkbox",props:{}}]},{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{xs:24},{md:24,lg:8},{md:24,lg:16}]}},fieldGroup:[{key:"evidenceItemIds",type:"evidence-multi-select",props:{required:!0,isMultiSelect:!0}},{key:"summary",type:"base-textarea",props:{tooltip:"A short, one sentence summary of the Assertion",placeholder:"Enter an Assertion Summary",label:"Assertion Summary",required:!0}},{key:"description",type:"base-textarea",props:{tooltip:"A complete, original description of this Assertion. Limited to one paragraph.",placeholder:"Enter an Assertion Statement",label:"Assertion Statement",required:!0,rows:5}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"textarea",props:{label:"Comment",required:!0}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{molecularProfileId:void 0,acmgCodeIds:[],ampLevel:void 0,assertionDirection:void 0,assertionType:void 0,clingenCodeIds:[],significance:void 0,description:void 0,diseaseId:void 0,therapyIds:[],therapyInteractionType:void 0,evidenceItemIds:[],fdaCompanionTest:void 0,fdaRegulatoryApproval:void 0,nccnGuidelineId:void 0,nccnGuidelineVersion:void 0,phenotypeIds:[],summary:void 0,variantOrigin:void 0},comment:void 0,organizationId:void 0});var g=e(1653),n=e(3953),m=e(9145),l=e(4222),D=e(177),y=e(8927),M=e(8524),R=e(8721);function A(C,v){if(1&C&&(n.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),n.j41(1,"a",4),n.EFF(2,"here."),n.k0s()),2&C){const a=n.XpG();n.R7$(),n.FS9("href",a.url,n.B4B)}}function L(C,v){if(1&C){const a=n.RV6();n.j41(0,"form",5),n.bIt("ngSubmit",function(){n.eBV(a);const h=n.XpG();return n.Njj(h.onSubmit(h.model))}),n.j41(1,"formly-form",6),n.bIt("modelChange",function(h){n.eBV(a);const O=n.XpG();return n.Njj(O.model=h)}),n.k0s()()}if(2&C){const a=n.XpG();n.Y8G("formGroup",a.form),n.R7$(),n.Y8G("form",a.form)("fields",a.fields)("model",a.model)("options",a.options)}}function G(C,v){1&C&&n.EFF(0," Loading Assertion... ")}let T=class P{constructor(v,a,I,h){this.revisableFieldsGQL=v,this.submitRevisionsGQL=a,this.networkErrorService=I,this.cdr=h,this.form=new d.J3({}),this.fields=f,this.state=new r.o,this.state.formMode="revise",this.options={formState:this.state},this.reviseAssertionMutator=new c.E(I)}onSubmit(v){if(!this.assertionId)return;let a=(0,g.$h)(this.assertionId,v);a&&(this.mutationState=this.reviseAssertionMutator.mutate(this.submitRevisionsGQL,{input:a}))}ngOnInit(){this.url=`/assertions/${this.assertionId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({assertionId:this.assertionId}).pipe((0,o.s)(this)).subscribe({next:({data:{assertion:v}})=>{v&&(this.model={id:v.id,fields:(0,g.Mw)(v)},this.cdr.detectChanges())},error:v=>{console.log("Error retrieving Assertion"),console.log(v)},complete:()=>{this.state.formReady$.next(!0)}})}ngOnDestroy(){this.options.formState.onDestroy()}static#e=this.\u0275fac=function(a){return new(a||P)(n.rXU(m.VV8),n.rXU(m.wkS),n.rXU(l.N),n.rXU(n.gRc))};static#t=this.\u0275cmp=n.VBU({type:P,selectors:[["cvc-assertion-revise-form"]],inputs:{assertionId:"assertionId"},decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Evidence Item",3,"mutationState","successMessage","redirectUrl"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(a,I){if(1&a&&(n.j41(0,"cvc-form-submission-status-display",2),n.DNE(1,A,3,1,"ng-template",null,0,n.C5r)(3,L,2,5,"form",3)(4,G,1,0,"ng-template",null,1,n.C5r),n.k0s()),2&a){const h=n.sdS(2),O=n.sdS(5);n.Y8G("mutationState",I.mutationState)("successMessage",h)("redirectUrl",I.url),n.R7$(3),n.Y8G("ngIf",I.model)("ngIfElse",O)}},dependencies:[D.bT,y.CA,d.qT,d.cb,d.j4,M.aF,R.G],encapsulation:2,changeDetection:0})};T=(0,s.Cg)([(0,o.d)()],T)},2090:(E,u,e)=>{e.d(u,{B:()=>i});var s=e(177),d=e(8927),c=e(513),r=e(8168),o=e(5316),t=e(3953);let i=(()=>{class p{static#e=this.\u0275fac=function(g){return new(g||p)};static#t=this.\u0275mod=t.$C({type:p});static#n=this.\u0275inj=t.G2t({imports:[s.MD,d.PQ,c.Zw,r.m,o.P]})}return p})()},1653:(E,u,e)=>{e.d(u,{$h:()=>r,Mw:()=>d,fR:()=>c});var s=e(5741);function d(o){return{acmgCodeIds:o.acmgCodes.map(t=>t.id),ampLevel:o.ampLevel,assertionDirection:o.assertionDirection,assertionType:o.assertionType,clingenCodeIds:o.clingenCodes.map(t=>t.id),significance:o.significance,description:o.description,diseaseId:o.disease?.id,therapyIds:o.therapies.map(t=>t.id),therapyInteractionType:o.therapyInteractionType,evidenceItemIds:o.evidenceItems.map(t=>t.id),fdaCompanionTest:o.fdaCompanionTest,fdaRegulatoryApproval:o.regulatoryApproval,molecularProfileId:o.molecularProfile.id,nccnGuidelineId:o.nccnGuideline?.id,nccnGuidelineVersion:o.nccnGuidelineVersion,phenotypeIds:o.phenotypes.map(t=>t.id),summary:o.summary,variantOrigin:o.variantOrigin}}function c(o){const t=o.fields;if(![t.assertionDirection,t.assertionType,t.significance,t.variantOrigin,t.molecularProfileId,o.comment].find(p=>void 0===p))return{fields:{acmgCodeIds:t.acmgCodeIds||[],ampLevel:s.pz(t.ampLevel),assertionDirection:t.assertionDirection,assertionType:t.assertionType,clingenCodeIds:t.clingenCodeIds||[],significance:t.significance,description:s.q2(t.description),diseaseId:s.pz(t.diseaseId),therapyIds:t.therapyIds||[],therapyInteractionType:s.pz(t.therapyInteractionType),evidenceItemIds:t.evidenceItemIds||[],fdaCompanionTest:s.pz(t.fdaCompanionTest),fdaRegulatoryApproval:s.pz(t.fdaRegulatoryApproval),molecularProfileId:t.molecularProfileId,nccnGuidelineId:s.pz(t.nccnGuidelineId),nccnGuidelineVersion:s.q2(t.nccnGuidelineVersion),phenotypeIds:t.phenotypeIds||[],summary:s.q2(t.summary),variantOrigin:t.variantOrigin},organizationId:o.organizationId,comment:o.comment}}function r(o,t){let i=c(t);if(i)return{id:o,comment:i.comment,organizationId:i.organizationId,fields:i.fields}}}}]);