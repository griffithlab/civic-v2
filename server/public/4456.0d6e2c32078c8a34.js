"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[4456],{4456:(Ie,A,n)=>{n.r(A),n.d(A,{AssertionAddModule:()=>Te});var m=n(9808),c=n(325),e=n(5e3),C=n(8992),p=n(1945),x=n(647);let O=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["cvc-assertion-add"]],decls:10,vars:0,consts:[["displayName","New"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzType","civic:assertion"],[1,"content"]],template:function(o,r){1&o&&(e._UZ(0,"cvc-section-navigation",0),e.TgZ(1,"nz-page-header",1),e.TgZ(2,"nz-page-header-title",2),e._UZ(3,"i",3),e._uU(4," Add New Assertion "),e.qZA(),e.TgZ(5,"nz-page-header-subtitle"),e._uU(6," Submit and review new assertion items "),e.qZA(),e.TgZ(7,"nz-page-header-content"),e.TgZ(8,"div",4),e._UZ(9,"router-outlet"),e.qZA(),e.qZA(),e.qZA())},directives:[C.I,p.$O,p.u9,x.Ls,p.yG,p.u5,c.lC],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),t})();var u=n(4182),f=n(5109),v=n(4546),z=n(2359),y=n(1894),M=n(6042),b=n(7525),S=n(8776),T=n(1825),I=n(7008),Z=n(4375),P=n(7695),F=n(7075),J=n(8390),G=n(3773),N=n(5452),L=n(5743),U=n(5457),Q=n(8006),j=n(7462),Y=n(4623),$=n(3594),R=n(3643),D=n(1135),V=n(2789),B=n(5932),E=n(3416),X=n(2480),K=n(1830),W=n(4581),H=n(1605),w=n(5926),k=n(1270),q=n(3314),_=n(3759),ee=n(4902),te=n(5486),ne=n(464),oe=n(7795),ie=n(5472),se=n(9946),re=n(9754),ae=n(4889);let le=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[m.ez,c.Bz,u.UX,f.s,v.U5,z.L,y.Jb,M.sL,b.j,S.X0,T.A,I.B,Z.R,P.C,F.l,J.N,G.g,N.C,L.W,U.$,Q.I,j.o,Y.K,$.q,R.q,D.C,V.o,B.A,E.g,X.r,K.S,W.e,H.e,w.J,k.i,q.p,_.D,ee.a,te.$,ne.N,oe.k,ie.r,se.d,f.s,re.K,ae.E]]}),t})(),de=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[m.ez,le]]}),t})();var me=n(6123),l=n(6738),ce=n(8929),h=n(7625),pe=n(1837),ue=n(712),ge=n(9169),fe=n(822);function ve(t,s){1&t&&e.GkF(0)}function ye(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"formly-form",8),e.NdJ("modelChange",function(a){return e.CHM(o),e.oxw().formModel=a}),e.qZA()}if(2&t){const o=e.oxw();e.Q6J("form",o.formGroup)("fields",o.formFields)("model",o.formModel)("options",o.formOptions)}}function he(t,s){if(1&t&&(e.TgZ(0,"nz-form-item"),e._UZ(1,"cvc-form-errors-alert",10),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.Q6J("errors",o.errorMessages)}}function Ae(t,s){if(1&t&&(e.TgZ(0,"p"),e._uU(1,"View "),e.TgZ(2,"a",14),e._uU(3,"its details"),e.qZA(),e._uU(4,"."),e.qZA()),2&t){const o=e.oxw(3);e.xp6(2),e.MGl("routerLink","/assertions/",o.newId,"/summary")}}function xe(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"nz-alert",11),e.YNc(2,Ae,5,1,"ng-template",12,13,e.W1O),e.BQk()),2&t){const o=e.MAs(3);e.xp6(1),e.Q6J("nzDescription",o)}}function ze(t,s){if(1&t&&(e.YNc(0,he,2,1,"nz-form-item",9),e.YNc(1,xe,4,1,"ng-container",9)),2&t){const o=e.oxw();e.Q6J("ngIf",o.errorMessages.length>0),e.xp6(1),e.Q6J("ngIf",o.success)}}function be(t,s){if(1&t&&e._UZ(0,"ngx-json-viewer",15),2&t){const o=e.oxw();e.Q6J("json",o.formModel)}}let Se=(()=>{class t{constructor(o,r){this.submitAssertionGQL=o,this.networkErrorService=r,this.destroy$=new ce.xQ,this.formGroup=new u.cw({}),this.formOptions={formState:new pe._},this.success=!1,this.errorMessages=[],this.loading=!1,this.submitAssertionMutator=new me.U(r),this.formFields=[{key:"fields",wrappers:["form-container"],templateOptions:{label:"Add Assertion Form"},fieldGroup:[{key:"gene",type:"gene-array",templateOptions:{maxCount:1,required:!0}},{key:"variant",type:"variant-array",templateOptions:{required:!0,maxCount:1,allowCreate:!1}},{key:"variantOrigin",type:"variant-origin-select",templateOptions:{required:!0}},{key:"disease",type:"disease-array",templateOptions:{maxCount:1,allowCreate:!1}},{key:"evidenceType",type:"evidence-type-select",templateOptions:{label:"Assertion Type",required:!0}},{key:"evidenceDirection",type:"evidence-direction-select",templateOptions:{label:"Assertion Direction",required:!0}},{key:"clinicalSignificance",type:"clinical-significance-select",templateOptions:{required:!0}},{key:"drugs",type:"drug-array",templateOptions:{allowCreate:!1}},{key:"drugInteractionType",type:"drug-interaction-select",templateOptions:{}},{key:"ampLevel",type:"amp-level-input",templateOptions:{}},{key:"acmgCodes",type:"acmg-code-array",templateOptions:{label:"ACMG/AMP Code(s)"}},{key:"phenotypes",type:"phenotype-array",templateOptions:{}},{key:"nccnGuideline",type:"nccn-guideline-input",templateOptions:{}},{key:"nccnGuidelineVersion",type:"nccn-version-input",templateOptions:{}},{key:"fdaRegulatoryApproval",type:"fda-approval-checkbox",templateOptions:{modelCallback:g=>{this.formModel.fields.fdaRegulatoryApproval=g}}},{key:"fdaCompanionTest",type:"fda-test-checkbox",templateOptions:{modelCallback:g=>{this.formModel.fields.fdaCompanionTest=g}}},{key:"summary",type:"cvc-textarea",templateOptions:{label:"Assertion Summary",helpText:"A short, one sentence summary of this new assertion",placeholder:"No description provided",required:!0}},{key:"description",type:"cvc-textarea",templateOptions:{label:"Assertion Statement",helpText:"A complete, original description of this new assertion, limited to one paragraph",placeholder:"No description provided",required:!0}},{key:"evidenceItems",type:"multi-field",wrappers:["form-field","evidence-manager"],templateOptions:{label:"Evidence Items",helpText:"Evidence Items that support the assertion.",addText:"Add Evidence by ID",required:!0,eidCallback:g=>{this.formModel.fields.evidenceItems=g}},fieldArray:{type:"evidence-input",templateOptions:{required:!0}}},{key:"comment",type:"comment-textarea",templateOptions:{label:"Comment",helpText:"Please provide any additional comments you wish to make about this assertion. This comment will appear as the first comment in this item's comment thread.",placeholder:"Please enter a comment describing your assertion.",minLength:10}},{key:"cancel",type:"cancel-button"},{key:"organization",type:"org-submit-button",templateOptions:{submitLabel:"Submit Assertion",submitSize:"large"}}]}]}toSubmitInput(o){var r,a;if(o){const i=o.fields;return{comment:i.comment&&0!=i.comment.length?i.comment:void 0,organizationId:null===(r=i.organization)||void 0===r?void 0:r.id,fields:{description:l.xt(i.description),summary:l.xt(i.summary),variantId:i.variant[0].id,geneId:i.gene[0].id,variantOrigin:i.variantOrigin,assertionType:i.evidenceType,clinicalSignificance:i.clinicalSignificance,diseaseId:l.uP(i.disease[0].id),assertionDirection:i.evidenceDirection,phenotypeIds:i.phenotypes.map(d=>d.id),drugIds:i.drugs.map(d=>d.id),drugInteractionType:l.uP(i.drugInteractionType),ampLevel:l.uP(i.ampLevel),nccnGuidelineId:l.uP(null===(a=i.nccnGuideline)||void 0===a?void 0:a.id),nccnGuidelineVersion:l.xt(i.nccnGuidelineVersion),acmgCodeIds:i.acmgCodes.map(d=>d.id),fdaCompanionTest:l.uP(i.fdaCompanionTest),fdaRegulatoryApproval:l.uP(i.fdaRegulatoryApproval),evidenceItemIds:i.evidenceItems.map(d=>d.id)}}}}submitAssertion(o){let r=this.toSubmitInput(o);if(r){let a=this.submitAssertionMutator.mutate(this.submitAssertionGQL,{input:r},i=>{this.newId=i.submitAssertion.assertion.id});a.submitSuccess$.pipe((0,h.R)(this.destroy$)).subscribe(i=>{i&&(this.success=!0)}),a.submitError$.pipe((0,h.R)(this.destroy$)).subscribe(i=>{i&&(this.errorMessages=i,this.success=!1)}),a.isSubmitting$.pipe((0,h.R)(this.destroy$)).subscribe(i=>{this.loading=i})}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(ue.LLl),e.Y36(ge.Y))},t.\u0275cmp=e.Xpm({type:t,selectors:[["cvc-assertion-submit-form"]],decls:9,vars:5,consts:[["nzTip","Submitting",3,"nzSpinning"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[4,"ngTemplateOutlet"],[3,"form","fields","model","options","modelChange",4,"ngIf"],["formMessages",""],["nz-row",""],["nz-col","","nzSpan","24"],[3,"json",4,"ngIf"],[3,"form","fields","model","options","modelChange"],[4,"ngIf"],[3,"errors"],["nzType","success","nzMessage","Assertion Submitted","nzShowIcon","",3,"nzDescription"],["nzSize","small"],["successMessage",""],[3,"routerLink"],[3,"json"]],template:function(o,r){if(1&o&&(e.TgZ(0,"nz-spin",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){return r.submitAssertion(r.formModel)}),e.YNc(2,ve,1,0,"ng-container",2),e.YNc(3,ye,1,4,"formly-form",3),e.qZA(),e.YNc(4,ze,2,2,"ng-template",null,4,e.W1O),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.YNc(8,be,1,1,"ngx-json-viewer",7),e.qZA(),e.qZA()),2&o){const a=e.MAs(5);e.Q6J("nzSpinning",r.loading),e.xp6(1),e.Q6J("formGroup",r.formGroup),e.xp6(1),e.Q6J("ngTemplateOutlet",a),e.xp6(1),e.Q6J("ngIf",!r.success),e.xp6(5),e.Q6J("ngIf",r.formModel)}},directives:[b.W,u._Y,u.JL,v.Lr,u.sg,m.tP,m.O5,S.T7,y.SK,v.Nx,fe.V,z.r,c.yS,y.t3,f.Y],styles:["[_nghost-%COMP%]{display:block}"]}),t})();const Ce=[{path:"",component:O,children:[{path:"",redirectTo:"submit",pathMatch:"full"},{path:"submit",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["cvc-assertion-submit"]],decls:1,vars:0,template:function(o,r){1&o&&e._UZ(0,"cvc-assertion-submit-form")},directives:[Se],styles:[""]}),t})(),data:{breadcrumb:"Submit New Assertion"}}]}];let Oe=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[c.Bz.forChild(Ce),de],c.Bz]}),t})();var Me=n(5630);let Te=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[m.ez,Oe,p.KJ,x.PV,Me.D]]}),t})()}}]);