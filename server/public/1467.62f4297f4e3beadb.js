"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[1467],{6371:(Z,N,o)=>{o.d(N,{O:()=>M});var l=o(72200),c=o(97529),I=o(12617),h=o(25703),n=o(97685),u=o(75699),t=o(7391),g=o(72968),T=o(29438),b=o(30869),G=o(11672),j=o(50513),F=o(41951),O=o(73664),P=o(48728);let M=(()=>{class S{static#n=this.\u0275fac=function(V){return new(V||S)};static#t=this.\u0275mod=O.$C({type:S});static#e=this.\u0275inj=P.G2t({imports:[l.MD,c.f3,I.rD,h.Ti,n.pc,u.T,t.kT,T.Yb,G._v,j.Z,F.Y3,g.K,b.S]})}return S})()},16269:(Z,N,o)=>{o.d(N,{f:()=>Y});var l=o(24608),c=o(73664),I=o(69145),h=o(72200),n=o(7391),u=o(38132),t=o(29438),g=o(1236),T=o(62e3),b=o(72702),G=o(27793);function j(v,$){1&v&&(c.qex(0),c.EFF(1,", "),c.bVm())}function F(v,$){if(1&v&&(c.qex(0),c.EFF(1),c.nI1(2,"eventVerbiage"),c.DNE(3,j,2,0,"ng-container",12),c.bVm()),2&v){const C=$.$implicit,L=$.last;c.R7$(),c.SpI(" ",c.brH(2,2,C.action,"contributor-card",C.count)," "),c.R7$(2),c.Y8G("ngIf",!L)}}function O(v,$){if(1&v&&(c.j41(0,"nz-descriptions",8)(1,"nz-descriptions-item",9),c.DNE(2,F,4,6,"ng-container",10),c.k0s(),c.j41(3,"nz-descriptions-item",11),c.EFF(4),c.nI1(5,"date"),c.k0s()()),2&v){const C=c.XpG(2).$implicit;c.Y8G("nzColumn",1),c.R7$(2),c.Y8G("ngForOf",C.uniqueActions),c.R7$(2),c.SpI(" ",c.bMT(5,3,C.lastActionDate)," ")}}function P(v,$){if(1&v&&(c.j41(0,"cvc-user-popover",7),c.DNE(1,O,6,5,"ng-template",null,2,c.C5r),c.k0s()),2&v){const C=c.XpG().$implicit;c.Y8G("userId",C.user.id)}}function M(v,$){if(1&v&&(c.j41(0,"a",5),c.nrm(1,"nz-avatar",6),c.DNE(2,P,3,1,"ng-template",null,1,c.C5r),c.k0s()),2&v){const C=$.$implicit,L=c.sdS(3);c.Y8G("routerLink",c.VkB("/users/",C.user.id)),c.R7$(),c.Y8G("nzSize",14)("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",L)("nzSrc",C.user.profileImagePath)}}function S(v,$){if(1&v&&(c.qex(0),c.DNE(1,M,4,6,"a",4),c.bVm()),2&v){const C=c.XpG();c.R7$(),c.Y8G("ngForOf",C.sortedContributors)}}function B(v,$){1&v&&c.EFF(0," None ")}let U=(()=>{class v{ngOnInit(){if(void 0===this.contributors)throw new Error("Must pass a list of contributors into the contributor stack");this.sortedContributors=this.contributors.slice(),this.sortedContributors.sort((C,L)=>L.totalActionCount-C.totalActionCount)}static#n=this.\u0275fac=function(L){return new(L||v)};static#t=this.\u0275cmp=c.VBU({type:v,selectors:[["cvc-contributor-stack"]],inputs:{contributors:"contributors"},standalone:!1,decls:3,vars:2,consts:[["noContributors",""],["curatorPopover",""],["additionalMetadata",""],[4,"ngIf","ngIfElse"],["class","avatar",3,"routerLink",4,"ngFor","ngForOf"],[1,"avatar",3,"routerLink"],["nz-popover","","nzPopoverTrigger","hover","nzPopoverPlacement","bottomRight","nzIcon","user","nzSize","small",3,"nzSize","nzPopoverMouseEnterDelay","nzPopoverContent","nzSrc"],[3,"userId"],["nzBordered","","nzTitle","Activity","nzSize","small",3,"nzColumn"],["nzTitle","Contributions"],[4,"ngFor","ngForOf"],["nzTitle","Last Contribution"],[4,"ngIf"]],template:function(L,H){if(1&L&&c.DNE(0,S,2,1,"ng-container",3)(1,B,1,0,"ng-template",null,0,c.C5r),2&L){const W=c.sdS(2);c.Y8G("ngIf",H.sortedContributors&&H.sortedContributors.length>0)("ngIfElse",W)}},dependencies:[h.Sq,h.bT,u.Wk,t.PM,g.L_,T.xA,T.gr,b.M,h.vh,G.s],encapsulation:2})}return v})();var V=o(61774);function x(v,$){if(1&v&&(c.qex(0),c.nrm(1,"cvc-contributor-stack",5),c.bVm()),2&v){const C=$.ngIf;c.R7$(),c.Y8G("contributors",C)}}function k(v,$){1&v&&c.EFF(0," None ")}function y(v,$){if(1&v&&(c.qex(0),c.nrm(1,"cvc-contributor-stack",5),c.bVm()),2&v){const C=$.ngIf;c.R7$(),c.Y8G("contributors",C)}}function D(v,$){1&v&&c.EFF(0," None ")}let Y=(()=>{class v{constructor(C){this.gql=C}ngOnInit(){if(void 0===this.subscribable)throw new Error("Must pass a subscribable into ContributorAvatars component.");let C=this.gql.watch({subscribable:this.subscribable}).valueChanges;this.curators$=C.pipe((0,l.E)("data","contributors","curators")),this.editors$=C.pipe((0,l.E)("data","contributors","editors"))}static#n=this.\u0275fac=function(L){return new(L||v)(c.rXU(I.wBW))};static#t=this.\u0275cmp=c.VBU({type:v,selectors:[["cvc-contributor-avatars"]],inputs:{subscribable:"subscribable"},standalone:!1,decls:14,vars:8,consts:[["noCurators",""],["noEditors",""],["nz-typography","","nzType","secondary",1,"role-group-label"],[1,"role-group"],[4,"ngIf","ngIfElse"],[3,"contributors"]],template:function(L,H){if(1&L&&(c.j41(0,"span",2),c.EFF(1,"Curators:"),c.k0s(),c.j41(2,"div",3),c.DNE(3,x,2,1,"ng-container",4),c.nI1(4,"ngrxPush"),c.DNE(5,k,1,0,"ng-template",null,0,c.C5r),c.k0s(),c.j41(7,"span",2),c.EFF(8,"Editors:"),c.k0s(),c.j41(9,"div",3),c.DNE(10,y,2,1,"ng-container",4),c.nI1(11,"ngrxPush"),c.DNE(12,D,1,0,"ng-template",null,1,c.C5r),c.k0s()),2&L){const W=c.sdS(6),K=c.sdS(13);c.R7$(3),c.Y8G("ngIf",c.bMT(4,4,H.curators$))("ngIfElse",W),c.R7$(7),c.Y8G("ngIf",c.bMT(11,6,H.editors$))("ngIfElse",K)}},dependencies:[h.bT,n.Di,U,V.L9],styles:["[_nghost-%COMP%]{display:inline-block}.role-group-label[_ngcontent-%COMP%]{margin-left:12px}.role-group[_ngcontent-%COMP%]{display:inline-block}.role-group[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{display:inline-block;margin-left:2px}"]})}return v})()},27268:(Z,N,o)=>{o.d(N,{G:()=>sn});var l=o(72200),c=o(33190),I=o(22839),h=o(25703),n=o(38927),u=o(12617),t=o(84341),g=o(64917),T=o(34308),b=o(23842),G=o(23617),j=o(50513),F=o(1177),O=o(35154),P=o(73664),M=o(48728);let S=(()=>{class R{static#n=this.\u0275fac=function(A){return new(A||R)};static#t=this.\u0275mod=P.$C({type:R});static#e=this.\u0275inj=M.G2t({imports:[l.MD,t.YN,t.X1,n.PQ,j.Z,h.Ti,G.$,O.Qt,F.V,b.k,g.i,T.I]})}return R})();var B=o(77169),U=o(824),V=o(11542),x=o(89590),k=o(51209),y=o(89802),D=o(35493),Y=o(87051),v=o(41951),$=o(1236);let C=(()=>{class R{static#n=this.\u0275fac=function(A){return new(A||R)};static#t=this.\u0275mod=P.$C({type:R});static#e=this.\u0275inj=M.G2t({imports:[l.MD,t.X1,j.Z,n.PQ,t.YN,G.$,h.Ti,$.MC,v.Y3,O.Qt,F.V,T.I,b.k]})}return R})();var L=o(29438),H=o(2986),W=o(19448),K=o(11672),q=o(97529),nn=o(21011),w=o(97685),tn=o(75699),en=o(7391);let Q=(()=>{class R{static#n=this.\u0275fac=function(A){return new(A||R)};static#t=this.\u0275mod=P.$C({type:R});static#e=this.\u0275inj=M.G2t({imports:[l.MD,q.f3,u.rD,h.Ti,w.pc,tn.T,en.kT,L.Yb,K._v,H.IJ,W.g,O.Qt,u.rD,$.MC,v.Y3,nn.j,t.YN,k.k,I.m,U.J,y._,V.X,Y.U,D.G,x.R,g.i,j.Z,G.$,C,W.g,B.W]})}return R})();var on=o(72968);let sn=(()=>{class R{static#n=this.\u0275fac=function(A){return new(A||R)};static#t=this.\u0275mod=P.$C({type:R});static#e=this.\u0275inj=M.G2t({imports:[l.MD,t.YN,j.Z,n.PQ,c.Sw,j.Z,I.m,u.rD,h.Ti,S,Q,K._v,on.K,L.Yb,w.pc,g.i]})}return R})()},27793:(Z,N,o)=>{o.d(N,{s:()=>I});var l=o(69145),c=o(73664);let I=(()=>{class h{transform(u,t="contributor-card",g=0){return"contributor-card"===t?this.contributorVerbiage(u,g):"action-filter"===t?this.actionFilterVerbiage(u):this.eventFeedVerbiage(u)}eventFeedVerbiage(u){switch(u){case l.H1z.Commented:return"added comment";case l.H1z.RevisionSuggested:return"suggested revision";case l.H1z.RevisionAccepted:return"accepted revision";case l.H1z.RevisionRejected:return"rejected revision";case l.H1z.RevisionSuperseded:return"closed revision";case l.H1z.Flagged:return"opened new flag";case l.H1z.FlagResolved:return"resolved flag";case l.H1z.AssertionSubmitted:return"submitted assertion";case l.H1z.AssertionAccepted:return"accepted assertion";case l.H1z.AssertionRejected:return"rejected assertion";case l.H1z.Submitted:return"submitted evidence item";case l.H1z.Accepted:return"accepted evidence item";case l.H1z.Rejected:return"rejected evidence item";case l.H1z.PublicationSuggested:return"created source suggestion";case l.H1z.CuratedSourceSuggestion:return"finished curating source suggestion";case l.H1z.RejectedSourceSuggestion:return"rejected source suggestion";case l.H1z.RequeuedSourceSuggestion:return"requeued source suggestion";case l.H1z.Reverted:return"reverted evidence item";case l.H1z.AssertionReverted:return"reverted assertion";case l.H1z.DeprecatedVariant:return"deprecated variant";case l.H1z.DeprecatedFeature:return"deprecated feature";case l.H1z.DeprecatedMolecularProfile:return"deprecated molecular profile";case l.H1z.VariantCreated:return"created variant";case l.H1z.FeatureCreated:return"created feature";case l.H1z.ComplexMolecularProfileCreated:return"created complex molecular profile";case l.H1z.CommentDeleted:return"deleted comment";default:return u}}actionFilterVerbiage(u){switch(u){case l.H1z.Commented:return"commented";case l.H1z.RevisionSuggested:return"revision suggested";case l.H1z.RevisionAccepted:return"revision accepted";case l.H1z.RevisionRejected:return"revision rejected";case l.H1z.RevisionSuperseded:return"revision closed";case l.H1z.Flagged:return"flag opened";case l.H1z.FlagResolved:return"flag resolved";case l.H1z.AssertionSubmitted:return"assertion submitted";case l.H1z.AssertionAccepted:return"assertion accepted";case l.H1z.AssertionRejected:return"assertion rejected";case l.H1z.Submitted:return"evidence item submitted";case l.H1z.Accepted:return"evidence item accepted";case l.H1z.Rejected:return"evidence item rejected";case l.H1z.PublicationSuggested:return"source suggestion created";case l.H1z.CuratedSourceSuggestion:return"source suggestion curated";case l.H1z.RejectedSourceSuggestion:return"source suggestion rejected";case l.H1z.RequeuedSourceSuggestion:return"source suggestion requeued";case l.H1z.Reverted:return"evidence item reverted";case l.H1z.AssertionReverted:return"assertion reverted";case l.H1z.DeprecatedVariant:return"variant deprecated";case l.H1z.DeprecatedMolecularProfile:return"molecular profile deprecated";case l.H1z.VariantCreated:return"variant created";case l.H1z.ComplexMolecularProfileCreated:return"complex molecular profile created";case l.H1z.CommentDeleted:return"comment deleted";default:return u}}contributorVerbiage(u,t){switch(u){case l.H1z.Commented:return 1==t?"left a comment on this entity":`left ${t} comments on this entity`;case l.H1z.RevisionSuggested:return 1==t?"suggested a revision to this entity":`suggested ${t} revisions on this entity`;case l.H1z.RevisionAccepted:return 1==t?"accepted a revision to this entity":`accepted ${t} revisions on this entity`;case l.H1z.RevisionRejected:return 1==t?"rejected a revision to this entity":`rejected ${t} revisions on this entity`;case l.H1z.RevisionSuperseded:return 1==t?"closed a revision to this entity":`closed ${t} revisions on this entity`;case l.H1z.Flagged:return 1==t?"opened new flag on this entity":`opened ${t} new flags on this entity`;case l.H1z.FlagResolved:return 1==t?"resolved a flag on this entity":`resolved ${t} flags on this entity`;case l.H1z.AssertionSubmitted:return"submitted this assertion";case l.H1z.AssertionAccepted:return"accepted this assertion";case l.H1z.AssertionRejected:return"rejected this assertion";case l.H1z.Submitted:return"submitted this evidence item";case l.H1z.Accepted:return"accepted this evidence item";case l.H1z.Rejected:return"rejected this evidence item";case l.H1z.PublicationSuggested:return"";case l.H1z.CuratedSourceSuggestion:return"finished curating this source suggestion";case l.H1z.RejectedSourceSuggestion:return"rejected this source suggestion";case l.H1z.RequeuedSourceSuggestion:return"requeued this source suggestion";case l.H1z.AssertionReverted:return"reverted this assertion";case l.H1z.Reverted:return"reverted this evidence item";case l.H1z.DeprecatedVariant:return"deprecated this variant";case l.H1z.DeprecatedMolecularProfile:return"deprecated this molecular profile";case l.H1z.DeprecatedFeature:return"deprecated this feature";case l.H1z.FeatureCreated:return"created this feature";case l.H1z.VariantCreated:return"created this variant";case l.H1z.ComplexMolecularProfileCreated:return"created this complex molecular profile";default:return u}}static#n=this.\u0275fac=function(t){return new(t||h)};static#t=this.\u0275pipe=c.EJ8({name:"eventVerbiage",type:h,pure:!0,standalone:!1})}return h})()},30869:(Z,N,o)=>{o.d(N,{S:()=>sn});var l=o(72200),c=o(25703),I=o(12617),h=o(97529),n=o(73664),u=o(48728);let t=(()=>{class R{static#n=this.\u0275fac=function(A){return new(A||R)};static#t=this.\u0275mod=n.$C({type:R});static#e=this.\u0275inj=u.G2t({imports:[l.MD,h.f3]})}return R})();var g=o(65757),T=o(51209),b=o(97685),G=o(75699),j=o(7391),F=o(29438),O=o(22839),P=o(824),M=o(11542),S=o(35493),B=o(74696),U=o(11672),V=o(89590),x=o(2986),k=o(19448),y=o(35154),D=o(50513),Y=o(23617),v=o(41951),$=o(1236),C=o(21011),L=o(84341),H=o(64917),W=o(62e3),K=o(34308),q=o(77169),nn=o(86936),w=o(89802),tn=o(60996),en=o(56912),Q=o(47086),on=o(98920);let sn=(()=>{class R{static#n=this.\u0275fac=function(A){return new(A||R)};static#t=this.\u0275mod=n.$C({type:R});static#e=this.\u0275inj=u.G2t({imports:[l.MD,h.f3,I.rD,c.Ti,b.pc,G.T,j.kT,F.Yb,U._v,x.IJ,k.g,y.Qt,I.rD,$.MC,v.Y3,C.j,W.WF,k.g,L.YN,g.v,en.l,T.k,t,O.m,P.J,w._,M.X,Q.C,nn.G,S.G,V.R,K.I,tn.o,H.i,q.W,on.U,B.GB,D.Z,Y.$]})}return R})()},45269:(Z,N,o)=>{o.d(N,{o:()=>V});var l=o(71226),c=o(69145),I=o(21413),h=o(5964),n=o(56977),u=o(69199),t=o(24608),g=o(73664),T=o(48728),b=o(74222),G=o(72200),j=o(50513),F=o(16389),O=o(25930),P=o(41951),M=o(35154),S=o(61774);function B(x,k){if(1&x){const y=g.RV6();g.qex(0),g.j41(1,"button",2),g.bIt("click",function(){T.eBV(y);const Y=g.XpG();return T.Njj(Y.unsubscribe())}),g.nrm(2,"i",3),g.k0s(),g.bVm()}if(2&x){const y=g.XpG();g.R7$(),g.Y8G("nzLoading",y.isSubmitting)}}function U(x,k){if(1&x){const y=g.RV6();g.j41(0,"button",4),g.bIt("click",function(){T.eBV(y);const Y=g.XpG();return T.Njj(Y.subscribe())}),g.nrm(1,"i",5),g.k0s()}if(2&x){const y=g.XpG();g.Y8G("nzLoading",y.isSubmitting)}}let V=(()=>{class x{constructor(y,D,Y,v){this.isSubscribedGQL=y,this.unsubscribeMutation=D,this.subscribeMutation=Y,this.networkErrorService=v,this.isSubmitting=!1,this.destroy$=new I.B,this.unsubscribeMutator=new l.E(v),this.subscribeMutator=new l.E(v)}ngOnInit(){if(void 0===this.viewer)throw new Error("Must pass in a viewer to the CvcEntitySubscriptionButtonComponent");if(void 0===this.typename)throw new Error("Must pass in a typename to the CvcEntitySubscriptionButtonComponent");if(void 0===this.subscribableId)throw new Error("Must pass in a subscribableId to the CvcEntitySubscriptionButtonComponent");this.subscribable={id:this.subscribableId,entityType:c.V9U[this.typename]},this.queryRef=this.isSubscribedGQL.watch({subscribable:this.subscribable}),this.existingSubscription$=this.queryRef.valueChanges.pipe((0,t.E)("data","subscriptionForEntity"),(0,h.p)(u.kP))}subscribe(){this.subscribable&&(this.isSubmitting=!0,this.subscribeMutator.mutate(this.subscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,n.Q)(this.destroy$)).subscribe(D=>{D&&(this.queryRef?.refetch(),this.isSubmitting=!1)}))}unsubscribe(){this.subscribable&&(this.isSubmitting=!0,this.unsubscribeMutator.mutate(this.unsubscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,n.Q)(this.destroy$)).subscribe(D=>{D&&(this.queryRef?.refetch(),this.isSubmitting=!1)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#n=this.\u0275fac=function(D){return new(D||x)(g.rXU(c.aUH),g.rXU(c.ytN),g.rXU(c.RSy),g.rXU(b.N))};static#t=this.\u0275cmp=g.VBU({type:x,selectors:[["cvc-entity-subscription-button"]],inputs:{viewer:"viewer",typename:"typename",subscribableId:"subscribableId"},standalone:!1,decls:4,vars:4,consts:[["noSub",""],[4,"ngIf","ngIfElse"],["nz-button","","nz-tooltip","Unsubscribe","nzSize","small",3,"click","nzLoading"],["nz-icon","","nzType","bell","nzTheme","fill"],["nz-button","","nz-tooltip","Subscribe","nzSize","small",3,"click","nzLoading"],["nz-icon","","nzType","bell","nzTheme","outline"]],template:function(D,Y){if(1&D&&(g.DNE(0,B,3,1,"ng-container",1),g.nI1(1,"ngrxPush"),g.DNE(2,U,2,1,"ng-template",null,0,g.C5r)),2&D){const v=g.sdS(3);g.Y8G("ngIf",g.bMT(1,2,Y.existingSubscription$))("ngIfElse",v)}},dependencies:[G.bT,j.a,F.c,O.p,P.Dn,M.LH,S.L9],styles:["[_nghost-%COMP%]{display:block}"]})}return x})()},45736:(Z,N,o)=>{o.d(N,{V:()=>t});var l=o(72200),c=o(50513),I=o(41951),h=o(35154),n=o(73664),u=o(48728);let t=(()=>{class g{static#n=this.\u0275fac=function(G){return new(G||g)};static#t=this.\u0275mod=n.$C({type:g});static#e=this.\u0275inj=u.G2t({imports:[l.MD,c.Z,I.Y3,h.Qt]})}return g})()},68103:(Z,N,o)=>{o.d(N,{m:()=>j});var l=o(72200),c=o(7391),I=o(38132),h=o(29438),n=o(1236),u=o(64917),t=o(82225),g=o(62e3),T=o(73664),b=o(48728);let G=(()=>{class F{static#n=this.\u0275fac=function(M){return new(M||F)};static#t=this.\u0275mod=T.$C({type:F});static#e=this.\u0275inj=b.G2t({imports:[l.MD,I.iI,h.Yb,n.MC,g.WF,u.i,t.h]})}return F})(),j=(()=>{class F{static#n=this.\u0275fac=function(M){return new(M||F)};static#t=this.\u0275mod=T.$C({type:F});static#e=this.\u0275inj=b.G2t({imports:[l.MD,c.kT,G]})}return F})()},74055:(Z,N,o)=>{o.d(N,{B:()=>ci});var l=o(69145),c=o(96354),I=o(99172),h=o(24608),n=o(73664),u=o(48728),t=o(56609),g=o(72200),T=o(61774),b=o(97529),G=o(97685),j=o(75699),F=o(29438),O=o(11672),P=o(50513),M=o(16389),S=o(25930),B=o(41951),U=o(9365),V=o(21413),x=o(5964),k=o(84572),y=o(71226),D=o(56977),Y=o(69199),v=o(41305),$=o(74222),C=o(12617),L=o(25703),H=o(7391),W=o(2986),K=o(19448),q=o(35154),nn=o(1236),w=o(62e3);let tn=(()=>{class e{transform(i){return i?i.replace(/([a-z])([A-Z])/g,"$1 $2"):""}static#n=this.\u0275fac=function(_){return new(_||e)};static#t=this.\u0275pipe=n.EJ8({name:"camelToWords",type:e,pure:!0,standalone:!1})}return e})();const en=["itemTemplate"],Q=e=>({$implicit:e});function on(e,a){if(1&e&&(n.qex(0),n.j41(1,"span",12),n.eu8(2,13),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit,_=n.XpG();n.R7$(2),n.Y8G("ngTemplateOutlet",_.itemTemplateRef||null)("ngTemplateOutletContext",n.eq3(2,Q,i))}}function sn(e,a){if(1&e&&(n.j41(0,"nz-tag",14),n.EFF(1),n.nI1(2,"camelToWords"),n.k0s()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Lme("Deleted ",n.bMT(2,2,i.entityType)," ",i.id)}}function R(e,a){if(1&e&&(n.j41(0,"nz-list-item",10),n.DNE(1,on,3,4,"ng-container",11)(2,sn,3,4,"ng-template",null,0,n.C5r),n.k0s()),2&e){const i=a.$implicit,_=n.sdS(3);n.R7$(),n.Y8G("ngIf",!i.deleted)("ngIfElse",_)}}function fn(e,a){if(1&e&&n.nrm(0,"nz-list-empty",15),2&e){const i=n.XpG();n.Y8G("nzNoResult",n.VkB("No ",i.entityType))}}function J(e,a){if(1&e&&(n.qex(0),n.j41(1,"span",12),n.eu8(2,13),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit,_=n.XpG(3);n.R7$(2),n.Y8G("ngTemplateOutlet",_.itemTemplateRef||null)("ngTemplateOutletContext",n.eq3(2,Q,i))}}function A(e,a){if(1&e&&(n.j41(0,"nz-tag",14),n.EFF(1),n.nI1(2,"camelToWords"),n.k0s()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Lme("Deleted ",n.bMT(2,2,i.entityType)," ",i.id)}}function vn(e,a){if(1&e&&(n.j41(0,"nz-list-item",17),n.DNE(1,J,3,4,"ng-container",11)(2,A,3,4,"ng-template",null,0,n.C5r),n.k0s()),2&e){const i=a.$implicit,_=n.sdS(3);n.R7$(),n.Y8G("ngIf",!i.deleted)("ngIfElse",_)}}function zn(e,a){if(1&e&&n.nrm(0,"nz-list-empty",15),2&e){const i=n.XpG(3);n.Y8G("nzNoResult",n.VkB("No ",i.entityType," Removed"))}}function Cn(e,a){if(1&e&&(n.j41(0,"nz-list",3),n.DNE(1,vn,4,2,"nz-list-item",16)(2,zn,1,2,"nz-list-empty",5),n.k0s()),2&e){const i=n.XpG(2);n.Y8G("nzHeader",n.VkB("Removed ",i.entityType)),n.R7$(),n.Y8G("ngForOf",i.diffObject.removedObjects),n.R7$(),n.Y8G("ngIf",0===i.diffObject.removedObjects.length)}}function pn(e,a){1&e&&(n.qex(0),n.DNE(1,Cn,3,4,"nz-list",8),n.bVm())}function hn(e,a){if(1&e&&(n.qex(0),n.j41(1,"span",12),n.eu8(2,13),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit,_=n.XpG(2);n.R7$(2),n.Y8G("ngTemplateOutlet",_.itemTemplateRef||null)("ngTemplateOutletContext",n.eq3(2,Q,i))}}function Rn(e,a){if(1&e&&(n.j41(0,"nz-tag",14),n.EFF(1),n.nI1(2,"camelToWords"),n.k0s()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Lme("Deleted ",n.bMT(2,2,i.entityType)," ",i.id)}}function Tn(e,a){if(1&e&&(n.j41(0,"nz-list-item",19),n.DNE(1,hn,3,4,"ng-container",11)(2,Rn,3,4,"ng-template",null,0,n.C5r),n.k0s()),2&e){const i=a.$implicit,_=n.sdS(3);n.R7$(),n.Y8G("ngIf",!i.deleted)("ngIfElse",_)}}function bn(e,a){if(1&e&&n.nrm(0,"nz-list-empty",15),2&e){const i=n.XpG(2);n.Y8G("nzNoResult",n.VkB("No ",i.entityType," Added"))}}function yn(e,a){if(1&e&&(n.j41(0,"nz-list",3),n.DNE(1,Tn,4,2,"nz-list-item",18)(2,bn,1,2,"nz-list-empty",5),n.k0s()),2&e){const i=n.XpG();n.Y8G("nzHeader",n.VkB("Added ",i.entityType)),n.R7$(),n.Y8G("ngForOf",i.diffObject.addedObjects),n.R7$(),n.Y8G("ngIf",0===i.diffObject.addedObjects.length)}}function En(e,a){if(1&e&&(n.qex(0),n.j41(1,"span",12),n.eu8(2,13),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit,_=n.XpG(3);n.R7$(2),n.Y8G("ngTemplateOutlet",_.itemTemplateRef||null)("ngTemplateOutletContext",n.eq3(2,Q,i))}}function Gn(e,a){if(1&e&&(n.j41(0,"nz-tag",14),n.EFF(1),n.nI1(2,"camelToWords"),n.k0s()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Lme("Deleted ",n.bMT(2,2,i.entityType)," ",i.id)}}function Fn(e,a){if(1&e&&(n.j41(0,"nz-list-item",21),n.DNE(1,En,3,4,"ng-container",11)(2,Gn,3,4,"ng-template",null,0,n.C5r),n.k0s()),2&e){const i=a.$implicit,_=n.sdS(3);n.R7$(),n.Y8G("ngIf",!i.deleted)("ngIfElse",_)}}function Sn(e,a){if(1&e&&n.nrm(0,"nz-list-empty",15),2&e){const i=n.XpG(3);n.Y8G("nzNoResult",n.VkB("No ",i.entityType," Kept"))}}function xn(e,a){if(1&e&&(n.j41(0,"nz-list",3),n.DNE(1,Fn,4,2,"nz-list-item",20)(2,Sn,1,2,"nz-list-empty",5),n.k0s()),2&e){const i=n.XpG(2);n.Y8G("nzHeader",n.VkB("Kept ",i.entityType)),n.R7$(),n.Y8G("ngForOf",i.diffObject.keptObjects),n.R7$(),n.Y8G("ngIf",0===i.diffObject.keptObjects.length)}}function $n(e,a){1&e&&(n.qex(0),n.DNE(1,xn,3,4,"nz-list",8),n.bVm())}function In(e,a){if(1&e&&(n.qex(0),n.j41(1,"span",12),n.eu8(2,13),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit,_=n.XpG();n.R7$(2),n.Y8G("ngTemplateOutlet",_.itemTemplateRef||null)("ngTemplateOutletContext",n.eq3(2,Q,i))}}function jn(e,a){if(1&e&&(n.j41(0,"nz-tag",14),n.EFF(1),n.nI1(2,"camelToWords"),n.k0s()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Lme("Deleted ",n.bMT(2,2,i.entityType)," ",i.id)}}function Dn(e,a){if(1&e&&(n.j41(0,"nz-list-item",22),n.DNE(1,In,3,4,"ng-container",11)(2,jn,3,4,"ng-template",null,0,n.C5r),n.k0s()),2&e){const i=a.$implicit,_=n.sdS(3);n.R7$(),n.Y8G("ngIf",!i.deleted)("ngIfElse",_)}}function Ln(e,a){if(1&e&&n.nrm(0,"nz-list-empty",15),2&e){const i=n.XpG();n.Y8G("nzNoResult",n.VkB("No ",i.entityType))}}let On=(()=>{class e{constructor(){}ngOnInit(){if(void 0===this.diffObject)throw new Error("Must specify a diffObject.");if(void 0===this.entityType)throw new Error("Must specify an entityType.")}static#n=this.\u0275fac=function(_){return new(_||e)};static#t=this.\u0275cmp=n.VBU({type:e,selectors:[["cvc-revision-list-diff"]],contentQueries:function(_,p,z){if(1&_&&n.wni(z,en,5),2&_){let X;n.mGM(X=n.lsd())&&(p.itemTemplateRef=X.first)}},inputs:{diffObject:"diffObject",entityType:"entityType"},standalone:!1,decls:14,vars:14,consts:[["deleted",""],[3,"nzGutter"],[3,"nzSpan"],["nzBordered","","nzType","inner","nzSize","small",3,"nzHeader"],["ngClass","current",4,"ngFor","ngForOf"],[3,"nzNoResult",4,"ngIf"],["nzDirection","vertical"],[4,"ngIf"],["nzBordered","","nzType","inner","nzSize","small",3,"nzHeader",4,"nzSpaceItem"],["ngClass","suggested",4,"ngFor","ngForOf"],["ngClass","current"],[4,"ngIf","ngIfElse"],["nz-typography",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nzColor","error"],[3,"nzNoResult"],["ngClass","removed",4,"ngFor","ngForOf"],["ngClass","removed"],["ngClass","added",4,"ngFor","ngForOf"],["ngClass","added"],["ngClass","kept",4,"ngFor","ngForOf"],["ngClass","kept"],["ngClass","suggested"]],template:function(_,p){1&_&&(n.j41(0,"nz-row",1)(1,"nz-col",2)(2,"nz-list",3),n.DNE(3,R,4,2,"nz-list-item",4)(4,fn,1,2,"nz-list-empty",5),n.k0s()(),n.j41(5,"nz-col",2)(6,"nz-space",6),n.DNE(7,pn,2,0,"ng-container",7)(8,yn,3,4,"nz-list",8)(9,$n,2,0,"ng-container",7),n.k0s()(),n.j41(10,"nz-col",2)(11,"nz-list",3),n.DNE(12,Dn,4,2,"nz-list-item",9)(13,Ln,1,2,"nz-list-empty",5),n.k0s()()()),2&_&&(n.Y8G("nzGutter",16),n.R7$(),n.Y8G("nzSpan",8),n.R7$(),n.Y8G("nzHeader",n.VkB("Original ",p.entityType," List")),n.R7$(),n.Y8G("ngForOf",p.diffObject.currentObjects),n.R7$(),n.Y8G("ngIf",0===p.diffObject.currentObjects.length),n.R7$(),n.Y8G("nzSpan",8),n.R7$(2),n.Y8G("ngIf",p.diffObject.currentObjects.length>0),n.R7$(2),n.Y8G("ngIf",p.diffObject.currentObjects.length>0),n.R7$(),n.Y8G("nzSpan",8),n.R7$(),n.Y8G("nzHeader",n.VkB("Revised ",p.entityType," List")),n.R7$(),n.Y8G("ngForOf",p.diffObject.suggestedObjects),n.R7$(),n.Y8G("ngIf",0===p.diffObject.suggestedObjects.length))},dependencies:[g.YU,g.Sq,g.bT,g.T3,C.eE,C.nt,C.lQ,b.Uq,b.e,j.s,G.U5,G.Dq,tn],styles:["[_nghost-%COMP%]{display:block}nz-list[_ngcontent-%COMP%]   .kept[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{background-color:#f6ffed;color:#135200}nz-list[_ngcontent-%COMP%]   .removed[_ngcontent-%COMP%]{background-color:#fff1f0;color:#820014}nz-list[_ngcontent-%COMP%]   .suggested[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-space[_ngcontent-%COMP%]{width:100%}"]})}return e})();var Mn=o(3245),Pn=o(69062);let Nn=(()=>{class e{constructor(){}ngOnInit(){if(void 0===this.left)throw new Error("Must provide a left side of the diff.");if(void 0===this.right)throw new Error("Must provide a right side of the diff.");if(void 0===this.entityType)throw new Error("Must provide a diff.")}static#n=this.\u0275fac=function(_){return new(_||e)};static#t=this.\u0275cmp=n.VBU({type:e,selectors:[["cvc-revision-value-diff"]],inputs:{currentValue:"currentValue",suggestedValue:"suggestedValue",left:"left",right:"right",entityType:"entityType"},standalone:!1,decls:15,vars:10,consts:[[3,"nzGutter"],[3,"nzSpan"],[3,"innerHtml"],[1,"diff","suggested"],[1,"background"]],template:function(_,p){1&_&&(n.j41(0,"nz-row",0)(1,"nz-col",1)(2,"h4"),n.EFF(3),n.k0s(),n.nrm(4,"div",2),n.k0s(),n.j41(5,"nz-col",1)(6,"h4"),n.EFF(7),n.k0s(),n.nrm(8,"div",2),n.k0s(),n.j41(9,"nz-col",1)(10,"h4"),n.EFF(11),n.k0s(),n.j41(12,"div",3)(13,"div",4),n.EFF(14),n.k0s()()()()),2&_&&(n.Y8G("nzGutter",16),n.R7$(),n.Y8G("nzSpan",8),n.R7$(2),n.SpI("Original ",p.entityType),n.R7$(),n.Y8G("innerHtml",p.left,n.npT),n.R7$(),n.Y8G("nzSpan",8),n.R7$(2),n.SpI("",p.entityType," Diff"),n.R7$(),n.Y8G("innerHtml",p.right,n.npT),n.R7$(),n.Y8G("nzSpan",8),n.R7$(2),n.SpI("Revised ",p.entityType),n.R7$(3),n.SpI(" ",p.suggestedValue," "))},dependencies:[b.Uq,b.e],styles:[":host{display:block}.diff{overflow:auto;width:100%}.diff .background{padding:4px 8px}.diff.insertions .background{background:#f6ffed;color:#237804}.diff.deletions .background{background:#fff1f0;color:#a8071a}.diff.suggested .background,.diff.original .background{background:#f0f5ff;color:#10239e}.diff del,.diff ins{text-decoration:none}.diff del strong{font-weight:400;background:#fcc}.diff ins strong{font-weight:400;background:#9f9}.diff .del{font-weight:400;background:#fee;color:#b00}.diff .ins{font-weight:400;background:#dfd;color:#080}ul{list-style:none}\n"],encapsulation:2})}return e})();var Yn=o(56408),Vn=o(88741),An=o(99563),Xn=o(7047),an=o(90959),Bn=o(39045),kn=o(86073),Un=o(50311),Hn=o(65566),Wn=o(5473),Qn=o(4126),Kn=o(56440),gn=o(74696),Jn=o(23617),Zn=o(61845),wn=o(83075),qn=o(8139);const mn=(e,a,i,_,p)=>({id:e,name:a,link:i,deprecated:_,flagged:p}),rn=(e,a,i,_)=>({id:e,name:a,link:i,deprecated:_}),dn=(e,a,i)=>({id:e,name:a,link:i}),un=(e,a,i,_,p,z)=>({id:e,name:a,link:i,feature:_,deprecated:p,flagged:z}),nt=(e,a,i,_,p)=>({id:e,name:a,link:i,status:_,flagged:p}),tt=()=>({float:"right"});function et(e,a){if(1&e){const i=n.RV6();n.j41(0,"nz-alert",17),n.bIt("nzOnClose",function(){const p=u.eBV(i).$implicit,z=n.XpG();return u.Njj(z.onErrorBannerClose(p))}),n.k0s()}2&e&&n.Y8G("nzMessage",a.$implicit)}function it(e,a){if(1&e){const i=n.RV6();n.j41(0,"nz-alert",18),n.bIt("nzOnClose",function(){u.eBV(i);const p=n.XpG();return u.Njj(p.onSuccessBannerClose())}),n.k0s()}if(2&e){const i=n.XpG();n.Y8G("nzMessage",n.VkB("Revision(s) successfully ",i.success,"."))}}function ot(e,a){if(1&e&&n.nrm(0,"cvc-feature-tag",29),2&e){const i=a.$implicit;n.Y8G("feature",n.s1E(1,mn,i.id,i.displayName,i.link,i.deprecated,i.flagged))}}function ln(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",28),n.DNE(2,ot,1,7,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function st(e,a){1&e&&n.nrm(0,"cvc-source-tag",31),2&e&&n.Y8G("source",a.$implicit)}function at(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",30),n.DNE(2,st,1,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function rt(e,a){if(1&e&&n.nrm(0,"cvc-disease-tag",33),2&e){const i=a.$implicit;n.Y8G("disease",n.ziG(1,rn,i.id,i.displayName,i.link,i.deprecated))}}function lt(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",32),n.DNE(2,rt,1,6,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function ct(e,a){if(1&e&&n.nrm(0,"cvc-molecular-profile-tag",35),2&e){const i=a.$implicit;n.Y8G("molecularProfile",n.s1E(1,mn,i.id,i.displayName,i.link,i.deprecated,i.flagged))}}function _t(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",34),n.DNE(2,ct,1,7,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function pt(e,a){if(1&e&&n.nrm(0,"cvc-therapy-tag",37),2&e){const i=a.$implicit;n.Y8G("therapy",n.ziG(1,rn,i.id,i.displayName,i.link,i.deprecated))}}function gt(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",36),n.DNE(2,pt,1,6,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function mt(e,a){if(1&e&&n.nrm(0,"cvc-therapy-tag",37),2&e){const i=a.$implicit;n.Y8G("therapy",n.ziG(1,rn,i.id,i.displayName,i.link,i.deprecated))}}function dt(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",36),n.DNE(2,mt,1,6,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function ut(e,a){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=a.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function ft(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",38),n.DNE(2,ut,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function vt(e,a){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=a.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function zt(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",39),n.DNE(2,vt,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function Ct(e,a){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=a.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function ht(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",40),n.DNE(2,Ct,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function Rt(e,a){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=a.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function Tt(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",41),n.DNE(2,Rt,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function r(e,a){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=a.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function m(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",42),n.DNE(2,r,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function s(e,a){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=a.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function d(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",43),n.DNE(2,s,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function f(e,a){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=a.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function E(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",44),n.DNE(2,f,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function cn(e,a){if(1&e&&(n.j41(0,"nz-tag"),n.EFF(1),n.k0s()),2&e){const i=a.$implicit;n.R7$(),n.SpI(" ",i.displayName," ")}}function Ft(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",45),n.DNE(2,cn,2,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function St(e,a){if(1&e&&n.nrm(0,"cvc-variant-type-tag",47),2&e){const i=a.$implicit;n.Y8G("variantType",n.sMw(1,dn,i.id,i.displayName,i.link))}}function xt(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",46),n.DNE(2,St,1,5,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function $t(e,a){if(1&e&&n.nrm(0,"cvc-phenotype-tag",49),2&e){const i=a.$implicit;n.Y8G("phenotype",n.sMw(1,dn,i.id,i.displayName,i.link))}}function It(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",48),n.DNE(2,$t,1,5,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function jt(e,a){if(1&e&&n.nrm(0,"cvc-feature-variant-tag",51),2&e){const i=a.$implicit;n.Y8G("variant",n.l4e(1,un,i.id,i.displayName,i.link,i.feature,i.deprecated,i.flagged))}}function Dt(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",50),n.DNE(2,jt,1,8,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function Lt(e,a){if(1&e&&n.nrm(0,"cvc-feature-variant-tag",51),2&e){const i=a.$implicit;n.Y8G("variant",n.l4e(1,un,i.id,i.displayName,i.link,i.feature,i.deprecated,i.flagged))}}function Ot(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",52),n.DNE(2,Lt,1,8,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function Mt(e,a){1&e&&n.nrm(0,"cvc-source-tag",31),2&e&&n.Y8G("source",a.$implicit)}function Pt(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",53),n.DNE(2,Mt,1,1,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function Nt(e,a){if(1&e&&n.nrm(0,"cvc-evidence-tag",55),2&e){const i=a.$implicit;n.Y8G("evidence",n.s1E(1,nt,i.id,i.displayName,i.link,i.status,i.flagged))}}function Yt(e,a){if(1&e&&(n.qex(0),n.j41(1,"cvc-revision-list-diff",54),n.DNE(2,Nt,1,7,"ng-template",null,4,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("diffObject",i.linkoutData.diffValue)}}function Vt(e,a){if(1&e&&(n.qex(0),n.nrm(1,"cvc-revision-value-diff",56),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(),n.Y8G("currentValue",i.currentValue)("suggestedValue",i.suggestedValue)("left",i.linkoutData.diffValue.left)("right",i.linkoutData.diffValue.right)("entityType",i.linkoutData.name)}}function At(e,a){if(1&e&&(n.qex(0),n.nrm(1,"cvc-comment-body",60),n.bVm()),2&e){const i=n.XpG(2).$implicit;n.R7$(),n.Y8G("commentBodySegments",i.resolutionActivity.parsedNote)}}function Xt(e,a){if(1&e&&n.nrm(0,"cvc-user-tag",61),2&e){const i=n.XpG(2).$implicit;n.Y8G("user",i.resolutionActivity.user)}}function Bt(e,a){if(1&e&&(n.qex(0),n.nrm(1,"nz-divider"),n.j41(2,"nz-row")(3,"nz-col",57),n.DNE(4,At,2,1,"ng-container",27),n.k0s(),n.j41(5,"nz-col",58),n.EFF(6),n.nI1(7,"enumToTitle"),n.DNE(8,Xt,1,1,"cvc-user-tag",59),n.EFF(9),n.nI1(10,"timeAgo"),n.k0s()(),n.bVm()),2&e){const i=n.XpG().$implicit;n.R7$(4),n.Y8G("ngIf",null==i.resolutionActivity?null:i.resolutionActivity.parsedNote),n.R7$(2),n.SpI(" ",n.bMT(7,4,i.status)," By "),n.R7$(2),n.Y8G("ngIf",void 0!==(null==i.resolutionActivity?null:i.resolutionActivity.user)),n.R7$(),n.SpI(" ",n.bMT(10,6,null==i.resolutionActivity?null:i.resolutionActivity.createdAt)," ")}}function kt(e,a){if(1&e&&(n.j41(0,"span"),n.nrm(1,"i",63),n.nI1(2,"entityColor"),n.EFF(3),n.j41(4,"span"),n.EFF(5),n.k0s()()),2&e){const i=n.XpG(2).$implicit;n.R7$(),n.Y8G("nzTwotoneColor",n.bMT(2,3,"Revision")),n.R7$(2),n.SpI(" RID",i.id," "),n.R7$(2),n.SpI("",i.linkoutData.name," Updated")}}function Ut(e,a){if(1&e&&n.nrm(0,"i",65),2&e){n.XpG();const i=n.sdS(3);n.Y8G("nzPopoverContent",i)}}function Ht(e,a){if(1&e&&n.nrm(0,"cvc-comment-body",60),2&e){const i=n.XpG(3).$implicit;n.Y8G("commentBodySegments",i.creationActivity.parsedNote)}}function Wt(e,a){1&e&&(n.qex(0),n.DNE(1,Ut,1,1,"i",64)(2,Ht,1,1,"ng-template",null,5,n.C5r),n.bVm())}function Qt(e,a){if(1&e&&(n.j41(0,"nz-space"),n.DNE(1,kt,6,5,"span",62)(2,Wt,4,0,"ng-container",27),n.k0s()),2&e){const i=n.XpG().$implicit;n.R7$(2),n.Y8G("ngIf",null==i.creationActivity?null:i.creationActivity.parsedNote)}}function Kt(e,a){if(1&e&&(n.j41(0,"span",71),n.EFF(1," for\xa0 "),n.k0s(),n.nrm(2,"cvc-organization-tag",72)),2&e){const i=n.XpG(4).$implicit;n.R7$(2),n.Y8G("org",i.creationActivity.organization)}}function Jt(e,a){if(1&e&&(n.qex(0),n.j41(1,"span",71),n.EFF(2," By\xa0 "),n.k0s(),n.nrm(3,"cvc-user-tag",61),n.nVh(4,Kt,3,1),n.bVm()),2&e){const i=n.XpG(3).$implicit;n.R7$(3),n.Y8G("user",i.creationActivity.user),n.R7$(),n.vxM(null!=i.creationActivity&&i.creationActivity.organization?4:-1)}}function Zt(e,a){1&e&&(n.j41(0,"span",71),n.EFF(1,"Submitted"),n.k0s())}function wt(e,a){if(1&e&&(n.j41(0,"span"),n.DNE(1,Jt,5,2,"ng-container",70)(2,Zt,2,0,"ng-template",null,6,n.C5r),n.j41(4,"span",71),n.EFF(5),n.nI1(6,"timeAgo"),n.k0s()()),2&e){const i=n.sdS(3),_=n.XpG(2).$implicit;n.R7$(),n.Y8G("ngIf",null==_.creationActivity?null:_.creationActivity.user)("ngIfElse",i),n.R7$(4),n.JRh(n.bMT(6,3,_.createdAt))}}function qt(e,a){if(1&e&&n.nrm(0,"cvc-status-tag",73),2&e){const i=n.XpG(2).$implicit;n.Y8G("status",i.status)}}function ne(e,a){1&e&&n.nrm(0,"nz-divider",74)}function te(e,a){if(1&e){const i=n.RV6();n.j41(0,"a",75),n.bIt("click",function(){u.eBV(i);const p=n.XpG(2).$implicit,z=n.XpG(3);return u.Njj(z.onChangesetSelected(p.revisionSetId))}),n.EFF(1,"Show Group"),n.k0s()}}function ee(e,a){1&e&&n.nrm(0,"nz-divider",74)}function ie(e,a){1&e&&n.nrm(0,"label",77),2&e&&n.Y8G("nzDisabled",!0)}function oe(e,a){1&e&&n.nrm(0,"label",79),2&e&&n.Y8G("nzDisabled",!0)}function se(e,a){if(1&e){const i=n.RV6();n.j41(0,"label",80),n.bIt("nzCheckedChange",function(p){u.eBV(i);const z=n.XpG(5).$implicit,X=n.XpG(3);return u.Njj(X.onRevisionCheckboxClicked(p,z.id))}),n.k0s()}}function ae(e,a){if(1&e&&n.DNE(0,oe,1,1,"label",78)(1,se,1,0,"ng-template",null,8,n.C5r),2&e){const i=n.sdS(2),_=n.XpG(4).$implicit,p=n.XpG(2).ngrxLet;n.Y8G("ngIf",p.isCurator&&(null==p.user?null:p.user.id)!=(null==_.creationActivity?null:_.creationActivity.user.id))("ngIfElse",i)}}function re(e,a){if(1&e&&(n.j41(0,"span"),n.DNE(1,ie,1,1,"label",76)(2,ae,3,2,"ng-template",null,7,n.C5r),n.k0s()),2&e){const i=n.sdS(3),_=n.XpG(5).ngrxLet;n.R7$(),n.Y8G("ngIf",!_.signedIn)("ngIfElse",i)}}function le(e,a){1&e&&(n.qex(0),n.DNE(1,ee,1,0,"nz-divider",68)(2,re,4,2,"span",62),n.bVm())}function ce(e,a){if(1&e){const i=n.RV6();n.j41(0,"nz-space",66),n.bIt("click",function(p){return u.eBV(i),u.Njj(p.stopPropagation())}),n.DNE(1,wt,7,5,"span",62)(2,qt,1,1,"cvc-status-tag",67)(3,ne,1,0,"nz-divider",68)(4,te,2,0,"a",69)(5,le,3,0,"ng-container",27),n.k0s()}if(2&e){const i=n.XpG().$implicit;n.R7$(5),n.Y8G("ngIf","NEW"===i.status)}}function _e(e,a){if(1&e&&(n.j41(0,"nz-collapse-panel",23),n.qex(1,24),n.DNE(2,ln,4,1,"ng-container",25)(3,at,4,1,"ng-container",25)(4,lt,4,1,"ng-container",25)(5,_t,4,1,"ng-container",25)(6,gt,4,1,"ng-container",25)(7,dt,4,1,"ng-container",25)(8,ft,4,1,"ng-container",25)(9,zt,4,1,"ng-container",25)(10,ht,4,1,"ng-container",25)(11,Tt,4,1,"ng-container",25)(12,m,4,1,"ng-container",25)(13,d,4,1,"ng-container",25)(14,E,4,1,"ng-container",25)(15,Ft,4,1,"ng-container",25)(16,xt,4,1,"ng-container",25)(17,It,4,1,"ng-container",25)(18,Dt,4,1,"ng-container",25)(19,Ot,4,1,"ng-container",25)(20,Pt,4,1,"ng-container",25)(21,Yt,4,1,"ng-container",25)(22,Vt,2,5,"ng-container",26),n.bVm(),n.DNE(23,Bt,11,8,"ng-container",27)(24,Qt,3,1,"ng-template",null,2,n.C5r)(26,ce,6,1,"ng-template",null,3,n.C5r),n.k0s()),2&e){const i=a.$implicit,_=n.sdS(25),p=n.sdS(27);n.Y8G("nzHeader",_)("nzExtra",p)("nzActive",!0),n.R7$(),n.Y8G("ngSwitch",i.fieldName),n.R7$(),n.Y8G("ngSwitchCase","feature_id"),n.R7$(),n.Y8G("ngSwitchCase","source_ids"),n.R7$(),n.Y8G("ngSwitchCase","disease_id"),n.R7$(),n.Y8G("ngSwitchCase","molecular_profile_id"),n.R7$(),n.Y8G("ngSwitchCase","drug_ids"),n.R7$(),n.Y8G("ngSwitchCase","therapy_ids"),n.R7$(),n.Y8G("ngSwitchCase","variant_alias_ids"),n.R7$(),n.Y8G("ngSwitchCase","feature_alias_ids"),n.R7$(),n.Y8G("ngSwitchCase","molecular_profile_alias_ids"),n.R7$(),n.Y8G("ngSwitchCase","clinvar_entry_ids"),n.R7$(),n.Y8G("ngSwitchCase","clingen_code_ids"),n.R7$(),n.Y8G("ngSwitchCase","acmg_code_ids"),n.R7$(),n.Y8G("ngSwitchCase","nccn_guideline_id"),n.R7$(),n.Y8G("ngSwitchCase","hgvs_description_ids"),n.R7$(),n.Y8G("ngSwitchCase","variant_type_ids"),n.R7$(),n.Y8G("ngSwitchCase","phenotype_ids"),n.R7$(),n.Y8G("ngSwitchCase","variant_id"),n.R7$(),n.Y8G("ngSwitchCase","variant_ids"),n.R7$(),n.Y8G("ngSwitchCase","source_id"),n.R7$(),n.Y8G("ngSwitchCase","evidence_item_ids"),n.R7$(2),n.Y8G("ngIf","NEW"!==i.status)}}function pe(e,a){if(1&e&&(n.j41(0,"nz-collapse",21),n.DNE(1,_e,28,25,"nz-collapse-panel",22),n.k0s()),2&e){const i=n.XpG(2);n.R7$(),n.Y8G("ngForOf",i.untypedRevisons)}}function ge(e,a){1&e&&n.nrm(0,"nz-empty",81)}function me(e,a){if(1&e&&(n.qex(0),n.j41(1,"nz-card",19),n.DNE(2,pe,2,1,"nz-collapse",20)(3,ge,1,0,"ng-template",null,1,n.C5r),n.k0s(),n.bVm()),2&e){const i=n.sdS(4),_=n.XpG(),p=n.sdS(4);n.R7$(),n.Y8G("nzExtra",p),n.R7$(),n.Y8G("ngIf",_.revisions&&_.revisions.length>0)("ngIfElse",i)}}function de(e,a){}function ue(e,a){1&e&&n.DNE(0,de,0,0,"ng-template")}function fe(e,a){if(1&e&&(n.qex(0),n.DNE(1,ue,1,0,null,85),n.bVm()),2&e){n.XpG();const i=n.sdS(5);n.R7$(),n.Y8G("ngTemplateOutlet",i)}}function ve(e,a){}function ze(e,a){1&e&&n.DNE(0,ve,0,0,"ng-template")}function Ce(e,a){if(1&e&&(n.j41(0,"span",86),n.DNE(1,ze,1,0,null,85),n.k0s()),2&e){n.XpG();const i=n.sdS(5);n.R7$(),n.Y8G("ngTemplateOutlet",i)}}function he(e,a){if(1&e){const i=n.RV6();n.j41(0,"button",87),n.mxI("nzPopoverVisibleChange",function(p){u.eBV(i);const z=n.XpG(7);return n.DH7(z.validationPopoverVisible,p)||(z.validationPopoverVisible=p),u.Njj(p)}),n.bIt("click",function(){u.eBV(i);const p=n.XpG(7);return u.Njj(p.validationPopoverVisible=!p.validationPopoverVisible)}),n.EFF(1," Review Selected Revisions "),n.nrm(2,"i",88),n.k0s()}if(2&e){const i=n.XpG(2).ngrxLet,_=n.sdS(7),p=n.sdS(9),z=n.XpG(5);n.Y8G("nzPopoverTitle",_),n.R50("nzPopoverVisible",z.validationPopoverVisible),n.Y8G("nzPopoverContent",p)("nzPopoverTrigger",void 0)("disabled",0===z.selectedRevisionIds.length||!i.signedIn)}}function Re(e,a){if(1&e&&(n.j41(0,"span"),n.DNE(1,fe,2,1,"ng-container",70)(2,Ce,2,1,"ng-template",null,12,n.C5r)(4,he,3,5,"ng-template",null,13,n.C5r),n.k0s()),2&e){const i=n.sdS(3),_=n.XpG().ngrxLet;n.R7$(),n.Y8G("ngIf",_.signedIn)("ngIfElse",i)}}function Te(e,a){if(1&e&&n.nrm(0,"i",90),2&e){n.XpG(4);const i=n.sdS(3);n.Y8G("nzPopoverContent",i)}}function be(e,a){1&e&&(n.qex(0),n.DNE(1,Te,1,1,"i",89),n.bVm())}function ye(e,a){if(1&e){const i=n.RV6();n.EFF(0," Review Selected Revisions "),n.j41(1,"span",91)(2,"i",92),n.bIt("click",function(){u.eBV(i);const p=n.XpG(6);return u.Njj(p.validationPopoverVisible=!1)}),n.k0s()()}2&e&&(n.R7$(),n.Y8G("ngStyle",n.lJ4(1,tt)))}function Ee(e,a){if(1&e){const i=n.RV6();n.j41(0,"cvc-comment-input-form",95),n.mxI("commentChange",function(p){u.eBV(i);const z=n.XpG(7);return n.DH7(z.revisionComment,p)||(z.revisionComment=p),u.Njj(p)}),n.k0s()}if(2&e){const i=n.XpG(7);n.R50("comment",i.revisionComment)}}function Ge(e,a){if(1&e){const i=n.RV6();n.j41(0,"span")(1,"button",96),n.bIt("click",function(){u.eBV(i);const p=n.XpG(8);return u.Njj(p.onRejectRevisionsClicked())}),n.EFF(2," Reject Revision "),n.k0s()()}if(2&e){const i=n.XpG(8);n.R7$(),n.Y8G("nzLoading",i.isLoading)("disabled",void 0===i.revisionComment||i.revisionComment.length<10)("nzTooltipTrigger",i.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==i.mostRecentOrg?null:i.mostRecentOrg.name))}}function Fe(e,a){if(1&e){const i=n.RV6();n.j41(0,"span")(1,"button",97),n.bIt("click",function(){u.eBV(i);const p=n.XpG(8);return u.Njj(p.onAcceptRevisionClicked())}),n.EFF(2," Accept Revision "),n.k0s()()}if(2&e){const i=n.XpG(4).ngrxLet,_=n.XpG(4);n.R7$(),n.Y8G("nzLoading",_.isLoading)("disabled",!(0==i&&(void 0===_.revisionComment||""===_.revisionComment||_.revisionComment.length>=10)))("nzTooltipTrigger",_.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==_.mostRecentOrg?null:_.mostRecentOrg.name))}}function Se(e,a){if(1&e&&n.nrm(0,"i",99),2&e){n.XpG(6);const i=n.sdS(3);n.Y8G("nzPopoverContent",i)}}function xe(e,a){if(1&e&&(n.j41(0,"span"),n.DNE(1,Se,1,1,"i",98),n.k0s()),2&e){const i=n.XpG(4).ngrxLet;n.R7$(),n.Y8G("ngIf",i&&i>0)}}function $e(e,a){1&e&&(n.j41(0,"span")(1,"nz-space"),n.DNE(2,Ge,3,4,"span",62)(3,Fe,3,4,"span",62)(4,xe,2,1,"span",62),n.k0s()())}function Ie(e,a){1&e&&(n.j41(0,"nz-space",93),n.DNE(1,Ee,1,1,"cvc-comment-input-form",94)(2,$e,5,0,"span",62),n.k0s())}function je(e,a){if(1&e&&(n.qex(0),n.j41(1,"div",82)(2,"div",83)(3,"nz-space",84),n.DNE(4,Re,6,2,"span",62)(5,be,2,0,"ng-container",27),n.k0s(),n.DNE(6,ye,3,2,"ng-template",null,10,n.C5r)(8,Ie,3,0,"ng-template",null,11,n.C5r),n.k0s()(),n.bVm()),2&e){const i=n.XpG().ngrxLet;n.R7$(5),n.Y8G("ngIf",i&&i>0)}}function De(e,a){if(1&e&&(n.qex(0),n.DNE(1,je,10,1,"ng-container",16),n.bVm()),2&e){const i=n.XpG(4);n.R7$(),n.Y8G("ngrxLet",i.viewer$)}}function Le(e,a){if(1&e&&(n.j41(0,"nz-list-item"),n.EFF(1),n.k0s()),2&e){const i=a.$implicit;n.R7$(),n.JRh(i)}}function Oe(e,a){if(1&e&&(n.j41(0,"nz-card",101)(1,"nz-list",102),n.DNE(2,Le,2,1,"nz-list-item",103),n.k0s()()),2&e){const i=n.XpG(3).ngrxLet;n.R7$(2),n.Y8G("ngForOf",i)}}function Me(e,a){if(1&e&&(n.j41(0,"span"),n.DNE(1,Oe,3,1,"nz-card",100),n.k0s()),2&e){const i=n.XpG(2).ngrxLet;n.R7$(),n.Y8G("ngIf",i&&i.length>0)}}function Pe(e,a){if(1&e&&(n.j41(0,"nz-descriptions-item",108),n.EFF(1),n.k0s()),2&e){const i=a.$implicit;n.Y8G("nzTitle",i.fieldName),n.R7$(),n.JRh(i.error)}}function Ne(e,a){if(1&e&&(n.j41(0,"nz-card",105)(1,"nz-descriptions",106),n.DNE(2,Pe,2,2,"nz-descriptions-item",107),n.k0s()()),2&e){const i=n.XpG(4).ngrxLet;n.R7$(2),n.Y8G("ngForOf",i)}}function Ye(e,a){if(1&e&&(n.j41(0,"span"),n.DNE(1,Ne,3,1,"nz-card",104),n.k0s()),2&e){const i=n.XpG(3).ngrxLet;n.R7$(),n.Y8G("ngIf",i&&i.length>0)}}function Ve(e,a){1&e&&(n.j41(0,"nz-space",93),n.DNE(1,Me,2,1,"span",62)(2,Ye,2,1,"span",62),n.k0s())}function Ae(e,a){if(1&e&&(n.qex(0),n.DNE(1,De,2,1,"ng-container",16)(2,Ve,3,0,"ng-template",null,9,n.C5r),n.bVm()),2&e){const i=n.XpG(3);n.R7$(),n.Y8G("ngrxLet",i.totalErrorCount$)}}function Xe(e,a){if(1&e&&(n.qex(0),n.DNE(1,Ae,4,1,"ng-container",16),n.bVm()),2&e){const i=n.XpG(2);n.R7$(),n.Y8G("ngrxLet",i.genericErrors$)}}function Be(e,a){if(1&e&&n.DNE(0,Xe,2,1,"ng-container",16),2&e){const i=n.XpG();n.Y8G("ngrxLet",i.validationErrors$)}}let ke=(()=>{class e{constructor(i,_,p,z,X){this.viewerService=i,this.networkErrorService=_,this.acceptRevisionsGql=p,this.rejectRevisionsGql=z,this.validationGql=X,this.refetchQueries=[],this.selectedRevisionIds=[],this.isLoading=!1,this.success=!1,this.validationPopoverVisible=!1,this.destroy$=new V.B,this.revisionSetSelectedEvent=new n.bkB,this.revisionMutationCompleted=new n.bkB,this.acceptRevisionsMutator=new y.E(this.networkErrorService),this.rejectRevisionsMutator=new y.E(this.networkErrorService),this.viewer$=this.viewerService.viewer$}ngOnChanges(i){this.untypedRevisons=this.revisions,this.selectedRevisionIds=[],this.queryRef&&this.queryRef.refetch({ids:this.selectedRevisionIds})}ngOnInit(){this.viewerService.viewer$.subscribe(i=>{this.mostRecentOrg=i.mostRecentOrg}),this.queryRef=this.validationGql.watch({ids:[]}),this.genericErrors$=this.queryRef.valueChanges.pipe((0,h.E)("data","validateRevisionsForAcceptance","genericErrors"),(0,x.p)(Y.kP),(0,I.Z)([])),this.validationErrors$=this.queryRef.valueChanges.pipe((0,h.E)("data","validateRevisionsForAcceptance","validationErrors"),(0,x.p)(Y.kP),(0,I.Z)([])),this.totalErrorCount$=(0,k.z)([this.genericErrors$,this.validationErrors$]).pipe((0,c.T)(([i,_])=>i.length+_.length),(0,I.Z)(0)),this.untypedRevisons=this.revisions}onChangesetSelected(i){this.revisionSetSelectedEvent.emit(i)}onRevisionCheckboxClicked(i,_){i?this.selectedRevisionIds.push(_):this.selectedRevisionIds=this.selectedRevisionIds.filter(p=>p!=_),this.queryRef.refetch({ids:this.selectedRevisionIds})}setupMutationResultHandlers(i,_){i.submitSuccess$.pipe((0,D.Q)(this.destroy$)).subscribe(p=>{p&&(this.isLoading=!1,this.revisionMutationCompleted.emit(),this.errors=void 0,this.success=_,this.validationPopoverVisible=!1,this.selectedRevisionIds=[],this.revisionComment=void 0)}),i.submitError$.pipe((0,D.Q)(this.destroy$)).subscribe(p=>{p.length>0&&(this.isLoading=!1,this.success=!1,this.errors=p,this.validationPopoverVisible=!1,this.selectedRevisionIds=[])})}onRejectRevisionsClicked(){if(this.revisionComment&&""!==this.revisionComment){this.isLoading=!0;let i=this.rejectRevisionsMutator.mutate(this.rejectRevisionsGql,{input:{ids:this.selectedRevisionIds,organizationId:this.mostRecentOrg?.id,comment:this.revisionComment}},{refetchQueries:this.refetchQueries});this.setupMutationResultHandlers(i,"rejected")}}onAcceptRevisionClicked(){this.isLoading=!0;let i=this.acceptRevisionsMutator.mutate(this.acceptRevisionsGql,{input:{ids:this.selectedRevisionIds,organizationId:this.mostRecentOrg?.id,comment:""===this.revisionComment?void 0:this.revisionComment}},{refetchQueries:this.refetchQueries});this.setupMutationResultHandlers(i,"accepted")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(i){this.errors=this.errors?.filter(_=>_!=i)}onSuccessBannerClose(){this.success=!1}static#n=this.\u0275fac=function(_){return new(_||e)(n.rXU(v.q),n.rXU($.N),n.rXU(l.QZR),n.rXU(l.BMV),n.rXU(l.ZFx))};static#t=this.\u0275cmp=n.VBU({type:e,selectors:[["cvc-revision-list"]],inputs:{revisions:"revisions",refetchQueries:"refetchQueries"},outputs:{revisionSetSelectedEvent:"revisionSetSelectedEvent",revisionMutationCompleted:"revisionMutationCompleted"},standalone:!1,features:[n.OA$],decls:5,vars:3,consts:[["moderationButtons",""],["noRevisions",""],["revCardHeaderTitle",""],["revCardHeaderExtra",""],["itemTemplate",""],["creationCommentTemplate",""],["noRevisor",""],["loggedIn",""],["canRevise",""],["validationErrorTemplate",""],["validationPopoverTitleTemplate",""],["validationPopoverContentTemplate",""],["notSignedIn",""],["submitButton",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],[4,"ngrxLet"],["nzBanner","","nzType","error","nzCloseable","",3,"nzOnClose","nzMessage"],["nzBanner","","nzType","success","nzCloseable","",3,"nzOnClose","nzMessage"],["nzTitle","Revisions",1,"card-list",3,"nzExtra"],["class","revision-list",4,"ngIf","ngIfElse"],[1,"revision-list"],[3,"nzHeader","nzExtra","nzActive",4,"ngFor","ngForOf"],[3,"nzHeader","nzExtra","nzActive"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"],["entityType","Feature",3,"diffObject"],[3,"feature"],["entityType","Sources",3,"diffObject"],[3,"source"],["entityType","Disease",3,"diffObject"],[3,"disease"],["entityType","Molecular Profile",3,"diffObject"],[3,"molecularProfile"],["entityType","Therapies",3,"diffObject"],[3,"therapy"],["entityType","Variant Aliases",3,"diffObject"],["entityType","Feature Aliases",3,"diffObject"],["entityType","Molecular Profile Aliases",3,"diffObject"],["entityType","ClinVar Entries",3,"diffObject"],["entityType","ClinGen/CGC/VICC Code(s)",3,"diffObject"],["entityType","ACMG/AMP Code(s)",3,"diffObject"],["entityType","NCCN Guideline",3,"diffObject"],["entityType","HGVS Descriptions",3,"diffObject"],["entityType","Variant Types",3,"diffObject"],[3,"variantType"],["entityType","Phenotypes",3,"diffObject"],[3,"phenotype"],["entityType","Variant",3,"diffObject"],[3,"variant"],["entityType","Variants",3,"diffObject"],["entityType","Source",3,"diffObject"],["entityType","Evidence",3,"diffObject"],[3,"evidence"],[3,"currentValue","suggestedValue","left","right","entityType"],["nzSpan","16"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"commentBodySegments"],[3,"user"],[4,"nzSpaceItem"],["nz-icon","","nzTheme","twotone","nzType","civic-revision",3,"nzTwotoneColor"],["nz-popover","","nz-icon","","nzType","comment","nzTheme","outline",3,"nzPopoverContent",4,"nzSpaceItem"],["nz-popover","","nz-icon","","nzType","comment","nzTheme","outline",3,"nzPopoverContent"],["nzSize","small",3,"click"],[3,"status",4,"nzSpaceItem"],["nzType","vertical",4,"nzSpaceItem"],["nz-button","","nzType","link",3,"click",4,"nzSpaceItem"],[4,"ngIf","ngIfElse"],["nz-typography","","nzType","secondary"],[3,"org"],[3,"status"],["nzType","vertical"],["nz-button","","nzType","link",3,"click"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions.",3,"nzDisabled",4,"ngIf","ngIfElse"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions.",3,"nzDisabled"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Curators may only reject their own revisions.",3,"nzDisabled",4,"ngIf","ngIfElse"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Curators may only reject their own revisions.",3,"nzDisabled"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Select Revision for Acceptance/Rejection",3,"nzCheckedChange"],["nzNotFoundImage","simple","nzNotFoundContent","No Revisions matching filters"],["nz-row","",2,"margin-top","1em"],["nz-col","","nzSpan","24",2,"text-align","right"],["nzDirection","horizontal"],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverVisibleChange","click","nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled"],["nz-icon","","nzType","caret-down","nzTheme","outline"],["nz-icon","","nzType","exclamation-circle","nzTheme","twotone","nzTwotoneColor","red","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent",4,"nzSpaceItem"],["nz-icon","","nzType","exclamation-circle","nzTheme","twotone","nzTwotoneColor","red","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzDirection","vertical"],[3,"comment","commentChange",4,"nzSpaceItem"],[3,"commentChange","comment"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzSize","small","nzDanger","","nz-tooltip","",3,"click","nzLoading","disabled","nzTooltipTrigger","nzTooltipTitle"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzSize","small","nz-tooltip","",3,"click","nzLoading","disabled","nzTooltipTrigger","nzTooltipTitle"],["nz-icon","","nzTwotoneColor","red","nzType","exclamation-circle","nzTheme","twotone","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent",4,"ngIf"],["nz-icon","","nzTwotoneColor","red","nzType","exclamation-circle","nzTheme","twotone","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent"],["nzTitle","Errors",4,"ngIf"],["nzTitle","Errors"],["nzSize","small"],[4,"ngFor","ngForOf"],["nzTitle","Validation Errors",4,"ngIf"],["nzTitle","Validation Errors"],["nzBordered",""],[3,"nzTitle",4,"ngFor","ngForOf"],[3,"nzTitle"]],template:function(_,p){1&_&&n.DNE(0,et,1,1,"nz-alert",14)(1,it,1,2,"nz-alert",15)(2,me,5,3,"ng-container",16)(3,Be,1,1,"ng-template",null,0,n.C5r),2&_&&(n.Y8G("ngForOf",p.errors),n.R7$(),n.Y8G("ngIf",p.success),n.R7$(),n.Y8G("ngrxLet",p.viewer$))},dependencies:[g.Sq,g.bT,g.T3,g.B3,g.ux,g.e1,g.fG,b.Uq,b.e,C.eE,C.lQ,L.cK,G.U5,G.Dq,j.s,H.Di,O.RW,W.$g,K.j,q.LH,nn.L_,B.Dn,w.xA,w.gr,On,Mn._,Pn.D,Nn,Yn.r,Vn.Y,An.R,Xn.A,an.j,Bn.J,kn.h,Un.g,Hn.K,Wn.z,Qn.p,Kn.r,gn.Vz,gn.pc,P.a,M.c,S.p,Jn.Y,T.Nj,Zn.f,wn.R,qn.N],styles:["[_nghost-%COMP%]{display:block}nz-list[_ngcontent-%COMP%]   .kept[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{background-color:#f6ffed;color:#135200}nz-list[_ngcontent-%COMP%]   .removed[_ngcontent-%COMP%]{background-color:#fff1f0;color:#820014}nz-list[_ngcontent-%COMP%]   .suggested[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}"]})}return e})();const bt=()=>[];function Ue(e,a){if(1&e){const i=n.RV6();n.j41(0,"cvc-revision-list",16),n.nI1(1,"ngrxPush"),n.bIt("revisionSetSelectedEvent",function(p){u.eBV(i);const z=n.XpG(2);return u.Njj(z.onRevisionSetSelected(p))})("revisionMutationCompleted",function(){u.eBV(i);const p=n.XpG(2);return u.Njj(p.refresh())}),n.k0s()}if(2&e){const i=n.XpG(2);n.Y8G("revisions",n.bMT(1,2,i.revisions$))("refetchQueries",i.refetchQueries)}}function He(e,a){if(1&e){const i=n.RV6();n.j41(0,"button",19),n.bIt("click",function(){u.eBV(i);const p=n.XpG(2).ngrxLet,z=n.XpG(2);return u.Njj(z.loadMore(null==p?null:p.endCursor))}),n.EFF(1," Load More "),n.k0s()}}function We(e,a){1&e&&(n.qex(0),n.DNE(1,He,2,0,"button",18),n.bVm())}function Qe(e,a){if(1&e&&(n.qex(0),n.DNE(1,We,2,0,"ng-container",17),n.bVm()),2&e){const i=a.ngrxLet;n.R7$(),n.Y8G("ngIf",i&&(null==i?null:i.hasNextPage)&&i.endCursor)}}function Ke(e,a){if(1&e){const i=n.RV6();n.j41(0,"nz-row")(1,"nz-tag",21),n.bIt("nzOnClose",function(){u.eBV(i);const p=n.XpG(3);return u.Njj(p.onSetFilterClearClicked())}),n.EFF(2),n.k0s()()}if(2&e){const i=n.XpG(3);n.R7$(2),n.SpI("Group: ",i.filteredSet)}}function Je(e,a){1&e&&(n.j41(0,"nz-space",7),n.DNE(1,Ke,3,1,"nz-row",20),n.k0s())}function Ze(e,a){if(1&e&&(n.j41(0,"span"),n.EFF(1),n.k0s()),2&e){const i=a.$implicit;n.R7$(),n.JRh(i.displayName)}}function we(e,a){if(1&e&&n.nrm(0,"nz-avatar",23),2&e){const i=n.XpG().$implicit;n.Y8G("nzSrc",i.profileImagePath)}}function qe(e,a){if(1&e&&(n.nrm(0,"nz-avatar",24),n.nI1(1,"uppercase")),2&e){const i=n.XpG().$implicit;n.Y8G("nzText",n.bMT(1,1,i.username.charAt(0)))}}function ni(e,a){if(1&e&&(n.DNE(0,we,1,1,"nz-avatar",22)(1,qe,2,3,"ng-template",null,2,n.C5r),n.j41(3,"span"),n.EFF(4),n.k0s()),2&e){const i=a.$implicit,_=n.sdS(2);n.Y8G("ngIf",i.profileImagePath)("ngIfElse",_),n.R7$(4),n.JRh(i.username)}}function ti(e,a){if(1&e&&(n.j41(0,"span"),n.EFF(1),n.k0s()),2&e){const i=a.$implicit;n.R7$(),n.JRh(i.displayName)}}function ei(e,a){if(1&e&&n.nrm(0,"nz-avatar",23),2&e){const i=n.XpG().$implicit;n.Y8G("nzSrc",i.profileImagePath)}}function ii(e,a){if(1&e&&(n.nrm(0,"nz-avatar",24),n.nI1(1,"uppercase")),2&e){const i=n.XpG().$implicit;n.Y8G("nzText",n.bMT(1,1,i.username.charAt(0)))}}function oi(e,a){if(1&e&&(n.DNE(0,ei,1,1,"nz-avatar",22)(1,ii,2,3,"ng-template",null,2,n.C5r),n.j41(3,"span"),n.EFF(4),n.k0s()),2&e){const i=a.$implicit,_=n.sdS(2);n.Y8G("ngIf",i.profileImagePath)("ngIfElse",_),n.R7$(4),n.JRh(i.username)}}function si(e,a){if(1&e){const i=n.RV6();n.qex(0),n.j41(1,"nz-row",5)(2,"nz-col",6)(3,"nz-space",7),n.DNE(4,Ue,2,4,"cvc-revision-list",8)(5,Qe,2,1,"ng-container",9),n.k0s()(),n.j41(6,"nz-col",10),n.DNE(7,Je,2,0,"nz-space",11),n.j41(8,"cvc-participant-list",12),n.bIt("participantSelectedEvent",function(p){u.eBV(i);const z=n.XpG();return u.Njj(z.onStatusSelected(p))}),n.DNE(9,Ze,2,1,"ng-template",null,1,n.C5r),n.k0s(),n.j41(11,"cvc-participant-list",13),n.nI1(12,"ngrxPush"),n.bIt("participantSelectedEvent",function(p){u.eBV(i);const z=n.XpG();return u.Njj(z.onRevisorSelected(p))}),n.DNE(13,ni,5,3,"ng-template",null,1,n.C5r),n.k0s(),n.j41(15,"cvc-participant-list",14),n.nI1(16,"ngrxPush"),n.bIt("participantSelectedEvent",function(p){u.eBV(i);const z=n.XpG();return u.Njj(z.onFieldNameSelected(p))}),n.DNE(17,ti,2,1,"ng-template",null,1,n.C5r),n.k0s(),n.j41(19,"cvc-participant-list",15),n.nI1(20,"ngrxPush"),n.bIt("participantSelectedEvent",function(p){u.eBV(i);const z=n.XpG();return u.Njj(z.onResolverSelected(p))}),n.DNE(21,oi,5,3,"ng-template",null,1,n.C5r),n.k0s()()(),n.bVm()}if(2&e){const i=n.XpG();n.R7$(),n.Y8G("nzGutter",16),n.R7$(4),n.Y8G("ngrxLet",i.pageInfo$),n.R7$(2),n.Y8G("ngIf",i.filteredSet),n.R7$(),n.Y8G("preselectedOption",i.preselectedRevisionStatus)("participantList",i.selectableStatuses),n.R7$(3),n.Y8G("participantList",n.bMT(12,8,i.uniqueRevisors$)||n.lJ4(14,bt)),n.R7$(4),n.Y8G("participantList",n.bMT(16,10,i.revisionFields$)||n.lJ4(15,bt)),n.R7$(4),n.Y8G("participantList",n.bMT(20,12,i.uniqueResolvers$)||n.lJ4(16,bt))}}function ai(e,a){1&e&&(n.qex(0),n.j41(1,"nz-row",25),n.nrm(2,"i",26),n.k0s(),n.bVm())}function ri(e,a){1&e&&n.nrm(0,"nz-empty",27)}function li(e,a){if(1&e&&(n.DNE(0,ai,3,0,"ng-container",4),n.nI1(1,"ngrxPush"),n.DNE(2,ri,1,0,"ng-template",null,3,n.C5r)),2&e){const i=n.sdS(3),_=n.XpG();n.Y8G("ngIf",n.bMT(1,2,_.isLoading$))("ngIfElse",i)}}let ci=(()=>{class e{constructor(i,_,p,z,X,_n,yt,_i,pi,gi,mi,di,ui,fi){this.gql=i,this.route=_,this.variantDetailGql=p,this.variantSummaryGql=z,this.variantGroupDetailGql=X,this.variantGroupSummaryGql=_n,this.assertionDetailGql=yt,this.assertionSummaryGql=_i,this.featureDetailGql=pi,this.featureSummaryGql=gi,this.evidenceDetailGql=mi,this.evidenceSummaryGql=di,this.molecularProfileDetailGql=ui,this.molecularProfileSummaryGql=fi,this.filteredSet=void 0,this.selectableStatuses=[{id:4,displayName:"New",value:l.W14.New},{id:1,displayName:"Accepted",value:l.W14.Accepted},{id:2,displayName:"Rejected",value:l.W14.Rejected},{id:3,displayName:"Superseded",value:l.W14.Superseded}],this.preselectedRevisionStatus=this.selectableStatuses[0],this.defaultPageSize=10,this.refetchQueries=[]}ngOnInit(){switch(this.routeSub=this.route.params.subscribe(i=>{this.queryParamsSub=this.route.queryParams.subscribe(_=>{let p={first:this.defaultPageSize,subject:this.moderated,status:l.W14.New};_.revisionSetId&&(this.filteredSet=+_.revisionSetId,this.preselectedRevisionStatus=void 0,p.status=void 0,p.revisionSetId=+_.revisionSetId),this.queryRef=this.gql.watch(p);let z=this.queryRef.valueChanges;this.revisions$=z.pipe((0,h.E)("data","revisions","edges"),(0,c.T)(X=>X.map(_n=>_n.node))),this.isLoading$=z.pipe((0,c.T)(X=>X.loading),(0,I.Z)(!0)),this.pageInfo$=z.pipe((0,h.E)("data","revisions","pageInfo")),this.uniqueRevisors$=z.pipe((0,c.T)(({data:X})=>X.revisions?.uniqueRevisors)),this.uniqueResolvers$=z.pipe((0,c.T)(({data:X})=>X.revisions?.uniqueResolvers)),this.revisionFields$=z.pipe((0,c.T)(({data:X})=>X.revisions?.revisedFieldNames.map((_n,yt)=>({..._n,id:yt})))),this.unfilteredCount$=z.pipe((0,h.E)("data","revisions","unfilteredCountForSubject"))})}),this.moderated.entityType){case l.BlQ.Variant:return this.refetchQueries.push({query:this.variantDetailGql.document,variables:{variantId:this.moderated.id}}),void this.refetchQueries.push({query:this.variantSummaryGql.document,variables:{variantId:this.moderated.id}});case l.BlQ.Assertion:return this.refetchQueries.push({query:this.assertionDetailGql.document,variables:{assertionId:this.moderated.id}}),void this.refetchQueries.push({query:this.assertionSummaryGql.document,variables:{assertionId:this.moderated.id}});case l.BlQ.EvidenceItem:return this.refetchQueries.push({query:this.evidenceDetailGql.document,variables:{evidenceId:this.moderated.id}}),void this.refetchQueries.push({query:this.evidenceSummaryGql.document,variables:{evidenceId:this.moderated.id}});case l.BlQ.Feature:return this.refetchQueries.push({query:this.featureDetailGql.document,variables:{featureId:this.moderated.id}}),void this.refetchQueries.push({query:this.featureSummaryGql.document,variables:{featureId:this.moderated.id}});case l.BlQ.VariantGroup:return this.refetchQueries.push({query:this.variantGroupDetailGql.document,variables:{variantGroupId:this.moderated.id}}),void this.refetchQueries.push({query:this.variantGroupSummaryGql.document,variables:{variantGroupId:this.moderated.id}});case l.BlQ.MolecularProfile:return this.refetchQueries.push({query:this.molecularProfileDetailGql.document,variables:{molecularProfileId:this.moderated.id}}),void this.refetchQueries.push({query:this.molecularProfileSummaryGql.document,variables:{molecularProfileId:this.moderated.id}})}}ngOnDestroy(){this.routeSub?.unsubscribe(),this.queryParamsSub?.unsubscribe()}onFieldNameSelected(i){this.queryRef.refetch({subject:this.moderated,fieldName:i?i.name:void 0})}onRevisorSelected(i){this.queryRef.refetch({subject:this.moderated,originatingUserId:i?i.id:void 0})}onResolverSelected(i){this.queryRef.refetch({subject:this.moderated,resolvingUserId:i?i.id:void 0})}onStatusSelected(i){this.preselectedRevisionStatus=i,this.queryRef.refetch({subject:this.moderated,status:i?i.value:void 0})}onRevisionSetSelected(i){this.filteredSet=i,this.queryRef.refetch({subject:this.moderated,revisionSetId:i||void 0})}onSetFilterClearClicked(){this.filteredSet=void 0,this.queryRef.refetch({subject:this.moderated,revisionSetId:void 0})}refresh(){this.queryRef.refetch()}loadMore(i){this.queryRef?.fetchMore({variables:{first:this.defaultPageSize,after:i}})}static#n=this.\u0275fac=function(_){return new(_||e)(n.rXU(l.xPr),n.rXU(t.nX),n.rXU(l.N47),n.rXU(l.yLZ),n.rXU(l.IbX),n.rXU(l.sAe),n.rXU(l.kKs),n.rXU(l.fqJ),n.rXU(l.ULh),n.rXU(l.gUZ),n.rXU(l.fQd),n.rXU(l.Ype),n.rXU(l.Tj8),n.rXU(l.SPr))};static#t=this.\u0275cmp=n.VBU({type:e,selectors:[["cvc-revisions-list-and-filter"]],inputs:{moderated:"moderated"},standalone:!1,decls:4,vars:4,consts:[["noRevisions",""],["itemTemplate",""],["noAvatar",""],["noneFound",""],[4,"ngIf","ngIfElse"],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"revisions","refetchQueries","revisionSetSelectedEvent","revisionMutationCompleted",4,"nzSpaceItem"],[4,"ngrxLet"],["nzSpan","6"],["nzDirection","vertical",4,"ngIf"],["listTitle","Filter by Revision Status",3,"participantSelectedEvent","preselectedOption","participantList"],["listTitle","Filter by Revisor",3,"participantSelectedEvent","participantList"],["listTitle","Filter by Field",3,"participantSelectedEvent","participantList"],["listTitle","Filter by Resolver",3,"participantSelectedEvent","participantList"],[3,"revisionSetSelectedEvent","revisionMutationCompleted","revisions","refetchQueries"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[4,"nzSpaceItem"],["nzMode","closeable",3,"nzOnClose"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["nzJustify","center"],["nz-icon","","nzType","loading",2,"font-size","32px"],["nzNotFoundImage","simple","nzNotFoundContent","Entity has no Revisions"]],template:function(_,p){if(1&_&&(n.DNE(0,si,23,17,"ng-container",4),n.nI1(1,"ngrxPush"),n.DNE(2,li,4,4,"ng-template",null,0,n.C5r)),2&_){const z=n.sdS(3);n.Y8G("ngIf",n.bMT(1,2,p.unfilteredCount$))("ngIfElse",z)}},dependencies:[g.bT,T.Nj,b.Uq,b.e,G.U5,G.Dq,j.s,F.PM,O.RW,P.a,M.c,S.p,B.Dn,U.T,ke,g.Pc,T.L9],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]})}return e})()},94097:(Z,N,o)=>{o.d(N,{b:()=>Tt});var l=o(17705),c=o(69145),I=o(5964),h=o(96354),n=o(24608),u=o(69199),t=o(73664),g=o(48728),T=o(72200),b=o(61774),G=o(50513),j=o(16389),F=o(25930),O=o(97529),P=o(31635),M=o(71226),S=o(49894),B=o(41305),U=o(74222),V=o(84341),x=o(38927),k=o(25703),y=o(23617),D=o(35154),Y=o(1177),v=o(41939),$=o(65566),C=o(61845);function L(r,m){if(1&r){const s=t.RV6();t.j41(0,"nz-alert",10),t.bIt("nzOnClose",function(){g.eBV(s);const f=t.XpG();return g.Njj(f.onSuccessBannerClose())}),t.k0s()}}function H(r,m){if(1&r&&t.nrm(0,"nz-alert",11),2&r){t.XpG();const s=t.sdS(4);t.Y8G("nzDescription",s)}}function W(r,m){if(1&r&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&r){const s=m.$implicit;t.R7$(),t.JRh(s)}}function K(r,m){if(1&r&&(t.j41(0,"ul"),t.DNE(1,W,2,1,"li",12),t.k0s()),2&r){const s=t.XpG();t.R7$(),t.Y8G("ngForOf",s.errorMessages)}}function q(r,m){}function nn(r,m){1&r&&t.DNE(0,q,0,0,"ng-template")}function w(r,m){if(1&r&&(t.qex(0),t.DNE(1,nn,1,0,null,14),t.bVm()),2&r){t.XpG();const s=t.sdS(6);t.R7$(),t.Y8G("ngTemplateOutlet",s)}}function tn(r,m){}function en(r,m){1&r&&t.DNE(0,tn,0,0,"ng-template")}function Q(r,m){if(1&r&&(t.j41(0,"span",15),t.DNE(1,en,1,0,null,14),t.k0s()),2&r){t.XpG();const s=t.sdS(6);t.R7$(),t.Y8G("ngTemplateOutlet",s)}}function on(r,m){if(1&r&&(t.j41(0,"button",16),t.EFF(1),t.nI1(2,"enumToTitle"),t.k0s()),2&r){const s=t.XpG().ngrxLet,d=t.XpG();t.Y8G("disabled",!(void 0!==d.comment&&d.comment.length>=10&&s.signedIn))("nzTooltipTrigger",d.selectedOrg?"hover":null)("nzTooltipTitle","For "+(null==d.selectedOrg?null:d.selectedOrg.name)),t.R7$(),t.SpI(" Flag ",t.bMT(2,4,d.flaggable.entityType)," ")}}function sn(r,m){if(1&r&&(t.qex(0),t.j41(1,"cvc-form-buttons"),t.DNE(2,w,2,1,"ng-container",13)(3,Q,2,1,"ng-template",null,1,t.C5r)(5,on,3,6,"ng-template",null,2,t.C5r),t.k0s(),t.bVm()),2&r){const s=m.ngrxLet,d=t.sdS(4);t.R7$(2),t.Y8G("ngIf",s.signedIn)("ngIfElse",d)}}let R=class Et{constructor(m,s,d){this.gql=m,this.viewerService=s,this.networkErrorService=d,this.errorMessages=[],this.success=!1,this.loading=!1,this.comment="",this.addFlagMutator=new M.E(this.networkErrorService),this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.pipe((0,S.s)(this)).subscribe(f=>{this.selectedOrg=f.mostRecentOrg})}ngOnInit(){if(void 0===this.flaggable)throw new Error("Must pass a flagggable into flag add component")}onOrgSelected(m){this.selectedOrg=m}submitFlag(){this.errorMessages=[];let s=this.addFlagMutator.mutate(this.gql,{input:{comment:this.comment,subject:this.flaggable,organizationId:this.selectedOrg?.id}});s.submitSuccess$.pipe((0,S.s)(this)).subscribe(d=>{d&&(this.flagAddedCallback&&this.flagAddedCallback(),this.success=!0,this.comment="")}),s.submitError$.pipe((0,S.s)(this)).subscribe(d=>{d.length>0&&(this.errorMessages=d)}),s.isSubmitting$.pipe((0,S.s)(this)).subscribe(d=>{this.loading=d})}onSuccessBannerClose(){this.success=!1}static#n=this.\u0275fac=function(s){return new(s||Et)(t.rXU(c.GOU),t.rXU(B.q),t.rXU(U.N))};static#t=this.\u0275cmp=t.VBU({type:Et,selectors:[["cvc-flag-add-form"]],inputs:{flaggable:"flaggable",flagAddedCallback:"flagAddedCallback"},standalone:!1,decls:11,vars:5,consts:[["errorContents",""],["notSignedIn",""],["submitButton",""],["nzType","inner"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription",4,"ngIf"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"commentChange","comment"],["nzTip","Submitting",3,"nzSpinning"],[4,"ngrxLet"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to flag entity."],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small","nz-tooltip","",3,"disabled","nzTooltipTrigger","nzTooltipTitle"]],template:function(s,d){if(1&s){const f=t.RV6();t.j41(0,"nz-card",3),t.DNE(1,L,1,0,"nz-alert",4)(2,H,1,1,"nz-alert",5)(3,K,2,1,"ng-template",null,0,t.C5r),t.j41(5,"form",6),t.bIt("ngSubmit",function(){return g.eBV(f),g.Njj(d.submitFlag())}),t.j41(6,"cvc-comment-input-form",7),t.mxI("commentChange",function(cn){return g.eBV(f),t.DH7(d.comment,cn)||(d.comment=cn),g.Njj(cn)}),t.k0s(),t.j41(7,"nz-spin",8)(8,"nz-form-item")(9,"nz-form-control"),t.DNE(10,sn,7,2,"ng-container",9),t.k0s()()()()()}2&s&&(t.R7$(),t.Y8G("ngIf",d.success),t.R7$(),t.Y8G("ngIf",d.errorMessages.length>0),t.R7$(4),t.R50("comment",d.comment),t.R7$(),t.Y8G("nzSpinning",d.loading),t.R7$(3),t.Y8G("ngrxLet",d.viewer$))},dependencies:[T.Sq,T.bT,T.T3,V.qT,V.cb,V.cV,b.Nj,O.Uq,O.e,x.CA,x.Ls,x.zS,G.a,j.c,F.p,k.cK,y.Y,D.LH,Y.a,v.l,$.K,C.f],encapsulation:2,changeDetection:0})};R=(0,P.Cg)([(0,S.d)()],R);var fn=o(21413),J=o(56977),A=o(97685),vn=o(7391),zn=o(11672),Cn=o(19448),pn=o(41951),hn=o(56408),Rn=o(50311),Tn=o(1236);const bn=()=>({float:"right"});function yn(r,m){if(1&r){const s=t.RV6();t.j41(0,"nz-alert",8),t.bIt("nzOnClose",function(){g.eBV(s);const f=t.XpG();return g.Njj(f.onSuccessBannerClose())}),t.k0s()}}function En(r,m){}function Gn(r,m){1&r&&t.DNE(0,En,0,0,"ng-template")}function Fn(r,m){if(1&r&&(t.qex(0),t.DNE(1,Gn,1,0,null,10),t.bVm()),2&r){t.XpG(2);const s=t.sdS(7);t.R7$(),t.Y8G("ngTemplateOutlet",s)}}function Sn(r,m){if(1&r&&(t.qex(0),t.DNE(1,Fn,2,1,"ng-container",9),t.bVm()),2&r){const s=t.XpG().ngrxLet,d=t.sdS(5),f=t.XpG();t.R7$(),t.Y8G("ngIf",s.isEditor||s.isAdmin||f.flag.openActivity.user.id===(null==s.user?null:s.user.id))("ngIfElse",d)}}function xn(r,m){}function $n(r,m){1&r&&t.DNE(0,xn,0,0,"ng-template")}function In(r,m){if(1&r&&(t.j41(0,"span",11),t.DNE(1,$n,1,0,null,10),t.k0s()),2&r){t.XpG();const s=t.sdS(7);t.R7$(),t.Y8G("ngTemplateOutlet",s)}}function jn(r,m){}function Dn(r,m){1&r&&t.DNE(0,jn,0,0,"ng-template")}function Ln(r,m){if(1&r&&(t.j41(0,"span",12),t.DNE(1,Dn,1,0,null,10),t.k0s()),2&r){t.XpG();const s=t.sdS(7);t.R7$(),t.Y8G("ngTemplateOutlet",s)}}function On(r,m){if(1&r){const s=t.RV6();t.j41(0,"button",14),t.mxI("nzPopoverVisibleChange",function(f){g.eBV(s);const E=t.XpG(3);return t.DH7(E.flagResolvePopoverVisible,f)||(E.flagResolvePopoverVisible=f),g.Njj(f)}),t.bIt("click",function(){g.eBV(s);const f=t.XpG(3);return g.Njj(f.flagResolvePopoverVisible=!f.flagResolvePopoverVisible)}),t.EFF(1," Resolve Flag "),t.nrm(2,"i",15),t.k0s()}if(2&r){const s=t.XpG(2).ngrxLet,d=t.XpG(),f=t.sdS(3),E=t.sdS(5);t.Y8G("nzPopoverTitle",f),t.R50("nzPopoverVisible",d.flagResolvePopoverVisible),t.Y8G("nzPopoverContent",E)("nzPopoverTrigger",void 0)("disabled",!s.signedIn||s.isCurator&&d.flag.openActivity.user.id!=(null==s.user?null:s.user.id))}}function Mn(r,m){if(1&r&&t.DNE(0,On,3,5,"button",13),2&r){const s=t.XpG(2);t.Y8G("ngIf",!s.success)}}function Pn(r,m){if(1&r&&(t.qex(0),t.DNE(1,Sn,2,2,"ng-container",9)(2,In,2,1,"ng-template",null,2,t.C5r)(4,Ln,2,1,"ng-template",null,3,t.C5r)(6,Mn,1,1,"ng-template",null,4,t.C5r),t.bVm()),2&r){const s=m.ngrxLet,d=t.sdS(3);t.R7$(),t.Y8G("ngIf",s.signedIn)("ngIfElse",d)}}function Nn(r,m){if(1&r){const s=t.RV6();t.EFF(0," Resolve Flag "),t.j41(1,"span",16)(2,"i",17),t.bIt("click",function(){g.eBV(s);const f=t.XpG();return f.flagResolvePopoverVisible=!1,g.Njj(f.errorMessages=[])}),t.k0s()()}2&r&&(t.R7$(),t.Y8G("ngStyle",t.lJ4(1,bn)))}function Yn(r,m){if(1&r&&t.nrm(0,"nz-alert",24),2&r){t.XpG();const s=t.sdS(2);t.Y8G("nzDescription",s)}}function Vn(r,m){if(1&r&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&r){const s=m.$implicit;t.R7$(),t.JRh(s)}}function An(r,m){if(1&r&&(t.j41(0,"ul"),t.DNE(1,Vn,2,1,"li",25),t.k0s()),2&r){const s=t.XpG(2);t.R7$(),t.Y8G("ngForOf",s.errorMessages)}}function Xn(r,m){if(1&r){const s=t.RV6();t.DNE(0,Yn,1,1,"nz-alert",18)(1,An,2,1,"ng-template",null,5,t.C5r),t.j41(3,"nz-card",19)(4,"form",20),t.bIt("ngSubmit",function(){g.eBV(s);const f=t.XpG();return g.Njj(f.resolveFlag())}),t.j41(5,"cvc-comment-input-form",21),t.mxI("commentChange",function(f){g.eBV(s);const E=t.XpG();return t.DH7(E.comment,f)||(E.comment=f),g.Njj(f)}),t.k0s(),t.j41(6,"nz-spin",22)(7,"nz-form-item")(8,"nz-form-control")(9,"cvc-form-buttons")(10,"button",23),t.EFF(11," Resolve "),t.k0s()()()()()()()}if(2&r){const s=t.XpG();t.Y8G("ngIf",s.errorMessages.length>0),t.R7$(5),t.R50("comment",s.comment),t.R7$(),t.Y8G("nzSpinning",s.loading),t.R7$(4),t.Y8G("disabled",!(void 0!==s.comment&&s.comment.length>=10))("nzTooltipTrigger",s.selectedOrg?"hover":null)("nzTooltipTitle","For "+(null==s.selectedOrg?null:s.selectedOrg.name))}}let an=class Gt{constructor(m,s,d){this.gql=m,this.viewerService=s,this.networkErrorService=d,this.errorMessages=[],this.loading=!1,this.success=!1,this.flagResolvePopoverVisible=!1,this.resolveFlagMutator=new M.E(this.networkErrorService),this.viewer$=this.viewerService.viewer$}ngOnInit(){if(void 0===this.flag)throw new Error("Must pass a Flag in to resolve component.");this.viewerService.viewer$.pipe((0,S.s)(this)).subscribe(m=>{this.selectedOrg=m.mostRecentOrg})}onOrgSelected(m){this.selectedOrg=m}resolveFlag(){if(this.comment){this.errorMessages=[];let m=this.resolveFlagMutator.mutate(this.gql,{input:{id:this.flag.id,comment:this.comment,organizationId:this.selectedOrg?.id}});m.submitSuccess$.pipe((0,S.s)(this)).subscribe(s=>{s&&(this.flagResolvePopoverVisible=!1,this.success=!0,this.flagResolvedCallback&&this.flagResolvedCallback())}),m.submitError$.pipe((0,S.s)(this)).subscribe(s=>{s.length>0&&(this.success=!1,this.errorMessages=s)}),m.isSubmitting$.pipe((0,S.s)(this)).subscribe(s=>{this.loading=s})}}onSuccessBannerClose(){this.success=!1,this.flagResolvedCallback&&this.flagResolvedCallback()}static#n=this.\u0275fac=function(s){return new(s||Gt)(t.rXU(c.reo),t.rXU(B.q),t.rXU(U.N))};static#t=this.\u0275cmp=t.VBU({type:Gt,selectors:[["cvc-flag-resolve-form"]],inputs:{flag:"flag",flagResolvedCallback:"flagResolvedCallback"},standalone:!1,decls:6,vars:2,consts:[["flagResolvePopoverTitleTemplate",""],["flagResolvePopoverContentTemplate",""],["notSignedIn",""],["noPermissions",""],["submitButton",""],["errorContents",""],["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],[4,"ngrxLet"],["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to resolve flag."],["nz-tooltip","","nzTooltipTitle","If you are not an editor, you can only resolve flags you opened."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click",4,"ngIf"],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverVisibleChange","click","nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled"],["nz-icon","","nzType","caret-down","nzTheme","outline"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription",4,"ngIf"],["nzType","inner",2,"width","300px"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"commentChange","comment"],["nzTip","Submitting",3,"nzSpinning"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small","nz-tooltip","",3,"disabled","nzTooltipTrigger","nzTooltipTitle"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription"],[4,"ngFor","ngForOf"]],template:function(s,d){1&s&&t.DNE(0,yn,1,0,"nz-alert",6)(1,Pn,8,2,"ng-container",7)(2,Nn,3,2,"ng-template",null,0,t.C5r)(4,Xn,12,6,"ng-template",null,1,t.C5r),2&s&&(t.Y8G("ngIf",d.success),t.R7$(),t.Y8G("ngrxLet",d.viewer$))},dependencies:[T.Sq,T.bT,T.T3,T.B3,V.qT,V.cb,b.Nj,G.a,j.c,F.p,O.Uq,O.e,x.CA,x.Ls,x.zS,V.cV,y.Y,k.cK,Tn.L_,pn.Dn,D.LH,Y.a,$.K,v.l],encapsulation:2})};an=(0,P.Cg)([(0,S.d)()],an);var Bn=o(4126),kn=o(83075),Un=o(8139);function Hn(r,m){if(1&r){const s=t.RV6();t.j41(0,"nz-alert",8),t.bIt("nzOnClose",function(){const f=g.eBV(s).$implicit,E=t.XpG();return g.Njj(E.onErrorBannerClose(f))}),t.k0s()}2&r&&t.Y8G("nzMessage",m.$implicit)}function Wn(r,m){if(1&r){const s=t.RV6();t.j41(0,"nz-alert",9),t.bIt("nzOnClose",function(){g.eBV(s);const f=t.XpG();return g.Njj(f.onSuccessBannerClose())}),t.k0s()}if(2&r){const s=t.XpG();t.Y8G("nzMessage",t.VkB("Revision(s) successfully ",s.success,"."))}}function Qn(r,m){if(1&r&&t.nrm(0,"cvc-comment-body",15),2&r){const s=t.XpG(2).$implicit;t.Y8G("commentBodySegments",s.openActivity.parsedNote)}}function Kn(r,m){if(1&r&&(t.qex(0),t.nrm(1,"cvc-flag-resolve-form",16),t.bVm()),2&r){const s=t.XpG(2).$implicit,d=t.XpG(2);t.R7$(),t.Y8G("flag",s)("flagResolvedCallback",d.flagResolvedCallback)}}function gn(r,m){if(1&r&&(t.qex(0),t.nrm(1,"cvc-comment-body",15),t.bVm()),2&r){const s=t.XpG(3).$implicit;t.R7$(),t.Y8G("commentBodySegments",s.resolutionActivity.parsedNote)}}function Jn(r,m){if(1&r&&t.nrm(0,"cvc-user-tag",21),2&r){const s=t.XpG(3).$implicit;t.Y8G("user",s.resolutionActivity.user)}}function Zn(r,m){if(1&r&&(t.j41(0,"nz-row")(1,"nz-col",17),t.DNE(2,gn,2,1,"ng-container",18),t.k0s(),t.j41(3,"nz-col",19),t.EFF(4," Resolved By "),t.DNE(5,Jn,1,1,"cvc-user-tag",20),t.EFF(6),t.nI1(7,"timeAgo"),t.k0s()()),2&r){const s=t.XpG(2).$implicit;t.R7$(2),t.Y8G("ngIf",s.resolutionActivity),t.R7$(3),t.Y8G("ngIf",void 0!==s.resolutionActivity),t.R7$(),t.SpI(" ",t.bMT(7,3,null==s.resolutionActivity?null:s.resolutionActivity.createdAt)," ")}}function wn(r,m){if(1&r&&(t.nrm(0,"i",22),t.nI1(1,"entityColor"),t.EFF(2)),2&r){const s=t.XpG(2).$implicit;t.Y8G("nzTwotoneColor",t.bMT(1,2,"Flag")),t.R7$(2),t.SpI(" FID",s.id," ")}}function qn(r,m){if(1&r&&(t.j41(0,"span")(1,"span",26),t.EFF(2,"Flagged By"),t.k0s(),t.nrm(3,"cvc-user-tag",21),t.j41(4,"span",26),t.EFF(5),t.nI1(6,"timeAgo"),t.k0s()()),2&r){const s=t.XpG(3).$implicit;t.R7$(3),t.Y8G("user",s.openActivity.user),t.R7$(2),t.JRh(t.bMT(6,2,s.openActivity.createdAt))}}function mn(r,m){if(1&r&&t.nrm(0,"cvc-status-tag",27),2&r){const s=t.XpG(3).$implicit;t.Y8G("status",s.state)}}function rn(r,m){1&r&&(t.j41(0,"nz-space",23),t.DNE(1,qn,7,4,"span",24)(2,mn,1,1,"cvc-status-tag",25),t.k0s())}function dn(r,m){if(1&r&&(t.j41(0,"nz-card",13),t.DNE(1,Qn,1,1,"cvc-comment-body",14),t.nrm(2,"nz-divider"),t.DNE(3,Kn,2,2,"ng-container",7)(4,Zn,8,5,"ng-template",null,1,t.C5r)(6,wn,3,4,"ng-template",null,2,t.C5r)(8,rn,3,0,"ng-template",null,3,t.C5r),t.k0s()),2&r){const s=t.sdS(5),d=t.sdS(7),f=t.sdS(9),E=t.XpG().$implicit;t.Y8G("nzTitle",d)("nzExtra",f),t.R7$(),t.Y8G("ngIf",E.openActivity),t.R7$(2),t.Y8G("ngIf","OPEN"==E.state)("ngIfElse",s)}}function un(r,m){1&r&&(t.qex(0),t.DNE(1,dn,10,5,"nz-card",12),t.bVm())}function nt(r,m){if(1&r&&(t.qex(0),t.j41(1,"nz-space",10),t.DNE(2,un,2,0,"ng-container",11),t.k0s(),t.bVm()),2&r){const s=t.XpG();t.R7$(2),t.Y8G("ngForOf",s.flags)}}function tt(r,m){1&r&&t.nrm(0,"nz-empty",28)}let et=(()=>{class r{constructor(s){this.viewerService=s,this.isLoading=!1,this.success=!1,this.destroy$=new fn.B}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(s=>{this.mostRecentOrg=s.mostRecentOrg})}setupMutationResultHandlers(s,d){s.submitSuccess$.pipe((0,J.Q)(this.destroy$)).subscribe(f=>{f&&(this.isLoading=!1,this.errors=void 0,this.success=d)}),s.submitError$.pipe((0,J.Q)(this.destroy$)).subscribe(f=>{f.length>0&&(this.isLoading=!1,this.success=!1,this.errors=f)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(s){this.errors=this.errors?.filter(d=>d!=s)}onSuccessBannerClose(){this.success=!1}static#n=this.\u0275fac=function(d){return new(d||r)(t.rXU(B.q))};static#t=this.\u0275cmp=t.VBU({type:r,selectors:[["cvc-flag-list"]],inputs:{flags:"flags",flagResolvedCallback:"flagResolvedCallback"},standalone:!1,decls:6,vars:4,consts:[["noFlags",""],["flagResolved",""],["flagCardHeaderTitle",""],["flagCardHeaderExtra",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],["nzTitle","Flags",1,"card-list"],[4,"ngIf","ngIfElse"],["nzBanner","","nzType","error","nzCloseable","",3,"nzOnClose","nzMessage"],["nzBanner","","nzType","success","nzCloseable","",3,"nzOnClose","nzMessage"],["nzDirection","vertical"],[4,"ngFor","ngForOf"],["nzType","inner",3,"nzTitle","nzExtra",4,"nzSpaceItem"],["nzType","inner",3,"nzTitle","nzExtra"],[3,"commentBodySegments",4,"ngIf"],[3,"commentBodySegments"],[3,"flag","flagResolvedCallback"],["nzSpan","16"],[4,"ngIf"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"user"],["nz-icon","","nzTheme","twotone","nzType","civic-flag",3,"nzTwotoneColor"],["nzSize","small"],[4,"nzSpaceItem"],[3,"status",4,"nzSpaceItem"],["nz-typography","","nzType","secondary"],[3,"status"],["nzNotFoundImage","simple","nzNotFoundContent","No Flags matching filters"]],template:function(d,f){if(1&d&&(t.DNE(0,Hn,1,1,"nz-alert",4)(1,Wn,1,2,"nz-alert",5),t.j41(2,"nz-card",6),t.DNE(3,nt,3,1,"ng-container",7)(4,tt,1,0,"ng-template",null,0,t.C5r),t.k0s()),2&d){const E=t.sdS(5);t.Y8G("ngForOf",f.errors),t.R7$(),t.Y8G("ngIf",f.success),t.R7$(2),t.Y8G("ngIf",f.flags&&f.flags.length>0)("ngIfElse",E)}},dependencies:[T.Sq,T.bT,O.Uq,O.e,k.cK,A.U5,A.Dq,vn.Di,zn.RW,Cn.j,pn.Dn,hn.r,Rn.g,j.c,y.Y,an,Bn.p,kn.R,Un.N],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]})}return r})();var it=o(9365),ot=o(29438);const ln=()=>[];function st(r,m){if(1&r&&(t.nrm(0,"cvc-flag-list",14),t.nI1(1,"ngrxPush")),2&r){const s=t.XpG(2);t.Y8G("flags",t.bMT(1,2,s.flags$)||t.lJ4(4,ln))("flagResolvedCallback",s.refresh)}}function at(r,m){if(1&r){const s=t.RV6();t.j41(0,"button",17),t.bIt("click",function(){g.eBV(s);const f=t.XpG(2).ngrxLet,E=t.XpG(2);return g.Njj(E.loadMore(null==f?null:f.endCursor))}),t.EFF(1," Load More "),t.k0s()}}function rt(r,m){1&r&&(t.qex(0),t.DNE(1,at,2,0,"button",16),t.bVm())}function lt(r,m){if(1&r&&(t.qex(0),t.DNE(1,rt,2,0,"ng-container",15),t.bVm()),2&r){const s=m.ngrxLet;t.R7$(),t.Y8G("ngIf",s&&(null==s?null:s.hasNextPage)&&s.endCursor)}}function ct(r,m){if(1&r&&t.nrm(0,"cvc-flag-add-form",18),2&r){const s=t.XpG(2);t.Y8G("flaggable",s.flaggable)("flagAddedCallback",s.refresh)}}function _t(r,m){if(1&r&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&r){const s=m.$implicit;t.R7$(),t.JRh(s.displayName)}}function pt(r,m){if(1&r){const s=t.RV6();t.j41(0,"cvc-participant-list",19),t.bIt("participantSelectedEvent",function(f){g.eBV(s);const E=t.XpG(2);return g.Njj(E.onStateSelected(f))}),t.DNE(1,_t,2,1,"ng-template",null,1,t.C5r),t.k0s()}if(2&r){const s=t.XpG(2);t.Y8G("preselectedOption",s.selectableStates[0])("participantList",s.selectableStates)}}function gt(r,m){if(1&r&&t.nrm(0,"nz-avatar",22),2&r){const s=t.XpG().$implicit;t.Y8G("nzSrc",s.profileImagePath)}}function mt(r,m){if(1&r&&(t.nrm(0,"nz-avatar",23),t.nI1(1,"uppercase")),2&r){const s=t.XpG().$implicit;t.Y8G("nzText",t.bMT(1,1,s.username.charAt(0)))}}function dt(r,m){if(1&r&&(t.DNE(0,gt,1,1,"nz-avatar",21)(1,mt,2,3,"ng-template",null,2,t.C5r),t.j41(3,"span"),t.EFF(4),t.k0s()),2&r){const s=m.$implicit,d=t.sdS(2);t.Y8G("ngIf",s.profileImagePath)("ngIfElse",d),t.R7$(4),t.JRh(s.username)}}function ut(r,m){if(1&r){const s=t.RV6();t.j41(0,"cvc-participant-list",20),t.nI1(1,"ngrxPush"),t.bIt("participantSelectedEvent",function(f){g.eBV(s);const E=t.XpG(2);return g.Njj(E.onFlaggingUsersSelected(f))}),t.DNE(2,dt,5,3,"ng-template",null,1,t.C5r),t.k0s()}if(2&r){const s=t.XpG(2);t.Y8G("participantList",t.bMT(1,1,s.uniqueFlaggingUsers$)||t.lJ4(3,ln))}}function ft(r,m){if(1&r&&t.nrm(0,"nz-avatar",22),2&r){const s=t.XpG().$implicit;t.Y8G("nzSrc",s.profileImagePath)}}function vt(r,m){if(1&r&&(t.nrm(0,"nz-avatar",23),t.nI1(1,"uppercase")),2&r){const s=t.XpG().$implicit;t.Y8G("nzText",t.bMT(1,1,s.username.charAt(0)))}}function zt(r,m){if(1&r&&(t.DNE(0,ft,1,1,"nz-avatar",21)(1,vt,2,3,"ng-template",null,2,t.C5r),t.j41(3,"span"),t.EFF(4),t.k0s()),2&r){const s=m.$implicit,d=t.sdS(2);t.Y8G("ngIf",s.profileImagePath)("ngIfElse",d),t.R7$(4),t.JRh(s.username)}}function Ct(r,m){if(1&r){const s=t.RV6();t.j41(0,"cvc-participant-list",24),t.nI1(1,"ngrxPush"),t.bIt("participantSelectedEvent",function(f){g.eBV(s);const E=t.XpG(2);return g.Njj(E.onResolvingUsersSelected(f))}),t.DNE(2,zt,5,3,"ng-template",null,1,t.C5r),t.k0s()}if(2&r){const s=t.XpG(2);t.Y8G("participantList",t.bMT(1,1,s.uniqueResolvingUsers$)||t.lJ4(3,ln))}}function ht(r,m){if(1&r&&(t.qex(0),t.j41(1,"nz-row",4)(2,"nz-col",5)(3,"nz-space",6),t.DNE(4,st,2,5,"cvc-flag-list",7)(5,lt,2,1,"ng-container",8)(6,ct,1,2,"cvc-flag-add-form",9),t.k0s()(),t.j41(7,"nz-col",10)(8,"nz-space",6),t.DNE(9,pt,3,2,"cvc-participant-list",11)(10,ut,4,4,"cvc-participant-list",12)(11,Ct,4,4,"cvc-participant-list",13),t.k0s()()(),t.bVm()),2&r){const s=t.XpG();t.R7$(),t.Y8G("nzGutter",16),t.R7$(4),t.Y8G("ngrxLet",s.pageInfo$)}}function Rt(r,m){if(1&r&&t.nrm(0,"cvc-flag-add-form",18),2&r){const s=t.XpG();t.Y8G("flaggable",s.flaggable)("flagAddedCallback",s.refresh)}}let Tt=(()=>{class r{constructor(s){this.gql=s,this.onFlagsUpdated=(0,l.CGW)(),this.defaultPageSize=5,this.selectableStates=[{id:1,displayName:"Open",value:c.Qfy.Open},{id:2,displayName:"Resolved",value:c.Qfy.Resolved}]}ngOnInit(){if(null==this.flaggable)throw new Error("Must pass a flaggable into flag list");this.queryRef=this.gql.watch({first:this.defaultPageSize,flaggable:this.flaggable,state:c.Qfy.Open}),this.refresh=()=>{this.queryRef.refetch(),this.onFlagsUpdated.emit()},this.results$=this.queryRef.valueChanges,this.flags$=this.results$.pipe((0,n.E)("data","flags","edges"),(0,I.p)(u.kP),(0,h.T)(s=>s.map(d=>d.node))),this.pageInfo$=this.results$.pipe((0,n.E)("data","flags","pageInfo")),this.unfilteredCount$=this.results$.pipe((0,n.E)("data","flags","unfilteredCountForSubject")),this.uniqueFlaggingUsers$=this.results$.pipe((0,h.T)(({data:s})=>s.flags?.uniqueFlaggingUsers)),this.uniqueResolvingUsers$=this.results$.pipe((0,h.T)(({data:s})=>s.flags?.uniqueResolvingUsers))}onFlaggingUsersSelected(s){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},flaggingUserId:s?s.id:void 0})}onResolvingUsersSelected(s){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},resolvingUserId:s?s.id:void 0})}onStateSelected(s){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},state:s?s.value:void 0})}loadMore(s){this.queryRef?.fetchMore({variables:{first:this.defaultPageSize,after:s}})}static#n=this.\u0275fac=function(d){return new(d||r)(t.rXU(c.HnF))};static#t=this.\u0275cmp=t.VBU({type:r,selectors:[["cvc-flag-list-and-filter"]],inputs:{flaggable:"flaggable"},outputs:{onFlagsUpdated:"onFlagsUpdated"},standalone:!1,decls:4,vars:4,consts:[["noFlags",""],["itemTemplate",""],["noAvatar",""],[4,"ngIf","ngIfElse"],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"flags","flagResolvedCallback",4,"nzSpaceItem"],[4,"ngrxLet"],[3,"flaggable","flagAddedCallback",4,"nzSpaceItem"],["nzSpan","6"],["listTitle","Flag State",3,"preselectedOption","participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Flagging Users",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Resolving Users",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],[3,"flags","flagResolvedCallback"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[3,"flaggable","flagAddedCallback"],["listTitle","Flag State",3,"participantSelectedEvent","preselectedOption","participantList"],["listTitle","Flagging Users",3,"participantSelectedEvent","participantList"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["listTitle","Resolving Users",3,"participantSelectedEvent","participantList"]],template:function(d,f){if(1&d&&(t.DNE(0,ht,12,2,"ng-container",3),t.nI1(1,"ngrxPush"),t.DNE(2,Rt,1,2,"ng-template",null,0,t.C5r)),2&d){const E=t.sdS(3);t.Y8G("ngIf",t.bMT(1,2,f.unfilteredCount$))("ngIfElse",E)}},dependencies:[T.bT,b.Nj,G.a,j.c,F.p,O.Uq,O.e,R,et,it.T,ot.PM,A.U5,A.Dq,T.Pc,b.L9],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]})}return r})()}}]);