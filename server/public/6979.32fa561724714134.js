"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[6979],{5749:(U,y,n)=>{n.d(y,{m:()=>N});var t=n(5e3),E=n(9808),d=n(325),P=n(8481),O=n(3610),A=n(4850),f=n(712),T=n(7484),D=n(7881),h=n(1894),M=n(3098),v=n(6550),u=n(6949);const z=function(e,_){return{displayName:e,profileImagePath:_}};function R(e,_){if(1&e&&(t._UZ(0,"cvc-user-avatar",12),t.TgZ(1,"span",13),t._uU(2),t.qZA()),2&e){const o=t.oxw().ngIf;t.Q6J("user",t.WLB(2,z,o.name,o.profileImagePath)),t.xp6(2),t.Oqu(o.name)}}function B(e,_){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const o=_.ngIf;t.xp6(1),t.Oqu(o)}}function p(e,_){if(1&e&&(t.ynx(0),t.TgZ(1,"cvc-link-tag",14),t._uU(2),t.qZA(),t.BQk()),2&e){const o=t.oxw().ngIf;t.xp6(1),t.Q6J("href",o.url),t.xp6(1),t.hij(" ",o.name," ")}}function x(e,_){if(1&e&&(t.ynx(0),t.TgZ(1,"nz-card",4),t.YNc(2,R,3,5,"ng-template",null,5,t.W1O),t.TgZ(4,"nz-row"),t.TgZ(5,"nz-col",6),t.TgZ(6,"div",7),t.TgZ(7,"p",8),t.YNc(8,B,2,1,"span",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"nz-descriptions",10),t.TgZ(10,"nz-descriptions-item",11),t.YNc(11,p,3,2,"ng-container",9),t.qZA(),t.qZA(),t.qZA(),t.BQk()),2&e){const o=_.ngIf,I=t.MAs(3);t.oxw();const L=t.MAs(4),Y=t.MAs(6);t.xp6(1),t.Q6J("nzTitle",I),t.xp6(7),t.Q6J("ngIf",o.description)("ngIfElse",L),t.xp6(1),t.Q6J("nzColumn",2),t.xp6(2),t.Q6J("ngIf",o.url)("ngIfElse",Y)}}function r(e,_){1&e&&t._uU(0," Organization has not provided a description.\n")}function l(e,_){1&e&&t._uU(0," --\n")}let a=(()=>{class e{constructor(o){this.gql=o}ngOnInit(){if(void 0===this.orgId)throw new Error("cvc-org-popover requires orgId input.");this.org$=this.gql.watch({orgId:this.orgId}).valueChanges.pipe((0,A.U)(({data:o})=>o.organization))}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(f.X5f))},e.\u0275cmp=t.Xpm({type:e,selectors:[["cvc-organization-popover"]],inputs:{orgId:"orgId"},decls:7,vars:3,consts:[["id","popover-content"],[4,"ngIf"],["noDesc",""],["noHomepage",""],["nzBordered","false","id","card-content",3,"nzTitle"],["cardTitle",""],["nzSpan","24"],[1,"popover-text"],["nz-typography",""],[4,"ngIf","ngIfElse"],["nzSize","small","nzBordered","true",3,"nzColumn"],["nzTitle","Homepage"],["size","default",3,"user"],["nz-typography","","nzStyle","default",1,"display-name"],[3,"href"]],template:function(o,I){1&o&&(t.TgZ(0,"div",0),t.YNc(1,x,12,6,"ng-container",1),t.ALo(2,"ngrxPush"),t.qZA(),t.YNc(3,r,1,0,"ng-template",null,2,t.W1O),t.YNc(5,l,1,0,"ng-template",null,3,t.W1O)),2&o&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,I.org$)))},directives:[E.O5,T.bd,D.L,h.SK,h.t3,M.R7,M.uj,v.l],pipes:[u.fM],styles:["[_nghost-%COMP%]{display:block;margin:-8px -12px}[_nghost-%COMP%]     .ant-card-body{padding:0;margin-top:1px}[_nghost-%COMP%]     .ant-descriptions-view{border:none}[_nghost-%COMP%]     #entity-child-counts{border-top:1px solid #f0f0f0;padding:8px}[_nghost-%COMP%]     #entity-child-counts nz-space{width:100%}[_nghost-%COMP%]     #entity-child-counts nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     #entity-child-counts nz-space-item:last-child nz-tag{margin-right:0}.popover-text[_ngcontent-%COMP%]{width:100%;padding:8px;border-bottom:1px solid #f0f0f0}#popover-content[_ngcontent-%COMP%]{min-width:350px;max-width:500px;min-height:125px}"]}),e})();var i=n(647);function m(e,_){}function s(e,_){if(1&e&&(t.ynx(0),t.TgZ(1,"a",5),t.YNc(2,m,0,0,"ng-template",6),t.qZA(),t.BQk()),2&e){const o=t.oxw(),I=t.MAs(2);t.xp6(1),t.MGl("routerLink","/organizations/",o.org.id,""),t.xp6(1),t.Q6J("ngTemplateOutlet",I)}}function g(e,_){}function c(e,_){if(1&e&&t._UZ(0,"cvc-organization-popover",10),2&e){const o=t.oxw(3);t.Q6J("orgId",o.org.id)}}function C(e,_){if(1&e&&t.YNc(0,c,1,1,"cvc-organization-popover",9),2&e){const o=t.oxw(2);t.Q6J("ngIf",o.enablePopover)}}function Z(e,_){if(1&e&&(t.TgZ(0,"nz-tag",7),t.YNc(1,g,0,0,"ng-template",6),t.qZA(),t.YNc(2,C,1,1,"ng-template",null,8,t.W1O)),2&e){const o=t.MAs(3);t.oxw();const I=t.MAs(8);t.Q6J("nzPopoverContent",o),t.xp6(1),t.Q6J("ngTemplateOutlet",I)}}function W(e,_){}function b(e,_){if(1&e&&(t.TgZ(0,"nz-tag"),t.YNc(1,W,0,0,"ng-template",6),t.qZA()),2&e){t.oxw();const o=t.MAs(8);t.xp6(1),t.Q6J("ngTemplateOutlet",o)}}function S(e,_){}function K(e,_){if(1&e&&t.YNc(0,S,0,0,"ng-template",6),2&e){t.oxw();const o=t.MAs(2);t.Q6J("ngTemplateOutlet",o)}}function Q(e,_){if(1&e&&(t._UZ(0,"i",11),t._uU(1)),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.org.name,"\n")}}let N=(()=>{class e{constructor(){this.linked=!0,this.enablePopover=!0}ngOnInit(){if(void 0===this.org)throw new Error("cvc-org-tag requires valid TagLinkableOrganization input, none provided.")}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["cvc-organization-tag"]],inputs:{org:"org",linked:"linked",enablePopover:"enablePopover"},decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["tag",""],["noPopover",""],["unlinked",""],["tagContent",""],[3,"routerLink"],[3,"ngTemplateOutlet"],["nz-popover","",3,"nzPopoverContent"],["orgPopover",""],[3,"orgId",4,"ngIf"],[3,"orgId"],["nz-icon","","nzType","civic-organization","nzTheme","twotone","nzTwotoneColor","#58A0C4"]],template:function(o,I){if(1&o&&(t.YNc(0,s,3,2,"ng-container",0),t.YNc(1,Z,4,2,"ng-template",null,1,t.W1O),t.YNc(3,b,2,1,"ng-template",null,2,t.W1O),t.YNc(5,K,1,1,"ng-template",null,3,t.W1O),t.YNc(7,Q,2,1,"ng-template",null,4,t.W1O)),2&o){const L=t.MAs(6);t.Q6J("ngIf",I.linked)("ngIfElse",L)}},directives:[E.O5,d.yS,E.tP,P.j,O.lU,a,i.Ls],styles:["[_nghost-%COMP%]{display:inline-block}"]}),e})()},8766:(U,y,n)=>{n.d(y,{P:()=>M});var t=n(9808),E=n(6042),d=n(6949),P=n(404),O=n(7525),A=n(6904),f=n(3075),T=n(1894),D=n(8144),h=n(5e3);let M=(()=>{class v{}return v.\u0275fac=function(z){return new(z||v)},v.\u0275mod=h.oAB({type:v}),v.\u0275inj=h.cJS({imports:[[t.ez,f.u5,f.UX,E.sL,P.cg,O.j,D.zf,T.Jb,d.WG,A.A]]}),v})()},3997:(U,y,n)=>{n.d(y,{m:()=>B});var t=n(5e3),E=n(6123),d=n(712),P=n(8929),O=n(7625),A=n(9169),f=n(7525),T=n(8144),D=n(7815),h=n(6874),M=n(6042),v=n(2643),u=n(2683);function z(p,x){if(1&p){const r=t.EpF();t.TgZ(0,"cvc-org-selector-btn-group",5),t.NdJ("selectedOrgChange",function(a){return t.CHM(r),t.oxw().mostRecentOrg=a}),t.TgZ(1,"button",6),t.NdJ("click",function(){t.CHM(r);const a=t.oxw();return a.moderate(a.evidenceStatuses.Accepted)}),t._uU(2),t.qZA(),t.qZA()}if(2&p){const r=t.oxw();t.Q6J("selectedOrg",r.mostRecentOrg),t.xp6(2),t.hij("Accept ",r.entityType,"")}}function R(p,x){if(1&p){const r=t.EpF();t.TgZ(0,"cvc-org-selector-btn-group",7),t.NdJ("selectedOrgChange",function(a){return t.CHM(r),t.oxw().mostRecentOrg=a}),t.TgZ(1,"button",8),t.NdJ("click",function(){t.CHM(r);const a=t.oxw();return a.moderate(a.evidenceStatuses.Rejected)}),t._uU(2),t.qZA(),t.qZA()}if(2&p){const r=t.oxw();t.Q6J("selectedOrg",r.mostRecentOrg),t.xp6(2),t.hij("Reject ",r.entityType,"")}}let B=(()=>{class p{constructor(r,l,a){this.revertEvidenceGQL=r,this.revertAssertionGQL=l,this.networkErrorService=a,this.onModerated=new t.vpe,this.evidenceStatuses=d.RTy,this.isSubmitting=!1,this.showConfirm=!1,this.destroy$=new P.xQ,this.moderateAssertionMutator=new E.U(a),this.moderateEvidenceMutator=new E.U(a)}moderate(r){var l,a;let i;this.isSubmitting=!0,i="EvidenceItem"===this.entityType?this.moderateEvidenceMutator.mutate(this.revertEvidenceGQL,{input:{evidenceItemId:this.entityId,organizationId:null===(l=this.mostRecentOrg)||void 0===l?void 0:l.id,newStatus:r}}):this.moderateAssertionMutator.mutate(this.revertAssertionGQL,{input:{assertionId:this.entityId,organizationId:null===(a=this.mostRecentOrg)||void 0===a?void 0:a.id,newStatus:r}}),i.submitSuccess$.pipe((0,O.R)(this.destroy$)).subscribe(m=>{m&&(this.isSubmitting=!1,this.showConfirm=!1,this.onModerated.emit(r))}),i.submitError$.pipe((0,O.R)(this.destroy$)).subscribe(m=>{m&&(this.isSubmitting=!1,this.showConfirm=!1,this.onModerated.emit(m))}),i.isSubmitting$.pipe((0,O.R)(this.destroy$)).subscribe(m=>{this.isSubmitting=m})}ngOnInit(){if(void 0===this.viewer)throw new Error("Must pass in a viewer to the CvcEntitySubscriptionButtonComponent");if(void 0===this.entityId)throw new Error("Must pass in an id to the CvcEntitySubscriptionButtonComponent");if(void 0===this.entityType)throw new Error("Must pass in an entityType to the CvcEntitySubscriptionButtonComponent");this.mostRecentOrg=this.viewer.mostRecentOrg}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return p.\u0275fac=function(r){return new(r||p)(t.Y36(d.MYm),t.Y36(d._jb),t.Y36(A.Y))},p.\u0275cmp=t.Xpm({type:p,selectors:[["cvc-moderate-entity-buttons"]],inputs:{viewer:"viewer",entityType:"entityType",entityId:"entityId"},outputs:{onModerated:"onModerated"},decls:5,vars:1,consts:[[1,"center"],[3,"nzSpinning"],["nzDirection","horizontal","nzSize","large"],[3,"selectedOrg","selectedOrgChange",4,"nzSpaceItem"],["nzDanger","","nzType","primary",3,"selectedOrg","selectedOrgChange",4,"nzSpaceItem"],[3,"selectedOrg","selectedOrgChange"],["cvcOrgSelectorBtn","","nzType","primary","nzSize","large","nz-button","",3,"click"],["nzDanger","","nzType","primary",3,"selectedOrg","selectedOrgChange"],["cvcOrgSelectorBtn","","nzDanger","","nzType","primary","nzSize","large","nz-button","",3,"click"]],template:function(r,l){1&r&&(t.TgZ(0,"div",0),t.TgZ(1,"nz-spin",1),t.TgZ(2,"nz-space",2),t.YNc(3,z,3,2,"cvc-org-selector-btn-group",3),t.YNc(4,R,3,2,"cvc-org-selector-btn-group",4),t.qZA(),t.qZA(),t.qZA()),2&r&&(t.xp6(1),t.Q6J("nzSpinning",l.isSubmitting))},directives:[f.W,T.NU,T.$1,D.q,h.m,M.ix,v.dQ,u.w],styles:["[_nghost-%COMP%]{display:block}.center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),p})()},8525:(U,y,n)=>{n.d(y,{e:()=>a});var t=n(5e3),E=n(6123),d=n(712),P=n(8929),O=n(7625),A=n(9169),f=n(6042),T=n(2643),D=n(2683),h=n(404),M=n(647),v=n(3640),u=n(7525),z=n(8144),R=n(7815),B=n(6874);function p(i,m){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const s=t.oxw();t.xp6(1),t.hij("Revert this ",s.entityType," to Submitted?")}}function x(i,m){if(1&i){const s=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"cvc-org-selector-btn-group",8),t.NdJ("selectedOrgChange",function(c){return t.CHM(s),t.oxw(2).mostRecentOrg=c}),t.TgZ(2,"button",9),t.NdJ("click",function(){return t.CHM(s),t.oxw(2).revert()}),t._uU(3,"Revert"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const s=t.oxw(2);t.xp6(1),t.Q6J("selectedOrg",s.mostRecentOrg)}}function r(i,m){if(1&i){const s=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",10),t.NdJ("click",function(){return t.CHM(s),t.oxw(2).showConfirm=!1}),t._uU(2,"Cancel"),t.qZA(),t.qZA()}}function l(i,m){if(1&i&&(t.TgZ(0,"nz-spin",5),t.TgZ(1,"nz-space",6),t.YNc(2,x,4,1,"span",7),t.YNc(3,r,3,0,"span",7),t.qZA(),t.qZA()),2&i){const s=t.oxw();t.Q6J("nzSpinning",s.isSubmitting)}}let a=(()=>{class i{constructor(s,g,c){this.revertEvidenceGQL=s,this.revertAssertionGQL=g,this.networkErrorService=c,this.onReverted=new t.vpe,this.isSubmitting=!1,this.showConfirm=!1,this.destroy$=new P.xQ,this.revertAssertionMutator=new E.U(c),this.revertEvidenceMutator=new E.U(c)}revert(){var s,g;let c;this.isSubmitting=!0,c="EvidenceItem"===this.entityType?this.revertEvidenceMutator.mutate(this.revertEvidenceGQL,{input:{evidenceItemId:this.entityId,organizationId:null===(s=this.mostRecentOrg)||void 0===s?void 0:s.id,newStatus:d.RTy.Submitted}}):this.revertAssertionMutator.mutate(this.revertAssertionGQL,{input:{assertionId:this.entityId,organizationId:null===(g=this.mostRecentOrg)||void 0===g?void 0:g.id,newStatus:d.RTy.Submitted}}),c.submitSuccess$.pipe((0,O.R)(this.destroy$)).subscribe(C=>{C&&(this.isSubmitting=!1,this.showConfirm=!1,this.onReverted.emit(!0))}),c.submitError$.pipe((0,O.R)(this.destroy$)).subscribe(C=>{C&&(this.isSubmitting=!1,this.showConfirm=!1,this.onReverted.emit(C))}),c.isSubmitting$.pipe((0,O.R)(this.destroy$)).subscribe(C=>{this.isSubmitting=C})}handleConfirmModalCancel(){this.showConfirm=!1}ngOnInit(){if(void 0===this.viewer)throw new Error("Must pass in a viewer to the CvcEntitySubscriptionButtonComponent");if(void 0===this.entityId)throw new Error("Must pass in an id to the CvcEntitySubscriptionButtonComponent");if(void 0===this.entityType)throw new Error("Must pass in an entityType to the CvcEntitySubscriptionButtonComponent");this.mostRecentOrg=this.viewer.mostRecentOrg}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(s){return new(s||i)(t.Y36(d.MYm),t.Y36(d._jb),t.Y36(A.Y))},i.\u0275cmp=t.Xpm({type:i,selectors:[["cvc-revert-entity-button"]],inputs:{viewer:"viewer",entityType:"entityType",entityId:"entityId"},outputs:{onReverted:"onReverted"},decls:7,vars:5,consts:[["nz-button","","nz-tooltip","Revert to Submitted","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","undo"],[3,"nzVisible","nzContent","nzTitle","nzFooter","nzVisibleChange","nzOnCancel"],["confirmModalTitle",""],["confirmModalContent",""],[3,"nzSpinning"],["nzDirection","horizontal"],[4,"nzSpaceItem"],[3,"selectedOrg","selectedOrgChange"],["cvcOrgSelectorBtn","","nzType","primary","nzSize","small","nz-button","",3,"click"],["nz-button","","nzSize","small",3,"click"]],template:function(s,g){if(1&s&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return g.showConfirm=!0}),t._UZ(1,"i",1),t.qZA(),t.TgZ(2,"nz-modal",2),t.NdJ("nzVisibleChange",function(C){return g.showConfirm=C})("nzOnCancel",function(){return g.handleConfirmModalCancel()}),t.YNc(3,p,2,1,"ng-template",null,3,t.W1O),t.YNc(5,l,4,1,"ng-template",null,4,t.W1O),t.qZA()),2&s){const c=t.MAs(4),C=t.MAs(6);t.Q6J("nzLoading",g.isSubmitting),t.xp6(2),t.Q6J("nzVisible",g.showConfirm)("nzContent",C)("nzTitle",c)("nzFooter",null)}},directives:[f.ix,T.dQ,D.w,h.SY,M.Ls,v.du,u.W,z.NU,z.$1,R.q,B.m],styles:["[_nghost-%COMP%]{display:block}"]}),i})()},694:(U,y,n)=>{n.d(y,{G:()=>v});var t=n(9808),E=n(6042),d=n(6949),P=n(647),O=n(404),A=n(3640),f=n(7525),T=n(8144),D=n(6904),h=n(3075),M=n(5e3);let v=(()=>{class u{}return u.\u0275fac=function(R){return new(R||u)},u.\u0275mod=M.oAB({type:u}),u.\u0275inj=M.cJS({imports:[[t.ez,h.u5,h.UX,E.sL,P.PV,O.cg,A.Qp,f.j,T.zf,d.WG,D.A]]}),u})()}}]);