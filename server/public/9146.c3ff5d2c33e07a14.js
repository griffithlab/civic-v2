"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[9146],{1790:(q,U,e)=>{e.r(U),e.d(U,{AssertionsModule:()=>b});var p=e(72200),z=e(38132),n=e(7391),i=e(3062),c=e(97529),o=e(17481),v=e(97660),m=e(41951),P=e(14124),I=e(50513),R=e(97685),g=e(64917),s=e(73664),O=e(2615);let x=(()=>{var T;class S{static#t=T=()=>(this.\u0275fac=function(l){return new(l||S)},this.\u0275mod=s.$C({type:S}),this.\u0275inj=O.G2t({imports:[p.MD,z.iI,m.Y3,n.kT,i.ZJ,c.f3,o.$,I.Z,R.pc,g.i,v.u,P.C]}))}return T(),S})();var V=e(41305),Q=e(61774),a=e(16389),k=e(25930),H=e(14441),tt=e(29765),B=e(83075);function $(T,S){1&T&&(s.j41(0,"button",17),s.nrm(1,"i",18),s.EFF(2," Submit New Assertion "),s.k0s())}function D(T,S){if(1&T&&(s.qex(0),s.DNE(1,$,3,0,"button",16),s.bVm()),2&T){const rt=S.ngrxLet;s.R7$(),s.Y8G("ngIf",rt.signedIn)}}function N(T,S){if(1&T&&s.DNE(0,D,2,1,"ng-container",15),2&T){const rt=s.XpG();s.Y8G("ngrxLet",rt.viewer$)}}function E(T,S){1&T&&(s.j41(0,"a",19),s.nrm(1,"i",20),s.EFF(2," View Assertion Model Docs "),s.k0s())}function w(T,S){1&T&&(s.j41(0,"a",21),s.nrm(1,"i",20),s.EFF(2," View Assertion Curation Docs "),s.k0s())}let y=(()=>{var T;class S{constructor(et){this.viewerService=et,this.viewer$=this.viewerService.viewer$}ngOnInit(){}static#t=T=()=>(this.\u0275fac=function(l){return new(l||S)(s.rXU(V.q))},this.\u0275cmp=s.VBU({type:S,selectors:[["assertions-home"]],standalone:!1,decls:22,vars:6,consts:[["assertionActions",""],[3,"actionsTpl"],[1,"site-page-header"],[1,"header-content"],["nzFlex","64px",1,"header-icon"],["nz-icon","","nzTheme","twotone","nzType","civic-assertion",3,"nzTwotoneColor"],["nzFlex","0 1 600px",1,"header-description"],["nz-typography","","nzEllipsis","","nzExpandable","",3,"nzEllipsisRows"],["nzFlex","auto",1,"header-links"],["nzDirection","vertical",1,"docs-buttons"],["nz-button","","href","https://civic.readthedocs.io/en/latest/model/assertions.html","target","_blank","nzSize","small","nzBlock","",4,"nzSpaceItem"],["nz-button","","href","https://civic.readthedocs.io/en/latest/curating/assertions.html","target","_blank","nzSize","small","nzBlock","",4,"nzSpaceItem"],[3,"nzSpan"],[1,"content"],["cvcTitle","Browse All Assertions"],[4,"ngrxLet"],["routerLink","/assertions/add/submit","nz-button","","nzSize","small",4,"ngIf"],["routerLink","/assertions/add/submit","nz-button","","nzSize","small"],["nz-icon","","nzType","plus-circle"],["nz-button","","href","https://civic.readthedocs.io/en/latest/model/assertions.html","target","_blank","nzSize","small","nzBlock",""],["nz-icon","","nzType","link","nzTheme","outline"],["nz-button","","href","https://civic.readthedocs.io/en/latest/curating/assertions.html","target","_blank","nzSize","small","nzBlock",""]],template:function(l,_){if(1&l&&(s.nrm(0,"cvc-section-navigation",1),s.DNE(1,N,1,1,"ng-template",null,0,s.C5r),s.j41(3,"nz-page-header",2)(4,"nz-page-header-content")(5,"nz-row",3)(6,"nz-col",4),s.nrm(7,"i",5),s.nI1(8,"entityColor"),s.k0s(),s.j41(9,"nz-col",6)(10,"h2"),s.EFF(11,"Assertions"),s.k0s(),s.j41(12,"p",7),s.EFF(13," A CIViC Assertion summarizes a collection of Evidence Items that cover predictive/therapeutic, diagnostic, prognostic or predisposing clinical information for a variant in a specific cancer context. "),s.k0s()(),s.j41(14,"nz-col",8)(15,"nz-space",9),s.DNE(16,E,3,0,"a",10)(17,w,3,0,"a",11),s.k0s()()(),s.j41(18,"nz-row")(19,"nz-col",12)(20,"div",13),s.nrm(21,"cvc-assertions-table",14),s.k0s()()()()()),2&l){const d=s.sdS(2);s.Y8G("actionsTpl",d),s.R7$(7),s.Y8G("nzTwotoneColor",s.bMT(8,4,"Assertion")),s.R7$(5),s.Y8G("nzEllipsisRows",2),s.R7$(7),s.Y8G("nzSpan",24)}},dependencies:[p.bT,Q.Nj,z.Wk,m.Dn,n.Di,i.WB,i.zR,c.Uq,c.e,I.a,a.c,k.p,R.U5,R.Dq,H.z,tt.n,B.R],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}))}return T(),S})();var L=e(56609);const W=[{path:"",component:(()=>{var T;class S{constructor(){}static#t=T=()=>(this.\u0275fac=function(l){return new(l||S)},this.\u0275cmp=s.VBU({type:S,selectors:[["app-assertions"]],standalone:!1,decls:1,vars:0,template:function(l,_){1&l&&s.nrm(0,"router-outlet")},dependencies:[L.n3],encapsulation:2}))}return T(),S})(),children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:y,data:{breadcrumb:"Home"}},{path:"add",loadChildren:()=>e.e(7032).then(e.bind(e,47032)).then(T=>T.AssertionAddModule),data:{breadcrumb:"Add"}},{path:":assertionId",data:{breadcrumb:"DISPLAYNAME"},children:[{path:"",loadChildren:()=>Promise.all([e.e(8414),e.e(6161),e.e(262),e.e(1467),e.e(9991),e.e(3243)]).then(e.bind(e,33243)).then(T=>T.AssertionsDetailModule)},{path:"revise",loadChildren:()=>Promise.resolve().then(e.bind(e,74753)).then(T=>T.AssertionsReviseModule),data:{breadcrumb:"Revise"}}]}]},{path:"revise",loadChildren:()=>e.e(7032).then(e.bind(e,47032)).then(T=>T.AssertionAddModule)}];let K=(()=>{var T;class S{static#t=T=()=>(this.\u0275fac=function(l){return new(l||S)},this.\u0275mod=s.$C({type:S}),this.\u0275inj=O.G2t({imports:[z.iI.forChild(W),x,z.iI]}))}return T(),S})();var Z=e(74753),at=e(82242),pt=e(80746);let Y=(()=>{var T;class S{static#t=T=()=>(this.\u0275fac=function(l){return new(l||S)},this.\u0275mod=s.$C({type:S}),this.\u0275inj=O.G2t({imports:[p.MD,pt.J,at.i]}))}return T(),S})(),b=(()=>{var T;class S{static#t=T=()=>(this.\u0275fac=function(l){return new(l||S)},this.\u0275mod=s.$C({type:S}),this.\u0275inj=O.G2t({imports:[p.MD,K,Z.AssertionsReviseModule,Y]}))}return T(),S})()},9215:(q,U,e)=>{e.d(U,{c:()=>n});var p=e(55152),z=e(73664);let n=(()=>{var i;class c{transform(v,m){return void 0!==v&&(0,p.S9)(v,m)}static#t=i=()=>(this.\u0275fac=function(m){return new(m||c)},this.\u0275pipe=z.EJ8({name:"canCreateApproval",type:c,pure:!0}))}return i(),c})()},17481:(q,U,e)=>{e.d(U,{$:()=>$,u:()=>B});var p=e(31635),z=e(75250),n=e(61577),i=e(10438),c=e(2615),o=e(73664),v=e(17705),m=e(89079),P=e(84341),I=e(66376),R=e(57806),g=e(25701),s=e(25930),O=e(41951);const x=["switchElement"];function V(D,N){1&D&&o.nrm(0,"nz-icon",3)}function Q(D,N){if(1&D&&(o.qex(0),o.EFF(1),o.bVm()),2&D){const E=o.XpG(2);o.R7$(),o.JRh(E.nzCheckedChildren)}}function a(D,N){if(1&D&&o.DNE(0,Q,2,1,"ng-container",6),2&D){const E=o.XpG();o.Y8G("nzStringTemplateOutlet",E.nzCheckedChildren)}}function k(D,N){if(1&D&&(o.qex(0),o.EFF(1),o.bVm()),2&D){const E=o.XpG(2);o.R7$(),o.JRh(E.nzUnCheckedChildren)}}function H(D,N){if(1&D&&o.DNE(0,k,2,1,"ng-container",6),2&D){const E=o.XpG();o.Y8G("nzStringTemplateOutlet",E.nzUnCheckedChildren)}}let B=(()=>{let D,N=[],E=[];return class _t{_nzModuleName="switch";nzConfigService=(0,c.WQX)(I.yx);el=(0,c.WQX)(o.aKT).nativeElement;ngZone=(0,c.WQX)(o.SKi);cdr=(0,c.WQX)(v.gRc);focusMonitor=(0,c.WQX)(z.FN);directionality=(0,c.WQX)(n.dS);destroyRef=(0,c.WQX)(c.abz);isChecked=!1;onChange=()=>{};onTouched=()=>{};switchElement;nzLoading=!1;nzDisabled=!1;nzControl=!1;nzCheckedChildren=null;nzUnCheckedChildren=null;nzSize=(0,p.zF)(this,N,"default");nzId=((0,p.zF)(this,E),null);dir="ltr";isNzDisableFirstChange=!0;updateValue(y){this.isChecked!==y&&(this.isChecked=y,this.onChange(this.isChecked))}focus(){this.focusMonitor.focusVia(this.switchElement.nativeElement,"keyboard")}blur(){this.switchElement.nativeElement.blur()}constructor(){this.destroyRef.onDestroy(()=>{this.focusMonitor.stopMonitoring(this.switchElement.nativeElement)})}ngOnInit(){this.directionality.change.pipe((0,m.pQ)(this.destroyRef)).subscribe(y=>{this.dir=y,this.cdr.detectChanges()}),this.dir=this.directionality.value,(0,g.wN)(this.el,"click").pipe((0,m.pQ)(this.destroyRef)).subscribe(y=>{y.preventDefault(),!(this.nzControl||this.nzDisabled||this.nzLoading)&&this.ngZone.run(()=>{this.updateValue(!this.isChecked),this.cdr.markForCheck()})}),(0,g.wN)(this.switchElement.nativeElement,"keydown").pipe((0,m.pQ)(this.destroyRef)).subscribe(y=>{if(this.nzControl||this.nzDisabled||this.nzLoading)return;const{keyCode:L}=y;L!==i.UQ&&L!==i.LE&&L!==i.t6&&L!==i.Fm||(y.preventDefault(),this.ngZone.run(()=>{L===i.UQ?this.updateValue(!1):L===i.LE?this.updateValue(!0):(L===i.t6||L===i.Fm)&&this.updateValue(!this.isChecked),this.cdr.markForCheck()}))})}ngAfterViewInit(){this.focusMonitor.monitor(this.switchElement.nativeElement,!0).pipe((0,m.pQ)(this.destroyRef)).subscribe(y=>{y||Promise.resolve().then(()=>this.onTouched())})}writeValue(y){this.isChecked=y,this.cdr.markForCheck()}registerOnChange(y){this.onChange=y}registerOnTouched(y){this.onTouched=y}setDisabledState(y){this.nzDisabled=this.isNzDisableFirstChange&&this.nzDisabled||y,this.isNzDisableFirstChange=!1,this.cdr.markForCheck()}static \u0275fac=((()=>{const y="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;D=[(0,I.H4)()],(0,p.G4)(null,null,D,{kind:"field",name:"nzSize",static:!1,private:!1,access:{has:L=>"nzSize"in L,get:L=>L.nzSize,set:(L,t)=>{L.nzSize=t}},metadata:y},N,E),y&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:y})})(),function(L){return new(L||_t)});static \u0275cmp=o.VBU({type:_t,selectors:[["nz-switch"]],viewQuery:function(L,t){if(1&L&&o.GBs(x,7),2&L){let W;o.mGM(W=o.lsd())&&(t.switchElement=W.first)}},inputs:{nzLoading:[2,"nzLoading","nzLoading",v.L39],nzDisabled:[2,"nzDisabled","nzDisabled",v.L39],nzControl:[2,"nzControl","nzControl",v.L39],nzCheckedChildren:"nzCheckedChildren",nzUnCheckedChildren:"nzUnCheckedChildren",nzSize:"nzSize",nzId:"nzId"},exportAs:["nzSwitch"],features:[o.Jv_([{provide:P.kq,useExisting:(0,c.Rfq)(()=>_t),multi:!0}])],decls:8,vars:15,consts:[["switchElement",""],["nz-wave","","type","button",1,"ant-switch",3,"disabled","nzWaveExtraNode"],[1,"ant-switch-handle"],["nzType","loading",1,"ant-switch-loading-icon"],[1,"ant-switch-inner"],[1,"ant-click-animating-node"],[4,"nzStringTemplateOutlet"]],template:function(L,t){1&L&&(o.j41(0,"button",1,0)(2,"span",2),o.nVh(3,V,1,0,"nz-icon",3),o.k0s(),o.j41(4,"span",4),o.nVh(5,a,1,1,"ng-container")(6,H,1,1,"ng-container"),o.k0s(),o.nrm(7,"div",5),o.k0s()),2&L&&(o.AVh("ant-switch-checked",t.isChecked)("ant-switch-loading",t.nzLoading)("ant-switch-disabled",t.nzDisabled)("ant-switch-small","small"===t.nzSize)("ant-switch-rtl","rtl"===t.dir),o.Y8G("disabled",t.nzDisabled)("nzWaveExtraNode",!0),o.BMQ("id",t.nzId),o.R7$(3),o.vxM(t.nzLoading?3:-1),o.R7$(2),o.vxM(t.isChecked?5:6))},dependencies:[s.o7,s.p,O.Y3,O.Dn,R.C,R.m],encapsulation:2,changeDetection:0})}})(),$=(()=>{class D{static \u0275fac=function(w){return new(w||D)};static \u0275mod=o.$C({type:D});static \u0275inj=c.G2t({imports:[B]})}return D})()},21653:(q,U,e)=>{e.d(U,{$h:()=>i,Mw:()=>z,fR:()=>n});var p=e(25741);function z(c){return{acmgCodeIds:c.acmgCodes.map(o=>o.id),ampLevel:c.ampLevel,assertionDirection:c.assertionDirection,assertionType:c.assertionType,clingenCodeIds:c.clingenCodes.map(o=>o.id),significance:c.significance,description:c.description,diseaseId:c.disease?.id,therapyIds:c.therapies.map(o=>o.id),therapyInteractionType:c.therapyInteractionType,evidenceItemIds:c.evidenceItems.map(o=>o.id),fdaCompanionTest:c.fdaCompanionTest,fdaRegulatoryApproval:c.regulatoryApproval,molecularProfileId:c.molecularProfile.id,nccnGuidelineId:c.nccnGuideline?.id,nccnGuidelineVersion:c.nccnGuidelineVersion,phenotypeIds:c.phenotypes.map(o=>o.id),summary:c.summary,variantOrigin:c.variantOrigin}}function n(c){const o=c.fields;if(![o.assertionDirection,o.assertionType,o.significance,o.variantOrigin,o.molecularProfileId,c.comment].find(m=>void 0===m))return{fields:{acmgCodeIds:o.acmgCodeIds||[],ampLevel:p.pz(o.ampLevel),assertionDirection:o.assertionDirection,assertionType:o.assertionType,clingenCodeIds:o.clingenCodeIds||[],significance:o.significance,description:p.q2(o.description),diseaseId:p.pz(o.diseaseId),therapyIds:o.therapyIds||[],therapyInteractionType:p.pz(o.therapyInteractionType),evidenceItemIds:o.evidenceItemIds||[],fdaCompanionTest:p.pz(o.fdaCompanionTest),fdaRegulatoryApproval:p.pz(o.fdaRegulatoryApproval),molecularProfileId:o.molecularProfileId,nccnGuidelineId:p.pz(o.nccnGuidelineId),nccnGuidelineVersion:p.q2(o.nccnGuidelineVersion),phenotypeIds:o.phenotypeIds||[],summary:p.q2(o.summary),variantOrigin:o.variantOrigin},organizationId:c.organizationId,comment:c.comment}}function i(c,o){let v=n(o);if(v)return{id:c,comment:v.comment,organizationId:v.organizationId,fields:v.fields}}},25128:(q,U,e)=>{e.d(U,{K:()=>I});var p=e(72200),z=e(56506),n=e(73664),i=e(84341),c=e(21011);const v={name:"comment-textarea",component:(()=>{var R;class g extends z.PU{constructor(){super(...arguments),this.defaultOptions={defaultValue:"",validation:{messages:{minlength:(O,x)=>`Comments must be at least ${x.templateOptions?.minLength} characters in length.`}},templateOptions:{rows:4}}}static#t=R=()=>(this.\u0275fac=(()=>{let O;return function(V){return(O||(O=n.xGo(g)))(V||g)}})(),this.\u0275cmp=n.VBU({type:g,selectors:[["comment-textarea-type"]],standalone:!1,features:[n.Vt3],decls:1,vars:2,consts:[["nz-input","",3,"formControl","formlyAttributes"]],template:function(x,V){1&x&&n.nrm(0,"textarea",0),2&x&&n.Y8G("formControl",V.formControl)("formlyAttributes",V.field)},dependencies:[i.me,i.BC,i.l_,z.cU,c.Sy],encapsulation:2,changeDetection:0}))}return R(),g})(),wrappers:["form-field"]};var m=e(38927),P=e(2615);let I=(()=>{var R;class g{static#t=R=()=>(this.\u0275fac=function(x){return new(x||g)},this.\u0275mod=n.$C({type:g}),this.\u0275inj=P.G2t({imports:[p.MD,i.X1,z.qy.forChild({types:[v]}),m.PQ,c.j]}))}return R(),g})()},28134:(q,U,e)=>{e.d(U,{l:()=>a});var p=e(72200),z=e(38132),n=e(1236),i=e(75699),c=e(41951),o=e(47086),v=e(22142),m=e(51209),P=e(64917),I=e(25703),R=e(62e3),g=e(38415),s=e(27556),O=e(73664),x=e(2615);let V=(()=>{var k;class H{static#t=k=()=>(this.\u0275fac=function($){return new($||H)},this.\u0275mod=O.$C({type:H}),this.\u0275inj=x.G2t({imports:[p.MD,I.Ti,R.WF,c.Y3,m.k,o.C,v.x,P.i,g.g,s.F]}))}return k(),H})();var Q=e(34994);let a=(()=>{var k;class H{static#t=k=()=>(this.\u0275fac=function($){return new($||H)},this.\u0275mod=O.$C({type:H}),this.\u0275inj=x.G2t({imports:[p.MD,z.iI,n.MC,i.T,c.Y3,V,P.i,Q.a]}))}return k(),H})()},35493:(q,U,e)=>{e.d(U,{G:()=>s});var p=e(72200),z=e(38132),n=e(75699),i=e(25703),c=e(37054),o=e(62e3),v=e(41951),m=e(64917),P=e(73664),I=e(2615);let R=(()=>{var O;class x{static#t=O=()=>(this.\u0275fac=function(a){return new(a||x)},this.\u0275mod=P.$C({type:x}),this.\u0275inj=I.G2t({imports:[p.MD,v.Y3,i.Ti,o.WF,m.i,c.L]}))}return O(),x})();var g=e(1236);let s=(()=>{var O;class x{static#t=O=()=>(this.\u0275fac=function(a){return new(a||x)},this.\u0275mod=P.$C({type:x}),this.\u0275inj=I.G2t({imports:[p.MD,z.iI,v.Y3,n.T,g.MC,R]}))}return O(),x})()},39045:(q,U,e)=>{e.d(U,{J:()=>tt});var p=e(40505),z=e(1236),n=e(2615),i=e(73664),c=e(72200),o=e(38132),v=e(75699),m=e(41951),P=e(88011),I=e(12387),R=e(83075);const g=(B,$,D)=>({rejected:B,submitted:$,accepted:D});function s(B,$){}function O(B,$){if(1&B&&(i.qex(0),i.j41(1,"a",5),i.DNE(2,s,0,0,"ng-template",6),i.k0s(),i.bVm()),2&B){const D=i.XpG(),N=i.sdS(2);i.R7$(),i.Y8G("routerLink",D.evidence.link),i.R7$(),i.Y8G("ngTemplateOutlet",N)}}function x(B,$){}function V(B,$){if(1&B){const D=i.RV6();i.j41(0,"cvc-evidence-popover",8),i.bIt("contentRendered",function(){n.eBV(D);const E=i.XpG(2);return n.Njj(E.updatePopoverPosition())}),i.k0s()}if(2&B){const D=i.XpG(2);i.Y8G("evidenceId",D.evidence.id)}}function Q(B,$){if(1&B&&(i.j41(0,"nz-tag",7),i.DNE(1,x,0,0,"ng-template",6),i.k0s(),i.DNE(2,V,1,1,"ng-template",null,3,i.C5r)),2&B){const D=i.sdS(3),N=i.XpG(),E=i.sdS(6);i.Y8G("ngClass",i.sMw(5,g,"REJECTED"===N.evidence.status,"SUBMITTED"===N.evidence.status,"ACCEPTED"===N.evidence.status))("nzPopoverPlacement",N.popoverPlacement)("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",N.enablePopover?D:void 0),i.R7$(),i.Y8G("ngTemplateOutlet",E)}}function a(B,$){}function k(B,$){if(1&B&&i.DNE(0,a,0,0,"ng-template",6),2&B){i.XpG();const D=i.sdS(2);i.Y8G("ngTemplateOutlet",D)}}function H(B,$){if(1&B&&(i.j41(0,"cvc-icon-badges",9),i.nrm(1,"i",10),i.nI1(2,"entityColor"),i.nI1(3,"entityColor"),i.k0s(),i.EFF(4)),2&B){const D=i.XpG();i.Y8G("flagged",D.evidence.flagged)("entityColor",D.iconColor),i.R7$(),i.Y8G("nzTwotoneColor","REJECTED"===D.evidence.status?i.bMT(2,4,"Rejected"):i.bMT(3,6,"EvidenceItem")),i.R7$(3),i.SpI(" ",D.evidence.name,"\n")}}let tt=(()=>{var B;class ${set evidence(N){if(!N)throw new Error("cvc-evidence-tag evidence input requires LinkableEvidence.");this._evidence=N}get evidence(){return this._evidence}constructor(){this.linked=!0,this.enablePopover=!0,this.popoverPlacement="top",this.iconColor=(0,p.P)("EvidenceItem")}idFunction(){return this.evidence.id}updatePopoverPosition(){this.popover&&this.popover.updatePosition()}ngAfterViewInit(){this.popoverList.length>0?this.popover=this.popoverList.first:console.warn("NzPopoverDirective not found in tag view")}static#t=B=()=>(this.\u0275fac=function(E){return new(E||$)},this.\u0275cmp=i.VBU({type:$,selectors:[["cvc-evidence-tag"]],viewQuery:function(E,w){if(1&E&&i.GBs(z.L_,5),2&E){let y;i.mGM(y=i.lsd())&&(w.popoverList=y)}},inputs:{evidence:"evidence",linked:"linked",enablePopover:"enablePopover",popoverPlacement:"popoverPlacement"},standalone:!1,decls:7,vars:2,consts:[["tag",""],["unlinked",""],["tagContent",""],["popoverContent",""],[4,"ngIf","ngIfElse"],[3,"routerLink"],[3,"ngTemplateOutlet"],["nz-popover","",3,"ngClass","nzPopoverPlacement","nzPopoverMouseEnterDelay","nzPopoverContent"],[3,"contentRendered","evidenceId"],[3,"flagged","entityColor"],["nz-icon","","nzType","civic-evidence","nzTheme","twotone",3,"nzTwotoneColor"]],template:function(E,w){if(1&E&&i.DNE(0,O,3,2,"ng-container",4)(1,Q,4,9,"ng-template",null,0,i.C5r)(3,k,1,1,"ng-template",null,1,i.C5r)(5,H,5,8,"ng-template",null,2,i.C5r),2&E){const y=i.sdS(4);i.Y8G("ngIf",w.linked)("ngIfElse",y)}},dependencies:[c.YU,c.bT,c.T3,o.Wk,v.s,z.L_,m.Dn,P.S,I.N,R.R],styles:["[_nghost-%COMP%]     nz-tag.rejected, [_nghost-%COMP%]     nz-tag.submitted, [_nghost-%COMP%]     nz-tag.accepted, [_nghost-%COMP%]     nz-tag.deprecated{border-right-width:2px}[_nghost-%COMP%]     nz-tag.rejected, [_nghost-%COMP%]     nz-tag.deprecated{border-color:#e6e6e6;background-color:#fff;color:#999999d9}[_nghost-%COMP%]     nz-tag.submitted{border-color:#ffe58f}[_nghost-%COMP%]     nz-tag.accepted{border-color:#b7eb8f}[_nghost-%COMP%]{display:inline-block}"],changeDetection:0}))}return B(),$})()},43176:(q,U,e)=>{e.d(U,{l:()=>n});var p=e(55152),z=e(73664);let n=(()=>{var i;class c{transform(v,m,P,I){if(void 0!==v){if("create"===m)return this.getCreateTooltip(v,P);{const R=P.approvals.nodes.find(g=>g.id===I);if(void 0!==R){if("revoke"===m)return this.getRevokeTooltip(v,R);if("approveChanges"===m)return this.getApproveChangesTooltip(v,R)}}}}getCreateTooltip(v,m){if(v.mostRecentOrg){if((0,p.S9)(v,m))return`Approve the Classification of ${m.name} under the authority of ${v.mostRecentOrg.name}`;if(!(0,p.Ti)(m))return`${m.name} must be accepted and unflagged to be approved.`;if(!(0,p.nM)(v)){let P=`Your organization, ${v.mostRecentOrg.name}, does not have approval authority.`;const I=(0,p.tT)(v,m);return I&&I.length>0&&(P+=` You may switch to ${I[0].name}, which does have approval authority, to approve this assertion.`),P}if((0,p.kg)(v,m)){let P=`${m.name} has already been approved by ${v.mostRecentOrg.name}.`;const I=(0,p.tT)(v,m);return I&&I.length>0&&(P+=` You may switch to ${I[0].name}, which also has approval authority and no current approvals.`),P}}}getRevokeTooltip(v,m){if((0,p.Sc)(v,m))return`Revoke approval of ${m.assertion.name} under the authority of ${m.organization.name}.`;if(!(0,p.MF)(v))return"You do not have privileges to perform approval actions.";if(!(0,p._y)(m))return"Only live approvals may be revoked.";if(!(0,p._s)(v,m)){let P=`${m.assertion.name} may only be revoked by a ${m.organization.name} editor with approval privileges.`;return(0,p.vx)(v,m)&&(P+=" As you are a member, you may switch your organization and revoke this approval."),P}}getApproveChangesTooltip(v,m){if((0,p.RL)(v,m))return`Approve changes to ${m.assertion.name} under the authority of ${m.organization.name}.`;if(!(0,p.MF)(v))return"You do not have permission to perform approval actions.";if(!(0,p._y)(m))return"Only approvals under review have changes that may be approved.";if(!(0,p.Ti)(m.assertion)){let P=`${m.assertion.name} must be accepted and unflagged for its changes to be approved.`;return m.assertion.flags.totalCount>0&&(P+=` Resolve active flag${m.assertion.flags.totalCount>1?"s":""} to approve changes.`),P}if(!(0,p._s)(v,m)){let P=`Changes to ${m.assertion.name} may only be approved under the authority of ${m.organization.name}.`;return(0,p.vx)(v,m)&&(P+=" As you are a member, may switch your organization and approve changes to this assertion."),P}}static#t=i=()=>(this.\u0275fac=function(m){return new(m||c)},this.\u0275pipe=z.EJ8({name:"approvalActionTooltip",type:c,pure:!0}))}return i(),c})()},55152:(q,U,e)=>{function p(g){return void 0!==g&&void 0!==g.mostRecentOrg&&g.signedIn&&g.canModerate&&g.approvableOrgIds.length>0}function z(g){return"ACTIVE"===g.status||"REQUIRES_REVIEW"===g.status}function n(g){return"ACCEPTED"===g.status&&0===g.flags.totalCount}function i(g){return void 0!==g.mostRecentOrg&&g.approvableOrgIds.includes(g.mostRecentOrg.id)}function c(g,s){return g.mostRecentOrg?.id===s.organization.id}function o(g,s){return p(g)&&z(s)&&n(s.assertion)&&c(g,s)}function v(g,s){return p(g)&&z(s)&&c(g,s)}function m(g,s){return!!(p(g)&&i(g)&&n(s))&&!s.approvals.nodes.some(O=>o(g,O))}function P(g,s){return s.approvals.nodes.some(O=>o(g,O))}function I(g,s){const O=g.mostRecentOrg?.id,x=g.approvableOrgIds.filter(a=>a!==O);if(0===x.length)return;const V=s.approvals.nodes.filter(z),Q=g.user?.organizations.filter(a=>{const k=V.every(H=>H.organization.id!==a.id);return x.includes(a.id)&&k});return Q&&Q.length>0?Q:void 0}function R(g,s){const O=g.approvableOrgIds.find(x=>x!==s.organization.id);if(O)return g.user?.organizations.find(x=>x.id===O)}e.d(U,{MF:()=>p,RL:()=>o,S9:()=>m,Sc:()=>v,Ti:()=>n,_s:()=>c,_y:()=>z,kg:()=>P,nM:()=>i,tT:()=>I,vx:()=>R})},58238:(q,U,e)=>{e.d(U,{S:()=>et});var p=e(40505),z=e(1236),n=e(73664),i=e(2615),c=e(72200),o=e(38132),v=e(75699),m=e(41951),P=e(69199),I=e(96354),R=e(5964),g=e(69145),s=e(25703),O=e(62e3),x=e(69062),V=e(90959),Q=e(77855),a=e(38415),k=e(32033),H=e(61774),tt=e(83075);function B(l,_){if(1&l&&(n.nrm(0,"i",11),n.nI1(1,"entityColor"),n.EFF(2)),2&l){const d=n.XpG().ngIf;n.Y8G("nzTwotoneColor",n.bMT(1,2,"VariantGroup")),n.R7$(2),n.SpI(" ",d.name," ")}}function $(l,_){if(1&l&&n.nrm(0,"cvc-entity-child-counts",12),2&l){const d=n.XpG().ngIf;n.Y8G("cvcEntity",d)}}function D(l,_){if(1&l&&n.EFF(0),2&l){const d=n.XpG().ngIf;n.SpI(" ",d.description," ")}}function N(l,_){1&l&&n.nrm(0,"cvc-empty-value",7)}function E(l,_){if(1&l&&n.nrm(0,"cvc-feature-variant-tag",15),2&l){const d=_.$implicit;n.Y8G("enablePopover",!1)("variant",d.node)}}function w(l,_){if(1&l&&(n.j41(0,"nz-descriptions-item",13)(1,"cvc-tag-list"),n.DNE(2,E,1,2,"cvc-feature-variant-tag",14),n.k0s()()),2&l){const d=n.XpG().ngIf;n.R7$(2),n.Y8G("ngForOf",d.variants.edges)}}function y(l,_){if(1&l&&n.nrm(0,"cvc-source-tag",18),2&l){const d=_.$implicit;n.Y8G("enablePopover",!1)("source",d)}}function L(l,_){if(1&l&&(n.j41(0,"nz-descriptions-item",16)(1,"cvc-tag-list"),n.DNE(2,y,1,2,"cvc-source-tag",17),n.k0s()()),2&l){const d=n.XpG().ngIf;n.R7$(2),n.Y8G("ngForOf",d.sources)}}function t(l,_){if(1&l&&(n.qex(0),n.j41(1,"nz-card",4),n.DNE(2,B,3,4,"ng-template",null,0,n.C5r)(4,$,1,1,"ng-template",null,1,n.C5r),n.j41(6,"nz-descriptions",5)(7,"nz-descriptions-item",6),n.nVh(8,D,1,1)(9,N,1,0,"cvc-empty-value",7),n.k0s()(),n.j41(10,"nz-descriptions",8),n.DNE(11,w,3,1,"nz-descriptions-item",9)(12,L,3,1,"nz-descriptions-item",10),n.k0s()(),n.bVm()),2&l){const d=_.ngIf,f=n.sdS(3),A=n.sdS(5);n.R7$(),n.Y8G("nzTitle",f)("nzExtra",A),n.R7$(5),n.Y8G("nzColumn",1),n.R7$(2),n.vxM(d.description?8:9),n.R7$(2),n.Y8G("nzColumn",2),n.R7$(),n.Y8G("ngIf",d.variants.edges.length>0),n.R7$(),n.Y8G("ngIf",d.sources.length>0)}}let W=(()=>{var l;class _{constructor(f,A){this.gql=f,this.elementRef=A,this.contentRendered=new n.bkB,this.resizeObserver=new ResizeObserver(()=>{this.contentRendered.emit()})}ngOnInit(){this.variantGroup$=this.gql.watch({variantGroupId:this.variantGroupId}).valueChanges.pipe((0,I.T)(({data:f})=>f?.variantGroup),(0,R.p)(P.kP))}ngAfterViewInit(){this.resizeObserver.observe(this.elementRef.nativeElement)}ngOnDestroy(){this.resizeObserver.disconnect()}static#t=l=()=>(this.\u0275fac=function(A){return new(A||_)(n.rXU(g.gwr),n.rXU(n.aKT))},this.\u0275cmp=n.VBU({type:_,selectors:[["cvc-variant-group-popover"]],inputs:{variantGroupId:"variantGroupId"},outputs:{contentRendered:"contentRendered"},standalone:!1,decls:3,vars:3,consts:[["cardTitle",""],["cardExtra",""],["id","popover-content"],[4,"ngIf"],["nzBordered","false","id","card-content",3,"nzTitle","nzExtra"],["nzLayout","vertical","nzBordered","","nzSize","small",3,"nzColumn"],["nzTitle","Description"],["cvcEmptyCategory","unspecified"],["nzSize","small","nzBordered","true",3,"nzColumn"],["nzTitle","Variants","nzSpan","2",4,"ngIf"],["nzTitle","Sources","nzSpan","2",4,"ngIf"],["nz-icon","","nzTheme","twotone","nzType","civic-variantgroup",3,"nzTwotoneColor"],["cvcRoute","variant-groups",3,"cvcEntity"],["nzTitle","Variants","nzSpan","2"],[3,"enablePopover","variant",4,"ngFor","ngForOf"],[3,"enablePopover","variant"],["nzTitle","Sources","nzSpan","2"],[3,"enablePopover","source",4,"ngFor","ngForOf"],[3,"enablePopover","source"]],template:function(A,ot){1&A&&(n.j41(0,"div",2),n.DNE(1,t,13,7,"ng-container",3),n.nI1(2,"ngrxPush"),n.k0s()),2&A&&(n.R7$(),n.Y8G("ngIf",n.bMT(2,1,ot.variantGroup$)))},dependencies:[c.Sq,c.bT,s.cK,O.xA,O.gr,m.Dn,x.D,V.j,Q.M,a.g,k.o,H.L9,tt.R],styles:["[_nghost-%COMP%]{display:block;margin:-8px -12px}[_nghost-%COMP%]     .ant-card-body{padding:0;margin-top:1px}[_nghost-%COMP%]     .ant-descriptions-view{border:none;border-top:1px solid #f0f0f0}.popover-text[_ngcontent-%COMP%]{width:100%;padding:8px;border-bottom:1px solid #f0f0f0}#popover-content[_ngcontent-%COMP%]{max-width:500px;max-height:700px;overflow:auto}[_nghost-%COMP%]     nz-descriptions[nzLayout=horizontal] .ant-descriptions-item-label{text-align:right}[_nghost-%COMP%]     nz-descriptions .ant-descriptions-item-label{font-weight:550}[_nghost-%COMP%]     nz-descriptions .ant-descriptions-header{margin-top:4px;margin-bottom:4px;padding-left:8px}[_nghost-%COMP%]     nz-descriptions .ant-descriptions-title{font-weight:500;color:#00000073;font-size:12px}[_nghost-%COMP%]     nz-descriptions .ant-descriptions-item-content p:last-of-type{margin-bottom:0}#popover-content[_ngcontent-%COMP%]{min-width:400px;min-height:100px}"]}))}return l(),_})();var K=e(12387);function Z(l,_){}function at(l,_){if(1&l&&(n.qex(0),n.j41(1,"a",5),n.DNE(2,Z,0,0,"ng-template",6),n.k0s(),n.bVm()),2&l){const d=n.XpG(),f=n.sdS(2);n.R7$(),n.Y8G("routerLink",d.variantgroup.link),n.R7$(),n.Y8G("ngTemplateOutlet",f)}}function pt(l,_){}function Y(l,_){if(1&l){const d=n.RV6();n.j41(0,"cvc-variant-group-popover",8),n.bIt("contentRendered",function(){i.eBV(d);const A=n.XpG(2);return i.Njj(A.updatePopoverPosition())}),n.k0s()}if(2&l){const d=n.XpG(2);n.Y8G("variantGroupId",d.variantgroup.id)}}function b(l,_){if(1&l&&(n.j41(0,"nz-tag",7),n.DNE(1,pt,0,0,"ng-template",6),n.k0s(),n.DNE(2,Y,1,1,"ng-template",null,3,n.C5r)),2&l){const d=n.sdS(3),f=n.XpG(),A=n.sdS(6);n.Y8G("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",f.enablePopover?d:void 0)("nzPopoverPlacement",f.popoverPlacement),n.R7$(),n.Y8G("ngTemplateOutlet",A)}}function T(l,_){}function S(l,_){if(1&l&&n.DNE(0,T,0,0,"ng-template",6),2&l){n.XpG();const d=n.sdS(2);n.Y8G("ngTemplateOutlet",d)}}function rt(l,_){if(1&l&&(n.j41(0,"cvc-icon-badges",9),n.nrm(1,"i",10),n.nI1(2,"entityColor"),n.k0s(),n.EFF(3)),2&l){const d=n.XpG();n.Y8G("flagged",d.variantgroup.flagged)("entityColor",d.iconColor),n.R7$(),n.Y8G("nzTwotoneColor",n.bMT(2,4,"VariantGroup")),n.R7$(2),n.SpI(" ",d.variantgroup.name,"\n")}}let et=(()=>{var l;class _{constructor(){this.linked=!0,this.enablePopover=!0,this.popoverPlacement="top",this.iconColor=(0,p.P)("VariantGroup")}updatePopoverPosition(){this.popover&&this.popover.updatePosition()}ngAfterViewInit(){this.popoverList.length>0&&(this.popover=this.popoverList.first)}static#t=l=()=>(this.\u0275fac=function(A){return new(A||_)},this.\u0275cmp=n.VBU({type:_,selectors:[["cvc-variant-group-tag"]],viewQuery:function(A,ot){if(1&A&&n.GBs(z.L_,5),2&A){let st;n.mGM(st=n.lsd())&&(ot.popoverList=st)}},inputs:{variantgroup:"variantgroup",linked:"linked",enablePopover:"enablePopover",popoverPlacement:"popoverPlacement"},standalone:!1,decls:7,vars:2,consts:[["tag",""],["unlinked",""],["tagContent",""],["popoverContent",""],[4,"ngIf","ngIfElse"],[3,"routerLink"],[3,"ngTemplateOutlet"],["nz-popover","",3,"nzPopoverMouseEnterDelay","nzPopoverContent","nzPopoverPlacement"],[3,"contentRendered","variantGroupId"],[3,"flagged","entityColor"],["nz-icon","","nzType","civic-variantgroup","nzTheme","twotone",3,"nzTwotoneColor"]],template:function(A,ot){if(1&A&&n.DNE(0,at,3,2,"ng-container",4)(1,b,4,4,"ng-template",null,0,n.C5r)(3,S,1,1,"ng-template",null,1,n.C5r)(5,rt,4,6,"ng-template",null,2,n.C5r),2&A){const st=n.sdS(4);n.Y8G("ngIf",ot.linked)("ngIfElse",st)}},dependencies:[c.bT,c.T3,o.Wk,z.L_,v.s,m.Dn,W,K.N,tt.R],encapsulation:2,changeDetection:0}))}return l(),_})()},62382:(q,U,e)=>{e.d(U,{P:()=>et});var D,p=e(31635),z=e(72200),n=e(17705),i=e(2615),c=e(59295),o=e(89079),v=e(84341),m=e(71226),P=e(49894),I=e(50513),R=e(19448),g=e(41951),s=e(21011),O=e(52096),x=e(97685),V=e(1177),Q=e(35154),a=e(73664),k=e(69145),H=e(74222),tt=e(41305),B=e(16389),$=e(25930);const N=["approveModalContent"],E=["revokeModalContent"],w=["approveChangesModalContent"],y=["modalTitle"],L=["modalFooter"];function t(l,_){if(1&l){const d=a.RV6();a.j41(0,"button",6),a.bIt("click",function(){i.eBV(d);const A=a.XpG();return i.Njj(A.createModal())}),a.nrm(1,"i",7),a.EFF(2),a.k0s()}if(2&l){const d=a.XpG(),f=a.r8f(0);a.Y8G("nzType",f.type)("nzSize",f.size)("disabled",f.disabled)("nzDanger",f.danger)("nzBlock","block"===f.display)("nzLoading",d.isSubmitting())("nzTooltipTitle",f.tooltipText),a.R7$(),a.Y8G("nzType",f.icon),a.R7$(),a.SpI(" ",f.label," ")}}function W(l,_){1&l&&a.EFF(0," Approve This Assertion's Classification ")}function K(l,_){1&l&&a.EFF(0," Revoke This Assertion's Classification Approval ")}function Z(l,_){1&l&&a.EFF(0," Approve Changes to This Assertion ")}function at(l,_){if(1&l&&a.nVh(0,W,1,0)(1,K,1,0)(2,Z,1,0),2&l){const d=a.XpG();a.vxM("approve"===d.mode()?0:"revoke"===d.mode()?1:"approveChanges"===d.mode()?2:-1)}}function pt(l,_){if(1&l&&(a.j41(0,"nz-spin",8)(1,"span"),a.EFF(2," You are about to formally "),a.j41(3,"strong"),a.EFF(4),a.k0s(),a.EFF(5,". Are you sure you wish to proceed? "),a.k0s()()),2&l){let d;const f=a.XpG();a.Y8G("nzSpinning",f.isSubmitting()),a.R7$(4),a.SpI(" Approve this Assertion's Classification on behalf of ",null==(d=f.mostRecentOrg())?null:d.name," ")}}function Y(l,_){if(1&l){const d=a.RV6();a.j41(0,"nz-spin",8)(1,"span"),a.EFF(2," You are about to formally "),a.j41(3,"strong"),a.EFF(4),a.k0s(),a.EFF(5,". Are you sure you wish to proceed? "),a.k0s(),a.nrm(6,"nz-divider",9),a.j41(7,"textarea",10),a.mxI("ngModelChange",function(A){i.eBV(d);const ot=a.XpG();return a.DH7(ot.revocationComment,A)||(ot.revocationComment=A),i.Njj(A)}),a.k0s()()}if(2&l){let d;const f=a.XpG();a.Y8G("nzSpinning",f.isSubmitting()),a.R7$(4),a.SpI(" Revoke ",null==(d=f.mostRecentOrg())?null:d.name,"'s Approval of this Assertion's Classification"),a.R7$(3),a.R50("ngModel",f.revocationComment)}}function b(l,_){if(1&l&&(a.EFF(0," Before approving this Assertion's changes, ensure that they do not effect the original classification by "),a.j41(1,"strong"),a.EFF(2),a.k0s(),a.EFF(3,".\n")),2&l){let d;const f=a.XpG();a.R7$(2),a.JRh(null==(d=f.mostRecentOrg())?null:d.name)}}function T(l,_){if(1&l){const d=a.RV6();a.j41(0,"button",14),a.bIt("click",function(){i.eBV(d);const A=a.XpG(2);return i.Njj(A.perform())}),a.EFF(1),a.k0s()}if(2&l){let d;const f=a.XpG(2),A="approve"===f.mode()?"Approve":"Approve Changes";a.Y8G("nzTooltipTrigger",f.mostRecentOrg()?"hover":null)("nzTooltipTitle","For "+(null==(d=f.mostRecentOrg())?null:d.name)),a.R7$(),a.SpI(" ",A," ")}}function S(l,_){if(1&l){const d=a.RV6();a.j41(0,"button",15),a.bIt("click",function(){i.eBV(d);const A=a.XpG(2);return i.Njj(A.perform())}),a.EFF(1," Revoke Approval "),a.k0s()}if(2&l){let d;const f=a.XpG(2),A=f.revocationComment();a.Y8G("disabled",null==A||A.length<10)("nzTooltipTrigger",f.mostRecentOrg()?"hover":null)("nzTooltipTitle","For "+(null==(d=f.mostRecentOrg())?null:d.name))}}function rt(l,_){if(1&l){const d=a.RV6();a.j41(0,"button",11),a.bIt("click",function(){const A=i.eBV(d).modalRef;return i.Njj(A.destroy())}),a.EFF(1," Cancel "),a.k0s(),a.nVh(2,T,2,3,"button",12),a.nVh(3,S,2,3,"button",13)}if(2&l){const d=a.XpG();a.R7$(2),a.vxM("approve"===d.mode()||"approveChanges"===d.mode()?2:-1),a.R7$(),a.vxM("revoke"===d.mode()?3:-1)}}let et=(class Ft{constructor(_,d,f,A,ot,st,dt){this.approveAssertionGql=_,this.revokeApprovalGql=d,this.assertionDetailGql=f,this.approvalListGql=A,this.networkErrorService=ot,this.viewerService=st,this.modal=dt,this.assertionId=n.hFB.required(),this.mode=n.hFB.required(),this.size=(0,n.hFB)("small"),this.type=(0,n.hFB)("default"),this.display=(0,n.hFB)("inline"),this.disabled=(0,n.hFB)(!1),this.tooltipText=(0,n.hFB)(),this.onApproved=(0,n.CGW)(),this.isSubmitting=(0,i.vPA)(!1),this.revocationComment=(0,i.vPA)(void 0),this.viewer=(0,o.ot)(this.viewerService.viewer$),this.mostRecentOrg=(0,c.EW)(()=>this.viewer()?.mostRecentOrg),this.approveAssertionMutator=new m.E(this.networkErrorService),this.revokeApprovalMutator=new m.E(this.networkErrorService),this.buttonConfig=(0,c.EW)(()=>this.mode()?this.getButtonConfig():void 0)}getButtonConfig(){const _={size:this.size(),type:this.type(),display:this.display(),disabled:this.disabled(),danger:!1,tooltipText:this.tooltipText()};switch(this.mode()){case"approve":return{..._,label:"Approve",icon:"safety-certificate"};case"revoke":return{..._,label:"Revoke",icon:"stop",type:"primary",danger:!0};case"approveChanges":return{..._,label:"Approve",icon:"safety-certificate",type:"primary"};default:return}}createModal(){const _=this.mode(),d={nzTitle:this.modalTitle,nzFooter:this.modalFooter};"approve"===_?this.modal.create({...d,nzContent:this.approveModalContent}):"revoke"===_?this.modal.create({...d,nzContent:this.revokeModalContent}):"approveChanges"===_&&this.modal.create({...d,nzContent:this.approveChangesModalContent})}perform(){this.isSubmitting.set(!0);let _,d={refetchQueries:[{query:this.assertionDetailGql.document,variables:{assertionId:this.assertionId()}},{query:this.approvalListGql.document,variables:{assertionId:this.assertionId()}}]};_="approve"===this.mode()||"approveChanges"===this.mode()?this.approveAssertionMutator.mutate(this.approveAssertionGql,{input:{assertionId:this.assertionId(),organizationId:this.mostRecentOrg()?.id}},d):this.revokeApprovalMutator.mutate(this.revokeApprovalGql,{input:{assertionId:this.assertionId(),organizationId:this.mostRecentOrg()?.id,comment:this.revocationComment()||""}},d),_.submitSuccess$.pipe((0,P.s)(this)).subscribe(f=>{f&&(this.isSubmitting.set(!1),this.onApproved.emit({action:this.mode(),success:!0,errors:[]}),this.modal.closeAll())}),_.submitError$.pipe((0,P.s)(this)).subscribe(f=>{f.length>0&&(this.isSubmitting.set(!1),this.onApproved.emit({action:this.mode(),success:!1,errors:f}),this.modal.closeAll())}),_.isSubmitting$.pipe((0,P.s)(this)).subscribe(f=>{this.isSubmitting.set(f)})}static#t=D=()=>(this.\u0275fac=function(d){return new(d||Ft)(a.rXU(k.MwE),a.rXU(k.iq),a.rXU(k.kKs),a.rXU(k.eRb),a.rXU(H.N),a.rXU(tt.q),a.rXU(O.N_))},this.\u0275cmp=a.VBU({type:Ft,selectors:[["cvc-approve-assertion-button"]],viewQuery:function(d,f){if(1&d&&(a.GBs(N,5),a.GBs(E,5),a.GBs(w,5),a.GBs(y,5),a.GBs(L,5)),2&d){let A;a.mGM(A=a.lsd())&&(f.approveModalContent=A.first),a.mGM(A=a.lsd())&&(f.revokeModalContent=A.first),a.mGM(A=a.lsd())&&(f.approveChangesModalContent=A.first),a.mGM(A=a.lsd())&&(f.modalTitle=A.first),a.mGM(A=a.lsd())&&(f.modalFooter=A.first)}},inputs:{assertionId:[1,"assertionId"],mode:[1,"mode"],size:[1,"size"],type:[1,"type"],display:[1,"display"],disabled:[1,"disabled"],tooltipText:[1,"tooltipText"]},outputs:{onApproved:"onApproved"},decls:12,vars:2,consts:[["modalTitle",""],["approveModalContent",""],["revokeModalContent",""],["approveChangesModalContent",""],["modalFooter",""],["nz-button","","nz-tooltip","",3,"nzType","nzSize","disabled","nzDanger","nzBlock","nzLoading","nzTooltipTitle"],["nz-button","","nz-tooltip","",3,"click","nzType","nzSize","disabled","nzDanger","nzBlock","nzLoading","nzTooltipTitle"],["nz-icon","",3,"nzType"],[3,"nzSpinning"],[1,"approval-divider"],["placeholder","Enter a reason for revoking this Approval","rows","4","nz-input","",3,"ngModelChange","ngModel"],["nz-button","","nzSize","small",3,"click"],["nzType","primary","nzSize","small","nz-button","","nz-tooltip","",3,"nzTooltipTrigger","nzTooltipTitle"],["nzType","primary","nzSize","small","nz-button","","nz-tooltip","",3,"disabled","nzTooltipTrigger","nzTooltipTitle"],["nzType","primary","nzSize","small","nz-button","","nz-tooltip","",3,"click","nzTooltipTrigger","nzTooltipTitle"],["nzType","primary","nzSize","small","nz-button","","nz-tooltip","",3,"click","disabled","nzTooltipTrigger","nzTooltipTitle"]],template:function(d,f){if(1&d&&(a.SS7(0),a.nVh(1,t,3,9,"button",5),a.DNE(2,at,3,1,"ng-template",null,0,a.C5r)(4,pt,6,2,"ng-template",null,1,a.C5r)(6,Y,8,3,"ng-template",null,2,a.C5r)(8,b,4,1,"ng-template",null,3,a.C5r)(10,rt,4,2,"ng-template",null,4,a.C5r)),2&d){const A=a.bH3(f.buttonConfig());a.R7$(),a.vxM(A?1:-1)}},dependencies:[z.MD,v.YN,v.me,v.BC,v.vS,v.X1,s.j,s.Sy,I.Z,I.a,B.c,$.p,g.Y3,g.Dn,Q.Qt,Q.LH,O.U6,V.V,V.a,x.pc,R.g,R.j],styles:["[_nghost-%COMP%]{display:block}.approval-divider[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}"]}),this)},D());et=(0,p.Cg)([(0,P.d)()],et)},74696:(q,U,e)=>{e.d(U,{GB:()=>N,Vz:()=>D,pc:()=>B});var p=e(31635),z=e(2615),n=e(73664),i=e(17705),c=e(89079),o=e(5964),v=e(40713),m=e(66376),P=e(26841),I=e(57806),R=e(25701),g=e(41951),s=e(61577);const O=["*"],x=["collapseHeader"];function V(E,w){if(1&E&&(n.qex(0),n.nrm(1,"nz-icon",7),n.bVm()),2&E){const y=w.$implicit,L=n.XpG(2);n.R7$(),n.Y8G("nzType",y||"right")("nzRotate",L.nzActive?90:0)}}function Q(E,w){if(1&E&&(n.j41(0,"div"),n.DNE(1,V,2,2,"ng-container",3),n.k0s()),2&E){const y=n.XpG();n.R7$(),n.Y8G("nzStringTemplateOutlet",y.nzExpandedIcon)}}function a(E,w){if(1&E&&(n.qex(0),n.EFF(1),n.bVm()),2&E){const y=n.XpG();n.R7$(),n.JRh(y.nzHeader)}}function k(E,w){if(1&E&&(n.qex(0),n.EFF(1),n.bVm()),2&E){const y=n.XpG(2);n.R7$(),n.JRh(y.nzExtra)}}function H(E,w){if(1&E&&(n.j41(0,"div",4),n.DNE(1,k,2,1,"ng-container",3),n.k0s()),2&E){const y=n.XpG();n.R7$(),n.Y8G("nzStringTemplateOutlet",y.nzExtra)}}const tt="collapse";let B=(()=>{let E,L,K,w=[],y=[],t=[],W=[],Z=[],at=[];return class bt{cdr=(0,z.WQX)(i.gRc);directionality=(0,z.WQX)(s.dS);destroyRef=(0,z.WQX)(z.abz);_nzModuleName=tt;nzAccordion=(0,p.zF)(this,w,!1);nzBordered=((0,p.zF)(this,y),(0,p.zF)(this,t,!0));nzGhost=((0,p.zF)(this,W),(0,p.zF)(this,Z,!1));nzExpandIconPosition=((0,p.zF)(this,at),"start");dir="ltr";listOfNzCollapsePanelComponent=[];constructor(){(0,m._g)(tt,()=>this.cdr.markForCheck())}ngOnInit(){this.directionality.change?.pipe((0,c.pQ)(this.destroyRef)).subscribe(Y=>{this.dir=Y,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(Y){this.listOfNzCollapsePanelComponent.push(Y)}removePanel(Y){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(Y),1)}click(Y){this.nzAccordion&&!Y.nzActive&&this.listOfNzCollapsePanelComponent.filter(b=>b!==Y).forEach(b=>{b.nzActive&&(b.nzActive=!1,b.nzActiveChange.emit(b.nzActive),b.markForCheck())}),Y.nzActive=!Y.nzActive,Y.nzActiveChange.emit(Y.nzActive)}static \u0275fac=((()=>{const Y="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;E=[(0,m.H4)()],L=[(0,m.H4)()],K=[(0,m.H4)()],(0,p.G4)(null,null,E,{kind:"field",name:"nzAccordion",static:!1,private:!1,access:{has:b=>"nzAccordion"in b,get:b=>b.nzAccordion,set:(b,T)=>{b.nzAccordion=T}},metadata:Y},w,y),(0,p.G4)(null,null,L,{kind:"field",name:"nzBordered",static:!1,private:!1,access:{has:b=>"nzBordered"in b,get:b=>b.nzBordered,set:(b,T)=>{b.nzBordered=T}},metadata:Y},t,W),(0,p.G4)(null,null,K,{kind:"field",name:"nzGhost",static:!1,private:!1,access:{has:b=>"nzGhost"in b,get:b=>b.nzGhost,set:(b,T)=>{b.nzGhost=T}},metadata:Y},Z,at),Y&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Y})})(),function(b){return new(b||bt)});static \u0275cmp=n.VBU({type:bt,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(b,T){2&b&&n.AVh("ant-collapse-icon-position-start","start"===T.nzExpandIconPosition)("ant-collapse-icon-position-end","end"===T.nzExpandIconPosition)("ant-collapse-ghost",T.nzGhost)("ant-collapse-borderless",!T.nzBordered)("ant-collapse-rtl","rtl"===T.dir)},inputs:{nzAccordion:[2,"nzAccordion","nzAccordion",i.L39],nzBordered:[2,"nzBordered","nzBordered",i.L39],nzGhost:[2,"nzGhost","nzGhost",i.L39],nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],ngContentSelectors:O,decls:1,vars:0,template:function(b,T){1&b&&(n.NAR(),n.SdG(0))},encapsulation:2,changeDetection:0})}})();const $="collapsePanel";let D=(()=>{let E,w=[],y=[];return class St{ngZone=(0,z.WQX)(n.SKi);cdr=(0,z.WQX)(i.gRc);destroyRef=(0,z.WQX)(z.abz);nzCollapseComponent=(0,z.WQX)(B,{host:!0});noAnimation=(0,z.WQX)(P.z,{optional:!0});_nzModuleName=$;nzActive=!1;nzDisabled=!1;nzShowArrow=(0,p.zF)(this,w,!0);nzExtra=(0,p.zF)(this,y);nzHeader;nzExpandedIcon;nzActiveChange=new n.bkB;collapseHeader;markForCheck(){this.cdr.markForCheck()}constructor(){(0,m._g)($,()=>this.cdr.markForCheck()),this.destroyRef.onDestroy(()=>{this.nzCollapseComponent.removePanel(this)})}ngOnInit(){this.nzCollapseComponent.addPanel(this),(0,R.wN)(this.collapseHeader.nativeElement,"click").pipe((0,o.p)(()=>!this.nzDisabled),(0,c.pQ)(this.destroyRef)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})})}static \u0275fac=((()=>{const t="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;E=[(0,m.H4)()],(0,p.G4)(null,null,E,{kind:"field",name:"nzShowArrow",static:!1,private:!1,access:{has:W=>"nzShowArrow"in W,get:W=>W.nzShowArrow,set:(W,K)=>{W.nzShowArrow=K}},metadata:t},w,y),t&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:t})})(),function(W){return new(W||St)});static \u0275cmp=n.VBU({type:St,selectors:[["nz-collapse-panel"]],viewQuery:function(W,K){if(1&W&&n.GBs(x,7),2&W){let Z;n.mGM(Z=n.lsd())&&(K.collapseHeader=Z.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(W,K){2&W&&n.AVh("ant-collapse-no-arrow",!K.nzShowArrow)("ant-collapse-item-active",K.nzActive)("ant-collapse-item-disabled",K.nzDisabled)},inputs:{nzActive:[2,"nzActive","nzActive",i.L39],nzDisabled:[2,"nzDisabled","nzDisabled",i.L39],nzShowArrow:[2,"nzShowArrow","nzShowArrow",i.L39],nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],ngContentSelectors:O,decls:9,vars:8,consts:[["collapseHeader",""],["role","button",1,"ant-collapse-header"],[1,"ant-collapse-header-text"],[4,"nzStringTemplateOutlet"],[1,"ant-collapse-extra"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],[1,"ant-collapse-arrow",3,"nzType","nzRotate"]],template:function(W,K){1&W&&(n.NAR(),n.j41(0,"div",1,0),n.nVh(2,Q,2,1,"div"),n.j41(3,"span",2),n.DNE(4,a,2,1,"ng-container",3),n.k0s(),n.nVh(5,H,2,1,"div",4),n.k0s(),n.j41(6,"div",5)(7,"div",6),n.SdG(8),n.k0s()()),2&W&&(n.BMQ("aria-expanded",K.nzActive),n.R7$(2),n.vxM(K.nzShowArrow?2:-1),n.R7$(2),n.Y8G("nzStringTemplateOutlet",K.nzHeader),n.R7$(),n.vxM(K.nzExtra?5:-1),n.R7$(),n.AVh("ant-collapse-content-active",K.nzActive),n.Y8G("@.disabled",!(null==K.noAnimation||!K.noAnimation.nzNoAnimation))("@collapseMotion",K.nzActive?"expanded":"hidden"))},dependencies:[I.C,I.m,g.Y3,g.Dn],encapsulation:2,data:{animation:[v.GE]},changeDetection:0})}})(),N=(()=>{class E{static \u0275fac=function(L){return new(L||E)};static \u0275mod=n.$C({type:E});static \u0275inj=z.G2t({imports:[D]})}return E})()},74753:(q,U,e)=>{e.r(U),e.d(U,{AssertionsReviseModule:()=>xt});var p=e(72200),z=e(38132),n=e(99172),i=e(96354),c=e(24608),o=e(73664),v=e(69145),m=e(56609),P=e(41305),I=e(3062),R=e(97685),g=e(41951),s=e(7391),O=e(5473),x=e(29765),V=e(97529),Q=e(12261),a=e(83075),k=e(61774);function H(G,M){if(1&G&&(o.j41(0,"span",12)(1,"strong"),o.EFF(2),o.k0s(),o.EFF(3," Parents:"),o.k0s()),2&G){const X=o.XpG(2).ngIf;o.R7$(2),o.JRh(X.name)}}function tt(G,M){if(1&G&&(o.j41(0,"span",13),o.nrm(1,"cvc-molecular-profile-tag",14),o.k0s()),2&G){const X=o.XpG(2).ngIf;o.R7$(),o.Y8G("molecularProfile",X.molecularProfile)("enablePopover",!1)}}function B(G,M){1&G&&(o.j41(0,"nz-space",9),o.DNE(1,H,4,1,"span",10)(2,tt,2,2,"span",11),o.k0s())}function $(G,M){1&G&&(o.j41(0,"div"),o.nrm(1,"router-outlet"),o.k0s())}function D(G,M){1&G&&(o.j41(0,"nz-row",15)(1,"div",16),o.nrm(2,"cvc-login-prompt"),o.k0s()())}function N(G,M){if(1&G&&(o.qex(0),o.nrm(1,"cvc-section-navigation",3),o.DNE(2,B,3,0,"ng-template",null,0,o.C5r),o.j41(4,"nz-page-header",4)(5,"nz-page-header-title",5),o.EFF(6," REVISE "),o.nrm(7,"i",6),o.nI1(8,"entityColor"),o.EFF(9),o.k0s(),o.j41(10,"nz-page-header-content")(11,"div",7),o.DNE(12,$,2,0,"div",8),o.nI1(13,"ngrxPush"),o.DNE(14,D,3,0,"ng-template",null,1,o.C5r),o.k0s()()(),o.bVm()),2&G){const X=M.ngIf,J=o.sdS(3),j=o.sdS(15),it=o.XpG();o.R7$(),o.Y8G("displayName",X.name)("relationsTpl",J),o.R7$(6),o.Y8G("nzTwotoneColor",o.bMT(8,6,"Assertion")),o.R7$(2),o.SpI(" ",X.name," "),o.R7$(3),o.Y8G("ngIf",o.bMT(13,8,it.isSignedIn$))("ngIfElse",j)}}let E=(()=>{var G;class M{constructor(J,j,it){this.gql=J,this.route=j,this.viewerService=it,this.routeSub=this.route.params.subscribe(vt=>{let ut=this.gql.watch({assertionId:+vt.assertionId}).valueChanges;this.loading$=ut.pipe((0,c.E)("loading"),(0,n.Z)(!0)),this.assertion$=ut.pipe((0,c.E)("data","assertion"))})}ngOnInit(){this.isSignedIn$=this.viewerService.viewer$.pipe((0,i.T)(J=>J.signedIn))}ngOnDestroy(){this.routeSub.unsubscribe()}static#t=G=()=>(this.\u0275fac=function(j){return new(j||M)(o.rXU(v.kKs),o.rXU(m.nX),o.rXU(P.q))},this.\u0275cmp=o.VBU({type:M,selectors:[["cvc-assertions-revise-view"]],standalone:!1,decls:2,vars:3,consts:[["assertionRelations",""],["notSignedIn",""],[4,"ngIf"],[3,"displayName","relationsTpl"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzTheme","twotone","nzType","civic-assertion",3,"nzTwotoneColor"],[1,"content"],[4,"ngIf","ngIfElse"],["nzDirection","horizontal"],["nz-typography","","class","label",4,"nzSpaceItem"],["class","tags",4,"nzSpaceItem"],["nz-typography","",1,"label"],[1,"tags"],[3,"molecularProfile","enablePopover"],["nzSpan","24","nzJustify","center"],["nz-col","","nzSpan","6"]],template:function(j,it){1&j&&(o.DNE(0,N,16,10,"ng-container",2),o.nI1(1,"async")),2&j&&o.Y8G("ngIf",o.bMT(1,1,it.assertion$))},dependencies:[p.bT,m.n3,I.WB,I.k9,I.zR,R.U5,R.Dq,g.Dn,s.Di,O.z,x.n,V.Uq,V.e,Q.h,p.Jj,a.R,k.L9],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}))}return G(),M})();var w=e(25703),y=e(61912),L=e(38927),t=e(50513),W=e(66026),K=e(55316),Z=e(2615);let at=(()=>{var G;class M{static#t=G=()=>(this.\u0275fac=function(j){return new(j||M)},this.\u0275mod=o.$C({type:M}),this.\u0275inj=Z.G2t({imports:[p.MD,L.PQ,t.Z,W.m,K.P]}))}return G(),M})(),pt=(()=>{var G;class M{static#t=G=()=>(this.\u0275fac=function(j){return new(j||M)},this.\u0275mod=o.$C({type:M}),this.\u0275inj=Z.G2t({imports:[p.MD,V.f3,w.Ti,y.i3,R.pc,at]}))}return G(),M})();var Y=e(31635),b=e(84341),T=e(71226),S=e(19974),rt=e(49894);const f=(0,e(87480).A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Assertion"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"molecularProfileId",type:"molecular-profile-select",props:{required:!0,watchVariantMolecularProfileId:!0}}]},{wrappers:["form-row"],props:{formRowOptions:{responsive:{xs:24,lg:12,xl:8,xxl:6}}},fieldGroup:[{key:"assertionType",type:"type-select",props:{required:!0}},{key:"assertionDirection",type:"direction-select",props:{required:!0}},{key:"significance",type:"significance-select",props:{required:!0}},{key:"diseaseId",type:"disease-select",props:{}},{key:"therapyIds",type:"therapy-multi-select",props:{}},{key:"therapyInteractionType",type:"interaction-select",props:{}},{key:"variantOrigin",type:"origin-select",props:{required:!0}},{key:"phenotypeIds",type:"phenotype-multi-select",props:{}},{key:"ampLevel",type:"amp-category-select",props:{}},{key:"acmgCodeIds",type:"acmg-code-multi-select",props:{}},{key:"clingenCodeIds",type:"clingen-code-multi-select",props:{}},{key:"nccnGuidelineId",type:"nccn-guideline-select",props:{}},{key:"nccnGuidelineVersion",type:"nccn-guideline-version-input",props:{}},{key:"fdaRegulatoryApproval",type:"fda-regulatory-approval-checkbox",props:{}},{key:"fdaCompanionTest",type:"fda-companion-test-checkbox",props:{}}]},{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{xs:24},{md:24,lg:8},{md:24,lg:16}]}},fieldGroup:[{key:"evidenceItemIds",type:"evidence-multi-select",props:{required:!0,isMultiSelect:!0}},{key:"summary",type:"base-textarea",props:{tooltip:"A short, one sentence summary of the Assertion",placeholder:"Enter an Assertion Summary",label:"Assertion Summary",required:!0}},{key:"description",type:"base-textarea",props:{tooltip:"A complete, original description of this Assertion. Limited to one paragraph.",placeholder:"Enter an Assertion Statement",label:"Assertion Statement",required:!0,rows:5}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"textarea",props:{label:"Comment",required:!0}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{molecularProfileId:void 0,acmgCodeIds:[],ampLevel:void 0,assertionDirection:void 0,assertionType:void 0,clingenCodeIds:[],significance:void 0,description:void 0,diseaseId:void 0,therapyIds:[],therapyInteractionType:void 0,evidenceItemIds:[],fdaCompanionTest:void 0,fdaRegulatoryApproval:void 0,nccnGuidelineId:void 0,nccnGuidelineVersion:void 0,phenotypeIds:[],summary:void 0,variantOrigin:void 0},comment:void 0,organizationId:void 0});var gt,A=e(21653),ot=e(17705),st=e(74222),dt=e(56506),ht=e(68721);function Ct(G,M){if(1&G&&(o.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),o.j41(1,"a",4),o.EFF(2,"here."),o.k0s()),2&G){const X=o.XpG();o.R7$(),o.Y8G("href",o.mNQ(X.url),o.B4B)}}function zt(G,M){if(1&G){const X=o.RV6();o.j41(0,"form",5),o.bIt("ngSubmit",function(){Z.eBV(X);const j=o.XpG();return Z.Njj(j.onSubmit(j.model))}),o.j41(1,"formly-form",6),o.bIt("modelChange",function(j){Z.eBV(X);const it=o.XpG();return Z.Njj(it.model=j)}),o.k0s()()}if(2&G){const X=o.XpG();o.Y8G("formGroup",X.form),o.R7$(),o.Y8G("form",X.form)("fields",X.fields)("model",X.model)("options",X.options)}}function Et(G,M){1&G&&o.EFF(0," Loading Assertion... ")}let mt=(class Bt{constructor(M,X,J,j){this.revisableFieldsGQL=M,this.submitRevisionsGQL=X,this.networkErrorService=J,this.cdr=j,this.form=new b.J3({}),this.fields=f,this.state=new S.o,this.state.formMode="revise",this.options={formState:this.state},this.reviseAssertionMutator=new T.E(J)}onSubmit(M){if(!this.assertionId)return;let X=(0,A.$h)(this.assertionId,M);X&&(this.mutationState=this.reviseAssertionMutator.mutate(this.submitRevisionsGQL,{input:X}))}ngOnInit(){this.url=`/assertions/${this.assertionId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({assertionId:this.assertionId}).pipe((0,rt.s)(this)).subscribe({next:({data:{assertion:M}})=>{M&&(this.model={id:M.id,fields:(0,A.Mw)(M)},this.cdr.detectChanges())},error:M=>{console.log("Error retrieving Assertion"),console.log(M)},complete:()=>{this.state.formReady$.next(!0)}})}ngOnDestroy(){this.options.formState.onDestroy()}static#t=gt=()=>(this.\u0275fac=function(X){return new(X||Bt)(o.rXU(v.VV8),o.rXU(v.wkS),o.rXU(st.N),o.rXU(ot.gRc))},this.\u0275cmp=o.VBU({type:Bt,selectors:[["cvc-assertion-revise-form"]],inputs:{assertionId:"assertionId"},standalone:!1,decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Evidence Item",3,"mutationState","successMessage","redirectUrl"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(X,J){if(1&X&&(o.j41(0,"cvc-form-submission-status-display",2),o.DNE(1,Ct,3,2,"ng-template",null,0,o.C5r)(3,zt,2,5,"form",3)(4,Et,1,0,"ng-template",null,1,o.C5r),o.k0s()),2&X){const j=o.sdS(2),it=o.sdS(5);o.Y8G("mutationState",J.mutationState)("successMessage",j)("redirectUrl",J.url),o.R7$(3),o.Y8G("ngIf",J.model)("ngIfElse",it)}},dependencies:[p.bT,L.CA,b.qT,b.cb,b.j4,dt.JA,ht.G],encapsulation:2,changeDetection:0}),this)},gt());function yt(G,M){if(1&G&&(o.qex(0),o.nrm(1,"cvc-assertion-revise-form",2),o.bVm()),2&G){const X=o.XpG();o.R7$(),o.Y8G("assertionId",X.assertionId)}}function Tt(G,M){1&G&&o.EFF(0,"Loading Assertion...")}mt=(0,Y.Cg)([(0,rt.d)()],mt);const At=[{path:"",component:E,data:{breadcrumb:"Revise"},children:[{path:"",redirectTo:"suggest",pathMatch:"full"},{path:"suggest",component:(()=>{var G;class M{constructor(J){this.route=J,this.routeParams$=this.route.params.subscribe(j=>{this.assertionId=+j.assertionId})}ngOnDestroy(){this.routeParams$.unsubscribe()}static#t=G=()=>(this.\u0275fac=function(j){return new(j||M)(o.rXU(m.nX))},this.\u0275cmp=o.VBU({type:M,selectors:[["cvc-assertions-suggest-page"]],standalone:!1,decls:3,vars:2,consts:[["loadingAssertion",""],[4,"ngIf","ngIfElse"],[3,"assertionId"]],template:function(j,it){if(1&j&&o.DNE(0,yt,2,1,"ng-container",1)(1,Tt,1,0,"ng-template",null,0,o.C5r),2&j){const vt=o.sdS(2);o.Y8G("ngIf",it.assertionId)("ngIfElse",vt)}},dependencies:[p.bT,mt],encapsulation:2}))}return G(),M})(),data:{breadcrumb:"Suggest Revision"}}]}];let Mt=(()=>{var G;class M{static#t=G=()=>(this.\u0275fac=function(j){return new(j||M)},this.\u0275mod=o.$C({type:M}),this.\u0275inj=Z.G2t({imports:[z.iI.forChild(At),pt,z.iI]}))}return G(),M})();var Pt=e(14124),It=e(25128),Ot=e(13688),Rt=e(60996),Dt=e(64917);let xt=(()=>{var G;class M{static#t=G=()=>(this.\u0275fac=function(j){return new(j||M)},this.\u0275mod=o.$C({type:M}),this.\u0275inj=Z.G2t({imports:[p.MD,Mt,I.ZJ,R.pc,g.Y3,s.kT,R.pc,Dt.i,Rt.o,Pt.C,It.K,V.f3,Ot.A]}))}return G(),M})()},80746:(q,U,e)=>{e.d(U,{J:()=>Wt});var p=e(17705),z=e(2615),n=e(89079),i=e(69145),c=e(5964),o=e(96354),v=e(69199),m=e(24608),P=e(72200),I=e(23617),R=e(50513),g=e(12617),s=e(41951),O=e(29438),x=e(7391),V=e(11672),Q=e(19448),a=e(64917),k=e(62382),H=e(96848),tt=e(43176),B=e(74696),$=e(62e3),D=e(22839),N=e(98920),E=e(54492),w=e(39480),y=e(75699),L=e(55152),t=e(73664);let W=(()=>{var r;class h{transform(C,F){return void 0!==C&&(0,L.Sc)(C,F)}static#t=r=()=>(this.\u0275fac=function(F){return new(F||h)},this.\u0275pipe=t.EJ8({name:"canRevokeApproval",type:h,pure:!0}))}return r(),h})();var K=e(19692);let Z=(()=>{var r;class h{transform(C,F){return void 0!==C&&"REQUIRES_REVIEW"===F.status&&(0,L.RL)(C,F)}static#t=r=()=>(this.\u0275fac=function(F){return new(F||h)},this.\u0275pipe=t.EJ8({name:"canApproveApproval",type:h,pure:!0}))}return r(),h})();var at=e(41305),pt=e(56408),Y=e(56440),b=e(8139);function T(r,h){if(1&r&&(t.j41(0,"div",9),t.nrm(1,"img",10),t.k0s()),2&r){t.XpG();const u=t.r8f(0);t.R7$(),t.Y8G("alt",t.mNQ(u.organization.name))("src",t.mNQ(u.organization.profileImagePath),t.B4B)}}function S(r,h){1&r&&t.EFF(0," Previously Approved by ")}function rt(r,h){1&r&&t.EFF(0," Classification Approved by ")}function et(r,h){1&r&&t.EFF(0," Approval under review by ")}function l(r,h){if(1&r&&(t.j41(0,"span",11),t.nVh(1,S,1,0)(2,rt,1,0)(3,et,1,0),t.EFF(4),t.k0s()),2&r){let u;t.XpG();const C=t.r8f(0);t.R7$(),t.vxM("REVOKED"===(u=C.status)?1:"ACTIVE"===u?2:"REQUIRES_REVIEW"===u?3:-1),t.R7$(3),t.SpI(" ",C.organization.name," ")}}function _(r,h){if(1&r&&(t.j41(0,"strong"),t.EFF(1),t.k0s(),t.EFF(2," classification has been approved by "),t.j41(3,"strong"),t.EFF(4),t.k0s(),t.EFF(5," under the authority of editor "),t.j41(6,"strong"),t.EFF(7),t.k0s()),2&r){t.XpG();const u=t.r8f(1),C=t.r8f(2),F=t.r8f(3);t.R7$(),t.JRh(u),t.R7$(3),t.JRh(C),t.R7$(3),t.SpI(" ",F,".")}}function d(r,h){if(1&r&&(t.j41(0,"strong"),t.EFF(1),t.k0s(),t.EFF(2," classification approval has been revoked by "),t.j41(3,"strong"),t.EFF(4),t.k0s(),t.EFF(5," under the authority of editor "),t.j41(6,"strong"),t.EFF(7),t.k0s()),2&r){t.XpG();const u=t.r8f(1),C=t.r8f(2),F=t.r8f(3);t.R7$(),t.JRh(u),t.R7$(3),t.JRh(C),t.R7$(3),t.SpI(" ",F,".")}}function f(r,h){if(1&r&&(t.EFF(0," Post-approval changes to "),t.j41(1,"strong"),t.EFF(2),t.k0s(),t.EFF(3," require review by a "),t.j41(4,"strong"),t.EFF(5),t.k0s(),t.EFF(6," editor with approval privileges. ")),2&r){t.XpG();const u=t.r8f(1),C=t.r8f(2);t.R7$(2),t.JRh(u),t.R7$(3),t.JRh(C)}}function A(r,h){1&r&&t.eu8(0)}function ot(r,h){if(1&r&&(t.j41(0,"nz-collapse",13)(1,"nz-collapse-panel",14)(2,"div",15),t.DNE(3,A,1,0,"ng-container",16),t.k0s()()()),2&r){t.XpG();const u=t.sdS(11),C=t.sdS(13);t.Y8G("nzBordered",!1),t.R7$(),t.Y8G("nzExtra",u),t.R7$(),t.Y8G("nzGap",8),t.R7$(),t.Y8G("ngTemplateOutlet",C)}}function st(r,h){1&r&&t.eu8(0)}function dt(r,h){if(1&r&&(t.j41(0,"nz-collapse",13)(1,"nz-collapse-panel",17)(2,"div",15),t.DNE(3,st,1,0,"ng-container",16),t.k0s()()()),2&r){t.XpG();const u=t.sdS(11),C=t.sdS(13);t.Y8G("nzBordered",!1),t.R7$(),t.Y8G("nzExtra",u),t.R7$(),t.Y8G("nzGap",8),t.R7$(),t.Y8G("ngTemplateOutlet",C)}}function ht(r,h){1&r&&t.eu8(0)}function gt(r,h){if(1&r&&(t.j41(0,"nz-collapse",13)(1,"nz-collapse-panel",18)(2,"div",15),t.DNE(3,ht,1,0,"ng-container",16),t.j41(4,"div",19,6),t.nrm(6,"cvc-activity-feed",20),t.k0s()()()()),2&r){const u=t.sdS(5);t.XpG();const C=t.sdS(11),F=t.sdS(13),nt=t.XpG(),lt=t.r8f(0);t.Y8G("nzBordered",!1),t.R7$(),t.Y8G("nzActive",!0)("nzExtra",C),t.R7$(),t.Y8G("nzGap",8),t.R7$(),t.Y8G("ngTemplateOutlet",F),t.R7$(3),t.Y8G("cvcFilters",nt.feedFilters(lt))("cvcSettings",nt.feedSettings())("cvcShowFilters",!1)("cvcAutoHeightTarget",u)("cvcAutoHeightOffset",-40)}}function Ct(r,h){1&r&&(t.j41(0,"nz-tag",21),t.EFF(1," Active"),t.k0s())}function zt(r,h){1&r&&(t.j41(0,"nz-tag",22),t.EFF(1," Requires Review"),t.k0s())}function Et(r,h){1&r&&(t.j41(0,"nz-tag",23),t.EFF(1," Revoked"),t.k0s())}function mt(r,h){if(1&r&&(t.j41(0,"span"),t.EFF(1,"Status: "),t.k0s(),t.nVh(2,Ct,2,0,"nz-tag",21)(3,zt,2,0,"nz-tag",22)(4,Et,2,0,"nz-tag",23)),2&r){let u;t.XpG(2);const C=t.r8f(0);t.R7$(2),t.vxM("ACTIVE"===(u=C.status)?2:"REQUIRES_REVIEW"===u?3:"REVOKED"===u?4:-1)}}function yt(r,h){if(1&r&&(t.j41(0,"p",31),t.EFF(1),t.k0s()),2&r){t.XpG(4);const u=t.r8f(0);t.R7$(),t.SpI(" ",u.revocationActivity.note," ")}}function Tt(r,h){1&r&&(t.j41(0,"p",29),t.EFF(1," No note provided "),t.k0s())}function Lt(r,h){if(1&r&&(t.j41(0,"nz-descriptions-item",30),t.nVh(1,yt,2,1,"p",31)(2,Tt,2,0,"p",29),t.k0s()),2&r){t.XpG(3);const u=t.r8f(0);t.R7$(),t.vxM(u.revocationActivity.note?1:2)}}function At(r,h){if(1&r&&(t.j41(0,"nz-descriptions",24)(1,"nz-descriptions-item",25),t.nrm(2,"cvc-organization-tag",26),t.k0s(),t.j41(3,"nz-descriptions-item",27),t.nrm(4,"cvc-user-tag",28),t.j41(5,"span",29),t.EFF(6),t.nI1(7,"timeAgo"),t.k0s()(),t.nVh(8,Lt,3,1,"nz-descriptions-item",30),t.k0s()),2&r){t.XpG(2);const u=t.r8f(0);t.Y8G("nzColumn",2),t.R7$(2),t.Y8G("org",u.organization)("enablePopover",!1),t.R7$(2),t.Y8G("user",u.user)("enablePopover",!1),t.R7$(2),t.SpI(" ",t.bMT(7,7,u.lastReviewed)," "),t.R7$(2),t.vxM("REVOKED"===u.status&&u.revocationActivity?8:-1)}}function Mt(r,h){if(1&r&&(t.j41(0,"span",12),t.SS7(1)(2)(3),t.nVh(4,_,8,3)(5,d,8,3)(6,f,7,2),t.k0s(),t.nVh(7,ot,4,4,"nz-collapse",13)(8,dt,4,4,"nz-collapse",13)(9,gt,7,10,"nz-collapse",13),t.DNE(10,mt,5,1,"ng-template",null,4,t.C5r)(12,At,9,9,"ng-template",null,5,t.C5r)),2&r){let u,C;t.XpG();const F=t.r8f(0);t.R7$(),t.bH3(F.assertion.name),t.R7$(),t.bH3(F.organization.name),t.R7$(),t.bH3(F.user.displayName),t.R7$(),t.vxM("ACTIVE"===(u=F.status)?4:"REVOKED"===u?5:"REQUIRES_REVIEW"===u?6:-1),t.R7$(3),t.vxM("ACTIVE"===(C=F.status)?7:"REVOKED"===C?8:"REQUIRES_REVIEW"===C?9:-1)}}function Pt(r,h){if(1&r&&(t.nrm(0,"cvc-approve-assertion-button",32),t.nI1(1,"canApproveApproval"),t.nI1(2,"approvalActionTooltip")),2&r){t.XpG(3);const u=t.r8f(0),C=t.r8f(1),F=t.r8f(2);t.Y8G("assertionId",C.id)("disabled",!t.i5U(1,3,F,u))("tooltipText",t.ii3(2,6,F,"approveChanges",C,u.id))}}function It(r,h){if(1&r&&(t.j41(0,"div",15),t.nVh(1,Pt,3,11,"cvc-approve-assertion-button",32),t.nrm(2,"cvc-approve-assertion-button",33),t.nI1(3,"canRevokeApproval"),t.nI1(4,"approvalActionTooltip"),t.k0s()),2&r){t.XpG(2);const u=t.r8f(0),C=t.r8f(1),F=t.r8f(2);t.Y8G("nzGap",8),t.R7$(),t.vxM("REQUIRES_REVIEW"===u.status?1:-1),t.R7$(),t.Y8G("assertionId",C.id)("disabled",!t.i5U(3,5,F,u))("tooltipText",t.ii3(4,8,F,"revoke",C,u.id))}}function Ot(r,h){if(1&r&&t.nVh(0,It,5,13,"div",15),2&r){t.XpG();const u=t.r8f(0);t.vxM("REVOKED"!==u.status?0:-1)}}let Rt=(()=>{var r;class h{constructor(C){this.viewerService=C,this.cvcApproval=p.hFB.required(),this.cvcAssertion=p.hFB.required(),this.viewer=(0,n.ot)(this.viewerService.viewer$)}feedSettings(){return{...E.Nh,showOrganization:!1}}feedFilters(C){return{...E.bR,linkedApprovalId:C.id,occurredAfter:new Date(C.lastReviewed)}}static#t=r=()=>(this.\u0275fac=function(F){return new(F||h)(t.rXU(at.q))},this.\u0275cmp=t.VBU({type:h,selectors:[["cvc-approval-item"]],inputs:{cvcApproval:[1,"cvcApproval"],cvcAssertion:[1,"cvcAssertion"]},decls:13,vars:7,consts:[["itemAvatar",""],["itemTitle",""],["itemDescription",""],["itemExtra",""],["approvalStatus",""],["approvalDetails",""],["revisionsContainer",""],[3,"nzExtra"],[3,"nzAvatar","nzTitle","nzDescription"],[1,"organization-image-container"],[1,"organization-image",3,"alt","src"],[1,"approval-title"],["nz-typography","","nzType","secondary",1,"approval-summary"],[3,"nzBordered"],["nzHeader","Show Approval Details",3,"nzExtra"],["nz-flex","","nzVertical","",3,"nzGap"],[4,"ngTemplateOutlet"],["nzHeader","Show Revocation Details",3,"nzExtra"],["nzHeader","Show Unapproved Changes",3,"nzActive","nzExtra"],[1,"revisions-container"],["cvcTitle","Unapproved Changes",3,"cvcFilters","cvcSettings","cvcShowFilters","cvcAutoHeightTarget","cvcAutoHeightOffset"],["nzColor","success"],["nzColor","processing"],["nzColor","error"],["nzBordered","","nzLayout","vertical","nzSize","small",3,"nzColumn"],["nzTitle","Approving Organization"],[3,"org","enablePopover"],["nzTitle","Classification Approved by"],[3,"user","enablePopover"],["nz-typography","","nzType","secondary"],["nzTitle","Reason for Revocation","nzSpan","2"],["nz-typography",""],["mode","approveChanges","display","block",3,"assertionId","disabled","tooltipText"],["mode","revoke","display","block",3,"assertionId","disabled","tooltipText"]],template:function(F,nt){if(1&F&&(t.SS7(0)(1)(2),t.j41(3,"nz-list-item",7),t.nrm(4,"nz-list-item-meta",8),t.k0s(),t.DNE(5,T,2,4,"ng-template",null,0,t.C5r)(7,l,5,2,"ng-template",null,1,t.C5r)(9,Mt,14,5,"ng-template",null,2,t.C5r)(11,Ot,1,1,"ng-template",null,3,t.C5r)),2&F){const lt=t.sdS(6),ct=t.sdS(8),ft=t.sdS(10),Gt=t.sdS(12);t.bH3(nt.cvcApproval()),t.R7$(),t.bH3(nt.cvcAssertion()),t.R7$(),t.bH3(nt.viewer()),t.R7$(),t.Y8G("nzExtra",Gt),t.R7$(),t.Y8G("nzAvatar",lt)("nzTitle",ct)("nzDescription",ft)}},dependencies:[P.MD,P.T3,g.rD,g.lQ,g.qx,x.kT,x.Di,B.GB,B.Vz,B.pc,$.WF,$.xA,$.gr,y.T,y.s,K.y,K.B,a.i,w.Y,D.m,pt.r,N.U,Y.r,k.P,b.N,tt.l,W,Z],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-list-item{padding:12px!important;border-bottom:none!important;background-color:#efefef;margin-bottom:12px;border-radius:12px}[_nghost-%COMP%]     nz-list-item-meta{margin-bottom:0!important}[_nghost-%COMP%]     nz-list-item-meta nz-list-item-meta-title>h4{margin-bottom:0!important;line-height:1.2em!important}[_nghost-%COMP%]     nz-list-item-extra{margin-left:12px!important;width:100px}[_nghost-%COMP%]     nz-collapse{border-radius:4px}[_nghost-%COMP%]     nz-collapse>nz-collapse-panel{background-color:#fff;border-radius:4px!important}[_nghost-%COMP%]     nz-collapse>nz-collapse-panel .ant-collapse-header{padding:4px 8px!important;border-radius:4px!important}[_nghost-%COMP%]     nz-collapse>nz-collapse-panel .ant-collapse-header-text{font-weight:500;color:#666}[_nghost-%COMP%]     nz-collapse>nz-collapse-panel .ant-collapse-arrow{color:#999}.approval-summary[_ngcontent-%COMP%]{display:inline-block;line-height:1.3em;margin-bottom:8px}.organization-image-container[_ngcontent-%COMP%]{width:48px;height:48px}.organization-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:4px;border:1px solid #aaa}.active[_ngcontent-%COMP%]{background-color:#fffbe6;border:1px solid #ffd666;color:#ad6800}.revoked[_ngcontent-%COMP%]{background-color:#fff1f0;border:1px solid #ff4d4f;color:#a8071a}.review[_ngcontent-%COMP%]{background-color:#f0f5ff;border:1px solid #597ef7;color:#10239e}.revisions-container[_ngcontent-%COMP%]{width:100%;height:250px}"]}))}return r(),h})(),Dt=(()=>{var r;class h{transform(C){return void 0!==C&&(0,L.nM)(C)}static#t=r=()=>(this.\u0275fac=function(F){return new(F||h)},this.\u0275pipe=t.EJ8({name:"currentOrgCanApprove",type:h,pure:!0}))}return r(),h})();var xt=e(9215);function G(r,h){if(1&r&&(t.EFF(0," Your approval actions will be executed under the authority granted to you by "),t.j41(1,"strong"),t.EFF(2),t.k0s()),2&r){t.XpG(2);const u=t.r8f(0);t.R7$(2),t.SpI("",null==u||null==u.mostRecentOrg?null:u.mostRecentOrg.name,".")}}function M(r,h){if(1&r&&(t.nrm(0,"nz-alert",6),t.DNE(1,G,3,1,"ng-template",null,2,t.C5r)),2&r){const u=t.sdS(2);t.Y8G("nzMessage",u)}}function X(r,h){if(1&r&&(t.j41(0,"span",8)(1,"strong"),t.EFF(2),t.k0s(),t.EFF(3," is unapproved "),t.k0s()),2&r){let u;const C=t.XpG(2);t.R7$(2),t.JRh(null==(u=C.assertion())?null:u.name)}}function J(r,h){if(1&r&&(t.nrm(0,"cvc-approve-assertion-button",9),t.nI1(1,"canCreateApproval"),t.nI1(2,"approvalActionTooltip")),2&r){t.XpG();const u=t.r8f(0);t.XpG(3);const C=t.r8f(0);t.Y8G("assertionId",u.id)("disabled",!t.i5U(1,3,C,u))("tooltipText",t.brH(2,6,C,"create",u))}}function j(r,h){if(1&r&&(t.SS7(0),t.nVh(1,J,3,10,"cvc-approve-assertion-button",9)),2&r){const u=t.bH3(t.XpG(3).assertion());t.R7$(),t.vxM(u?1:-1)}}function it(r,h){if(1&r&&(t.nVh(0,j,2,2),t.nI1(1,"canPerformApprovalActions")),2&r){t.XpG(2);const u=t.r8f(0);t.vxM(t.bMT(1,1,u)?0:-1)}}function vt(r,h){if(1&r&&(t.nrm(0,"nz-empty",7),t.DNE(1,X,4,1,"ng-template",null,3,t.C5r)(3,it,2,3,"ng-template",null,4,t.C5r)),2&r){const u=t.sdS(2),C=t.sdS(4);t.Y8G("nzNotFoundContent",u)("nzNotFoundFooter",C)}}function ut(r,h){}function Vt(r,h){1&r&&t.nrm(0,"nz-divider",11)}function $t(r,h){1&r&&t.nrm(0,"nz-divider",12)}function Nt(r,h){if(1&r&&t.nVh(0,ut,0,0)(1,Vt,1,0,"nz-divider",11)(2,$t,1,0,"nz-divider",12),2&r){let u;const C=t.XpG().$implicit;t.vxM("ACTIVE"===(u=C.status)?0:"REQUIRES_REVIEW"===u?1:"REVOKED"===u?2:-1)}}function jt(r,h){if(1&r&&(t.nVh(0,Nt,3,1),t.nrm(1,"cvc-approval-item",10)),2&r){const u=h.$implicit,C=h.index;t.XpG();const F=t.r8f(1),nt=t.r8f(5);t.vxM(u.status!==(null==nt[C-1]?null:nt[C-1].status)?0:-1),t.R7$(),t.Y8G("cvcApproval",u)("cvcAssertion",F)}}const Ut=[i.q0w.Active,i.q0w.RequiresReview,i.q0w.Revoked];let Wt=(()=>{var r;class h{constructor(C,F,nt,lt){this.approvalsGQL=C,this.assertionGQL=F,this.injector=nt,this.viewerService=lt,this.assertionId=p.hFB.required(),this.pageSize=5,this.viewer=(0,n.ot)(this.viewerService.viewer$),this.errors=(0,z.vPA)([]),this.successMessage=(0,z.vPA)(void 0)}ngOnInit(){this.queryRef=this.approvalsGQL.watch({assertionId:this.assertionId()},{fetchPolicy:"network-only"}),(0,z.N4e)(this.injector,()=>{this.approvals=(0,n.ot)(this.queryRef.valueChanges.pipe((0,m.E)("data","approvals","nodes"),(0,c.p)(v.kP),(0,o.T)(C=>[...C].sort((F,nt)=>{const lt=Ut.indexOf(F.status),ct=Ut.indexOf(nt.status);return lt!==ct?lt-ct:new Date(nt.updatedAt).getTime()-new Date(F.updatedAt).getTime()}))),{initialValue:[]}),this.assertion=(0,n.ot)(this.assertionGQL.watch({assertionId:this.assertionId()},{fetchPolicy:"cache-only"}).valueChanges.pipe((0,m.E)("data","assertion")),{initialValue:void 0})})}static#t=r=()=>(this.\u0275fac=function(F){return new(F||h)(t.rXU(i.eRb),t.rXU(i.kKs),t.rXU(z.uvJ),t.rXU(at.q))},this.\u0275cmp=t.VBU({type:h,selectors:[["cvc-approval-list"]],inputs:{assertionId:[1,"assertionId"]},decls:11,vars:11,consts:[["noResult",""],["approval",""],["approvalMessage",""],["emptyContent",""],["emptyFooter",""],["nzSize","small","nzItemLayout","vertical",3,"nzDataSource","nzRenderItem","nzNoResult"],["nzType","info","nzShowIcon","",2,"margin-bottom","12px",3,"nzMessage"],[3,"nzNotFoundContent","nzNotFoundFooter"],["nz-typography","","nzType","secondary"],["mode","approve",3,"assertionId","disabled","tooltipText"],[3,"cvcApproval","cvcAssertion"],["nzText","Approvals Under Review","nzOrientation","left"],["nzText","Revoked Approvals","nzOrientation","left"]],template:function(F,nt){if(1&F&&(t.SS7(0)(1),t.nVh(2,M,3,1),t.nI1(3,"canPerformApprovalActions"),t.nI1(4,"currentOrgCanApprove"),t.SS7(5),t.j41(6,"nz-list",5),t.DNE(7,vt,5,2,"ng-template",null,0,t.C5r)(9,jt,2,3,"ng-template",null,1,t.C5r),t.k0s()),2&F){const lt=t.sdS(8),ct=t.sdS(10),ft=t.bH3(nt.viewer());t.R7$(),t.bH3(nt.assertion()),t.R7$(),t.vxM(t.bMT(3,6,ft)&&t.bMT(4,8,ft)?2:-1),t.R7$(3);const Gt=t.bH3(nt.approvals());t.R7$(),t.Y8G("nzDataSource",Gt)("nzRenderItem",ct)("nzNoResult",lt)}},dependencies:[P.MD,I.$,I.Y,R.Z,g.rD,g.eE,s.Y3,O.Yb,x.kT,x.Di,V._v,V.RW,Q.g,Q.j,a.i,k.P,Rt,H.w,tt.l,Dt,xt.c],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}))}return r(),h})()},86936:(q,U,e)=>{e.d(U,{G:()=>g});var p=e(72200),z=e(38132),n=e(75699),i=e(1236),c=e(41951),o=e(54666),v=e(64917),m=e(53146),P=e(34994),I=e(2615),R=e(73664);let g=(()=>{var s;class O{static#t=s=()=>(this.\u0275fac=function(Q){return new(Q||O)},this.\u0275mod=R.$C({type:O}),this.\u0275inj=I.G2t({imports:[p.MD,z.iI,m.W2,n.T,i.MC,c.Y3,o.v,v.i,P.a]}))}return s(),O})()},89374:(q,U,e)=>{e.d(U,{r:()=>O});var p=e(72200),z=e(22142),n=e(75699),i=e(1236),c=e(824),o=e(98920),v=e(87051),m=e(89802),P=e(35493),I=e(56912),R=e(47086),g=e(2615),s=e(73664);let O=(()=>{var x;class V{static#t=x=()=>(this.\u0275fac=function(k){return new(k||V)},this.\u0275mod=s.$C({type:V}),this.\u0275inj=g.G2t({imports:[p.MD,n.T,i.MC,z.x,m._,c.J,o.U,I.l,v.U,P.G,R.C]}))}return x(),V})()},90959:(q,U,e)=>{e.d(U,{j:()=>c});var p=e(73664),z=e(83100),n=e(3245),i=e(24247);let c=(()=>{var o;class v{constructor(){this.enablePopover=!0,this.truncateLongName=!1,this.linked=!0}ngOnInit(){if(void 0===this.variant)throw new Error("cvc-feature-variant-tag requires LinkableVariant input, none supplied.");if(this.variant.feature&&(this.feature=this.variant.feature),void 0===this.feature)throw new Error("cvc-feature-variant-tag requires a Feature, either as an input or on the Variant")}static#t=o=()=>(this.\u0275fac=function(I){return new(I||v)},this.\u0275cmp=p.VBU({type:v,selectors:[["cvc-feature-variant-tag"]],inputs:{variant:"variant",feature:"feature",enablePopover:"enablePopover",truncateLongName:"truncateLongName",linked:"linked"},standalone:!1,decls:3,vars:8,consts:[[3,"feature","enablePopover","linked","truncateLongName"],[3,"variant","enablePopover","linked","truncateLongName"]],template:function(I,R){1&I&&(p.j41(0,"cvc-tag-group"),p.nrm(1,"cvc-feature-tag",0)(2,"cvc-variant-tag",1),p.k0s()),2&I&&(p.R7$(),p.Y8G("feature",R.feature)("enablePopover",R.enablePopover)("linked",R.linked)("truncateLongName",R.truncateLongName),p.R7$(),p.Y8G("variant",R.variant)("enablePopover",R.enablePopover)("linked",R.linked)("truncateLongName",R.truncateLongName))},dependencies:[z.V,n._,i.L],styles:["[_nghost-%COMP%]     nz-tag.rejected, [_nghost-%COMP%]     nz-tag.submitted, [_nghost-%COMP%]     nz-tag.accepted, [_nghost-%COMP%]     nz-tag.deprecated{border-right-width:2px}[_nghost-%COMP%]     nz-tag.rejected, [_nghost-%COMP%]     nz-tag.deprecated{border-color:#e6e6e6;background-color:#fff;color:#999999d9}[_nghost-%COMP%]     nz-tag.submitted{border-color:#ffe58f}[_nghost-%COMP%]     nz-tag.accepted{border-color:#b7eb8f}[_nghost-%COMP%]{display:inline-block}"],changeDetection:0}))}return o(),v})()},96848:(q,U,e)=>{e.d(U,{w:()=>n});var p=e(55152),z=e(73664);let n=(()=>{var i;class c{transform(v){return void 0!==v&&(0,p.MF)(v)}static#t=i=()=>(this.\u0275fac=function(m){return new(m||c)},this.\u0275pipe=z.EJ8({name:"canPerformApprovalActions",type:c,pure:!0}))}return i(),c})()}}]);