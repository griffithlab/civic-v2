"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[8997],{6404:(_,c,n)=>{n.d(c,{v:()=>v});var u=n(177),d=n(8927),p=n(513),f=n(2229),i=n(776),C=n(5316),m=n(3953);let v=(()=>{class l{static#e=this.\u0275fac=function(h){return new(h||l)};static#t=this.\u0275mod=m.$C({type:l});static#r=this.\u0275inj=m.G2t({imports:[u.MD,d.PQ,p.Zw,f.m,C.P,i.s]})}return l})()},2276:(_,c,n)=>{n.d(c,{v:()=>y});var u=n(1635),d=n(9417),p=n(9894),f=n(1226),i=n(5741);const E=(0,n(7480).A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Variant"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{xs:24,md:12,lg:8},{xs:24,md:12,lg:8},{xs:24,lg:8}]}},fieldGroup:[{key:"featureId",type:"feature-select",props:{description:"Enter an Entrez Gene for this Variant",required:!0,canChangeFeatureType:!1}},{key:"name",type:"base-input",props:{placeholder:"Enter a name for this Variant",description:"Enter the name of the Variant according to the <a href='https://civic.readthedocs.io/en/latest/model/variants/name.html#curating-variant-names' target='blank'>Variant Curation SOP</a>",label:"Name",required:!0,rows:1}},{key:"aliases",type:"tag-multi-input",props:{label:"Aliases",description:"List any aliases commonly used to refer to this Variant",placeholder:"Enter Alias and hit return"}}]},{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{xs:24,lg:12,xl:6,xxl:8},{xs:24,lg:12,xl:6,xxl:8},{xs:24,xl:12,xxl:8}]}},fieldGroup:[{key:"hgvsDescriptions",type:"tag-multi-input",props:{label:"HGVS Descriptions",description:"Enter any HGVS nomenclature descriptions of this Variant",tooltip:"Human Genome Variation Society nomenclature descriptions",placeholder:"Enter HGVS and hit return"}},{key:"variantTypeIds",type:"variant-type-multi-select"},{key:"clinvarIds",type:"clinvar-multi-input",wrappers:["form-field"],props:{label:"ClinVar IDs"}}]},{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{wrappers:["form-card"],props:{formCardOptions:{title:"Primary (5') Coordinates",size:"small"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{responsive:{xs:24,md:12,lg:8,xxl:6}}},fieldGroup:[{key:"referenceBuild",type:"reference-build-select"},{key:"ensemblVersion",type:"base-input",validators:{nccnVersionNumber:{expression:e=>!e.value||/^\d{2,3}$/.test(e.value),message:(e,s)=>`"${s.formControl?.value}" does not appear to be an Ensembl version number`}},props:{label:"Ensembl Version",description:"Enter a valid Ensembl database version (e.g. 75)"}},{key:"referenceBases",type:"base-input",validators:{nccnVersionNumber:{expression:e=>!e.value||/^[ACTG\\]+$/.test(e.value),message:(e,s)=>`"${s.formControl?.value}" contains invalid characters.`}},props:{label:"Reference Bases",description:"The nucleotide(s) of the reference genome affected by the variant. Only used for SNVs and Indels (otherwise leave blank)"}},{key:"variantBases",type:"base-input",validators:{nccnVersionNumber:{expression:e=>!e.value||/^[ACTG\\]+$/.test(e.value),message:(e,s)=>`"${s.formControl?.value}" contains invalid characters.`}},props:{label:"Variant Bases",description:"The nucleotide(s) of the variant allele. Only used for SNVs and Indels (otherwise leave blank)"}},{key:"chromosome",type:"base-select",props:{label:"Chromosome",options:i.Kd,description:"Specify the chromosome in which this variant occurs (e.g. 17)."}},{key:"start",type:"base-input",validators:{isNumeric:{expression:e=>!e.value||/^\d+$/.test(e.value),message:(e,s)=>"Start coordinate must be numeric"}},props:{label:"Start",description:"Enter the left/first coordinate of this variant. Must be \u2264 the Stop coordinate. Coordinate must be compatible with the selected reference build."}},{key:"stop",type:"base-input",validators:{isNumeric:{expression:e=>!e.value||/^\d+$/.test(e.value),message:(e,s)=>"Stop coordinate must be numeric"}},props:{label:"Stop",description:"Provide the right/second coordinate of this variant. Must be \u2265 the Start coordinate. Coordinate must be compatible with the selected reference build."}},{key:"representativeTranscript",type:"base-input",props:{label:"Representative Transcript",description:"Specify a transcript ID, including version number (e.g. ENST00000348159.4, the canonical transcript defined by Ensembl)."}}]}]},{wrappers:["form-card"],props:{formCardOptions:{title:"Secondary (3') Coordinates",size:"small"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{responsive:{xs:24,md:12,lg:8,xxl:6}}},fieldGroup:[{key:"chromosome2",type:"base-select",props:{label:"Chromosome",options:i.Kd,description:"If this variant is a fusion (e.g. BCR-ABL1), specify the chromosome name, coordinates, and representative transcript for the 3-prime partner."}},{key:"start2",type:"base-input",validators:{isNumeric:{expression:e=>!e.value||/^\d+$/.test(e.value),message:(e,s)=>"Start coordinate must be numeric"}},props:{label:"Start",description:"Enter the left/first coordinate of this 3-prime partner fusion variant. Must be \u2264 the Stop coordinate. Coordinate must be compatible with the selected reference build."}},{key:"stop2",type:"base-input",validators:{isNumeric:{expression:e=>!e.value||/^\d+$/.test(e.value),message:(e,s)=>"Stop coordinate must be numeric"}},props:{label:"Stop",description:"Provide the right/second coordinate of this 3-prime partner fusion variant. Must be \u2265 the Start coordinate. Coordinate must be compatible with the selected reference build."}},{key:"representativeTranscript2",type:"base-input",props:{label:"Representative Transcript",description:"Specify a transcript ID, including version number (e.g. ENST00000348159.4, the canonical transcript defined by Ensembl)."}}]}]}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",placeholder:"Please enter a comment describing your revisions.",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Variant Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{name:void 0,aliases:void 0,hgvsDescriptions:void 0,clinvarIds:void 0,variantTypeIds:void 0,referenceBuild:void 0,ensemblVersion:void 0,chromosome:void 0,start:void 0,stop:void 0,representativeTranscript:void 0,chromosome2:void 0,start2:void 0,stop2:void 0,representativeTranscript2:void 0,featureId:void 0,referenceBases:void 0,variantBases:void 0},comment:void 0,organizationId:void 0});let G=e=>"NONE FOUND"==e[0]?{noneFound:!0}:"N/A"==e[0]?{notApplicable:!0}:{ids:e.map(s=>+s)};var r=n(3953),V=n(9145),T=n(4222),R=n(177),x=n(8927),S=n(8524),B=n(8721);const F=()=>({});function D(e,s){if(1&e&&(r.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),r.j41(1,"a",4),r.EFF(2,"here."),r.k0s()),2&e){const t=r.XpG();r.R7$(),r.FS9("href",t.url,r.B4B)}}function M(e,s){if(1&e){const t=r.RV6();r.j41(0,"form",5),r.bIt("ngSubmit",function(){r.eBV(t);const a=r.XpG();return r.Njj(a.onSubmit(a.model))}),r.j41(1,"formly-form",6),r.bIt("modelChange",function(a){r.eBV(t);const b=r.XpG();return r.Njj(b.model=a)}),r.k0s()()}if(2&e){const t=r.XpG();r.Y8G("formGroup",t.form),r.R7$(),r.Y8G("form",t.form)("fields",t.fields)("model",t.model)("options",r.lJ4(5,F))}}function O(e,s){1&e&&r.EFF(0," Loading Variant... ")}let y=class g{constructor(s,t,o,a){this.revisableFieldsGQL=s,this.submitRevisionsGQL=t,this.networkErrorService=o,this.cdr=a,this.form=new d.J3({}),this.fields=E,this.reviseVariantMutator=new f.E(o)}ngOnInit(){this.url=`/variants/${this.variantId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({variantId:this.variantId}).pipe((0,p.s)(this)).subscribe({next:({data:{variant:s}})=>{var e;s&&"GeneVariant"==s.__typename&&(this.model={id:s.id,fields:(e=s,{name:e.name,aliases:e.variantAliases,hgvsDescriptions:e.hgvsDescriptions,clinvarIds:e.clinvarIds,variantTypeIds:e.variantTypes.map(s=>s.id),referenceBuild:e.referenceBuild,ensemblVersion:e.ensemblVersion,chromosome:e.primaryCoordinates?.chromosome,start:e.primaryCoordinates?.start,stop:e.primaryCoordinates?.stop,representativeTranscript:e.primaryCoordinates?.representativeTranscript,chromosome2:e.secondaryCoordinates?.chromosome,start2:e.secondaryCoordinates?.start,stop2:e.secondaryCoordinates?.stop,representativeTranscript2:e.secondaryCoordinates?.representativeTranscript,featureId:e.feature.id,referenceBases:e.referenceBases,variantBases:e.variantBases})},this.cdr.detectChanges())},error:s=>{console.error("Error retrieving Variant."),console.error(s)},complete:()=>{}})}onSubmit(s){if(!this.variantId)return;let t=function h(e,s){const t=s.fields;if(s.comment&&t.name&&t.featureId)return{id:e,fields:{name:t.name,aliases:t.aliases||[],hgvsDescriptions:t.hgvsDescriptions||[],clinvarIds:G(t.clinvarIds||[]),variantTypeIds:t.variantTypeIds||[],referenceBuild:i.pz(t.referenceBuild),ensemblVersion:i.pz(t.ensemblVersion?+t.ensemblVersion:void 0),primaryCoordinates:{chromosome:t.chromosome,start:t.start?+t.start:void 0,stop:t.stop?+t.stop:void 0,representativeTranscript:t.representativeTranscript},secondaryCoordinates:{chromosome:t.chromosome2,start:t.start2?+t.start2:void 0,stop:t.stop2?+t.stop2:void 0,representativeTranscript:t.representativeTranscript2},featureId:t.featureId,referenceBases:i.q2(t.referenceBases),variantBases:i.q2(t.variantBases)},organizationId:s.organizationId,comment:s.comment}}(this.variantId,s);t&&(this.mutationState=this.reviseVariantMutator.mutate(this.submitRevisionsGQL,{input:t}))}static#e=this.\u0275fac=function(t){return new(t||g)(r.rXU(V.$Pl),r.rXU(V.QVS),r.rXU(T.N),r.rXU(r.gRc))};static#t=this.\u0275cmp=r.VBU({type:g,selectors:[["cvc-gene-variant-revise-form"]],inputs:{variantId:"variantId"},decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Variant",3,"redirectUrl","mutationState","successMessage"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(t,o){if(1&t&&(r.j41(0,"cvc-form-submission-status-display",2),r.DNE(1,D,3,1,"ng-template",null,0,r.C5r)(3,M,2,6,"form",3)(4,O,1,0,"ng-template",null,1,r.C5r),r.k0s()),2&t){const a=r.sdS(2),b=r.sdS(5);r.Y8G("redirectUrl",o.url)("mutationState",o.mutationState)("successMessage",a),r.R7$(3),r.Y8G("ngIf",o.model)("ngIfElse",b)}},dependencies:[R.bT,x.CA,d.qT,d.cb,d.j4,S.aF,B.G],encapsulation:2,changeDetection:0})};y=(0,u.Cg)([(0,p.d)()],y)}}]);