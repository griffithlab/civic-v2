"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[885],{885:(it,h,n)=>{n.r(h),n.d(h,{VariantGroupsAddModule:()=>ot});var p=n(9808),d=n(325),G=n(4850),t=n(5e3),V=n(9350),S=n(8992),u=n(1945),v=n(647),m=n(1894),M=n(8616),y=n(6949);function O(e,a){1&e&&(t.TgZ(0,"div"),t._UZ(1,"router-outlet"),t.qZA())}function A(e,a){1&e&&(t.TgZ(0,"nz-row",7),t.TgZ(1,"div",8),t._UZ(2,"cvc-login-prompt"),t.qZA(),t.qZA())}let T=(()=>{class e{constructor(r){this.viewerService=r}ngOnInit(){this.isSignedIn$=this.viewerService.viewer$.pipe((0,G.U)(r=>r.signedIn))}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(V.a))},e.\u0275cmp=t.Xpm({type:e,selectors:[["cvc-variant-groups-add-view"]],decls:13,vars:4,consts:[["displayName","New"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzType","civic:evidence"],[1,"content"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["nzSpan","24","nzJustify","center"],["nz-col","","nzSpan","6"]],template:function(r,o){if(1&r&&(t._UZ(0,"cvc-section-navigation",0),t.TgZ(1,"nz-page-header",1),t.TgZ(2,"nz-page-header-title",2),t._UZ(3,"i",3),t._uU(4," Add New Variant Group "),t.qZA(),t.TgZ(5,"nz-page-header-subtitle"),t._uU(6," Submit and review new Variant Groups "),t.qZA(),t.TgZ(7,"nz-page-header-content"),t.TgZ(8,"div",4),t.YNc(9,O,2,0,"div",5),t.ALo(10,"ngrxPush"),t.YNc(11,A,3,0,"ng-template",null,6,t.W1O),t.qZA(),t.qZA(),t.qZA()),2&r){const i=t.MAs(12);t.xp6(9),t.Q6J("ngIf",t.lcZ(10,2,o.isSignedIn$))("ngIfElse",i)}},directives:[S.I,u.$O,u.u9,v.Ls,u.yG,u.u5,p.O5,d.lC,m.SK,m.t3,M.u],pipes:[y.fM],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),e})();var c=n(8776),Z=n(7462),b=n(4181),C=n(8390),P=n(8979),F=n(4623),l=n(4182),I=n(5109),g=n(4546),x=n(2359),w=n(6042),J=n(7525),N=n(7008),U=n(5472),L=n(3773),$=n(7075),Q=n(4889);let Y=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.ez,l.UX,d.Bz,c.X0,g.U5,x.L,m.Jb,w.sL,J.j,c.X0,Z.o,b.O,C.N,P.N,F.K,N.B,U.r,L.g,b.O,$.l,Q.E,I.s]]}),e})(),B=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.ez,Y]]}),e})();var z=n(3077),j=n(6123),R=n(8929),f=n(7625),X=n(712),D=n(9169),E=n(822);function K(e,a){1&e&&t.GkF(0)}function W(e,a){if(1&e){const r=t.EpF();t.TgZ(0,"formly-form",4),t.NdJ("modelChange",function(i){return t.CHM(r),t.oxw().formModel=i}),t.qZA()}if(2&e){const r=t.oxw();t.Q6J("form",r.formGroup)("fields",r.formFields)("model",r.formModel)}}function H(e,a){if(1&e&&(t.TgZ(0,"nz-form-item"),t._UZ(1,"cvc-form-errors-alert",6),t.qZA()),2&e){const r=t.oxw(2);t.xp6(1),t.Q6J("errors",r.errorMessages)}}function _(e,a){if(1&e&&(t.TgZ(0,"p"),t._uU(1,"View "),t.TgZ(2,"a",10),t._uU(3,"its details"),t.qZA(),t._uU(4,"."),t.qZA()),2&e){const r=t.oxw(3);t.xp6(2),t.MGl("routerLink","/variant-groups/",r.newId,"/summary")}}function k(e,a){if(1&e&&(t.ynx(0),t._UZ(1,"nz-alert",7),t.YNc(2,_,5,1,"ng-template",8,9,t.W1O),t.BQk()),2&e){const r=t.MAs(3);t.xp6(1),t.Q6J("nzDescription",r)}}function q(e,a){if(1&e&&(t.YNc(0,H,2,1,"nz-form-item",5),t.YNc(1,k,4,1,"ng-container",5)),2&e){const r=t.oxw();t.Q6J("ngIf",r.errorMessages.length>0),t.xp6(1),t.Q6J("ngIf",r.success)}}let tt=(()=>{class e{constructor(r,o){this.submitVariantGroupGQL=r,this.networkErrorService=o,this.destroy$=new R.xQ,this.formGroup=new l.cw({}),this.success=!1,this.errorMessages=[],this.loading=!1,this.submitVariantGroupMutator=new j.U(o),this.formFields=[{key:"fields",wrappers:["form-container"],templateOptions:{label:"Add Variant Group Form"},fieldGroup:[{key:"name",type:"input",wrappers:["form-field"],templateOptions:{label:"Variant Group Name",required:!0}},{key:"description",type:"cvc-textarea",templateOptions:{label:"Description",helpText:"A brief description of this new variant group.",placeholder:"No description provided",required:!0}},{key:"sources",type:"multi-field",wrappers:["form-field"],templateOptions:{label:"Source",helpText:"Add any sources upon which your description depends.",addText:"Add a Source"},fieldArray:{type:"source-input",templateOptions:{hideLabel:!0,required:!0}}},{key:"variants",type:"multi-field",wrappers:["form-field"],templateOptions:{label:"Variants",required:!0,helpText:"Specify the variants that comprise this Variant Group.",addText:"Add a Variant "},fieldArray:{type:"variant-input",templateOptions:{hideLabel:!0,required:!0,allowCreate:!1}}},{key:"comment",type:"comment-textarea",templateOptions:{label:"Comment",helpText:"Please provide any additional comments you wish to make about this evidence item. This comment will appear as the first comment in this item's comment thread.",placeholder:"Please enter a comment describing your revision.",required:!0,minLength:10}},{key:"cancel",type:"cancel-button"},{key:"organization",type:"org-submit-button",templateOptions:{submitLabel:"Create Variant Group",submitSize:"large"}}]}]}submitVariantGroup(r){let o=this.toSubmitInput(r);if(o){let i=this.submitVariantGroupMutator.mutate(this.submitVariantGroupGQL,{input:o},s=>{this.newId=s.submitVariantGroup.variantGroup.id});i.submitSuccess$.pipe((0,f.R)(this.destroy$)).subscribe(s=>{s&&(this.success=!0)}),i.submitError$.pipe((0,f.R)(this.destroy$)).subscribe(s=>{s&&(this.errorMessages=s,this.success=!1)}),i.isSubmitting$.pipe((0,f.R)(this.destroy$)).subscribe(s=>{this.loading=s})}}toSubmitInput(r){var o;if(r)return{description:r.fields.description,name:r.fields.name,organizationId:null===(o=r.fields.organization)||void 0===o?void 0:o.id,sourceIds:r.fields.sources?r.fields.sources.map(i=>i.id).filter(z.$):[],variantIds:r.fields.variants.map(i=>i.id).filter(z.$)}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(X.tji),t.Y36(D.Y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["cvc-variant-group-submit-form"]],decls:5,vars:3,consts:[["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[4,"ngTemplateOutlet"],[3,"form","fields","model","modelChange",4,"ngIf"],["formMessages",""],[3,"form","fields","model","modelChange"],[4,"ngIf"],[3,"errors"],["nzType","success","nzMessage","Variant Group Submitted","nzShowIcon","",3,"nzDescription"],["nzSize","small"],["successMessage",""],[3,"routerLink"]],template:function(r,o){if(1&r&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submitVariantGroup(o.formModel)}),t.YNc(1,K,1,0,"ng-container",1),t.YNc(2,W,1,3,"formly-form",2),t.qZA(),t.YNc(3,q,2,2,"ng-template",null,3,t.W1O)),2&r){const i=t.MAs(4);t.Q6J("formGroup",o.formGroup),t.xp6(1),t.Q6J("ngTemplateOutlet",i),t.xp6(1),t.Q6J("ngIf",!o.success)}},directives:[l._Y,l.JL,g.Lr,l.sg,p.tP,p.O5,c.T7,m.SK,g.Nx,E.V,x.r,d.yS],styles:[""]}),e})();const et=[{path:"",component:T,children:[{path:"",redirectTo:"submit",pathMatch:"full"},{path:"submit",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["cvc-variant-groups-submit-page"]],decls:1,vars:0,template:function(r,o){1&r&&t._UZ(0,"cvc-variant-group-submit-form")},directives:[tt],styles:[""]}),e})(),data:{breadcrumb:"Submit New Variant Groups"}}]}];let rt=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.Bz.forChild(et),B],d.Bz]}),e})();var nt=n(9386),at=n(5630);let ot=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.ez,rt,u.KJ,v.PV,at.D,nt.a,m.Jb,y.WG]]}),e})()}}]);