"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[4509],{8909:(I,p,e)=>{e.d(p,{m:()=>E});var O=e(9808),l=e(9401),c=e(8369),n=e(209),d=e(4867),h=e(7677),v=e(3309),g=e(7345),a=e(9476),m=e(8481),f=e(647),u=e(5e3);let E=(()=>{class M{}return M.\u0275fac=function(T){return new(T||M)},M.\u0275mod=u.oAB({type:M}),M.\u0275inj=u.cJS({imports:[[O.ez,m.X,f.PV,l.y,c.W,n.i,d.Q,h.G,v.U,g.W,a.L]]}),M})()},9401:(I,p,e)=>{e.d(p,{y:()=>v});var O=e(9808),l=e(8481),c=e(647),n=e(325),d=e(9444),h=e(5e3);let v=(()=>{class g{}return g.\u0275fac=function(m){return new(m||g)},g.\u0275mod=h.oAB({type:g}),g.\u0275inj=h.cJS({imports:[[O.ez,n.Bz,d.s,l.X,c.PV]]}),g})()},6081:(I,p,e)=>{e.d(p,{J:()=>u});var O=e(9808),l=e(3630),c=e(3098),n=e(7484),d=e(6949),h=e(897),v=e(9476),g=e(5473),a=e(5737),m=e(1894),f=e(5e3);let u=(()=>{class E{}return E.\u0275fac=function(C){return new(C||E)},E.\u0275mod=f.oAB({type:E}),E.\u0275inj=f.cJS({imports:[[O.ez,d.WG,m.Jb,n.vh,c.q6,a.S,l.X,h.$,v.L,g.H]]}),E})()},7345:(I,p,e)=>{e.d(p,{W:()=>g});var O=e(9808),l=e(325),c=e(3610),n=e(8481),d=e(647),h=e(6081),v=e(5e3);let g=(()=>{class a{}return a.\u0275fac=function(f){return new(f||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[[O.ez,l.Bz,h.J,c.$6,n.X,d.PV]]}),a})()},4509:(I,p,e)=>{e.d(p,{w:()=>T});var O=e(9808),l=e(4182),c=e(7484),n=e(4546),d=e(7008),h=e(1825),v=e(4375),g=e(6042),a=e(4623),m=e(868),f=e(6949),u=e(8909),E=e(7525),M=e(4921),C=e(5e3);let T=(()=>{class D{}return D.\u0275fac=function(B){return new(B||D)},D.\u0275mod=C.oAB({type:D}),D.\u0275inj=C.cJS({imports:[[O.ez,l.UX,f.WG,g.sL,c.vh,m.we,n.U5,E.j,M.Gl,l.u5,d.B,h.A,v.R,u.m,a.K]]}),D})()},4921:(I,p,e)=>{e.d(p,{YW:()=>W,Gl:()=>j,O3:()=>x,jO:()=>U});var O=e(226),l=e(2845),c=e(9808),n=e(5e3),d=e(4182),h=e(647),v=e(8929),g=e(2916),a=e(6787),m=e(3753),f=e(655),u=e(1159),E=e(7429),M=e(1059),C=e(7545),T=e(6950),D=e(1721);const A=["items"];function B(i,_){1&i&&n.GkF(0)}const K=function(i){return{$implicit:i}};function S(i,_){if(1&i&&(n.ynx(0),n.YNc(1,B,1,0,"ng-container",8),n.BQk()),2&i){const t=n.oxw().$implicit,o=n.oxw(2);n.xp6(1),n.Q6J("ngTemplateOutlet",o.suggestionTemplate)("ngTemplateOutletContext",n.VKq(2,K,t))}}function N(i,_){if(1&i&&n._uU(0),2&i){const t=n.oxw().$implicit,o=n.oxw(2);n.Oqu(o.nzValueWith(t))}}function F(i,_){if(1&i){const t=n.EpF();n.TgZ(0,"li",4,5),n.NdJ("click",function(){const r=n.CHM(t).$implicit;return n.oxw(2).selectSuggestion(r)}),n.YNc(2,S,2,4,"ng-container",6),n.YNc(3,N,1,1,"ng-template",null,7,n.W1O),n.qZA()}if(2&i){const t=_.index,o=n.MAs(4),s=n.oxw(2);n.ekj("focus",t===s.activeIndex),n.xp6(2),n.Q6J("ngIf",s.suggestionTemplate)("ngIfElse",o)}}function w(i,_){1&i&&(n.TgZ(0,"span"),n._UZ(1,"i",11),n.qZA())}function V(i,_){if(1&i&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&i){const t=n.oxw(3);n.xp6(1),n.Oqu(t.nzNotFoundContent)}}function Y(i,_){if(1&i&&(n.TgZ(0,"li",9),n.YNc(1,w,2,0,"span",10),n.YNc(2,V,2,1,"span",10),n.qZA()),2&i){const t=n.oxw(2);n.xp6(1),n.Q6J("ngIf",t.nzLoading),n.xp6(1),n.Q6J("ngIf",!t.nzLoading)}}function H(i,_){if(1&i&&(n.TgZ(0,"ul",1),n.YNc(1,F,5,4,"li",2),n.YNc(2,Y,3,2,"li",3),n.qZA()),2&i){const t=n.oxw();n.xp6(1),n.Q6J("ngForOf",t.filteredSuggestions),n.xp6(1),n.Q6J("ngIf",0===t.filteredSuggestions.length)}}const J=["*"];let x=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=n.lG2({type:i,selectors:[["","nzMentionSuggestion",""]],exportAs:["nzMentionSuggestion"]}),i})();let L=(()=>{class i{constructor(){this.triggerChange$=new v.xQ}triggerChanged(){return this.triggerChange$.asObservable()}registerTrigger(t){this.trigger!==t&&(this.trigger=t,this.triggerChange$.next(t))}ngOnDestroy(){this.triggerChange$.complete()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=n.Yz7({token:i,factory:i.\u0275fac}),i})();const G={provide:d.JU,useExisting:(0,n.Gpc)(()=>U),multi:!0};let U=(()=>{class i{constructor(t,o){this.el=t,this.nzMentionService=o,this.onChange=()=>{},this.onTouched=()=>{},this.onFocusin=new n.vpe,this.onBlur=new n.vpe,this.onInput=new n.vpe,this.onKeydown=new n.vpe,this.onClick=new n.vpe}completeEvents(){this.onFocusin.complete(),this.onBlur.complete(),this.onInput.complete(),this.onKeydown.complete(),this.onClick.complete()}focus(t){this.el.nativeElement.focus(),this.el.nativeElement.setSelectionRange(t,t)}insertMention(t){const o=this.el.nativeElement.value,s=`${t.mention} `,r=[o.slice(0,t.startPos+1),s,o.slice(t.endPos,o.length)].join("");this.el.nativeElement.value=r,this.focus(t.startPos+s.length+1),this.onChange(r),this.value=r}writeValue(t){this.value=t,this.el.nativeElement.value="string"==typeof t?t:""}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}ngAfterViewInit(){this.nzMentionService.registerTrigger(this)}ngOnDestroy(){this.completeEvents()}}return i.\u0275fac=function(t){return new(t||i)(n.Y36(n.SBq),n.Y36(L))},i.\u0275dir=n.lG2({type:i,selectors:[["input","nzMentionTrigger",""],["textarea","nzMentionTrigger",""]],hostAttrs:["autocomplete","off"],hostBindings:function(t,o){1&t&&n.NdJ("focusin",function(){return o.onFocusin.emit()})("blur",function(){return o.onBlur.emit()})("input",function(r){return o.onInput.emit(r)})("keydown",function(r){return o.onKeydown.emit(r)})("click",function(r){return o.onClick.emit(r)})},exportAs:["nzMentionTrigger"],features:[n._Bn([G])]}),i})(),W=(()=>{class i{constructor(t,o,s,r,P,R){this.ngZone=t,this.ngDocument=o,this.cdr=s,this.overlay=r,this.viewContainerRef=P,this.nzMentionService=R,this.nzValueWith=y=>y,this.nzPrefix="@",this.nzLoading=!1,this.nzNotFoundContent="\u65e0\u5339\u914d\u7ed3\u679c\uff0c\u8f7b\u6572\u7a7a\u683c\u5b8c\u6210\u8f93\u5165",this.nzPlacement="bottom",this.nzSuggestions=[],this.nzOnSelect=new n.vpe,this.nzOnSearchChange=new n.vpe,this.isOpen=!1,this.filteredSuggestions=[],this.suggestionTemplate=null,this.activeIndex=-1,this.previousValue=null,this.cursorMention=null,this.overlayRef=null}set suggestionChild(t){t&&(this.suggestionTemplate=t)}get triggerNativeElement(){return this.trigger.el.nativeElement}get focusItemElement(){var t;const o=null===(t=this.items)||void 0===t?void 0:t.toArray();return o&&o[this.activeIndex]?o[this.activeIndex].nativeElement:null}ngOnInit(){this.nzMentionService.triggerChanged().subscribe(t=>{this.trigger=t,this.bindTriggerEvents(),this.closeDropdown(),this.overlayRef=null})}ngOnChanges(t){t.hasOwnProperty("nzSuggestions")&&this.isOpen&&(this.previousValue=null,this.activeIndex=-1,this.resetDropdown(!1))}ngAfterViewInit(){this.items.changes.pipe((0,M.O)(this.items),(0,C.w)(()=>{const t=this.items.toArray();return new g.y(o=>this.ngZone.runOutsideAngular(()=>(0,a.T)(...t.map(s=>(0,m.R)(s.nativeElement,"mousedown"))).subscribe(o)))})).subscribe(t=>{t.preventDefault()})}ngOnDestroy(){this.closeDropdown()}closeDropdown(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.overlayRef.detach(),this.overlayOutsideClickSubscription.unsubscribe(),this.isOpen=!1,this.cdr.markForCheck())}openDropdown(){this.attachOverlay(),this.isOpen=!0,this.cdr.markForCheck()}getMentions(){return this.trigger?(0,D.qR)(this.trigger.value,this.nzPrefix):[]}selectSuggestion(t){const o=this.nzValueWith(t);this.trigger.insertMention({mention:o,startPos:this.cursorMentionStart,endPos:this.cursorMentionEnd}),this.nzOnSelect.emit(t),this.closeDropdown(),this.activeIndex=-1}handleInput(t){const o=t.target;this.trigger.onChange(o.value),this.trigger.value=o.value,this.resetDropdown()}handleKeydown(t){const o=t.keyCode;if(this.isOpen&&o===u.K5&&-1!==this.activeIndex&&this.filteredSuggestions.length)this.selectSuggestion(this.filteredSuggestions[this.activeIndex]),t.preventDefault();else if(o===u.oh||o===u.SV)this.resetDropdown(),t.stopPropagation();else{if(this.isOpen&&(o===u.Mf||o===u.hY))return void this.closeDropdown();this.isOpen&&o===u.LH&&(this.setPreviousItemActive(),t.preventDefault(),t.stopPropagation()),this.isOpen&&o===u.JH&&(this.setNextItemActive(),t.preventDefault(),t.stopPropagation())}}handleClick(){this.resetDropdown()}bindTriggerEvents(){this.trigger.onInput.subscribe(t=>this.handleInput(t)),this.trigger.onKeydown.subscribe(t=>this.handleKeydown(t)),this.trigger.onClick.subscribe(()=>this.handleClick())}suggestionsFilter(t,o){const s=t.substring(1);if(this.previousValue===t&&t!==this.cursorMention[0])return;this.previousValue=t,o&&this.nzOnSearchChange.emit({value:this.cursorMention.substring(1),prefix:this.cursorMention[0]});const r=s.toLowerCase();this.filteredSuggestions=this.nzSuggestions.filter(P=>this.nzValueWith(P).toLowerCase().includes(r))}resetDropdown(t=!0){if(this.resetCursorMention(),"string"!=typeof this.cursorMention||!this.canOpen())return void this.closeDropdown();this.suggestionsFilter(this.cursorMention,t);const o=this.filteredSuggestions.indexOf(this.cursorMention.substring(1));this.activeIndex=o>=0?o:0,this.openDropdown()}setNextItemActive(){this.activeIndex=this.activeIndex+1<=this.filteredSuggestions.length-1?this.activeIndex+1:0,this.cdr.markForCheck(),this.scrollToFocusItem()}setPreviousItemActive(){this.activeIndex=this.activeIndex-1<0?this.filteredSuggestions.length-1:this.activeIndex-1,this.cdr.markForCheck(),this.scrollToFocusItem()}scrollToFocusItem(){this.focusItemElement&&this.focusItemElement.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}canOpen(){const t=this.triggerNativeElement;return!t.readOnly&&!t.disabled}resetCursorMention(){const t=this.triggerNativeElement.value.replace(/[\r\n]/g," ")||"",o=this.triggerNativeElement.selectionStart,s="string"==typeof this.nzPrefix?[this.nzPrefix]:this.nzPrefix;let r=s.length;for(;r>=0;){const P=t.lastIndexOf(s[r],o),R=t.indexOf(" ",o)>-1?t.indexOf(" ",o):t.length,y=t.substring(P,R);if(!(P>0&&" "!==t[P-1]||P<0||y.includes(s[r],1)||y.includes(" ")))return this.cursorMention=y,this.cursorMentionStart=P,void(this.cursorMentionEnd=R);this.cursorMention=null,this.cursorMentionStart=-1,this.cursorMentionEnd=-1,r--}}updatePositions(){const t=(0,D.Ly)(this.triggerNativeElement,this.cursorMentionStart),o=t.top-this.triggerNativeElement.getBoundingClientRect().height-this.triggerNativeElement.scrollTop+("bottom"===this.nzPlacement?t.height-6:-6);this.positionStrategy.withDefaultOffsetX(t.left-this.triggerNativeElement.scrollLeft).withDefaultOffsetY(o),"bottom"===this.nzPlacement&&this.positionStrategy.withPositions([...T.fG]),"top"===this.nzPlacement&&this.positionStrategy.withPositions([...T.A7]),this.positionStrategy.apply()}subscribeOverlayOutsideClick(){return(0,a.T)(this.overlayRef.outsidePointerEvents(),(0,m.R)(this.ngDocument,"touchend")).subscribe(t=>{var o;const s=t.target;this.isOpen&&s!==this.trigger.el.nativeElement&&!(null===(o=this.overlayRef)||void 0===o?void 0:o.overlayElement.contains(s))&&this.closeDropdown()})}attachOverlay(){this.overlayRef||(this.portal=new E.UE(this.suggestionsTemp,this.viewContainerRef),this.overlayRef=this.overlay.create(this.getOverlayConfig())),this.overlayRef&&!this.overlayRef.hasAttached()&&(this.overlayRef.attach(this.portal),this.overlayOutsideClickSubscription=this.subscribeOverlayOutsideClick()),this.updatePositions()}getOverlayConfig(){return new l.X_({positionStrategy:this.getOverlayPosition(),scrollStrategy:this.overlay.scrollStrategies.reposition(),disposeOnNavigation:!0})}getOverlayPosition(){const t=[new l.tR({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new l.tR({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"})];return this.positionStrategy=this.overlay.position().flexibleConnectedTo(this.trigger.el).withPositions(t).withFlexibleDimensions(!1).withPush(!1),this.positionStrategy}}return i.\u0275fac=function(t){return new(t||i)(n.Y36(n.R0b),n.Y36(c.K0,8),n.Y36(n.sBO),n.Y36(l.aV),n.Y36(n.s_b),n.Y36(L))},i.\u0275cmp=n.Xpm({type:i,selectors:[["nz-mention"]],contentQueries:function(t,o,s){if(1&t&&n.Suo(s,x,5,n.Rgc),2&t){let r;n.iGM(r=n.CRH())&&(o.suggestionChild=r.first)}},viewQuery:function(t,o){if(1&t&&(n.Gf(n.Rgc,5),n.Gf(A,5,n.SBq)),2&t){let s;n.iGM(s=n.CRH())&&(o.suggestionsTemp=s.first),n.iGM(s=n.CRH())&&(o.items=s)}},inputs:{nzValueWith:"nzValueWith",nzPrefix:"nzPrefix",nzLoading:"nzLoading",nzNotFoundContent:"nzNotFoundContent",nzPlacement:"nzPlacement",nzSuggestions:"nzSuggestions"},outputs:{nzOnSelect:"nzOnSelect",nzOnSearchChange:"nzOnSearchChange"},exportAs:["nzMention"],features:[n._Bn([L]),n.TTD],ngContentSelectors:J,decls:3,vars:0,consts:[["suggestions",""],[1,"ant-mention-dropdown"],["class","ant-mention-dropdown-item",3,"focus","click",4,"ngFor","ngForOf"],["class","ant-mention-dropdown-notfound ant-mention-dropdown-item",4,"ngIf"],[1,"ant-mention-dropdown-item",3,"click"],["items",""],[4,"ngIf","ngIfElse"],["defaultSuggestion",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-mention-dropdown-notfound","ant-mention-dropdown-item"],[4,"ngIf"],["nz-icon","","nzType","loading"]],template:function(t,o){1&t&&(n.F$t(),n.Hsn(0),n.YNc(1,H,3,2,"ng-template",null,0,n.W1O))},directives:[c.sg,c.O5,c.tP,h.Ls],encapsulation:2,changeDetection:0}),(0,f.gn)([(0,D.yF)()],i.prototype,"nzLoading",void 0),i})(),j=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[O.vT,c.ez,d.u5,l.U8,h.PV]]}),i})()}}]);