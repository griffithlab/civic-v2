"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[4355],{7036:(G,S,o)=>{o.d(S,{L:()=>mt});var r=o(7630),l=o(373),x=o(4850),t=o(5e3),n=o(9808),m=o(1894),C=o(8144),y=o(8929),T=o(7625),b=o(9350),E=o(2359),P=o(7484),F=o(7948),I=o(5737),J=o(6123),D=o(9169),N=o(6949),u=o(404),A=o(6042),v=o(2643),L=o(2683),Q=o(3610),Y=o(5017),B=o(3075),W=o(4546),z=o(9383),Z=o(7525),h=o(9180),U=o(8227),V=o(6612);function q(_,g){if(1&_){const s=t.EpF();t.TgZ(0,"nz-alert",4),t.NdJ("nzOnClose",function(){return t.CHM(s),t.oxw().onSuccessBannerClose()}),t.qZA()}}function nn(_,g){}function sn(_,g){1&_&&t.YNc(0,nn,0,0,"ng-template")}function tn(_,g){if(1&_&&(t.ynx(0),t.YNc(1,sn,1,0,null,9),t.BQk()),2&_){t.oxw(2);const s=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",s)}}function en(_,g){if(1&_&&(t.ynx(0),t.YNc(1,tn,2,1,"ng-container",5),t.BQk()),2&_){const s=t.oxw().ngrxLet,p=t.MAs(5),d=t.oxw();t.xp6(1),t.Q6J("ngIf",s.isEditor||s.isAdmin||d.flag.flaggingUser.id===s.id)("ngIfElse",p)}}function an(_,g){}function _n(_,g){1&_&&t.YNc(0,an,0,0,"ng-template")}function on(_,g){if(1&_&&(t.TgZ(0,"span",10),t.YNc(1,_n,1,0,null,9),t.qZA()),2&_){t.oxw();const s=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",s)}}function ln(_,g){}function cn(_,g){1&_&&t.YNc(0,ln,0,0,"ng-template")}function rn(_,g){if(1&_&&(t.TgZ(0,"span",11),t.YNc(1,cn,1,0,null,9),t.qZA()),2&_){t.oxw();const s=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",s)}}function $(_,g){if(1&_){const s=t.EpF();t.TgZ(0,"button",13),t.NdJ("nzPopoverVisibleChange",function(d){return t.CHM(s),t.oxw(3).flagResolvePopoverVisible=d})("click",function(){t.CHM(s);const d=t.oxw(3);return d.flagResolvePopoverVisible=!d.flagResolvePopoverVisible}),t._uU(1," Resolve Flag "),t._UZ(2,"i",14),t.qZA()}if(2&_){const s=t.oxw(2).ngrxLet,p=t.oxw(),d=t.MAs(3),M=t.MAs(5);t.Q6J("nzPopoverTitle",d)("nzPopoverVisible",p.flagResolvePopoverVisible)("nzPopoverContent",M)("nzPopoverTrigger",void 0)("disabled",!s.signedIn||s.isCurator&&p.flag.flaggingUser.id!=s.id)}}function X(_,g){if(1&_&&t.YNc(0,$,3,5,"button",12),2&_){const s=t.oxw(2);t.Q6J("ngIf",!s.success)}}function O(_,g){if(1&_&&(t.ynx(0),t.YNc(1,en,2,2,"ng-container",5),t.YNc(2,on,2,1,"ng-template",null,6,t.W1O),t.YNc(4,rn,2,1,"ng-template",null,7,t.W1O),t.YNc(6,X,1,1,"ng-template",null,8,t.W1O),t.BQk()),2&_){const s=g.ngrxLet,p=t.MAs(3);t.xp6(1),t.Q6J("ngIf",s.signedIn)("ngIfElse",p)}}const K=function(){return{float:"right"}};function H(_,g){if(1&_){const s=t.EpF();t._uU(0," Resolve Flag "),t.TgZ(1,"span",15)(2,"i",16),t.NdJ("click",function(){t.CHM(s);const d=t.oxw();return d.flagResolvePopoverVisible=!1,d.errorMessages=[]}),t.qZA()()}2&_&&(t.xp6(1),t.Q6J("ngStyle",t.DdM(1,K)))}function vn(_,g){if(1&_&&t._UZ(0,"nz-alert",25),2&_){t.oxw();const s=t.MAs(2);t.Q6J("nzDescription",s)}}function zn(_,g){if(1&_&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&_){const s=g.$implicit;t.xp6(1),t.hij(" ",s," ")}}function Cn(_,g){if(1&_&&(t.TgZ(0,"ul"),t.YNc(1,zn,2,1,"li",26),t.qZA()),2&_){const s=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",s.errorMessages)}}function xn(_,g){if(1&_){const s=t.EpF();t.YNc(0,vn,1,1,"nz-alert",17),t.YNc(1,Cn,2,1,"ng-template",null,18,t.W1O),t.TgZ(3,"nz-card",19)(4,"form",20),t.NdJ("ngSubmit",function(){return t.CHM(s),t.oxw().resolveFlag()}),t.TgZ(5,"cvc-comment-input-form",21),t.NdJ("commentChange",function(d){return t.CHM(s),t.oxw().comment=d}),t.qZA(),t.TgZ(6,"nz-spin",22)(7,"nz-form-item")(8,"nz-form-control")(9,"cvc-form-buttons")(10,"cvc-org-selector-btn-group",23),t.NdJ("selectedOrgChange",function(d){return t.CHM(s),t.oxw().onOrgSelected(d)}),t.TgZ(11,"button",24),t._uU(12," Resolve "),t.qZA()()()()()()()()}if(2&_){const s=t.oxw();t.Q6J("ngIf",s.errorMessages.length>0),t.xp6(5),t.Q6J("comment",s.comment),t.xp6(1),t.Q6J("nzSpinning",s.loading),t.xp6(5),t.Q6J("disabled",!(void 0!==s.comment&&s.comment.length>=10))}}let Tn=(()=>{class _{constructor(s,p,d){this.gql=s,this.viewerService=p,this.networkErrorService=d,this.errorMessages=[],this.loading=!1,this.success=!1,this.flagResolvePopoverVisible=!1,this.destroy$=new y.xQ,this.resolveFlagMutator=new J.U(d)}ngOnInit(){if(void 0===this.flag)throw new Error("Must pass a Flag in to resolve component.");this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(s=>{this.selectedOrg=s.mostRecentOrg})}onOrgSelected(s){this.selectedOrg=s}resolveFlag(){var s;if(this.comment){this.errorMessages=[];let p=this.resolveFlagMutator.mutate(this.gql,{input:{id:this.flag.id,comment:this.comment,organizationId:null===(s=this.selectedOrg)||void 0===s?void 0:s.id}});p.submitSuccess$.pipe((0,T.R)(this.destroy$)).subscribe(d=>{d&&(this.flagResolvePopoverVisible=!1,this.success=!0,this.flagResolvedCallback&&this.flagResolvedCallback())}),p.submitError$.pipe((0,T.R)(this.destroy$)).subscribe(d=>{d.length>0&&(this.success=!1,this.errorMessages=d)}),p.isSubmitting$.pipe((0,T.R)(this.destroy$)).subscribe(d=>{this.loading=d})}}onSuccessBannerClose(){this.success=!1,this.flagResolvedCallback&&this.flagResolvedCallback()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return _.\u0275fac=function(s){return new(s||_)(t.Y36(r.EwB),t.Y36(b.a),t.Y36(D.Y))},_.\u0275cmp=t.Xpm({type:_,selectors:[["cvc-flag-resolve-form"]],inputs:{flag:"flag",flagResolvedCallback:"flagResolvedCallback"},decls:6,vars:2,consts:[["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],[4,"ngrxLet"],["flagResolvePopoverTitleTemplate",""],["flagResolvePopoverContentTemplate",""],["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["noPermissions",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to resolve flag."],["nz-tooltip","","nzTooltipTitle","If you are not an editor, you can only resolve flags you opened."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click",4,"ngIf"],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click"],["nz-icon","","nzType","caret-down","nzTheme","outline"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription",4,"ngIf"],["errorContents",""],["nzType","inner",2,"width","300px"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[3,"selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription"],[4,"ngFor","ngForOf"]],template:function(s,p){1&s&&(t.YNc(0,q,1,0,"nz-alert",0),t.YNc(1,O,8,2,"ng-container",1),t.YNc(2,H,3,2,"ng-template",null,2,t.W1O),t.YNc(4,xn,13,4,"ng-template",null,3,t.W1O)),2&s&&(t.Q6J("ngIf",p.success),t.xp6(1),t.Q6J("ngrxLet",p.viewer$))},directives:[n.O5,E.r,N.eJ,n.tP,u.SY,A.ix,v.dQ,L.w,Q.lU,Y.Ls,n.PC,n.sg,P.bd,B._Y,B.JL,B.F,W.Lr,z.b,Z.W,m.SK,W.Nx,m.t3,W.Fd,h.Z,U.q,V.m],styles:[""]}),_})();var hn=o(3618),yn=o(125),Rn=o(4590),On=o(685),An=o(8625),Fn=o(160);function Ln(_,g){if(1&_){const s=t.EpF();t.TgZ(0,"nz-alert",5),t.NdJ("nzOnClose",function(){const M=t.CHM(s).$implicit;return t.oxw().onErrorBannerClose(M)}),t.qZA()}2&_&&t.Q6J("nzMessage",g.$implicit)}function Zn(_,g){if(1&_){const s=t.EpF();t.TgZ(0,"nz-alert",6),t.NdJ("nzOnClose",function(){return t.CHM(s),t.oxw().onSuccessBannerClose()}),t.qZA()}if(2&_){const s=t.oxw();t.MGl("nzMessage","Revision(s) successfully ",s.success,".")}}function bn(_,g){if(1&_&&t._UZ(0,"cvc-comment-body",15),2&_){const s=t.oxw(2).$implicit;t.Q6J("commentBodySegments",s.openComment.parsedComment)}}function Mn(_,g){if(1&_&&(t.ynx(0),t._UZ(1,"cvc-flag-resolve-form",16),t.BQk()),2&_){const s=t.oxw(2).$implicit,p=t.oxw(2);t.xp6(1),t.Q6J("flag",s)("flagResolvedCallback",p.flagResolvedCallback)}}function En(_,g){if(1&_&&(t.ynx(0),t._UZ(1,"cvc-comment-body",15),t.BQk()),2&_){const s=t.oxw(3).$implicit;t.xp6(1),t.Q6J("commentBodySegments",s.resolutionComment.parsedComment)}}function pn(_,g){if(1&_&&t._UZ(0,"cvc-user-tag",21),2&_){const s=t.oxw(3).$implicit;t.Q6J("user",s.resolvingUser)}}function gn(_,g){if(1&_&&(t.TgZ(0,"nz-row")(1,"nz-col",17),t.YNc(2,En,2,1,"ng-container",18),t.qZA(),t.TgZ(3,"nz-col",19),t._uU(4," Resolved By "),t.YNc(5,pn,1,1,"cvc-user-tag",20),t._uU(6),t.ALo(7,"timeago"),t.qZA()()),2&_){const s=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngIf",s.resolutionComment),t.xp6(3),t.Q6J("ngIf",void 0!==s.resolvingUser),t.xp6(1),t.hij(" ",t.lcZ(7,3,s.resolvedAt)," ")}}function Sn(_,g){if(1&_&&(t._UZ(0,"i",22),t.ALo(1,"entityColor"),t._uU(2)),2&_){const s=t.oxw(2).$implicit;t.Q6J("nzTwotoneColor",t.lcZ(1,2,"Flag")),t.xp6(2),t.hij(" FID",s.id," ")}}function Qn(_,g){if(1&_&&(t.TgZ(0,"span")(1,"span",26),t._uU(2,"Flagged By"),t.qZA(),t._UZ(3,"cvc-user-tag",21),t.TgZ(4,"span",26),t._uU(5),t.ALo(6,"timeago"),t.qZA()()),2&_){const s=t.oxw(3).$implicit;t.xp6(3),t.Q6J("user",s.flaggingUser),t.xp6(2),t.Oqu(t.lcZ(6,2,s.createdAt))}}function mn(_,g){if(1&_&&t._UZ(0,"cvc-status-tag",27),2&_){const s=t.oxw(3).$implicit;t.Q6J("status",s.state)}}function Nn(_,g){1&_&&(t.TgZ(0,"nz-space",23),t.YNc(1,Qn,7,4,"span",24),t.YNc(2,mn,1,1,"cvc-status-tag",25),t.qZA())}function In(_,g){if(1&_&&(t.TgZ(0,"nz-card",10),t.YNc(1,bn,1,1,"cvc-comment-body",11),t._UZ(2,"nz-divider"),t.YNc(3,Mn,2,2,"ng-container",3),t.YNc(4,gn,8,5,"ng-template",null,12,t.W1O),t.YNc(6,Sn,3,4,"ng-template",null,13,t.W1O),t.YNc(8,Nn,3,0,"ng-template",null,14,t.W1O),t.qZA()),2&_){const s=t.MAs(5),p=t.MAs(7),d=t.MAs(9),M=t.oxw().$implicit;t.Q6J("nzTitle",p)("nzExtra",d),t.xp6(1),t.Q6J("ngIf",M.openComment),t.xp6(2),t.Q6J("ngIf","OPEN"==M.state)("ngIfElse",s)}}function dn(_,g){1&_&&(t.ynx(0),t.YNc(1,In,10,5,"nz-card",9),t.BQk())}function fn(_,g){if(1&_&&(t.ynx(0),t.TgZ(1,"nz-space",7),t.YNc(2,dn,2,0,"ng-container",8),t.qZA(),t.BQk()),2&_){const s=t.oxw();t.xp6(2),t.Q6J("ngForOf",s.flags)}}function Jn(_,g){1&_&&t._UZ(0,"nz-empty",28)}let Pn=(()=>{class _{constructor(s){this.viewerService=s,this.isLoading=!1,this.success=!1,this.destroy$=new y.xQ}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(s=>{this.mostRecentOrg=s.mostRecentOrg})}setupMutationResultHandlers(s,p){s.submitSuccess$.pipe((0,T.R)(this.destroy$)).subscribe(d=>{d&&(this.isLoading=!1,this.errors=void 0,this.success=p)}),s.submitError$.pipe((0,T.R)(this.destroy$)).subscribe(d=>{d.length>0&&(this.isLoading=!1,this.success=!1,this.errors=d)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(s){var p;this.errors=null===(p=this.errors)||void 0===p?void 0:p.filter(d=>d!=s)}onSuccessBannerClose(){this.success=!1}}return _.\u0275fac=function(s){return new(s||_)(t.Y36(b.a))},_.\u0275cmp=t.Xpm({type:_,selectors:[["cvc-flag-list"]],inputs:{flags:"flags",flagResolvedCallback:"flagResolvedCallback"},decls:6,vars:4,consts:[["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],["nzTitle","Flags",1,"card-list"],[4,"ngIf","ngIfElse"],["noFlags",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose"],["nzDirection","vertical"],[4,"ngFor","ngForOf"],["nzType","inner",3,"nzTitle","nzExtra",4,"nzSpaceItem"],["nzType","inner",3,"nzTitle","nzExtra"],[3,"commentBodySegments",4,"ngIf"],["flagResolved",""],["flagCardHeaderTitle",""],["flagCardHeaderExtra",""],[3,"commentBodySegments"],[3,"flag","flagResolvedCallback"],["nzSpan","16"],[4,"ngIf"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"user"],["nz-icon","","nzTheme","twotone","nzType","civic-flag",3,"nzTwotoneColor"],["nzSize","small"],[4,"nzSpaceItem"],[3,"status",4,"nzSpaceItem"],["nz-typography","","nzType","secondary"],[3,"status"],["nzNotFoundImage","simple","nzNotFoundContent","No Flags matching filters"]],template:function(s,p){if(1&s&&(t.YNc(0,Ln,1,1,"nz-alert",0),t.YNc(1,Zn,1,1,"nz-alert",1),t.TgZ(2,"nz-card",2),t.YNc(3,fn,3,1,"ng-container",3),t.YNc(4,Jn,1,0,"ng-template",null,4,t.W1O),t.qZA()),2&s){const d=t.MAs(5);t.Q6J("ngForOf",p.errors),t.xp6(1),t.Q6J("ngIf",p.success),t.xp6(2),t.Q6J("ngIf",p.flags&&p.flags.length>0)("ngIfElse",d)}},directives:[n.sg,E.r,n.O5,P.bd,C.NU,C.$1,F.m,I.g,Tn,m.SK,m.t3,hn.ZU,yn.I,Y.Ls,L.w,Rn.h,On.p9],pipes:[An.wr,Fn.a],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}),_})();var Yn=o(1243);function un(_,g){if(1&_){const s=t.EpF();t.TgZ(0,"nz-alert",8),t.NdJ("nzOnClose",function(){return t.CHM(s),t.oxw().onSuccessBannerClose()}),t.qZA()}}function Un(_,g){if(1&_&&t._UZ(0,"nz-alert",9),2&_){t.oxw();const s=t.MAs(4);t.Q6J("nzDescription",s)}}function Dn(_,g){if(1&_&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&_){const s=g.$implicit;t.xp6(1),t.hij(" ",s," ")}}function $n(_,g){if(1&_&&(t.TgZ(0,"ul"),t.YNc(1,Dn,2,1,"li",10),t.qZA()),2&_){const s=t.oxw();t.xp6(1),t.Q6J("ngForOf",s.errorMessages)}}function Bn(_,g){}function wn(_,g){1&_&&t.YNc(0,Bn,0,0,"ng-template")}function jn(_,g){if(1&_&&(t.ynx(0),t.YNc(1,wn,1,0,null,15),t.BQk()),2&_){t.oxw();const s=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",s)}}function Wn(_,g){}function k(_,g){1&_&&t.YNc(0,Wn,0,0,"ng-template")}function Vn(_,g){if(1&_&&(t.TgZ(0,"span",16),t.YNc(1,k,1,0,null,15),t.qZA()),2&_){t.oxw();const s=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",s)}}function Gn(_,g){if(1&_&&(t.TgZ(0,"button",17),t._uU(1),t.ALo(2,"enumToTitle"),t.qZA()),2&_){const s=t.oxw().ngrxLet,p=t.oxw();t.Q6J("disabled",!(void 0!==p.comment&&p.comment.length>=10&&s.signedIn)),t.xp6(1),t.hij(" Flag ",t.lcZ(2,2,p.flaggable.entityType)," ")}}function Kn(_,g){if(1&_){const s=t.EpF();t.ynx(0),t.TgZ(1,"cvc-form-buttons")(2,"cvc-org-selector-btn-group",11),t.NdJ("selectedOrgChange",function(d){return t.CHM(s),t.oxw().onOrgSelected(d)}),t.YNc(3,jn,2,1,"ng-container",12),t.YNc(4,Vn,2,1,"ng-template",null,13,t.W1O),t.YNc(6,Gn,3,4,"ng-template",null,14,t.W1O),t.qZA()(),t.BQk()}if(2&_){const s=g.ngrxLet,p=t.MAs(5);t.xp6(3),t.Q6J("ngIf",s.signedIn)("ngIfElse",p)}}let Hn=(()=>{class _{constructor(s,p,d){this.gql=s,this.viewerService=p,this.networkErrorService=d,this.errorMessages=[],this.success=!1,this.loading=!1,this.comment="",this.destroy$=new y.xQ,this.addFlagMutator=new J.U(d)}ngOnInit(){if(this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(s=>{this.selectedOrg=s.mostRecentOrg}),void 0===this.flaggable)throw new Error("Must pass a flagggable into flag add component")}onOrgSelected(s){this.selectedOrg=s}submitFlag(){var s;this.errorMessages=[];let p={comment:this.comment,subject:this.flaggable,organizationId:null===(s=this.selectedOrg)||void 0===s?void 0:s.id},d=this.addFlagMutator.mutate(this.gql,{input:p});d.submitSuccess$.pipe((0,T.R)(this.destroy$)).subscribe(M=>{M&&(this.flagAddedCallback&&this.flagAddedCallback(),this.success=!0,this.comment="")}),d.submitError$.pipe((0,T.R)(this.destroy$)).subscribe(M=>{M.length>0&&(this.errorMessages=M)}),d.isSubmitting$.pipe((0,T.R)(this.destroy$)).subscribe(M=>{this.loading=M})}onSuccessBannerClose(){this.success=!1}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return _.\u0275fac=function(s){return new(s||_)(t.Y36(r.B0s),t.Y36(b.a),t.Y36(D.Y))},_.\u0275cmp=t.Xpm({type:_,selectors:[["cvc-flag-add-form"]],inputs:{flaggable:"flaggable",flagAddedCallback:"flagAddedCallback"},decls:11,vars:5,consts:[["nzType","inner"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription",4,"ngIf"],["errorContents",""],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[4,"ngrxLet"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription"],[4,"ngFor","ngForOf"],[3,"selectedOrgChange"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to flag entity."],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"]],template:function(s,p){1&s&&(t.TgZ(0,"nz-card",0),t.YNc(1,un,1,0,"nz-alert",1),t.YNc(2,Un,1,1,"nz-alert",2),t.YNc(3,$n,2,1,"ng-template",null,3,t.W1O),t.TgZ(5,"form",4),t.NdJ("ngSubmit",function(){return p.submitFlag()}),t.TgZ(6,"cvc-comment-input-form",5),t.NdJ("commentChange",function(M){return p.comment=M}),t.qZA(),t.TgZ(7,"nz-spin",6)(8,"nz-form-item")(9,"nz-form-control"),t.YNc(10,Kn,8,2,"ng-container",7),t.qZA()()()()()),2&s&&(t.xp6(1),t.Q6J("ngIf",p.success),t.xp6(1),t.Q6J("ngIf",p.errorMessages.length>0),t.xp6(4),t.Q6J("comment",p.comment),t.xp6(1),t.Q6J("nzSpinning",p.loading),t.xp6(3),t.Q6J("ngrxLet",p.viewer$))},directives:[P.bd,n.O5,E.r,n.sg,B._Y,B.JL,B.F,W.Lr,z.b,Z.W,m.SK,W.Nx,m.t3,W.Fd,N.eJ,h.Z,U.q,n.tP,u.SY,A.ix,v.dQ,V.m,L.w],pipes:[Yn.I],styles:[""]}),_})();var kn=o(8747),qn=o(6699);function Xn(_,g){if(1&_&&(t._UZ(0,"cvc-flag-list",13),t.ALo(1,"ngrxPush")),2&_){const s=t.oxw(2);t.Q6J("flags",t.lcZ(1,2,s.flags$))("flagResolvedCallback",s.refresh)}}function nt(_,g){if(1&_){const s=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(s);const d=t.oxw(2).ngrxLet;return t.oxw(2).loadMore(null==d?null:d.endCursor)}),t._uU(1,"Load More"),t.qZA()}}function tt(_,g){1&_&&(t.ynx(0),t.YNc(1,nt,2,0,"button",15),t.BQk())}function et(_,g){if(1&_&&(t.ynx(0),t.YNc(1,tt,2,0,"ng-container",14),t.BQk()),2&_){const s=g.ngrxLet;t.xp6(1),t.Q6J("ngIf",null==s?null:s.hasNextPage)}}function it(_,g){if(1&_&&t._UZ(0,"cvc-flag-add-form",17),2&_){const s=t.oxw(2);t.Q6J("flaggable",s.flaggable)("flagAddedCallback",s.refresh)}}function ot(_,g){if(1&_&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&_){const s=g.$implicit;t.xp6(1),t.Oqu(s.displayName)}}function st(_,g){if(1&_&&t._UZ(0,"nz-avatar",20),2&_){const s=t.oxw().$implicit;t.Q6J("nzSrc",s.profileImagePath)}}function at(_,g){if(1&_&&(t._UZ(0,"nz-avatar",21),t.ALo(1,"uppercase")),2&_){const s=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,s.username.charAt(0)))}}function _t(_,g){if(1&_&&(t.YNc(0,st,1,1,"nz-avatar",18),t.YNc(1,at,2,3,"ng-template",null,19,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&_){const s=g.$implicit,p=t.MAs(2);t.Q6J("ngIf",s.profileImagePath)("ngIfElse",p),t.xp6(4),t.Oqu(s.username)}}function lt(_,g){if(1&_&&t._UZ(0,"nz-avatar",20),2&_){const s=t.oxw().$implicit;t.Q6J("nzSrc",s.profileImagePath)}}function ct(_,g){if(1&_&&(t._UZ(0,"nz-avatar",21),t.ALo(1,"uppercase")),2&_){const s=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,s.username.charAt(0)))}}function rt(_,g){if(1&_&&(t.YNc(0,lt,1,1,"nz-avatar",18),t.YNc(1,ct,2,3,"ng-template",null,19,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&_){const s=g.$implicit,p=t.MAs(2);t.Q6J("ngIf",s.profileImagePath)("ngIfElse",p),t.xp6(4),t.Oqu(s.username)}}function pt(_,g){if(1&_){const s=t.EpF();t.ynx(0),t.TgZ(1,"nz-row",2)(2,"nz-col",3)(3,"nz-space",4),t.YNc(4,Xn,2,4,"cvc-flag-list",5),t.YNc(5,et,2,1,"ng-container",6),t.YNc(6,it,1,2,"cvc-flag-add-form",7),t.qZA()(),t.TgZ(7,"nz-col",8)(8,"cvc-participant-list",9),t.NdJ("participantSelectedEvent",function(d){return t.CHM(s),t.oxw().onStateSelected(d)}),t.YNc(9,ot,2,1,"ng-template",null,10,t.W1O),t.qZA(),t.TgZ(11,"cvc-participant-list",11),t.NdJ("participantSelectedEvent",function(d){return t.CHM(s),t.oxw().onFlaggingUsersSelected(d)}),t.ALo(12,"ngrxPush"),t.YNc(13,_t,5,3,"ng-template",null,10,t.W1O),t.qZA(),t.TgZ(15,"cvc-participant-list",12),t.NdJ("participantSelectedEvent",function(d){return t.CHM(s),t.oxw().onResolvingUsersSelected(d)}),t.ALo(16,"ngrxPush"),t.YNc(17,rt,5,3,"ng-template",null,10,t.W1O),t.qZA()()(),t.BQk()}if(2&_){const s=t.oxw();t.xp6(1),t.Q6J("nzGutter",16),t.xp6(4),t.Q6J("ngrxLet",s.pageInfo$),t.xp6(3),t.Q6J("preselectedOption",s.selectableStates[0])("participantList",s.selectableStates),t.xp6(3),t.Q6J("participantList",t.lcZ(12,6,s.uniqueFlaggingUsers$)),t.xp6(4),t.Q6J("participantList",t.lcZ(16,8,s.uniqueResolvingUsers$))}}function gt(_,g){if(1&_&&t._UZ(0,"cvc-flag-add-form",17),2&_){const s=t.oxw();t.Q6J("flaggable",s.flaggable)("flagAddedCallback",s.refresh)}}let mt=(()=>{class _{constructor(s){this.gql=s,this.defaultPageSize=5,this.selectableStates=[{id:1,displayName:"Open",value:r.BQZ.Open},{id:2,displayName:"Resolved",value:r.BQZ.Resolved}]}ngOnInit(){if(null==this.flaggable)throw new Error("Must pass a flaggable into flag list");this.queryRef=this.gql.watch({first:this.defaultPageSize,flaggable:this.flaggable,state:r.BQZ.Open}),this.refresh=()=>{this.queryRef.refetch()},this.results$=this.queryRef.valueChanges,this.flags$=this.results$.pipe((0,l.j)("data","flags","edges"),(0,x.U)(s=>s.map(p=>p.node))),this.pageInfo$=this.results$.pipe((0,l.j)("data","flags","pageInfo")),this.unfilteredCount$=this.results$.pipe((0,l.j)("data","flags","unfilteredCountForSubject")),this.uniqueFlaggingUsers$=this.results$.pipe((0,x.U)(({data:s})=>{var p;return null===(p=s.flags)||void 0===p?void 0:p.uniqueFlaggingUsers})),this.uniqueResolvingUsers$=this.results$.pipe((0,x.U)(({data:s})=>{var p;return null===(p=s.flags)||void 0===p?void 0:p.uniqueResolvingUsers}))}onFlaggingUsersSelected(s){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},flaggingUserId:s?s.id:void 0})}onResolvingUsersSelected(s){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},resolvingUserId:s?s.id:void 0})}onStateSelected(s){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},state:s?s.value:void 0})}loadMore(s){var p;null===(p=this.queryRef)||void 0===p||p.fetchMore({variables:{first:this.defaultPageSize,after:s}})}}return _.\u0275fac=function(s){return new(s||_)(t.Y36(r.rzy))},_.\u0275cmp=t.Xpm({type:_,selectors:[["cvc-flag-list-and-filter"]],inputs:{flaggable:"flaggable"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noFlags",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"flags","flagResolvedCallback",4,"nzSpaceItem"],[4,"ngrxLet"],[3,"flaggable","flagAddedCallback",4,"nzSpaceItem"],["nzSpan","6"],["listTitle","Flag State",3,"preselectedOption","participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Flagging Users",3,"participantList","participantSelectedEvent"],["listTitle","Resolving Users",3,"participantList","participantSelectedEvent"],[3,"flags","flagResolvedCallback"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[3,"flaggable","flagAddedCallback"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"]],template:function(s,p){if(1&s&&(t.YNc(0,pt,19,10,"ng-container",0),t.ALo(1,"ngrxPush"),t.YNc(2,gt,1,2,"ng-template",null,1,t.W1O)),2&s){const d=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,p.unfilteredCount$))("ngIfElse",d)}},directives:[n.O5,m.SK,m.t3,C.NU,C.$1,Pn,N.eJ,A.ix,v.dQ,L.w,Hn,kn.l,qn.Dz],pipes:[N.fM,n.gd],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}),_})()},4271:(G,S,o)=>{o.d(S,{M:()=>X});var r=o(9808),l=o(6949),x=o(3868),t=o(7345),n=o(7484),m=o(4546),C=o(3762),y=o(8625),T=o(3075),b=o(1825),E=o(6042),P=o(4375),F=o(2359),I=o(404),J=o(6905),D=o(4509),N=o(7525),u=o(5e3);let A=(()=>{class O{}return O.\u0275fac=function(H){return new(H||O)},O.\u0275mod=u.oAB({type:O}),O.\u0275inj=u.cJS({imports:[[r.ez,T.u5,T.UX,l.WG,m.U5,E.sL,n.vh,F.L,I.cg,N.j,b.A,P.R,J.s,D.w]]}),O})();var v=o(8909),L=o(3580),Q=o(6286),Y=o(592),B=o(9779),W=o(717),z=o(8645),Z=o(4867),h=o(7026),U=o(3610),V=o(5017);let q=(()=>{class O{}return O.\u0275fac=function(H){return new(H||O)},O.\u0275mod=u.oAB({type:O}),O.\u0275inj=u.cJS({imports:[[r.ez,T.UX,l.WG,E.sL,m.U5,T.u5,F.L,n.vh,U.$6,V.PV,I.cg,N.j,D.w,P.R,b.A]]}),O})();var nn=o(6699),sn=o(6114),tn=o(5737),en=o(685),an=o(1894),_n=o(1047),on=o(8144),ln=o(8481),cn=o(3618);let rn=(()=>{class O{}return O.\u0275fac=function(H){return new(H||O)},O.\u0275mod=u.oAB({type:O}),O.\u0275inj=u.cJS({imports:[[r.ez,an.Jb,C.Ph,n.vh,on.zf,ln.X,cn.ZJ,nn.Rt,en.Xo,sn.Wr,tn.S,I.cg,C.Ph,U.$6,V.PV,_n.o7,T.u5,y.$L.forChild({formatter:{useClass:h.x,provide:y.KP}}),b.A,B.s,t.W,L.Q,W.N,Q.y,Z.Q,z.M,Y.x,J.s,E.sL,F.L,l.WG,q,tn.S,v.m]]}),O})();var $=o(1150);let X=(()=>{class O{}return O.\u0275fac=function(H){return new(H||O)},O.\u0275mod=u.oAB({type:O}),O.\u0275inj=u.cJS({imports:[[r.ez,T.u5,l.WG,y.$L.forChild({formatter:{useClass:h.x,provide:y.KP}}),E.sL,m.U5,x.aF,E.sL,t.W,C.Ph,n.vh,A,rn,en.Xo,$.N,nn.Rt,on.zf]]}),O})()},8168:(G,S,o)=>{o.d(S,{Y:()=>l});var r=o(5e3);let l=(()=>{class x{constructor(){}}return x.\u0275fac=function(n){return new(n||x)},x.\u0275dir=r.lG2({type:x,selectors:[["","cvcFlaggableOptions",""]]}),x})()},5623:(G,S,o)=>{o.d(S,{o:()=>N});var r=o(5e3),l=o(8168),x=o(9808),t=o(4401),n=o(325),m=o(5017),C=o(404);const y=["cvcFlaggable",""];function T(u,A){1&u&&r.Hsn(0)}function b(u,A){1&u&&r.GkF(0)}function E(u,A){if(1&u&&(r.ynx(0),r.YNc(1,b,1,0,"ng-container",2),r.BQk()),2&u){r.oxw();const v=r.MAs(1);r.xp6(1),r.Q6J("ngTemplateOutlet",v)}}function P(u,A){if(1&u&&(r.TgZ(0,"a",6),r._UZ(1,"i",7),r.qZA()),2&u){r.oxw();const v=r.MAs(5);r.xp6(1),r.Q6J("nzTooltipTitle",v)}}function F(u,A){if(1&u&&r._uU(0),2&u){const v=r.oxw(2);r.hij(" ",v.flags," open flags ")}}function I(u,A){1&u&&r.GkF(0)}function J(u,A){if(1&u&&(r.ynx(0),r.TgZ(1,"nz-ribbon",3),r.YNc(2,P,2,1,"ng-template",null,4,r.W1O),r.YNc(4,F,1,1,"ng-template",null,5,r.W1O),r.YNc(6,I,1,0,"ng-container",2),r.qZA(),r.BQk()),2&u){const v=r.MAs(3);r.oxw();const L=r.MAs(1);r.xp6(1),r.Q6J("nzText",v),r.xp6(5),r.Q6J("ngTemplateOutlet",L)}}const D=["*"];let N=(()=>{class u{constructor(v){this.renderer=v}ngOnChanges(){this.flags&&0===this.flags?this.removeFlagged():this.addFlagged()}ngAfterViewInit(){this.flags&&0===this.flags?this.removeFlagged():this.addFlagged()}addFlagged(){this.flaggedChild&&this.renderer.addClass(this.flaggedChild.nativeElement,"flaggedChild")}removeFlagged(){this.flaggedChild&&this.renderer.removeClass(this.flaggedChild.nativeElement,"flaggedChild")}}return u.\u0275fac=function(v){return new(v||u)(r.Y36(r.Qsj))},u.\u0275cmp=r.Xpm({type:u,selectors:[["","cvcFlaggable",""]],contentQueries:function(v,L,Q){if(1&v&&r.Suo(Q,l.Y,5,r.SBq),2&v){let Y;r.iGM(Y=r.CRH())&&(L.flaggedChild=Y.first)}},inputs:{flags:"flags",entity:"entity"},features:[r.TTD],attrs:y,ngContentSelectors:D,decls:4,vars:2,consts:[["flaggedContent",""],[4,"ngIf"],[4,"ngTemplateOutlet"],["nzPlacement","start","nzColor","#ff3333",3,"nzText"],["flaggedText",""],["flaggedTooltip",""],["routerLink","flags",2,"color","#FFF"],["nz-icon","","nzType","flag","nzTheme","fill","nz-tooltip","","nzTooltipPlacement","top","nzTooltipColor","#FF3333",3,"nzTooltipTitle"]],template:function(v,L){1&v&&(r.F$t(),r.YNc(0,T,1,0,"ng-template",null,0,r.W1O),r.YNc(2,E,2,1,"ng-container",1),r.YNc(3,J,7,2,"ng-container",1)),2&v&&(r.xp6(2),r.Q6J("ngIf",0===L.flags),r.xp6(1),r.Q6J("ngIf",L.flags))},directives:[x.O5,x.tP,t.F9,n.yS,m.Ls,C.SY],styles:[""]}),u})()},4682:(G,S,o)=>{o.d(S,{m:()=>y});var r=o(9808),l=o(404),x=o(3618),t=o(4401),n=o(5017),m=o(325),C=o(5e3);let y=(()=>{class T{}return T.\u0275fac=function(E){return new(E||T)},T.\u0275mod=C.oAB({type:T}),T.\u0275inj=C.cJS({imports:[[r.ez,m.Bz,n.PV,t.mS,l.cg,x.ZJ]]}),T})()},6059:(G,S,o)=>{o.d(S,{i:()=>rn});var r=o(9808),l=o(7484),x=o(3762),t=o(1894),n=o(5e3);let m=(()=>{class ${}return $.\u0275fac=function(O){return new(O||$)},$.\u0275mod=n.oAB({type:$}),$.\u0275inj=n.cJS({imports:[[r.ez,t.Jb]]}),$})();var C=o(2322),y=o(9779),T=o(8144),b=o(1825),E=o(8481),P=o(3618),F=o(6699),I=o(8625),J=o(7345),D=o(3580),N=o(6286),u=o(4867),A=o(8645),v=o(5482),L=o(685),Q=o(592),Y=o(6114),B=o(5737),W=o(404),z=o(6042),Z=o(2359),h=o(6949),U=o(5017),V=o(3610),q=o(1047),nn=o(3075),sn=o(6905),tn=o(3098),en=o(7026),an=o(4509),_n=o(8909),on=o(209),ln=o(717),cn=o(2467);let rn=(()=>{class ${}return $.\u0275fac=function(O){return new(O||$)},$.\u0275mod=n.oAB({type:$}),$.\u0275inj=n.cJS({imports:[[r.ez,t.Jb,x.Ph,l.vh,T.zf,E.X,P.ZJ,F.Rt,L.Xo,Y.Wr,B.S,W.cg,x.Ph,V.$6,U.PV,q.o7,tn.q6,B.S,nn.u5,I.$L.forChild({formatter:{useClass:en.x,provide:I.KP}}),b.A,C.C,y.s,m,J.W,D.Q,ln.N,N.y,u.Q,on.i,A.M,Q.x,an.w,cn.u,sn.s,_n.m,v.cD,z.sL,Z.L,h.WG]]}),$})()},1365:(G,S,o)=>{o.d(S,{a:()=>Ke});var r=o(7630),l=o(373),x=o(4850),t=o(1059),n=o(5e3),m=o(325),C=o(9808),y=o(1894),T=o(8144),b=o(8929),E=o(6123),P=o(7625),F=o(9350),I=o(9169),J=o(2359),D=o(6949),N=o(7484),u=o(5482),A=o(3762),v=o(8481);let L=(()=>{class e{transform(i){return i?i.replace(/([a-z])([A-Z])/g,"$1 $2"):""}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=n.Yjl({name:"camelToWords",type:e,pure:!0}),e})();const Q=["itemTemplate"],Y=function(e){return{$implicit:e}};function B(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,c=n.oxw();n.xp6(2),n.Q6J("ngTemplateOutlet",c.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,Y,i))}}function W(e,a){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function z(e,a){if(1&e&&(n.TgZ(0,"nz-list-item",9),n.YNc(1,B,3,4,"ng-container",10),n.YNc(2,W,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=a.$implicit,c=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",c)}}function Z(e,a){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw();n.MGl("nzNoResult","No ",i.entityType,"")}}function h(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,c=n.oxw(3);n.xp6(2),n.Q6J("ngTemplateOutlet",c.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,Y,i))}}function U(e,a){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function V(e,a){if(1&e&&(n.TgZ(0,"nz-list-item",17),n.YNc(1,h,3,4,"ng-container",10),n.YNc(2,U,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=a.$implicit,c=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",c)}}function q(e,a){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw(3);n.MGl("nzNoResult","No ",i.entityType," Removed")}}function nn(e,a){if(1&e&&(n.TgZ(0,"nz-list",2),n.YNc(1,V,4,2,"nz-list-item",16),n.YNc(2,q,1,1,"nz-list-empty",4),n.qZA()),2&e){const i=n.oxw(2);n.MGl("nzHeader","Removed ",i.entityType,""),n.xp6(1),n.Q6J("ngForOf",i.diffObject.removedObjects),n.xp6(1),n.Q6J("ngIf",0===i.diffObject.removedObjects.length)}}function sn(e,a){1&e&&(n.ynx(0),n.YNc(1,nn,3,3,"nz-list",7),n.BQk())}function tn(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,c=n.oxw(2);n.xp6(2),n.Q6J("ngTemplateOutlet",c.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,Y,i))}}function en(e,a){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function an(e,a){if(1&e&&(n.TgZ(0,"nz-list-item",19),n.YNc(1,tn,3,4,"ng-container",10),n.YNc(2,en,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=a.$implicit,c=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",c)}}function _n(e,a){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw(2);n.MGl("nzNoResult","No ",i.entityType," Added")}}function on(e,a){if(1&e&&(n.TgZ(0,"nz-list",2),n.YNc(1,an,4,2,"nz-list-item",18),n.YNc(2,_n,1,1,"nz-list-empty",4),n.qZA()),2&e){const i=n.oxw();n.MGl("nzHeader","Added ",i.entityType,""),n.xp6(1),n.Q6J("ngForOf",i.diffObject.addedObjects),n.xp6(1),n.Q6J("ngIf",0===i.diffObject.addedObjects.length)}}function ln(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,c=n.oxw(3);n.xp6(2),n.Q6J("ngTemplateOutlet",c.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,Y,i))}}function cn(e,a){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function rn(e,a){if(1&e&&(n.TgZ(0,"nz-list-item",21),n.YNc(1,ln,3,4,"ng-container",10),n.YNc(2,cn,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=a.$implicit,c=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",c)}}function $(e,a){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw(3);n.MGl("nzNoResult","No ",i.entityType," Kept")}}function X(e,a){if(1&e&&(n.TgZ(0,"nz-list",2),n.YNc(1,rn,4,2,"nz-list-item",20),n.YNc(2,$,1,1,"nz-list-empty",4),n.qZA()),2&e){const i=n.oxw(2);n.MGl("nzHeader","Kept ",i.entityType,""),n.xp6(1),n.Q6J("ngForOf",i.diffObject.keptObjects),n.xp6(1),n.Q6J("ngIf",0===i.diffObject.keptObjects.length)}}function O(e,a){1&e&&(n.ynx(0),n.YNc(1,X,3,3,"nz-list",7),n.BQk())}function K(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,c=n.oxw();n.xp6(2),n.Q6J("ngTemplateOutlet",c.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,Y,i))}}function H(e,a){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function vn(e,a){if(1&e&&(n.TgZ(0,"nz-list-item",22),n.YNc(1,K,3,4,"ng-container",10),n.YNc(2,H,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=a.$implicit,c=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",c)}}function zn(e,a){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw();n.MGl("nzNoResult","No ",i.entityType,"")}}let Cn=(()=>{class e{constructor(){}ngOnInit(){if(void 0===this.diffObject)throw new Error("Must specify a diffObject.");if(void 0===this.entityType)throw new Error("Must specify an entityType.")}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["cvc-revision-list-diff"]],contentQueries:function(i,c,f){if(1&i&&n.Suo(f,Q,5),2&i){let R;n.iGM(R=n.CRH())&&(c.itemTemplateRef=R.first)}},inputs:{diffObject:"diffObject",entityType:"entityType"},decls:14,vars:12,consts:[[3,"nzGutter"],[3,"nzSpan"],["nzBordered","","nzType","inner","nzSize","small",3,"nzHeader"],["ngClass","current",4,"ngFor","ngForOf"],[3,"nzNoResult",4,"ngIf"],["nzDirection","vertical"],[4,"ngIf"],["nzBordered","","nzType","inner","nzSize","small",3,"nzHeader",4,"nzSpaceItem"],["ngClass","suggested",4,"ngFor","ngForOf"],["ngClass","current"],[4,"ngIf","ngIfElse"],["deleted",""],["nz-typography",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nzColor","error"],[3,"nzNoResult"],["ngClass","removed",4,"ngFor","ngForOf"],["ngClass","removed"],["ngClass","added",4,"ngFor","ngForOf"],["ngClass","added"],["ngClass","kept",4,"ngFor","ngForOf"],["ngClass","kept"],["ngClass","suggested"]],template:function(i,c){1&i&&(n.TgZ(0,"nz-row",0)(1,"nz-col",1)(2,"nz-list",2),n.YNc(3,z,4,2,"nz-list-item",3),n.YNc(4,Z,1,1,"nz-list-empty",4),n.qZA()(),n.TgZ(5,"nz-col",1)(6,"nz-space",5),n.YNc(7,sn,2,0,"ng-container",6),n.YNc(8,on,3,3,"nz-list",7),n.YNc(9,O,2,0,"ng-container",6),n.qZA()(),n.TgZ(10,"nz-col",1)(11,"nz-list",2),n.YNc(12,vn,4,2,"nz-list-item",8),n.YNc(13,zn,1,1,"nz-list-empty",4),n.qZA()()()),2&i&&(n.Q6J("nzGutter",16),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(1),n.MGl("nzHeader","Original ",c.entityType," List"),n.xp6(1),n.Q6J("ngForOf",c.diffObject.currentObjects),n.xp6(1),n.Q6J("ngIf",0===c.diffObject.currentObjects.length),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.Q6J("ngIf",c.diffObject.currentObjects.length>0),n.xp6(2),n.Q6J("ngIf",c.diffObject.currentObjects.length>0),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(1),n.MGl("nzHeader","Revised ",c.entityType," List"),n.xp6(1),n.Q6J("ngForOf",c.diffObject.suggestedObjects),n.xp6(1),n.Q6J("ngIf",0===c.diffObject.suggestedObjects.length))},directives:[y.SK,y.t3,A.n_,C.sg,A.AA,C.mk,C.O5,C.tP,v.j,A.I2,T.NU,T.$1],pipes:[L],styles:["[_nghost-%COMP%]{display:block}nz-list[_ngcontent-%COMP%]   .kept[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{background-color:#f6ffed;color:#135200}nz-list[_ngcontent-%COMP%]   .removed[_ngcontent-%COMP%]{background-color:#fff1f0;color:#820014}nz-list[_ngcontent-%COMP%]   .suggested[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-space[_ngcontent-%COMP%]{width:100%}"]}),e})();var xn=o(6906),Tn=o(4022),hn=o(8511),yn=o(1275),Rn=o(7701),On=o(7956),An=o(8664),Fn=o(9001);let Ln=(()=>{class e{constructor(){}ngOnInit(){if(void 0===this.left)throw new Error("Must provide a left side of the diff.");if(void 0===this.right)throw new Error("Must provide a right side of the diff.");if(void 0===this.entityType)throw new Error("Must provide a diff.")}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["cvc-revision-value-diff"]],inputs:{currentValue:"currentValue",suggestedValue:"suggestedValue",left:"left",right:"right",entityType:"entityType"},decls:15,vars:10,consts:[[3,"nzGutter"],[3,"nzSpan"],[3,"innerHtml"],[1,"diff","suggested"],[1,"background"]],template:function(i,c){1&i&&(n.TgZ(0,"nz-row",0)(1,"nz-col",1)(2,"h4"),n._uU(3),n.qZA(),n._UZ(4,"div",2),n.qZA(),n.TgZ(5,"nz-col",1)(6,"h4"),n._uU(7),n.qZA(),n._UZ(8,"div",2),n.qZA(),n.TgZ(9,"nz-col",1)(10,"h4"),n._uU(11),n.qZA(),n.TgZ(12,"div",3)(13,"div",4),n._uU(14),n.qZA()()()()),2&i&&(n.Q6J("nzGutter",16),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.hij("Original ",c.entityType,""),n.xp6(1),n.Q6J("innerHtml",c.left,n.oJD),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.hij("",c.entityType," Diff"),n.xp6(1),n.Q6J("innerHtml",c.right,n.oJD),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.hij("Revised ",c.entityType,""),n.xp6(3),n.hij(" ",c.suggestedValue," "))},directives:[y.SK,y.t3],styles:[":host{display:block}.diff{overflow:auto;width:100%}.diff .background{padding:4px 8px}.diff.insertions .background{background:#f6ffed;color:#237804}.diff.deletions .background{background:#fff1f0;color:#a8071a}.diff.suggested .background,.diff.original .background{background:#f0f5ff;color:#10239e}.diff del,.diff ins{text-decoration:none}.diff del strong{font-weight:400;background:#fcc}.diff ins strong{font-weight:400;background:#9f9}.diff .del{font-weight:400;background:#fee;color:#b00}.diff .ins{font-weight:400;background:#dfd;color:#080}ul{list-style:none}\n"],encapsulation:2}),e})();var Zn=o(5737),bn=o(7948),Mn=o(3618),En=o(125),pn=o(5017),gn=o(2683),Sn=o(3610),Qn=o(4590),mn=o(6042),Nn=o(6114),In=o(404),dn=o(685),fn=o(2643),Jn=o(9383),Pn=o(8227),Yn=o(6612),un=o(3098),Un=o(1243),Dn=o(8625),$n=o(160);function Bn(e,a){if(1&e){const i=n.EpF();n.TgZ(0,"nz-alert",4),n.NdJ("nzOnClose",function(){const R=n.CHM(i).$implicit;return n.oxw().onErrorBannerClose(R)}),n.qZA()}2&e&&n.Q6J("nzMessage",a.$implicit)}function wn(e,a){if(1&e){const i=n.EpF();n.TgZ(0,"nz-alert",5),n.NdJ("nzOnClose",function(){return n.CHM(i),n.oxw().onSuccessBannerClose()}),n.qZA()}if(2&e){const i=n.oxw();n.MGl("nzMessage","Revision(s) successfully ",i.success,".")}}function jn(e,a){1&e&&n._UZ(0,"cvc-source-tag",20),2&e&&n.Q6J("source",a.$implicit)}function Wn(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",18),n.YNc(2,jn,1,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}const k=function(e,a,i){return{id:e,name:a,link:i}};function Vn(e,a){if(1&e&&n._UZ(0,"cvc-disease-tag",22),2&e){const i=a.$implicit;n.Q6J("disease",n.kEZ(1,k,i.id,i.displayName,i.link))}}function Gn(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",21),n.YNc(2,Vn,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function Kn(e,a){if(1&e&&n._UZ(0,"cvc-molecular-profile-tag",24),2&e){const i=a.$implicit;n.Q6J("molecularProfile",n.kEZ(1,k,i.id,i.displayName,i.link))}}function Hn(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",23),n.YNc(2,Kn,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function kn(e,a){if(1&e&&n._UZ(0,"cvc-therapy-tag",26),2&e){const i=a.$implicit;n.Q6J("therapy",n.kEZ(1,k,i.id,i.displayName,i.link))}}function qn(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",25),n.YNc(2,kn,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function Xn(e,a){if(1&e&&n._UZ(0,"cvc-therapy-tag",26),2&e){const i=a.$implicit;n.Q6J("therapy",n.kEZ(1,k,i.id,i.displayName,i.link))}}function nt(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",25),n.YNc(2,Xn,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function tt(e,a){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=a.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function et(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",27),n.YNc(2,tt,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function it(e,a){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=a.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function ot(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",28),n.YNc(2,it,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function st(e,a){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=a.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function at(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",29),n.YNc(2,st,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function _t(e,a){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=a.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function lt(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",30),n.YNc(2,_t,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function ct(e,a){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=a.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function rt(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",31),n.YNc(2,ct,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function pt(e,a){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=a.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function gt(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",32),n.YNc(2,pt,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function mt(e,a){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=a.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function _(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",33),n.YNc(2,mt,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function g(e,a){if(1&e&&n._UZ(0,"cvc-variant-type-tag",35),2&e){const i=a.$implicit;n.Q6J("variantType",n.kEZ(1,k,i.id,i.displayName,i.link))}}function s(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",34),n.YNc(2,g,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function p(e,a){if(1&e&&n._UZ(0,"cvc-phenotype-tag",37),2&e){const i=a.$implicit;n.Q6J("phenotype",n.kEZ(1,k,i.id,i.displayName,i.link))}}function d(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",36),n.YNc(2,p,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function M(e,a){if(1&e&&n._UZ(0,"cvc-variant-tag",39),2&e){const i=a.$implicit;n.Q6J("variant",n.kEZ(1,k,i.id,i.displayName,i.link))}}function ut(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",38),n.YNc(2,M,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function vt(e,a){if(1&e&&n._UZ(0,"cvc-variant-tag",39),2&e){const i=a.$implicit;n.Q6J("variant",n.kEZ(1,k,i.id,i.displayName,i.link))}}function zt(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",40),n.YNc(2,vt,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function Ct(e,a){1&e&&n._UZ(0,"cvc-source-tag",20),2&e&&n.Q6J("source",a.$implicit)}function xt(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",41),n.YNc(2,Ct,1,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}const Tt=function(e,a,i,c){return{id:e,name:a,link:i,status:c}};function ht(e,a){if(1&e&&n._UZ(0,"cvc-evidence-tag",43),2&e){const i=a.$implicit;n.Q6J("evidence",n.l5B(1,Tt,i.id,i.displayName,i.link,i.status))}}function yt(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",42),n.YNc(2,ht,1,6,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function Rt(e,a){if(1&e&&(n.ynx(0),n._UZ(1,"cvc-revision-value-diff",44),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("currentValue",i.currentValue)("suggestedValue",i.suggestedValue)("left",i.linkoutData.diffValue.left)("right",i.linkoutData.diffValue.right)("entityType",i.linkoutData.name)}}function Ot(e,a){if(1&e&&(n.ynx(0),n._UZ(1,"cvc-comment-body",48),n.BQk()),2&e){const i=n.oxw(2).$implicit;n.xp6(1),n.Q6J("commentBodySegments",i.resolutionComment.parsedComment)}}function At(e,a){if(1&e&&n._UZ(0,"cvc-user-tag",49),2&e){const i=n.oxw(2).$implicit;n.Q6J("user",i.resolver)}}function Ft(e,a){if(1&e&&(n.ynx(0),n._UZ(1,"nz-divider"),n.TgZ(2,"nz-row")(3,"nz-col",45),n.YNc(4,Ot,2,1,"ng-container",15),n.qZA(),n.TgZ(5,"nz-col",46),n._uU(6),n.ALo(7,"enumToTitle"),n.YNc(8,At,1,1,"cvc-user-tag",47),n._uU(9),n.ALo(10,"timeago"),n.qZA()(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(4),n.Q6J("ngIf",i.resolutionComment),n.xp6(2),n.hij(" ",n.lcZ(7,4,i.status)," By "),n.xp6(2),n.Q6J("ngIf",void 0!==i.resolver),n.xp6(1),n.hij(" ",n.lcZ(10,6,i.resolvedAt)," ")}}function Lt(e,a){if(1&e&&(n.TgZ(0,"span"),n._UZ(1,"i",51),n.ALo(2,"entityColor"),n._uU(3),n.TgZ(4,"span"),n._uU(5),n.qZA()()),2&e){const i=n.oxw(2).$implicit;n.xp6(1),n.Q6J("nzTwotoneColor",n.lcZ(2,3,"Revision")),n.xp6(2),n.hij(" RID",i.id," "),n.xp6(2),n.hij("",i.linkoutData.name," Updated")}}function Zt(e,a){if(1&e&&n._UZ(0,"i",54),2&e){n.oxw();const i=n.MAs(3);n.Q6J("nzPopoverContent",i)}}function bt(e,a){if(1&e&&n._UZ(0,"cvc-comment-body",48),2&e){const i=n.oxw(3).$implicit;n.Q6J("commentBodySegments",i.creationComment.parsedComment)}}function Mt(e,a){1&e&&(n.ynx(0),n.YNc(1,Zt,1,1,"i",52),n.YNc(2,bt,1,1,"ng-template",null,53,n.W1O),n.BQk())}function Et(e,a){if(1&e&&(n.TgZ(0,"nz-space"),n.YNc(1,Lt,6,5,"span",50),n.YNc(2,Mt,4,0,"ng-container",15),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(2),n.Q6J("ngIf",i.creationComment)}}function St(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"span",61),n._uU(2,"Submitted By"),n.qZA(),n._UZ(3,"cvc-user-tag",49),n.BQk()),2&e){const i=n.oxw(3).$implicit;n.xp6(3),n.Q6J("user",i.revisor)}}function Qt(e,a){1&e&&(n.TgZ(0,"span",61),n._uU(1,"Submitted"),n.qZA())}function Nt(e,a){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,St,4,1,"ng-container",59),n.YNc(2,Qt,2,0,"ng-template",null,60,n.W1O),n.TgZ(4,"span",61),n._uU(5),n.ALo(6,"timeago"),n.qZA()()),2&e){const i=n.MAs(3),c=n.oxw(2).$implicit;n.xp6(1),n.Q6J("ngIf",c.revisor)("ngIfElse",i),n.xp6(4),n.Oqu(n.lcZ(6,3,c.createdAt))}}function It(e,a){if(1&e&&n._UZ(0,"cvc-status-tag",62),2&e){const i=n.oxw(2).$implicit;n.Q6J("status",i.status)}}function Jt(e,a){1&e&&n._UZ(0,"nz-divider",63)}function Pt(e,a){if(1&e){const i=n.EpF();n.TgZ(0,"a",64),n.NdJ("click",function(){n.CHM(i);const f=n.oxw(2).$implicit;return n.oxw(3).onChangesetSelected(f.revisionsetId)}),n._uU(1,"Show Group"),n.qZA()}}function Yt(e,a){1&e&&n._UZ(0,"nz-divider",63)}function Ut(e,a){1&e&&n._UZ(0,"label",67),2&e&&n.Q6J("nzDisabled",!0)}function Dt(e,a){1&e&&n._UZ(0,"label",70),2&e&&n.Q6J("nzDisabled",!0)}function $t(e,a){if(1&e){const i=n.EpF();n.TgZ(0,"label",71),n.NdJ("nzCheckedChange",function(f){n.CHM(i);const R=n.oxw(5).$implicit;return n.oxw(3).onRevisionCheckboxClicked(f,R.id)}),n.qZA()}}function Bt(e,a){if(1&e&&(n.YNc(0,Dt,1,1,"label",68),n.YNc(1,$t,1,0,"ng-template",null,69,n.W1O)),2&e){const i=n.MAs(2),c=n.oxw(4).$implicit,f=n.oxw(2).ngrxLet;n.Q6J("ngIf",f.isCurator&&f.id!=(null==c.revisor?null:c.revisor.id))("ngIfElse",i)}}function wt(e,a){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,Ut,1,1,"label",65),n.YNc(2,Bt,3,2,"ng-template",null,66,n.W1O),n.qZA()),2&e){const i=n.MAs(3),c=n.oxw(5).ngrxLet;n.xp6(1),n.Q6J("ngIf",!c.signedIn)("ngIfElse",i)}}function jt(e,a){1&e&&(n.ynx(0),n.YNc(1,Yt,1,0,"nz-divider",57),n.YNc(2,wt,4,2,"span",50),n.BQk())}function Wt(e,a){if(1&e&&(n.TgZ(0,"nz-space",55),n.NdJ("click",function(c){return c.stopPropagation()}),n.YNc(1,Nt,7,5,"span",50),n.YNc(2,It,1,1,"cvc-status-tag",56),n.YNc(3,Jt,1,0,"nz-divider",57),n.YNc(4,Pt,2,0,"a",58),n.YNc(5,jt,3,0,"ng-container",15),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(5),n.Q6J("ngIf","NEW"===i.status)}}function Vt(e,a){if(1&e&&(n.TgZ(0,"nz-collapse-panel",11),n.ynx(1,12),n.YNc(2,Wn,4,1,"ng-container",13),n.YNc(3,Gn,4,1,"ng-container",13),n.YNc(4,Hn,4,1,"ng-container",13),n.YNc(5,qn,4,1,"ng-container",13),n.YNc(6,nt,4,1,"ng-container",13),n.YNc(7,et,4,1,"ng-container",13),n.YNc(8,ot,4,1,"ng-container",13),n.YNc(9,at,4,1,"ng-container",13),n.YNc(10,lt,4,1,"ng-container",13),n.YNc(11,rt,4,1,"ng-container",13),n.YNc(12,gt,4,1,"ng-container",13),n.YNc(13,_,4,1,"ng-container",13),n.YNc(14,s,4,1,"ng-container",13),n.YNc(15,d,4,1,"ng-container",13),n.YNc(16,ut,4,1,"ng-container",13),n.YNc(17,zt,4,1,"ng-container",13),n.YNc(18,xt,4,1,"ng-container",13),n.YNc(19,yt,4,1,"ng-container",13),n.YNc(20,Rt,2,5,"ng-container",14),n.BQk(),n.YNc(21,Ft,11,8,"ng-container",15),n.YNc(22,Et,3,1,"ng-template",null,16,n.W1O),n.YNc(24,Wt,6,1,"ng-template",null,17,n.W1O),n.qZA()),2&e){const i=a.$implicit,c=n.MAs(23),f=n.MAs(25);n.Q6J("nzHeader",c)("nzExtra",f)("nzActive",!0),n.xp6(1),n.Q6J("ngSwitch",i.fieldName),n.xp6(1),n.Q6J("ngSwitchCase","source_ids"),n.xp6(1),n.Q6J("ngSwitchCase","disease_id"),n.xp6(1),n.Q6J("ngSwitchCase","molecular_profile_id"),n.xp6(1),n.Q6J("ngSwitchCase","drug_ids"),n.xp6(1),n.Q6J("ngSwitchCase","therapy_ids"),n.xp6(1),n.Q6J("ngSwitchCase","variant_alias_ids"),n.xp6(1),n.Q6J("ngSwitchCase","molecular_profile_alias_ids"),n.xp6(1),n.Q6J("ngSwitchCase","clinvar_entry_ids"),n.xp6(1),n.Q6J("ngSwitchCase","clingen_code_ids"),n.xp6(1),n.Q6J("ngSwitchCase","acmg_code_ids"),n.xp6(1),n.Q6J("ngSwitchCase","nccn_guideline_id"),n.xp6(1),n.Q6J("ngSwitchCase","hgvs_description_ids"),n.xp6(1),n.Q6J("ngSwitchCase","variant_type_ids"),n.xp6(1),n.Q6J("ngSwitchCase","phenotype_ids"),n.xp6(1),n.Q6J("ngSwitchCase","variant_id"),n.xp6(1),n.Q6J("ngSwitchCase","variant_ids"),n.xp6(1),n.Q6J("ngSwitchCase","source_id"),n.xp6(1),n.Q6J("ngSwitchCase","evidence_item_ids"),n.xp6(2),n.Q6J("ngIf","NEW"!==i.status)}}function Gt(e,a){if(1&e&&(n.TgZ(0,"nz-collapse",9),n.YNc(1,Vt,26,23,"nz-collapse-panel",10),n.qZA()),2&e){const i=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",i.untypedRevisons)}}function Kt(e,a){1&e&&n._UZ(0,"nz-empty",72)}function Ht(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"nz-card",6),n.YNc(2,Gt,2,1,"nz-collapse",7),n.YNc(3,Kt,1,0,"ng-template",null,8,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.MAs(4),c=n.oxw(),f=n.MAs(4);n.xp6(1),n.Q6J("nzExtra",f),n.xp6(1),n.Q6J("ngIf",c.revisions&&c.revisions.length>0)("ngIfElse",i)}}function kt(e,a){}function qt(e,a){1&e&&n.YNc(0,kt,0,0,"ng-template")}function Xt(e,a){if(1&e&&(n.ynx(0),n.YNc(1,qt,1,0,null,81),n.BQk()),2&e){n.oxw();const i=n.MAs(5);n.xp6(1),n.Q6J("ngTemplateOutlet",i)}}function ne(e,a){}function te(e,a){1&e&&n.YNc(0,ne,0,0,"ng-template")}function ee(e,a){if(1&e&&(n.TgZ(0,"span",82),n.YNc(1,te,1,0,null,81),n.qZA()),2&e){n.oxw();const i=n.MAs(5);n.xp6(1),n.Q6J("ngTemplateOutlet",i)}}function ie(e,a){if(1&e){const i=n.EpF();n.TgZ(0,"button",83),n.NdJ("nzPopoverVisibleChange",function(f){return n.CHM(i),n.oxw(7).validationPopoverVisible=f})("click",function(){n.CHM(i);const f=n.oxw(7);return f.validationPopoverVisible=!f.validationPopoverVisible}),n._uU(1," Review Selected Revisions "),n._UZ(2,"i",84),n.qZA()}if(2&e){const i=n.oxw(2).ngrxLet,c=n.MAs(7),f=n.MAs(9),R=n.oxw(5);n.Q6J("nzPopoverTitle",c)("nzPopoverVisible",R.validationPopoverVisible)("nzPopoverContent",f)("nzPopoverTrigger",void 0)("disabled",0===R.selectedRevisionIds.length||!i.signedIn)}}function oe(e,a){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,Xt,2,1,"ng-container",59),n.YNc(2,ee,2,1,"ng-template",null,79,n.W1O),n.YNc(4,ie,3,5,"ng-template",null,80,n.W1O),n.qZA()),2&e){const i=n.MAs(3),c=n.oxw().ngrxLet;n.xp6(1),n.Q6J("ngIf",c.signedIn)("ngIfElse",i)}}function se(e,a){if(1&e&&n._UZ(0,"i",86),2&e){n.oxw(4);const i=n.MAs(3);n.Q6J("nzPopoverContent",i)}}function ae(e,a){1&e&&(n.ynx(0),n.YNc(1,se,1,1,"i",85),n.BQk())}const _e=function(){return{float:"right"}};function le(e,a){if(1&e){const i=n.EpF();n._uU(0," Review Selected Revisions "),n.TgZ(1,"span",87)(2,"i",88),n.NdJ("click",function(){return n.CHM(i),n.oxw(6).validationPopoverVisible=!1}),n.qZA()()}2&e&&(n.xp6(1),n.Q6J("ngStyle",n.DdM(1,_e)))}function ce(e,a){if(1&e){const i=n.EpF();n.TgZ(0,"cvc-comment-input-form",91),n.NdJ("commentChange",function(f){return n.CHM(i),n.oxw(7).revisionComment=f}),n.qZA()}if(2&e){const i=n.oxw(7);n.Q6J("comment",i.revisionComment)}}function re(e,a){if(1&e){const i=n.EpF();n.TgZ(0,"span")(1,"cvc-org-selector-btn-group",92),n.NdJ("selectedOrgChange",function(f){return n.CHM(i),n.oxw(8).mostRecentOrg=f}),n.TgZ(2,"button",93),n.NdJ("click",function(){return n.CHM(i),n.oxw(8).onRejectRevisionsClicked()}),n._uU(3," Reject Revision "),n.qZA()()()}if(2&e){const i=n.oxw(8);n.xp6(1),n.Q6J("selectedOrg",i.mostRecentOrg),n.xp6(1),n.Q6J("nzLoading",i.isLoading)("disabled",void 0===i.revisionComment||i.revisionComment.length<10)}}function pe(e,a){if(1&e){const i=n.EpF();n.TgZ(0,"span")(1,"cvc-org-selector-btn-group",92),n.NdJ("selectedOrgChange",function(f){return n.CHM(i),n.oxw(8).mostRecentOrg=f}),n.TgZ(2,"button",94),n.NdJ("click",function(){return n.CHM(i),n.oxw(8).onAcceptRevisionClicked()}),n._uU(3," Accept Revision "),n.qZA()()()}if(2&e){const i=n.oxw(4).ngrxLet,c=n.oxw(4);n.xp6(1),n.Q6J("selectedOrg",c.mostRecentOrg),n.xp6(1),n.Q6J("nzLoading",c.isLoading)("disabled",!(0==i&&(void 0===c.revisionComment||""===c.revisionComment||c.revisionComment.length>=10)))}}function ge(e,a){if(1&e&&n._UZ(0,"i",96),2&e){n.oxw(6);const i=n.MAs(3);n.Q6J("nzPopoverContent",i)}}function me(e,a){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,ge,1,1,"i",95),n.qZA()),2&e){const i=n.oxw(4).ngrxLet;n.xp6(1),n.Q6J("ngIf",i>0)}}function de(e,a){1&e&&(n.TgZ(0,"span")(1,"nz-space"),n.YNc(2,re,4,3,"span",50),n.YNc(3,pe,4,3,"span",50),n.YNc(4,me,2,1,"span",50),n.qZA()())}function fe(e,a){1&e&&(n.TgZ(0,"nz-space",89),n.YNc(1,ce,1,1,"cvc-comment-input-form",90),n.YNc(2,de,5,0,"span",50),n.qZA())}function ue(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"div",74)(2,"div",75)(3,"nz-space",76),n.YNc(4,oe,6,2,"span",50),n.YNc(5,ae,2,0,"ng-container",15),n.qZA(),n.YNc(6,le,3,2,"ng-template",null,77,n.W1O),n.YNc(8,fe,3,0,"ng-template",null,78,n.W1O),n.qZA()(),n.BQk()),2&e){const i=n.oxw().ngrxLet;n.xp6(5),n.Q6J("ngIf",i>0)}}function ve(e,a){if(1&e&&(n.ynx(0),n.YNc(1,ue,10,1,"ng-container",2),n.BQk()),2&e){const i=n.oxw(4);n.xp6(1),n.Q6J("ngrxLet",i.viewer$)}}function ze(e,a){if(1&e&&(n.TgZ(0,"nz-list-item"),n._uU(1),n.qZA()),2&e){const i=a.$implicit;n.xp6(1),n.Oqu(i)}}function Ce(e,a){if(1&e&&(n.TgZ(0,"nz-card",98)(1,"nz-list",99),n.YNc(2,ze,2,1,"nz-list-item",100),n.qZA()()),2&e){const i=n.oxw(3).ngrxLet;n.xp6(2),n.Q6J("ngForOf",i)}}function xe(e,a){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,Ce,3,1,"nz-card",97),n.qZA()),2&e){const i=n.oxw(2).ngrxLet;n.xp6(1),n.Q6J("ngIf",i.length>0)}}function Te(e,a){if(1&e&&(n.TgZ(0,"nz-descriptions-item",105),n._uU(1),n.qZA()),2&e){const i=a.$implicit;n.Q6J("nzTitle",i.fieldName),n.xp6(1),n.Oqu(i.error)}}function he(e,a){if(1&e&&(n.TgZ(0,"nz-card",102)(1,"nz-descriptions",103),n.YNc(2,Te,2,2,"nz-descriptions-item",104),n.qZA()()),2&e){const i=n.oxw(4).ngrxLet;n.xp6(2),n.Q6J("ngForOf",i)}}function ye(e,a){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,he,3,1,"nz-card",101),n.qZA()),2&e){const i=n.oxw(3).ngrxLet;n.xp6(1),n.Q6J("ngIf",i.length>0)}}function Re(e,a){1&e&&(n.TgZ(0,"nz-space",89),n.YNc(1,xe,2,1,"span",50),n.YNc(2,ye,2,1,"span",50),n.qZA())}function Oe(e,a){if(1&e&&(n.ynx(0),n.YNc(1,ve,2,1,"ng-container",2),n.YNc(2,Re,3,0,"ng-template",null,73,n.W1O),n.BQk()),2&e){const i=n.oxw(3);n.xp6(1),n.Q6J("ngrxLet",i.totalErrorCount$)}}function Ae(e,a){if(1&e&&(n.ynx(0),n.YNc(1,Oe,4,1,"ng-container",2),n.BQk()),2&e){const i=n.oxw(2);n.xp6(1),n.Q6J("ngrxLet",i.genericErrors$)}}function Fe(e,a){if(1&e&&n.YNc(0,Ae,2,1,"ng-container",2),2&e){const i=n.oxw();n.Q6J("ngrxLet",i.validationErrors$)}}let Le=(()=>{class e{constructor(i,c,f,R,w){this.viewerService=i,this.networkErrorService=c,this.acceptRevisionsGql=f,this.rejectRevisionsGql=R,this.validationGql=w,this.refetchQueries=[],this.selectedRevisionIds=[],this.isLoading=!1,this.success=!1,this.validationPopoverVisible=!1,this.destroy$=new b.xQ,this.revisionSetSelectedEvent=new n.vpe,this.revisionMutationCompleted=new n.vpe,this.acceptRevisionsMutator=new E.U(c),this.rejectRevisionsMutator=new E.U(c)}ngOnChanges(i){this.untypedRevisons=this.revisions,this.selectedRevisionIds=[],this.queryRef&&this.queryRef.refetch({ids:this.selectedRevisionIds})}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(i=>{this.mostRecentOrg=i.mostRecentOrg}),this.queryRef=this.validationGql.watch({ids:[]}),this.genericErrors$=this.queryRef.valueChanges.pipe((0,x.U)(({data:i})=>i.validateRevisionsForAcceptance.genericErrors)),this.validationErrors$=this.queryRef.valueChanges.pipe((0,x.U)(({data:i})=>i.validateRevisionsForAcceptance.validationErrors)),this.totalErrorCount$=this.queryRef.valueChanges.pipe((0,x.U)(({data:i})=>i.validateRevisionsForAcceptance.genericErrors.length+i.validateRevisionsForAcceptance.validationErrors.length),(0,t.O)(0)),this.untypedRevisons=this.revisions}onChangesetSelected(i){this.revisionSetSelectedEvent.emit(i)}onRevisionCheckboxClicked(i,c){i?this.selectedRevisionIds.push(c):this.selectedRevisionIds=this.selectedRevisionIds.filter(f=>f!=c),this.queryRef.refetch({ids:this.selectedRevisionIds})}setupMutationResultHandlers(i,c){i.submitSuccess$.pipe((0,P.R)(this.destroy$)).subscribe(f=>{f&&(this.isLoading=!1,this.revisionMutationCompleted.emit(),this.errors=void 0,this.success=c,this.validationPopoverVisible=!1,this.selectedRevisionIds=[])}),i.submitError$.pipe((0,P.R)(this.destroy$)).subscribe(f=>{f.length>0&&(this.isLoading=!1,this.success=!1,this.errors=f,this.validationPopoverVisible=!1,this.selectedRevisionIds=[])})}onRejectRevisionsClicked(){var i;if(this.revisionComment&&""!==this.revisionComment){this.isLoading=!0;let c=this.rejectRevisionsMutator.mutate(this.rejectRevisionsGql,{input:{ids:this.selectedRevisionIds,organizationId:null===(i=this.mostRecentOrg)||void 0===i?void 0:i.id,comment:this.revisionComment}},{refetchQueries:this.refetchQueries});this.setupMutationResultHandlers(c,"rejected")}}onAcceptRevisionClicked(){var i;this.isLoading=!0;let c=this.acceptRevisionsMutator.mutate(this.acceptRevisionsGql,{input:{ids:this.selectedRevisionIds,organizationId:null===(i=this.mostRecentOrg)||void 0===i?void 0:i.id,comment:""===this.revisionComment?void 0:this.revisionComment}},{refetchQueries:this.refetchQueries});this.setupMutationResultHandlers(c,"accepted")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(i){var c;this.errors=null===(c=this.errors)||void 0===c?void 0:c.filter(f=>f!=i)}onSuccessBannerClose(){this.success=!1}}return e.\u0275fac=function(i){return new(i||e)(n.Y36(F.a),n.Y36(I.Y),n.Y36(r.ti),n.Y36(r.VZq),n.Y36(r.Qzn))},e.\u0275cmp=n.Xpm({type:e,selectors:[["cvc-revision-list"]],inputs:{revisions:"revisions",refetchQueries:"refetchQueries"},outputs:{revisionSetSelectedEvent:"revisionSetSelectedEvent",revisionMutationCompleted:"revisionMutationCompleted"},features:[n.TTD],decls:5,vars:3,consts:[["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],[4,"ngrxLet"],["moderationButtons",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose"],["nzTitle","Revisions",1,"card-list",3,"nzExtra"],["class","revision-list",4,"ngIf","ngIfElse"],["noRevisions",""],[1,"revision-list"],[3,"nzHeader","nzExtra","nzActive",4,"ngFor","ngForOf"],[3,"nzHeader","nzExtra","nzActive"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"],["revCardHeaderTitle",""],["revCardHeaderExtra",""],["entityType","Sources",3,"diffObject"],["itemTemplate",""],[3,"source"],["entityType","Disease",3,"diffObject"],[3,"disease"],["entityType","Molecular Profile",3,"diffObject"],[3,"molecularProfile"],["entityType","Therapies",3,"diffObject"],[3,"therapy"],["entityType","Variant Aliases",3,"diffObject"],["entityType","Molecular Profile Aliases",3,"diffObject"],["entityType","ClinVar Entries",3,"diffObject"],["entityType","ClinGen/CGC/VICC Code(s)",3,"diffObject"],["entityType","ACMG/AMP Code(s)",3,"diffObject"],["entityType","NCCN Guideline",3,"diffObject"],["entityType","HGVS Descriptions",3,"diffObject"],["entityType","Variant Types",3,"diffObject"],[3,"variantType"],["entityType","Phenotypes",3,"diffObject"],[3,"phenotype"],["entityType","Variant",3,"diffObject"],[3,"variant"],["entityType","Variants",3,"diffObject"],["entityType","Source",3,"diffObject"],["entityType","Evidence",3,"diffObject"],[3,"evidence"],[3,"currentValue","suggestedValue","left","right","entityType"],["nzSpan","16"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"commentBodySegments"],[3,"user"],[4,"nzSpaceItem"],["nz-icon","","nzTheme","twotone","nzType","civic-revision",3,"nzTwotoneColor"],["nz-popover","","nz-icon","","nzType","comment","nzTheme","outline",3,"nzPopoverContent",4,"nzSpaceItem"],["creationCommentTemplate",""],["nz-popover","","nz-icon","","nzType","comment","nzTheme","outline",3,"nzPopoverContent"],["nzSize","small",3,"click"],[3,"status",4,"nzSpaceItem"],["nzType","vertical",4,"nzSpaceItem"],["nz-button","","nzType","link",3,"click",4,"nzSpaceItem"],[4,"ngIf","ngIfElse"],["noRevisor",""],["nz-typography","","nzType","secondary"],[3,"status"],["nzType","vertical"],["nz-button","","nzType","link",3,"click"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions.",3,"nzDisabled",4,"ngIf","ngIfElse"],["loggedIn",""],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions.",3,"nzDisabled"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Curators may only reject their own revisions.",3,"nzDisabled",4,"ngIf","ngIfElse"],["canRevise",""],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Curators may only reject their own revisions.",3,"nzDisabled"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Select Revision for Acceptance/Rejection",3,"nzCheckedChange"],["nzNotFoundImage","simple","nzNotFoundContent","No Revisions matching filters"],["validationErrorTemplate",""],["nz-row","",2,"margin-top","1em"],["nz-col","","nzSpan","24",2,"text-align","right"],["nzDirection","horizontal"],["validationPopoverTitleTemplate",""],["validationPopoverContentTemplate",""],["notSignedIn",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click"],["nz-icon","","nzType","caret-down","nzTheme","outline"],["nz-icon","","nzType","exclamation-circle","nzTheme","twotone","nzTwotoneColor","red","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent",4,"nzSpaceItem"],["nz-icon","","nzType","exclamation-circle","nzTheme","twotone","nzTwotoneColor","red","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzDirection","vertical"],[3,"comment","commentChange",4,"nzSpaceItem"],[3,"comment","commentChange"],[3,"selectedOrg","selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzSize","small","nzDanger","",3,"nzLoading","disabled","click"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzSize","small",3,"nzLoading","disabled","click"],["nz-icon","","nzTwotoneColor","red","nzType","exclamation-circle","nzTheme","twotone","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent",4,"ngIf"],["nz-icon","","nzTwotoneColor","red","nzType","exclamation-circle","nzTheme","twotone","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent"],["nzTitle","Errors",4,"ngIf"],["nzTitle","Errors"],["nzSize","small"],[4,"ngFor","ngForOf"],["nzTitle","Validation Errors",4,"ngIf"],["nzTitle","Validation Errors"],["nzBordered",""],[3,"nzTitle",4,"ngFor","ngForOf"],[3,"nzTitle"]],template:function(i,c){1&i&&(n.YNc(0,Bn,1,1,"nz-alert",0),n.YNc(1,wn,1,1,"nz-alert",1),n.YNc(2,Ht,5,3,"ng-container",2),n.YNc(3,Fe,1,1,"ng-template",null,3,n.W1O)),2&i&&(n.Q6J("ngForOf",c.errors),n.xp6(1),n.Q6J("ngIf",c.success),n.xp6(1),n.Q6J("ngrxLet",c.viewer$))},directives:[C.sg,J.r,C.O5,D.eJ,N.bd,u.yH,u.Zv,C.RF,C.n9,Cn,xn.T,Tn.n,hn.p,yn.T,v.j,Rn.j,On.i,An.I,Fn.O,C.ED,Ln,Zn.g,y.SK,y.t3,bn.m,Mn.ZU,En.I,T.NU,T.$1,pn.Ls,gn.w,Sn.lU,Qn.h,mn.ix,Nn.Ie,In.SY,dn.p9,C.tP,fn.dQ,C.PC,Jn.b,Pn.q,Yn.m,A.n_,A.AA,un.R7,un.uj],pipes:[Un.I,Dn.wr,$n.a],styles:["[_nghost-%COMP%]{display:block}nz-list[_ngcontent-%COMP%]   .kept[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{background-color:#f6ffed;color:#135200}nz-list[_ngcontent-%COMP%]   .removed[_ngcontent-%COMP%]{background-color:#fff1f0;color:#820014}nz-list[_ngcontent-%COMP%]   .suggested[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}"]}),e})();var Ze=o(8747),be=o(6699);function Me(e,a){if(1&e){const i=n.EpF();n.TgZ(0,"cvc-revision-list",14),n.NdJ("revisionSetSelectedEvent",function(f){return n.CHM(i),n.oxw(2).onRevisionSetSelected(f)})("revisionMutationCompleted",function(){return n.CHM(i),n.oxw(2).refresh()}),n.ALo(1,"ngrxPush"),n.qZA()}if(2&e){const i=n.oxw(2);n.Q6J("revisions",n.lcZ(1,2,i.revisions$))("refetchQueries",i.refetchQueries)}}function Ee(e,a){if(1&e){const i=n.EpF();n.TgZ(0,"button",17),n.NdJ("click",function(){n.CHM(i);const f=n.oxw(2).ngrxLet;return n.oxw(2).loadMore(null==f?null:f.endCursor)}),n._uU(1,"Load More"),n.qZA()}}function Se(e,a){1&e&&(n.ynx(0),n.YNc(1,Ee,2,0,"button",16),n.BQk())}function Qe(e,a){if(1&e&&(n.ynx(0),n.YNc(1,Se,2,0,"ng-container",15),n.BQk()),2&e){const i=a.ngrxLet;n.xp6(1),n.Q6J("ngIf",null==i?null:i.hasNextPage)}}function Ne(e,a){if(1&e){const i=n.EpF();n.TgZ(0,"nz-row")(1,"nz-tag",19),n.NdJ("nzOnClose",function(){return n.CHM(i),n.oxw(3).onSetFilterClearClicked()}),n._uU(2),n.qZA()()}if(2&e){const i=n.oxw(3);n.xp6(2),n.hij("Group: ",i.filteredSet,"")}}function Ie(e,a){1&e&&(n.TgZ(0,"nz-space",4),n.YNc(1,Ne,3,1,"nz-row",18),n.qZA())}function Je(e,a){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const i=a.$implicit;n.xp6(1),n.Oqu(i.displayName)}}function Pe(e,a){if(1&e&&n._UZ(0,"nz-avatar",22),2&e){const i=n.oxw().$implicit;n.Q6J("nzSrc",i.profileImagePath)}}function Ye(e,a){if(1&e&&(n._UZ(0,"nz-avatar",23),n.ALo(1,"uppercase")),2&e){const i=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,i.username.charAt(0)))}}function Ue(e,a){if(1&e&&(n.YNc(0,Pe,1,1,"nz-avatar",20),n.YNc(1,Ye,2,3,"ng-template",null,21,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&e){const i=a.$implicit,c=n.MAs(2);n.Q6J("ngIf",i.profileImagePath)("ngIfElse",c),n.xp6(4),n.Oqu(i.username)}}function De(e,a){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const i=a.$implicit;n.xp6(1),n.Oqu(i.displayName)}}function $e(e,a){if(1&e&&n._UZ(0,"nz-avatar",22),2&e){const i=n.oxw().$implicit;n.Q6J("nzSrc",i.profileImagePath)}}function Be(e,a){if(1&e&&(n._UZ(0,"nz-avatar",23),n.ALo(1,"uppercase")),2&e){const i=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,i.username.charAt(0)))}}function we(e,a){if(1&e&&(n.YNc(0,$e,1,1,"nz-avatar",20),n.YNc(1,Be,2,3,"ng-template",null,21,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&e){const i=a.$implicit,c=n.MAs(2);n.Q6J("ngIf",i.profileImagePath)("ngIfElse",c),n.xp6(4),n.Oqu(i.username)}}function je(e,a){if(1&e){const i=n.EpF();n.ynx(0),n.TgZ(1,"nz-row",2)(2,"nz-col",3)(3,"nz-space",4),n.YNc(4,Me,2,4,"cvc-revision-list",5),n.YNc(5,Qe,2,1,"ng-container",6),n.qZA()(),n.TgZ(6,"nz-col",7),n.YNc(7,Ie,2,0,"nz-space",8),n.TgZ(8,"cvc-participant-list",9),n.NdJ("participantSelectedEvent",function(f){return n.CHM(i),n.oxw().onStatusSelected(f)}),n.YNc(9,Je,2,1,"ng-template",null,10,n.W1O),n.qZA(),n.TgZ(11,"cvc-participant-list",11),n.NdJ("participantSelectedEvent",function(f){return n.CHM(i),n.oxw().onRevisorSelected(f)}),n.ALo(12,"ngrxPush"),n.YNc(13,Ue,5,3,"ng-template",null,10,n.W1O),n.qZA(),n.TgZ(15,"cvc-participant-list",12),n.NdJ("participantSelectedEvent",function(f){return n.CHM(i),n.oxw().onFieldNameSelected(f)}),n.ALo(16,"ngrxPush"),n.YNc(17,De,2,1,"ng-template",null,10,n.W1O),n.qZA(),n.TgZ(19,"cvc-participant-list",13),n.NdJ("participantSelectedEvent",function(f){return n.CHM(i),n.oxw().onResolverSelected(f)}),n.ALo(20,"ngrxPush"),n.YNc(21,we,5,3,"ng-template",null,10,n.W1O),n.qZA()()(),n.BQk()}if(2&e){const i=n.oxw();n.xp6(1),n.Q6J("nzGutter",16),n.xp6(4),n.Q6J("ngrxLet",i.pageInfo$),n.xp6(2),n.Q6J("ngIf",i.filteredSet),n.xp6(1),n.Q6J("preselectedOption",i.preselectedRevisionStatus)("participantList",i.selectableStatuses),n.xp6(3),n.Q6J("participantList",n.lcZ(12,8,i.uniqueRevisors$)),n.xp6(4),n.Q6J("participantList",n.lcZ(16,10,i.revisionFields$)),n.xp6(4),n.Q6J("participantList",n.lcZ(20,12,i.uniqueResolvers$))}}function We(e,a){1&e&&(n.ynx(0),n.TgZ(1,"nz-row",25),n._UZ(2,"i",26),n.qZA(),n.BQk())}function Ve(e,a){1&e&&n._UZ(0,"nz-empty",27)}function Ge(e,a){if(1&e&&(n.YNc(0,We,3,0,"ng-container",0),n.ALo(1,"ngrxPush"),n.YNc(2,Ve,1,0,"ng-template",null,24,n.W1O)),2&e){const i=n.MAs(3),c=n.oxw();n.Q6J("ngIf",n.lcZ(1,2,c.isLoading$))("ngIfElse",i)}}let Ke=(()=>{class e{constructor(i,c,f,R,w,j,dt,ft,He,ke,qe,Xe,ni,ti){this.gql=i,this.route=c,this.variantDetailGql=f,this.variantSummaryGql=R,this.variantGroupDetailGql=w,this.variantGroupSummaryGql=j,this.assertionDetailGql=dt,this.assertionSummaryGql=ft,this.geneDetailGql=He,this.geneSummaryGql=ke,this.evidenceDetailGql=qe,this.evidenceSummaryGql=Xe,this.molecularProfileDetailGql=ni,this.molecularProfileSummaryGql=ti,this.filteredSet=void 0,this.selectableStatuses=[{id:4,displayName:"New",value:r.FJi.New},{id:1,displayName:"Accepted",value:r.FJi.Accepted},{id:2,displayName:"Rejected",value:r.FJi.Rejected},{id:3,displayName:"Superseded",value:r.FJi.Superseded}],this.preselectedRevisionStatus=this.selectableStatuses[0],this.defaultPageSize=10,this.refetchQueries=[]}ngOnInit(){switch(this.routeSub=this.route.params.subscribe(i=>{this.queryParamsSub=this.route.queryParams.subscribe(c=>{let f={first:this.defaultPageSize,subject:{id:this.id,entityType:this.entityType},status:r.FJi.New};c.revisionsetId&&(this.filteredSet=c.revisionsetId,this.preselectedRevisionStatus=void 0,f.status=void 0,f.revisionsetId=c.revisionsetId),this.queryRef=this.gql.watch(f);let R=this.queryRef.valueChanges;this.revisions$=R.pipe((0,l.j)("data","revisions","edges"),(0,x.U)(w=>w.map(j=>j.node))),this.isLoading$=R.pipe((0,x.U)(w=>w.loading),(0,t.O)(!0)),this.pageInfo$=R.pipe((0,l.j)("data","revisions","pageInfo")),this.uniqueRevisors$=R.pipe((0,x.U)(({data:w})=>{var j;return null===(j=w.revisions)||void 0===j?void 0:j.uniqueRevisors})),this.uniqueResolvers$=R.pipe((0,x.U)(({data:w})=>{var j;return null===(j=w.revisions)||void 0===j?void 0:j.uniqueResolvers})),this.revisionFields$=R.pipe((0,x.U)(({data:w})=>{var j;return null===(j=w.revisions)||void 0===j?void 0:j.revisedFieldNames.map((dt,ft)=>Object.assign(Object.assign({},dt),{id:ft}))})),this.unfilteredCount$=R.pipe((0,l.j)("data","revisions","unfilteredCountForSubject"))})}),this.entityType){case r.oRL.Variant:return this.refetchQueries.push({query:this.variantDetailGql.document,variables:{variantId:this.id}}),void this.refetchQueries.push({query:this.variantSummaryGql.document,variables:{variantId:this.id}});case r.oRL.Assertion:return this.refetchQueries.push({query:this.assertionDetailGql.document,variables:{assertionId:this.id}}),void this.refetchQueries.push({query:this.assertionSummaryGql.document,variables:{assertionId:this.id}});case r.oRL.EvidenceItem:return this.refetchQueries.push({query:this.evidenceDetailGql.document,variables:{evidenceId:this.id}}),void this.refetchQueries.push({query:this.evidenceSummaryGql.document,variables:{evidenceId:this.id}});case r.oRL.Gene:return this.refetchQueries.push({query:this.geneDetailGql.document,variables:{geneId:this.id}}),void this.refetchQueries.push({query:this.geneSummaryGql.document,variables:{geneId:this.id}});case r.oRL.VariantGroup:return this.refetchQueries.push({query:this.variantGroupDetailGql.document,variables:{variantGroupId:this.id}}),void this.refetchQueries.push({query:this.variantGroupSummaryGql.document,variables:{variantGroupId:this.id}});case r.oRL.MolecularProfile:return this.refetchQueries.push({query:this.molecularProfileDetailGql.document,variables:{molecularProfileId:this.id}}),void this.refetchQueries.push({query:this.molecularProfileSummaryGql.document,variables:{molecularProfileId:this.id}})}}ngOnDestroy(){var i,c;null===(i=this.routeSub)||void 0===i||i.unsubscribe(),null===(c=this.queryParamsSub)||void 0===c||c.unsubscribe()}onFieldNameSelected(i){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},fieldName:i?i.name:void 0})}onRevisorSelected(i){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},originatingUserId:i?i.id:void 0})}onResolverSelected(i){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},resolvingUserId:i?i.id:void 0})}onStatusSelected(i){this.preselectedRevisionStatus=i,this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},status:i?i.value:void 0})}onRevisionSetSelected(i){this.filteredSet=i,this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},revisionsetId:i||void 0})}onSetFilterClearClicked(){this.filteredSet=void 0,this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},revisionsetId:void 0})}refresh(){this.queryRef.refetch()}loadMore(i){var c;null===(c=this.queryRef)||void 0===c||c.fetchMore({variables:{first:this.defaultPageSize,after:i}})}}return e.\u0275fac=function(i){return new(i||e)(n.Y36(r.L5n),n.Y36(m.gz),n.Y36(r.iJT),n.Y36(r.Bo4),n.Y36(r.Qtd),n.Y36(r.q1D),n.Y36(r.A94),n.Y36(r.ejK),n.Y36(r.TNk),n.Y36(r.cCu),n.Y36(r.pHu),n.Y36(r.sBY),n.Y36(r.AMF),n.Y36(r.Tg0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["cvc-revisions-list-and-filter"]],inputs:{id:"id",entityType:"entityType"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noRevisions",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"revisions","refetchQueries","revisionSetSelectedEvent","revisionMutationCompleted",4,"nzSpaceItem"],[4,"ngrxLet"],["nzSpan","6"],["nzDirection","vertical",4,"ngIf"],["listTitle","Filter by Revision Status",3,"preselectedOption","participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Filter by Revisor",3,"participantList","participantSelectedEvent"],["listTitle","Filter by Field",3,"participantList","participantSelectedEvent"],["listTitle","Filter by Resolver",3,"participantList","participantSelectedEvent"],[3,"revisions","refetchQueries","revisionSetSelectedEvent","revisionMutationCompleted"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[4,"nzSpaceItem"],["nzMode","closeable",3,"nzOnClose"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["noneFound",""],["nzJustify","center"],["nz-icon","","nzType","loading",2,"font-size","32px"],["nzNotFoundImage","simple","nzNotFoundContent","Entity has no Revisions"]],template:function(i,c){if(1&i&&(n.YNc(0,je,23,14,"ng-container",0),n.ALo(1,"ngrxPush"),n.YNc(2,Ge,4,4,"ng-template",null,1,n.W1O)),2&i){const f=n.MAs(3);n.Q6J("ngIf",n.lcZ(1,2,c.unfilteredCount$))("ngIfElse",f)}},directives:[C.O5,y.SK,y.t3,T.NU,T.$1,Le,D.eJ,mn.ix,fn.dQ,gn.w,v.j,Ze.l,be.Dz,pn.Ls,dn.p9],pipes:[D.fM,C.gd],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}),e})()},2914:(G,S,o)=>{o.d(S,{A:()=>D});var r=o(9808),l=o(6949),x=o(1894),t=o(3762),n=o(7484),m=o(8144),C=o(8481),y=o(3618),T=o(1150),b=o(6699),E=o(6059),P=o(685),F=o(6042),I=o(5017),J=o(5e3);let D=(()=>{class N{}return N.\u0275fac=function(A){return new(A||N)},N.\u0275mod=J.oAB({type:N}),N.\u0275inj=J.cJS({imports:[[r.ez,l.WG,x.Jb,t.Ph,n.vh,m.zf,C.X,y.ZJ,b.Rt,P.Xo,F.sL,I.PV,T.N,E.i]]}),N})()},759:(G,S,o)=>{o.d(S,{N:()=>W});var r=o(373),l=o(5e3),x=o(7630),t=o(3618),n=o(9808),m=o(325),C=o(6699),y=o(3610),T=o(6265),b=o(3098),E=o(2937);function P(z,Z){1&z&&(l.ynx(0),l._uU(1,", "),l.BQk())}function F(z,Z){if(1&z&&(l.ynx(0),l._uU(1),l.ALo(2,"eventVerbiage"),l.YNc(3,P,2,0,"ng-container",12),l.BQk()),2&z){const h=Z.$implicit,U=Z.last;l.xp6(1),l.hij(" ",l.Dn7(2,2,h.action,"contributor-card",h.count)," "),l.xp6(2),l.Q6J("ngIf",!U)}}function I(z,Z){if(1&z&&(l.TgZ(0,"nz-descriptions",8)(1,"nz-descriptions-item",9),l.YNc(2,F,4,6,"ng-container",10),l.qZA(),l.TgZ(3,"nz-descriptions-item",11),l._uU(4),l.ALo(5,"date"),l.qZA()()),2&z){const h=l.oxw(2).$implicit;l.Q6J("nzColumn",1),l.xp6(2),l.Q6J("ngForOf",h.uniqueActions),l.xp6(2),l.hij(" ",l.lcZ(5,3,h.lastActionDate)," ")}}function J(z,Z){if(1&z&&(l.TgZ(0,"cvc-user-popover",6),l.YNc(1,I,6,5,"ng-template",null,7,l.W1O),l.qZA()),2&z){const h=l.oxw().$implicit;l.Q6J("userId",h.user.id)}}function D(z,Z){if(1&z&&(l.TgZ(0,"a",3),l._UZ(1,"nz-avatar",4),l.YNc(2,J,3,1,"ng-template",null,5,l.W1O),l.qZA()),2&z){const h=Z.$implicit,U=l.MAs(3);l.MGl("routerLink","/users/",h.user.id,""),l.xp6(1),l.Q6J("nzSize",14)("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",U)("nzSrc",h.user.profileImagePath)}}function N(z,Z){if(1&z&&(l.ynx(0),l.YNc(1,D,4,5,"a",2),l.BQk()),2&z){const h=l.oxw();l.xp6(1),l.Q6J("ngForOf",h.sortedContributors)}}function u(z,Z){1&z&&l._uU(0," None\n")}let A=(()=>{class z{ngOnInit(){if(void 0===this.contributors)throw new Error("Must pass a list of contributors into the contributor stack");this.sortedContributors=this.contributors.slice(),this.sortedContributors.sort((h,U)=>U.totalActionCount-h.totalActionCount)}}return z.\u0275fac=function(h){return new(h||z)},z.\u0275cmp=l.Xpm({type:z,selectors:[["cvc-contributor-stack"]],inputs:{contributors:"contributors"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noContributors",""],["class","avatar",3,"routerLink",4,"ngFor","ngForOf"],[1,"avatar",3,"routerLink"],["nz-popover","","nzPopoverTrigger","hover","nzPopoverPlacement","bottomRight","nzIcon","user","nzSize","small",3,"nzSize","nzPopoverMouseEnterDelay","nzPopoverContent","nzSrc"],["curatorPopover",""],[3,"userId"],["additionalMetadata",""],["nzBordered","","nzTitle","Activity","nzSize","small",3,"nzColumn"],["nzTitle","Contributions"],[4,"ngFor","ngForOf"],["nzTitle","Last Contribution"],[4,"ngIf"]],template:function(h,U){if(1&h&&(l.YNc(0,N,2,1,"ng-container",0),l.YNc(1,u,1,0,"ng-template",null,1,l.W1O)),2&h){const V=l.MAs(2);l.Q6J("ngIf",U.sortedContributors&&U.sortedContributors.length>0)("ngIfElse",V)}},directives:[n.O5,n.sg,m.yS,C.Dz,y.lU,T.q,b.R7,b.uj],pipes:[E.R,n.uU],styles:[""]}),z})();var v=o(6949);function L(z,Z){if(1&z&&(l.ynx(0),l._UZ(1,"cvc-contributor-stack",5),l.BQk()),2&z){const h=Z.ngIf;l.xp6(1),l.Q6J("contributors",h)}}function Q(z,Z){1&z&&l._uU(0," None ")}function Y(z,Z){if(1&z&&(l.ynx(0),l._UZ(1,"cvc-contributor-stack",5),l.BQk()),2&z){const h=Z.ngIf;l.xp6(1),l.Q6J("contributors",h)}}function B(z,Z){1&z&&l._uU(0," None ")}let W=(()=>{class z{constructor(h){this.gql=h}ngOnInit(){if(void 0===this.subscribable)throw new Error("Must pass a subscribable into ContributorAvatars component.");let h=this.gql.watch({subscribable:this.subscribable}).valueChanges;this.curators$=h.pipe((0,r.j)("data","contributors","curators")),this.editors$=h.pipe((0,r.j)("data","contributors","editors"))}}return z.\u0275fac=function(h){return new(h||z)(l.Y36(x.kQf))},z.\u0275cmp=l.Xpm({type:z,selectors:[["cvc-contributor-avatars"]],inputs:{subscribable:"subscribable"},decls:14,vars:8,consts:[["nz-typography","","nzType","secondary",1,"role-group-label"],[1,"role-group"],[4,"ngIf","ngIfElse"],["noCurators",""],["noEditors",""],[3,"contributors"]],template:function(h,U){if(1&h&&(l.TgZ(0,"span",0),l._uU(1,"Curators:"),l.qZA(),l.TgZ(2,"div",1),l.YNc(3,L,2,1,"ng-container",2),l.ALo(4,"ngrxPush"),l.YNc(5,Q,1,0,"ng-template",null,3,l.W1O),l.qZA(),l.TgZ(7,"span",0),l._uU(8,"Editors:"),l.qZA(),l.TgZ(9,"div",1),l.YNc(10,Y,2,1,"ng-container",2),l.ALo(11,"ngrxPush"),l.YNc(12,B,1,0,"ng-template",null,4,l.W1O),l.qZA()),2&h){const V=l.MAs(6),q=l.MAs(13);l.xp6(3),l.Q6J("ngIf",l.lcZ(4,4,U.curators$))("ngIfElse",V),l.xp6(7),l.Q6J("ngIf",l.lcZ(11,6,U.editors$))("ngIfElse",q)}},directives:[t.ZU,n.O5,A],pipes:[v.fM],styles:["[_nghost-%COMP%]{display:inline-block}.role-group-label[_ngcontent-%COMP%]{margin-left:12px}.role-group[_ngcontent-%COMP%]{display:inline-block}.role-group[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{display:inline-block;margin-left:2px}"]}),z})()},5750:(G,S,o)=>{o.d(S,{Z:()=>P});var r=o(9808),l=o(6949),x=o(3618),t=o(325),n=o(6699),m=o(3610),C=o(6905),y=o(6081),T=o(3098),b=o(5e3);let E=(()=>{class F{}return F.\u0275fac=function(J){return new(J||F)},F.\u0275mod=b.oAB({type:F}),F.\u0275inj=b.cJS({imports:[[r.ez,t.Bz,n.Rt,m.$6,T.q6,C.s,y.J]]}),F})(),P=(()=>{class F{}return F.\u0275fac=function(J){return new(J||F)},F.\u0275mod=b.oAB({type:F}),F.\u0275inj=b.cJS({imports:[[r.ez,l.WG,x.ZJ,E]]}),F})()},9077:(G,S,o)=>{o.d(S,{Q:()=>N});var r=o(6123),l=o(7630),x=o(8929),t=o(4850),n=o(7625),m=o(5e3),C=o(9169),y=o(9808),T=o(6042),b=o(2643),E=o(2683),P=o(404),F=o(5017),I=o(6949);function J(u,A){if(1&u){const v=m.EpF();m.ynx(0),m.TgZ(1,"button",2),m.NdJ("click",function(){return m.CHM(v),m.oxw().unsubscribe()}),m._UZ(2,"i",3),m.qZA(),m.BQk()}if(2&u){const v=m.oxw();m.xp6(1),m.Q6J("nzLoading",v.isSubmitting)}}function D(u,A){if(1&u){const v=m.EpF();m.TgZ(0,"button",4),m.NdJ("click",function(){return m.CHM(v),m.oxw().subscribe()}),m._UZ(1,"i",5),m.qZA()}if(2&u){const v=m.oxw();m.Q6J("nzLoading",v.isSubmitting)}}let N=(()=>{class u{constructor(v,L,Q,Y){this.isSubscribedGQL=v,this.unsubscribeMutation=L,this.subscribeMutation=Q,this.networkErrorService=Y,this.isSubmitting=!1,this.destroy$=new x.xQ,this.unsubscribeMutator=new r.U(Y),this.subscribeMutator=new r.U(Y)}ngOnInit(){if(void 0===this.viewer)throw new Error("Must pass in a viewer to the CvcEntitySubscriptionButtonComponent");if(void 0===this.typename)throw new Error("Must pass in a typename to the CvcEntitySubscriptionButtonComponent");if(void 0===this.subscribableId)throw new Error("Must pass in a subscribableId to the CvcEntitySubscriptionButtonComponent");this.subscribable={id:this.subscribableId,entityType:l.o71[this.typename]},this.queryRef=this.isSubscribedGQL.watch({subscribable:this.subscribable}),this.existingSubscription$=this.queryRef.valueChanges.pipe((0,t.U)(({data:L})=>L.subscriptionForEntity))}subscribe(){this.subscribable&&(this.isSubmitting=!0,this.subscribeMutator.mutate(this.subscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,n.R)(this.destroy$)).subscribe(L=>{var Q;L&&(null===(Q=this.queryRef)||void 0===Q||Q.refetch(),this.isSubmitting=!1)}))}unsubscribe(){this.subscribable&&(this.isSubmitting=!0,this.unsubscribeMutator.mutate(this.unsubscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,n.R)(this.destroy$)).subscribe(L=>{var Q;L&&(null===(Q=this.queryRef)||void 0===Q||Q.refetch(),this.isSubmitting=!1)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return u.\u0275fac=function(v){return new(v||u)(m.Y36(l.A4J),m.Y36(l.m$d),m.Y36(l.jMx),m.Y36(C.Y))},u.\u0275cmp=m.Xpm({type:u,selectors:[["cvc-entity-subscription-button"]],inputs:{viewer:"viewer",typename:"typename",subscribableId:"subscribableId"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noSub",""],["nz-button","","nz-tooltip","Unsubscribe","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","bell","nzTheme","fill"],["nz-button","","nz-tooltip","Subscribe","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","bell","nzTheme","outline"]],template:function(v,L){if(1&v&&(m.YNc(0,J,3,1,"ng-container",0),m.ALo(1,"ngrxPush"),m.YNc(2,D,2,1,"ng-template",null,1,m.W1O)),2&v){const Q=m.MAs(3);m.Q6J("ngIf",m.lcZ(1,2,L.existingSubscription$))("ngIfElse",Q)}},directives:[y.O5,T.ix,b.dQ,E.w,P.SY,F.Ls],pipes:[I.fM],styles:["[_nghost-%COMP%]{display:block}"]}),u})()},4609:(G,S,o)=>{o.d(S,{g:()=>C});var r=o(9808),l=o(6042),x=o(6949),t=o(5017),n=o(404),m=o(5e3);let C=(()=>{class y{}return y.\u0275fac=function(b){return new(b||y)},y.\u0275mod=m.oAB({type:y}),y.\u0275inj=m.cJS({imports:[[r.ez,l.sL,t.PV,n.cg,x.WG]]}),y})()},1243:(G,S,o)=>{o.d(S,{I:()=>l});var r=o(5e3);let l=(()=>{class x{transform(n){if(n){let C=n.toLowerCase().replace(/_/g," ").split(" ");for(var m=0;m<C.length;m++)C[m]=C[m].charAt(0).toUpperCase()+C[m].slice(1);return C.join(" ")}return""}}return x.\u0275fac=function(n){return new(n||x)},x.\u0275pipe=r.Yjl({name:"enumToTitle",type:x,pure:!0}),x})()}}]);