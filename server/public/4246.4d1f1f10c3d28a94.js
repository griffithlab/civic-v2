"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[4246],{4805:(y,v,o)=>{o.d(v,{_:()=>h});var r=o(5e3),T=o(7484);const g=["*"];let h=(()=>{class l{constructor(){this.cvcTitle=void 0}ngOnInit(){}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275cmp=r.Xpm({type:l,selectors:[["cvc-entity-table-card"]],inputs:{cvcTitle:"cvcTitle"},ngContentSelectors:g,decls:3,vars:1,consts:[[3,"nzTitle"],[1,"card-content"]],template:function(d,n){1&d&&(r.F$t(),r.TgZ(0,"nz-card",0),r.TgZ(1,"div",1),r.Hsn(2),r.qZA(),r.qZA()),2&d&&r.Q6J("nzTitle",n.cvcTitle)},directives:[T.bd],styles:["[_nghost-%COMP%]{display:block}.card-content[_ngcontent-%COMP%]{margin:-11px -12px -13px}"]}),l})()},316:(y,v,o)=>{o.d(v,{C:()=>h});var r=o(9808),T=o(7484),g=o(5e3);let h=(()=>{class l{}return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=g.oAB({type:l}),l.\u0275inj=g.cJS({imports:[[r.ez,T.vh]]}),l})()},7993:(y,v,o)=>{o.d(v,{d:()=>E});var r=o(712),T=o(3154),g=o(8929),h=o(4850),l=o(373),C=o(1059),d=o(13),n=o(5e3),p=o(592),z=o(8054),m=o(4182),M=o(2166),f=o(9808),s=o(6906),Z=o(6715),_=o(8481),A=o(3610);const I=function(a){return{"matched-tag":a}};function x(a,c){if(1&a&&(n.TgZ(0,"div",2),n.TgZ(1,"nz-tag"),n._uU(2),n.qZA(),n.qZA()),2&a){const t=c.$implicit,e=n.oxw();n.Q6J("ngClass",n.VKq(2,I,e.matchingText&&t.toLowerCase().includes(e.matchingText))),n.xp6(2),n.Oqu(t)}}function O(a,c){if(1&a&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&a){const t=n.oxw(2);n.xp6(1),n.hij("",t.matchedHiddenCount," of ")}}function P(a,c){if(1&a){const t=n.EpF();n.TgZ(0,"nz-tag",5),n.NdJ("click",function(){return n.CHM(t),n.oxw().onOverflowClicked()}),n._uU(1," +"),n.YNc(2,O,2,1,"span",6),n._uU(3),n.qZA()}if(2&a){const t=n.oxw(),e=n.MAs(5);n.Q6J("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",e),n.xp6(2),n.Q6J("ngIf",t.matchedHiddenCount>0),n.xp6(1),n.hij("",t.hiddenCount," more ")}}function S(a,c){if(1&a&&(n.TgZ(0,"div",2),n.TgZ(1,"nz-tag"),n._uU(2),n.qZA(),n.qZA()),2&a){const t=c.$implicit,e=n.oxw(2);n.Q6J("ngClass",n.VKq(2,I,e.matchingText&&t.toLowerCase().includes(e.matchingText))),n.xp6(2),n.Oqu(t)}}function b(a,c){if(1&a&&(n.TgZ(0,"cvc-tag-list",0),n.YNc(1,S,3,4,"div",1),n.qZA()),2&a){const t=n.oxw();n.xp6(1),n.Q6J("ngForOf",t.hiddenTags)}}let J=(()=>{class a{constructor(){this.maxDisplayCount=2,this.matchedHiddenCount=0}ngOnInit(){this.calculateDisplayedTags()}calculateDisplayedTags(){var t,e,u,i;if(this.displayedTags=null===(t=this.tags)||void 0===t?void 0:t.slice(0,this.maxDisplayCount),this.hiddenTags=null===(e=this.tags)||void 0===e?void 0:e.slice(this.maxDisplayCount),this.hiddenCount=null===(u=this.hiddenTags)||void 0===u?void 0:u.length,this.matchingText=null===(i=this.matchingText)||void 0===i?void 0:i.toLowerCase(),this.matchingText&&this.hiddenTags){let D=this.matchingText;this.hiddenTags.forEach(q=>{q.toLowerCase().includes(D)&&(this.matchedHiddenCount+=1)})}}onOverflowClicked(){var t;this.maxDisplayCount=(null===(t=this.tags)||void 0===t?void 0:t.length)||0,this.calculateDisplayedTags()}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=n.Xpm({type:a,selectors:[["cvc-plain-tag-overflow"]],inputs:{matchingText:"matchingText",tags:"tags",maxDisplayCount:"maxDisplayCount"},decls:6,vars:5,consts:[["size","xs"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["class","overflow-tag","nz-popover","","nzPopoverPlacement","top","nzPopoverTrigger","hover",3,"nzPopoverMouseEnterDelay","nzPopoverContent","click",4,"ngIf"],["additionalTagPopover",""],["nz-popover","","nzPopoverPlacement","top","nzPopoverTrigger","hover",1,"overflow-tag",3,"nzPopoverMouseEnterDelay","nzPopoverContent","click"],[4,"ngIf"]],template:function(t,e){1&t&&(n.TgZ(0,"cvc-tag-list",0),n.YNc(1,x,3,4,"div",1),n.TgZ(2,"div",2),n.YNc(3,P,4,4,"nz-tag",3),n.qZA(),n.YNc(4,b,2,1,"ng-template",null,4,n.W1O),n.qZA()),2&t&&(n.xp6(1),n.Q6J("ngForOf",e.displayedTags),n.xp6(1),n.Q6J("ngClass",n.VKq(3,I,e.matchedHiddenCount>0)),n.xp6(1),n.Q6J("ngIf",e.hiddenCount&&e.hiddenCount>0))},directives:[Z.$,f.sg,f.mk,_.j,f.O5,A.lU],styles:[".matched-tag[_ngcontent-%COMP%]{font-weight:700}"]}),a})();var U=o(6949);function Q(a,c){if(1&a&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._UZ(2,"cvc-source-tag",17),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._UZ(10,"cvc-plain-tag-overflow",18),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA(),n.TgZ(13,"td"),n._uU(14),n.qZA(),n.TgZ(15,"td",19),n._uU(16),n.qZA(),n.qZA()),2&a){const t=c.$implicit,e=n.oxw();n.xp6(2),n.Q6J("source",t),n.xp6(2),n.hij(" ",t.displayType," "),n.xp6(2),n.hij(" ",t.citationId," "),n.xp6(2),n.hij(" ",t.name," "),n.xp6(2),n.Q6J("tags",t.authors)("matchingText",e.authorInput),n.xp6(2),n.hij(" ",t.publicationYear," "),n.xp6(2),n.hij(" ",t.journal," "),n.xp6(2),n.Oqu(t.evidenceItemCount)}}let E=(()=>{class a{constructor(t){this.gql=t,this.debouncedQuery=new g.xQ,this.pageSize=25,this.sortColumns=r.kQl}ngOnInit(){this.queryRef=this.gql.watch({first:this.pageSize,clinicalTrialId:this.clinicalTrialId}),this.data$=this.queryRef.valueChanges.pipe((0,h.U)(t=>({data:t.data,loading:t.loading,networkStatus:t.networkStatus}))),this.isLoading$=this.data$.pipe((0,l.j)("loading"),(0,C.O)(!0)),this.sources$=this.data$.pipe((0,l.j)("data","browseSources","edges"),(0,h.U)(t=>t.map(e=>e.node))),this.pageInfo$=this.data$.pipe((0,l.j)("data","browseSources","pageInfo")),this.debouncedQuery.pipe((0,d.b)(500)).subscribe(t=>this.refresh()),this.textInputCallback=()=>{this.debouncedQuery.next()}}refresh(){var t;null===(t=this.queryRef)||void 0===t||t.refetch({citationId:this.citationIdInput?+this.citationIdInput:void 0,author:this.authorInput,year:this.yearInput?+this.yearInput:void 0,journal:this.journalInput,name:this.nameInput,sourceType:this.sourceTypeInput})}onSortChanged(t){var e;null===(e=this.queryRef)||void 0===e||e.refetch({sortBy:(0,T._)(t)})}onModelChanged(){this.debouncedQuery.next()}ngOnDestroy(){this.debouncedQuery.unsubscribe()}loadMore(t){var e;null===(e=this.queryRef)||void 0===e||e.fetchMore({variables:{first:this.pageSize,after:t}})}}return a.\u0275fac=function(t){return new(t||a)(n.Y36(r.IZ6))},a.\u0275cmp=n.Xpm({type:a,selectors:[["cvc-sources-table"]],inputs:{clinicalTrialId:"clinicalTrialId"},decls:41,vars:34,consts:[[3,"nzData","nzLoading","nzFrontPagination","nzShowPagination"],["sourcesTable",""],[3,"nzSortOrderChange"],["nzWidth","15%"],[3,"nzColumnKey","nzSortFn"],["nzWidth","25%",3,"nzColumnKey","nzSortFn"],["nzRight","",3,"nzColumnKey","nzSortFn"],["nz-icon","","nzType","civic:evidence","nz-tooltip","","nzTooltipTitle","Evidence Count"],["nzAllowClear","","nzPlaceHolder","Choose",3,"ngModel","ngModelChange"],["nzValue","PUBMED","nzLabel","PubMed"],["nzValue","ASCO","nzLabel","ASCO"],["placeholderText","ID",3,"inputModel","onInputChanged","inputModelChange"],["placeholderText","Name",3,"inputModel","onInputChanged","inputModelChange"],["placeholderText","Authors",3,"inputModel","onInputChanged","inputModelChange"],["placeholderText","Year",3,"inputModel","onInputChanged","inputModelChange"],["placeholderText","Journal",3,"inputModel","onInputChanged","inputModelChange"],[4,"ngFor","ngForOf"],[3,"source"],[3,"tags","matchingText"],["nzRight",""]],template:function(t,e){if(1&t&&(n.TgZ(0,"nz-table",0,1),n.ALo(2,"ngrxPush"),n.ALo(3,"ngrxPush"),n.TgZ(4,"thead",2),n.NdJ("nzSortOrderChange",function(i){return e.onSortChanged(i)}),n.TgZ(5,"tr"),n.TgZ(6,"th",3),n._uU(7," Citation "),n.qZA(),n.TgZ(8,"th",4),n._uU(9," Source Type "),n.qZA(),n.TgZ(10,"th",4),n._uU(11," ID "),n.qZA(),n.TgZ(12,"th",5),n._uU(13," Name "),n.qZA(),n.TgZ(14,"th",4),n._uU(15," Authors "),n.qZA(),n.TgZ(16,"th",4),n._uU(17," Year "),n.qZA(),n.TgZ(18,"th",4),n._uU(19," Journal "),n.qZA(),n.TgZ(20,"th",6),n._UZ(21,"i",7),n.qZA(),n.qZA(),n.TgZ(22,"tr"),n._UZ(23,"th"),n.TgZ(24,"th"),n.TgZ(25,"nz-select",8),n.NdJ("ngModelChange",function(){return e.onModelChanged()})("ngModelChange",function(i){return e.sourceTypeInput=i}),n._UZ(26,"nz-option",9),n._UZ(27,"nz-option",10),n.qZA(),n.qZA(),n.TgZ(28,"th"),n.TgZ(29,"cvc-clearable-input-filter",11),n.NdJ("inputModelChange",function(i){return e.citationIdInput=i}),n.qZA(),n.qZA(),n.TgZ(30,"th"),n.TgZ(31,"cvc-clearable-input-filter",12),n.NdJ("inputModelChange",function(i){return e.nameInput=i}),n.qZA(),n.qZA(),n.TgZ(32,"th"),n.TgZ(33,"cvc-clearable-input-filter",13),n.NdJ("inputModelChange",function(i){return e.authorInput=i}),n.qZA(),n.qZA(),n.TgZ(34,"th"),n.TgZ(35,"cvc-clearable-input-filter",14),n.NdJ("inputModelChange",function(i){return e.yearInput=i}),n.qZA(),n.qZA(),n.TgZ(36,"th"),n.TgZ(37,"cvc-clearable-input-filter",15),n.NdJ("inputModelChange",function(i){return e.journalInput=i}),n.qZA(),n.qZA(),n._UZ(38,"th"),n.qZA(),n.qZA(),n.TgZ(39,"tbody"),n.YNc(40,Q,17,9,"tr",16),n.qZA(),n.qZA()),2&t){const u=n.MAs(1);n.Q6J("nzData",n.lcZ(2,30,e.sources$))("nzLoading",n.lcZ(3,32,e.isLoading$))("nzFrontPagination",!1)("nzShowPagination",!1),n.xp6(8),n.Q6J("nzColumnKey",e.sortColumns.SourceType)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",e.sortColumns.CitationId)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",e.sortColumns.Name)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",e.sortColumns.Authors)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",e.sortColumns.Year)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",e.sortColumns.Journal)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",e.sortColumns.EvidenceCount)("nzSortFn",!0),n.xp6(5),n.Q6J("ngModel",e.sourceTypeInput),n.xp6(4),n.Q6J("inputModel",e.citationIdInput)("onInputChanged",e.textInputCallback),n.xp6(2),n.Q6J("inputModel",e.nameInput)("onInputChanged",e.textInputCallback),n.xp6(2),n.Q6J("inputModel",e.authorInput)("onInputChanged",e.textInputCallback),n.xp6(2),n.Q6J("inputModel",e.yearInput)("onInputChanged",e.textInputCallback),n.xp6(2),n.Q6J("inputModel",e.journalInput)("onInputChanged",e.textInputCallback),n.xp6(3),n.Q6J("ngForOf",u.data)}},directives:[p.N8,p.Om,p.$Z,p.Uo,p._C,p.qD,p.qn,z.Vq,m.JJ,m.On,z.Ip,M.p,p.p0,f.sg,s.T,J],pipes:[U.fM],styles:["[_nghost-%COMP%]{display:block}"]}),a})()},8283:(y,v,o)=>{o.d(v,{h:()=>f});var r=o(9808),T=o(592),g=o(8054),h=o(4125),l=o(4182),C=o(9779),d=o(6949),n=o(897),p=o(8481),z=o(3610),m=o(5e3);let M=(()=>{class s{}return s.\u0275fac=function(_){return new(_||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({imports:[[r.ez,p.X,z.$6,n.$]]}),s})(),f=(()=>{class s{}return s.\u0275fac=function(_){return new(_||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({imports:[[r.ez,l.u5,d.WG,T.HQ,g.LV,h.k,C.s,M]]}),s})()}}]);