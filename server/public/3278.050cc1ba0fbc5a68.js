"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[3278],{9814:(X,A,o)=>{o.d(A,{O:()=>Z});var S=o(655),x=o(3154),p=o(7630),d=o(4987),I=o(591),v=o(8929),T=o(3240),C=o(4850),m=o(373),f=o(5778),h=o(2986),J=o(1307),z=o(2198),l=o(13),M=o(7168),t=o(5e3),O=o(9350),u=o(9808),P=o(7484),E=o(5851),g=o(1132),$=o(727),Y=o(7451),F=o(404),w=o(2683),H=o(5017),b=o(8054),_=o(3075),R=o(2166),B=o(8481),y=o(6906),V=o(125),D=o(3193),W=o(8664),j=o(4022),N=o(6042),L=o(2643),G=o(325),K=o(3610),r=o(7625),Q=o(6123),U=o(9169),q=o(8144),k=o(2359),tt=o(822),nt=o(1047),et=o(7525),ot=o(9180),ct=o(8227),at=o(1793);function it(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"nz-alert",6),t.NdJ("nzOnClose",function(){return t.CHM(n),t.oxw().onSuccessBannerClose()}),t.qZA()}}function st(e,c){if(1&e&&t._UZ(0,"cvc-form-errors-alert",7),2&e){const n=t.oxw();t.Q6J("errors",n.errorMessages)}}function rt(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"textarea",8),t.NdJ("ngModelChange",function(a){return t.CHM(n),t.oxw().reason=a}),t.qZA()}if(2&e){const n=t.oxw();t.Q6J("ngModel",n.reason)}}function lt(e,c){1&e&&t._UZ(0,"nz-option",13)}function gt(e,c){1&e&&t._UZ(0,"nz-option",14)}function ut(e,c){1&e&&t._UZ(0,"nz-option",15)}function pt(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"nz-select",9),t.NdJ("ngModelChange",function(a){return t.CHM(n),t.oxw().newStatus=a}),t.YNc(1,lt,1,0,"nz-option",10),t.YNc(2,gt,1,0,"nz-option",11),t.YNc(3,ut,1,0,"nz-option",12),t.qZA()}if(2&e){const n=t.oxw();t.Q6J("ngModel",n.newStatus),t.xp6(1),t.Q6J("ngIf","NEW"==n.currentStatus),t.xp6(1),t.Q6J("ngIf","NEW"!=n.currentStatus),t.xp6(1),t.Q6J("ngIf","NEW"==n.currentStatus)}}function dt(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"nz-spin",16)(1,"cvc-form-buttons")(2,"cvc-org-selector-btn-group",17),t.NdJ("selectedOrgChange",function(a){return t.CHM(n),t.oxw().mostRecentOrg=a}),t.TgZ(3,"button",18),t.NdJ("click",function(){return t.CHM(n),t.oxw().updateSourceSuggestionStatus()}),t._uU(4," Update Source Suggestion status "),t.qZA()()()()}if(2&e){const n=t.oxw();t.Q6J("nzSpinning",n.loading),t.xp6(2),t.Q6J("selectedOrg",n.mostRecentOrg),t.xp6(1),t.Q6J("disabled",n.loading)}}let mt=(()=>{class e{constructor(n,i,a){this.viewerService=n,this.networkErrorService=i,this.updateSuggestionStatusGql=a,this.commentAddedEvent=new t.vpe,this.destroy$=new v.xQ,this.success=!1,this.errorMessages=[],this.loading=!1,this.viewerService.viewer$.pipe((0,r.R)(this.destroy$)).subscribe(s=>{this.organizations=s.organizations,this.mostRecentOrg=s.mostRecentOrg}),this.sourceSuggestionStatusMutator=new Q.U(i)}selectOrg(n){this.mostRecentOrg=n}updateSourceSuggestionStatus(){var n;if(this.newStatus){let i=this.sourceSuggestionStatusMutator.mutate(this.updateSuggestionStatusGql,{input:{id:this.sourceSuggestionId,newStatus:this.newStatus,reason:this.reason,organizationId:null===(n=this.mostRecentOrg)||void 0===n?void 0:n.id}});i.submitSuccess$.pipe((0,r.R)(this.destroy$)).subscribe(a=>{this.resetForm(),this.success=!0}),i.submitError$.pipe((0,r.R)(this.destroy$)).subscribe(a=>{a&&(this.errorMessages=a)}),i.isSubmitting$.pipe((0,r.R)(this.destroy$)).subscribe(a=>{this.loading=a})}}resetForm(){this.commentText=""}onSuccessBannerClose(){this.resetForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(O.a),t.Y36(U.Y),t.Y36(p.wRZ))},e.\u0275cmp=t.Xpm({type:e,selectors:[["cvc-update-source-suggestion-form"]],inputs:{sourceSuggestionId:"sourceSuggestionId",currentStatus:"currentStatus"},outputs:{commentAddedEvent:"commentAddedEvent"},decls:7,vars:2,consts:[["nzDirection","vertical"],["nzBanner","","nzMessage","Status Updated","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],[3,"errors",4,"ngIf"],["rows","4","nz-input","",3,"ngModel","ngModelChange",4,"nzSpaceItem"],["nzPlaceHolder","New Status","required","true",3,"ngModel","ngModelChange",4,"nzSpaceItem"],["nzTip","Submitting",3,"nzSpinning",4,"nzSpaceItem"],["nzBanner","","nzMessage","Status Updated","nzType","success","nzCloseable","",3,"nzOnClose"],[3,"errors"],["rows","4","nz-input","",3,"ngModel","ngModelChange"],["nzPlaceHolder","New Status","required","true",3,"ngModel","ngModelChange"],["nzValue","CURATED","nzLabel","Curated",4,"ngIf"],["nzValue","NEW","nzLabel","New",4,"ngIf"],["nzValue","REJECTED","nzLabel","Rejected",4,"ngIf"],["nzValue","CURATED","nzLabel","Curated"],["nzValue","NEW","nzLabel","New"],["nzValue","REJECTED","nzLabel","Rejected"],["nzTip","Submitting",3,"nzSpinning"],[3,"selectedOrg","selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled","click"]],template:function(n,i){1&n&&(t.TgZ(0,"nz-card")(1,"nz-space",0),t.YNc(2,it,1,0,"nz-alert",1),t.YNc(3,st,1,1,"cvc-form-errors-alert",2),t.YNc(4,rt,1,1,"textarea",3),t.YNc(5,pt,4,4,"nz-select",4),t.YNc(6,dt,5,3,"nz-spin",5),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("ngIf",i.success),t.xp6(1),t.Q6J("ngIf",i.errorMessages.length))},directives:[P.bd,q.NU,u.O5,k.r,tt.V,q.$1,nt.Zp,_.Fj,_.JJ,_.On,b.Vq,_.Q7,b.Ip,et.W,ot.Z,ct.q,N.ix,L.dQ,at.m,w.w],styles:[""],encapsulation:2}),e})();var _t=o(3667),vt=o(3388),Ct=o(6949);function ht(e,c){}function zt(e,c){if(1&e&&(t.ynx(0),t.TgZ(1,"nz-card",6),t.YNc(2,ht,0,0,"ng-template",7),t.qZA(),t.BQk()),2&e){t.oxw();const n=t.MAs(8),i=t.MAs(10),a=t.MAs(4);t.xp6(1),t.Q6J("nzTitle",n)("nzExtra",i),t.xp6(1),t.Q6J("ngTemplateOutlet",a)}}function St(e,c){}const xt=function(e){return{height:e}};function Tt(e,c){if(1&e&&(t.TgZ(0,"div",8)(1,"nz-card",9),t.YNc(2,St,0,0,"ng-template",7),t.qZA()()),2&e){const n=t.oxw(),i=t.MAs(8),a=t.MAs(10),s=t.MAs(4);t.Q6J("ngStyle",t.VKq(4,xt,n.cvcHeight)),t.xp6(1),t.Q6J("nzTitle",i)("nzExtra",a),t.xp6(1),t.Q6J("ngTemplateOutlet",s)}}function ft(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"cvc-clearable-input-filter",30),t.NdJ("inputModelChange",function(a){return t.CHM(n),t.oxw(2).submitterInput=a})("inputModelChange",function(){return t.CHM(n),t.oxw(2).filterChange$.next()}),t.qZA()}if(2&e){const n=t.oxw(2);t.Q6J("inputModel",n.submitterInput)}}function Mt(e,c){if(1&e&&(t.ynx(0),t.TgZ(1,"nz-tag",54),t._uU(2),t.ALo(3,"lowercase"),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,n.status)," ")}}function Zt(e,c){if(1&e&&(t.ynx(0),t.TgZ(1,"nz-tag",55),t._uU(2),t.ALo(3,"lowercase"),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,n.status)," ")}}function It(e,c){if(1&e&&t._UZ(0,"i",58),2&e){const n=t.oxw(2).$implicit,i=t.oxw(2);t.Q6J("nzTooltipTitle",i.isScrolling?"":n.reason)}}function bt(e,c){if(1&e&&(t.ynx(0),t.TgZ(1,"nz-tag",56),t.YNc(2,It,1,1,"i",57),t._uU(3),t.ALo(4,"lowercase"),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",n.reason&&""!=n.reason),t.xp6(1),t.hij(" ",t.lcZ(4,2,n.status)," ")}}function yt(e,c){if(1&e&&t._UZ(0,"cvc-source-tag",59),2&e){const n=t.oxw().$implicit;t.Q6J("source",n.source)}}function At(e,c){if(1&e&&t._UZ(0,"cvc-user-tag",60),2&e){const n=t.oxw().$implicit;t.Q6J("user",n.user)}}function Jt(e,c){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.source.displayType," ")}}function Nt(e,c){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.source.citationId," ")}}function Qt(e,c){if(1&e&&t._UZ(0,"cvc-gene-tag",61),2&e){const n=t.oxw().$implicit;t.Q6J("gene",n.gene)}}function Ut(e,c){if(1&e&&t._UZ(0,"cvc-variant-tag",62),2&e){const n=t.oxw().$implicit;t.Q6J("variant",n.variant)("truncateLongName",!0)}}function Ot(e,c){if(1&e&&t._UZ(0,"cvc-disease-tag",63),2&e){const n=t.oxw().$implicit;t.Q6J("disease",n.disease)("truncateLongName",!0)}}const Pt=function(e,c,n,i){return{geneId:e,sourceId:c,variantId:n,diseaseId:i}};function $t(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"nz-button-group")(1,"button",64),t._UZ(2,"i",65),t.qZA(),t.TgZ(3,"button",66),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().$implicit;return t.oxw(2).setFormInputs(a.id,a.status)}),t._UZ(4,"i",67),t.qZA()()}if(2&e){const n=t.oxw().$implicit,i=t.oxw(2),a=t.MAs(6);t.xp6(1),t.Q6J("queryParams",t.l5B(7,Pt,null==n.gene?null:n.gene.id,null==n.source?null:n.source.id,null==n.variant?null:n.variant.id,null==n.disease?null:n.disease.id))("disabled",n.status!=i.status.New)("nzTooltipTitle",i.isScrolling?"":"Create Evidence with this Source")("nzTooltipMouseEnterDelay",1),t.xp6(2),t.Q6J("nzTooltipTitle",i.isScrolling?"":"Manage Source Suggestion")("nzTooltipMouseEnterDelay",1)("nzPopoverContent",a)}}function Ft(e,c){1&e&&(t.ynx(0),t._uU(1," -- "),t.BQk())}function wt(e,c){if(1&e&&(t.TgZ(0,"tr",41)(1,"td",42),t.ynx(2,43),t.ALo(3,"lowercase"),t.YNc(4,Mt,4,3,"ng-container",44),t.YNc(5,Zt,4,3,"ng-container",44),t.YNc(6,bt,5,4,"ng-container",44),t.BQk(),t.qZA(),t.TgZ(7,"td",25),t.YNc(8,yt,1,1,"cvc-source-tag",45),t.qZA(),t.TgZ(9,"td",46),t._UZ(10,"i",17),t.qZA(),t.TgZ(11,"td"),t.YNc(12,At,1,1,"cvc-user-tag",47),t.qZA(),t.TgZ(13,"td"),t.YNc(14,Jt,2,1,"ng-container",48),t.qZA(),t.TgZ(15,"td"),t.YNc(16,Nt,2,1,"ng-container",48),t.qZA(),t.TgZ(17,"td"),t.YNc(18,Qt,1,1,"cvc-gene-tag",49),t.qZA(),t.TgZ(19,"td"),t.YNc(20,Ut,1,2,"cvc-variant-tag",50),t.qZA(),t.TgZ(21,"td"),t.YNc(22,Ot,1,2,"cvc-disease-tag",51),t.qZA(),t.TgZ(23,"td",52),t._uU(24),t.ALo(25,"date"),t.qZA(),t.TgZ(26,"td",53),t.YNc(27,$t,5,12,"nz-button-group",48),t.YNc(28,Ft,2,0,"ng-container",48),t.qZA()()),2&e){const n=c.$implicit,i=t.oxw(2);t.xp6(2),t.Q6J("ngSwitch",t.lcZ(3,15,n.status)),t.xp6(2),t.Q6J("ngSwitchCase","curated"),t.xp6(1),t.Q6J("ngSwitchCase","new"),t.xp6(1),t.Q6J("ngSwitchCase","rejected"),t.xp6(2),t.Q6J("ngIf",n.source),t.xp6(1),t.Q6J("nzTooltipTitle",i.isScrolling?"":n.initialComment),t.xp6(3),t.Q6J("ngIf",n.user),t.xp6(2),t.Q6J("ngIf",n.source),t.xp6(2),t.Q6J("ngIf",n.source),t.xp6(2),t.Q6J("ngIf",n.gene),t.xp6(2),t.Q6J("ngIf",n.variant),t.xp6(2),t.Q6J("ngIf",n.disease),t.xp6(2),t.hij(" ",t.lcZ(25,17,n.createdAt)," "),t.xp6(3),t.Q6J("ngIf",i.isSignedIn),t.xp6(1),t.Q6J("ngIf",!i.isSignedIn)}}const Lt=function(){return{x:"680px",y:"800px"}},Et=function(){return["descend","ascend",null]};function Yt(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"nz-table",10,11),t.NdJ("cvcTableScrollOnScroll",function(a){return t.CHM(n),t.oxw().scrollEvent$.next(a)}),t.ALo(2,"ngrxPush"),t.ALo(3,"ngrxPush"),t.ALo(4,"ngrxPush"),t.ALo(5,"ngrxPush"),t.TgZ(6,"thead",12),t.NdJ("nzSortOrderChange",function(a){return t.CHM(n),t.oxw().sortChange$.next(a)}),t.TgZ(7,"tr",13)(8,"th",14),t._uU(9," Status "),t.qZA(),t.TgZ(10,"th",15),t._uU(11," Citation "),t.qZA(),t.TgZ(12,"th",16),t._UZ(13,"i",17),t.qZA(),t.TgZ(14,"th",18),t._uU(15," Submitter "),t.qZA(),t.TgZ(16,"th",19),t._uU(17," Type "),t.qZA(),t.TgZ(18,"th",19),t._uU(19," ID "),t.qZA(),t.TgZ(20,"th",20),t._uU(21," Gene "),t.qZA(),t.TgZ(22,"th",21),t._uU(23," Variant "),t.qZA(),t.TgZ(24,"th",18),t._uU(25," Disease "),t.qZA(),t.TgZ(26,"th",22),t._uU(27," Submitted "),t.qZA(),t.TgZ(28,"th",23),t._uU(29," Actions "),t.qZA()(),t.TgZ(30,"tr",24)(31,"th",25)(32,"nz-select",26),t.NdJ("ngModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()})("ngModelChange",function(a){return t.CHM(n),t.oxw().statusInput=a}),t._UZ(33,"nz-option",27)(34,"nz-option",28)(35,"nz-option",29),t.qZA()(),t.TgZ(36,"th",25)(37,"cvc-clearable-input-filter",30),t.NdJ("inputModelChange",function(a){return t.CHM(n),t.oxw().citationInput=a})("inputModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()}),t.qZA()(),t._UZ(38,"th"),t.TgZ(39,"th"),t.YNc(40,ft,1,1,"cvc-clearable-input-filter",31),t.qZA(),t.TgZ(41,"th")(42,"nz-select",32),t.NdJ("ngModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()})("ngModelChange",function(a){return t.CHM(n),t.oxw().sourceTypeInput=a}),t._UZ(43,"nz-option",33)(44,"nz-option",34),t.qZA()(),t.TgZ(45,"th")(46,"cvc-clearable-input-filter",35),t.NdJ("inputModelChange",function(a){return t.CHM(n),t.oxw().citationIdInput=a})("inputModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()}),t.qZA()(),t.TgZ(47,"th")(48,"cvc-clearable-input-filter",36),t.NdJ("inputModelChange",function(a){return t.CHM(n),t.oxw().geneNameInput=a})("inputModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()}),t.qZA()(),t.TgZ(49,"th")(50,"cvc-clearable-input-filter",37),t.NdJ("inputModelChange",function(a){return t.CHM(n),t.oxw().variantNameInput=a})("inputModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()}),t.qZA()(),t.TgZ(51,"th")(52,"cvc-clearable-input-filter",38),t.NdJ("inputModelChange",function(a){return t.CHM(n),t.oxw().diseaseNameInput=a})("inputModelChange",function(){return t.CHM(n),t.oxw().filterChange$.next()}),t.qZA()(),t._UZ(53,"th")(54,"th",39),t.qZA()(),t.TgZ(55,"tbody"),t.YNc(56,wt,29,19,"ng-template",40),t.qZA()()}if(2&e){const n=t.oxw();t.Q6J("nzData",t.lcZ(2,37,n.row$))("nzLoading",t.lcZ(3,39,n.initialLoading$))("cvcAutoHeightTable",25)("nzVirtualItemSize",29)("cvcTableScrollQueryRef",n.queryRef)("cvcTableScrollPageInfo",t.lcZ(4,41,n.pageInfo$))("cvcTableScrollToIndex",t.lcZ(5,43,n.scrollIndex$))("nzVirtualForTrackBy",n.trackByIndex)("nzScroll",t.DdM(45,Lt))("nzFrontPagination",!1)("nzShowPagination",!1),t.xp6(10),t.Q6J("nzColumnKey",n.sortColumns.Citation)("nzSortFn",!0),t.xp6(4),t.Q6J("nzColumnKey",n.sortColumns.Submitter)("nzSortFn",!0),t.xp6(2),t.Q6J("nzColumnKey",n.sortColumns.SourceType)("nzSortFn",!0),t.xp6(2),t.Q6J("nzColumnKey",n.sortColumns.CitationId)("nzSortFn",!0),t.xp6(2),t.Q6J("nzColumnKey",n.sortColumns.GeneName)("nzSortFn",!0),t.xp6(2),t.Q6J("nzColumnKey",n.sortColumns.VariantName)("nzSortFn",!0),t.xp6(2),t.Q6J("nzColumnKey",n.sortColumns.DiseaseName)("nzSortFn",!0),t.xp6(2),t.Q6J("nzColumnKey",n.sortColumns.CreatedAt)("nzSortDirections",t.DdM(46,Et))("nzSortFn",!0),t.xp6(6),t.Q6J("nzDropdownMatchSelectWidth",!1)("ngModel",n.statusInput),t.xp6(5),t.Q6J("inputModel",n.citationInput),t.xp6(3),t.Q6J("ngIf",!n.submitterId),t.xp6(2),t.Q6J("ngModel",n.sourceTypeInput),t.xp6(4),t.Q6J("inputModel",n.citationIdInput),t.xp6(2),t.Q6J("inputModel",n.geneNameInput),t.xp6(2),t.Q6J("inputModel",n.variantNameInput),t.xp6(2),t.Q6J("inputModel",n.diseaseNameInput)}}function Ht(e,c){if(1&e&&t._UZ(0,"cvc-update-source-suggestion-form",69),2&e){const n=t.oxw(2);t.Q6J("currentStatus",n.selectedStatus)("sourceSuggestionId",n.selectedSourceId)}}function Rt(e,c){if(1&e&&t.YNc(0,Ht,1,2,"cvc-update-source-suggestion-form",68),2&e){const n=t.oxw();t.Q6J("ngIf",n.selectedSourceId&&n.selectedStatus)}}function Bt(e,c){}function Vt(e,c){if(1&e&&(t.ynx(0),t.YNc(1,Bt,0,0,"ng-template",7),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngTemplateOutlet",n.cvcTitleTemplate)}}function Dt(e,c){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.cvcTitle," ")}}function Wt(e,c){if(1&e&&(t._UZ(0,"i",70),t.YNc(1,Vt,2,1,"ng-container",48),t.YNc(2,Dt,2,1,"ng-container",48),t.TgZ(3,"span",71),t._UZ(4,"cvc-table-counts",72),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.cvcTitleTemplate),t.xp6(1),t.Q6J("ngIf",n.cvcTitle),t.xp6(2),t.Q6J("cvcTableCountsConnection",n.connection$)}}function jt(e,c){1&e&&(t.TgZ(0,"nz-tag",75),t._UZ(1,"i",76),t.TgZ(2,"span"),t._uU(3,"Loading\u2026"),t.qZA()())}function Gt(e,c){if(1&e&&(t.YNc(0,jt,4,0,"nz-tag",73),t.ALo(1,"ngrxPush"),t._UZ(2,"cvc-no-more-rows",74),t.ALo(3,"ngrxPush")),2&e){const n=t.oxw();t.Q6J("ngIf",t.lcZ(1,2,n.moreLoading$)),t.xp6(2),t.Q6J("cvcShowTag",t.lcZ(3,4,n.noMoreRows$))}}let Z=class{constructor(c,n,i){this.gql=c,this.viewerService=n,this.cdr=i,this.initialPageSize=35,this.isScrolling=!1,this.statusInput=p.F3s.New,this.sortColumns=p.jw9,this.status=p.F3s,this.showManageForm=!1,this.noMoreRows$=new I.X(!1),this.scrollEvent$=new I.X("stop"),this.sortChange$=new v.xQ,this.filterChange$=new v.xQ,this.scrollIndex$=new v.xQ,this.viewerService.viewer$.pipe((0,C.U)(a=>a.signedIn),(0,d.t)(this)).subscribe(a=>this.isSignedIn=a)}set initialUserFilters(c){c&&Object.assign(this,c)}ngOnInit(){this.queryRef=this.gql.watch({first:this.initialPageSize,sourceId:this.sourceId,submitterId:this.submitterId,status:this.status.New,sortBy:{column:this.sortColumns.CreatedAt,direction:p.SrV.Desc}}),this.result$=this.queryRef.valueChanges,this.initialLoading$=this.result$.pipe((0,m.j)("loading"),(0,f.x)(),(0,h.q)(2)),this.moreLoading$=this.result$.pipe((0,m.j)("loading"),(0,f.x)(),(0,J.T)(2)),this.connection$=this.result$.pipe((0,m.j)("data","sourceSuggestions"),(0,z.h)(T.ep)),this.row$=this.connection$.pipe((0,m.j)("edges"),(0,z.h)(T.ep),(0,C.U)(c=>c.map(n=>n.node))),this.pageInfo$=this.connection$.pipe((0,m.j)("pageInfo"),(0,z.h)(T.ep)),this.sortChange$.pipe((0,d.t)(this)).subscribe(c=>{this.queryRef.refetch({sortBy:(0,x._)(c)})}),this.filterChange$.pipe((0,l.b)(500),(0,d.t)(this)).subscribe(()=>{this.refresh()}),this.scrollEvent$.pipe((0,C.U)(c=>"stop"!==c),(0,f.x)(),(0,d.t)(this)).subscribe(c=>{this.isScrolling=c,this.cdr.detectChanges()}),this.scrollEvent$.pipe((0,z.h)(c=>"bottom"===c),(0,M.M)(this.pageInfo$),(0,C.U)(([c,n])=>n),(0,d.t)(this)).subscribe(c=>{c.hasNextPage||(this.noMoreRows$.next(!0),this.cdr.detectChanges(),setInterval(()=>this.noMoreRows$.next(!1)))})}refresh(){this.queryRef.refetch({citationId:this.citationIdInput?+this.citationIdInput:void 0,sourceType:this.sourceTypeInput?this.sourceTypeInput:void 0,sourceId:this.sourceIdInput?+this.sourceIdInput:void 0,geneName:this.geneNameInput,variantName:this.variantNameInput,diseaseName:this.diseaseNameInput,comment:this.commentInput,submitter:this.submitterInput,citation:this.citationInput,status:this.statusInput?this.statusInput:void 0}).then(()=>this.scrollIndex$.next(0)),this.cdr.detectChanges()}setFormInputs(c,n){this.selectedSourceId=c,this.selectedStatus=n,this.showManageForm=!0}closePopover(){this.showManageForm=!1}trackByIndex(c,n){return n.id}};Z.\u0275fac=function(c){return new(c||Z)(t.Y36(p.WRV),t.Y36(O.a),t.Y36(t.sBO))},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["cvc-source-suggestions-table"]],inputs:{cvcHeight:"cvcHeight",sourceId:"sourceId",submitterId:"submitterId",cvcTitleTemplate:"cvcTitleTemplate",cvcTitle:"cvcTitle",initialPageSize:"initialPageSize",initialUserFilters:"initialUserFilters"},decls:11,vars:2,consts:[[4,"ngIf","ngIfElse"],["setHeightCard",""],["table",""],["manageSuggestionTemplate",""],["titleTemplate",""],["extraTemplate",""],["nzSize","small","cvcAutoHeightCard","","cvcAutoHeightTarget","viewport",3,"nzTitle","nzExtra"],[3,"ngTemplateOutlet"],[1,"card-container",3,"ngStyle"],["cvcAutoHeightCard","","nzSize","small",3,"nzTitle","nzExtra"],["nzSize","small","cvcTableScroll","",3,"nzData","nzLoading","cvcAutoHeightTable","nzVirtualItemSize","cvcTableScrollQueryRef","cvcTableScrollPageInfo","cvcTableScrollToIndex","nzVirtualForTrackBy","nzScroll","nzFrontPagination","nzShowPagination","cvcTableScrollOnScroll"],["virtualTable",""],[3,"nzSortOrderChange"],[1,"col-header-row"],["nzWidth","100px","nzLeft",""],["nzWidth","425px","nzLeft","",3,"nzColumnKey","nzSortFn"],["nzWidth","24px","nzAlign","center","nz-tooltip","","nzTooltipTitle","Submitter Comment"],["nz-icon","","nzType","civic:comment"],["nzWidth","200px",3,"nzColumnKey","nzSortFn"],["nzWidth","80px",3,"nzColumnKey","nzSortFn"],["nzWidth","120px",3,"nzColumnKey","nzSortFn"],["nzWidth","170px",3,"nzColumnKey","nzSortFn"],["nzWidth","90px","nzSortOrder","descend",3,"nzColumnKey","nzSortDirections","nzSortFn"],["nzWidth","70px","nzRight","","nzAlign","center"],[1,"filter-row"],["nzLeft",""],["nzAllowClear","","nzSize","small","nzPlaceHolder","Any",3,"nzDropdownMatchSelectWidth","ngModel","ngModelChange"],["nzValue","NEW","nzLabel","new"],["nzValue","CURATED","nzLabel","curated"],["nzValue","REJECTED","nzLabel","rejected"],[3,"inputModel","inputModelChange"],[3,"inputModel","inputModelChange",4,"ngIf"],["nzAllowClear","","nzSize","small","nzPlaceHolder","Any",3,"ngModel","ngModelChange"],["nzValue","PUBMED","nzLabel","PubMed"],["nzValue","ASCO","nzLabel","ASCO"],["placeholderText","ID",3,"inputModel","inputModelChange"],["placeholderText","Gene",3,"inputModel","inputModelChange"],["placeholderText","Variant",3,"inputModel","inputModelChange"],["placeholderText","Disease",3,"inputModel","inputModelChange"],["nzRight",""],["nz-virtual-scroll",""],[1,"data-row"],["nzLeft","","nzAlign","center"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"source",4,"ngIf"],["nzAlign","center","nz-tooltip","","nzTooltipPlacement","top",3,"nzTooltipTitle"],[3,"user",4,"ngIf"],[4,"ngIf"],[3,"gene",4,"ngIf"],[3,"variant","truncateLongName",4,"ngIf"],[3,"disease","truncateLongName",4,"ngIf"],["nzAlign","right"],["nzRight","","nzAlign","center",1,"button-cell"],["nzColor","green",1,"status-tag"],["nzColor","orange",1,"status-tag"],["nzColor","volcano",1,"status-tag"],["nz-icon","","nz-tooltip","","nzType","civic-comment",3,"nzTooltipTitle",4,"ngIf"],["nz-icon","","nz-tooltip","","nzType","civic-comment",3,"nzTooltipTitle"],[3,"source"],[3,"user"],[3,"gene"],[3,"variant","truncateLongName"],[3,"disease","truncateLongName"],["routerLink","/evidence/add/submit","nz-button","","nzSize","small","nz-tooltip","",3,"queryParams","disabled","nzTooltipTitle","nzTooltipMouseEnterDelay"],["nz-icon","","nzType","civic-evidence"],["nz-button","","nzSize","small","nz-popover","","nzPopoverTitle","Manage Source Suggestion","nzPopoverPlacement","left","nzPopoverTrigger","click","nz-tooltip","","nzTooltipPlacement","top",3,"nzTooltipTitle","nzTooltipMouseEnterDelay","nzPopoverContent","click"],["nz-icon","","nzType","civic-source"],[3,"currentStatus","sourceSuggestionId",4,"ngIf"],[3,"currentStatus","sourceSuggestionId"],["nz-icon","","nzType","civic:source"],[1,"table-info"],[3,"cvcTableCountsConnection"],["nzColor","processing",4,"ngIf"],[3,"cvcShowTag"],["nzColor","processing"],["nz-icon","","nzType","sync","nzSpin",""]],template:function(c,n){if(1&c&&(t.YNc(0,zt,3,3,"ng-container",0),t.YNc(1,Tt,3,6,"ng-template",null,1,t.W1O),t.YNc(3,Yt,57,47,"ng-template",null,2,t.W1O),t.YNc(5,Rt,1,1,"ng-template",null,3,t.W1O),t.YNc(7,Wt,5,3,"ng-template",null,4,t.W1O),t.YNc(9,Gt,4,6,"ng-template",null,5,t.W1O)),2&c){const i=t.MAs(2);t.Q6J("ngIf",!n.cvcHeight)("ngIfElse",i)}},directives:[u.O5,P.bd,E.D,u.tP,u.PC,g.N8,$.y,Y.q,g.Om,g.$Z,g.Uo,g._C,g.qn,g.qD,g.UX,F.SY,w.w,H.Ls,b.Vq,_.JJ,_.On,b.Ip,R.p,g.p0,g.zu,u.RF,u.n9,B.j,y.T,V.I,D.H,W.I,j.n,N.fY,N.ix,L.dQ,G.rH,K.lU,mt,_t.B,vt.H],pipes:[Ct.fM,u.i8,u.uU],styles:["[_nghost-%COMP%]{display:block}nz-card[_ngcontent-%COMP%]:first-of-type     .ant-card-body{padding:0;margin-top:1px}.table-info[_ngcontent-%COMP%]{margin-left:.5rem}tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]{white-space:nowrap}tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell.align-right[_ngcontent-%COMP%]     .ant-table-column-title{text-align:right}tr.filter-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]{padding:3px 4px}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]{white-space:nowrap}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]   .anticon.attribute-icon[_ngcontent-%COMP%]{color:#595959}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell.overflow-ellipsis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell.button-cell[_ngcontent-%COMP%]{padding:0}tr.data-row[_ngcontent-%COMP%]   td.align-right[_ngcontent-%COMP%], tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%], tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%], tr.filter-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%]{text-align:right}.status-tag[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),Z=(0,S.gn)([(0,d.c)()],Z)},2832:(X,A,o)=>{o.d(A,{W:()=>K});var S=o(9808),x=o(3075),p=o(325),d=o(3580),I=o(3309),v=o(4125),T=o(271),C=o(8525),m=o(9779),f=o(7345),h=o(4867),J=o(6905),z=o(3111),l=o(1433),M=o(9240),t=o(7008),O=o(8776),u=o(7484),P=o(4546),E=o(1825),g=o(4375),$=o(6042),Y=o(868),F=o(6949),w=o(7525),H=o(2359),b=o(1047),_=o(8054),R=o(4509),B=o(8144),y=o(5e3);let V=(()=>{class r{}return r.\u0275fac=function(U){return new(U||r)},r.\u0275mod=y.oAB({type:r}),r.\u0275inj=y.cJS({imports:[[S.ez,x.UX,F.WG,$.sL,u.vh,Y.we,P.U5,w.j,H.L,b.o7,_.LV,B.zf,x.u5,O.X0,t.B,E.A,g.R,R.w]]}),r})();var D=o(5017),W=o(3610),j=o(1132),N=o(8481),L=o(404),G=o(3618);let K=(()=>{class r{}return r.\u0275fac=function(U){return new(U||r)},r.\u0275mod=y.oAB({type:r}),r.\u0275inj=y.cJS({imports:[[S.ez,x.u5,F.WG,p.Bz,$.sL,u.vh,D.PV,W.$6,_.LV,j.HQ,N.X,L.cg,G.ZJ,M.w,C.T,T.y,z.n,l.c,v.k,d.Q,t.B,I.U,J.s,m.s,V,f.W,h.Q]]}),r})()},7677:(X,A,o)=>{o.d(A,{G:()=>z});var S=o(9808),x=o(325),p=o(3610),d=o(8481),I=o(5017),v=o(9779),T=o(4867),C=o(7484),m=o(3098),f=o(6949),h=o(5e3);let J=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=h.oAB({type:l}),l.\u0275inj=h.cJS({imports:[[S.ez,f.WG,C.vh,m.q6,v.s,T.Q]]}),l})(),z=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=h.oAB({type:l}),l.\u0275inj=h.cJS({imports:[[S.ez,x.Bz,p.$6,d.X,I.PV,J]]}),l})()}}]);