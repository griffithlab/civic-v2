"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[1634],{3416:(j,N,t)=>{t.d(N,{g:()=>B});var y=t(9808),S=t(3075),a=t(8776),x=t(3793),e=t(8054),P=t(7338),w=t(8006),Z=t(7055),D=t(915);const J={name:"disease-array",extends:"multi-field",wrappers:["form-field"],defaultOptions:{templateOptions:{label:"Disease",helpText:"Please enter a disease name. If you are unable to locate the disease in the dropdown, please check the 'Could not find disease' checkbox below and enter the disease in the field that appears.",required:!1,addText:"Add a Disease",destroy$:new(t(8929).xQ)},fieldArray:{type:"cvc-disease-input",templateOptions:{required:!1},expressionProperties:{"templateOptions.allowCreate":(r,T,I)=>{var E,V;const H=null===(V=null===(E=null==I?void 0:I.parent)||void 0===E?void 0:E.templateOptions)||void 0===V?void 0:V.allowCreate;return void 0===H||H}}},defaultValue:[],validation:{messages:{required:(r,T)=>{const I=(null==T?void 0:T.form)?T.form.get("evidenceType"):null;return I?`${(0,D.E)(I.value)} Evidence requires a disease to be specified.`:"Disease is required."}}},hooks:{onInit:r=>{var T;const I=r.templateOptions,E=null===(T=null==r?void 0:r.options)||void 0===T?void 0:T.formState,V=(null==r?void 0:r.form)?r.form.get("evidenceType"):null;!V||(I.vcSub=V.valueChanges.subscribe(H=>{E.requiresDisease(H)?(I.hidden=!1,I.required=!0):(I.hidden=!0,I.required=!1,r.model.length>0&&(r.model.splice(1),I.remove(0)))}))},onDestroy:r=>{const T=r.templateOptions;T.vcSub&&T.vcSub.unsubscribe()}}}};var k=t(5e3);let B=(()=>{class r{}return r.\u0275fac=function(I){return new(I||r)},r.\u0275mod=k.oAB({type:r}),r.\u0275inj=k.cJS({imports:[[y.ez,S.u5,S.UX,e.LV,P.z,x.F,a.X0.forChild({types:[J]}),w.I,Z.N]]}),r})()},8006:(j,N,t)=>{t.d(N,{I:()=>se});var y=t(9808),S=t(8776),a=t(655),x=t(6123),e=t(4987),P=t(591),w=t(3240),Z=t(373),D=t(2198),R=t(4850),n=t(5e3),J=t(7630),k=t(9169),B=t(8054),r=t(9397),T=t(3075),I=t(6949),E=t(8144),V=t(3618),H=t(4022),L=t(822),h=t(2683),_=t(1047),d=t(6042),p=t(2643),A=t(8926);function o(f,C){if(1&f&&(n._UZ(0,"span",10),n.ALo(1,"highlightTypeahead")),2&f){const g=n.oxw().$implicit,v=n.oxw(3);n.Q6J("innerHtml",n.xi3(1,1,g.label,v.to.searchString),n.oJD)}}function c(f,C){if(1&f&&(n._UZ(0,"span",11),n.ALo(1,"highlightTypeahead")),2&f){const g=n.oxw().$implicit,v=n.oxw(3);n.Q6J("innerHtml",n.xi3(1,1,g.disease.diseaseAliases.join(", "),v.to.searchString),n.oJD)}}function u(f,C){if(1&f&&(n.TgZ(0,"nz-option",7)(1,"nz-space"),n.YNc(2,o,2,4,"span",8),n.YNc(3,c,2,4,"span",9),n.qZA()()),2&f){const g=C.$implicit;n.Q6J("nzLabel",g.tooltip)("nzValue",g.disease)}}function M(f,C){if(1&f&&(n.ynx(0),n.YNc(1,u,4,2,"nz-option",6),n.BQk()),2&f){const g=C.ngrxLet;n.xp6(1),n.Q6J("ngForOf",g)}}function U(f,C){1&f&&n._uU(0," No disease found in CIViC that matches the string provided. ")}function K(f,C){if(1&f){const g=n.EpF();n.ynx(0),n.TgZ(1,"nz-select",3),n.NdJ("nzOnSearch",function(F){return n.CHM(g),n.oxw().to.onSearch(F)}),n.YNc(2,M,2,1,"ng-container",4),n.qZA(),n.YNc(3,U,1,0,"ng-template",null,5,n.W1O),n.BQk()}if(2&f){const g=n.MAs(4),v=n.oxw(),F=n.MAs(4);n.xp6(1),n.Q6J("formControl",v.formControl)("formlyAttributes",v.field)("nzPlaceHolder",v.to.placeholder?v.to.placeholder:null)("nzDropdownRender",v.to.allowCreate?F:null)("nzNotFoundContent",g)("nzShowArrow",v.to.showArrow)("nzFilterOption",v.to.filterOption),n.xp6(1),n.Q6J("ngrxLet",v.diseases$)}}function q(f,C){if(1&f&&n._UZ(0,"cvc-disease-tag",12),2&f){const g=n.oxw();n.Q6J("disease",g.formControl.value)}}function re(f,C){if(1&f&&n._UZ(0,"cvc-form-errors-alert",18),2&f){const g=n.oxw(4);n.Q6J("errors",g.errorMessages)}}function ee(f,C){if(1&f){const g=n.EpF();n.TgZ(0,"button",19),n.NdJ("click",function(){n.CHM(g);const F=n.oxw(4);return F.addDisease(F.to.searchString)}),n._UZ(1,"i",20),n._uU(2,"No Existing CIViC Disease\xa0"),n.TgZ(3,"strong"),n._uU(4),n.qZA(),n._uU(5,"\xa0found. Create A New Disease? "),n.qZA()}if(2&f){const g=n.oxw(4);n.Q6J("nzLoading",g.loading),n.xp6(4),n.Oqu(g.to.searchString)}}function ae(f,C){if(1&f){const g=n.EpF();n.ynx(0),n.YNc(1,re,1,1,"cvc-form-errors-alert",14),n.TgZ(2,"nz-input-group",15)(3,"input",16),n.NdJ("ngModelChange",function(F){return n.CHM(g),n.oxw(3).enteredDoid=F}),n.qZA()(),n.YNc(4,ee,6,2,"button",17),n.BQk()}if(2&f){const g=n.oxw(3);n.xp6(1),n.Q6J("ngIf",g.errorMessages.length>0),n.xp6(2),n.Q6J("ngModel",g.enteredDoid),n.xp6(1),n.Q6J("ngIf",0==g.errorMessages.length)}}function G(f,C){if(1&f&&(n.ynx(0),n.YNc(1,ae,5,3,"ng-container",13),n.BQk()),2&f){const g=n.oxw(2);n.xp6(1),n.Q6J("ngIf",""!==g.to.searchString&&g.to.searchString.length>=5)}}function te(f,C){if(1&f&&(n.YNc(0,G,2,1,"ng-container",13),n.ALo(1,"ngrxPush")),2&f){const g=n.oxw();n.Q6J("ngIf",n.lcZ(1,1,g.displayAdd$))}}let $=class extends S.fS{constructor(C,g,v){super(),this.diseaseTypeaheadQuery=C,this.networkErrorService=g,this.addDiseaseGQL=v,this.success=!1,this.errorMessages=[],this.loading=!1,this.enteredDoid="",this.displayAdd$=new P.X(!1),this.addDiseaseMutator=new x.U(this.networkErrorService),this.defaultOptions={templateOptions:{placeholder:"Search Diseases",showArrow:!1,onSearch:()=>{},minLengthSearch:1,optionList:[],searchString:"",allowCreate:!0}}}ngOnInit(){this.queryRef=this.diseaseTypeaheadQuery.watch({name:"zzzz"}),this.diseases$=this.queryRef.valueChanges.pipe((0,Z.j)("data","diseaseTypeahead"),(0,D.h)(w.ep),(0,R.U)(C=>C.map(v=>{let F=v.doid?`DOID:${v.doid}`:"no DOID",Y=v.diseaseAliases.length>0?`Aliases: ${v.diseaseAliases.join(", ")}`:"";return{value:v.id,tooltip:`${v.displayName} (${F}) ${Y}`,label:`${v.displayName} (${F})`,disease:v}})))}ngAfterViewInit(){this.to.onSearch=C=>{C.length<this.to.minLengthSearch||(this.to.searchString=C,this.errorMessages=[],this.queryRef.refetch({name:C}).then(g=>{this.displayAdd$.next(0==g.data.diseaseTypeahead.filter(v=>v.displayName.toUpperCase()==C.toUpperCase()).length)}))}}addDisease(C){if(C&&""!=C){let v=this.addDiseaseMutator.mutate(this.addDiseaseGQL,{name:C,doid:+this.enteredDoid?+this.enteredDoid:void 0},{},F=>{var Y;null===(Y=this.field.formControl)||void 0===Y||Y.setValue({id:F.addDisease.disease.id,name:F.addDisease.disease.name}),this.to.searchString="",this.to.searchLength=0});v.submitSuccess$.pipe((0,e.t)(this)).subscribe(F=>{F&&(this.success=!0)}),v.submitError$.pipe((0,e.t)(this)).subscribe(F=>{F&&(this.errorMessages=F,this.success=!1)}),v.isSubmitting$.pipe((0,e.t)(this)).subscribe(F=>{this.loading=F})}}};$.\u0275fac=function(C){return new(C||$)(n.Y36(J.kv3),n.Y36(k.Y),n.Y36(J.KNk))},$.\u0275cmp=n.Xpm({type:$,selectors:[["cvc-disease-input-type"]],features:[n.qOj],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["diseaseListItem",""],["addDiseaseTmpl",""],["nzShowSearch","","nzServerSearch","","autofocus","click",3,"formControl","formlyAttributes","nzPlaceHolder","nzDropdownRender","nzNotFoundContent","nzShowArrow","nzFilterOption","nzOnSearch"],[4,"ngrxLet"],["sourceLoader",""],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzCustomContent","",3,"nzLabel","nzValue"],[3,"innerHtml",4,"nzSpaceItem"],["nz-typography","","nzType","secondary",3,"innerHtml",4,"nzSpaceItem"],[3,"innerHtml"],["nz-typography","","nzType","secondary",3,"innerHtml"],[3,"disease"],[4,"ngIf"],[3,"errors",4,"ngIf"],["nzAddOnBefore","DOID:"],["type","text","nz-input","","placeholder","Optional DOID",3,"ngModel","ngModelChange"],["nz-button","","nzSize","small",3,"nzLoading","click",4,"ngIf"],[3,"errors"],["nz-button","","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","plus","nzTheme","outline"]],template:function(C,g){if(1&C&&(n.YNc(0,K,5,8,"ng-container",0),n.YNc(1,q,1,1,"ng-template",null,1,n.W1O),n.YNc(3,te,2,3,"ng-template",null,2,n.W1O)),2&C){const v=n.MAs(2);n.Q6J("ngIf",!(null!=g.formControl.value&&g.formControl.value.id))("ngIfElse",v)}},directives:[y.O5,B.Vq,r.l,T.JJ,T.oH,S.VQ,I.eJ,y.sg,B.Ip,E.NU,E.$1,V.ZU,H.n,L.V,h.w,_.gB,_.Zp,T.Fj,T.On,d.ix,p.dQ],pipes:[A.A,I.fM],styles:[""]}),$=(0,a.gn)([(0,e.c)()],$);const le={name:"cvc-disease-input",component:$};var ne=t(3580),X=t(7008),oe=t(6905),ie=t(8616);let se=(()=>{class f{}return f.\u0275fac=function(g){return new(g||f)},f.\u0275mod=n.oAB({type:f}),f.\u0275inj=n.cJS({imports:[[y.ez,T.UX,I.WG,S.X0.forChild({types:[le]}),B.LV,ne.Q,V.ZJ,E.zf,d.sL,X.B,_.o7,T.u5,oe.s,ie.Y]]}),f})()},7220:(j,N,t)=>{t.d(N,{m:()=>Ve});var y=t(9808),S=t(8776),a=t(6761),x=t(3075),e=t(5e3),P=t(7484),w=t(868),Z=t(3434),D=t(8929),R=t(373),n=t(2198),J=t(4850),k=t(7625),B=t(13),r=t(7630);const T=/\(/g,I=/\)/g,E=/AND|OR/i,V=/^(?<not>NOT\s)?\s*#VID(?<variantId>\d+)$/i,H=/\s+/,L="EXPR";function h(l){return _(l.replace(T," ( ").replace(I," ) "))}function _(l){let i,z=l.split(H),s=0,m=[],O=[],W=[];for(let Q of z)if("("==Q)0!=s&&m.push(Q),s+=1;else if(")"==Q)if(s-=1,0==s){let b=_(m.join(" "));if("errorMessage"in b)return b;W.push(b),O.push(L),m=[]}else m.push(Q);else s>0?m.push(Q):O.push(Q);let ce=0;for(let Q of O){let b=E.test(Q);if(b&&ce==z.length-1)return{errorMessage:"Trailing boolean operator found. You cannot end your profile with an operator."};if(b&&0==ce)return{errorMessage:"The expression cannot start with AND/OR"};if(b&&!i)i=d(Q);else if(b&&i&&d(Q)!==i)return{errorMessage:"You cannot mix and match AND/OR in a single segment. Use parenthesis to logically group your variants."};ce++}let ue=[],Ze=O.join(" ").split(E);for(let Q of Ze.map(b=>b.trim())){let b=V.exec(Q);if(null===b){if(Q!==L)return{errorMessage:`Variant ${Q} does not match the expected format. The token should be a #VID prepended with an optional NOT.`}}else ue.push({not:!!b[1],variantId:parseInt(b[2])})}return{booleanOperator:i,variantComponents:ue,complexComponents:W}}function d(l){return"AND"==l.toUpperCase()?r._Wm.And:r._Wm.Or}var p=t(3240),A=t(6123),o=t(2288),c=t(9169),u=t(8511),M=t(8481),U=t(2683),K=t(5017),q=t(7525),re=t(1894),ee=t(4546),ae=t(822),G=t(8144),te=t(6042),$=t(2643),le=t(7230),ne=t(3618),X=t(4921),oe=t(3610),ie=t(6949);const se=["mpInputField"];function f(l,z){if(1&l){const i=e.EpF();e.ynx(0),e._UZ(1,"cvc-molecular-profile-tag",2),e.TgZ(2,"nz-tag",3)(3,"i",4),e.NdJ("click",function(){return e.CHM(i),e.oxw().resetForm()}),e.qZA()(),e.BQk()}if(2&l){const i=e.oxw();e.xp6(1),e.Q6J("molecularProfile",i.selectedMp)}}function C(l,z){if(1&l&&(e.TgZ(0,"nz-form-item"),e._UZ(1,"cvc-form-errors-alert",14),e.qZA()),2&l){const i=e.oxw(2);e.xp6(1),e.Q6J("errors",i.errorMessages)}}function g(l,z){if(1&l){const i=e.EpF();e.ynx(0),e._UZ(1,"cvc-molecular-profile-tag",2),e.TgZ(2,"button",16),e.NdJ("click",function(){return e.CHM(i),e.oxw(5).submitNewMp()}),e._uU(3," Select this Molecular Profile "),e.qZA(),e.BQk()}if(2&l){const i=z.ngIf;e.xp6(1),e.Q6J("molecularProfile",i)}}function v(l,z){if(1&l){const i=e.EpF();e.ynx(0),e.TgZ(1,"button",16),e.NdJ("click",function(){return e.CHM(i),e.oxw(6).submitNewMp()}),e._uU(2," Create Molecular Profile "),e.qZA(),e.BQk()}}function F(l,z){1&l&&(e.TgZ(0,"span",19),e._uU(1,"This Molecular Profile doesn't exist yet. Only existing Molecular Profiles can be used for Assertions. "),e.qZA())}function Y(l,z){if(1&l&&(e._UZ(0,"cvc-mp-tag-name",17),e.YNc(1,v,3,0,"ng-container",0),e.YNc(2,F,2,0,"ng-template",null,18,e.W1O)),2&l){const i=e.MAs(3),s=e.oxw(2).ngIf,m=e.oxw(3);e.Q6J("nameSegments",s),e.xp6(1),e.Q6J("ngIf",m.allowCreate)("ngIfElse",i)}}function me(l,z){if(1&l&&(e.ynx(0),e.YNc(1,g,4,1,"ng-container",0),e.ALo(2,"ngrxPush"),e.YNc(3,Y,4,3,"ng-template",null,15,e.W1O),e.BQk()),2&l){const i=e.MAs(4),s=e.oxw(4);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,s.previewMpAlreadyExists$))("ngIfElse",i)}}function de(l,z){if(1&l&&(e.ynx(0),e.YNc(1,me,5,4,"ng-container",0),e.BQk()),2&l){e.oxw(2);const i=e.MAs(5),s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.displayPreview)("ngIfElse",i)}}function fe(l,z){if(1&l&&(e.ynx(0),e.YNc(1,de,2,2,"ng-container",6),e.ALo(2,"ngrxPush"),e.BQk()),2&l){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,i.previewMpName$))}}function ge(l,z){if(1&l&&(e.ynx(0),e._uU(1),e.BQk()),2&l){const i=e.oxw(3);e.xp6(1),e.hij(" ",i.parseError," ")}}function he(l,z){1&l&&(e.ynx(0),e.TgZ(1,"span",20),e._uU(2," Start constructing a complex molecular profile to preview it here "),e.qZA(),e.BQk())}function _e(l,z){if(1&l&&(e.YNc(0,ge,2,1,"ng-container",6),e.YNc(1,he,3,0,"ng-container",6)),2&l){const i=e.oxw(2);e.Q6J("ngIf",i.parseError),e.xp6(1),e.Q6J("ngIf",!i.parseError)}}function ve(l,z){if(1&l&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.BQk()),2&l){const i=z.$implicit;e.xp6(2),e.Oqu(i.displayName)}}function ze(l,z){if(1&l){const i=e.EpF();e.TgZ(0,"nz-mention",21),e.NdJ("nzOnSearchChange",function(m){return e.CHM(i),e.oxw(2).onSearchChange(m)})("nzOnSelect",function(){return e.CHM(i),e.oxw(2).suggestions=[]}),e.TgZ(1,"textarea",22,23),e.NdJ("ngModelChange",function(m){return e.CHM(i),e.oxw(2).mpName=m})("ngModelChange",function(m){return e.CHM(i),e.oxw(2).onMpNameChanged(m)}),e.qZA(),e.YNc(3,ve,3,1,"ng-container",24),e.qZA()}if(2&l){const i=e.oxw(2);e.Q6J("nzStatus",i.parseError?"warning":"")("nzSuggestions",i.suggestions)("nzValueWith",i.autoCompleteValueFor),e.xp6(1),e.Q6J("ngModel",i.mpName)}}function Ce(l,z){if(1&l){const i=e.EpF();e.TgZ(0,"button",25),e.NdJ("nzPopoverVisibleChange",function(m){return e.CHM(i),e.oxw(2).variantFinderVisible=m})("click",function(){e.CHM(i);const m=e.oxw(2);return m.variantFinderVisible=!m.variantFinderVisible}),e._uU(1," Find a Variant "),e._UZ(2,"i",26),e.qZA()}if(2&l){e.oxw();const i=e.MAs(9),s=e.MAs(11),m=e.oxw();e.Q6J("nzPopoverTitle",i)("nzPopoverVisible",m.variantFinderVisible)("nzPopoverContent",s)("nzPopoverTrigger",void 0)}}const xe=function(){return{float:"right"}};function ye(l,z){if(1&l){const i=e.EpF();e._uU(0," Find a Variant "),e.TgZ(1,"span",27)(2,"i",28),e.NdJ("click",function(){return e.CHM(i),e.oxw(2).variantFinderVisible=!1}),e.qZA()()}2&l&&(e.xp6(1),e.Q6J("ngStyle",e.DdM(1,xe)))}function Se(l,z){if(1&l){const i=e.EpF();e.TgZ(0,"cvc-variant-submit-form",29),e.NdJ("onVariantSelected",function(m){return e.CHM(i),e.oxw(2).onVariantSelected(m)}),e.qZA()}}function Te(l,z){if(1&l&&(e.TgZ(0,"nz-spin",5),e.YNc(1,C,2,1,"nz-form-item",6),e.TgZ(2,"nz-space",7),e.YNc(3,fe,3,3,"ng-container",8),e.YNc(4,_e,2,2,"ng-template",null,9,e.W1O),e.YNc(6,ze,4,4,"nz-mention",10),e.YNc(7,Ce,3,4,"button",11),e.qZA(),e.YNc(8,ye,3,2,"ng-template",null,12,e.W1O),e.YNc(10,Se,1,0,"ng-template",null,13,e.W1O),e.qZA()),2&l){const i=e.oxw();e.Q6J("nzSpinning",i.loading),e.xp6(1),e.Q6J("ngIf",i.errorMessages.length>0)}}let Me=(()=>{class l{constructor(i,s,m,O,W){this.previewMpGql=i,this.quicksearchGql=s,this.createMolecularProfileGql=m,this.networkErrorService=O,this.cdr=W,this.allowCreate=!0,this.onMolecularProfileSelected=new e.vpe,this.destroy$=new D.xQ,this.debouncedPreview=new D.xQ,this.suggestions=[],this.loading=!1,this.errorMessages=[],this.displayPreview=!1,this.variantFinderVisible=!1,this.createMolecularProfileMutator=new A.U(O)}ngOnInit(){var i,s,m,O;this.previewQueryRef=this.previewMpGql.watch({}),this.previewMpName$=this.previewQueryRef.valueChanges.pipe((0,R.j)("data","previewMolecularProfileName"),(0,n.h)(p.ep),(0,J.U)(W=>W.segments),(0,o.tag)("preview segment"),(0,k.R)(this.destroy$)),this.previewMpAlreadyExists$=this.previewQueryRef.valueChanges.pipe((0,R.j)("data","previewMolecularProfileName"),(0,n.h)(p.ep),(0,J.U)(W=>W.existingMolecularProfile),(0,o.tag)("exists"),(0,k.R)(this.destroy$)),(null===(s=null===(i=this.formConfig)||void 0===i?void 0:i.formControl)||void 0===s?void 0:s.value)&&(this.selectedMp=null===(O=null===(m=this.formConfig)||void 0===m?void 0:m.formControl)||void 0===O?void 0:O.value,this.displayPreview=!0,this.cdr.detectChanges()),this.debouncedPreview.pipe((0,k.R)(this.destroy$),(0,B.b)(300)).subscribe(W=>this.refresh())}autoCompleteValueFor(i){return i.value}resetForm(){this.mpName="",this.selectedMp=void 0,this.onMolecularProfileSelected.emit(void 0),this.refresh(),this.cdr.detectChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onSearchChange({}){}onMpNameChanged(i){this.debouncedPreview.next()}refresh(){var i;if(this.mpName&&""!=this.mpName.trim()){let s=h(this.mpName);"errorMessage"in s?(this.parseError=s.errorMessage,this.displayPreview=!1):(this.parseError=void 0,null===(i=this.previewQueryRef)||void 0===i||i.refetch({mpStructure:s}).then(()=>this.displayPreview=!0))}else this.parseError=void 0,this.displayPreview=!1}onVariantSelected(i){var s;this.variantFinderVisible=!1,this.mpName?this.mpName+=` #VID${i.variantId} `:this.mpName=`#VID${i.variantId} `,null===(s=this.mpInputField)||void 0===s||s.nativeElement.focus(),this.refresh()}submitNewMp(){if(this.mpName&&""!=this.mpName.trim()){let i=h(this.mpName);if(!("errorMessage"in i)){let s=this.createMolecularProfileMutator.mutate(this.createMolecularProfileGql,{mpStructure:i},{},m=>{this.onMolecularProfileSelected.emit(m.createMolecularProfile.molecularProfile),this.selectedMp=m.createMolecularProfile.molecularProfile,this.cdr.detectChanges()});s.submitError$.pipe((0,k.R)(this.destroy$)).subscribe(m=>{m&&(this.errorMessages=m,this.loading=!1)}),s.submitSuccess$.pipe((0,k.R)(this.destroy$)).subscribe(()=>{this.loading=!1}),s.isSubmitting$.pipe((0,k.R)(this.destroy$)).subscribe(m=>{this.loading=m})}}}}return l.\u0275fac=function(i){return new(i||l)(e.Y36(r.GSh),e.Y36(r.ghc),e.Y36(r.Ws),e.Y36(c.Y),e.Y36(e.sBO))},l.\u0275cmp=e.Xpm({type:l,selectors:[["cvc-complex-molecular-profile-input-form"]],viewQuery:function(i,s){if(1&i&&e.Gf(se,5),2&i){let m;e.iGM(m=e.CRH())&&(s.mpInputField=m.first)}},inputs:{formConfig:"formConfig",allowCreate:"allowCreate"},outputs:{onMolecularProfileSelected:"onMolecularProfileSelected"},decls:4,vars:2,consts:[[4,"ngIf","ngIfElse"],["createMp",""],[3,"molecularProfile"],[1,"close-tag"],["nz-icon","","nzType","close",3,"click"],["nzTip","Submitting",3,"nzSpinning"],[4,"ngIf"],["nzDirection","vertical","nzSize","large"],[4,"nzSpaceItem"],["noPreview",""],["nzPrefix","#","nzNotFoundContent","No matches...",3,"nzStatus","nzSuggestions","nzValueWith","nzOnSearchChange","nzOnSelect",4,"nzSpaceItem"],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","nzPopoverVisibleChange","click",4,"nzSpaceItem"],["variantFinderTitle",""],["variantFinder",""],[3,"errors"],["newMp",""],["nz-button","","nzSize","small",2,"float","right",3,"click"],[3,"nameSegments"],["createNotAllowed",""],[2,"float","right"],["nz-typography","","nzType","secondary"],["nzPrefix","#","nzNotFoundContent","No matches...",3,"nzStatus","nzSuggestions","nzValueWith","nzOnSearchChange","nzOnSelect"],["nz-input","","rows","1",2,"width","100%",3,"ngModel","ngModelChange"],["mpInputField",""],[4,"nzMentionSuggestion"],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","nzPopoverVisibleChange","click"],["nz-icon","","nzType","caret-down","nzTheme","outline"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],[3,"onVariantSelected"]],template:function(i,s){if(1&i&&(e.TgZ(0,"nz-card"),e.YNc(1,f,4,1,"ng-container",0),e.qZA(),e.YNc(2,Te,12,2,"ng-template",null,1,e.W1O)),2&i){const m=e.MAs(3);e.xp6(1),e.Q6J("ngIf",s.selectedMp)("ngIfElse",m)}},directives:[P.bd,y.O5,u.p,M.j,U.w,K.Ls,q.W,re.SK,ee.Nx,ae.V,G.NU,G.$1,te.ix,$.dQ,le.C,ne.ZU,X.YW,x.Fj,x.JJ,x.On,X.O3,oe.lU,y.PC,Z.G],pipes:[ie.fM],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}.close-tag{margin-left:-9px;cursor:pointer}\n"],encapsulation:2}),l})();const Ie=["complexMolecularProfileInputForm"],Pe={name:"molecular-profile-input",component:(()=>{class l extends S.fS{constructor(){super()}onVariantSelected(i){this.field.formControl.setValue(i.molecularProfile)}onMpSelected(i){this.field.formControl.setValue(i)}clear(){var i;this.field.formControl.setValue(void 0),null===(i=this.complexMpForm)||void 0===i||i.resetForm()}}return l.\u0275fac=function(i){return new(i||l)},l.\u0275cmp=e.Xpm({type:l,selectors:[["cvc-molecular-profile-input-type"]],viewQuery:function(i,s){if(1&i&&e.Gf(Ie,5),2&i){let m;e.iGM(m=e.CRH())&&(s.complexMpForm=m.first)}},features:[e.qOj],decls:8,vars:7,consts:[[3,"nzAnimated","nzSelectedIndex","nzSelectChange"],["nzTitle","Simple Molecular Profile"],[3,"allowCreate","onVariantSelected"],["nzTitle","Complex Molecular Profile"],[3,"formConfig","allowCreate","onMolecularProfileSelected"],["complexMolecularProfileInputForm",""],["type","hidden",3,"formControl","formlyAttributes"]],template:function(i,s){1&i&&(e.TgZ(0,"nz-card")(1,"nz-tabset",0),e.NdJ("nzSelectChange",function(){return s.clear()}),e.TgZ(2,"nz-tab",1)(3,"cvc-variant-submit-form",2),e.NdJ("onVariantSelected",function(O){return s.onVariantSelected(O)}),e.qZA()(),e.TgZ(4,"nz-tab",3)(5,"cvc-complex-molecular-profile-input-form",4,5),e.NdJ("onMolecularProfileSelected",function(O){return s.onMpSelected(O)}),e.qZA()()(),e._UZ(7,"input",6),e.qZA()),2&i&&(e.xp6(1),e.Q6J("nzAnimated",!1)("nzSelectedIndex",null==(null==s.field.templateOptions?null:s.field.templateOptions.nzSelectedIndex)?0:null==s.field.templateOptions?null:s.field.templateOptions.nzSelectedIndex),e.xp6(2),e.Q6J("allowCreate",null==s.field.templateOptions?null:s.field.templateOptions.allowCreate),e.xp6(2),e.Q6J("formConfig",s.field)("allowCreate",null==s.field.templateOptions?null:s.field.templateOptions.allowCreate),e.xp6(2),e.Q6J("formControl",s.formControl)("formlyAttributes",s.field))},directives:[P.bd,w.xH,w.xw,Z.G,Me,x.Fj,x.JJ,x.oH,S.VQ],styles:[""]}),l})(),wrappers:["form-field"]};var Ne=t(7008),Ae=t(1825),Fe=t(4375),Oe=t(1017),De=t(2190),Ee=t(2359),pe=t(5959),we=t(2467);let ke=(()=>{class l{}return l.\u0275fac=function(i){return new(i||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[[y.ez,x.UX,ie.WG,te.sL,P.vh,ee.U5,K.PV,oe.$6,G.zf,X.Gl,Ee.L,q.j,ne.ZJ,M.X,x.u5,Ne.B,Ae.A,Fe.R,De.r,we.u,pe.e,Oe.s]]}),l})(),Ve=(()=>{class l{}return l.\u0275fac=function(i){return new(i||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[[y.ez,x.UX,x.u5,S.X0.forChild({types:[Pe]}),a.Ju,w.we,P.vh,pe.e,ke]]}),l})()},7338:(j,N,t)=>{t.d(N,{z:()=>A});var y=t(9808),S=t(6905),a=t(6949),x=t(8776),e=t(7484),P=t(5482),w=t(4546),Z=t(1894),D=t(5017),R=t(3610),n=t(8144),J=t(3618),k=t(1017),B=t(6789),r=t(5e3),T=t(2313);let I=(()=>{class o{constructor(u){this.sanitizer=u}transform(u){return this.sanitizer.bypassSecurityTrustHtml(u)}}return o.\u0275fac=function(u){return new(u||o)(r.Y36(T.H7,16))},o.\u0275pipe=r.Yjl({name:"sanitizeHtml",type:o,pure:!0}),o})();function E(o,c){if(1&o&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&o){const u=r.oxw(2);r.xp6(1),r.Oqu(u.to.label)}}function V(o,c){if(1&o&&r._UZ(0,"i",11),2&o){r.oxw();const u=r.MAs(3);r.Q6J("nzPopoverContent",u)}}function H(o,c){if(1&o&&(r._UZ(0,"span",12),r.ALo(1,"sanitizeHtml")),2&o){const u=r.oxw(3);r.Q6J("innerHtml",r.lcZ(1,1,u.to.helpText),r.oJD)}}function L(o,c){1&o&&(r.ynx(0),r.YNc(1,V,1,1,"i",9),r.YNc(2,H,2,3,"ng-template",null,10,r.W1O),r.BQk())}function h(o,c){if(1&o&&(r.ynx(0),r.TgZ(1,"nz-form-label",7)(2,"nz-space"),r.YNc(3,E,2,1,"span",8),r.YNc(4,L,4,0,"ng-container",1),r.qZA()(),r.BQk()),2&o){const u=r.oxw();r.xp6(1),r.Q6J("nzRequired",u.to.required&&!0!==u.to.hideRequiredMarker)("nzFor",u.id),r.xp6(3),r.Q6J("ngIf",u.to.helpText)}}const _=function(o){return{hidden:o}},p={wrappers:[{name:"form-field",component:(()=>{class o extends x.n2{get errorState(){return this.showError?"error":""}}return o.\u0275fac=function(){let c;return function(M){return(c||(c=r.n5z(o)))(M||o)}}(),o.\u0275cmp=r.Xpm({type:o,selectors:[["cvc-form-field-wrapper"]],features:[r.qOj],decls:10,vars:7,consts:[[3,"ngClass"],[4,"ngIf"],[3,"nzValidateStatus"],["fieldComponent",""],["nzType","danger"],[3,"field"],["nzType","secondary"],[3,"nzRequired","nzFor"],[4,"nzSpaceItem"],["nz-icon","","nzType","question-circle","nzTheme","outline","nz-popover","",3,"nzPopoverContent",4,"nzSpaceItem"],["help",""],["nz-icon","","nzType","question-circle","nzTheme","outline","nz-popover","",3,"nzPopoverContent"],[3,"innerHtml"]],template:function(u,M){1&u&&(r.TgZ(0,"div",0)(1,"nz-form-item"),r.YNc(2,h,5,3,"ng-container",1),r.TgZ(3,"nz-form-control",2),r.GkF(4,null,3),r.qZA(),r.TgZ(6,"nz-typography",4),r._UZ(7,"formly-validation-message",5),r.qZA(),r.TgZ(8,"nz-typography",6),r._uU(9),r.qZA()()()),2&u&&(r.Q6J("ngClass",r.VKq(5,_,!0===M.to.hidden)),r.xp6(2),r.Q6J("ngIf",M.to.label&&!0!==M.to.hideLabel),r.xp6(1),r.Q6J("nzValidateStatus",M.errorState),r.xp6(4),r.Q6J("field",M.field),r.xp6(2),r.hij(" ",M.to.optionText," "))},directives:[y.mk,Z.SK,w.Nx,y.O5,Z.t3,w.iK,n.NU,n.$1,D.Ls,R.lU,w.Fd,J.ZU,x.u_],pipes:[I],styles:[".hidden[_ngcontent-%COMP%]{display:none}"]}),o})()}]};let A=(()=>{class o{}return o.\u0275fac=function(u){return new(u||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[[y.ez,a.WG,x.X0.forChild(p),Z.Jb,e.vh,P.cD,B._,k.s,w.U5,D.PV,n.zf,R.$6,S.s,J.ZJ]]}),o})()},4966:(j,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.hide=void 0,N.hide=function t(){return function(a){return a.lift(new y)}};var y=function(){function S(){this.hide=!0}return S.prototype.call=function(a,x){return x.subscribe(a)},S}()},2288:function(j,N,t){var y=this&&this.__createBinding||(Object.create?function(a,x,e,P){void 0===P&&(P=e),Object.defineProperty(a,P,{enumerable:!0,get:function(){return x[e]}})}:function(a,x,e,P){void 0===P&&(P=e),a[P]=x[e]}),S=this&&this.__exportStar||function(a,x){for(var e in a)"default"!==e&&!x.hasOwnProperty(e)&&y(x,a,e)};Object.defineProperty(N,"__esModule",{value:!0}),S(t(4966),N),S(t(5303),N)},5303:(j,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.tag=void 0,N.tag=function t(S){return function(x){return x.lift(new y(S))}};var y=function(){function S(a){this.tag=a}return S.prototype.call=function(a,x){return x.subscribe(a)},S}()},6761:(j,N,t)=>{t.d(N,{Ju:()=>d,sn:()=>_});var y=t(655),S=t(1159),a=t(5e3),x=t(3075),e=t(3753),P=t(7625),w=t(9439),Z=t(4090),D=t(1721),R=t(226),n=t(9808),J=t(5017),k=t(404);const B=["nz-rate-item",""];function r(p,A){}function T(p,A){}function I(p,A){1&p&&a._UZ(0,"i",4)}const E=function(p){return{$implicit:p}},V=["ulElement"];function H(p,A){if(1&p){const o=a.EpF();a.TgZ(0,"li",3)(1,"div",4),a.NdJ("itemHover",function(u){const U=a.CHM(o).index;return a.oxw().onItemHover(U,u)})("itemClick",function(u){const U=a.CHM(o).index;return a.oxw().onItemClick(U,u)}),a.qZA()()}if(2&p){const o=A.index,c=a.oxw();a.Q6J("ngClass",c.starStyleArray[o]||"")("nzTooltipTitle",c.nzTooltips[o]),a.xp6(1),a.Q6J("allowHalf",c.nzAllowHalf)("character",c.nzCharacter)("index",o)}}let L=(()=>{class p{constructor(){this.index=0,this.allowHalf=!1,this.itemHover=new a.vpe,this.itemClick=new a.vpe}hoverRate(o){this.itemHover.next(o&&this.allowHalf)}clickRate(o){this.itemClick.next(o&&this.allowHalf)}}return p.\u0275fac=function(o){return new(o||p)},p.\u0275cmp=a.Xpm({type:p,selectors:[["","nz-rate-item",""]],inputs:{character:"character",index:"index",allowHalf:"allowHalf"},outputs:{itemHover:"itemHover",itemClick:"itemClick"},exportAs:["nzRateItem"],attrs:B,decls:6,vars:8,consts:[[1,"ant-rate-star-second",3,"mouseover","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-rate-star-first",3,"mouseover","click"],["defaultCharacter",""],["nz-icon","","nzType","star","nzTheme","fill"]],template:function(o,c){if(1&o&&(a.TgZ(0,"div",0),a.NdJ("mouseover",function(M){return c.hoverRate(!1),M.stopPropagation()})("click",function(){return c.clickRate(!1)}),a.YNc(1,r,0,0,"ng-template",1),a.qZA(),a.TgZ(2,"div",2),a.NdJ("mouseover",function(M){return c.hoverRate(!0),M.stopPropagation()})("click",function(){return c.clickRate(!0)}),a.YNc(3,T,0,0,"ng-template",1),a.qZA(),a.YNc(4,I,1,0,"ng-template",null,3,a.W1O)),2&o){const u=a.MAs(5);a.xp6(1),a.Q6J("ngTemplateOutlet",c.character||u)("ngTemplateOutletContext",a.VKq(4,E,c.index)),a.xp6(2),a.Q6J("ngTemplateOutlet",c.character||u)("ngTemplateOutletContext",a.VKq(6,E,c.index))}},directives:[n.tP,J.Ls],encapsulation:2,changeDetection:0}),(0,y.gn)([(0,D.yF)()],p.prototype,"allowHalf",void 0),p})();const h="rate";let _=(()=>{class p{constructor(o,c,u,M,U,K){this.nzConfigService=o,this.ngZone=c,this.renderer=u,this.cdr=M,this.directionality=U,this.destroy$=K,this._nzModuleName=h,this.nzAllowClear=!0,this.nzAllowHalf=!1,this.nzDisabled=!1,this.nzAutoFocus=!1,this.nzCount=5,this.nzTooltips=[],this.nzOnBlur=new a.vpe,this.nzOnFocus=new a.vpe,this.nzOnHoverChange=new a.vpe,this.nzOnKeyDown=new a.vpe,this.classMap={},this.starArray=[],this.starStyleArray=[],this.dir="ltr",this.hasHalf=!1,this.hoverValue=0,this.isFocused=!1,this._value=0,this.onChange=()=>null,this.onTouched=()=>null}get nzValue(){return this._value}set nzValue(o){this._value!==o&&(this._value=o,this.hasHalf=!Number.isInteger(o),this.hoverValue=Math.ceil(o))}ngOnChanges(o){const{nzAutoFocus:c,nzCount:u,nzValue:M}=o;if(c&&!c.isFirstChange()){const U=this.ulElement.nativeElement;this.nzAutoFocus&&!this.nzDisabled?this.renderer.setAttribute(U,"autofocus","autofocus"):this.renderer.removeAttribute(U,"autofocus")}u&&this.updateStarArray(),M&&this.updateStarStyle()}ngOnInit(){this.nzConfigService.getConfigChangeEventForComponent(h).pipe((0,P.R)(this.destroy$)).subscribe(()=>this.cdr.markForCheck()),this.directionality.change.pipe((0,P.R)(this.destroy$)).subscribe(o=>{this.dir=o,this.cdr.detectChanges()}),this.dir=this.directionality.value,this.ngZone.runOutsideAngular(()=>{(0,e.R)(this.ulElement.nativeElement,"focus").pipe((0,P.R)(this.destroy$)).subscribe(o=>{this.isFocused=!0,this.nzOnFocus.observers.length&&this.ngZone.run(()=>this.nzOnFocus.emit(o))}),(0,e.R)(this.ulElement.nativeElement,"blur").pipe((0,P.R)(this.destroy$)).subscribe(o=>{this.isFocused=!1,this.nzOnBlur.observers.length&&this.ngZone.run(()=>this.nzOnBlur.emit(o))})})}onItemClick(o,c){if(this.nzDisabled)return;this.hoverValue=o+1;const u=c?o+.5:o+1;this.nzValue===u?this.nzAllowClear&&(this.nzValue=0,this.onChange(this.nzValue)):(this.nzValue=u,this.onChange(this.nzValue)),this.updateStarStyle()}onItemHover(o,c){this.nzDisabled||this.hoverValue===o+1&&c===this.hasHalf||(this.hoverValue=o+1,this.hasHalf=c,this.nzOnHoverChange.emit(this.hoverValue),this.updateStarStyle())}onRateLeave(){this.hasHalf=!Number.isInteger(this.nzValue),this.hoverValue=Math.ceil(this.nzValue),this.updateStarStyle()}focus(){this.ulElement.nativeElement.focus()}blur(){this.ulElement.nativeElement.blur()}onKeyDown(o){const c=this.nzValue;o.keyCode===S.SV&&this.nzValue<this.nzCount?this.nzValue+=this.nzAllowHalf?.5:1:o.keyCode===S.oh&&this.nzValue>0&&(this.nzValue-=this.nzAllowHalf?.5:1),c!==this.nzValue&&(this.onChange(this.nzValue),this.nzOnKeyDown.emit(o),this.updateStarStyle(),this.cdr.markForCheck())}updateStarArray(){this.starArray=Array(this.nzCount).fill(0).map((o,c)=>c),this.updateStarStyle()}updateStarStyle(){this.starStyleArray=this.starArray.map(o=>{const c="ant-rate-star",u=o+1;return{[`${c}-full`]:u<this.hoverValue||!this.hasHalf&&u===this.hoverValue,[`${c}-half`]:this.hasHalf&&u===this.hoverValue,[`${c}-active`]:this.hasHalf&&u===this.hoverValue,[`${c}-zero`]:u>this.hoverValue,[`${c}-focused`]:this.hasHalf&&u===this.hoverValue&&this.isFocused}})}writeValue(o){this.nzValue=o||0,this.updateStarArray(),this.cdr.markForCheck()}setDisabledState(o){this.nzDisabled=o}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}}return p.\u0275fac=function(o){return new(o||p)(a.Y36(w.jY),a.Y36(a.R0b),a.Y36(a.Qsj),a.Y36(a.sBO),a.Y36(R.Is,8),a.Y36(Z.kn))},p.\u0275cmp=a.Xpm({type:p,selectors:[["nz-rate"]],viewQuery:function(o,c){if(1&o&&a.Gf(V,7),2&o){let u;a.iGM(u=a.CRH())&&(c.ulElement=u.first)}},inputs:{nzAllowClear:"nzAllowClear",nzAllowHalf:"nzAllowHalf",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus",nzCharacter:"nzCharacter",nzCount:"nzCount",nzTooltips:"nzTooltips"},outputs:{nzOnBlur:"nzOnBlur",nzOnFocus:"nzOnFocus",nzOnHoverChange:"nzOnHoverChange",nzOnKeyDown:"nzOnKeyDown"},exportAs:["nzRate"],features:[a._Bn([Z.kn,{provide:x.JU,useExisting:(0,a.Gpc)(()=>p),multi:!0}]),a.TTD],decls:3,vars:7,consts:[[1,"ant-rate",3,"ngClass","tabindex","keydown","mouseleave"],["ulElement",""],["class","ant-rate-star","nz-tooltip","",3,"ngClass","nzTooltipTitle",4,"ngFor","ngForOf"],["nz-tooltip","",1,"ant-rate-star",3,"ngClass","nzTooltipTitle"],["nz-rate-item","",3,"allowHalf","character","index","itemHover","itemClick"]],template:function(o,c){1&o&&(a.TgZ(0,"ul",0,1),a.NdJ("keydown",function(M){return c.onKeyDown(M),M.preventDefault()})("mouseleave",function(M){return c.onRateLeave(),M.stopPropagation()}),a.YNc(2,H,2,5,"li",2),a.qZA()),2&o&&(a.ekj("ant-rate-disabled",c.nzDisabled)("ant-rate-rtl","rtl"===c.dir),a.Q6J("ngClass",c.classMap)("tabindex",c.nzDisabled?-1:1),a.xp6(2),a.Q6J("ngForOf",c.starArray))},directives:[L,n.mk,n.sg,k.SY],encapsulation:2,changeDetection:0}),(0,y.gn)([(0,w.oS)(),(0,D.yF)()],p.prototype,"nzAllowClear",void 0),(0,y.gn)([(0,w.oS)(),(0,D.yF)()],p.prototype,"nzAllowHalf",void 0),(0,y.gn)([(0,D.yF)()],p.prototype,"nzDisabled",void 0),(0,y.gn)([(0,D.yF)()],p.prototype,"nzAutoFocus",void 0),(0,y.gn)([(0,D.Rn)()],p.prototype,"nzCount",void 0),p})(),d=(()=>{class p{}return p.\u0275fac=function(o){return new(o||p)},p.\u0275mod=a.oAB({type:p}),p.\u0275inj=a.cJS({imports:[[R.vT,n.ez,J.PV,k.cg]]}),p})()},6559:(j,N,t)=>{t.d(N,{H0:()=>L});var y=t(5e3),S=t(9808),a=t(226);let L=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=y.oAB({type:h}),h.\u0275inj=y.cJS({imports:[[a.vT,S.ez]]}),h})()}}]);