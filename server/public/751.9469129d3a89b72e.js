"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[751],{7570:(T,v,o)=>{function g(h,C){const y=(u,f)=>{let p;for(let m of u)if(m.fieldGroup)p=y(m.fieldGroup,f);else if(m.key===f){p=m;break}return p},x=(u,f)=>{for(let p of Object.keys(f))if(f[p]instanceof Object&&!Array.isArray(f[p]))x(u,f[p]);else{const m=y(u,p);m&&(m.defaultValue=f[p])}return u};return x(h,C)}o.d(v,{Z:()=>g})},751:(T,v,o)=>{o.r(v),o.d(v,{FeaturesReviseModule:()=>ue});var g=o(6814),h=o(4190),C=o(8603),y=o(2419),x=o(2524),u=o(95),f=o(551),p=o(6254),m=o(7921),M=o(7398),z=o(4223),e=o(9212),_=o(313),w=o(951),E=o(8178),O=o(3145),A=o(8091),D=o(2616);function R(t,a){1&t&&(e.TgZ(0,"div"),e._UZ(1,"router-outlet"),e.qZA())}function L(t,a){1&t&&(e.TgZ(0,"nz-row",8)(1,"div",9),e._UZ(2,"cvc-login-prompt"),e.qZA()())}function F(t,a){if(1&t&&(e.ynx(0),e._UZ(1,"cvc-section-navigation",1),e.TgZ(2,"nz-page-header",2)(3,"nz-page-header-title",3),e._uU(4," REVISE "),e._UZ(5,"i",4),e.ALo(6,"entityColor"),e._uU(7),e.qZA(),e.TgZ(8,"nz-page-header-subtitle"),e._uU(9),e.qZA(),e.TgZ(10,"nz-page-header-content")(11,"div",5),e.YNc(12,R,2,0,"div",6),e.ALo(13,"ngrxPush"),e.YNc(14,L,3,0,"ng-template",null,7,e.W1O),e.qZA()()(),e.BQk()),2&t){const n=a.ngIf,l=e.MAs(15),d=e.oxw();e.xp6(),e.Q6J("displayName",n.name),e.xp6(4),e.Q6J("nzTwotoneColor",e.lcZ(6,6,"Feature")),e.xp6(2),e.hij(" ",n.name," "),e.xp6(2),e.hij(" ",n.fullName," "),e.xp6(3),e.Q6J("ngIf",e.lcZ(13,8,d.isSignedIn$))("ngIfElse",l)}}let r=(()=>{class t{constructor(n,l,d){this.gql=n,this.route=l,this.viewerService=d,this.routeSub=this.route.params.subscribe(N=>{let U=this.gql.watch({featureId:+N.featureId}).valueChanges;this.loading$=U.pipe((0,z.j)("loading"),(0,m.O)(!0)),this.feature$=U.pipe((0,z.j)("data","feature")),this.commentsTotal$=this.feature$.pipe((0,z.j)("comments","totalCount")),this.flagsTotal$=this.feature$.pipe((0,z.j)("flags","totalCount")),this.revisionsTotal$=this.feature$.pipe((0,z.j)("revisions","totalCount"))})}ngOnInit(){this.isSignedIn$=this.viewerService.viewer$.pipe((0,M.U)(n=>n.signedIn))}ngOnDestroy(){this.routeSub.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(_.HWg),e.Y36(h.gz),e.Y36(w.a))},t.\u0275cmp=e.Xpm({type:t,selectors:[["features-revise"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"displayName"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzTheme","twotone","nzType","civic-feature",3,"nzTwotoneColor"],[1,"content"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["nzSpan","24","nzJustify","center"],["nz-col","","nzSpan","6"]],template:function(n,l){1&n&&(e.YNc(0,F,16,10,"ng-container",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,l.feature$))},dependencies:[g.O5,h.lC,p.$O,p.u9,p.yG,p.u5,f.Ls,u.t3,u.SK,E.u,O.I,g.Ov,A.fM,D.a],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),t})();var s=o(2574),i=o(4139),c=o(2962),k=o(6586),J=o(655),P=o(6223),B=o(1791),$=o(2024),b=o(1022);const W=(0,o(7570).Z)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Factor"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"name",type:"base-input",props:{placeholder:"Enter a name for this Factor",description:"Enter the name of the Factor",label:"Name",required:!0}},{key:"fullName",type:"base-input",props:{placeholder:"Enter a full name for this Factor",description:"Enter a full or long-form name of the Factor if applicable",label:"Full Name",required:!1}},{key:"ncitId",type:"base-input",props:{placeholder:"NCI Thesaurus Code",description:"Enter the NCI Thesaurus ID for this Factor",label:"NCI Thesaurus ID",required:!1}},{key:"aliases",type:"tag-multi-input",props:{label:"Aliases",description:"List any aliases commonly used to refer to this Factor",placeholder:"Enter Alias and hit return"}},{key:"description",type:"base-textarea",wrappers:["form-field"],props:{tooltip:"User-defined summary of the clinical relevance of this Factor.",placeholder:"Enter a Factor Summary",label:"Summary",required:!1,rows:5}},{key:"sourceIds",type:"source-multi-select",wrappers:["form-field"],props:{}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",placeholder:"Please enter a comment describing your revisions.",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Factor Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{description:void 0,sourceIds:void 0},comment:void 0,organizationId:void 0});var S,Z=o(3599),H=o(2840),K=o(9208),X=o(1227),q=o(7473),ee=o(5545),te=o(9928);function ne(t,a){if(1&t&&(e._uU(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),e.TgZ(1,"a",4),e._uU(2,"here."),e.qZA()),2&t){const n=e.oxw();e.xp6(),e.s9C("href",n.url,e.LSH)}}const oe=()=>({});function ae(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"form",5),e.NdJ("ngSubmit",function(){e.CHM(n);const d=e.oxw();return e.KtG(d.onSubmit(d.model))}),e.TgZ(1,"formly-form",6),e.NdJ("modelChange",function(d){e.CHM(n);const N=e.oxw();return e.KtG(N.model=d)}),e.qZA()()}if(2&t){const n=e.oxw();e.Q6J("formGroup",n.form),e.xp6(),e.Q6J("form",n.form)("fields",n.fields)("model",n.model)("options",e.DdM(5,oe))}}function ie(t,a){1&t&&e._uU(0," Loading Factor... ")}let I=((S=class{constructor(a,n,l,d){this.revisableFieldsGQL=a,this.submitRevisionsGQL=n,this.networkErrorService=l,this.cdr=d,this.form=new P.nJ({}),this.fields=W,this.reviseFactorMutator=new $.U(l)}ngOnInit(){this.url=`/features/${this.featureId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({featureId:this.featureId}).pipe((0,B.t)(this)).subscribe({next:({data:{feature:a}})=>{if(a){let n=function G(t){if("Factor"===t.featureInstance.__typename)return{description:t.description,name:t.name,fullName:t.fullName,sourceIds:t.sources.map(a=>a.id),aliases:t.featureAliases,ncitId:t.featureInstance.ncitId}}(a);n&&(this.model={id:a.id,fields:n},this.cdr.detectChanges())}},error:a=>{console.error("Error retrieving Factor."),console.error(a)},complete:()=>{}})}onSubmit(a){if(!this.featureId)return;let n=function j(t,a){const n=a.fields;if(a.comment&&n.name)return{id:t,fields:{description:b.xt(n.description),fullName:b.xt(n.fullName),name:n.name,sourceIds:n.sourceIds||[],aliases:n.aliases||[],ncitId:b.xt(n.ncitId)},organizationId:a.organizationId,comment:a.comment}}(this.featureId,a);n&&(this.mutationState=this.reviseFactorMutator.mutate(this.submitRevisionsGQL,{input:n}))}}).\u0275fac=function(a){return new(a||S)(e.Y36(_.PZh),e.Y36(_.yok),e.Y36(q.Y),e.Y36(e.sBO))},S.\u0275cmp=e.Xpm({type:S,selectors:[["cvc-factor-revise-form"]],inputs:{featureId:"featureId"},standalone:!0,features:[e.jDz],decls:6,vars:5,consts:[["entityType","Gene",3,"redirectUrl","mutationState","successMessage"],["success",""],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["loadingModel",""],[3,"href"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[3,"form","fields","model","options","modelChange"]],template:function(a,n){if(1&a&&(e.TgZ(0,"cvc-form-submission-status-display",0),e.YNc(1,ne,3,1,"ng-template",null,1,e.W1O)(3,ae,2,6,"form",2)(4,ie,1,0,"ng-template",null,3,e.W1O),e.qZA()),2&a){const l=e.MAs(2),d=e.MAs(5);e.Q6J("redirectUrl",n.url)("mutationState",n.mutationState)("successMessage",l),e.xp6(3),e.Q6J("ngIf",n.model)("ngIfElse",d)}},dependencies:[g.ez,g.O5,Z.U5,Z.Lr,H.sL,K.S,P._Y,P.JL,P.sg,ee.T7,X.g,te.F],encapsulation:2,changeDetection:0}),S);I=(0,J.gn)([(0,B.c)()],I);let re=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.ez,c.vh,u.Jb,s.zf,i.H0,p.KJ,k.C,y.D,I]}),t})();var se=o(8454);function le(t,a){if(1&t&&(e.TgZ(0,"span"),e._UZ(1,"cvc-gene-revise-form",2),e.qZA()),2&t){const n=e.oxw(2);e.xp6(),e.Q6J("featureId",n.featureId)}}function pe(t,a){if(1&t&&e._UZ(0,"cvc-factor-revise-form",2),2&t){const n=e.oxw(2);e.Q6J("featureId",n.featureId)}}function ce(t,a){if(1&t&&(e.ynx(0),e.YNc(1,le,2,1)(2,pe,1,1),e.BQk()),2&t){const n=e.oxw();let l;e.xp6(),e.um2(1,"Gene"===(l=n.featureType)?1:"Factor"===l?2:-1)}}function de(t,a){1&t&&e._uU(0,"Loading Feature...")}const ge=[{path:"",component:r,data:{breadcrumb:"Revise"},children:[{path:"",redirectTo:"suggest",pathMatch:"full"},{path:"suggest",component:(()=>{class t{constructor(n){this.route=n,this.routeParams$=this.route.params.subscribe(l=>{this.featureId=+l.featureId}),this.queryParams$=this.route.queryParamMap.subscribe(l=>{l.has("featureType")&&(this.featureType=l.get("featureType"))})}ngOnDestroy(){this.routeParams$.unsubscribe(),this.queryParams$.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(h.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["cvc-features-suggest"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loadingFeature",""],[3,"featureId"]],template:function(n,l){if(1&n&&e.YNc(0,ce,3,1,"ng-container",0)(1,de,1,0,"ng-template",null,1,e.W1O),2&n){const d=e.MAs(2);e.Q6J("ngIf",l.featureId&&l.featureType)("ngIfElse",d)}},dependencies:[g.O5,se.$,I],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),t})(),data:{breadcrumb:"Suggest Revision"}}]}];let fe=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[h.Bz.forChild(ge),re]}),t})(),ue=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.ez,h.Bz,fe,p.KJ,f.PV,u.Jb,C.a,y.D,x.s]}),t})()},4139:(T,v,o)=>{o.d(v,{H0:()=>F});var g=o(9212),h=o(6814),C=o(9388);let F=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=g.oAB({type:r}),r.\u0275inj=g.cJS({imports:[C.vT,h.ez]}),r})()}}]);