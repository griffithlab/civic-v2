"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[3218],{392:(Pt,k,a)=>{a.d(k,{T:()=>U});var s=a(4650),z=a(6895),n=a(6672),C=a(6581),x=a(6715),b=a(5797),j=a(7491),Z=a(5749),D=a(3965),t=a(5457),L=a(7701);const Y=function(d){return{"matched-tag":d}},lt=function(d,m){return{tagType:d,tag:m}};function y(d,m){if(1&d&&(s.TgZ(0,"div",2),s.GkF(1,6),s.qZA()),2&d){const _=m.$implicit,f=s.oxw(),K=s.MAs(7);s.Q6J("ngClass",s.VKq(3,Y,f.matchingText&&_.name.toLowerCase().includes(f.matchingText))),s.xp6(1),s.Q6J("ngTemplateOutlet",K)("ngTemplateOutletContext",s.WLB(5,lt,f.tagType,_))}}function $(d,m){if(1&d&&(s.TgZ(0,"span"),s._uU(1),s.qZA()),2&d){const _=s.oxw(2);s.xp6(1),s.hij(" ",_.matchedHiddenCount," of ")}}function O(d,m){if(1&d&&(s.TgZ(0,"nz-tag",7),s._uU(1," +"),s.YNc(2,$,2,1,"span",8),s._uU(3),s.qZA()),2&d){const _=s.oxw(),f=s.MAs(5);s.Q6J("nzPopoverContent",f),s.xp6(2),s.Q6J("ngIf",_.matchedHiddenCount>0),s.xp6(1),s.hij("",_.hiddenCount," ")}}function I(d,m){if(1&d&&(s.TgZ(0,"div",2),s.ynx(1,10),s.GkF(2,6),s.BQk(),s.qZA()),2&d){const _=m.$implicit,f=s.oxw(2),K=s.MAs(7);s.Q6J("ngClass",s.VKq(4,Y,f.matchingText&&_.name.toLowerCase().includes(f.matchingText))),s.xp6(1),s.Q6J("ngSwitch",f.tagType),s.xp6(1),s.Q6J("ngTemplateOutlet",K)("ngTemplateOutletContext",s.WLB(6,lt,f.tagType,_))}}function nt(d,m){if(1&d&&(s.TgZ(0,"div",9)(1,"cvc-tag-list",0),s.YNc(2,I,3,9,"div",1),s.qZA()()),2&d){const _=s.oxw();s.xp6(2),s.Q6J("ngForOf",_.hiddenTags)}}function et(d,m){if(1&d&&(s.ynx(0),s._UZ(1,"cvc-therapy-tag",12),s.BQk()),2&d){const _=s.oxw().tag;s.xp6(1),s.Q6J("therapy",_)("truncateLongName",!0)}}function ct(d,m){if(1&d&&(s.ynx(0),s._UZ(1,"cvc-disease-tag",13),s.BQk()),2&d){const _=s.oxw().tag;s.xp6(1),s.Q6J("disease",_)("truncateLongName",!0)}}function J(d,m){if(1&d&&(s.ynx(0),s._UZ(1,"cvc-gene-tag",14),s.BQk()),2&d){const _=s.oxw().tag;s.xp6(1),s.Q6J("gene",_)("truncateLongName",!0)}}function Q(d,m){if(1&d&&(s.ynx(0),s._UZ(1,"cvc-organization-tag",15),s.BQk()),2&d){const _=s.oxw().tag;s.xp6(1),s.Q6J("org",_)}}function R(d,m){if(1&d&&(s.ynx(0),s._UZ(1,"cvc-variant-tag",16),s.BQk()),2&d){const _=s.oxw().tag;s.xp6(1),s.Q6J("variant",_)}}function ft(d,m){if(1&d&&(s.ynx(0),s._UZ(1,"cvc-variant-type-tag",17),s.BQk()),2&d){const _=s.oxw().tag;s.xp6(1),s.Q6J("variantType",_)}}function ht(d,m){1&d&&(s.ynx(0,10),s.YNc(1,et,2,2,"ng-container",11),s.YNc(2,ct,2,2,"ng-container",11),s.YNc(3,J,2,2,"ng-container",11),s.YNc(4,Q,2,1,"ng-container",11),s.YNc(5,R,2,1,"ng-container",11),s.YNc(6,ft,2,1,"ng-container",11),s.BQk()),2&d&&(s.Q6J("ngSwitch",m.tagType),s.xp6(1),s.Q6J("ngSwitchCase","therapy"),s.xp6(1),s.Q6J("ngSwitchCase","disease"),s.xp6(1),s.Q6J("ngSwitchCase","gene"),s.xp6(1),s.Q6J("ngSwitchCase","organization"),s.xp6(1),s.Q6J("ngSwitchCase","variant"),s.xp6(1),s.Q6J("ngSwitchCase","variant-type"))}class U{constructor(m){this.cdr=m,this.maxDisplayCount=2,this.thisOne=!1,this.matchedHiddenCount=0}ngOnChanges(m){this.calculateDisplayedTags()}calculateDisplayedTags(){if(this.displayedTags=this.tags?.slice(0,this.maxDisplayCount),this.hiddenTags=this.tags?.slice(this.maxDisplayCount),this.hiddenCount=this.hiddenTags?.length,this.matchingText){if(this.matchedHiddenCount=0,this.hiddenTags){let m=this.matchingText.toLowerCase();this.hiddenTags.forEach(_=>{_.name.toLowerCase().includes(m)&&(this.matchedHiddenCount+=1)})}}else this.matchedHiddenCount=0;this.cdr.detectChanges()}}U.\u0275fac=function(m){return new(m||U)(s.Y36(s.sBO))},U.\u0275cmp=s.Xpm({type:U,selectors:[["cvc-tag-overflow"]],inputs:{tags:"tags",maxDisplayCount:"maxDisplayCount",matchingText:"matchingText",tagType:"tagType",thisOne:"thisOne"},features:[s.TTD],decls:8,vars:5,consts:[["size","xs"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["class","overflow-tag","nz-popover","","nzPopoverPlacement","top","nzPopoverTrigger","hover",3,"nzPopoverContent",4,"ngIf"],["additionalTagPopover",""],["tagTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-popover","","nzPopoverPlacement","top","nzPopoverTrigger","hover",1,"overflow-tag",3,"nzPopoverContent"],[4,"ngIf"],[1,"popover-tag-list"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"therapy","truncateLongName"],[3,"disease","truncateLongName"],[3,"gene","truncateLongName"],[3,"org"],[3,"variant"],[3,"variantType"]],template:function(m,_){1&m&&(s.TgZ(0,"cvc-tag-list",0),s.YNc(1,y,2,8,"div",1),s.TgZ(2,"div",2),s.YNc(3,O,4,3,"nz-tag",3),s.qZA(),s.YNc(4,nt,3,1,"ng-template",null,4,s.W1O),s.qZA(),s.YNc(6,ht,7,7,"ng-template",null,5,s.W1O)),2&m&&(s.xp6(1),s.Q6J("ngForOf",_.displayedTags),s.xp6(1),s.Q6J("ngClass",s.VKq(3,Y,_.matchedHiddenCount>0)),s.xp6(1),s.Q6J("ngIf",_.hiddenCount&&_.hiddenCount>0))},dependencies:[z.mk,z.sg,z.O5,z.tP,z.RF,z.n9,n.j,C.lU,x.$,b.T,j.n,Z.m,D.H,t.I,L.j],styles:[".matched-tag[_ngcontent-%COMP%]{font-weight:700}.popover-tag-list[_ngcontent-%COMP%]{max-width:600px}"],changeDetection:0})},2338:(Pt,k,a)=>{a.d(k,{I:()=>z});var s=a(4650);class z{transform(C){if(C){let b=C.toLowerCase().replace(/_/g," ").split(" ");for(var x=0;x<b.length;x++)b[x]=b[x].charAt(0).toUpperCase()+b[x].slice(1);return b.join(" ")}return""}}z.\u0275fac=function(C){return new(C||z)},z.\u0275pipe=s.Yjl({name:"enumToTitle",type:z,pure:!0})},7800:(Pt,k,a)=>{a.r(k),a.d(k,{UsersDetailModule:()=>mt});var s=a(6895),z=a(5630),n=a(5655),C=a(9116),x=a(8762),b=a(6903),j=a(5473),Z=a(6616),D=a(1102),t=a(4650);class L{}L.\u0275fac=function(o){return new(o||L)},L.\u0275mod=t.oAB({type:L}),L.\u0275inj=t.cJS({imports:[s.ez,Z.sL,D.PV]});var Y=a(9194),lt=a(9476),y=a(3679),$=a(9444),O=a(2635),I=a(1971),nt=a(3848),et=a(2577),ct=a(6960),J=a(4006),Q=a(9597),R=a(6704),ft=a(7008),ht=a(8521),U=a(5681),d=a(8231);class m{}m.\u0275fac=function(o){return new(o||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[s.ez,J.u5,R.U5,J.UX,O._N,O.pP,I.vh,Q.L,ht.aF,Z.sL,U.j,d.LV,ft.B]});var _=a(330),f=a(5013),K=a(3756);class B{constructor(o){this.route=o,this.userId=+this.route.snapshot.params.userId}}B.\u0275fac=function(o){return new(o||B)(t.Y36(C.gz))},B.\u0275cmp=t.Xpm({type:B,selectors:[["cvc-users-assertions"]],decls:1,vars:1,consts:[["cvcTitle","User Assertions",3,"userId"]],template:function(o,e){1&o&&t._UZ(0,"cvc-assertions-table",0),2&o&&t.Q6J("userId",e.userId)},dependencies:[K.x],styles:["[_nghost-%COMP%]{display:block}"]});var T=a(7630),Nt=a(2011);class ot{constructor(o){this.route=o,this.mode=T.wJ2.User,this.userId=+this.route.snapshot.params.userId}}ot.\u0275fac=function(o){return new(o||ot)(t.Y36(C.gz))},ot.\u0275cmp=t.Xpm({type:ot,selectors:[["cvc-users-events"]],decls:1,vars:2,consts:[["tagDisplay","hideUser",3,"userId","mode"]],template:function(o,e){1&o&&t._UZ(0,"cvc-event-feed",0),2&o&&t.Q6J("userId",e.userId)("mode",e.mode)},dependencies:[Nt.o],styles:["[_nghost-%COMP%]{display:block}"]});var St=a(3392);class it{constructor(o){this.route=o,this.userId=+this.route.snapshot.params.userId}}it.\u0275fac=function(o){return new(o||it)(t.Y36(C.gz))},it.\u0275cmp=t.Xpm({type:it,selectors:[["cvc-users-evidence"]],decls:1,vars:1,consts:[["cvcTitle","User Evidence",3,"userId"]],template:function(o,e){1&o&&t._UZ(0,"cvc-evidence-table",0),2&o&&t.Q6J("userId",e.userId)},dependencies:[St.a],styles:["[_nghost-%COMP%]{display:block}"]});var Ct=a(6123),pt=a(3240),A=a(4004),P=a(9300),Tt=a(8675),xt=a(9169),W=a(7570),gt=a(7044),bt=a(1664),It=a(8213),Ut=a(9790),Jt=a(1897),Qt=a(8747),Et=a(2937),wt=a(9058);function Dt(i,o){if(1&i&&(t.TgZ(0,"nz-col"),t._UZ(1,"i",17),t._uU(2),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("nzType",e.iconName),t.xp6(1),t.hij(" ",e.displayName," ")}}function Lt(i,o){1&i&&(t._uU(0),t.ALo(1,"eventVerbiage")),2&i&&t.hij(" ",t.xi3(1,1,o.$implicit.id,"action-filter")," ")}function Ft(i,o){if(1&i&&(t.TgZ(0,"nz-col"),t._UZ(1,"i",17),t.ALo(2,"iconNameForSubscribableEntity"),t._uU(3),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("nzType",t.lcZ(2,3,e.subjectWithCount.subject.__typename)),t.xp6(2),t.AsE(" ",e.subjectWithCount.subject.name," (",e.subjectWithCount.occuranceCount,") ")}}function kt(i,o){if(1&i&&(t.TgZ(0,"nz-col"),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.displayName," ")}}function Yt(i,o){if(1&i&&(t.TgZ(0,"nz-col"),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function $t(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.bulkMarkRead())}),t._UZ(1,"i",19),t._uU(2,"Mark as read "),t.qZA(),t.TgZ(3,"button",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.bulkMarkUnread())}),t._UZ(4,"i",19),t._uU(5,"Mark as unread "),t.qZA(),t.TgZ(6,"button",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.bulkUnsubscribe())}),t._UZ(7,"i",20),t._uU(8,"Unsubscribe "),t.qZA(),t._uU(9," Check all "),t.TgZ(10,"label",21),t.NdJ("ngModelChange",function(r){t.CHM(e);const u=t.oxw(2);return t.KtG(u.allChecked=r)})("nzCheckedChange",function(r){t.CHM(e);const u=t.oxw(2);return t.KtG(u.onCheckAllCheckBoxClicked(r))}),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("disabled",!e.bulkMarkEnabled),t.xp6(3),t.Q6J("disabled",!e.bulkMarkEnabled),t.xp6(3),t.Q6J("disabled",!e.bulkMarkEnabled),t.xp6(4),t.Q6J("ngModel",e.allChecked)("nzIndeterminate",e.someChecked)}}function Rt(i,o){if(1&i&&t._UZ(0,"i",32),2&i){const e=t.oxw().$implicit;t.Q6J("nzType","SUBSCRIPTION"===e.key.type?"book":"notification")("nzTheme",e.key.seen?"outline":"twotone")}}function Bt(i,o){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",33),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,u=t.oxw(3);return t.KtG(u.markAsUnread(r.key.id))}),t._UZ(2,"i",34),t.qZA(),t.BQk()}}function Ht(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,u=t.oxw(3);return t.KtG(u.markAsRead(r.key.id))}),t._UZ(1,"i",19),t.qZA()}}function jt(i,o){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",36),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,u=t.oxw(3);return t.KtG(u.unsubscribe(r.key.subscription.subscribable.id,r.key.subscription.subscribable.__typename))}),t._UZ(2,"i",20),t.qZA(),t.BQk()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.MGl("nzTooltipTitle","You received this notification because you are subscribed to ",e.key.subscription.subscribable.name,". Click to unsubscribe.")}}function Kt(i,o){1&i&&(t.TgZ(0,"button",37),t._UZ(1,"i",20),t.qZA())}function Wt(i,o){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"nz-timeline-item",23),t.YNc(2,Rt,1,2,"ng-template",null,24,t.W1O),t.TgZ(4,"nz-row")(5,"nz-col",25),t._UZ(6,"cvc-event-timeline-item",26),t.qZA(),t.TgZ(7,"nz-col",27),t.YNc(8,Bt,3,0,"ng-container",28),t.YNc(9,Ht,2,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(11,"nz-col",27),t.YNc(12,jt,3,1,"ng-container",28),t.YNc(13,Kt,2,0,"ng-template",null,30,t.W1O),t.TgZ(15,"label",31),t.NdJ("ngModelChange",function(r){const w=t.CHM(e).$implicit;return t.KtG(w.value.checked=r)})("nzCheckedChange",function(r){const w=t.CHM(e).$implicit,dn=t.oxw(3);return t.KtG(dn.onNotificationCheckBoxClicked(w.key.id,r))}),t.qZA()()()(),t.BQk()}if(2&i){const e=o.$implicit,l=t.MAs(3),r=t.MAs(10),u=t.MAs(14);t.xp6(1),t.Q6J("nzDot",l)("nzColor",e.key.seen?"gray":"blue"),t.xp6(5),t.Q6J("event",e.key.event),t.xp6(2),t.Q6J("ngIf",e.key.seen)("ngIfElse",r),t.xp6(4),t.Q6J("ngIf",e.key.subscription)("ngIfElse",u),t.xp6(3),t.Q6J("ngModel",e.value.checked)}}function Vt(i,o){if(1&i&&(t.TgZ(0,"nz-timeline"),t.YNc(1,Wt,16,8,"ng-container",22),t.ALo(2,"keyvalue"),t.qZA()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e))}}function zt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",39)(1,"button",40),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().ngIf,u=t.oxw(2);return t.KtG(u.fetchMore(r.endCursor))}),t._uU(2," Load More "),t.qZA()()}}function Gt(i,o){if(1&i&&(t.ynx(0),t.YNc(1,zt,3,0,"div",38),t.BQk()),2&i){const e=o.ngIf;t.xp6(1),t.Q6J("ngIf",e.hasNextPage&&e.endCursor)}}const dt=function(){return[]};function at(i,o){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"nz-row",2)(2,"nz-col",3)(3,"nz-row")(4,"nz-button-group",4)(5,"button",5),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.setIncludeRead(!1))}),t._uU(6," Unread "),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.setIncludeRead(!0))}),t._uU(8," All "),t.qZA()()(),t.TgZ(9,"nz-row")(10,"nz-col",6)(11,"cvc-participant-list",7),t.NdJ("participantSelectedEvent",function(r){t.CHM(e);const u=t.oxw();return t.KtG(u.onNotificationReasonSelected(r))}),t.YNc(12,Dt,3,2,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(14,"cvc-participant-list",9),t.NdJ("participantSelectedEvent",function(r){t.CHM(e);const u=t.oxw();return t.KtG(u.onActionSelected(r))}),t.ALo(15,"ngrxPush"),t.YNc(16,Lt,2,4,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(18,"cvc-participant-list",10),t.NdJ("participantSelectedEvent",function(r){t.CHM(e);const u=t.oxw();return t.KtG(u.onNotificationSubjectSelected(r))}),t.ALo(19,"ngrxPush"),t.YNc(20,Ft,4,5,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(22,"cvc-participant-list",11),t.NdJ("participantSelectedEvent",function(r){t.CHM(e);const u=t.oxw();return t.KtG(u.onOriginatingUserSelected(r))}),t.ALo(23,"ngrxPush"),t.YNc(24,kt,2,1,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(26,"cvc-participant-list",12),t.NdJ("participantSelectedEvent",function(r){t.CHM(e);const u=t.oxw();return t.KtG(u.onOrganizationSelected(r))}),t.ALo(27,"ngrxPush"),t.YNc(28,Yt,2,1,"ng-template",null,8,t.W1O),t.qZA()()()(),t.TgZ(30,"nz-col",13)(31,"nz-card",14),t.YNc(32,$t,11,5,"ng-template",null,15,t.W1O),t.TgZ(34,"nz-row",2)(35,"nz-col",16),t.YNc(36,Vt,3,3,"nz-timeline",1),t.YNc(37,Gt,2,1,"ng-container",1),t.ALo(38,"ngrxPush"),t.qZA()()()()(),t.BQk()}if(2&i){const e=o.ngIf,l=t.MAs(33),r=t.oxw();t.xp6(1),t.Q6J("nzGutter",25),t.xp6(4),t.Q6J("nzType",r.includeReadInput?"default":"primary"),t.xp6(2),t.Q6J("nzType",r.includeReadInput?"primary":"default"),t.xp6(4),t.Q6J("participantList",r.notificationTypes),t.xp6(3),t.Q6J("participantList",t.lcZ(15,12,r.actions$)||t.DdM(22,dt)),t.xp6(4),t.Q6J("participantList",t.lcZ(19,14,r.notificationSubjects$)||t.DdM(23,dt)),t.xp6(4),t.Q6J("participantList",t.lcZ(23,16,r.originatingUsers$)||t.DdM(24,dt)),t.xp6(4),t.Q6J("participantList",t.lcZ(27,18,r.organizations$)||t.DdM(25,dt)),t.xp6(5),t.Q6J("nzExtra",l),t.xp6(3),t.Q6J("nzGutter",16),t.xp6(2),t.Q6J("ngIf",e.size>0),t.xp6(1),t.Q6J("ngIf",t.lcZ(38,20,r.pageInfo$))}}class E{constructor(o,e,l,r,u){this.route=o,this.gql=e,this.networkErrorService=l,this.updateNotificationStatusMuation=r,this.unsubscribeMutation=u,this.notificationState=new Map,this.includeReadInput=!1,this.bulkMarkEnabled=!1,this.allChecked=!1,this.someChecked=!1,this.notificationTypes=[{id:1,type:T.fow.Mention,iconName:"notification",displayName:"Mentioned"},{id:2,type:T.fow.Subscription,iconName:"book",displayName:"Subscribed"}],this.userId=+this.route.snapshot.params.userId,this.updateNotificationStatusMutator=new Ct.U(l),this.unsubscribeMutator=new Ct.U(l)}ngOnInit(){this.initialQueryVars={includeRead:this.includeReadInput},this.queryRef=this.gql.watch(this.initialQueryVars),this.results$=this.queryRef.valueChanges,this.connection$=this.results$.pipe((0,A.U)(o=>o.data?.notifications),(0,P.h)(pt.ep)),this.pageInfo$=this.connection$.pipe((0,A.U)(o=>o.pageInfo),(0,P.h)(pt.ep)),this.notificationStateObservable$=this.results$.pipe((0,A.U)(o=>o.data),(0,P.h)(pt.ep),(0,A.U)(({notifications:o})=>{let e=new Map;return o.edges.forEach(l=>{if(l.node){let r={checked:!1};e.set(l.node,r),this.notificationState.set(l.node,r)}}),e})),this.notificationSubjects$=this.results$.pipe((0,A.U)(o=>o.data),(0,P.h)(pt.ep),(0,A.U)(({notifications:o})=>o.notificationSubjects.map(e=>({id:`${e.subject?.__typename}:${e.subject?.id}`,subjectWithCount:e})))),this.originatingUsers$=this.results$.pipe((0,A.U)(({data:o})=>o.notifications.originatingUsers)),this.actions$=this.results$.pipe((0,A.U)(({data:o})=>o.notifications.eventTypes.map(e=>({id:e})))),this.organizations$=this.results$.pipe((0,A.U)(({data:o})=>o.notifications.organizations)),this.isLoading$=this.results$.pipe((0,A.U)(({loading:o})=>o),(0,Tt.O)(!0))}fetchMore(o){this.queryRef.fetchMore({variables:{after:o}})}setIncludeRead(o){this.includeReadInput=o,this.queryRef.refetch({includeRead:this.includeReadInput})}onNotificationReasonSelected(o){this.queryRef.refetch({notificationReason:o?o.type:void 0})}onNotificationSubjectSelected(o){let e;if(void 0!==o){let l=o.subjectWithCount.subject?.__typename;e={id:o.subjectWithCount.subject.id,entityType:T.o71[l]}}this.queryRef.refetch({originatingObject:e})}onOriginatingUserSelected(o){this.queryRef.refetch({originatingUserId:o?.id})}onActionSelected(o){this.queryRef.refetch({eventType:o?o.id:void 0})}onOrganizationSelected(o){this.queryRef.refetch({organizationId:o?.id})}markAsRead(o){this.updateNotificationStatusMutator.mutate(this.updateNotificationStatusMuation,{input:{ids:[o],newStatus:T.NQC.Read}})}markAsUnread(o){this.updateNotificationStatusMutator.mutate(this.updateNotificationStatusMuation,{input:{ids:[o],newStatus:T.NQC.Unread}})}unsubscribe(o,e){this.unsubscribeMutator.mutate(this.unsubscribeMutation,{input:{subscribables:[{id:o,entityType:T.o71[e]}]}})}onNotificationCheckBoxClicked(o,e){let l=Array.from(this.notificationState.keys()).find(r=>r.id===o);if(l){let r=this.notificationState.get(l);r&&(r.checked=e)}e?(this.bulkMarkEnabled=!0,Array.from(this.notificationState.values()).every(r=>r.checked)?(this.allChecked=!0,this.someChecked=!1):this.someChecked=!0):Array.from(this.notificationState.values()).some(r=>r.checked)?(this.bulkMarkEnabled=!0,this.allChecked=!1,this.someChecked=!Array.from(this.notificationState.values()).every(r=>!r.checked)):(this.bulkMarkEnabled=!1,this.allChecked=!1,this.someChecked=!1)}onCheckAllCheckBoxClicked(o){o?this.checkAll():this.uncheckAll()}getCheckedIds(){let o=[];return this.notificationState.forEach((e,l)=>{e.checked&&o.push(l.id)}),o}checkAll(){this.queryRef.refetch().then(()=>{this.notificationState.forEach((o,e)=>{o.checked=!0})}),this.allChecked=!0,this.someChecked=!1,this.bulkMarkEnabled=!0}uncheckAll(){this.queryRef.refetch().then(()=>{this.notificationState.forEach((o,e)=>{o.checked=!1})}),this.allChecked=!1,this.someChecked=!1,this.bulkMarkEnabled=!1}bulkMarkRead(){this.updateNotificationStatusMutator.mutate(this.updateNotificationStatusMuation,{input:{ids:this.getCheckedIds(),newStatus:T.NQC.Read}}),this.uncheckAll()}bulkMarkUnread(){this.updateNotificationStatusMutator.mutate(this.updateNotificationStatusMuation,{input:{ids:this.getCheckedIds(),newStatus:T.NQC.Unread}}),this.uncheckAll()}bulkUnsubscribe(){let o=[];this.notificationState.forEach((e,l)=>{e.checked&&l.subscription&&o.push({id:l.subscription.subscribable.id,entityType:T.o71[l.subscription.subscribable.__typename]})}),this.unsubscribeMutator.mutate(this.unsubscribeMutation,{input:{subscribables:o}}).submitSuccess$.subscribe(e=>{e&&this.queryRef.refetch()}),this.uncheckAll()}}E.\u0275fac=function(o){return new(o||E)(t.Y36(C.gz),t.Y36(T.yqR),t.Y36(xt.Y),t.Y36(T.LiH),t.Y36(T.m$d))},E.\u0275cmp=t.Xpm({type:E,selectors:[["cvc-users-notifications"]],decls:4,vars:6,consts:[[3,"nzSpinning"],[4,"ngIf"],[3,"nzGutter"],["nzSpan","4"],["nzSize","small"],["nz-button","","nzShape","round",3,"nzType","click"],["nzSpan","24"],["listTitle","Notification Reason",3,"participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Action",3,"participantList","participantSelectedEvent"],["listTitle","Subject",3,"participantList","participantSelectedEvent"],["listTitle","User",3,"participantList","participantSelectedEvent"],["listTitle","Organization",3,"participantList","participantSelectedEvent"],["nzSpan","20"],["nzTitle","Notifications","id","card-content",3,"nzExtra"],["bulkOperations",""],["nzSpan","24",1,"timeline"],["nz-icon","",3,"nzType"],["nz-button","","nzSize","small",3,"disabled","click"],["nz-icon","","nzType","check"],["nz-icon","","nzType","bell"],["nz-checkbox","",3,"ngModel","nzIndeterminate","ngModelChange","nzCheckedChange"],[4,"ngFor","ngForOf"],[3,"nzDot","nzColor"],["timelineDotTemplate",""],["nzFlex","auto"],[3,"event"],["nzFlex","50px"],[4,"ngIf","ngIfElse"],["unread",""],["noSubscriptionButton",""],["nz-checkbox","",3,"ngModel","ngModelChange","nzCheckedChange"],["nz-icon","",1,"item-icon",3,"nzType","nzTheme"],["nz-tooltip","","nzTooltipTitle","Mark as unread.","nz-button","","nzType","default","nzShape","circle",3,"click"],["nz-icon","","nzType","undo"],["nz-tooltip","","nzTooltipTitle","Mark as read.","nz-button","","nzType","default","nzShape","circle",3,"click"],["nz-tooltip","","nz-button","","nzType","default","nzShape","circle",3,"nzTooltipTitle","click"],["nz-tooltip","","nzTooltipTitle","You are no longer subscribed to the entity that triggered this notification.","nz-button","","nzType","default","nzShape","circle","disabled",""],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","default","nzSize","small","nzBlock","",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"nz-spin",0),t.ALo(1,"ngrxPush"),t.YNc(2,at,39,26,"ng-container",1),t.ALo(3,"async"),t.qZA()),2&o&&(t.Q6J("nzSpinning",t.lcZ(1,2,e.isLoading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,e.notificationStateObservable$)))},dependencies:[s.sg,s.O5,J.JJ,J.On,W.SY,U.W,y.t3,y.SK,Z.ix,Z.fY,gt.w,bt.dQ,I.bd,D.Ls,It.Ie,Ut.Zv,Ut.PD,Jt.t,Qt.l,s.Ov,s.Nd,O.fM,Et.R,wt.j],styles:["[_nghost-%COMP%]{display:block}.timeline[_ngcontent-%COMP%]{padding-top:6px;padding-left:6px}.item-icon[_ngcontent-%COMP%]{font-size:18px}.timeline-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .timeline-item[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{margin-top:2px}.timeline-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-left:4px}.read-notification[_ngcontent-%COMP%]{background-color:gray}nz-timeline[_ngcontent-%COMP%]     ul li:last-child{padding-bottom:0}nz-timeline[_ngcontent-%COMP%]     ul li:last-child .ant-timeline-item-content{min-height:0;padding-bottom:8px}.timestamp[_ngcontent-%COMP%]{text-align:right}.comment-title[_ngcontent-%COMP%]{padding-right:24px}.comment-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400}.comment-card[_ngcontent-%COMP%]{width:100%}"]});var qt=a(9814);class N{constructor(o){this.route=o,this.userId=+this.route.snapshot.params.userId}}N.\u0275fac=function(o){return new(o||N)(t.Y36(C.gz))},N.\u0275cmp=t.Xpm({type:N,selectors:[["cvc-users-source-suggestions"]],decls:1,vars:1,consts:[["cvcTitle","User Source Suggestions",3,"submitterId"]],template:function(o,e){1&o&&t._UZ(0,"cvc-source-suggestions-table",0),2&o&&t.Q6J("submitterId",e.userId)},dependencies:[qt.O],styles:["[_nghost-%COMP%]{display:block}"]});var Mt=a(6579),yt=a(1135),Xt=a(9350),Zt=a(8823),tn=a(8785);function H(i){let o={value:void 0,unset:void 0};return i&&i.trim().length>0?o.value=i.trim():o.unset=!0,o}function At(i){let o={value:void 0,unset:void 0};return void 0!==i?o.value=i:o.unset=!0,o}var nn=a(7579),F=a(2722),en=a(822);function V(i,o){1&i&&t._UZ(0,"nz-alert",13)}function on(i,o){if(1&i&&(t.TgZ(0,"nz-form-item"),t._UZ(1,"cvc-form-errors-alert",14),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("errors",e.errorMessages)}}function an(i,o){if(1&i&&t._UZ(0,"nz-option",15),2&i){const e=o.$implicit;t.Q6J("nzLabel",e.name)("nzValue",e.id)}}class S{constructor(o,e,l){this.updateProfileGql=o,this.profileUpdatedEvent=new t.vpe,this.success=!1,this.errorMessages=[],this.loading=!1,this.destroy$=new nn.x,this.updateProfileMutator=new Ct.U(l),this.countries$=e.fetch().pipe((0,A.U)(({data:r})=>r.countries))}ngOnInit(){if(!this.user)throw new Error("Must pass a user into the Profile Update Form");this.setInitialFormFields()}updateProfile(){if(this.username&&this.email){this.errorMessages=[];let o={username:this.username,email:this.email,name:H(this.name),areaOfExpertise:At(this.areaOfExpertise),orcid:H(this.orcid),url:H(this.url),bio:H(this.bio),countryId:At(this.countryId),twitterHandle:H(this.twitterHandle),facebookProfile:H(this.facebookProfile),linkedinProfile:H(this.linkedinProfile)},e=this.updateProfileMutator.mutate(this.updateProfileGql,{input:o});e.submitSuccess$.pipe((0,F.R)(this.destroy$)).subscribe(l=>{l&&(this.setInitialFormFields(),this.success=!0,this.profileUpdatedEvent.emit())}),e.submitError$.pipe((0,F.R)(this.destroy$)).subscribe(l=>{l&&(this.errorMessages=l,this.success=!1)}),e.isSubmitting$.pipe((0,F.R)(this.destroy$)).subscribe(l=>{this.loading=l})}}setInitialFormFields(){this.name=this.user.name,this.username=this.user.username,this.email=this.user.email,this.areaOfExpertise=this.user.areaOfExpertise,this.orcid=this.user.orcid,this.url=this.user.url,this.bio=this.user.bio,this.twitterHandle=this.user.twitterHandle,this.facebookProfile=this.user.facebookProfile,this.linkedinProfile=this.user.linkedinProfile,this.countryId=this.user.country?.id}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}S.\u0275fac=function(o){return new(o||S)(t.Y36(T.wbP),t.Y36(T.l4w),t.Y36(xt.Y))},S.\u0275cmp=t.Xpm({type:S,selectors:[["cvc-user-profile-form"]],inputs:{user:"user"},outputs:{profileUpdatedEvent:"profileUpdatedEvent"},decls:56,vars:18,consts:[["nzBanner","","nzMessage","Profile Updated","nzType","success","nzCloseable","",4,"ngIf"],[4,"ngIf"],["nzTip","Submitting",3,"nzSpinning"],["nzRequired",""],["nz-input","",2,"width","100%",3,"ngModel","ngModelChange"],["nz-input","","rows","5",2,"width","100%",3,"ngModel","ngModelChange"],["nzAllowClear","","nzShowSearch","",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzAllowClear","",3,"ngModel","ngModelChange"],["nzLabel","Patient Advocate","nzValue","PATIENT_ADVOCATE"],["nzLabel","Clinical Scientist","nzValue","CLINICAL_SCIENTIST"],["nzLabel","Research Scientist","nzValue","RESEARCH_SCIENTIST"],["type","submit","nz-button","","nzType","primary","nzSize","small",2,"width","100%",3,"disabled","click"],["nzBanner","","nzMessage","Profile Updated","nzType","success","nzCloseable",""],[3,"errors"],[3,"nzLabel","nzValue"]],template:function(o,e){1&o&&(t.TgZ(0,"nz-card"),t.YNc(1,V,1,0,"nz-alert",0),t.YNc(2,on,2,1,"nz-form-item",1),t.TgZ(3,"nz-spin",2)(4,"nz-form-item")(5,"nz-form-label",3),t._uU(6,"Username"),t.qZA(),t.TgZ(7,"input",4),t.NdJ("ngModelChange",function(r){return e.username=r}),t.qZA()(),t.TgZ(8,"nz-form-item")(9,"nz-form-label"),t._uU(10,"Name"),t.qZA(),t.TgZ(11,"input",4),t.NdJ("ngModelChange",function(r){return e.name=r}),t.qZA()(),t.TgZ(12,"nz-form-item")(13,"nz-form-label",3),t._uU(14,"Email"),t.qZA(),t.TgZ(15,"input",4),t.NdJ("ngModelChange",function(r){return e.email=r}),t.qZA()(),t.TgZ(16,"nz-form-item")(17,"nz-form-label"),t._uU(18,"User Bio"),t.qZA(),t.TgZ(19,"textarea",5),t.NdJ("ngModelChange",function(r){return e.bio=r}),t.qZA()(),t.TgZ(20,"nz-form-item")(21,"nz-form-label"),t._uU(22,"Country"),t.qZA(),t.TgZ(23,"nz-select",6),t.NdJ("ngModelChange",function(r){return e.countryId=r}),t.YNc(24,an,1,2,"nz-option",7),t.ALo(25,"ngrxPush"),t.qZA()(),t.TgZ(26,"nz-form-item")(27,"nz-form-label"),t._uU(28,"Area of Expertise"),t.qZA(),t.TgZ(29,"nz-select",8),t.NdJ("ngModelChange",function(r){return e.areaOfExpertise=r}),t._UZ(30,"nz-option",9)(31,"nz-option",10)(32,"nz-option",11),t.qZA()(),t.TgZ(33,"nz-form-item")(34,"nz-form-label"),t._uU(35,"ORCID Identifier"),t.qZA(),t.TgZ(36,"input",4),t.NdJ("ngModelChange",function(r){return e.orcid=r}),t.qZA()(),t.TgZ(37,"nz-form-item")(38,"nz-form-label"),t._uU(39,"Personal Website"),t.qZA(),t.TgZ(40,"input",4),t.NdJ("ngModelChange",function(r){return e.url=r}),t.qZA()(),t.TgZ(41,"nz-form-item")(42,"nz-form-label"),t._uU(43,"Twitter Handle"),t.qZA(),t.TgZ(44,"input",4),t.NdJ("ngModelChange",function(r){return e.twitterHandle=r}),t.qZA()(),t.TgZ(45,"nz-form-item")(46,"nz-form-label"),t._uU(47,"Facebook Profile"),t.qZA(),t.TgZ(48,"input",4),t.NdJ("ngModelChange",function(r){return e.facebookProfile=r}),t.qZA()(),t.TgZ(49,"nz-form-item")(50,"nz-form-label"),t._uU(51,"LinkedIn Profile"),t.qZA(),t.TgZ(52,"input",4),t.NdJ("ngModelChange",function(r){return e.linkedinProfile=r}),t.qZA()(),t.TgZ(53,"nz-form-item")(54,"button",12),t.NdJ("click",function(){return e.updateProfile()}),t._uU(55," Update Profile "),t.qZA()()()()),2&o&&(t.xp6(1),t.Q6J("ngIf",e.success),t.xp6(1),t.Q6J("ngIf",e.errorMessages.length>0),t.xp6(1),t.Q6J("nzSpinning",e.loading),t.xp6(4),t.Q6J("ngModel",e.username),t.xp6(4),t.Q6J("ngModel",e.name),t.xp6(4),t.Q6J("ngModel",e.email),t.xp6(4),t.Q6J("ngModel",e.bio),t.xp6(4),t.Q6J("ngModel",e.countryId),t.xp6(1),t.Q6J("ngForOf",t.lcZ(25,16,e.countries$)),t.xp6(5),t.Q6J("ngModel",e.areaOfExpertise),t.xp6(7),t.Q6J("ngModel",e.orcid),t.xp6(4),t.Q6J("ngModel",e.url),t.xp6(4),t.Q6J("ngModel",e.twitterHandle),t.xp6(4),t.Q6J("ngModel",e.facebookProfile),t.xp6(4),t.Q6J("ngModel",e.linkedinProfile),t.xp6(2),t.Q6J("disabled",e.loading||!e.username||!e.email))},dependencies:[s.sg,s.O5,J.Fj,J.JJ,J.On,y.t3,y.SK,R.Nx,R.iK,I.bd,Q.r,Z.ix,gt.w,bt.dQ,U.W,d.Ip,d.Vq,en.V,O.fM],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}nz-form-item[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}"]});var sn=a(8992),G=a(2233),rn=a(7881),q=a(529);class rt{constructor(o){this.http=o,this.uploadComplete=new t.vpe}processProfileImage(o){if(o&&o[0]){let e=new FormData;e.append("image",o[0],o[0].name),this.uploadSubscription=this.http.post("/api/upload_profile_image",e).subscribe(l=>this.uploadComplete.emit(!0),l=>this.uploadComplete.emit(!1))}}ngOnDestroy(){this.uploadSubscription?.unsubscribe()}}rt.\u0275fac=function(o){return new(o||rt)(t.Y36(q.eN))},rt.\u0275cmp=t.Xpm({type:rt,selectors:[["cvc-avatar-uploader"]],outputs:{uploadComplete:"uploadComplete"},decls:4,vars:0,consts:[["type","file","accept","image/*",2,"display","none",3,"change"],["profileImage",""],["nz-button","","nzSize","small","nzType","link",3,"click"]],template:function(o,e){if(1&o){const l=t.EpF();t.TgZ(0,"input",0,1),t.NdJ("change",function(){t.CHM(l);const u=t.MAs(1);return t.KtG(e.processProfileImage(u.files))}),t.qZA(),t.TgZ(2,"button",2),t.NdJ("click",function(){t.CHM(l);const u=t.MAs(1);return t.KtG(u.click())}),t._uU(3," Upload Image\n"),t.qZA()}},dependencies:[Z.ix,gt.w],encapsulation:2});var ln=a(5749),cn=a(7893),pn=a(2338);function gn(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nz-alert",35),t.NdJ("nzOnClose",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.uploadError=!1)}),t.qZA()}}function X(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nz-alert",36),t.NdJ("nzOnClose",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.updateSuccess=!1)}),t.qZA()}}function tt(i,o){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"cvc-avatar-uploader",37),t.NdJ("uploadComplete",function(r){t.CHM(e);const u=t.oxw(2);return t.KtG(u.profileUploadComplete(r))}),t.qZA(),t.BQk()}}function c(i,o){if(1&i&&(t.TgZ(0,"a",39),t._UZ(1,"i",40),t.qZA()),2&i){const e=t.oxw(2).ngIf;t.MGl("href","http://twitter.com/",e.twitterHandle,"",t.LSH)}}function p(i,o){1&i&&(t.ynx(0),t.YNc(1,c,2,1,"a",38),t.BQk())}function g(i,o){if(1&i&&(t.TgZ(0,"a",39),t._UZ(1,"i",41),t.qZA()),2&i){const e=t.oxw(2).ngIf;t.MGl("href","http://facebook.com/",e.facebookProfile,"",t.LSH)}}function v(i,o){1&i&&(t.ynx(0),t.YNc(1,g,2,1,"a",38),t.BQk())}function h(i,o){if(1&i&&(t.TgZ(0,"a",39),t._UZ(1,"i",42),t.qZA()),2&i){const e=t.oxw(2).ngIf;t.MGl("href","http://linkedin.com/in/",e.linkedinProfile,"",t.LSH)}}function M(i,o){1&i&&(t.ynx(0),t.YNc(1,h,2,1,"a",38),t.BQk())}function fn(i,o){if(1&i&&(t.TgZ(0,"a",39)(1,"span"),t._uU(2,"ID"),t.qZA()()),2&i){const e=t.oxw(2).ngIf;t.MGl("href","https://orcid.org/",e.orcid,"",t.LSH)}}function hn(i,o){1&i&&(t.ynx(0),t.YNc(1,fn,3,1,"a",38),t.BQk())}function Cn(i,o){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",43),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.updateProfileModalVisible=!0)}),t._uU(2," Edit Profile "),t.qZA(),t.BQk()}}function zn(i,o){if(1&i&&(t.YNc(0,Cn,3,0,"ng-container",0),t.ALo(1,"ngrxPush")),2&i){const e=t.oxw(2);t.Q6J("ngIf",t.lcZ(1,1,e.ownProfile$))}}function vn(i,o){if(1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"enumToTitle"),t.BQk()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.areaOfExpertise)," ")}}function Tn(i,o){1&i&&(t.ynx(0),t.TgZ(1,"span",44)(2,"i"),t._uU(3,"Unspecified"),t.qZA()(),t.BQk())}function xn(i,o){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.hij(" ",e.country.name," ")}}function bn(i,o){1&i&&(t.ynx(0),t.TgZ(1,"span",44)(2,"i"),t._uU(3,"Unspecified"),t.qZA()(),t.BQk())}function Un(i,o){1&i&&t._UZ(0,"cvc-organization-tag",46),2&i&&t.Q6J("org",o.$implicit)}function Mn(i,o){if(1&i&&(t.ynx(0),t.YNc(1,Un,1,1,"cvc-organization-tag",45),t.BQk()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",e.organizations)}}function yn(i,o){1&i&&(t.ynx(0),t.TgZ(1,"span",44)(2,"i"),t._uU(3,"User is not a member of any Organizations."),t.qZA()(),t.BQk())}function Zn(i,o){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.hij(" ",e.bio," ")}}function An(i,o){1&i&&(t.ynx(0),t.TgZ(1,"span",44)(2,"i"),t._uU(3,"User has not provided a bio."),t.qZA()(),t.BQk())}function On(i,o){1&i&&t._uU(0," Editor Conflict of Interest Statement ")}function Pn(i,o){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",50),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(4);return t.KtG(r.updateCoiModalVisible=!0)}),t._uU(2," Update COI "),t.qZA(),t.BQk()}}function Nn(i,o){if(1&i&&(t.YNc(0,Pn,3,0,"ng-container",0),t.ALo(1,"ngrxPush")),2&i){const e=t.oxw(3);t.Q6J("ngIf",t.lcZ(1,1,e.ownProfile$))}}function Sn(i,o){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw(3).ngIf;t.xp6(1),t.hij(" ",e.mostRecentConflictOfInterestStatement.coiStatement," ")}}function In(i,o){1&i&&t._uU(0," I do not have any potential conflicts of interest. ")}function Jn(i,o){if(1&i&&(t.ynx(0),t.TgZ(1,"nz-descriptions-item",51),t._uU(2),t.ALo(3,"enumToTitle"),t.qZA(),t.TgZ(4,"nz-descriptions-item",52),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"nz-descriptions-item",53),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"nz-descriptions-item",54),t.YNc(11,Sn,2,1,"ng-container",55),t.YNc(12,In,1,0,"ng-template",null,56,t.W1O),t.qZA(),t.BQk()),2&i){const e=t.MAs(13),l=t.oxw(2).ngIf;t.xp6(1),t.Q6J("nzSpan",1),t.xp6(1),t.hij(" ",t.lcZ(3,9,l.mostRecentConflictOfInterestStatement.coiStatus)," "),t.xp6(2),t.Q6J("nzSpan",1),t.xp6(1),t.hij(" ",t.xi3(6,11,l.mostRecentConflictOfInterestStatement.createdAt,"shortDate")," "),t.xp6(2),t.Q6J("nzSpan",1),t.xp6(1),t.hij(" ",t.xi3(9,14,l.mostRecentConflictOfInterestStatement.expiresAt,"shortDate")," "),t.xp6(2),t.Q6J("nzSpan",3),t.xp6(1),t.Q6J("ngIf",l.mostRecentConflictOfInterestStatement.coiPresent)("ngIfElse",e)}}function Qn(i,o){1&i&&(t.ynx(0),t.TgZ(1,"nz-descriptions-item",51),t._uU(2,"None on file."),t.qZA(),t.BQk()),2&i&&(t.xp6(1),t.Q6J("nzSpan",3))}function En(i,o){if(1&i&&(t.TgZ(0,"nz-descriptions",47),t.YNc(1,On,1,0,"ng-template",null,48,t.W1O),t.YNc(3,Nn,2,3,"ng-template",null,49,t.W1O),t.YNc(5,Jn,14,17,"ng-container",0),t.YNc(6,Qn,3,1,"ng-container",0),t.qZA()),2&i){const e=t.MAs(2),l=t.MAs(4),r=t.oxw().ngIf;t.Q6J("nzTitle",e)("nzExtra",l)("nzColumn",3),t.xp6(5),t.Q6J("ngIf",r.mostRecentConflictOfInterestStatement),t.xp6(1),t.Q6J("ngIf",!r.mostRecentConflictOfInterestStatement)}}function wn(i,o){1&i&&(t.TgZ(0,"span"),t._uU(1,"Edit Profile"),t.qZA())}function Dn(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"cvc-user-profile-form",57),t.NdJ("profileUpdatedEvent",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.profileUpdated())}),t.qZA()}if(2&i){const e=t.oxw().ngIf;t.Q6J("user",e)}}function Ln(i,o){if(1&i){const e=t.EpF();t.ynx(0),t._UZ(1,"cvc-section-navigation",4),t.TgZ(2,"nz-page-header",5)(3,"nz-page-header-content"),t.YNc(4,gn,1,0,"nz-alert",6),t.YNc(5,X,1,0,"nz-alert",7),t.TgZ(6,"div",8)(7,"nz-row",9)(8,"nz-col",10)(9,"div",11),t._UZ(10,"cvc-user-avatar",12),t.qZA(),t.TgZ(11,"div",13)(12,"span",14)(13,"strong"),t._uU(14),t.qZA()(),t.YNc(15,tt,2,0,"ng-container",0),t.ALo(16,"ngrxPush"),t.qZA(),t.TgZ(17,"div",15)(18,"nz-space",16),t.YNc(19,p,2,0,"ng-container",0),t.YNc(20,v,2,0,"ng-container",0),t.YNc(21,M,2,0,"ng-container",0),t.YNc(22,hn,2,0,"ng-container",0),t.qZA()()(),t.TgZ(23,"nz-col",10)(24,"nz-card",17),t.YNc(25,zn,2,3,"ng-template",null,18,t.W1O),t.TgZ(27,"nz-descriptions",19)(28,"nz-descriptions-item",20),t._uU(29),t.qZA(),t.TgZ(30,"nz-descriptions-item",21),t._uU(31),t.qZA(),t.TgZ(32,"nz-descriptions-item",22),t._uU(33),t.ALo(34,"enumToTitle"),t.qZA(),t.TgZ(35,"nz-descriptions-item",23),t.YNc(36,vn,3,3,"ng-container",0),t.YNc(37,Tn,4,0,"ng-container",0),t.qZA(),t.TgZ(38,"nz-descriptions-item",24),t.YNc(39,xn,2,1,"ng-container",0),t.YNc(40,bn,4,0,"ng-container",0),t.qZA(),t.TgZ(41,"nz-descriptions-item",25),t.YNc(42,Mn,2,1,"ng-container",0),t.YNc(43,yn,4,0,"ng-container",0),t.qZA()(),t.TgZ(44,"nz-descriptions",26)(45,"nz-descriptions-item",27),t.YNc(46,Zn,2,1,"ng-container",0),t.YNc(47,An,4,0,"ng-container",0),t.qZA()(),t.YNc(48,En,7,5,"nz-descriptions",28),t.qZA()(),t.TgZ(49,"nz-col",10)(50,"nz-card",29),t._UZ(51,"cvc-stats-card",30),t.qZA()()()(),t._UZ(52,"cvc-tab-navigation",31),t.ALo(53,"ngrxPush"),t.TgZ(54,"div",32),t._UZ(55,"router-outlet"),t.qZA()()(),t.TgZ(56,"nz-modal",1),t.NdJ("nzVisibleChange",function(r){t.CHM(e);const u=t.oxw();return t.KtG(u.updateProfileModalVisible=r)})("nzOnCancel",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.handleProfileModalCancel())}),t.YNc(57,wn,2,0,"ng-template",null,33,t.W1O),t.YNc(59,Dn,1,1,"ng-template",null,34,t.W1O),t.qZA(),t.BQk()}if(2&i){const e=o.ngIf,l=t.MAs(26),r=t.MAs(58),u=t.MAs(60),w=t.oxw();t.xp6(1),t.Q6J("displayName",e.displayName),t.xp6(3),t.Q6J("ngIf",w.uploadError),t.xp6(1),t.Q6J("ngIf",w.updateSuccess),t.xp6(2),t.Q6J("nzGutter",16),t.xp6(1),t.Q6J("nzSpan",3),t.xp6(2),t.Q6J("user",e)("size",128),t.xp6(4),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",t.lcZ(16,42,w.ownProfile$)),t.xp6(4),t.Q6J("ngIf",e.twitterHandle),t.xp6(1),t.Q6J("ngIf",e.facebookProfile),t.xp6(1),t.Q6J("ngIf",e.linkedinProfile),t.xp6(1),t.Q6J("ngIf",e.orcid),t.xp6(1),t.Q6J("nzSpan",13),t.xp6(1),t.Q6J("nzExtra",l),t.xp6(3),t.Q6J("nzColumn",7),t.xp6(1),t.Q6J("nzSpan",2),t.xp6(1),t.hij(" ",e.name," "),t.xp6(1),t.Q6J("nzSpan",2),t.xp6(1),t.hij(" ",e.username," "),t.xp6(1),t.Q6J("nzSpan",1),t.xp6(1),t.hij(" ",t.lcZ(34,44,e.role)," "),t.xp6(2),t.Q6J("nzSpan",2),t.xp6(1),t.Q6J("ngIf",e.areaOfExpertise),t.xp6(1),t.Q6J("ngIf",!e.areaOfExpertise),t.xp6(1),t.Q6J("nzSpan",2),t.xp6(1),t.Q6J("ngIf",e.country),t.xp6(1),t.Q6J("ngIf",!e.country),t.xp6(1),t.Q6J("nzSpan",5),t.xp6(1),t.Q6J("ngIf",e.organizations.length>0),t.xp6(1),t.Q6J("ngIf",0===e.organizations.length),t.xp6(2),t.Q6J("nzSpan",4),t.xp6(1),t.Q6J("ngIf",e.bio),t.xp6(1),t.Q6J("ngIf",!e.bio),t.xp6(1),t.Q6J("ngIf","EDITOR"===e.role||"ADMIN"===e.role),t.xp6(1),t.Q6J("nzSpan",8),t.xp6(2),t.Q6J("stats",e.statsHash),t.xp6(1),t.Q6J("tabs",t.lcZ(53,46,w.tabs$)),t.xp6(4),t.Q6J("nzVisible",w.updateProfileModalVisible)("nzContent",u)("nzTitle",r)("nzFooter",null)}}function Fn(i,o){1&i&&(t.TgZ(0,"span"),t._uU(1,"Update your Conflict of Interest Statement"),t.qZA())}function kn(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"cvc-user-coi-form",58),t.NdJ("coiUpdatedEvent",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.coiUpdated())}),t.qZA()}}class vt{constructor(o,e,l){this.gql=o,this.viewerService=e,this.route=l,this.ownProfile$=new yt.X(!1),this.uploadError=!1,this.updateSuccess=!1,this.updateCoiModalVisible=!1,this.updateProfileModalVisible=!1,this.defaultTabs=[{routeName:"activity",tabLabel:"Activity",iconName:"civic-event"},{routeName:"evidence",tabLabel:"Evidence Items",iconName:"civic-evidence"},{routeName:"assertions",tabLabel:"Assertions",iconName:"civic-assertion"},{routeName:"source-suggestions",tabLabel:"Source Suggestions",iconName:"file-add"}],this.tabs$=new yt.X(this.defaultTabs),this.routeSub=this.route.params.subscribe(r=>{this.queryRef=this.gql.watch({userId:+r.userId});let u=this.queryRef.valueChanges;this.loading$=u.pipe((0,Mt.j)("loading"),(0,Tt.O)(!0)),this.user$=u.pipe((0,Mt.j)("data","user")),this.viewerSub=this.viewerService.viewer$.subscribe(w=>{w.id===+r.userId&&(this.tabs$.next([...this.defaultTabs,{routeName:"notifications",tabLabel:"Notifications",iconName:"bell"}]),this.ownProfile$.next(!0))})})}ngOnDestroy(){this.routeSub.unsubscribe(),this.viewerSub?.unsubscribe()}profileUploadComplete(o){o?(this.queryRef?.refetch(),this.updateSuccess=!0):this.uploadError=!0}coiUpdated(){this.updateCoiModalVisible=!1,this.queryRef?.refetch()}profileUpdated(){this.updateProfileModalVisible=!1,this.queryRef?.refetch()}handleCoiModalCancel(){this.updateCoiModalVisible=!1}handleProfileModalCancel(){this.updateProfileModalVisible=!1}}vt.\u0275fac=function(o){return new(o||vt)(t.Y36(T.sLD),t.Y36(Xt.a),t.Y36(C.gz))},vt.\u0275cmp=t.Xpm({type:vt,selectors:[["users-detail"]],decls:7,vars:7,consts:[[4,"ngIf"],[3,"nzVisible","nzContent","nzTitle","nzFooter","nzVisibleChange","nzOnCancel"],["coiModalTitle",""],["coiModalContent",""],[3,"displayName"],[1,"site-page-header"],["nzType","error","nzCloseable","","nzMessage","There was an error updating your profile image.",3,"nzOnClose",4,"ngIf"],["nzType","success","nzCloseable","","nzMessage","Profile image successfully updated.",3,"nzOnClose",4,"ngIf"],[1,"profile-content"],[3,"nzGutter"],[3,"nzSpan"],[1,"user-avatar"],[3,"user","size"],[1,"user-name"],["nz-typography",""],[1,"user-socials"],["nzAlign","center"],["nzTitle","Profile","nzSize","small",1,"user-profile",3,"nzExtra"],["updateProfile",""],["nzBordered","","nzLayout","vertical","nzSize","small",3,"nzColumn"],["nzTitle","Name",3,"nzSpan"],["nzTitle","User Name",3,"nzSpan"],["nzTitle","Role",3,"nzSpan"],["nzTitle","Area of Expertise",3,"nzSpan"],["nzTitle","Country",3,"nzSpan"],["nzTitle","Organizations",3,"nzSpan"],["nzBordered","","nzLayout","vertical","nzSize","small",1,"user-bio"],["nzTitle","Bio",3,"nzSpan"],["nzBordered","","class","user-coi","nzSize","small",3,"nzTitle","nzExtra","nzColumn",4,"ngIf"],["nzSize","small","nzTitle","Curation Stats"],["header","User Statistics",3,"stats"],[3,"tabs"],[1,"content"],["profileModalTitle",""],["profileModalContent",""],["nzType","error","nzCloseable","","nzMessage","There was an error updating your profile image.",3,"nzOnClose"],["nzType","success","nzCloseable","","nzMessage","Profile image successfully updated.",3,"nzOnClose"],[3,"uploadComplete"],["target","_blank",3,"href",4,"nzSpaceItem"],["target","_blank",3,"href"],["nz-icon","","nzType","twitter","nzTheme","outline"],["nz-icon","","nzType","facebook","nzTheme","outline"],["nz-icon","","nzType","linkedin","nzTheme","outline"],["nz-button","","nzSize","small","nzType","link",3,"click"],["nz-typography","","nzType","secondary"],[3,"org",4,"ngFor","ngForOf"],[3,"org"],["nzBordered","","nzSize","small",1,"user-coi",3,"nzTitle","nzExtra","nzColumn"],["coiTitle",""],["updateCoi",""],["nz-button","","nzType","link","nzSize","small",3,"click"],["nzTitle","Status",3,"nzSpan"],["nzTitle","Updated",3,"nzSpan"],["nzTitle","Expires",3,"nzSpan"],["nzTitle","Statement",3,"nzSpan"],[4,"ngIf","ngIfElse"],["noStatement",""],[3,"user","profileUpdatedEvent"],[3,"coiUpdatedEvent"]],template:function(o,e){if(1&o&&(t.YNc(0,Ln,61,48,"ng-container",0),t.ALo(1,"ngrxPush"),t.TgZ(2,"nz-modal",1),t.NdJ("nzVisibleChange",function(r){return e.updateCoiModalVisible=r})("nzOnCancel",function(){return e.handleCoiModalCancel()}),t.YNc(3,Fn,2,0,"ng-template",null,2,t.W1O),t.YNc(5,kn,1,0,"ng-template",null,3,t.W1O),t.qZA()),2&o){const l=t.MAs(4),r=t.MAs(6);t.Q6J("ngIf",t.lcZ(1,5,e.user$)),t.xp6(2),t.Q6J("nzVisible",e.updateCoiModalVisible)("nzContent",r)("nzTitle",l)("nzFooter",null)}},dependencies:[s.sg,s.O5,C.lC,Q.r,y.t3,y.SK,n.$O,n.u5,b.NU,b.$1,Y.R7,Y.uj,I.bd,ct.du,D.Ls,Zt.ZU,Z.ix,gt.w,tn.t,S,sn.I,G.P,rn.L,rt,ln.m,cn.z,s.uU,O.fM,pn.I],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}[_nghost-%COMP%]     .user-profile .ant-card-body{padding:0;margin-top:1px}[_nghost-%COMP%]     .user-profile .ant-descriptions-view{border:none}[_nghost-%COMP%]     .user-profile nz-descriptions.is-editor .ant-descriptions-view{border-bottom:1px solid #f0f0f0}[_nghost-%COMP%]     .user-profile .user-bio .ant-descriptions-view{border-top:1px solid #f0f0f0}[_nghost-%COMP%]     .user-profile .user-coi .ant-descriptions-header{margin:0;padding:0 12px;border-top:1px solid #f0f0f0}[_nghost-%COMP%]     .user-profile .user-coi .ant-descriptions-header .ant-descriptions-title{padding:6px 0;font-weight:400;font-size:12px;font-weight:500}[_nghost-%COMP%]     .user-profile .user-coi .ant-descriptions-view{border-top:1px solid #f0f0f0}[_nghost-%COMP%]     .profile-content{margin-top:8px;margin-bottom:16px}[_nghost-%COMP%]     .content{margin-bottom:8px}[_nghost-%COMP%]     .user-avatar{text-align:center}[_nghost-%COMP%]     .user-socials{text-align:center}[_nghost-%COMP%]     .user-name{text-align:center;font-size:120%}"]});const Yn=[{path:"",component:vt,data:{breadcrumb:"DISPLAYNAME"},children:[{path:"",pathMatch:"full",redirectTo:"activity"},{path:"evidence",component:it,data:{breadcrumb:"Evidence"}},{path:"assertions",component:B,data:{breadcrumb:"Assertions"}},{path:"activity",component:ot,data:{breadcrumb:"Activity"}},{path:"source-suggestions",component:N,data:{breadcrumb:"Source Suggestions"}},{path:"notifications",component:E,data:{breadcrumb:"Notifications"}}]}];class _t{}_t.\u0275fac=function(o){return new(o||_t)},_t.\u0275mod=t.oAB({type:_t}),_t.\u0275inj=t.cJS({imports:[C.Bz.forChild(Yn),C.Bz]});class mt{}mt.\u0275fac=function(o){return new(o||mt)},mt.\u0275mod=t.oAB({type:mt}),mt.\u0275inj=t.cJS({imports:[s.ez,C.Bz,_t,O._N,O.pP,Q.L,y.Jb,n.KJ,b.zf,Y.q6,I.vh,et.S,ct.Qp,nt.A2,D.PV,Zt.ZJ,Z.sL,_.e,m,$.s,z.D,x.c,j.H,L,lt.L,f.C]})},3218:(Pt,k,a)=>{a.r(k),a.d(k,{UsersModule:()=>tt});var W,s=a(6895),z=a(9116),n=a(4650),C=a(5655),x=a(1102),b=a(3679),j=a(6616),Z=a(7044),D=a(6903),t=a(8823),L=a(8992),Y=a(655),lt=a(3154),y=a(7630),$=a(9933),O=a(1135),I=a(7579),nt=a(3240),et=a(1884),ct=a(2529),J=a(5684),Q=a(9300),R=a(4004),ft=a(8372),ht=a(1365),U=a(6579),d=a(4006),m=a(1971),_=a(8231),f=a(6675),K=a(6672),B=a(7570),T=a(5851),Nt=a(7451),ot=a(2166),St=a(3388),it=a(3667),Ct=a(9947),pt=a(392),A=a(125),P=a(2635),Tt=a(2338),xt=a(5083);function gt(c,p){}function bt(c,p){if(1&c&&(n.ynx(0),n.TgZ(1,"nz-card",5),n.YNc(2,gt,0,0,"ng-template",6),n.qZA(),n.BQk()),2&c){n.oxw();const g=n.MAs(6),v=n.MAs(8),h=n.MAs(4);n.xp6(1),n.Q6J("nzTitle",g)("nzExtra",v),n.xp6(1),n.Q6J("ngTemplateOutlet",h)}}function It(c,p){}const Ut=function(c){return{height:c}};function Jt(c,p){if(1&c&&(n.TgZ(0,"div",7)(1,"nz-card",8),n.YNc(2,It,0,0,"ng-template",6),n.qZA()()),2&c){const g=n.oxw(),v=n.MAs(6),h=n.MAs(8),M=n.MAs(4);n.Q6J("ngStyle",n.VKq(4,Ut,g.cvcHeight)),n.xp6(1),n.Q6J("nzTitle",v)("nzExtra",h),n.xp6(1),n.Q6J("ngTemplateOutlet",M)}}function Qt(c,p){if(1&c&&(n.ynx(0),n._uU(1),n.BQk()),2&c){const g=n.oxw().$implicit;n.xp6(1),n.hij(" ",g.name," ")}}function Et(c,p){1&c&&(n.TgZ(0,"i",39),n._uU(1,"Not specified"),n.qZA())}function wt(c,p){if(1&c&&(n.TgZ(0,"div"),n._UZ(1,"cvc-tag-overflow",40),n.qZA()),2&c){const g=n.oxw().$implicit,v=n.oxw(2);n.xp6(1),n.Q6J("maxDisplayCount",1)("tags",g.organizations)("matchingText",v.orgNameInput)}}function Dt(c,p){1&c&&(n.TgZ(0,"i",39),n._uU(1,"None specified"),n.qZA())}function Lt(c,p){if(1&c&&(n.ynx(0),n._uU(1),n.ALo(2,"timeAgo"),n.BQk()),2&c){const g=n.oxw().$implicit;n.xp6(1),n.hij(" ",n.lcZ(2,1,g.mostRecentActionTimestamp)," ")}}function Ft(c,p){1&c&&n._uU(0," -- ")}function kt(c,p){if(1&c&&(n.TgZ(0,"tr",31)(1,"td",23),n._UZ(2,"cvc-user-tag",32),n.qZA(),n.TgZ(3,"td",33),n.YNc(4,Qt,2,1,"ng-container",0),n.YNc(5,Et,2,0,"ng-template",null,34,n.W1O),n.qZA(),n.TgZ(7,"td"),n.YNc(8,wt,2,3,"div",0),n.YNc(9,Dt,2,0,"ng-template",null,35,n.W1O),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.ALo(13,"enumToTitle"),n.qZA(),n.TgZ(14,"td",36),n.YNc(15,Lt,3,3,"ng-container",0),n.YNc(16,Ft,1,0,"ng-template",null,37,n.W1O),n.qZA(),n.TgZ(18,"td",38),n._uU(19),n.qZA(),n.TgZ(20,"td",38),n._uU(21),n.qZA()()),2&c){const g=p.$implicit,v=n.MAs(6),h=n.MAs(10),M=n.MAs(17);n.xp6(2),n.Q6J("user",g),n.xp6(2),n.Q6J("ngIf",g.name)("ngIfElse",v),n.xp6(4),n.Q6J("ngIf",g.organizations.length>0)("ngIfElse",h),n.xp6(4),n.hij(" ",n.lcZ(13,10,g.role)," "),n.xp6(3),n.Q6J("ngIf",g.mostRecentActionTimestamp)("ngIfElse",M),n.xp6(4),n.hij(" ",g.statsHash.submittedEvidenceItems," "),n.xp6(2),n.hij(" ",g.statsHash.revisions," ")}}const Yt=function(){return[]},$t=function(){return{x:"680px",y:"800px"}};function Rt(c,p){if(1&c){const g=n.EpF();n.TgZ(0,"nz-table",9,10),n.NdJ("cvcTableScrollOnScroll",function(h){n.CHM(g);const M=n.oxw();return n.KtG(M.scrollEvent$.next(h))}),n.ALo(2,"ngrxPush"),n.ALo(3,"ngrxPush"),n.ALo(4,"ngrxPush"),n.ALo(5,"ngrxPush"),n.TgZ(6,"thead",11),n.NdJ("nzSortOrderChange",function(h){n.CHM(g);const M=n.oxw();return n.KtG(M.sortChange$.next(h))}),n.TgZ(7,"tr",12)(8,"th",13),n._uU(9," User "),n.qZA(),n.TgZ(10,"th",14),n._uU(11," Name "),n.qZA(),n.TgZ(12,"th",15),n._uU(13,"Organizations"),n.qZA(),n.TgZ(14,"th",16),n._uU(15," Role "),n.qZA(),n.TgZ(16,"th",17),n._uU(17," Last Action "),n.qZA(),n.TgZ(18,"th",18),n._UZ(19,"i",19),n._uU(20," Count "),n.qZA(),n.TgZ(21,"th",20),n._UZ(22,"i",21),n._uU(23," Count "),n.qZA()(),n.TgZ(24,"tr",22),n._UZ(25,"th",23),n.TgZ(26,"th")(27,"cvc-clearable-input-filter",24),n.NdJ("inputModelChange",function(h){n.CHM(g);const M=n.oxw();return n.KtG(M.nameInput=h)})("inputModelChange",function(){n.CHM(g);const h=n.oxw();return n.KtG(h.filterChange$.next())}),n.qZA()(),n.TgZ(28,"th")(29,"cvc-clearable-input-filter",24),n.NdJ("inputModelChange",function(h){n.CHM(g);const M=n.oxw();return n.KtG(M.orgNameInput=h)})("inputModelChange",function(){n.CHM(g);const h=n.oxw();return n.KtG(h.filterChange$.next())}),n.qZA()(),n.TgZ(30,"th")(31,"nz-select",25),n.NdJ("ngModelChange",function(){n.CHM(g);const h=n.oxw();return n.KtG(h.filterChange$.next())})("ngModelChange",function(h){n.CHM(g);const M=n.oxw();return n.KtG(M.roleInput=h)}),n._UZ(32,"nz-option",26)(33,"nz-option",27)(34,"nz-option",28),n.qZA()(),n._UZ(35,"th")(36,"th",29)(37,"th",29),n.qZA()(),n.TgZ(38,"tbody"),n.YNc(39,kt,22,12,"ng-template",30),n.qZA()()}if(2&c){const g=n.oxw();n.Q6J("nzData",n.lcZ(2,21,g.row$)||n.DdM(29,Yt))("nzLoading",!n.lcZ(3,23,g.row$))("cvcAutoHeightTable",25)("nzVirtualItemSize",29)("cvcTableScrollQueryRef",g.queryRef)("cvcTableScrollPageInfo",n.lcZ(4,25,g.pageInfo$))("cvcTableScrollToIndex",n.lcZ(5,27,g.scrollIndex$))("nzVirtualForTrackBy",g.trackByIndex)("nzScroll",n.DdM(30,$t))("nzFrontPagination",!1)("nzShowPagination",!1),n.xp6(10),n.Q6J("nzColumnKey",g.sortColumns.Name)("nzSortFn",!0),n.xp6(4),n.Q6J("nzColumnKey",g.sortColumns.Role)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",g.sortColumns.LastAction)("nzSortFn",!0),n.xp6(11),n.Q6J("inputModel",g.nameInput),n.xp6(2),n.Q6J("inputModel",g.orgNameInput),n.xp6(2),n.Q6J("nzDropdownMatchSelectWidth",!1)("ngModel",g.roleInput)}}function Bt(c,p){}function Ht(c,p){if(1&c&&(n.ynx(0),n.YNc(1,Bt,0,0,"ng-template",6),n.BQk()),2&c){const g=n.oxw(2);n.xp6(1),n.Q6J("ngTemplateOutlet",g.cvcTitleTemplate)}}function jt(c,p){if(1&c&&(n.ynx(0),n._uU(1),n.BQk()),2&c){const g=n.oxw(2);n.xp6(1),n.hij(" ",g.cvcTitle," ")}}function Kt(c,p){if(1&c&&(n.YNc(0,Ht,2,1,"ng-container",41),n.YNc(1,jt,2,1,"ng-container",41),n.TgZ(2,"span",42),n._UZ(3,"cvc-table-counts",43),n.qZA()),2&c){const g=n.oxw();n.Q6J("ngIf",g.cvcTitleTemplate),n.xp6(1),n.Q6J("ngIf",g.cvcTitle),n.xp6(2),n.Q6J("cvcTableCountsConnection",g.connection$)}}function Wt(c,p){1&c&&(n.TgZ(0,"nz-tag",46),n._UZ(1,"i",47),n.TgZ(2,"span"),n._uU(3,"Loading\u2026"),n.qZA()())}function Vt(c,p){if(1&c&&(n.YNc(0,Wt,4,0,"nz-tag",44),n.ALo(1,"ngrxPush"),n._UZ(2,"cvc-no-more-rows",45),n.ALo(3,"ngrxPush")),2&c){const g=n.oxw();n.Q6J("ngIf",n.lcZ(1,2,g.moreLoading$)),n.xp6(2),n.Q6J("cvcShowTag",n.lcZ(3,4,g.noMoreRows$))}}let zt=((W=class{set initialUserFilters(p){p&&Object.assign(this,p)}constructor(p,g){this.gql=p,this.cdr=g,this.initialPageSize=35,this.isScrolling=!1,this.sortColumns=y.IRu,this.noMoreRows$=new O.X(!1),this.scrollEvent$=new O.X("stop"),this.sortChange$=new I.x,this.filterChange$=new I.x,this.scrollIndex$=new I.x}ngOnInit(){this.queryRef=this.gql.watch({first:this.initialPageSize,sortBy:{column:y.IRu.LastAction,direction:y.SrV.Desc}}),this.result$=this.queryRef.valueChanges,this.initialLoading$=this.result$.pipe((0,U.j)("loading"),(0,et.x)(),(0,ct.o)(p=>!1!==p,!0)),this.moreLoading$=this.result$.pipe((0,U.j)("loading"),(0,et.x)(),(0,J.T)(2)),this.connection$=this.result$.pipe((0,U.j)("data","users"),(0,Q.h)(nt.ep)),this.row$=this.connection$.pipe((0,U.j)("edges"),(0,Q.h)(nt.ep),(0,R.U)(p=>p.map(g=>g.node))),this.pageInfo$=this.connection$.pipe((0,U.j)("pageInfo"),(0,Q.h)(nt.ep)),this.sortChange$.pipe((0,$.t)(this)).subscribe(p=>{this.queryRef.refetch({sortBy:(0,lt._)(p)})}),this.filterChange$.pipe((0,ft.b)(500),(0,$.t)(this)).subscribe(()=>{this.refresh()}),this.scrollEvent$.pipe((0,R.U)(p=>"stop"!==p),(0,et.x)(),(0,$.t)(this)).subscribe(p=>{this.isScrolling=p,this.cdr.detectChanges()}),this.scrollEvent$.pipe((0,Q.h)(p=>"bottom"===p),(0,ht.M)(this.pageInfo$),(0,R.U)(([p,g])=>g),(0,$.t)(this)).subscribe(p=>{p.hasNextPage||(this.noMoreRows$.next(!0),this.cdr.detectChanges(),setInterval(()=>this.noMoreRows$.next(!1)))})}refresh(){this.queryRef.refetch({userName:this.nameInput?this.nameInput:void 0,orgName:this.orgNameInput?{name:this.orgNameInput}:void 0,userRole:this.roleInput?this.roleInput:void 0}).then(()=>this.scrollIndex$.next(0)),this.cdr.detectChanges()}trackByIndex(p,g){return g?.id}}).\u0275fac=function(p){return new(p||W)(n.Y36(y.tJ6),n.Y36(n.sBO))},W.\u0275cmp=n.Xpm({type:W,selectors:[["cvc-users-table"]],inputs:{cvcHeight:"cvcHeight",cvcTitleTemplate:"cvcTitleTemplate",cvcTitle:"cvcTitle",initialPageSize:"initialPageSize",initialUserFilters:"initialUserFilters"},decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["setHeightCard",""],["table",""],["titleTemplate",""],["extraTemplate",""],["nzSize","small","cvcAutoHeightCard","","cvcAutoHeightTarget","viewport",3,"nzTitle","nzExtra"],[3,"ngTemplateOutlet"],[1,"card-container",3,"ngStyle"],["cvcAutoHeightCard","","nzSize","small",3,"nzTitle","nzExtra"],["nzSize","small","cvcTableScroll","",3,"nzData","nzLoading","cvcAutoHeightTable","nzVirtualItemSize","cvcTableScrollQueryRef","cvcTableScrollPageInfo","cvcTableScrollToIndex","nzVirtualForTrackBy","nzScroll","nzFrontPagination","nzShowPagination","cvcTableScrollOnScroll"],["virtualTable",""],[3,"nzSortOrderChange"],[1,"col-header-row"],["nzWidth","200px","nzLeft",""],["nzWidth","150px",3,"nzColumnKey","nzSortFn"],["nzWidth","300px"],["nzWidth","80px",3,"nzColumnKey","nzSortFn"],["nzWidth","85px","nzAlign","right",3,"nzColumnKey","nzSortFn"],["nzWidth","75px","nzRight","","nzAlign","right","nz-tooltip","","nzTooltipTitle","Evidence Count"],["nz-icon","","nzType","civic-evidence"],["nzWidth","75px","nzRight","","nzAlign","right","nz-tooltip","","nzTooltipTitle","Revision Count"],["nz-icon","","nzType","civic-revision"],[1,"filter-row"],["nzLeft",""],[3,"inputModel","inputModelChange"],["nzAllowClear","","nzSize","small","nzPlaceHolder","Any",3,"nzDropdownMatchSelectWidth","ngModel","ngModelChange"],["nzValue","ADMIN","nzLabel","Admin"],["nzValue","CURATOR","nzLabel","Curator"],["nzValue","EDITOR","nzLabel","Editor"],["nzRight",""],["nz-virtual-scroll",""],[1,"data-row"],[3,"user"],[1,"overflow-ellipsis"],["nameElse",""],["orgElse",""],["nzAlign","right"],["eventElse",""],["nzRight","","nzAlign","right"],["nz-typography","","nzType","secondary"],["tagType","organization",3,"maxDisplayCount","tags","matchingText"],[4,"ngIf"],[1,"table-info"],[3,"cvcTableCountsConnection"],["nzColor","processing",4,"ngIf"],[3,"cvcShowTag"],["nzColor","processing"],["nz-icon","","nzType","sync","nzSpin",""]],template:function(p,g){if(1&p&&(n.YNc(0,bt,3,3,"ng-container",0),n.YNc(1,Jt,3,6,"ng-template",null,1,n.W1O),n.YNc(3,Rt,40,31,"ng-template",null,2,n.W1O),n.YNc(5,Kt,4,3,"ng-template",null,3,n.W1O),n.YNc(7,Vt,4,6,"ng-template",null,4,n.W1O)),2&p){const v=n.MAs(2);n.Q6J("ngIf",!g.cvcHeight)("ngIfElse",v)}},dependencies:[s.O5,s.tP,s.PC,d.JJ,d.On,Z.w,m.bd,x.Ls,_.Ip,_.Vq,f.N8,f.qD,f.Uo,f._C,f.Om,f.p0,f.$Z,f.zu,f.qn,f.UX,K.j,B.SY,t.ZU,T.D,Nt.q,ot.p,St.H,it.B,Ct.y,pt.T,A.I,P.fM,Tt.I,xt.x],styles:["nz-card[_ngcontent-%COMP%]:first-of-type     .ant-card-body{padding:0;margin-top:1px}.table-info[_ngcontent-%COMP%]{margin-left:.5rem}tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]{white-space:nowrap}tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell.align-right[_ngcontent-%COMP%]     .ant-table-column-title{text-align:right}tr.filter-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]{padding:3px 4px}tr.filter-row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   nz-filter-trigger[_ngcontent-%COMP%]     span.ant-dropdown-trigger{margin-left:0;padding-right:12px}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]{white-space:nowrap}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]   .anticon.attribute-icon[_ngcontent-%COMP%]{color:#595959}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell.overflow-ellipsis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell.button-cell[_ngcontent-%COMP%]{padding:0}tr.data-row[_ngcontent-%COMP%]   td.align-right[_ngcontent-%COMP%], tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%], tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%], tr.filter-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%]{text-align:right}[_nghost-%COMP%]{display:block}"]}),W);zt=(0,Y.gn)([(0,$.c)()],zt);var Gt=a(160);function dt(c,p){1&c&&(n.TgZ(0,"a",13),n._UZ(1,"i",14),n._uU(2," View Contributor Docs "),n.qZA())}class at{constructor(){}ngOnInit(){}}at.\u0275fac=function(p){return new(p||at)},at.\u0275cmp=n.Xpm({type:at,selectors:[["users-home"]],decls:19,vars:5,consts:[[1,"site-page-header"],[1,"header-content"],["nzFlex","64px",1,"header-icon"],["nz-icon","","nzTheme","twotone","nzType","civic-curator",3,"nzTwotoneColor"],["nzFlex","0 1 600px",1,"header-description"],["nz-typography","","nzEllipsis","","nzExpandable","",3,"nzEllipsisRows"],["nzFlex","auto",1,"header-links"],["nzDirection","vertical",1,"docs-buttons"],["nz-button","","href","https://civic.readthedocs.io/en/latest/using/users.html","target","_blank","nzSize","small","nzBlock","",4,"nzSpaceItem"],["nz-row",""],["nz-col","",3,"nzSpan"],[1,"content"],["cvcTitle","Browse All Contributors"],["nz-button","","href","https://civic.readthedocs.io/en/latest/using/users.html","target","_blank","nzSize","small","nzBlock",""],["nz-icon","","nzType","link","nzTheme","outline"]],template:function(p,g){1&p&&(n._UZ(0,"cvc-section-navigation"),n.TgZ(1,"nz-page-header",0)(2,"nz-page-header-content")(3,"nz-row",1)(4,"nz-col",2),n._UZ(5,"i",3),n.ALo(6,"entityColor"),n.qZA(),n.TgZ(7,"nz-col",4)(8,"h2"),n._uU(9,"Contributors"),n.qZA(),n.TgZ(10,"p",5),n._uU(11," CIViC depends on its users to add to its knowledgebase and curate its content. Anyone may join CIViC as a Curator and begin contributing. "),n.qZA()(),n.TgZ(12,"nz-col",6)(13,"nz-space",7),n.YNc(14,dt,3,0,"a",8),n.qZA()()(),n.TgZ(15,"div",9)(16,"div",10)(17,"div",11),n._UZ(18,"cvc-users-table",12),n.qZA()()()()()),2&p&&(n.xp6(5),n.Q6J("nzTwotoneColor",n.lcZ(6,3,"Curator")),n.xp6(5),n.Q6J("nzEllipsisRows",2),n.xp6(6),n.Q6J("nzSpan",24))},dependencies:[C.$O,C.u5,x.Ls,b.t3,b.SK,j.ix,Z.w,D.NU,D.$1,t.ZU,L.I,zt,Gt.a],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]});class E{constructor(){}}E.\u0275fac=function(p){return new(p||E)},E.\u0275cmp=n.Xpm({type:E,selectors:[["app-users"]],decls:1,vars:0,template:function(p,g){1&p&&n._UZ(0,"router-outlet")},dependencies:[z.lC],encapsulation:2});const qt=[{path:"",component:E,data:{displayName:"Contributors"},children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:at,data:{displayName:"Home"}},{path:":userId",data:{breadcrumb:"DISPLAYNAME"},children:[{path:"",loadChildren:()=>Promise.resolve().then(a.bind(a,7800)).then(c=>c.UsersDetailModule)}]}]}];class N{}N.\u0275fac=function(p){return new(p||N)},N.\u0275mod=n.oAB({type:N}),N.\u0275inj=n.cJS({imports:[z.Bz.forChild(qt),z.Bz]});var Mt=a(9476),yt=a(4125),Xt=a(4989),Zt=a(2994),tn=a(8525),H=a(897),At=a(7946),ut=a(9444),un=a(3111),_n=a(1433),mn=a(9240),Ot=a(7345);class st{}st.\u0275fac=function(p){return new(p||st)},st.\u0275mod=n.oAB({type:st}),st.\u0275inj=n.cJS({imports:[s.ez,d.u5,P._N,P.pP,j.sL,m.vh,x.PV,_.LV,f.HQ,K.X,B.cg,t.ZJ,un.n,_n.c,yt.k,Xt.X,Zt.y,Mt.L,ut.s,tn.T,mn.w,H.$,At.x,Ot.W]});var nn=a(5630);class F{}F.\u0275fac=function(p){return new(p||F)},F.\u0275mod=n.oAB({type:F}),F.\u0275inj=n.cJS({imports:[s.ez,C.KJ,x.PV,b.Jb,j.sL,D.zf,t.ZJ,nn.D,st,ut.s]});var en=a(9441);class V{}V.\u0275fac=function(p){return new(p||V)},V.\u0275mod=n.oAB({type:V}),V.\u0275inj=n.cJS({imports:[s.ez,x.PV,en.s]});var on=a(7800),an=a(5291);class S{}S.\u0275fac=function(p){return new(p||S)},S.\u0275mod=n.oAB({type:S}),S.\u0275inj=n.cJS({imports:[s.ez,an.t]});var sn=a(767);class G{}G.\u0275fac=function(p){return new(p||G)},G.\u0275mod=n.oAB({type:G}),G.\u0275inj=n.cJS({imports:[s.ez,sn.Q]});var rn=a(2832);class q{}q.\u0275fac=function(p){return new(p||q)},q.\u0275mod=n.oAB({type:q}),q.\u0275inj=n.cJS({imports:[s.ez,rn.W]});var rt=a(5681),ln=a(1150),cn=a(8213),pn=a(9790),gn=a(3212);class X{}X.\u0275fac=function(p){return new(p||X)},X.\u0275mod=n.oAB({type:X}),X.\u0275inj=n.cJS({imports:[s.ez,d.u5,P._N,P.pP,B.cg,rt.j,b.Jb,j.sL,m.vh,x.PV,cn.Wr,pn.FT,gn.E,ut.s,ln.N]});class tt{}tt.\u0275fac=function(p){return new(p||tt)},tt.\u0275mod=n.oAB({type:tt}),tt.\u0275inj=n.cJS({imports:[s.ez,z.Bz,P._N,P.pP,N,F,V,on.UsersDetailModule,S,G,q,X]})}}]);