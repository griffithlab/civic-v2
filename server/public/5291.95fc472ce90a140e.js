"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[5291],{2011:(D,T,_)=>{_.d(T,{o:()=>d});var e=_(712),g=_(4850),t=_(5e3);function m(i,c){if(1&i&&(t.ynx(0),t._UZ(1,"cvc-event-timeline",11),t.BQk()),2&i){const n=t.oxw().ngIf,o=t.oxw(3);t.xp6(1),t.Q6J("events",n)("tagDisplay",o.tagDisplay)}}function O(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"div",13),t.TgZ(1,"button",14),t.NdJ("click",function(){t.CHM(n);const l=t.oxw().ngIf;return t.oxw(4).fetchMore(l.endCursor)}),t._uU(2,"Load More "),t.qZA(),t.qZA()}}function M(i,c){if(1&i&&(t.ynx(0),t.YNc(1,O,3,0,"div",12),t.BQk()),2&i){const n=c.ngIf;t.xp6(1),t.Q6J("ngIf",n.hasNextPage)}}function u(i,c){if(1&i&&(t.ynx(0),t.TgZ(1,"nz-row",2),t.TgZ(2,"nz-col",10),t.YNc(3,m,2,2,"ng-container",0),t.YNc(4,M,2,1,"ng-container",9),t.ALo(5,"ngrxPush"),t.qZA(),t.qZA(),t.BQk()),2&i){const n=c.ngIf,o=t.oxw(3),l=t.MAs(3);t.xp6(1),t.Q6J("nzGutter",16),t.xp6(2),t.Q6J("ngIf",n.length)("ngIfElse",l),t.xp6(1),t.Q6J("ngIf",t.lcZ(5,4,o.pageInfo$))}}function E(i,c){if(1&i&&(t.TgZ(0,"nz-card",8),t.YNc(1,u,6,6,"ng-container",9),t.ALo(2,"ngrxPush"),t.qZA()),2&i){const n=t.oxw(2);t.Q6J("nzTitle",n.showFilters?"Events":void 0),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,n.events$))}}function f(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"span"),t._uU(1," Show Child Events "),t.TgZ(2,"nz-switch",16),t.NdJ("ngModelChange",function(l){return t.CHM(n),t.oxw(3).showChildren=l})("ngModelChange",function(){return t.CHM(n),t.oxw(3).onShowChildrenToggle()}),t.qZA(),t.qZA()}if(2&i){const n=t.oxw(3);t.xp6(2),t.Q6J("ngModel",n.showChildren)}}function P(i,c){1&i&&(t._uU(0),t.ALo(1,"eventVerbiage")),2&i&&t.hij(" ",t.xi3(1,1,c.$implicit.id,"action-filter")," ")}function I(i,c){if(1&i&&t._UZ(0,"nz-avatar",24),2&i){const n=t.oxw().$implicit;t.Q6J("nzSrc",n.profileImagePath)}}function h(i,c){if(1&i&&(t._UZ(0,"nz-avatar",25),t.ALo(1,"uppercase")),2&i){const n=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,n.displayName.charAt(0)))}}function z(i,c){if(1&i&&(t.YNc(0,I,1,1,"nz-avatar",22),t.YNc(1,h,2,3,"ng-template",null,23,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&i){const n=c.$implicit,o=t.MAs(2);t.Q6J("ngIf",n.profileImagePath)("ngIfElse",o),t.xp6(4),t.Oqu(n.displayName)}}function C(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"cvc-participant-list",21),t.NdJ("participantSelectedEvent",function(l){return t.CHM(n),t.oxw(4).onOriginatingUserSelected(l)}),t.ALo(1,"ngrxPush"),t.YNc(2,z,5,3,"ng-template",null,18,t.W1O),t.qZA()}if(2&i){const n=t.oxw(4);t.Q6J("participantList",t.lcZ(1,1,n.participants$))}}function L(i,c){if(1&i&&(t.TgZ(0,"nz-col"),t._uU(1),t.qZA()),2&i){const n=c.$implicit;t.xp6(1),t.hij(" ",n.name," ")}}function x(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"cvc-participant-list",26),t.NdJ("participantSelectedEvent",function(l){return t.CHM(n),t.oxw(4).onOrganizationSelected(l)}),t.ALo(1,"ngrxPush"),t.YNc(2,L,2,1,"ng-template",null,18,t.W1O),t.qZA()}if(2&i){const n=t.oxw(4);t.Q6J("participantList",t.lcZ(1,1,n.organizations$))}}function s(i,c){if(1&i){const n=t.EpF();t.ynx(0),t.TgZ(1,"cvc-participant-list",17),t.NdJ("participantSelectedEvent",function(l){return t.CHM(n),t.oxw(3).onActionSelected(l)}),t.ALo(2,"ngrxPush"),t.YNc(3,P,2,4,"ng-template",null,18,t.W1O),t.qZA(),t.YNc(5,C,4,3,"cvc-participant-list",19),t.YNc(6,x,4,3,"cvc-participant-list",20),t.BQk()}if(2&i){const n=t.oxw(3);t.xp6(1),t.Q6J("participantList",t.lcZ(2,3,n.actions$)),t.xp6(4),t.Q6J("ngIf",!n.userId),t.xp6(1),t.Q6J("ngIf",!n.organizationId)}}function p(i,c){1&i&&(t.TgZ(0,"nz-space",4),t.YNc(1,f,3,1,"span",15),t.YNc(2,s,7,5,"ng-container",15),t.qZA())}function a(i,c){if(1&i&&(t.ynx(0),t.TgZ(1,"nz-row",2),t.TgZ(2,"nz-col",3),t.TgZ(3,"nz-space",4),t.YNc(4,E,3,4,"nz-card",5),t.qZA(),t.qZA(),t.TgZ(5,"nz-col",6),t.YNc(6,p,3,0,"nz-space",7),t.qZA(),t.qZA(),t.BQk()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("nzGutter",16),t.xp6(1),t.Q6J("nzSpan",n.showFilters?"18":"24"),t.xp6(4),t.Q6J("ngIf",n.showFilters)}}function r(i,c){1&i&&t._UZ(0,"nz-empty",27)}let d=(()=>{class i{constructor(n){this.gql=n,this.tagDisplay="displayAll",this.mode=e.wJ2.Subject,this.showFilters=!0,this.pageSize=15,this.showChildren=!1}ngOnInit(){this.initialQueryVars={subject:this.subscribable,organizationId:this.organizationId,originatingUserId:this.userId,first:this.pageSize,mode:this.mode,showFilters:this.showFilters},this.queryRef=this.gql.watch(this.initialQueryVars),this.results$=this.queryRef.valueChanges,this.pageInfo$=this.results$.pipe((0,g.U)(({data:n})=>n.events.pageInfo)),this.events$=this.results$.pipe((0,g.U)(({data:n})=>n.events.edges.map(o=>o.node))),this.unfilteredCount$=this.results$.pipe((0,g.U)(({data:n})=>n.events.unfilteredCount)),this.showFilters&&(this.participants$=this.results$.pipe((0,g.U)(({data:n})=>n.events.uniqueParticipants)),this.organizations$=this.results$.pipe((0,g.U)(({data:n})=>n.events.participatingOrganizations)),this.actions$=this.results$.pipe((0,g.U)(({data:n})=>{var o,l;return(null===(l=null===(o=n.events)||void 0===o?void 0:o.eventTypes)||void 0===l?void 0:l.map(v=>({id:v})))||[]})))}fetchMore(n){this.queryRef.fetchMore({variables:{first:this.pageSize,after:n}})}onOrganizationSelected(n){this.queryRef.refetch({organizationId:null==n?void 0:n.id,showFilters:this.showFilters})}onActionSelected(n){this.queryRef.refetch({eventType:n?n.id:void 0,showFilters:this.showFilters})}onOriginatingUserSelected(n){this.queryRef.refetch({originatingUserId:null==n?void 0:n.id,showFilters:this.showFilters})}onShowChildrenToggle(){let n;this.subscribable?(n={id:this.subscribable.id,entityType:this.subscribable.entityType,includeChildren:this.showChildren},this.tagDisplay=this.showChildren?"displayAll":"hideSubject"):n=void 0,this.queryRef.refetch(Object.assign(Object.assign({},this.initialQueryVars),{subject:n,showFilters:this.showFilters}))}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(e.BTF))},i.\u0275cmp=t.Xpm({type:i,selectors:[["cvc-event-feed"]],inputs:{subscribable:"subscribable",subscribableName:"subscribableName",organizationId:"organizationId",userId:"userId",tagDisplay:"tagDisplay",mode:"mode",showFilters:"showFilters",pageSize:"pageSize"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noEvents",""],[3,"nzGutter"],[3,"nzSpan"],["nzDirection","vertical",2,"width","100%"],[3,"nzTitle",4,"nzSpaceItem"],["nzSpan","6"],["nzDirection","vertical","style","width: 100%",4,"ngIf"],[3,"nzTitle"],[4,"ngIf"],["nzSpan","24",1,"timeline"],[3,"events","tagDisplay"],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","default","nzSize","small","nzBlock","",3,"click"],[4,"nzSpaceItem"],["nzSize","small",3,"ngModel","ngModelChange"],["listTitle","Action",3,"participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Curator",3,"participantList","participantSelectedEvent",4,"ngIf"],["listTitle","Organization",3,"participantList","participantSelectedEvent",4,"ngIf"],["listTitle","Curator",3,"participantList","participantSelectedEvent"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["listTitle","Organization",3,"participantList","participantSelectedEvent"],["nzNotFoundImage","simple","nzNotFoundContent","No Events"]],template:function(n,o){if(1&n&&(t.YNc(0,a,7,3,"ng-container",0),t.ALo(1,"ngrxPush"),t.YNc(2,r,1,0,"ng-template",null,1,t.W1O)),2&n){const l=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,o.unfilteredCount$))("ngIfElse",l)}},styles:["[_nghost-%COMP%]{display:block}.timeline[_ngcontent-%COMP%]{padding-top:6px;padding-left:6px}#event-filters[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]:last-child{margin-right:0}#event-filters[_ngcontent-%COMP%]   #participant-filter[_ngcontent-%COMP%]{width:200px}#event-filters[_ngcontent-%COMP%]   #organization-filter[_ngcontent-%COMP%]{width:250px}"]}),i})()},5291:(D,T,_)=>{_.d(T,{t:()=>n});var e=_(9808),g=_(2011),t=_(6949),m=_(7484),O=_(647),M=_(4546),u=_(4182),E=_(6462),f=_(1894),P=_(8054),I=_(3884),h=_(6042),z=_(9444),C=_(8144),L=_(1150),x=_(6699),s=_(685),p=_(5e3),a=_(3227),r=_(2643),d=_(2683),i=_(8747),c=_(2937);let n=(()=>{class o{}return o.\u0275fac=function(v){return new(v||o)},o.\u0275mod=p.oAB({type:o}),o.\u0275inj=p.cJS({imports:[[e.ez,u.u5,t.WG,h.sL,m.vh,O.PV,M.U5,P.LV,E.m,f.Jb,C.zf,s.Xo,x.Rt,I.m,z.s,L.N,z.s]]}),o})();p.B6R(g.o,[e.O5,f.SK,f.t3,C.NU,C.$1,m.bd,a.r,h.ix,r.dQ,d.w,E.i,u.JJ,u.On,i.l,x.Dz,s.p9],[t.fM,c.R,e.gd])},8747:(D,T,_)=>{_.d(T,{l:()=>x});var e=_(5e3),g=_(9808),t=_(7484),m=_(3762),O=_(6042),M=_(2643),u=_(2683),E=_(647);const f=["itemTemplate"],P=function(s){return{$implicit:s}};function I(s,p){if(1&s){const a=e.EpF();e.TgZ(0,"nz-list-item",5),e.NdJ("click",function(){e.CHM(a);const d=e.oxw().$implicit;return e.oxw(2).onParticipantSelected(d)}),e.GkF(1,6),e.qZA()}if(2&s){const a=e.oxw().$implicit,r=e.oxw(2);e.ekj("selected-participant",a.id==(null==r.selectedItem?null:r.selectedItem.id)),e.xp6(1),e.Q6J("ngTemplateOutlet",r.itemTemplateRef||null)("ngTemplateOutletContext",e.VKq(4,P,a))}}function h(s,p){if(1&s&&(e.ynx(0),e.YNc(1,I,2,6,"nz-list-item",4),e.BQk()),2&s){const a=p.index,r=e.oxw(2);e.xp6(1),e.Q6J("ngIf",a+1<=r.defaultListSize)}}function z(s,p){if(1&s){const a=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){return e.CHM(a),e.oxw(2).onExpandClicked()}),e._UZ(1,"i",8),e._uU(2," Expand "),e.qZA()}}function C(s,p){if(1&s){const a=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){return e.CHM(a),e.oxw(2).onCollapseClicked()}),e._UZ(1,"i",9),e._uU(2," Collapse "),e.qZA()}}function L(s,p){if(1&s&&(e.ynx(0),e.TgZ(1,"nz-card",1),e.TgZ(2,"nz-list"),e.YNc(3,h,2,1,"ng-container",2),e.qZA(),e.YNc(4,z,3,0,"button",3),e.YNc(5,C,3,0,"button",3),e.qZA(),e.BQk()),2&s){const a=e.oxw();e.xp6(1),e.Q6J("nzTitle",a.listTitle),e.xp6(2),e.Q6J("ngForOf",a.participantList),e.xp6(1),e.Q6J("ngIf",a.participantList.length>a.defaultListSize),e.xp6(1),e.Q6J("ngIf",a.isExpanded)}}let x=(()=>{class s{constructor(){this.defaultListSize=5,this.participantSelectedEvent=new e.vpe,this.isExpanded=!1}ngOnInit(){this.preselectedOption&&(this.selectedItem=this.preselectedOption)}onParticipantSelected(a){var r;this.selectedItem=a.id==(null===(r=this.selectedItem)||void 0===r?void 0:r.id)?void 0:a,this.participantSelectedEvent.emit(this.selectedItem)}onExpandClicked(){this.originalDefaultListSize=this.defaultListSize,this.defaultListSize=this.participantList.length,this.isExpanded=!0}onCollapseClicked(){this.originalDefaultListSize&&(this.defaultListSize=this.originalDefaultListSize,this.isExpanded=!1)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["cvc-participant-list"]],contentQueries:function(a,r,d){if(1&a&&e.Suo(d,f,5),2&a){let i;e.iGM(i=e.CRH())&&(r.itemTemplateRef=i.first)}},inputs:{participantList:"participantList",listTitle:"listTitle",defaultListSize:"defaultListSize",preselectedOption:"preselectedOption"},outputs:{participantSelectedEvent:"participantSelectedEvent"},decls:1,vars:1,consts:[[4,"ngIf"],["nz-type","inner",2,"margin-bottom","1em",3,"nzTitle"],[4,"ngFor","ngForOf"],["nz-button","","nzType","default","nzSize","small",3,"click",4,"ngIf"],["nzSize","small","class","participant-list-item",3,"selected-participant","click",4,"ngIf"],["nzSize","small",1,"participant-list-item",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-button","","nzType","default","nzSize","small",3,"click"],["nz-icon","","nzType","vertical-align-bottom"],["nz-icon","","nzType","vertical-align-top"]],template:function(a,r){1&a&&e.YNc(0,L,6,4,"ng-container",0),2&a&&e.Q6J("ngIf",r.participantList&&r.participantList.length>0)},directives:[g.O5,t.bd,m.n_,g.sg,m.AA,g.tP,O.ix,M.dQ,u.w,E.Ls],styles:[".participant-list-item[_ngcontent-%COMP%]:hover{border:1px solid #40a9ff;cursor:pointer}.participant-list-item[_ngcontent-%COMP%]{padding:2px;margin:2px}.selected-participant[_ngcontent-%COMP%]{background:#40a9ff;color:#fff}"]}),s})()}}]);