"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[885],{5639:(Q,V,e)=>{e.d(V,{u:()=>y});var l=e(5e3),h=e(685),I=e(1912),n=e(3618),z=e(5017);function M(u,t){1&u&&(l.TgZ(0,"span"),l._uU(1," You must be logged in to view this page. "),l.qZA())}function v(u,t){1&u&&l._UZ(0,"cvc-login-button")}function g(u,t){1&u&&(l.TgZ(0,"nz-typography",4),l._UZ(1,"i",5),l.qZA())}let y=(()=>{class u{}return u.\u0275fac=function(x){return new(x||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["cvc-login-prompt"]],decls:7,vars:3,consts:[[3,"nzNotFoundImage","nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["emptyImage",""],["nzType","secondary"],["nz-icon","","nzType","login","nzTheme","outline",2,"font-size","50pt"]],template:function(x,F){if(1&x&&(l.TgZ(0,"nz-empty",0),l.YNc(1,M,2,0,"ng-template",null,1,l.W1O),l.YNc(3,v,1,0,"ng-template",null,2,l.W1O),l.qZA(),l.YNc(5,g,2,0,"ng-template",null,3,l.W1O)),2&x){const A=l.MAs(2),S=l.MAs(4),O=l.MAs(6);l.Q6J("nzNotFoundImage",O)("nzNotFoundContent",A)("nzNotFoundFooter",S)}},directives:[h.p9,I.s,n.ZU,z.Ls],styles:["[_nghost-%COMP%]{display:inline-block}"]}),u})()},9386:(Q,V,e)=>{e.d(V,{a:()=>v});var l=e(9808),h=e(1844),I=e(685),n=e(5017),z=e(3618),M=e(5e3);let v=(()=>{class g{}return g.\u0275fac=function(u){return new(u||g)},g.\u0275mod=M.oAB({type:g}),g.\u0275inj=M.cJS({imports:[[l.ez,h.B,I.Xo,n.PV,z.ZJ]]}),g})()},4181:(Q,V,e)=>{e.d(V,{O:()=>it});var l=e(9808),h=e(655),I=e(6123),n=e(4987),z=e(8776),M=e(591),v=e(3240),g=e(373),y=e(2198),u=e(4850),t=e(5e3),x=e(7630),F=e(9169),A=e(8054),S=e(9397),O=e(3075),P=e(8144),E=e(3618),Y=e(8664),D=e(822),C=e(6042),B=e(2643),G=e(2683),b=e(5017),N=e(6949),$=e(8926);function w(r,p){if(1&r&&(t._UZ(0,"span",9),t.ALo(1,"highlightTypeahead")),2&r){const i=t.oxw().$implicit,s=t.oxw(2);t.Q6J("innerHtml",t.xi3(1,1,i.label,s.to.searchString),t.oJD)}}function R(r,p){1&r&&(t.TgZ(0,"span"),t._uU(1," - Aliases:\xa0 "),t.qZA())}function W(r,p){if(1&r&&(t.TgZ(0,"span",10),t._uU(1),t.YNc(2,R,2,0,"span",11),t._UZ(3,"span",9),t.ALo(4,"highlightTypeahead"),t.qZA()),2&r){const i=t.oxw().$implicit,s=t.oxw(2);t.xp6(1),t.hij(" ID: ",i.variant.id," "),t.xp6(1),t.Q6J("ngIf",i.variant.variantAliases.length>0),t.xp6(1),t.Q6J("innerHtml",t.xi3(4,3,i.variant.variantAliases.join(", "),s.to.searchString),t.oJD)}}function j(r,p){1&r&&(t.TgZ(0,"nz-option",6)(1,"nz-space"),t.YNc(2,w,2,4,"span",7),t.YNc(3,W,5,6,"span",8),t.qZA()()),2&r&&t.Q6J("nzValue",p.$implicit.variant)}function K(r,p){1&r&&t._uU(0," No variant found in CIViC that matches the string provided. ")}function X(r,p){if(1&r){const i=t.EpF();t.ynx(0),t.TgZ(1,"nz-select",3),t.NdJ("nzOnSearch",function(f){return t.CHM(i),t.oxw().to.onSearch(f)}),t.YNc(2,j,4,1,"nz-option",4),t.ALo(3,"ngrxPush"),t.qZA(),t.YNc(4,K,1,0,"ng-template",null,5,t.W1O),t.BQk()}if(2&r){const i=t.MAs(5),s=t.oxw(),f=t.MAs(4);t.xp6(1),t.Q6J("formControl",s.formControl)("formlyAttributes",s.field)("nzPlaceHolder",s.to.placeholder?s.to.placeholder:null)("nzDropdownRender",s.to.allowCreate?f:null)("nzNotFoundContent",i)("nzShowArrow",s.to.showArrow),t.xp6(1),t.Q6J("ngForOf",t.lcZ(3,7,s.variants$))}}function H(r,p){if(1&r&&t._UZ(0,"cvc-variant-tag",12),2&r){const i=t.oxw();t.Q6J("variant",i.formControl.value)}}function J(r,p){if(1&r&&t._UZ(0,"cvc-form-errors-alert",15),2&r){const i=t.oxw(4);t.Q6J("errors",i.errorMessages)}}function k(r,p){if(1&r){const i=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(i);const f=t.oxw(4);return f.addVariant(f.to.searchString)}),t._UZ(1,"i",17),t._uU(2,"No Existing CIViC Variant\xa0"),t.TgZ(3,"strong"),t._uU(4),t.qZA(),t._uU(5,"\xa0found. Create A New Variant? "),t.qZA()}if(2&r){const i=t.oxw(4);t.Q6J("nzLoading",i.loading),t.xp6(4),t.Oqu(i.to.searchString)}}function q(r,p){if(1&r&&(t.ynx(0),t.YNc(1,J,1,1,"cvc-form-errors-alert",13),t.YNc(2,k,6,2,"button",14),t.BQk()),2&r){const i=t.oxw(3);t.xp6(1),t.Q6J("ngIf",i.errorMessages.length>0),t.xp6(1),t.Q6J("ngIf",0==i.errorMessages.length)}}function Z(r,p){if(1&r&&(t.ynx(0),t.YNc(1,q,3,2,"ng-container",11),t.BQk()),2&r){const i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",""!==i.to.searchString)}}function tt(r,p){if(1&r&&(t.YNc(0,Z,2,1,"ng-container",11),t.ALo(1,"ngrxPush")),2&r){const i=t.oxw();t.Q6J("ngIf",t.lcZ(1,1,i.displayAdd$))}}let T=class extends z.fS{constructor(p,i,s){super(),this.variantTypeaheadQuery=p,this.networkErrorService=i,this.addVariantGQL=s,this.success=!1,this.errorMessages=[],this.loading=!1,this.displayAdd$=new M.X(!1),this.addVariantMutator=new I.U(this.networkErrorService),this.defaultOptions={templateOptions:{placeholder:"Search Variants",showArrow:!1,onSearch:()=>{},minLengthSearch:1,optionList:[],allowCreate:!0},expressionProperties:{"templateOptions.geneId":(f,st,L)=>{var U,o;let c=null===(o=null===(U=null==L?void 0:L.parent)||void 0===U?void 0:U.parent)||void 0===o?void 0:o.model;if(c&&c.gene&&c.gene[0])return c.gene[0].id}}}}ngOnInit(){this.queryRef=this.variantTypeaheadQuery.watch({name:"zzzz"}),this.variants$=this.queryRef.valueChanges.pipe((0,g.j)("data","variants","nodes"),(0,y.h)(v.ep),(0,u.U)(p=>p.map(s=>({value:s.id,label:s.name,variant:s}))))}ngAfterViewInit(){this.to.onSearch=p=>{p.length<this.to.minLengthSearch||(this.to.searchString=p,this.errorMessages=[],this.queryRef.refetch({name:p,geneId:this.to.geneId}).then(i=>{this.displayAdd$.next(0==i.data.variants.nodes.filter(s=>s.name.toUpperCase()==p.toUpperCase()).length)}))}}addVariant(p){if(p&&""!=p&&this.to.geneId){let i=this.addVariantMutator.mutate(this.addVariantGQL,{name:p,geneId:this.to.geneId},{},s=>{var f;null===(f=this.field.formControl)||void 0===f||f.setValue({id:s.addVariant.variant.id,name:s.addVariant.variant.name}),this.to.searchString="",this.to.searchLength=0});i.submitSuccess$.pipe((0,n.t)(this)).subscribe(s=>{s&&(this.success=!0)}),i.submitError$.pipe((0,n.t)(this)).subscribe(s=>{s&&(this.errorMessages=s,this.success=!1)}),i.isSubmitting$.pipe((0,n.t)(this)).subscribe(s=>{this.loading=s})}}};T.\u0275fac=function(p){return new(p||T)(t.Y36(x._eC),t.Y36(F.Y),t.Y36(x.LUc))},T.\u0275cmp=t.Xpm({type:T,selectors:[["cvc-variant-input-type"]],features:[t.qOj],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["variantListItem",""],["addVariantTmpl",""],["nzShowSearch","","nzServerSearch","","autofocus","click",3,"formControl","formlyAttributes","nzPlaceHolder","nzDropdownRender","nzNotFoundContent","nzShowArrow","nzOnSearch"],["nzCustomContent","",3,"nzValue",4,"ngFor","ngForOf"],["sourceLoader",""],["nzCustomContent","",3,"nzValue"],[3,"innerHtml",4,"nzSpaceItem"],["nz-typography","","nzType","secondary",4,"nzSpaceItem"],[3,"innerHtml"],["nz-typography","","nzType","secondary"],[4,"ngIf"],[3,"variant"],[3,"errors",4,"ngIf"],["nz-button","","nzSize","small",3,"nzLoading","click",4,"ngIf"],[3,"errors"],["nz-button","","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","plus","nzTheme","outline"]],template:function(p,i){if(1&p&&(t.YNc(0,X,6,9,"ng-container",0),t.YNc(1,H,1,1,"ng-template",null,1,t.W1O),t.YNc(3,tt,2,3,"ng-template",null,2,t.W1O)),2&p){const s=t.MAs(2);t.Q6J("ngIf",!(null!=i.formControl.value&&i.formControl.value.id))("ngIfElse",s)}},directives:[l.O5,A.Vq,S.l,O.JJ,O.oH,z.VQ,l.sg,A.Ip,P.NU,P.$1,E.ZU,Y.I,D.V,C.ix,B.dQ,G.w,b.Ls],pipes:[N.fM,$.A],styles:[""],changeDetection:0}),T=(0,h.gn)([(0,n.c)()],T);const nt={name:"variant-input",component:T};var et=e(4867),ot=e(7008),at=e(6905),rt=e(8616);let it=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[l.ez,O.UX,N.WG,z.X0.forChild({types:[nt]}),A.LV,C.sL,b.PV,P.zf,E.ZJ,et.Q,ot.B,at.s,rt.Y]]}),r})()},885:(Q,V,e)=>{e.r(V),e.d(V,{VariantGroupsAddModule:()=>U});var l=e(9808),h=e(325),I=e(4850),n=e(5e3),z=e(9350),M=e(8992),v=e(1945),g=e(5017),y=e(1894),u=e(5639),t=e(6949);function x(o,c){1&o&&(n.TgZ(0,"div"),n._UZ(1,"router-outlet"),n.qZA())}function F(o,c){1&o&&(n.TgZ(0,"nz-row",7)(1,"div",8),n._UZ(2,"cvc-login-prompt"),n.qZA()())}let A=(()=>{class o{constructor(a){this.viewerService=a}ngOnInit(){this.isSignedIn$=this.viewerService.viewer$.pipe((0,I.U)(a=>a.signedIn))}}return o.\u0275fac=function(a){return new(a||o)(n.Y36(z.a))},o.\u0275cmp=n.Xpm({type:o,selectors:[["cvc-variant-groups-add-view"]],decls:13,vars:4,consts:[["displayName","New"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzType","civic:evidence"],[1,"content"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["nzSpan","24","nzJustify","center"],["nz-col","","nzSpan","6"]],template:function(a,d){if(1&a&&(n._UZ(0,"cvc-section-navigation",0),n.TgZ(1,"nz-page-header",1)(2,"nz-page-header-title",2),n._UZ(3,"i",3),n._uU(4," Add New Variant Group "),n.qZA(),n.TgZ(5,"nz-page-header-subtitle"),n._uU(6," Submit and review new Variant Groups "),n.qZA(),n.TgZ(7,"nz-page-header-content")(8,"div",4),n.YNc(9,x,2,0,"div",5),n.ALo(10,"ngrxPush"),n.YNc(11,F,3,0,"ng-template",null,6,n.W1O),n.qZA()()()),2&a){const m=n.MAs(12);n.xp6(9),n.Q6J("ngIf",n.lcZ(10,2,d.isSignedIn$))("ngIfElse",m)}},directives:[M.I,v.$O,v.u9,g.Ls,v.yG,v.u5,l.O5,h.lC,y.SK,y.t3,u.u],pipes:[t.fM],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),o})();var S=e(8776),O=e(7462),P=e(4181),E=e(7055),Y=e(8979),D=e(4623),C=e(3075),B=e(1017),G=e(4546),b=e(2359),N=e(6042),$=e(7525),w=e(7008),R=e(5472),W=e(3773),j=e(3022),K=e(4889);let X=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[l.ez,C.UX,h.Bz,S.X0,G.U5,b.L,y.Jb,N.sL,$.j,S.X0,O.o,P.O,E.N,Y.N,D.K,w.B,R.r,W.g,P.O,j.e,K.E,B.s]]}),o})(),H=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[l.ez,X]]}),o})();var J=e(3077),k=e(6123),q=e(8929),Z=e(7625),tt=e(7630),T=e(9169),nt=e(822);function et(o,c){1&o&&n.GkF(0)}function ot(o,c){if(1&o){const a=n.EpF();n.TgZ(0,"formly-form",4),n.NdJ("modelChange",function(m){return n.CHM(a),n.oxw().formModel=m}),n.qZA()}if(2&o){const a=n.oxw();n.Q6J("form",a.formGroup)("fields",a.formFields)("model",a.formModel)}}function at(o,c){if(1&o&&(n.TgZ(0,"nz-form-item"),n._UZ(1,"cvc-form-errors-alert",6),n.qZA()),2&o){const a=n.oxw(2);n.xp6(1),n.Q6J("errors",a.errorMessages)}}function rt(o,c){if(1&o&&(n.TgZ(0,"p"),n._uU(1,"View "),n.TgZ(2,"a",10),n._uU(3,"its details"),n.qZA(),n._uU(4,"."),n.qZA()),2&o){const a=n.oxw(3);n.xp6(2),n.MGl("routerLink","/variant-groups/",a.newId,"/summary")}}function it(o,c){if(1&o&&(n.ynx(0),n._UZ(1,"nz-alert",7),n.YNc(2,rt,5,1,"ng-template",8,9,n.W1O),n.BQk()),2&o){const a=n.MAs(3);n.xp6(1),n.Q6J("nzDescription",a)}}function r(o,c){if(1&o&&(n.YNc(0,at,2,1,"nz-form-item",5),n.YNc(1,it,4,1,"ng-container",5)),2&o){const a=n.oxw();n.Q6J("ngIf",a.errorMessages.length>0),n.xp6(1),n.Q6J("ngIf",a.success)}}let p=(()=>{class o{constructor(a,d){this.submitVariantGroupGQL=a,this.networkErrorService=d,this.destroy$=new q.xQ,this.formGroup=new C.cw({}),this.success=!1,this.errorMessages=[],this.loading=!1,this.submitVariantGroupMutator=new k.U(d),this.formFields=[{key:"fields",wrappers:["form-container"],templateOptions:{label:"Add Variant Group Form"},fieldGroup:[{key:"name",type:"input",wrappers:["form-field"],templateOptions:{label:"Variant Group Name",required:!0}},{key:"description",type:"cvc-textarea",templateOptions:{label:"Description",helpText:"A brief description of this new variant group.",placeholder:"No description provided",required:!0}},{key:"sources",type:"multi-field",wrappers:["form-field"],templateOptions:{label:"Source",helpText:"Add any sources upon which your description depends.",addText:"Add a Source"},fieldArray:{type:"source-input",templateOptions:{hideLabel:!0,required:!0}}},{key:"variants",type:"multi-field",wrappers:["form-field"],templateOptions:{label:"Variants",required:!0,helpText:"Specify the variants that comprise this Variant Group.",addText:"Add a Variant "},fieldArray:{type:"variant-input",templateOptions:{hideLabel:!0,required:!0,allowCreate:!1}}},{key:"comment",type:"comment-textarea",templateOptions:{label:"Comment",helpText:"Please provide any additional comments you wish to make about this evidence item. This comment will appear as the first comment in this item's comment thread.",placeholder:"Please enter a comment describing your revision.",required:!0,minLength:10}},{key:"cancel",type:"cancel-button"},{key:"organization",type:"org-submit-button",templateOptions:{submitLabel:"Create Variant Group",submitSize:"large"}}]}]}submitVariantGroup(a){let d=this.toSubmitInput(a);if(d){let m=this.submitVariantGroupMutator.mutate(this.submitVariantGroupGQL,{input:d},{},_=>{this.newId=_.submitVariantGroup.variantGroup.id});m.submitSuccess$.pipe((0,Z.R)(this.destroy$)).subscribe(_=>{_&&(this.success=!0)}),m.submitError$.pipe((0,Z.R)(this.destroy$)).subscribe(_=>{_&&(this.errorMessages=_,this.success=!1)}),m.isSubmitting$.pipe((0,Z.R)(this.destroy$)).subscribe(_=>{this.loading=_})}}toSubmitInput(a){var d;if(a)return{description:a.fields.description,name:a.fields.name,organizationId:null===(d=a.fields.organization)||void 0===d?void 0:d.id,sourceIds:a.fields.sources?a.fields.sources.map(m=>m.id).filter(J.$):[],variantIds:a.fields.variants.map(m=>m.id).filter(J.$)}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.\u0275fac=function(a){return new(a||o)(n.Y36(tt.tji),n.Y36(T.Y))},o.\u0275cmp=n.Xpm({type:o,selectors:[["cvc-variant-group-submit-form"]],decls:5,vars:3,consts:[["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[4,"ngTemplateOutlet"],[3,"form","fields","model","modelChange",4,"ngIf"],["formMessages",""],[3,"form","fields","model","modelChange"],[4,"ngIf"],[3,"errors"],["nzType","success","nzMessage","Variant Group Submitted","nzShowIcon","",3,"nzDescription"],["nzSize","small"],["successMessage",""],[3,"routerLink"]],template:function(a,d){if(1&a&&(n.TgZ(0,"form",0),n.NdJ("ngSubmit",function(){return d.submitVariantGroup(d.formModel)}),n.YNc(1,et,1,0,"ng-container",1),n.YNc(2,ot,1,3,"formly-form",2),n.qZA(),n.YNc(3,r,2,2,"ng-template",null,3,n.W1O)),2&a){const m=n.MAs(4);n.Q6J("formGroup",d.formGroup),n.xp6(1),n.Q6J("ngTemplateOutlet",m),n.xp6(1),n.Q6J("ngIf",!d.success)}},directives:[C._Y,C.JL,G.Lr,C.sg,l.tP,l.O5,S.T7,y.SK,G.Nx,nt.V,b.r,h.yS],styles:[""]}),o})();const s=[{path:"",component:A,children:[{path:"",redirectTo:"submit",pathMatch:"full"},{path:"submit",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["cvc-variant-groups-submit-page"]],decls:1,vars:0,template:function(a,d){1&a&&n._UZ(0,"cvc-variant-group-submit-form")},directives:[p],styles:[""]}),o})(),data:{breadcrumb:"Submit New Variant Groups"}}]}];let f=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[h.Bz.forChild(s),H],h.Bz]}),o})();var st=e(9386),L=e(5630);let U=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[l.ez,f,v.KJ,g.PV,L.D,st.a,y.Jb,t.WG]]}),o})()}}]);