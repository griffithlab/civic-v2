"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[1634],{3416:(K,U,t)=>{t.d(U,{g:()=>b});var T=t(9808),D=t(3075),l=t(8776),N=t(3793),e=t(8054),w=t(7338),O=t(8006),V=t(7055),A=t(915);const R={name:"disease-array",extends:"multi-field",wrappers:["form-field"],defaultOptions:{templateOptions:{label:"Disease",helpText:"Please enter a disease name. If you are unable to locate the disease in the dropdown, please check the 'Could not find disease' checkbox below and enter the disease in the field that appears.",required:!1,addText:"Add a Disease",destroy$:new(t(8929).xQ)},fieldArray:{type:"cvc-disease-input",templateOptions:{required:!1},expressionProperties:{"templateOptions.allowCreate":(r,x,S)=>{var F,k;const H=null===(k=null===(F=null==S?void 0:S.parent)||void 0===F?void 0:F.templateOptions)||void 0===k?void 0:k.allowCreate;return void 0===H||H}}},defaultValue:[],validation:{messages:{required:(r,x)=>{const S=(null==x?void 0:x.form)?x.form.get("evidenceType"):null;return S?`${(0,A.E)(S.value)} Evidence requires a disease to be specified.`:"Disease is required."}}},hooks:{onInit:r=>{var x;const S=r.templateOptions,F=null===(x=null==r?void 0:r.options)||void 0===x?void 0:x.formState,k=(null==r?void 0:r.form)?r.form.get("evidenceType"):null;!k||(S.vcSub=k.valueChanges.subscribe(H=>{F.requiresDisease(H)?(S.hidden=!1,S.required=!0):(S.hidden=!0,S.required=!1,r.model.length>0&&(r.model.splice(1),S.remove(0)))}))},onDestroy:r=>{const x=r.templateOptions;x.vcSub&&x.vcSub.unsubscribe()}}}};var E=t(5e3);let b=(()=>{class r{}return r.\u0275fac=function(S){return new(S||r)},r.\u0275mod=E.oAB({type:r}),r.\u0275inj=E.cJS({imports:[[T.ez,D.u5,D.UX,e.LV,w.z,N.F,l.X0.forChild({types:[R]}),O.I,V.N]]}),r})()},8006:(K,U,t)=>{t.d(U,{I:()=>se});var T=t(9808),D=t(8776),l=t(655),N=t(6123),e=t(4987),w=t(591),O=t(3240),V=t(373),A=t(2198),Z=t(4850),n=t(5e3),R=t(7630),E=t(9169),b=t(8054),r=t(9397),x=t(3075),S=t(6949),F=t(8144),k=t(3618),H=t(4022),L=t(822),h=t(2683),_=t(1047),d=t(6042),p=t(2643),M=t(8926);function i(f,C){if(1&f&&(n._UZ(0,"span",10),n.ALo(1,"highlightTypeahead")),2&f){const g=n.oxw().$implicit,z=n.oxw(3);n.Q6J("innerHtml",n.xi3(1,1,g.label,z.to.searchString),n.oJD)}}function c(f,C){if(1&f&&(n._UZ(0,"span",11),n.ALo(1,"highlightTypeahead")),2&f){const g=n.oxw().$implicit,z=n.oxw(3);n.Q6J("innerHtml",n.xi3(1,1,g.disease.diseaseAliases.join(", "),z.to.searchString),n.oJD)}}function u(f,C){if(1&f&&(n.TgZ(0,"nz-option",7)(1,"nz-space"),n.YNc(2,i,2,4,"span",8),n.YNc(3,c,2,4,"span",9),n.qZA()()),2&f){const g=C.$implicit;n.Q6J("nzLabel",g.tooltip)("nzValue",g.disease)}}function y(f,C){if(1&f&&(n.ynx(0),n.YNc(1,u,4,2,"nz-option",6),n.BQk()),2&f){const g=C.ngrxLet;n.xp6(1),n.Q6J("ngForOf",g)}}function B(f,C){1&f&&n._uU(0," No disease found in CIViC that matches the string provided. ")}function j(f,C){if(1&f){const g=n.EpF();n.ynx(0),n.TgZ(1,"nz-select",3),n.NdJ("nzOnSearch",function(I){return n.CHM(g),n.oxw().to.onSearch(I)}),n.YNc(2,y,2,1,"ng-container",4),n.qZA(),n.YNc(3,B,1,0,"ng-template",null,5,n.W1O),n.BQk()}if(2&f){const g=n.MAs(4),z=n.oxw(),I=n.MAs(4);n.xp6(1),n.Q6J("formControl",z.formControl)("formlyAttributes",z.field)("nzPlaceHolder",z.to.placeholder?z.to.placeholder:null)("nzDropdownRender",z.to.allowCreate?I:null)("nzNotFoundContent",g)("nzShowArrow",z.to.showArrow)("nzFilterOption",z.to.filterOption),n.xp6(1),n.Q6J("ngrxLet",z.diseases$)}}function ie(f,C){if(1&f&&n._UZ(0,"cvc-disease-tag",12),2&f){const g=n.oxw();n.Q6J("disease",g.formControl.value)}}function q(f,C){if(1&f&&n._UZ(0,"cvc-form-errors-alert",18),2&f){const g=n.oxw(4);n.Q6J("errors",g.errorMessages)}}function re(f,C){if(1&f){const g=n.EpF();n.TgZ(0,"button",19),n.NdJ("click",function(){n.CHM(g);const I=n.oxw(4);return I.addDisease(I.to.searchString)}),n._UZ(1,"i",20),n._uU(2,"No Existing CIViC Disease\xa0"),n.TgZ(3,"strong"),n._uU(4),n.qZA(),n._uU(5,"\xa0found. Create A New Disease? "),n.qZA()}if(2&f){const g=n.oxw(4);n.Q6J("nzLoading",g.loading),n.xp6(4),n.Oqu(g.to.searchString)}}function G(f,C){if(1&f){const g=n.EpF();n.ynx(0),n.YNc(1,q,1,1,"cvc-form-errors-alert",14),n.TgZ(2,"nz-input-group",15)(3,"input",16),n.NdJ("ngModelChange",function(I){return n.CHM(g),n.oxw(3).enteredDoid=I}),n.qZA()(),n.YNc(4,re,6,2,"button",17),n.BQk()}if(2&f){const g=n.oxw(3);n.xp6(1),n.Q6J("ngIf",g.errorMessages.length>0),n.xp6(2),n.Q6J("ngModel",g.enteredDoid),n.xp6(1),n.Q6J("ngIf",0==g.errorMessages.length)}}function ee(f,C){if(1&f&&(n.ynx(0),n.YNc(1,G,5,3,"ng-container",13),n.BQk()),2&f){const g=n.oxw(2);n.xp6(1),n.Q6J("ngIf",""!==g.to.searchString&&g.to.searchString.length>=5)}}function ae(f,C){if(1&f&&(n.YNc(0,ee,2,1,"ng-container",13),n.ALo(1,"ngrxPush")),2&f){const g=n.oxw();n.Q6J("ngIf",n.lcZ(1,1,g.displayAdd$))}}let $=class extends D.fS{constructor(C,g,z){super(),this.diseaseTypeaheadQuery=C,this.networkErrorService=g,this.addDiseaseGQL=z,this.success=!1,this.errorMessages=[],this.loading=!1,this.enteredDoid="",this.displayAdd$=new w.X(!1),this.addDiseaseMutator=new N.U(this.networkErrorService),this.defaultOptions={templateOptions:{placeholder:"Search Diseases",showArrow:!1,onSearch:()=>{},minLengthSearch:1,optionList:[],searchString:"",allowCreate:!0}}}ngOnInit(){this.queryRef=this.diseaseTypeaheadQuery.watch({name:"zzzz"}),this.diseases$=this.queryRef.valueChanges.pipe((0,V.j)("data","diseaseTypeahead"),(0,A.h)(O.ep),(0,Z.U)(C=>C.map(z=>{let I=z.doid?`DOID:${z.doid}`:"no DOID",Y=z.diseaseAliases.length>0?`Aliases: ${z.diseaseAliases.join(", ")}`:"";return{value:z.id,tooltip:`${z.displayName} (${I}) ${Y}`,label:`${z.displayName} (${I})`,disease:z}})))}ngAfterViewInit(){this.to.onSearch=C=>{C.length<this.to.minLengthSearch||(this.to.searchString=C,this.errorMessages=[],this.queryRef.refetch({name:C}).then(g=>{this.displayAdd$.next(0==g.data.diseaseTypeahead.filter(z=>z.displayName.toUpperCase()==C.toUpperCase()).length)}))}}addDisease(C){if(C&&""!=C){let z=this.addDiseaseMutator.mutate(this.addDiseaseGQL,{name:C,doid:+this.enteredDoid?+this.enteredDoid:void 0},{},I=>{var Y;null===(Y=this.field.formControl)||void 0===Y||Y.setValue({id:I.addDisease.disease.id,name:I.addDisease.disease.name}),this.to.searchString="",this.to.searchLength=0});z.submitSuccess$.pipe((0,e.t)(this)).subscribe(I=>{I&&(this.success=!0)}),z.submitError$.pipe((0,e.t)(this)).subscribe(I=>{I&&(this.errorMessages=I,this.success=!1)}),z.isSubmitting$.pipe((0,e.t)(this)).subscribe(I=>{this.loading=I})}}};$.\u0275fac=function(C){return new(C||$)(n.Y36(R.kv3),n.Y36(E.Y),n.Y36(R.KNk))},$.\u0275cmp=n.Xpm({type:$,selectors:[["cvc-disease-input-type"]],features:[n.qOj],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["diseaseListItem",""],["addDiseaseTmpl",""],["nzShowSearch","","nzServerSearch","","autofocus","click",3,"formControl","formlyAttributes","nzPlaceHolder","nzDropdownRender","nzNotFoundContent","nzShowArrow","nzFilterOption","nzOnSearch"],[4,"ngrxLet"],["sourceLoader",""],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzCustomContent","",3,"nzLabel","nzValue"],[3,"innerHtml",4,"nzSpaceItem"],["nz-typography","","nzType","secondary",3,"innerHtml",4,"nzSpaceItem"],[3,"innerHtml"],["nz-typography","","nzType","secondary",3,"innerHtml"],[3,"disease"],[4,"ngIf"],[3,"errors",4,"ngIf"],["nzAddOnBefore","DOID:"],["type","text","nz-input","","placeholder","Optional DOID",3,"ngModel","ngModelChange"],["nz-button","","nzSize","small",3,"nzLoading","click",4,"ngIf"],[3,"errors"],["nz-button","","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","plus","nzTheme","outline"]],template:function(C,g){if(1&C&&(n.YNc(0,j,5,8,"ng-container",0),n.YNc(1,ie,1,1,"ng-template",null,1,n.W1O),n.YNc(3,ae,2,3,"ng-template",null,2,n.W1O)),2&C){const z=n.MAs(2);n.Q6J("ngIf",!(null!=g.formControl.value&&g.formControl.value.id))("ngIfElse",z)}},directives:[T.O5,b.Vq,r.l,x.JJ,x.oH,D.VQ,S.eJ,T.sg,b.Ip,F.NU,F.$1,k.ZU,H.n,L.V,h.w,_.gB,_.Zp,x.Fj,x.On,d.ix,p.dQ],pipes:[M.A,S.fM],styles:[""]}),$=(0,l.gn)([(0,e.c)()],$);const te={name:"cvc-disease-input",component:$};var X=t(3580),ne=t(7008),oe=t(6905),le=t(8616);let se=(()=>{class f{}return f.\u0275fac=function(g){return new(g||f)},f.\u0275mod=n.oAB({type:f}),f.\u0275inj=n.cJS({imports:[[T.ez,x.UX,S.WG,D.X0.forChild({types:[te]}),b.LV,X.Q,k.ZJ,F.zf,d.sL,ne.B,_.o7,x.u5,oe.s,le.Y]]}),f})()},7220:(K,U,t)=>{t.d(U,{m:()=>ke});var T=t(9808),D=t(8776),l=t(6761),N=t(3075),e=t(5e3),w=t(7484),O=t(868),V=t(3434),A=t(8929),Z=t(373),n=t(2198),R=t(4850),E=t(7625),b=t(13),r=t(7630);const x=/\(/g,S=/\)/g,F=/AND|OR/i,k=/^(?<not>NOT\s)?\s*#VID(?<variantId>\d+)$/i,H=/\s+/,L="EXPR";function h(a){return _(a.replace(x," ( ").replace(S," ) "))}function _(a){let o,v=a.split(H),s=0,m=[],P=[],W=[];for(let J of v)if("("==J)0!=s&&m.push(J),s+=1;else if(")"==J)if(s-=1,0==s){let Q=_(m.join(" "));if("errorMessage"in Q)return Q;W.push(Q),P.push(L),m=[]}else m.push(J);else s>0?m.push(J):P.push(J);let ce=0;for(let J of P){let Q=F.test(J);if(Q&&ce==v.length-1)return{errorMessage:"Trailing boolean operator found. You cannot end your profile with an operator."};if(Q&&0==ce)return{errorMessage:"The expression cannot start with AND/OR"};if(Q&&!o)o=d(J);else if(Q&&o&&d(J)!==o)return{errorMessage:"You cannot mix and match AND/OR in a single segment. Use parenthesis to logically group your variants."};ce++}let ue=[],Ve=P.join(" ").split(F);for(let J of Ve.map(Q=>Q.trim())){let Q=k.exec(J);if(null===Q){if(J!==L)return{errorMessage:`Variant ${J} does not match the expected format. The token should be a #VID prepended with an optional NOT.`}}else ue.push({not:!!Q[1],variantId:parseInt(Q[2])})}return{booleanOperator:o,variantComponents:ue,complexComponents:W}}function d(a){return"AND"==a.toUpperCase()?r._Wm.And:r._Wm.Or}var p=t(3240),M=t(6123),i=t(9169),c=t(8511),u=t(8481),y=t(2683),B=t(5017),j=t(7525),ie=t(1894),q=t(4546),re=t(822),G=t(8144),ee=t(6042),ae=t(2643),$=t(7230),te=t(3618),X=t(4921),ne=t(3610),oe=t(6949);const le=["mpInputField"];function se(a,v){if(1&a){const o=e.EpF();e.ynx(0),e._UZ(1,"cvc-molecular-profile-tag",2),e.TgZ(2,"nz-tag",3)(3,"i",4),e.NdJ("click",function(){return e.CHM(o),e.oxw().resetForm()}),e.qZA()(),e.BQk()}if(2&a){const o=e.oxw();e.xp6(1),e.Q6J("molecularProfile",o.selectedMp)}}function f(a,v){if(1&a&&(e.TgZ(0,"nz-form-item"),e._UZ(1,"cvc-form-errors-alert",14),e.qZA()),2&a){const o=e.oxw(2);e.xp6(1),e.Q6J("errors",o.errorMessages)}}function C(a,v){if(1&a){const o=e.EpF();e.ynx(0),e._UZ(1,"cvc-molecular-profile-tag",2),e.TgZ(2,"button",16),e.NdJ("click",function(){return e.CHM(o),e.oxw(5).submitNewMp()}),e._uU(3," Select this Molecular Profile "),e.qZA(),e.BQk()}if(2&a){const o=v.ngIf;e.xp6(1),e.Q6J("molecularProfile",o)}}function g(a,v){if(1&a){const o=e.EpF();e.ynx(0),e.TgZ(1,"button",16),e.NdJ("click",function(){return e.CHM(o),e.oxw(6).submitNewMp()}),e._uU(2," Create Molecular Profile "),e.qZA(),e.BQk()}}function z(a,v){1&a&&(e.TgZ(0,"span",19),e._uU(1,"This Molecular Profile doesn't exist yet. Only existing Molecular Profiles can be used for Assertions. "),e.qZA())}function I(a,v){if(1&a&&(e._UZ(0,"cvc-mp-tag-name",17),e.YNc(1,g,3,0,"ng-container",0),e.YNc(2,z,2,0,"ng-template",null,18,e.W1O)),2&a){const o=e.MAs(3),s=e.oxw(2).ngIf,m=e.oxw(3);e.Q6J("nameSegments",s),e.xp6(1),e.Q6J("ngIf",m.allowCreate)("ngIfElse",o)}}function Y(a,v){if(1&a&&(e.ynx(0),e.YNc(1,C,4,1,"ng-container",0),e.ALo(2,"ngrxPush"),e.YNc(3,I,4,3,"ng-template",null,15,e.W1O),e.BQk()),2&a){const o=e.MAs(4),s=e.oxw(4);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,s.previewMpAlreadyExists$))("ngIfElse",o)}}function me(a,v){if(1&a&&(e.ynx(0),e.YNc(1,Y,5,4,"ng-container",0),e.BQk()),2&a){e.oxw(2);const o=e.MAs(5),s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.displayPreview)("ngIfElse",o)}}function de(a,v){if(1&a&&(e.ynx(0),e.YNc(1,me,2,2,"ng-container",6),e.ALo(2,"ngrxPush"),e.BQk()),2&a){const o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,o.previewMpName$))}}function fe(a,v){if(1&a&&(e.ynx(0),e._uU(1),e.BQk()),2&a){const o=e.oxw(3);e.xp6(1),e.hij(" ",o.parseError," ")}}function ge(a,v){1&a&&(e.ynx(0),e.TgZ(1,"span",20),e._uU(2," Start constructing a complex molecular profile to preview it here "),e.qZA(),e.BQk())}function he(a,v){if(1&a&&(e.YNc(0,fe,2,1,"ng-container",6),e.YNc(1,ge,3,0,"ng-container",6)),2&a){const o=e.oxw(2);e.Q6J("ngIf",o.parseError),e.xp6(1),e.Q6J("ngIf",!o.parseError)}}function _e(a,v){if(1&a&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.BQk()),2&a){const o=v.$implicit;e.xp6(2),e.Oqu(o.displayName)}}function ze(a,v){if(1&a){const o=e.EpF();e.TgZ(0,"nz-mention",21),e.NdJ("nzOnSearchChange",function(m){return e.CHM(o),e.oxw(2).onSearchChange(m)})("nzOnSelect",function(){return e.CHM(o),e.oxw(2).suggestions=[]}),e.TgZ(1,"textarea",22,23),e.NdJ("ngModelChange",function(m){return e.CHM(o),e.oxw(2).mpName=m})("ngModelChange",function(m){return e.CHM(o),e.oxw(2).onMpNameChanged(m)}),e.qZA(),e.YNc(3,_e,3,1,"ng-container",24),e.qZA()}if(2&a){const o=e.oxw(2);e.Q6J("nzStatus",o.parseError?"warning":"")("nzSuggestions",o.suggestions)("nzValueWith",o.autoCompleteValueFor),e.xp6(1),e.Q6J("ngModel",o.mpName)}}function ve(a,v){if(1&a){const o=e.EpF();e.TgZ(0,"button",25),e.NdJ("nzPopoverVisibleChange",function(m){return e.CHM(o),e.oxw(2).variantFinderVisible=m})("click",function(){e.CHM(o);const m=e.oxw(2);return m.variantFinderVisible=!m.variantFinderVisible}),e._uU(1," Find a Variant "),e._UZ(2,"i",26),e.qZA()}if(2&a){e.oxw();const o=e.MAs(9),s=e.MAs(11),m=e.oxw();e.Q6J("nzPopoverTitle",o)("nzPopoverVisible",m.variantFinderVisible)("nzPopoverContent",s)("nzPopoverTrigger",void 0)}}const Ce=function(){return{float:"right"}};function xe(a,v){if(1&a){const o=e.EpF();e._uU(0," Find a Variant "),e.TgZ(1,"span",27)(2,"i",28),e.NdJ("click",function(){return e.CHM(o),e.oxw(2).variantFinderVisible=!1}),e.qZA()()}2&a&&(e.xp6(1),e.Q6J("ngStyle",e.DdM(1,Ce)))}function ye(a,v){if(1&a){const o=e.EpF();e.TgZ(0,"cvc-variant-submit-form",29),e.NdJ("onVariantSelected",function(m){return e.CHM(o),e.oxw(2).onVariantSelected(m)}),e.qZA()}}function Se(a,v){if(1&a&&(e.TgZ(0,"nz-spin",5),e.YNc(1,f,2,1,"nz-form-item",6),e.TgZ(2,"nz-space",7),e.YNc(3,de,3,3,"ng-container",8),e.YNc(4,he,2,2,"ng-template",null,9,e.W1O),e.YNc(6,ze,4,4,"nz-mention",10),e.YNc(7,ve,3,4,"button",11),e.qZA(),e.YNc(8,xe,3,2,"ng-template",null,12,e.W1O),e.YNc(10,ye,1,0,"ng-template",null,13,e.W1O),e.qZA()),2&a){const o=e.oxw();e.Q6J("nzSpinning",o.loading),e.xp6(1),e.Q6J("ngIf",o.errorMessages.length>0)}}let Te=(()=>{class a{constructor(o,s,m,P,W){this.previewMpGql=o,this.quicksearchGql=s,this.createMolecularProfileGql=m,this.networkErrorService=P,this.cdr=W,this.allowCreate=!0,this.onMolecularProfileSelected=new e.vpe,this.destroy$=new A.xQ,this.debouncedPreview=new A.xQ,this.suggestions=[],this.loading=!1,this.errorMessages=[],this.displayPreview=!1,this.variantFinderVisible=!1,this.createMolecularProfileMutator=new M.U(P)}ngOnInit(){var o,s,m,P;this.previewQueryRef=this.previewMpGql.watch({}),this.previewMpName$=this.previewQueryRef.valueChanges.pipe((0,Z.j)("data","previewMolecularProfileName"),(0,n.h)(p.ep),(0,R.U)(W=>W.segments),(0,E.R)(this.destroy$)),this.previewMpAlreadyExists$=this.previewQueryRef.valueChanges.pipe((0,Z.j)("data","previewMolecularProfileName"),(0,n.h)(p.ep),(0,R.U)(W=>W.existingMolecularProfile),(0,E.R)(this.destroy$)),(null===(s=null===(o=this.formConfig)||void 0===o?void 0:o.formControl)||void 0===s?void 0:s.value)&&(this.selectedMp=null===(P=null===(m=this.formConfig)||void 0===m?void 0:m.formControl)||void 0===P?void 0:P.value,this.displayPreview=!0,this.cdr.detectChanges()),this.debouncedPreview.pipe((0,E.R)(this.destroy$),(0,b.b)(300)).subscribe(W=>this.refresh())}autoCompleteValueFor(o){return o.value}resetForm(){this.mpName="",this.selectedMp=void 0,this.onMolecularProfileSelected.emit(void 0),this.refresh(),this.cdr.detectChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onSearchChange({}){}onMpNameChanged(o){this.debouncedPreview.next()}refresh(){var o;if(this.mpName&&""!=this.mpName.trim()){let s=h(this.mpName);"errorMessage"in s?(this.parseError=s.errorMessage,this.displayPreview=!1):(this.parseError=void 0,null===(o=this.previewQueryRef)||void 0===o||o.refetch({mpStructure:s}).then(()=>this.displayPreview=!0))}else this.parseError=void 0,this.displayPreview=!1}onVariantSelected(o){var s;this.variantFinderVisible=!1,this.mpName?this.mpName+=` #VID${o.variantId} `:this.mpName=`#VID${o.variantId} `,null===(s=this.mpInputField)||void 0===s||s.nativeElement.focus(),this.refresh()}submitNewMp(){if(this.mpName&&""!=this.mpName.trim()){let o=h(this.mpName);if(!("errorMessage"in o)){let s=this.createMolecularProfileMutator.mutate(this.createMolecularProfileGql,{mpStructure:o},{},m=>{this.onMolecularProfileSelected.emit(m.createMolecularProfile.molecularProfile),this.selectedMp=m.createMolecularProfile.molecularProfile,this.cdr.detectChanges()});s.submitError$.pipe((0,E.R)(this.destroy$)).subscribe(m=>{m&&(this.errorMessages=m,this.loading=!1)}),s.submitSuccess$.pipe((0,E.R)(this.destroy$)).subscribe(()=>{this.loading=!1}),s.isSubmitting$.pipe((0,E.R)(this.destroy$)).subscribe(m=>{this.loading=m})}}}}return a.\u0275fac=function(o){return new(o||a)(e.Y36(r.GSh),e.Y36(r.ghc),e.Y36(r.Ws),e.Y36(i.Y),e.Y36(e.sBO))},a.\u0275cmp=e.Xpm({type:a,selectors:[["cvc-complex-molecular-profile-input-form"]],viewQuery:function(o,s){if(1&o&&e.Gf(le,5),2&o){let m;e.iGM(m=e.CRH())&&(s.mpInputField=m.first)}},inputs:{formConfig:"formConfig",allowCreate:"allowCreate"},outputs:{onMolecularProfileSelected:"onMolecularProfileSelected"},decls:4,vars:2,consts:[[4,"ngIf","ngIfElse"],["createMp",""],[3,"molecularProfile"],[1,"close-tag"],["nz-icon","","nzType","close",3,"click"],["nzTip","Submitting",3,"nzSpinning"],[4,"ngIf"],["nzDirection","vertical","nzSize","large"],[4,"nzSpaceItem"],["noPreview",""],["nzPrefix","#","nzNotFoundContent","No matches...",3,"nzStatus","nzSuggestions","nzValueWith","nzOnSearchChange","nzOnSelect",4,"nzSpaceItem"],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","nzPopoverVisibleChange","click",4,"nzSpaceItem"],["variantFinderTitle",""],["variantFinder",""],[3,"errors"],["newMp",""],["nz-button","","nzSize","small",2,"float","right",3,"click"],[3,"nameSegments"],["createNotAllowed",""],[2,"float","right"],["nz-typography","","nzType","secondary"],["nzPrefix","#","nzNotFoundContent","No matches...",3,"nzStatus","nzSuggestions","nzValueWith","nzOnSearchChange","nzOnSelect"],["nz-input","","rows","1",2,"width","100%",3,"ngModel","ngModelChange"],["mpInputField",""],[4,"nzMentionSuggestion"],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","nzPopoverVisibleChange","click"],["nz-icon","","nzType","caret-down","nzTheme","outline"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],[3,"onVariantSelected"]],template:function(o,s){if(1&o&&(e.TgZ(0,"nz-card"),e.YNc(1,se,4,1,"ng-container",0),e.qZA(),e.YNc(2,Se,12,2,"ng-template",null,1,e.W1O)),2&o){const m=e.MAs(3);e.xp6(1),e.Q6J("ngIf",s.selectedMp)("ngIfElse",m)}},directives:[w.bd,T.O5,c.p,u.j,y.w,B.Ls,j.W,ie.SK,q.Nx,re.V,G.NU,G.$1,ee.ix,ae.dQ,$.C,te.ZU,X.YW,N.Fj,N.JJ,N.On,X.O3,ne.lU,T.PC,V.G],pipes:[oe.fM],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}.close-tag{margin-left:-9px;cursor:pointer}\n"],encapsulation:2}),a})();const Me=["complexMolecularProfileInputForm"],Ie={name:"molecular-profile-input",component:(()=>{class a extends D.fS{constructor(){super()}ngOnInit(){var o;(null===(o=this.field.formControl)||void 0===o?void 0:o.value)&&(this.field.templateOptions||(this.field.templateOptions={}),this.field.templateOptions.nzSelectedIndex=1)}onVariantSelected(o){this.field.formControl.setValue(o.molecularProfile)}onMpSelected(o){this.field.formControl.setValue(o)}clear(){var o;this.field.formControl.setValue(void 0),null===(o=this.complexMpForm)||void 0===o||o.resetForm()}}return a.\u0275fac=function(o){return new(o||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["cvc-molecular-profile-input-type"]],viewQuery:function(o,s){if(1&o&&e.Gf(Me,5),2&o){let m;e.iGM(m=e.CRH())&&(s.complexMpForm=m.first)}},features:[e.qOj],decls:8,vars:7,consts:[[3,"nzAnimated","nzSelectedIndex","nzSelectChange"],["nzTitle","Simple Molecular Profile"],[3,"allowCreate","onVariantSelected"],["nzTitle","Complex Molecular Profile"],[3,"formConfig","allowCreate","onMolecularProfileSelected"],["complexMolecularProfileInputForm",""],["type","hidden",3,"formControl","formlyAttributes"]],template:function(o,s){1&o&&(e.TgZ(0,"nz-card")(1,"nz-tabset",0),e.NdJ("nzSelectChange",function(){return s.clear()}),e.TgZ(2,"nz-tab",1)(3,"cvc-variant-submit-form",2),e.NdJ("onVariantSelected",function(P){return s.onVariantSelected(P)}),e.qZA()(),e.TgZ(4,"nz-tab",3)(5,"cvc-complex-molecular-profile-input-form",4,5),e.NdJ("onMolecularProfileSelected",function(P){return s.onMpSelected(P)}),e.qZA()()(),e._UZ(7,"input",6),e.qZA()),2&o&&(e.xp6(1),e.Q6J("nzAnimated",!1)("nzSelectedIndex",null==(null==s.field.templateOptions?null:s.field.templateOptions.nzSelectedIndex)?0:null==s.field.templateOptions?null:s.field.templateOptions.nzSelectedIndex),e.xp6(2),e.Q6J("allowCreate",null==s.field.templateOptions?null:s.field.templateOptions.allowCreate),e.xp6(2),e.Q6J("formConfig",s.field)("allowCreate",null==s.field.templateOptions?null:s.field.templateOptions.allowCreate),e.xp6(2),e.Q6J("formControl",s.formControl)("formlyAttributes",s.field))},directives:[w.bd,O.xH,O.xw,V.G,Te,N.Fj,N.JJ,N.oH,D.VQ],styles:[""]}),a})(),wrappers:["form-field"]};var Pe=t(7008),Ne=t(1825),Ae=t(4375),Fe=t(1017),De=t(2190),Oe=t(2359),pe=t(5959),Ee=t(2467);let we=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[T.ez,N.UX,oe.WG,ee.sL,w.vh,q.U5,B.PV,ne.$6,G.zf,X.Gl,Oe.L,j.j,te.ZJ,u.X,N.u5,Pe.B,Ne.A,Ae.R,De.r,Ee.u,pe.e,Fe.s]]}),a})(),ke=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[T.ez,N.UX,N.u5,D.X0.forChild({types:[Ie]}),l.Ju,O.we,w.vh,pe.e,we]]}),a})()},7338:(K,U,t)=>{t.d(U,{z:()=>M});var T=t(9808),D=t(6905),l=t(6949),N=t(8776),e=t(7484),w=t(5482),O=t(4546),V=t(1894),A=t(5017),Z=t(3610),n=t(8144),R=t(3618),E=t(1017),b=t(6789),r=t(5e3),x=t(2313);let S=(()=>{class i{constructor(u){this.sanitizer=u}transform(u){return this.sanitizer.bypassSecurityTrustHtml(u)}}return i.\u0275fac=function(u){return new(u||i)(r.Y36(x.H7,16))},i.\u0275pipe=r.Yjl({name:"sanitizeHtml",type:i,pure:!0}),i})();function F(i,c){if(1&i&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&i){const u=r.oxw(2);r.xp6(1),r.Oqu(u.to.label)}}function k(i,c){if(1&i&&r._UZ(0,"i",11),2&i){r.oxw();const u=r.MAs(3);r.Q6J("nzPopoverContent",u)}}function H(i,c){if(1&i&&(r._UZ(0,"span",12),r.ALo(1,"sanitizeHtml")),2&i){const u=r.oxw(3);r.Q6J("innerHtml",r.lcZ(1,1,u.to.helpText),r.oJD)}}function L(i,c){1&i&&(r.ynx(0),r.YNc(1,k,1,1,"i",9),r.YNc(2,H,2,3,"ng-template",null,10,r.W1O),r.BQk())}function h(i,c){if(1&i&&(r.ynx(0),r.TgZ(1,"nz-form-label",7)(2,"nz-space"),r.YNc(3,F,2,1,"span",8),r.YNc(4,L,4,0,"ng-container",1),r.qZA()(),r.BQk()),2&i){const u=r.oxw();r.xp6(1),r.Q6J("nzRequired",u.to.required&&!0!==u.to.hideRequiredMarker)("nzFor",u.id),r.xp6(3),r.Q6J("ngIf",u.to.helpText)}}const _=function(i){return{hidden:i}},p={wrappers:[{name:"form-field",component:(()=>{class i extends N.n2{get errorState(){return this.showError?"error":""}}return i.\u0275fac=function(){let c;return function(y){return(c||(c=r.n5z(i)))(y||i)}}(),i.\u0275cmp=r.Xpm({type:i,selectors:[["cvc-form-field-wrapper"]],features:[r.qOj],decls:10,vars:7,consts:[[3,"ngClass"],[4,"ngIf"],[3,"nzValidateStatus"],["fieldComponent",""],["nzType","danger"],[3,"field"],["nzType","secondary"],[3,"nzRequired","nzFor"],[4,"nzSpaceItem"],["nz-icon","","nzType","question-circle","nzTheme","outline","nz-popover","",3,"nzPopoverContent",4,"nzSpaceItem"],["help",""],["nz-icon","","nzType","question-circle","nzTheme","outline","nz-popover","",3,"nzPopoverContent"],[3,"innerHtml"]],template:function(u,y){1&u&&(r.TgZ(0,"div",0)(1,"nz-form-item"),r.YNc(2,h,5,3,"ng-container",1),r.TgZ(3,"nz-form-control",2),r.GkF(4,null,3),r.qZA(),r.TgZ(6,"nz-typography",4),r._UZ(7,"formly-validation-message",5),r.qZA(),r.TgZ(8,"nz-typography",6),r._uU(9),r.qZA()()()),2&u&&(r.Q6J("ngClass",r.VKq(5,_,!0===y.to.hidden)),r.xp6(2),r.Q6J("ngIf",y.to.label&&!0!==y.to.hideLabel),r.xp6(1),r.Q6J("nzValidateStatus",y.errorState),r.xp6(4),r.Q6J("field",y.field),r.xp6(2),r.hij(" ",y.to.optionText," "))},directives:[T.mk,V.SK,O.Nx,T.O5,V.t3,O.iK,n.NU,n.$1,A.Ls,Z.lU,O.Fd,R.ZU,N.u_],pipes:[S],styles:[".hidden[_ngcontent-%COMP%]{display:none}"]}),i})()}]};let M=(()=>{class i{}return i.\u0275fac=function(u){return new(u||i)},i.\u0275mod=r.oAB({type:i}),i.\u0275inj=r.cJS({imports:[[T.ez,l.WG,N.X0.forChild(p),V.Jb,e.vh,w.cD,b._,E.s,O.U5,A.PV,n.zf,Z.$6,D.s,R.ZJ]]}),i})()},6761:(K,U,t)=>{t.d(U,{Ju:()=>d,sn:()=>_});var T=t(655),D=t(1159),l=t(5e3),N=t(3075),e=t(3753),w=t(7625),O=t(9439),V=t(4090),A=t(1721),Z=t(226),n=t(9808),R=t(5017),E=t(404);const b=["nz-rate-item",""];function r(p,M){}function x(p,M){}function S(p,M){1&p&&l._UZ(0,"i",4)}const F=function(p){return{$implicit:p}},k=["ulElement"];function H(p,M){if(1&p){const i=l.EpF();l.TgZ(0,"li",3)(1,"div",4),l.NdJ("itemHover",function(u){const B=l.CHM(i).index;return l.oxw().onItemHover(B,u)})("itemClick",function(u){const B=l.CHM(i).index;return l.oxw().onItemClick(B,u)}),l.qZA()()}if(2&p){const i=M.index,c=l.oxw();l.Q6J("ngClass",c.starStyleArray[i]||"")("nzTooltipTitle",c.nzTooltips[i]),l.xp6(1),l.Q6J("allowHalf",c.nzAllowHalf)("character",c.nzCharacter)("index",i)}}let L=(()=>{class p{constructor(){this.index=0,this.allowHalf=!1,this.itemHover=new l.vpe,this.itemClick=new l.vpe}hoverRate(i){this.itemHover.next(i&&this.allowHalf)}clickRate(i){this.itemClick.next(i&&this.allowHalf)}}return p.\u0275fac=function(i){return new(i||p)},p.\u0275cmp=l.Xpm({type:p,selectors:[["","nz-rate-item",""]],inputs:{character:"character",index:"index",allowHalf:"allowHalf"},outputs:{itemHover:"itemHover",itemClick:"itemClick"},exportAs:["nzRateItem"],attrs:b,decls:6,vars:8,consts:[[1,"ant-rate-star-second",3,"mouseover","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-rate-star-first",3,"mouseover","click"],["defaultCharacter",""],["nz-icon","","nzType","star","nzTheme","fill"]],template:function(i,c){if(1&i&&(l.TgZ(0,"div",0),l.NdJ("mouseover",function(y){return c.hoverRate(!1),y.stopPropagation()})("click",function(){return c.clickRate(!1)}),l.YNc(1,r,0,0,"ng-template",1),l.qZA(),l.TgZ(2,"div",2),l.NdJ("mouseover",function(y){return c.hoverRate(!0),y.stopPropagation()})("click",function(){return c.clickRate(!0)}),l.YNc(3,x,0,0,"ng-template",1),l.qZA(),l.YNc(4,S,1,0,"ng-template",null,3,l.W1O)),2&i){const u=l.MAs(5);l.xp6(1),l.Q6J("ngTemplateOutlet",c.character||u)("ngTemplateOutletContext",l.VKq(4,F,c.index)),l.xp6(2),l.Q6J("ngTemplateOutlet",c.character||u)("ngTemplateOutletContext",l.VKq(6,F,c.index))}},directives:[n.tP,R.Ls],encapsulation:2,changeDetection:0}),(0,T.gn)([(0,A.yF)()],p.prototype,"allowHalf",void 0),p})();const h="rate";let _=(()=>{class p{constructor(i,c,u,y,B,j){this.nzConfigService=i,this.ngZone=c,this.renderer=u,this.cdr=y,this.directionality=B,this.destroy$=j,this._nzModuleName=h,this.nzAllowClear=!0,this.nzAllowHalf=!1,this.nzDisabled=!1,this.nzAutoFocus=!1,this.nzCount=5,this.nzTooltips=[],this.nzOnBlur=new l.vpe,this.nzOnFocus=new l.vpe,this.nzOnHoverChange=new l.vpe,this.nzOnKeyDown=new l.vpe,this.classMap={},this.starArray=[],this.starStyleArray=[],this.dir="ltr",this.hasHalf=!1,this.hoverValue=0,this.isFocused=!1,this._value=0,this.onChange=()=>null,this.onTouched=()=>null}get nzValue(){return this._value}set nzValue(i){this._value!==i&&(this._value=i,this.hasHalf=!Number.isInteger(i),this.hoverValue=Math.ceil(i))}ngOnChanges(i){const{nzAutoFocus:c,nzCount:u,nzValue:y}=i;if(c&&!c.isFirstChange()){const B=this.ulElement.nativeElement;this.nzAutoFocus&&!this.nzDisabled?this.renderer.setAttribute(B,"autofocus","autofocus"):this.renderer.removeAttribute(B,"autofocus")}u&&this.updateStarArray(),y&&this.updateStarStyle()}ngOnInit(){this.nzConfigService.getConfigChangeEventForComponent(h).pipe((0,w.R)(this.destroy$)).subscribe(()=>this.cdr.markForCheck()),this.directionality.change.pipe((0,w.R)(this.destroy$)).subscribe(i=>{this.dir=i,this.cdr.detectChanges()}),this.dir=this.directionality.value,this.ngZone.runOutsideAngular(()=>{(0,e.R)(this.ulElement.nativeElement,"focus").pipe((0,w.R)(this.destroy$)).subscribe(i=>{this.isFocused=!0,this.nzOnFocus.observers.length&&this.ngZone.run(()=>this.nzOnFocus.emit(i))}),(0,e.R)(this.ulElement.nativeElement,"blur").pipe((0,w.R)(this.destroy$)).subscribe(i=>{this.isFocused=!1,this.nzOnBlur.observers.length&&this.ngZone.run(()=>this.nzOnBlur.emit(i))})})}onItemClick(i,c){if(this.nzDisabled)return;this.hoverValue=i+1;const u=c?i+.5:i+1;this.nzValue===u?this.nzAllowClear&&(this.nzValue=0,this.onChange(this.nzValue)):(this.nzValue=u,this.onChange(this.nzValue)),this.updateStarStyle()}onItemHover(i,c){this.nzDisabled||this.hoverValue===i+1&&c===this.hasHalf||(this.hoverValue=i+1,this.hasHalf=c,this.nzOnHoverChange.emit(this.hoverValue),this.updateStarStyle())}onRateLeave(){this.hasHalf=!Number.isInteger(this.nzValue),this.hoverValue=Math.ceil(this.nzValue),this.updateStarStyle()}focus(){this.ulElement.nativeElement.focus()}blur(){this.ulElement.nativeElement.blur()}onKeyDown(i){const c=this.nzValue;i.keyCode===D.SV&&this.nzValue<this.nzCount?this.nzValue+=this.nzAllowHalf?.5:1:i.keyCode===D.oh&&this.nzValue>0&&(this.nzValue-=this.nzAllowHalf?.5:1),c!==this.nzValue&&(this.onChange(this.nzValue),this.nzOnKeyDown.emit(i),this.updateStarStyle(),this.cdr.markForCheck())}updateStarArray(){this.starArray=Array(this.nzCount).fill(0).map((i,c)=>c),this.updateStarStyle()}updateStarStyle(){this.starStyleArray=this.starArray.map(i=>{const c="ant-rate-star",u=i+1;return{[`${c}-full`]:u<this.hoverValue||!this.hasHalf&&u===this.hoverValue,[`${c}-half`]:this.hasHalf&&u===this.hoverValue,[`${c}-active`]:this.hasHalf&&u===this.hoverValue,[`${c}-zero`]:u>this.hoverValue,[`${c}-focused`]:this.hasHalf&&u===this.hoverValue&&this.isFocused}})}writeValue(i){this.nzValue=i||0,this.updateStarArray(),this.cdr.markForCheck()}setDisabledState(i){this.nzDisabled=i}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}}return p.\u0275fac=function(i){return new(i||p)(l.Y36(O.jY),l.Y36(l.R0b),l.Y36(l.Qsj),l.Y36(l.sBO),l.Y36(Z.Is,8),l.Y36(V.kn))},p.\u0275cmp=l.Xpm({type:p,selectors:[["nz-rate"]],viewQuery:function(i,c){if(1&i&&l.Gf(k,7),2&i){let u;l.iGM(u=l.CRH())&&(c.ulElement=u.first)}},inputs:{nzAllowClear:"nzAllowClear",nzAllowHalf:"nzAllowHalf",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus",nzCharacter:"nzCharacter",nzCount:"nzCount",nzTooltips:"nzTooltips"},outputs:{nzOnBlur:"nzOnBlur",nzOnFocus:"nzOnFocus",nzOnHoverChange:"nzOnHoverChange",nzOnKeyDown:"nzOnKeyDown"},exportAs:["nzRate"],features:[l._Bn([V.kn,{provide:N.JU,useExisting:(0,l.Gpc)(()=>p),multi:!0}]),l.TTD],decls:3,vars:7,consts:[[1,"ant-rate",3,"ngClass","tabindex","keydown","mouseleave"],["ulElement",""],["class","ant-rate-star","nz-tooltip","",3,"ngClass","nzTooltipTitle",4,"ngFor","ngForOf"],["nz-tooltip","",1,"ant-rate-star",3,"ngClass","nzTooltipTitle"],["nz-rate-item","",3,"allowHalf","character","index","itemHover","itemClick"]],template:function(i,c){1&i&&(l.TgZ(0,"ul",0,1),l.NdJ("keydown",function(y){return c.onKeyDown(y),y.preventDefault()})("mouseleave",function(y){return c.onRateLeave(),y.stopPropagation()}),l.YNc(2,H,2,5,"li",2),l.qZA()),2&i&&(l.ekj("ant-rate-disabled",c.nzDisabled)("ant-rate-rtl","rtl"===c.dir),l.Q6J("ngClass",c.classMap)("tabindex",c.nzDisabled?-1:1),l.xp6(2),l.Q6J("ngForOf",c.starArray))},directives:[L,n.mk,n.sg,E.SY],encapsulation:2,changeDetection:0}),(0,T.gn)([(0,O.oS)(),(0,A.yF)()],p.prototype,"nzAllowClear",void 0),(0,T.gn)([(0,O.oS)(),(0,A.yF)()],p.prototype,"nzAllowHalf",void 0),(0,T.gn)([(0,A.yF)()],p.prototype,"nzDisabled",void 0),(0,T.gn)([(0,A.yF)()],p.prototype,"nzAutoFocus",void 0),(0,T.gn)([(0,A.Rn)()],p.prototype,"nzCount",void 0),p})(),d=(()=>{class p{}return p.\u0275fac=function(i){return new(i||p)},p.\u0275mod=l.oAB({type:p}),p.\u0275inj=l.cJS({imports:[[Z.vT,n.ez,R.PV,E.cg]]}),p})()},6559:(K,U,t)=>{t.d(U,{H0:()=>L});var T=t(5e3),D=t(9808),l=t(226);let L=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=T.oAB({type:h}),h.\u0275inj=T.cJS({imports:[[l.vT,D.ez]]}),h})()}}]);