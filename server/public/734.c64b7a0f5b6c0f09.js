"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[734],{5749:(I,v,i)=>{i.d(v,{m:()=>X});var n=i(5e3),g=i(9808),t=i(325),u=i(8481),_=i(3610),p=i(4850),T=i(712),A=i(7484),Z=i(7881),y=i(1894),x=i(3098),d=i(6550),U=i(6949);const h=function(l,z){return{displayName:l,profileImagePath:z}};function M(l,z){if(1&l&&(n._UZ(0,"cvc-user-avatar",12),n.TgZ(1,"span",13),n._uU(2),n.qZA()),2&l){const m=n.oxw().ngIf;n.Q6J("user",n.WLB(2,h,m.name,m.profileImagePath)),n.xp6(2),n.Oqu(m.name)}}function E(l,z){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&l){const m=z.ngIf;n.xp6(1),n.Oqu(m)}}function F(l,z){if(1&l&&(n.ynx(0),n.TgZ(1,"cvc-link-tag",14),n._uU(2),n.qZA(),n.BQk()),2&l){const m=n.oxw().ngIf;n.xp6(1),n.Q6J("href",m.url),n.xp6(1),n.hij(" ",m.name," ")}}function S(l,z){if(1&l&&(n.ynx(0),n.TgZ(1,"nz-card",4),n.YNc(2,M,3,5,"ng-template",null,5,n.W1O),n.TgZ(4,"nz-row"),n.TgZ(5,"nz-col",6),n.TgZ(6,"div",7),n.TgZ(7,"p",8),n.YNc(8,E,2,1,"span",9),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(9,"nz-descriptions",10),n.TgZ(10,"nz-descriptions-item",11),n.YNc(11,F,3,2,"ng-container",9),n.qZA(),n.qZA(),n.qZA(),n.BQk()),2&l){const m=z.ngIf,J=n.MAs(3);n.oxw();const G=n.MAs(4),$=n.MAs(6);n.xp6(1),n.Q6J("nzTitle",J),n.xp6(7),n.Q6J("ngIf",m.description)("ngIfElse",G),n.xp6(1),n.Q6J("nzColumn",2),n.xp6(2),n.Q6J("ngIf",m.url)("ngIfElse",$)}}function w(l,z){1&l&&n._uU(0," Organization has not provided a description.\n")}function H(l,z){1&l&&n._uU(0," --\n")}let V=(()=>{class l{constructor(m){this.gql=m}ngOnInit(){if(void 0===this.orgId)throw new Error("cvc-org-popover requires orgId input.");this.org$=this.gql.watch({orgId:this.orgId}).valueChanges.pipe((0,p.U)(({data:m})=>m.organization))}}return l.\u0275fac=function(m){return new(m||l)(n.Y36(T.X5f))},l.\u0275cmp=n.Xpm({type:l,selectors:[["cvc-organization-popover"]],inputs:{orgId:"orgId"},decls:7,vars:3,consts:[["id","popover-content"],[4,"ngIf"],["noDesc",""],["noHomepage",""],["nzBordered","false","id","card-content",3,"nzTitle"],["cardTitle",""],["nzSpan","24"],[1,"popover-text"],["nz-typography",""],[4,"ngIf","ngIfElse"],["nzSize","small","nzBordered","true",3,"nzColumn"],["nzTitle","Homepage"],["size","default",3,"user"],["nz-typography","","nzStyle","default",1,"display-name"],[3,"href"]],template:function(m,J){1&m&&(n.TgZ(0,"div",0),n.YNc(1,S,12,6,"ng-container",1),n.ALo(2,"ngrxPush"),n.qZA(),n.YNc(3,w,1,0,"ng-template",null,2,n.W1O),n.YNc(5,H,1,0,"ng-template",null,3,n.W1O)),2&m&&(n.xp6(1),n.Q6J("ngIf",n.lcZ(2,1,J.org$)))},directives:[g.O5,A.bd,Z.L,y.SK,y.t3,x.R7,x.uj,d.l],pipes:[U.fM],styles:["[_nghost-%COMP%]{display:block;margin:-8px -12px}[_nghost-%COMP%]     .ant-card-body{padding:0;margin-top:1px}[_nghost-%COMP%]     .ant-descriptions-view{border:none}[_nghost-%COMP%]     #entity-child-counts{border-top:1px solid #f0f0f0;padding:8px}[_nghost-%COMP%]     #entity-child-counts nz-space{width:100%}[_nghost-%COMP%]     #entity-child-counts nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     #entity-child-counts nz-space-item:last-child nz-tag{margin-right:0}.popover-text[_ngcontent-%COMP%]{width:100%;padding:8px;border-bottom:1px solid #f0f0f0}#popover-content[_ngcontent-%COMP%]{min-width:350px;max-width:500px;min-height:125px}"]}),l})();var N=i(647);function k(l,z){}function Y(l,z){if(1&l&&(n.ynx(0),n.TgZ(1,"a",5),n.YNc(2,k,0,0,"ng-template",6),n.qZA(),n.BQk()),2&l){const m=n.oxw(),J=n.MAs(2);n.xp6(1),n.MGl("routerLink","/organizations/",m.org.id,""),n.xp6(1),n.Q6J("ngTemplateOutlet",J)}}function K(l,z){}function C(l,z){if(1&l&&n._UZ(0,"cvc-organization-popover",10),2&l){const m=n.oxw(3);n.Q6J("orgId",m.org.id)}}function O(l,z){if(1&l&&n.YNc(0,C,1,1,"cvc-organization-popover",9),2&l){const m=n.oxw(2);n.Q6J("ngIf",m.enablePopover)}}function f(l,z){if(1&l&&(n.TgZ(0,"nz-tag",7),n.YNc(1,K,0,0,"ng-template",6),n.qZA(),n.YNc(2,O,1,1,"ng-template",null,8,n.W1O)),2&l){const m=n.MAs(3);n.oxw();const J=n.MAs(8);n.Q6J("nzPopoverContent",m),n.xp6(1),n.Q6J("ngTemplateOutlet",J)}}function b(l,z){}function R(l,z){if(1&l&&(n.TgZ(0,"nz-tag"),n.YNc(1,b,0,0,"ng-template",6),n.qZA()),2&l){n.oxw();const m=n.MAs(8);n.xp6(1),n.Q6J("ngTemplateOutlet",m)}}function B(l,z){}function W(l,z){if(1&l&&n.YNc(0,B,0,0,"ng-template",6),2&l){n.oxw();const m=n.MAs(2);n.Q6J("ngTemplateOutlet",m)}}function Q(l,z){if(1&l&&(n._UZ(0,"i",11),n._uU(1)),2&l){const m=n.oxw();n.xp6(1),n.hij(" ",m.org.name,"\n")}}let X=(()=>{class l{constructor(){this.linked=!0,this.enablePopover=!0}ngOnInit(){if(void 0===this.org)throw new Error("cvc-org-tag requires valid TagLinkableOrganization input, none provided.")}}return l.\u0275fac=function(m){return new(m||l)},l.\u0275cmp=n.Xpm({type:l,selectors:[["cvc-organization-tag"]],inputs:{org:"org",linked:"linked",enablePopover:"enablePopover"},decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["tag",""],["noPopover",""],["unlinked",""],["tagContent",""],[3,"routerLink"],[3,"ngTemplateOutlet"],["nz-popover","",3,"nzPopoverContent"],["orgPopover",""],[3,"orgId",4,"ngIf"],[3,"orgId"],["nz-icon","","nzType","civic-organization","nzTheme","twotone","nzTwotoneColor","#58A0C4"]],template:function(m,J){if(1&m&&(n.YNc(0,Y,3,2,"ng-container",0),n.YNc(1,f,4,2,"ng-template",null,1,n.W1O),n.YNc(3,R,2,1,"ng-template",null,2,n.W1O),n.YNc(5,W,1,1,"ng-template",null,3,n.W1O),n.YNc(7,Q,2,1,"ng-template",null,4,n.W1O)),2&m){const G=n.MAs(6);n.Q6J("ngIf",J.linked)("ngIfElse",G)}},directives:[g.O5,t.yS,g.tP,u.j,_.lU,V,N.Ls],styles:["[_nghost-%COMP%]{display:inline-block}"]}),l})()},4805:(I,v,i)=>{i.d(v,{_:()=>u});var n=i(5e3),g=i(7484);const t=["*"];let u=(()=>{class _{constructor(){this.cvcTitle=void 0}ngOnInit(){}}return _.\u0275fac=function(T){return new(T||_)},_.\u0275cmp=n.Xpm({type:_,selectors:[["cvc-entity-table-card"]],inputs:{cvcTitle:"cvcTitle"},ngContentSelectors:t,decls:3,vars:1,consts:[[3,"nzTitle"],[1,"card-content"]],template:function(T,A){1&T&&(n.F$t(),n.TgZ(0,"nz-card",0),n.TgZ(1,"div",1),n.Hsn(2),n.qZA(),n.qZA()),2&T&&n.Q6J("nzTitle",A.cvcTitle)},directives:[g.bd],styles:["[_nghost-%COMP%]{display:block}.card-content[_ngcontent-%COMP%]{margin:-11px -12px -13px}"]}),_})()},316:(I,v,i)=>{i.d(v,{C:()=>u});var n=i(9808),g=i(7484),t=i(5e3);let u=(()=>{class _{}return _.\u0275fac=function(T){return new(T||_)},_.\u0275mod=t.oAB({type:_}),_.\u0275inj=t.cJS({imports:[[n.ez,g.vh]]}),_})()},2233:(I,v,i)=>{i.d(v,{P:()=>x});var n=i(5e3),g=i(325),t=i(1894),u=i(868),_=i(9808),p=i(647);const T=["tabBarExtraContent"];function A(d,U){if(1&d&&n.GkF(0,5),2&d){const h=n.oxw();n.Q6J("ngTemplateOutlet",h.tabBarExtraContent||null)}}function Z(d,U){if(1&d&&(n.TgZ(0,"a",7),n._UZ(1,"i",8),n._uU(2),n.qZA()),2&d){const h=n.oxw().$implicit;n.Q6J("routerLink",h.routeName),n.xp6(1),n.Q6J("nzType",h.iconName),n.xp6(1),n.hij(" ",h.tabLabel," ")}}function y(d,U){1&d&&(n.TgZ(0,"nz-tab"),n.YNc(1,Z,3,3,"a",6),n.qZA())}let x=(()=>{class d{constructor(h){this.router=h,this.selectedTabIndex=this.getActivatedRouteIndex(this.router.url)}getActivatedRouteIndex(h){var M;return null===(M=this.tabs)||void 0===M?void 0:M.findIndex(E=>h.includes(E.routeName))}}return d.\u0275fac=function(h){return new(h||d)(n.Y36(g.F0))},d.\u0275cmp=n.Xpm({type:d,selectors:[["cvc-tab-navigation"]],contentQueries:function(h,M,E){if(1&h&&n.Suo(E,T,5),2&h){let F;n.iGM(F=n.CRH())&&(M.tabBarExtraContent=F.first)}},inputs:{entity:"entity",tabs:"tabs"},decls:6,vars:3,consts:[["id","section-tabs"],["nzSpan","24"],["nzLinkRouter","","nzType","card","nzSize","small",3,"nzSelectedIndex","nzTabBarExtraContent"],["extraTpl",""],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["nz-tab-link","",3,"routerLink",4,"nzTabLink"],["nz-tab-link","",3,"routerLink"],["nz-icon","",3,"nzType"]],template:function(h,M){if(1&h&&(n.TgZ(0,"nz-row",0),n.TgZ(1,"nz-col",1),n.TgZ(2,"nz-tabset",2),n.YNc(3,A,1,1,"ng-template",null,3,n.W1O),n.YNc(5,y,2,0,"nz-tab",4),n.qZA(),n.qZA(),n.qZA()),2&h){const E=n.MAs(4);n.xp6(2),n.Q6J("nzSelectedIndex",M.selectedTabIndex)("nzTabBarExtraContent",E),n.xp6(3),n.Q6J("ngForOf",M.tabs)}},directives:[t.SK,t.t3,u.xH,_.tP,_.sg,u.xw,u.Fx,u.Ao,g.yS,p.Ls],styles:["[_nghost-%COMP%]{display:block}"]}),d})()},8762:(I,v,i)=>{i.d(v,{c:()=>A});var n=i(9808),g=i(868),t=i(1894),u=i(325),_=i(647),p=i(6949),T=i(5e3);let A=(()=>{class Z{}return Z.\u0275fac=function(x){return new(x||Z)},Z.\u0275mod=T.oAB({type:Z}),Z.\u0275inj=T.cJS({imports:[[n.ez,u.Bz,g.we,t.Jb,_.PV,p.WG]]}),Z})()},1243:(I,v,i)=>{i.d(v,{I:()=>g});var n=i(5e3);let g=(()=>{class t{transform(_){if(_){let T=_.toLowerCase().replace(/_/g," ").split(" ");for(var p=0;p<T.length;p++)T[p]=T[p].charAt(0).toUpperCase()+T[p].slice(1);return T.join(" ")}return""}}return t.\u0275fac=function(_){return new(_||t)},t.\u0275pipe=n.Yjl({name:"enumToTitle",type:t,pure:!0}),t})()},9058:(I,v,i)=>{i.d(v,{j:()=>t});var n=i(712),g=i(5e3);let t=(()=>{class u{transform(p){switch(p){case"ASSERTION":case"Assertion":case n.o71.Assertion:return"civic:assertion";case"EVIDENCE_ITEM":case"EvidenceItem":case n.o71.EvidenceItem:return"civic:evidence";case"GENE":case"Gene":case n.o71.Gene:return"civic:gene";case n.o71.Revision:case"REVISION":case"Revision":return"civic:revision";case n.o71.Variant:case"VARIANT":case"Variant":return"civic:variant";case n.o71.VariantGroup:case"VARIANT_GROUP":case"VariantGrou":return"civic:variant-group";default:return console.log("String No icon name found for "+p),"border-outer"}}}return u.\u0275fac=function(p){return new(p||u)},u.\u0275pipe=g.Yjl({name:"iconNameForSubscribableEntity",type:u,pure:!0}),u})()},9180:(I,v,i)=>{i.d(v,{Z:()=>t});var n=i(5e3);const g=["*"];let t=(()=>{class u{constructor(){}ngOnInit(){}}return u.\u0275fac=function(p){return new(p||u)},u.\u0275cmp=n.Xpm({type:u,selectors:[["cvc-form-buttons"]],ngContentSelectors:g,decls:2,vars:0,consts:[[1,"form-buttons"]],template:function(p,T){1&p&&(n.F$t(),n.TgZ(0,"div",0),n.Hsn(1),n.qZA())},styles:["[_nghost-%COMP%]{display:block}.form-buttons[_ngcontent-%COMP%]{text-align:right}"]}),u})()},4375:(I,v,i)=>{i.d(v,{R:()=>t});var n=i(9808),g=i(5e3);let t=(()=>{class u{}return u.\u0275fac=function(p){return new(p||u)},u.\u0275mod=g.oAB({type:u}),u.\u0275inj=g.cJS({imports:[[n.ez]]}),u})()},8227:(I,v,i)=>{i.d(v,{q:()=>K});var n=i(5e3),g=i(8929),t=i(4850),u=i(373),_=i(2868),p=i(7625),T=i(1793),A=i(9350),Z=i(9808),y=i(6042),x=i(2683),d=i(2643),U=i(3677),h=i(8144),M=i(6699),E=i(4219);function F(C,O){1&C&&n.Hsn(0)}function S(C,O){1&C&&n.GkF(0)}function w(C,O){if(1&C&&(n.ynx(0),n.YNc(1,S,1,0,"ng-container",5),n.BQk()),2&C){n.oxw(2);const f=n.MAs(1);n.xp6(1),n.Q6J("ngTemplateOutlet",f)}}function H(C,O){1&C&&n.GkF(0)}function V(C,O){if(1&C&&(n.ynx(0),n.TgZ(1,"nz-button-group",6),n.YNc(2,H,1,0,"ng-container",5),n.TgZ(3,"button",7),n.TgZ(4,"nz-space",8),n.TgZ(5,"span"),n._uU(6,"for"),n.qZA(),n._UZ(7,"nz-avatar",9),n._UZ(8,"i",10),n.qZA(),n.qZA(),n.qZA(),n.BQk()),2&C){n.oxw();const f=n.MAs(4),b=n.oxw(),R=n.MAs(1);n.xp6(1),n.Q6J("nzSize",b.nzSize),n.xp6(1),n.Q6J("ngTemplateOutlet",R),n.xp6(1),n.Q6J("nzType",b.buttonType)("nzDanger",b.nzDanger)("disabled",b.disabled)("nzDropdownMenu",f),n.xp6(1),n.Q6J("nzSize",4),n.xp6(3),n.Q6J("nzSrc",null==b.selectedOrg?null:b.selectedOrg.profileImagePath)("nzSize",10)("nzShape","square")}}function N(C,O){if(1&C){const f=n.EpF();n.TgZ(0,"li",11),n.NdJ("click",function(){const B=n.CHM(f).$implicit;return n.oxw(2).selectOrg(B)}),n._UZ(1,"nz-avatar",12),n._uU(2),n.qZA()}if(2&C){const f=O.$implicit,b=n.oxw(2);n.Q6J("nzSelected",(null==b.selectedOrg?null:b.selectedOrg.id)===f.id),n.xp6(1),n.Q6J("nzSrc",null==f?null:f.profileImagePath)("nzSize",10)("nzShape","square"),n.xp6(1),n.hij(" ",f.name," ")}}function k(C,O){if(1&C&&(n.ynx(0),n.YNc(1,w,2,1,"ng-container",1),n.YNc(2,V,9,10,"ng-container",1),n.TgZ(3,"nz-dropdown-menu",null,2),n.TgZ(5,"ul",3),n.YNc(6,N,3,5,"li",4),n.qZA(),n.qZA(),n.BQk()),2&C){const f=O.ngIf;n.xp6(1),n.Q6J("ngIf",f.length<=1),n.xp6(1),n.Q6J("ngIf",f.length>1),n.xp6(4),n.Q6J("ngForOf",f)}}const Y=["*"];let K=(()=>{class C{constructor(f){this.viewerService=f,this.selectedOrgChange=new n.vpe,this.buttonType="primary",this.nzDanger=!1,this.nzSize="small",this.destroy$=new g.xQ}get disabled(){return this.button.disabled}selectOrg(f){this.selectedOrg=f,this.selectedOrgChange.emit(f)}ngOnInit(){this.organizations$=this.viewerService.viewer$.pipe((0,t.U)(f=>f.organizations)),this.mostRecentOrg$=this.viewerService.viewer$.pipe((0,u.j)("mostRecentOrg"),(0,_.b)(f=>{f&&(this.selectedOrg=f,this.selectedOrgChange.emit(f))})),this.mostRecentOrg$.pipe((0,p.R)(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return C.\u0275fac=function(f){return new(f||C)(n.Y36(A.a))},C.\u0275cmp=n.Xpm({type:C,selectors:[["cvc-org-selector-btn-group"]],contentQueries:function(f,b,R){if(1&f&&n.Suo(R,T.m,5),2&f){let B;n.iGM(B=n.CRH())&&(b.button=B.first)}},inputs:{selectedOrg:"selectedOrg",buttonType:"buttonType",nzDanger:"nzDanger",nzSize:"nzSize"},outputs:{selectedOrgChange:"selectedOrgChange"},ngContentSelectors:Y,decls:4,vars:3,consts:[["submitButton",""],[4,"ngIf"],["orgMenu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"nzSelected","click",4,"ngFor","ngForOf"],[4,"ngTemplateOutlet"],[3,"nzSize"],["type","button","nz-button","","nz-dropdown","",1,"org-dropdown-btn",3,"nzType","nzDanger","disabled","nzDropdownMenu"],["nzDirection","horizontal",3,"nzSize"],[3,"nzSrc","nzSize","nzShape"],["nz-icon","","nzType","down"],["nz-menu-item","",3,"nzSelected","click"],[2,"background-color","#f0f5ff",3,"nzSrc","nzSize","nzShape"]],template:function(f,b){1&f&&(n.F$t(),n.YNc(0,F,1,0,"ng-template",null,0,n.W1O),n.YNc(2,k,7,3,"ng-container",1),n.ALo(3,"async")),2&f&&(n.xp6(2),n.Q6J("ngIf",n.lcZ(3,1,b.organizations$)))},directives:[Z.O5,Z.tP,y.fY,x.w,y.ix,d.dQ,U.wA,U.cm,h.NU,M.Dz,U.RR,E.wO,Z.sg,E.r9],pipes:[Z.Ov],styles:["[_nghost-%COMP%]{display:inline-block}.org-dropdown-btn[_ngcontent-%COMP%]   nz-avatar[_ngcontent-%COMP%]{margin:0 6px}"]}),C})()},1825:(I,v,i)=>{i.d(v,{A:()=>T});var n=i(9808),g=i(6042),t=i(6699),u=i(3677),_=i(8144),p=i(5e3);let T=(()=>{class A{}return A.\u0275fac=function(y){return new(y||A)},A.\u0275mod=p.oAB({type:A}),A.\u0275inj=p.cJS({imports:[[n.ez,g.sL,t.Rt,u.b1,_.zf]]}),A})()},1793:(I,v,i)=>{i.d(v,{m:()=>g});var n=i(5e3);let g=(()=>{class t{constructor(_){this.el=_,this.observer=new MutationObserver(([p])=>this.disabled=p.target.disabled),this.observer.observe(this.el.nativeElement,{attributeFilter:["disabled"],childList:!1,subtree:!1})}ngOnDestroy(){this.observer.disconnect()}}return t.\u0275fac=function(_){return new(_||t)(n.Y36(n.SBq))},t.\u0275dir=n.lG2({type:t,selectors:[["button","cvcOrgSelectorBtn",""]],hostVars:2,hostBindings:function(_,p){2&_&&n.ekj("ant-btn-dangerous",p.nzDanger)}}),t})()},4623:(I,v,i)=>{i.d(v,{K:()=>y});var n=i(9808),g=i(8776),t=i(5e3),u=i(1047),_=i(4182);const T={name:"comment-textarea",component:(()=>{class x extends g.fS{constructor(){super(...arguments),this.defaultOptions={defaultValue:"",validation:{messages:{minlength:(U,h)=>{var M;return`Comments must be at least ${null===(M=h.templateOptions)||void 0===M?void 0:M.minLength} characters in length.`}}},templateOptions:{rows:4}}}}return x.\u0275fac=function(){let d;return function(h){return(d||(d=t.n5z(x)))(h||x)}}(),x.\u0275cmp=t.Xpm({type:x,selectors:[["comment-textarea-type"]],features:[t.qOj],decls:1,vars:2,consts:[["nz-input","",3,"formControl","formlyAttributes"]],template:function(U,h){1&U&&t._UZ(0,"textarea",0),2&U&&t.Q6J("formControl",h.formControl)("formlyAttributes",h.field)},directives:[u.Zp,_.Fj,_.JJ,_.oH,g.VQ],styles:[""],changeDetection:0}),x})(),wrappers:["form-field"]};var A=i(4546),Z=i(9139);let y=(()=>{class x{}return x.\u0275fac=function(U){return new(U||x)},x.\u0275mod=t.oAB({type:x}),x.\u0275inj=t.cJS({imports:[[n.ez,_.UX,g.X0.forChild({types:[T]}),Z.u,A.U5,u.o7]]}),x})()},1949:(I,v,i)=>{i.r(v),i.d(v,{UsersModule:()=>en});var n=i(9808),g=i(325),t=i(5e3),u=i(4805),_=i(3756),p=i(647);function T(o,s){1&o&&(t._UZ(0,"i",3),t._uU(1," User Assertions\n"))}let A=(()=>{class o{constructor(e){this.route=e,this.userId=+this.route.snapshot.params.userId}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-users-assertions"]],decls:4,vars:2,consts:[[3,"cvcTitle"],[3,"userId"],["assertionsCardTitle",""],["nz-icon","","nzType","civic:assertion"]],template:function(e,a){if(1&e&&(t.TgZ(0,"cvc-entity-table-card",0),t._UZ(1,"cvc-assertions-table",1),t.qZA(),t.YNc(2,T,2,0,"ng-template",null,2,t.W1O)),2&e){const r=t.MAs(3);t.Q6J("cvcTitle",r),t.xp6(1),t.Q6J("userId",a.userId)}},directives:[u._,_.x,p.Ls],styles:["[_nghost-%COMP%]{display:block}"]}),o})();var Z=i(373),y=i(1059),x=i(591),d=i(712),U=i(9350),h=i(8992),M=i(1945),E=i(2359),F=i(2233),S=i(1894),w=i(8144),H=i(7881),V=i(520),N=i(6042),k=i(2643),Y=i(2683);let K=(()=>{class o{constructor(e){this.http=e,this.uploadComplete=new t.vpe}processProfileImage(e){if(e&&e[0]){let a=new FormData;a.append("image",e[0],e[0].name),this.uploadSubscription=this.http.post("/api/upload_profile_image",a).subscribe(r=>this.uploadComplete.emit(!0),r=>this.uploadComplete.emit(!1))}}ngOnDestroy(){var e;null===(e=this.uploadSubscription)||void 0===e||e.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(V.eN))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-avatar-uploader"]],outputs:{uploadComplete:"uploadComplete"},decls:5,vars:0,consts:[["type","file","accept","image/*",2,"display","none",3,"change"],["profileImage",""],["nz-button","","nzSize","small",3,"click"],["nz-icon","","nzType","upload","nzTheme","outline"]],template:function(e,a){if(1&e){const r=t.EpF();t.TgZ(0,"input",0,1),t.NdJ("change",function(){t.CHM(r);const P=t.MAs(1);return a.processProfileImage(P.files)}),t.qZA(),t.TgZ(2,"button",2),t.NdJ("click",function(){return t.CHM(r),t.MAs(1).click()}),t._UZ(3,"i",3),t._uU(4,"Upload Image"),t.qZA()}},directives:[N.ix,k.dQ,Y.w,p.Ls],styles:[""]}),o})();var C=i(3098),O=i(5749),f=i(5737),b=i(7484),R=i(5249),B=i(3640),W=i(6123),Q=i(6738),X=i(8929),l=i(4850),z=i(7625),m=i(9169),J=i(4546),G=i(822),$=i(7525),D=i(4182),j=i(8054),L=i(6949);function pt(o,s){1&o&&t._UZ(0,"nz-alert",13)}function _t(o,s){if(1&o&&(t.TgZ(0,"nz-form-item"),t._UZ(1,"cvc-form-errors-alert",14),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("errors",e.errorMessages)}}function ut(o,s){if(1&o&&t._UZ(0,"nz-option",15),2&o){const e=s.$implicit;t.Q6J("nzLabel",e.name)("nzValue",e.id)}}let gt=(()=>{class o{constructor(e,a,r){this.updateProfileGql=e,this.profileUpdatedEvent=new t.vpe,this.success=!1,this.errorMessages=[],this.loading=!1,this.destroy$=new X.xQ,this.updateProfileMutator=new W.U(r),this.countries$=a.fetch().pipe((0,l.U)(({data:c})=>c.countries))}ngOnInit(){if(!this.user)throw new Error("Must pass a user into the Profile Update Form");this.setInitialFormFields()}updateProfile(){if(this.username&&this.email){this.errorMessages=[];let e={username:this.username,email:this.email,name:(0,Q.xt)(this.name),areaOfExpertise:(0,Q.uP)(this.areaOfExpertise),orcid:(0,Q.xt)(this.orcid),url:(0,Q.xt)(this.url),bio:(0,Q.xt)(this.bio),countryId:(0,Q.uP)(this.countryId),twitterHandle:(0,Q.xt)(this.twitterHandle),facebookProfile:(0,Q.xt)(this.facebookProfile),linkedinProfile:(0,Q.xt)(this.linkedinProfile)},a=this.updateProfileMutator.mutate(this.updateProfileGql,{input:e});a.submitSuccess$.pipe((0,z.R)(this.destroy$)).subscribe(r=>{r&&(this.setInitialFormFields(),this.success=!0,this.profileUpdatedEvent.emit())}),a.submitError$.pipe((0,z.R)(this.destroy$)).subscribe(r=>{r&&(this.errorMessages=r,this.success=!1)}),a.isSubmitting$.pipe((0,z.R)(this.destroy$)).subscribe(r=>{this.loading=r})}}setInitialFormFields(){var e;this.name=this.user.name,this.username=this.user.username,this.email=this.user.email,this.areaOfExpertise=this.user.areaOfExpertise,this.orcid=this.user.orcid,this.url=this.user.url,this.bio=this.user.bio,this.twitterHandle=this.user.twitterHandle,this.facebookProfile=this.user.facebookProfile,this.linkedinProfile=this.user.linkedinProfile,this.countryId=null===(e=this.user.country)||void 0===e?void 0:e.id}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.wbP),t.Y36(d.l4w),t.Y36(m.Y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-user-profile-form"]],inputs:{user:"user"},outputs:{profileUpdatedEvent:"profileUpdatedEvent"},decls:56,vars:18,consts:[["nzBanner","","nzMessage","Profile Updated","nzType","success","nzCloseable","",4,"ngIf"],[4,"ngIf"],["nzTip","Submitting",3,"nzSpinning"],["nzRequired",""],["nz-input","",2,"width","100%",3,"ngModel","ngModelChange"],["nz-input","","rows","5",2,"width","100%",3,"ngModel","ngModelChange"],["nzAllowClear","","nzShowSearch","",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzAllowClear","",3,"ngModel","ngModelChange"],["nzLabel","Patient Advocate","nzValue","PATIENT_ADVOCATE"],["nzLabel","Clinical Scientist","nzValue","CLINICAL_SCIENTIST"],["nzLabel","Research Scientist","nzValue","RESEARCH_SCIENTIST"],["type","submit","nz-button","","nzType","primary","nzSize","small",2,"width","100%",3,"disabled","click"],["nzBanner","","nzMessage","Profile Updated","nzType","success","nzCloseable",""],[3,"errors"],[3,"nzLabel","nzValue"]],template:function(e,a){1&e&&(t.TgZ(0,"nz-card"),t.YNc(1,pt,1,0,"nz-alert",0),t.YNc(2,_t,2,1,"nz-form-item",1),t.TgZ(3,"nz-spin",2),t.TgZ(4,"nz-form-item"),t.TgZ(5,"nz-form-label",3),t._uU(6,"Username"),t.qZA(),t.TgZ(7,"input",4),t.NdJ("ngModelChange",function(c){return a.username=c}),t.qZA(),t.qZA(),t.TgZ(8,"nz-form-item"),t.TgZ(9,"nz-form-label"),t._uU(10,"Name"),t.qZA(),t.TgZ(11,"input",4),t.NdJ("ngModelChange",function(c){return a.name=c}),t.qZA(),t.qZA(),t.TgZ(12,"nz-form-item"),t.TgZ(13,"nz-form-label",3),t._uU(14,"Email"),t.qZA(),t.TgZ(15,"input",4),t.NdJ("ngModelChange",function(c){return a.email=c}),t.qZA(),t.qZA(),t.TgZ(16,"nz-form-item"),t.TgZ(17,"nz-form-label"),t._uU(18,"User Bio"),t.qZA(),t.TgZ(19,"textarea",5),t.NdJ("ngModelChange",function(c){return a.bio=c}),t.qZA(),t.qZA(),t.TgZ(20,"nz-form-item"),t.TgZ(21,"nz-form-label"),t._uU(22,"Country"),t.qZA(),t.TgZ(23,"nz-select",6),t.NdJ("ngModelChange",function(c){return a.countryId=c}),t.YNc(24,ut,1,2,"nz-option",7),t.ALo(25,"ngrxPush"),t.qZA(),t.qZA(),t.TgZ(26,"nz-form-item"),t.TgZ(27,"nz-form-label"),t._uU(28,"Area of Expertise"),t.qZA(),t.TgZ(29,"nz-select",8),t.NdJ("ngModelChange",function(c){return a.areaOfExpertise=c}),t._UZ(30,"nz-option",9),t._UZ(31,"nz-option",10),t._UZ(32,"nz-option",11),t.qZA(),t.qZA(),t.TgZ(33,"nz-form-item"),t.TgZ(34,"nz-form-label"),t._uU(35,"ORCID Identifier"),t.qZA(),t.TgZ(36,"input",4),t.NdJ("ngModelChange",function(c){return a.orcid=c}),t.qZA(),t.qZA(),t.TgZ(37,"nz-form-item"),t.TgZ(38,"nz-form-label"),t._uU(39,"Personal Website"),t.qZA(),t.TgZ(40,"input",4),t.NdJ("ngModelChange",function(c){return a.url=c}),t.qZA(),t.qZA(),t.TgZ(41,"nz-form-item"),t.TgZ(42,"nz-form-label"),t._uU(43,"Twitter Handle"),t.qZA(),t.TgZ(44,"input",4),t.NdJ("ngModelChange",function(c){return a.twitterHandle=c}),t.qZA(),t.qZA(),t.TgZ(45,"nz-form-item"),t.TgZ(46,"nz-form-label"),t._uU(47,"Facebook Profile"),t.qZA(),t.TgZ(48,"input",4),t.NdJ("ngModelChange",function(c){return a.facebookProfile=c}),t.qZA(),t.qZA(),t.TgZ(49,"nz-form-item"),t.TgZ(50,"nz-form-label"),t._uU(51,"LinkedIn Profile"),t.qZA(),t.TgZ(52,"input",4),t.NdJ("ngModelChange",function(c){return a.linkedinProfile=c}),t.qZA(),t.qZA(),t.TgZ(53,"nz-form-item"),t.TgZ(54,"button",12),t.NdJ("click",function(){return a.updateProfile()}),t._uU(55," Update Profile "),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",a.success),t.xp6(1),t.Q6J("ngIf",a.errorMessages.length>0),t.xp6(1),t.Q6J("nzSpinning",a.loading),t.xp6(4),t.Q6J("ngModel",a.username),t.xp6(4),t.Q6J("ngModel",a.name),t.xp6(4),t.Q6J("ngModel",a.email),t.xp6(4),t.Q6J("ngModel",a.bio),t.xp6(4),t.Q6J("ngModel",a.countryId),t.xp6(1),t.Q6J("ngForOf",t.lcZ(25,16,a.countries$)),t.xp6(5),t.Q6J("ngModel",a.areaOfExpertise),t.xp6(7),t.Q6J("ngModel",a.orcid),t.xp6(4),t.Q6J("ngModel",a.url),t.xp6(4),t.Q6J("ngModel",a.twitterHandle),t.xp6(4),t.Q6J("ngModel",a.facebookProfile),t.xp6(4),t.Q6J("ngModel",a.linkedinProfile),t.xp6(2),t.Q6J("disabled",a.loading||!a.username||!a.email))},directives:[b.bd,n.O5,E.r,S.SK,J.Nx,G.V,$.W,S.t3,J.iK,D.Fj,D.JJ,D.On,j.Vq,n.sg,j.Ip,N.ix,k.dQ,Y.w],pipes:[L.fM],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}nz-form-item[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}"]}),o})();var dt=i(8785),at=i(1243);function mt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"nz-alert",32),t.NdJ("nzOnClose",function(){return t.CHM(e),t.oxw(2).uploadError=!1}),t.qZA()}}function ft(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"nz-alert",33),t.NdJ("nzOnClose",function(){return t.CHM(e),t.oxw(2).updateSuccess=!1}),t.qZA()}}function ht(o,s){if(1&o&&t._UZ(0,"cvc-user-avatar",34),2&o){const e=t.oxw().ngIf;t.Q6J("user",e)("size",128)}}function zt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"cvc-avatar-uploader",36),t.NdJ("uploadComplete",function(r){return t.CHM(e),t.oxw(3).profileUploadComplete(r)}),t.qZA()}}function Ct(o,s){1&o&&(t.ynx(0),t.YNc(1,zt,1,0,"cvc-avatar-uploader",35),t.BQk())}function vt(o,s){1&o&&t._UZ(0,"cvc-organization-tag",39),2&o&&t.Q6J("org",s.$implicit)}function Tt(o,s){if(1&o&&(t.TgZ(0,"nz-descriptions-item",37),t.YNc(1,vt,1,1,"cvc-organization-tag",38),t.qZA()),2&o){const e=t.oxw().ngIf;t.Q6J("nzSpan",4),t.xp6(1),t.Q6J("ngForOf",e.organizations)}}function Zt(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).updateProfileModalVisible=!0}),t._uU(2," Update Profile "),t._UZ(3,"i",41),t.qZA(),t.BQk()}}function xt(o,s){if(1&o&&(t.YNc(0,Zt,4,0,"ng-container",0),t.ALo(1,"ngrxPush")),2&o){const e=t.oxw(2);t.Q6J("ngIf",t.lcZ(1,1,e.ownProfile$))}}function Mt(o,s){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(3).ngIf;t.xp6(1),t.hij(" ",e.mostRecentConflictOfInterestStatement.coiStatement," ")}}function bt(o,s){1&o&&t._uU(0," I do not have any potential conflicts of interest. ")}function Ut(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"nz-descriptions-item",44),t._uU(2),t.ALo(3,"enumToTitle"),t.qZA(),t.TgZ(4,"nz-descriptions-item",45),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"nz-descriptions-item",46),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"nz-descriptions-item",47),t.YNc(11,Mt,2,1,"ng-container",48),t.YNc(12,bt,1,0,"ng-template",null,49,t.W1O),t.qZA(),t.BQk()),2&o){const e=t.MAs(13),a=t.oxw(2).ngIf;t.xp6(1),t.Q6J("nzSpan",3),t.xp6(1),t.hij(" ",t.lcZ(3,9,a.mostRecentConflictOfInterestStatement.coiStatus)," "),t.xp6(2),t.Q6J("nzSpan",2),t.xp6(1),t.hij("",t.xi3(6,11,a.mostRecentConflictOfInterestStatement.createdAt,"shortDate")," "),t.xp6(2),t.Q6J("nzSpan",2),t.xp6(1),t.hij(" ",t.xi3(9,14,a.mostRecentConflictOfInterestStatement.expiresAt,"shortDate")," "),t.xp6(2),t.Q6J("nzSpan",3),t.xp6(1),t.Q6J("ngIf",a.mostRecentConflictOfInterestStatement.coiPresent)("ngIfElse",e)}}function At(o,s){1&o&&(t.ynx(0),t.TgZ(1,"nz-descriptions-item",44),t._uU(2,"None on file."),t.qZA(),t.BQk()),2&o&&(t.xp6(1),t.Q6J("nzSpan",3))}function yt(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).updateCoiModalVisible=!0}),t._uU(2," Update COI "),t._UZ(3,"i",41),t.qZA(),t.BQk()}}function Ot(o,s){if(1&o&&(t.YNc(0,yt,4,0,"ng-container",0),t.ALo(1,"ngrxPush")),2&o){const e=t.oxw(3);t.Q6J("ngIf",t.lcZ(1,1,e.ownProfile$))}}function Pt(o,s){if(1&o&&(t.TgZ(0,"div",13),t.TgZ(1,"nz-descriptions",42),t.YNc(2,Ut,14,17,"ng-container",0),t.YNc(3,At,3,1,"ng-container",0),t.YNc(4,Ot,2,3,"ng-template",null,43,t.W1O),t.qZA(),t.qZA()),2&o){const e=t.MAs(5),a=t.oxw().ngIf;t.Q6J("nzSpan",8),t.xp6(1),t.Q6J("nzExtra",e),t.xp6(1),t.Q6J("ngIf",a.mostRecentConflictOfInterestStatement),t.xp6(1),t.Q6J("ngIf",!a.mostRecentConflictOfInterestStatement)}}function Et(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"Update Profile"),t.qZA())}function St(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"cvc-user-profile-form",50),t.NdJ("profileUpdatedEvent",function(){return t.CHM(e),t.oxw(2).profileUpdated()}),t.qZA()}if(2&o){const e=t.oxw().ngIf;t.Q6J("user",e)}}function It(o,s){if(1&o){const e=t.EpF();t.ynx(0),t._UZ(1,"cvc-section-navigation",4),t.TgZ(2,"nz-page-header",5),t.TgZ(3,"nz-page-header-title"),t._UZ(4,"i",6),t.TgZ(5,"span",7),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"nz-page-header-content"),t.YNc(8,mt,1,0,"nz-alert",8),t.YNc(9,ft,1,0,"nz-alert",9),t._UZ(10,"cvc-tab-navigation",10),t.ALo(11,"ngrxPush"),t.TgZ(12,"div",11),t.TgZ(13,"div",12),t.TgZ(14,"div",13),t.TgZ(15,"nz-space",14),t.YNc(16,ht,1,2,"cvc-user-avatar",15),t.YNc(17,Ct,2,0,"ng-container",0),t.ALo(18,"ngrxPush"),t.qZA(),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"nz-descriptions",16),t.TgZ(21,"nz-descriptions-item",17),t._uU(22),t.qZA(),t.TgZ(23,"nz-descriptions-item",18),t._uU(24),t.ALo(25,"enumToTitle"),t.qZA(),t.TgZ(26,"nz-descriptions-item",19),t._uU(27),t.qZA(),t.TgZ(28,"nz-descriptions-item",20),t._uU(29),t.ALo(30,"enumToTitle"),t.qZA(),t.TgZ(31,"nz-descriptions-item",21),t._uU(32),t.qZA(),t.YNc(33,Tt,2,2,"nz-descriptions-item",22),t.YNc(34,xt,2,3,"ng-template",null,23,t.W1O),t.qZA(),t.qZA(),t.YNc(36,Pt,6,4,"div",24),t.qZA(),t.TgZ(37,"div",25),t.TgZ(38,"div",26),t._UZ(39,"nz-divider"),t.TgZ(40,"p",27),t.TgZ(41,"b"),t._uU(42,"User Statistics"),t.qZA(),t.qZA(),t.TgZ(43,"div",12),t.TgZ(44,"div",28),t.TgZ(45,"nz-card"),t._UZ(46,"nz-statistic",29),t.ALo(47,"number"),t.qZA(),t.qZA(),t.TgZ(48,"div",28),t.TgZ(49,"nz-card"),t._UZ(50,"nz-statistic",29),t.ALo(51,"number"),t.qZA(),t.qZA(),t.TgZ(52,"div",28),t.TgZ(53,"nz-card"),t._UZ(54,"nz-statistic",29),t.ALo(55,"number"),t.qZA(),t.qZA(),t.TgZ(56,"div",28),t.TgZ(57,"nz-card"),t._UZ(58,"nz-statistic",29),t.ALo(59,"number"),t.qZA(),t.qZA(),t.TgZ(60,"div",28),t.TgZ(61,"nz-card"),t._UZ(62,"nz-statistic",29),t.ALo(63,"number"),t.qZA(),t.qZA(),t.TgZ(64,"div",28),t.TgZ(65,"nz-card"),t._UZ(66,"nz-statistic",29),t.ALo(67,"number"),t.qZA(),t.qZA(),t.TgZ(68,"div",28),t.TgZ(69,"nz-card"),t._UZ(70,"nz-statistic",29),t.ALo(71,"number"),t.qZA(),t.qZA(),t.TgZ(72,"div",28),t.TgZ(73,"nz-card"),t._UZ(74,"nz-statistic",29),t.ALo(75,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(76,"router-outlet"),t.qZA(),t.qZA(),t.TgZ(77,"nz-modal",1),t.NdJ("nzVisibleChange",function(r){return t.CHM(e),t.oxw().updateProfileModalVisible=r})("nzOnCancel",function(){return t.CHM(e),t.oxw().handleProfileModalCancel()}),t.YNc(78,Et,2,0,"ng-template",null,30,t.W1O),t.YNc(80,St,1,1,"ng-template",null,31,t.W1O),t.qZA(),t.BQk()}if(2&o){const e=s.ngIf,a=t.MAs(35),r=t.MAs(79),c=t.MAs(81),P=t.oxw();t.xp6(1),t.Q6J("displayName",e.displayName),t.xp6(4),t.MGl("routerLink","/user/",e.id,""),t.xp6(1),t.hij(" ",e.name," "),t.xp6(2),t.Q6J("ngIf",P.uploadError),t.xp6(1),t.Q6J("ngIf",P.updateSuccess),t.xp6(1),t.Q6J("tabs",t.lcZ(11,46,P.tabs$)),t.xp6(3),t.Q6J("nzGutter",16),t.xp6(1),t.Q6J("nzSpan",3),t.xp6(3),t.Q6J("ngIf",t.lcZ(18,48,P.ownProfile$)),t.xp6(2),t.Q6J("nzSpan",13),t.xp6(1),t.Q6J("nzExtra",a),t.xp6(1),t.Q6J("nzSpan",2),t.xp6(1),t.Oqu(e.username),t.xp6(1),t.Q6J("nzSpan",2),t.xp6(1),t.Oqu(t.lcZ(25,50,e.role)),t.xp6(2),t.Q6J("nzSpan",4),t.xp6(1),t.Oqu(e.bio),t.xp6(1),t.Q6J("nzSpan",2),t.xp6(1),t.hij("",t.lcZ(30,52,e.areaOfExpertise)," "),t.xp6(2),t.Q6J("nzSpan",2),t.xp6(1),t.Oqu(null==e.country?null:e.country.name),t.xp6(1),t.Q6J("ngIf",e.organizations.length>0),t.xp6(3),t.Q6J("ngIf","EDITOR"===e.role||"ADMIN"===e.role),t.xp6(2),t.Q6J("nzSpan",21)("nzOffset",3),t.xp6(5),t.Q6J("nzGutter",16),t.xp6(3),t.Q6J("nzValue",t.lcZ(47,54,e.statsHash.comments))("nzTitle","Comments"),t.xp6(4),t.Q6J("nzValue",t.lcZ(51,56,e.statsHash.revisions))("nzTitle","Suggested Revisions"),t.xp6(4),t.Q6J("nzValue",t.lcZ(55,58,e.statsHash.appliedRevisions))("nzTitle","Applied Revisions"),t.xp6(4),t.Q6J("nzValue",t.lcZ(59,60,e.statsHash.suggestedSources))("nzTitle","Suggested Sources"),t.xp6(4),t.Q6J("nzValue",t.lcZ(63,62,e.statsHash.submittedEvidenceItems))("nzTitle","Submitted Evidence"),t.xp6(4),t.Q6J("nzValue",t.lcZ(67,64,e.statsHash.acceptedEvidenceItems))("nzTitle","Accepted Evidence"),t.xp6(4),t.Q6J("nzValue",t.lcZ(71,66,e.statsHash.submittedAssertions))("nzTitle","Submitted Assertions"),t.xp6(4),t.Q6J("nzValue",t.lcZ(75,68,e.statsHash.acceptedAssertions))("nzTitle","Accepted Assertions"),t.xp6(3),t.Q6J("nzVisible",P.updateProfileModalVisible)("nzContent",c)("nzTitle",r)("nzFooter",null)}}function Nt(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"Update your Conflict of Interest Statement"),t.qZA())}function Jt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"cvc-user-coi-form",51),t.NdJ("coiUpdatedEvent",function(){return t.CHM(e),t.oxw().coiUpdated()}),t.qZA()}}let Qt=(()=>{class o{constructor(e,a,r){this.gql=e,this.viewerService=a,this.route=r,this.ownProfile$=new x.X(!1),this.uploadError=!1,this.updateSuccess=!1,this.updateCoiModalVisible=!1,this.updateProfileModalVisible=!1,this.defaultTabs=[{routeName:"activity",tabLabel:"Activity",iconName:"civic:event"},{routeName:"evidence",tabLabel:"Evidence Items",iconName:"civic:evidence"},{routeName:"assertions",tabLabel:"Assertions",iconName:"civic:assertion"},{routeName:"source-suggestions",tabLabel:"Source Suggestions",iconName:"file-add"},{routeName:"badges",tabLabel:"Badges",iconName:"safety-certificate"}],this.tabs$=new x.X(this.defaultTabs),this.routeSub=this.route.params.subscribe(c=>{this.queryRef=this.gql.watch({userId:+c.userId});let P=this.queryRef.valueChanges;this.loading$=P.pipe((0,Z.j)("loading"),(0,y.O)(!0)),this.user$=P.pipe((0,Z.j)("data","user")),this.viewerSub=this.viewerService.viewer$.subscribe(lt=>{lt.id===+c.userId&&(this.tabs$.next([...this.defaultTabs,{routeName:"notifications",tabLabel:"Notifications",iconName:"bell"}]),this.ownProfile$.next(!0))})})}ngOnDestroy(){var e;this.routeSub.unsubscribe(),null===(e=this.viewerSub)||void 0===e||e.unsubscribe()}profileUploadComplete(e){var a;e?(null===(a=this.queryRef)||void 0===a||a.refetch(),this.updateSuccess=!0):this.uploadError=!0}coiUpdated(){var e;this.updateCoiModalVisible=!1,null===(e=this.queryRef)||void 0===e||e.refetch()}profileUpdated(){var e;this.updateProfileModalVisible=!1,null===(e=this.queryRef)||void 0===e||e.refetch()}handleCoiModalCancel(){this.updateCoiModalVisible=!1}handleProfileModalCancel(){this.updateProfileModalVisible=!1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.sLD),t.Y36(U.a),t.Y36(g.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["users-detail"]],decls:7,vars:7,consts:[[4,"ngIf"],[3,"nzVisible","nzContent","nzTitle","nzFooter","nzVisibleChange","nzOnCancel"],["coiModalTitle",""],["coiModalContent",""],[3,"displayName"],[1,"site-page-header"],["nz-icon","","nzType","civic:user"],[3,"routerLink"],["nzType","error","nzCloseable","","nzMessage","There was an error updating your profile image.",3,"nzOnClose",4,"ngIf"],["nzType","success","nzCloseable","","nzMessage","Profile image successfully updated.",3,"nzOnClose",4,"ngIf"],[3,"tabs"],[1,"content"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nzDirection","vertical","nzSize","middle"],[3,"user","size",4,"nzSpaceItem"],["nzTitle","Profile","nzBordered","",3,"nzExtra"],["nzTitle","Username",3,"nzSpan"],["nzTitle","Role",3,"nzSpan"],["nzTitle","Bio",3,"nzSpan"],["nzTitle","Area of Expertise",3,"nzSpan"],["nzTitle","Country",3,"nzSpan"],["nzTitle","Organizations",3,"nzSpan",4,"ngIf"],["updateProfile",""],["nz-col","",3,"nzSpan",4,"ngIf"],["nz-row",""],["nz-col","",3,"nzSpan","nzOffset"],["nz-typography",""],["nz-col",""],[3,"nzValue","nzTitle"],["profileModalTitle",""],["profileModalContent",""],["nzType","error","nzCloseable","","nzMessage","There was an error updating your profile image.",3,"nzOnClose"],["nzType","success","nzCloseable","","nzMessage","Profile image successfully updated.",3,"nzOnClose"],[3,"user","size"],[3,"uploadComplete",4,"nzSpaceItem"],[3,"uploadComplete"],["nzTitle","Organizations",3,"nzSpan"],[3,"org",4,"ngFor","ngForOf"],[3,"org"],["nz-button","","nzSize","small",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nzTitle","Editor Conflict of Interest Statement","nzBordered","",3,"nzExtra"],["updateCoi",""],["nzTitle","Status",3,"nzSpan"],["nzTitle","Updated",3,"nzSpan"],["nzTitle","Expires",3,"nzSpan"],["nzTitle","Statement",3,"nzSpan"],[4,"ngIf","ngIfElse"],["noStatement",""],[3,"user","profileUpdatedEvent"],[3,"coiUpdatedEvent"]],template:function(e,a){if(1&e&&(t.YNc(0,It,82,70,"ng-container",0),t.ALo(1,"ngrxPush"),t.TgZ(2,"nz-modal",1),t.NdJ("nzVisibleChange",function(c){return a.updateCoiModalVisible=c})("nzOnCancel",function(){return a.handleCoiModalCancel()}),t.YNc(3,Nt,2,0,"ng-template",null,2,t.W1O),t.YNc(5,Jt,1,0,"ng-template",null,3,t.W1O),t.qZA()),2&e){const r=t.MAs(4),c=t.MAs(6);t.Q6J("ngIf",t.lcZ(1,5,a.user$)),t.xp6(2),t.Q6J("nzVisible",a.updateCoiModalVisible)("nzContent",c)("nzTitle",r)("nzFooter",null)}},directives:[n.O5,h.I,M.$O,M.u9,g.rH,M.u5,E.r,F.P,S.SK,S.t3,w.NU,w.$1,H.L,K,C.R7,C.uj,n.sg,O.m,f.g,b.bd,R.my,g.lC,B.du,gt,dt.t],pipes:[L.fM,at.I,n.uU,n.JJ],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),o})();var Dt=i(2011);let Lt=(()=>{class o{constructor(e){this.route=e,this.mode=d.wJ2.User,this.userId=+this.route.snapshot.params.userId}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-users-events"]],decls:1,vars:2,consts:[["tagDisplay","hideUser",3,"userId","mode"]],template:function(e,a){1&e&&t._UZ(0,"cvc-event-feed",0),2&e&&t.Q6J("userId",a.userId)("mode",a.mode)},directives:[Dt.o],styles:["[_nghost-%COMP%]{display:block}"]}),o})();var Rt=i(8965);function Bt(o,s){1&o&&(t._UZ(0,"i",3),t._uU(1," User Evidence\n"))}let Ft=(()=>{class o{constructor(e){this.route=e,this.userId=+this.route.snapshot.params.userId}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-users-evidence"]],decls:4,vars:2,consts:[[3,"cvcTitle"],[3,"userId"],["evidenceCardTitle",""],["nz-icon","","nzType","civic:evidence"]],template:function(e,a){if(1&e&&(t.TgZ(0,"cvc-entity-table-card",0),t._UZ(1,"cvc-evidence-table",1),t.qZA(),t.YNc(2,Bt,2,0,"ng-template",null,2,t.W1O)),2&e){const r=t.MAs(3);t.Q6J("cvcTitle",r),t.xp6(1),t.Q6J("userId",a.userId)}},directives:[u._,Rt.a,p.Ls],styles:["[_nghost-%COMP%]{display:block}"]}),o})();var kt=i(3154),Yt=i(13),q=i(592),qt=i(2166),wt=i(125),tt=i(8625);function Wt(o,s){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function $t(o,s){1&o&&(t.TgZ(0,"i"),t._uU(1,"N/A"),t.qZA())}function jt(o,s){if(1&o&&(t.TgZ(0,"span"),t._UZ(1,"cvc-organization-tag",21),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("org",e)}}function Ht(o,s){if(1&o&&(t.TgZ(0,"p",20),t.YNc(1,jt,2,1,"span",12),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.organizations)}}function Vt(o,s){1&o&&(t.TgZ(0,"i"),t._uU(1,"--"),t.qZA())}function Kt(o,s){if(1&o&&(t.ynx(0),t._uU(1),t.ALo(2,"timeago"),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.mostRecentActionTimestamp)," ")}}function Gt(o,s){1&o&&t._uU(0," -- ")}function Xt(o,s){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._UZ(2,"cvc-user-tag",14),t.qZA(),t.TgZ(3,"td"),t.YNc(4,Wt,2,1,"ng-container",15),t.YNc(5,$t,2,0,"ng-template",null,16,t.W1O),t.qZA(),t.TgZ(7,"td"),t.YNc(8,Ht,2,1,"p",17),t.YNc(9,Vt,2,0,"ng-template",null,18,t.W1O),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"enumToTitle"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t.YNc(19,Kt,3,3,"ng-container",15),t.YNc(20,Gt,1,0,"ng-template",null,19,t.W1O),t.qZA(),t.qZA()),2&o){const e=s.$implicit,a=t.MAs(6),r=t.MAs(10),c=t.MAs(21);t.xp6(2),t.Q6J("user",e),t.xp6(2),t.Q6J("ngIf",e.name)("ngIfElse",a),t.xp6(4),t.Q6J("ngIf",e.organizations.length>0)("ngIfElse",r),t.xp6(4),t.hij(" ",t.lcZ(13,10,e.role)," "),t.xp6(3),t.hij(" ",e.statsHash.submittedEvidenceItems," "),t.xp6(2),t.hij(" ",e.statsHash.revisions," "),t.xp6(2),t.Q6J("ngIf",e.mostRecentActionTimestamp)("ngIfElse",c)}}function te(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2).ngrxLet;return t.oxw().loadMore(r.endCursor)}),t._uU(1,"Load More"),t.qZA()}}function ee(o,s){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",23),t.YNc(2,te,2,0,"button",24),t.qZA(),t.qZA()),2&o){const e=t.oxw().ngrxLet;t.xp6(2),t.Q6J("ngIf",e.hasNextPage)}}function ne(o,s){if(1&o&&(t.ynx(0),t.YNc(1,ee,3,1,"tr",22),t.BQk()),2&o){const e=s.ngrxLet;t.xp6(1),t.Q6J("ngIf",e.hasNextPage)}}let oe=(()=>{class o{constructor(e){this.gql=e,this.debouncedQuery=new X.xQ,this.initialPageSize=25,this.fetchMorePageSize=25,this.sortColumns=d.IRu}ngOnInit(){this.queryRef=this.gql.watch({first:this.initialPageSize,sortBy:{column:d.IRu.LastAction,direction:d.SrV.Desc}});let e=this.queryRef.valueChanges;this.isLoading$=e.pipe((0,Z.j)("loading"),(0,y.O)(!0)),this.users$=e.pipe((0,Z.j)("data","users","edges"),(0,l.U)(a=>a.map(r=>r.node))),this.totalCount$=e.pipe((0,Z.j)("data","users","totalCount")),this.pageInfo$=e.pipe((0,Z.j)("data","users","pageInfo")),this.debouncedQuery.pipe((0,Yt.b)(500)).subscribe(a=>this.refresh()),this.textInputCallback=()=>{this.debouncedQuery.next()}}refresh(){this.queryRef.refetch({userName:this.nameInput?this.nameInput:void 0,orgName:this.orgNameInput?{name:this.orgNameInput}:void 0,userRole:this.roleInput?this.roleInput:void 0})}onModelChanged(){this.debouncedQuery.next()}onSortChanged(e){this.queryRef.refetch({sortBy:(0,kt._)(e)})}ngOnDestroy(){this.debouncedQuery.unsubscribe()}loadMore(e){this.queryRef.fetchMore({variables:{first:this.fetchMorePageSize,after:e}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.tJ6))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-users-table"]],decls:37,vars:22,consts:[[3,"nzData","nzLoading","nzFrontPagination","nzShowPagination"],["userTable",""],[3,"nzSortOrderChange"],["nzWidth","5%"],["nzWidth","15%",3,"nzColumnKey","nzSortFn"],[3,"nzColumnKey","nzSortFn"],["placeholderText","Search Name",3,"inputModel","onInputChanged","inputModelChange"],["placeholderText","Search Orgs",3,"inputModel","onInputChanged","inputModelChange"],["nzAllowClear","","nzPlaceHolder","All",3,"nzDropdownMatchSelectWidth","ngModel","ngModelChange"],["nzValue","ADMIN","nzLabel","ADMIN"],["nzValue","CURATOR","nzLabel","CURATOR"],["nzValue","EDITOR","nzLabel","EDITOR"],[4,"ngFor","ngForOf"],[4,"ngrxLet"],[3,"user"],[4,"ngIf","ngIfElse"],["nameElse",""],["nz-typography","",4,"ngIf","ngIfElse"],["orgElse",""],["eventElse",""],["nz-typography",""],[3,"org"],[4,"ngIf"],["colspan","20"],["nz-button","","nzBlock","",3,"click",4,"ngIf"],["nz-button","","nzBlock","",3,"click"]],template:function(e,a){if(1&e&&(t.TgZ(0,"nz-table",0,1),t.ALo(2,"ngrxPush"),t.ALo(3,"ngrxPush"),t.TgZ(4,"thead",2),t.NdJ("nzSortOrderChange",function(c){return a.onSortChanged(c)}),t.TgZ(5,"tr"),t.TgZ(6,"th",3),t._uU(7," Tag "),t.qZA(),t.TgZ(8,"th",4),t._uU(9," Name "),t.qZA(),t.TgZ(10,"th"),t._uU(11," Organizations "),t.qZA(),t.TgZ(12,"th",5),t._uU(13," Role "),t.qZA(),t.TgZ(14,"th"),t._uU(15," EIDs "),t.qZA(),t.TgZ(16,"th"),t._uU(17," Revisions "),t.qZA(),t.TgZ(18,"th",5),t._uU(19," Last Action "),t.qZA(),t.qZA(),t.TgZ(20,"tr"),t._UZ(21,"th"),t.TgZ(22,"th"),t.TgZ(23,"cvc-clearable-input-filter",6),t.NdJ("inputModelChange",function(c){return a.nameInput=c}),t.qZA(),t.qZA(),t.TgZ(24,"th"),t.TgZ(25,"cvc-clearable-input-filter",7),t.NdJ("inputModelChange",function(c){return a.orgNameInput=c}),t.qZA(),t.qZA(),t.TgZ(26,"th"),t.TgZ(27,"nz-select",8),t.NdJ("ngModelChange",function(){return a.onModelChanged()})("ngModelChange",function(c){return a.roleInput=c}),t._UZ(28,"nz-option",9),t._UZ(29,"nz-option",10),t._UZ(30,"nz-option",11),t.qZA(),t.qZA(),t._UZ(31,"th"),t._UZ(32,"th"),t._UZ(33,"th"),t.qZA(),t.qZA(),t.TgZ(34,"tbody"),t.YNc(35,Xt,22,12,"tr",12),t.YNc(36,ne,2,1,"ng-container",13),t.qZA(),t.qZA()),2&e){const r=t.MAs(1);t.Q6J("nzData",t.lcZ(2,18,a.users$))("nzLoading",t.lcZ(3,20,a.isLoading$))("nzFrontPagination",!1)("nzShowPagination",!1),t.xp6(8),t.Q6J("nzColumnKey",a.sortColumns.Name)("nzSortFn",!0),t.xp6(4),t.Q6J("nzColumnKey",a.sortColumns.Role)("nzSortFn",!0),t.xp6(6),t.Q6J("nzColumnKey",a.sortColumns.LastAction)("nzSortFn",!0),t.xp6(5),t.Q6J("inputModel",a.nameInput)("onInputChanged",a.textInputCallback),t.xp6(2),t.Q6J("inputModel",a.orgNameInput)("onInputChanged",a.textInputCallback),t.xp6(2),t.Q6J("nzDropdownMatchSelectWidth",!1)("ngModel",a.roleInput),t.xp6(8),t.Q6J("ngForOf",r.data),t.xp6(1),t.Q6J("ngrxLet",a.pageInfo$)}},directives:[q.N8,q.Om,q.$Z,q.Uo,q._C,q.qD,qt.p,j.Vq,D.JJ,D.On,j.Ip,q.p0,n.sg,wt.I,n.O5,O.m,L.eJ,N.ix,k.dQ,Y.w],pipes:[L.fM,at.I,tt.wr],styles:["[_nghost-%COMP%]{display:block}"]}),o})(),ie=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["users-home"]],decls:10,vars:1,consts:[[1,"site-page-header"],["nz-icon","","nzType","civic:user"],["nz-row",""],["nz-col","",3,"nzSpan"],[1,"content"]],template:function(e,a){1&e&&(t._UZ(0,"cvc-section-navigation"),t.TgZ(1,"nz-page-header",0),t.TgZ(2,"nz-page-header-title"),t._UZ(3,"i",1),t._uU(4," CIViC Users "),t.qZA(),t.TgZ(5,"nz-page-header-content"),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"div",4),t._UZ(9,"cvc-users-table"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(7),t.Q6J("nzSpan",24))},directives:[h.I,M.$O,M.u9,p.Ls,M.u5,S.SK,S.t3,oe],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),o})();var ae=i(8747),rt=i(6114),et=i(2712),re=i(2347),nt=i(404),se=i(2937),ce=i(9058);function le(o,s){if(1&o&&(t.TgZ(0,"nz-col"),t._UZ(1,"i",17),t._uU(2),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("nzType",e.iconName),t.xp6(1),t.hij(" ",e.displayName," ")}}function pe(o,s){1&o&&(t._uU(0),t.ALo(1,"eventVerbiage")),2&o&&t.hij(" ",t.xi3(1,1,s.$implicit.id,"action-filter")," ")}function _e(o,s){if(1&o&&(t.TgZ(0,"nz-col"),t._UZ(1,"i",17),t.ALo(2,"iconNameForSubscribableEntity"),t._uU(3),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("nzType",t.lcZ(2,3,e.subjectWithCount.subject.__typename)),t.xp6(2),t.AsE(" ",e.subjectWithCount.subject.name," (",e.subjectWithCount.occuranceCount,") ")}}function ue(o,s){if(1&o&&(t.TgZ(0,"nz-col"),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.hij(" ",e.displayName," ")}}function ge(o,s){if(1&o&&(t.TgZ(0,"nz-col"),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function de(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).bulkMarkRead()}),t._UZ(1,"i",19),t._uU(2,"Mark as read "),t.qZA(),t.TgZ(3,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).bulkMarkUnread()}),t._UZ(4,"i",19),t._uU(5,"Mark as unread "),t.qZA(),t.TgZ(6,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).bulkUnsubscribe()}),t._UZ(7,"i",20),t._uU(8,"Unsubscribe "),t.qZA(),t._uU(9," Check all "),t.TgZ(10,"label",21),t.NdJ("ngModelChange",function(r){return t.CHM(e),t.oxw(2).allChecked=r})("nzCheckedChange",function(r){return t.CHM(e),t.oxw(2).onCheckAllCheckBoxClicked(r)}),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("disabled",!e.bulkMarkEnabled),t.xp6(3),t.Q6J("disabled",!e.bulkMarkEnabled),t.xp6(3),t.Q6J("disabled",!e.bulkMarkEnabled),t.xp6(4),t.Q6J("ngModel",e.allChecked)("nzIndeterminate",e.someChecked)}}function me(o,s){if(1&o&&t._UZ(0,"i",32),2&o){const e=t.oxw().$implicit;t.Q6J("nzType","SUBSCRIPTION"===e.key.type?"book":"notification")("nzTheme",e.key.seen?"outline":"twotone")}}function fe(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",33),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw(3).markAsUnread(r.key.id)}),t._UZ(2,"i",34),t.qZA(),t.BQk()}}function he(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw(3).markAsRead(r.key.id)}),t._UZ(1,"i",19),t.qZA()}}function ze(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",36),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw(3).unsubscribe(r.key.subscription.subscribable.id,r.key.subscription.subscribable.__typename)}),t._UZ(2,"i",20),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.MGl("nzTooltipTitle","You received this notification because you are subscribed to ",e.key.subscription.subscribable.name,". Click to unsubscribe.")}}function Ce(o,s){1&o&&(t.TgZ(0,"button",37),t._UZ(1,"i",20),t.qZA())}function ve(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"nz-timeline-item",23),t.YNc(2,me,1,2,"ng-template",null,24,t.W1O),t.TgZ(4,"nz-row"),t.TgZ(5,"nz-col",25),t._UZ(6,"cvc-event-timeline-item",26),t.qZA(),t.TgZ(7,"nz-col",27),t.YNc(8,fe,3,0,"ng-container",28),t.YNc(9,he,2,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(11,"nz-col",27),t.YNc(12,ze,3,1,"ng-container",28),t.YNc(13,Ce,2,0,"ng-template",null,30,t.W1O),t.TgZ(15,"label",31),t.NdJ("ngModelChange",function(r){return t.CHM(e).$implicit.value.checked=r})("nzCheckedChange",function(r){const P=t.CHM(e).$implicit;return t.oxw(3).onNotificationCheckBoxClicked(P.key.id,r)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&o){const e=s.$implicit,a=t.MAs(3),r=t.MAs(10),c=t.MAs(14);t.xp6(1),t.Q6J("nzDot",a)("nzColor",e.key.seen?"gray":"blue"),t.xp6(5),t.Q6J("event",e.key.event),t.xp6(2),t.Q6J("ngIf",e.key.seen)("ngIfElse",r),t.xp6(4),t.Q6J("ngIf",e.key.subscription)("ngIfElse",c),t.xp6(3),t.Q6J("ngModel",e.value.checked)}}function Te(o,s){if(1&o&&(t.TgZ(0,"nz-timeline"),t.YNc(1,ve,16,8,"ng-container",22),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e))}}function Ze(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",39),t.TgZ(1,"button",40),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().ngIf;return t.oxw(2).fetchMore(r.endCursor)}),t._uU(2,"Load More "),t.qZA(),t.qZA()}}function xe(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Ze,3,0,"div",38),t.BQk()),2&o){const e=s.ngIf;t.xp6(1),t.Q6J("ngIf",e.hasNextPage)}}function Me(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"nz-row",2),t.TgZ(2,"nz-col",3),t.TgZ(3,"nz-row"),t.TgZ(4,"nz-button-group",4),t.TgZ(5,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().setIncludeRead(!1)}),t._uU(6,"Unread"),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().setIncludeRead(!0)}),t._uU(8,"All"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"nz-row"),t.TgZ(10,"nz-col",6),t.TgZ(11,"cvc-participant-list",7),t.NdJ("participantSelectedEvent",function(r){return t.CHM(e),t.oxw().onNotificationReasonSelected(r)}),t.YNc(12,le,3,2,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(14,"cvc-participant-list",9),t.NdJ("participantSelectedEvent",function(r){return t.CHM(e),t.oxw().onActionSelected(r)}),t.ALo(15,"ngrxPush"),t.YNc(16,pe,2,4,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(18,"cvc-participant-list",10),t.NdJ("participantSelectedEvent",function(r){return t.CHM(e),t.oxw().onNotificationSubjectSelected(r)}),t.ALo(19,"ngrxPush"),t.YNc(20,_e,4,5,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(22,"cvc-participant-list",11),t.NdJ("participantSelectedEvent",function(r){return t.CHM(e),t.oxw().onOriginatingUserSelected(r)}),t.ALo(23,"ngrxPush"),t.YNc(24,ue,2,1,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(26,"cvc-participant-list",12),t.NdJ("participantSelectedEvent",function(r){return t.CHM(e),t.oxw().onOrganizationSelected(r)}),t.ALo(27,"ngrxPush"),t.YNc(28,ge,2,1,"ng-template",null,8,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"nz-col",13),t.TgZ(31,"nz-card",14),t.YNc(32,de,11,5,"ng-template",null,15,t.W1O),t.TgZ(34,"nz-row",2),t.TgZ(35,"nz-col",16),t.YNc(36,Te,3,3,"nz-timeline",1),t.YNc(37,xe,2,1,"ng-container",1),t.ALo(38,"ngrxPush"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&o){const e=s.ngIf,a=t.MAs(33),r=t.oxw();t.xp6(1),t.Q6J("nzGutter",25),t.xp6(4),t.Q6J("nzType",r.includeReadInput?"default":"primary"),t.xp6(2),t.Q6J("nzType",r.includeReadInput?"primary":"default"),t.xp6(4),t.Q6J("participantList",r.notificationTypes),t.xp6(3),t.Q6J("participantList",t.lcZ(15,12,r.actions$)),t.xp6(4),t.Q6J("participantList",t.lcZ(19,14,r.notificationSubjects$)),t.xp6(4),t.Q6J("participantList",t.lcZ(23,16,r.originatingUsers$)),t.xp6(4),t.Q6J("participantList",t.lcZ(27,18,r.organizations$)),t.xp6(5),t.Q6J("nzExtra",a),t.xp6(3),t.Q6J("nzGutter",16),t.xp6(2),t.Q6J("ngIf",e.size>0),t.xp6(1),t.Q6J("ngIf",t.lcZ(38,20,r.pageInfo$))}}let be=(()=>{class o{constructor(e,a,r,c,P){this.route=e,this.gql=a,this.networkErrorService=r,this.updateNotificationStatusMuation=c,this.unsubscribeMutation=P,this.notificationState=new Map,this.includeReadInput=!1,this.bulkMarkEnabled=!1,this.allChecked=!1,this.someChecked=!1,this.notificationTypes=[{id:1,type:d.fow.Mention,iconName:"notification",displayName:"Mentioned"},{id:2,type:d.fow.Subscription,iconName:"book",displayName:"Subscribed"}],this.userId=+this.route.snapshot.params.userId,this.updateNotificationStatusMutator=new W.U(r),this.unsubscribeMutator=new W.U(r)}ngOnInit(){this.initialQueryVars={includeRead:this.includeReadInput},this.queryRef=this.gql.watch(this.initialQueryVars),this.results$=this.queryRef.valueChanges,this.pageInfo$=this.results$.pipe((0,l.U)(({data:e})=>e.notifications.pageInfo)),this.notificationStateObservable$=this.results$.pipe((0,l.U)(({data:e})=>{let a=new Map;return e.notifications.edges.forEach(r=>{if(r.node){let c={checked:!1};a.set(r.node,c),this.notificationState.set(r.node,c)}}),a})),this.notificationSubjects$=this.results$.pipe((0,l.U)(({data:e})=>e.notifications.notificationSubjects.map(a=>{var r,c;return{id:`${null===(r=a.subject)||void 0===r?void 0:r.__typename}:${null===(c=a.subject)||void 0===c?void 0:c.id}`,subjectWithCount:a}}))),this.originatingUsers$=this.results$.pipe((0,l.U)(({data:e})=>e.notifications.originatingUsers)),this.actions$=this.results$.pipe((0,l.U)(({data:e})=>e.notifications.eventTypes.map(a=>({id:a})))),this.organizations$=this.results$.pipe((0,l.U)(({data:e})=>e.notifications.organizations)),this.isLoading$=this.results$.pipe((0,l.U)(({loading:e})=>e),(0,y.O)(!0))}fetchMore(e){this.queryRef.fetchMore({variables:{after:e}})}setIncludeRead(e){this.includeReadInput=e,this.queryRef.refetch({includeRead:this.includeReadInput})}onNotificationReasonSelected(e){this.queryRef.refetch({notificationReason:e?e.type:void 0})}onNotificationSubjectSelected(e){var a;let r;if(void 0!==e){let c=null===(a=e.subjectWithCount.subject)||void 0===a?void 0:a.__typename;r={id:e.subjectWithCount.subject.id,entityType:d.o71[c]}}this.queryRef.refetch({originatingObject:r})}onOriginatingUserSelected(e){this.queryRef.refetch({originatingUserId:null==e?void 0:e.id})}onActionSelected(e){this.queryRef.refetch({eventType:e?e.id:void 0})}onOrganizationSelected(e){this.queryRef.refetch({organizationId:null==e?void 0:e.id})}markAsRead(e){this.updateNotificationStatusMutator.mutate(this.updateNotificationStatusMuation,{input:{ids:[e],newStatus:d.NQC.Read}})}markAsUnread(e){this.updateNotificationStatusMutator.mutate(this.updateNotificationStatusMuation,{input:{ids:[e],newStatus:d.NQC.Unread}})}unsubscribe(e,a){this.unsubscribeMutator.mutate(this.unsubscribeMutation,{input:{subscribables:[{id:e,entityType:d.o71[a]}]}})}onNotificationCheckBoxClicked(e,a){let r=Array.from(this.notificationState.keys()).find(c=>c.id===e);if(r){let c=this.notificationState.get(r);c&&(c.checked=a)}a?(this.bulkMarkEnabled=!0,Array.from(this.notificationState.values()).every(c=>c.checked)?(this.allChecked=!0,this.someChecked=!1):this.someChecked=!0):Array.from(this.notificationState.values()).some(c=>c.checked)?(this.bulkMarkEnabled=!0,this.allChecked=!1,this.someChecked=!Array.from(this.notificationState.values()).every(c=>!c.checked)):(this.bulkMarkEnabled=!1,this.allChecked=!1,this.someChecked=!1)}onCheckAllCheckBoxClicked(e){e?this.checkAll():this.uncheckAll()}getCheckedIds(){let e=[];return this.notificationState.forEach((a,r)=>{a.checked&&e.push(r.id)}),e}checkAll(){this.queryRef.refetch().then(()=>{this.notificationState.forEach((e,a)=>{e.checked=!0})}),this.allChecked=!0,this.someChecked=!1,this.bulkMarkEnabled=!0}uncheckAll(){this.queryRef.refetch().then(()=>{this.notificationState.forEach((e,a)=>{e.checked=!1})}),this.allChecked=!1,this.someChecked=!1,this.bulkMarkEnabled=!1}bulkMarkRead(){this.updateNotificationStatusMutator.mutate(this.updateNotificationStatusMuation,{input:{ids:this.getCheckedIds(),newStatus:d.NQC.Read}}),this.uncheckAll()}bulkMarkUnread(){this.updateNotificationStatusMutator.mutate(this.updateNotificationStatusMuation,{input:{ids:this.getCheckedIds(),newStatus:d.NQC.Unread}}),this.uncheckAll()}bulkUnsubscribe(){let e=[];this.notificationState.forEach((a,r)=>{a.checked&&r.subscription&&e.push({id:r.subscription.subscribable.id,entityType:d.o71[r.subscription.subscribable.__typename]})}),this.unsubscribeMutator.mutate(this.unsubscribeMutation,{input:{subscribables:e}}).submitSuccess$.subscribe(a=>{a&&this.queryRef.refetch()}),this.uncheckAll()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.gz),t.Y36(d.yqR),t.Y36(m.Y),t.Y36(d.LiH),t.Y36(d.m$d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-users-notifications"]],decls:4,vars:6,consts:[[3,"nzSpinning"],[4,"ngIf"],[3,"nzGutter"],["nzSpan","4"],["nzSize","small"],["nz-button","","nzShape","round",3,"nzType","click"],["nzSpan","24"],["listTitle","Notification Reason",3,"participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Action",3,"participantList","participantSelectedEvent"],["listTitle","Subject",3,"participantList","participantSelectedEvent"],["listTitle","User",3,"participantList","participantSelectedEvent"],["listTitle","Organization",3,"participantList","participantSelectedEvent"],["nzSpan","20"],["nzTitle","Notifications","id","card-content",3,"nzExtra"],["bulkOperations",""],["nzSpan","24",1,"timeline"],["nz-icon","",3,"nzType"],["nz-button","","nzSize","small",3,"disabled","click"],["nz-icon","","nzType","check"],["nz-icon","","nzType","bell"],["nz-checkbox","",3,"ngModel","nzIndeterminate","ngModelChange","nzCheckedChange"],[4,"ngFor","ngForOf"],[3,"nzDot","nzColor"],["timelineDotTemplate",""],["nzFlex","auto"],[3,"event"],["nzFlex","50px"],[4,"ngIf","ngIfElse"],["unread",""],["noSubscriptionButton",""],["nz-checkbox","",3,"ngModel","ngModelChange","nzCheckedChange"],["nz-icon","",1,"item-icon",3,"nzType","nzTheme"],["nz-tooltip","","nzTooltipTitle","Mark as unread.","nz-button","","nzType","default","nzShape","circle",3,"click"],["nz-icon","","nzType","undo"],["nz-tooltip","","nzTooltipTitle","Mark as read.","nz-button","","nzType","default","nzShape","circle",3,"click"],["nz-tooltip","","nz-button","","nzType","default","nzShape","circle",3,"nzTooltipTitle","click"],["nz-tooltip","","nzTooltipTitle","You are no longer subscribed to the entity that triggered this notification.","nz-button","","nzType","default","nzShape","circle","disabled",""],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","default","nzSize","small","nzBlock","",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"nz-spin",0),t.ALo(1,"ngrxPush"),t.YNc(2,Me,39,22,"ng-container",1),t.ALo(3,"async"),t.qZA()),2&e&&(t.Q6J("nzSpinning",t.lcZ(1,2,a.isLoading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,a.notificationStateObservable$)))},directives:[$.W,n.O5,S.SK,S.t3,N.fY,Y.w,N.ix,k.dQ,ae.l,p.Ls,b.bd,rt.Ie,D.JJ,D.On,et.PD,n.sg,et.Zv,re.t,nt.SY],pipes:[L.fM,n.Ov,se.R,ce.j,n.Nd],styles:["[_nghost-%COMP%]{display:block}.timeline[_ngcontent-%COMP%]{padding-top:6px;padding-left:6px}.item-icon[_ngcontent-%COMP%]{font-size:18px}.timeline-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .timeline-item[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{margin-top:2px}.timeline-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-left:4px}.read-notification[_ngcontent-%COMP%]{background-color:gray}nz-timeline[_ngcontent-%COMP%]     ul li:last-child{padding-bottom:0}nz-timeline[_ngcontent-%COMP%]     ul li:last-child .ant-timeline-item-content{min-height:0;padding-bottom:8px}.timestamp[_ngcontent-%COMP%]{text-align:right}.comment-title[_ngcontent-%COMP%]{padding-right:24px}.comment-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400}.comment-card[_ngcontent-%COMP%]{width:100%}"]}),o})();var Ue=i(9814);function Ae(o,s){1&o&&(t._UZ(0,"i",3),t._uU(1," User Source Suggestions\n"))}const ye=[{path:"",component:(()=>{class o{constructor(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-users"]],decls:1,vars:0,template:function(e,a){1&e&&t._UZ(0,"router-outlet")},directives:[g.lC],styles:[""]}),o})(),children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:ie,data:{displayName:"Home"}},{path:":userId",component:Qt,data:{breadcrumb:"DISPLAYNAME"},children:[{path:"evidence",component:Ft,data:{breadcrumb:"Evidence"}},{path:"assertions",component:A,data:{breadcrumb:"Assertions"}},{path:"activity",component:Lt,data:{breadcrumb:"Activity"}},{path:"source-suggestions",component:(()=>{class o{constructor(e){this.route=e,this.userId=+this.route.snapshot.params.userId}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-users-source-suggestions"]],decls:4,vars:2,consts:[[3,"cvcTitle"],[3,"submitterId"],["sourceSuggestionCardTitle",""],["nz-icon","","nzType","file-add"]],template:function(e,a){if(1&e&&(t.TgZ(0,"cvc-entity-table-card",0),t._UZ(1,"cvc-source-suggestions-table",1),t.qZA(),t.YNc(2,Ae,2,0,"ng-template",null,2,t.W1O)),2&e){const r=t.MAs(3);t.Q6J("cvcTitle",r),t.xp6(1),t.Q6J("submitterId",a.userId)}},directives:[u._,Ue.O,p.Ls],styles:["[_nghost-%COMP%]{display:block}"]}),o})(),data:{breadcrumb:"Source Suggestions"}},{path:"notifications",component:be,data:{breadcrumb:"Notifications"}}]}]}];let Oe=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[g.Bz.forChild(ye)],g.Bz]}),o})();var Pe=i(4125),Ee=i(3630),Se=i(7345),st=i(9476),ot=i(9444),Ie=i(7026);let Ne=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[n.ez,D.u5,L.WG,p.PV,N.sL,nt.cg,q.HQ,j.LV,Pe.k,Ee.X,Se.W,ot.s,tt.$L.forChild({formatter:{useClass:Ie.x,provide:tt.KP}}),st.L]]}),o})();var ct=i(5630);let Je=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[n.ez,M.KJ,p.PV,S.Jb,ct.D,Ne]]}),o})();var it=i(316),Qe=i(9441);let De=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[n.ez,p.PV,it.C,Qe.s]]}),o})();var Le=i(8762),Re=i(5473);let Be=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[n.ez,N.sL,p.PV]]}),o})();var Fe=i(7008),ke=i(3868);let Ye=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[n.ez,D.u5,J.U5,D.UX,L.WG,b.vh,E.L,ke.aF,N.sL,$.j,j.LV,Fe.B]]}),o})();var qe=i(330);let we=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[n.ez,g.Bz,L.WG,E.L,S.Jb,M.KJ,w.zf,C.q6,b.vh,f.S,B.Qp,R.A2,qe.e,Ye,ot.s,ct.D,Le.c,Re.H,Be,st.L]]}),o})();var We=i(4292);let $e=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[n.ez,We.t]]}),o})();var je=i(767);let He=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[n.ez,p.PV,it.C,je.Q]]}),o})();var Ve=i(2832);let Ke=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[n.ez,p.PV,it.C,Ve.W]]}),o})();var Ge=i(1150),Xe=i(3212);let tn=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[n.ez,D.u5,L.WG,nt.cg,$.j,S.Jb,N.sL,b.vh,p.PV,rt.Wr,et.FT,Xe.E,ot.s,Ge.N]]}),o})(),en=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[n.ez,g.Bz,L.WG,Oe,Je,De,we,$e,He,Ke,tn]]}),o})()}}]);