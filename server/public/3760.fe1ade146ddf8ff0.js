"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[3760],{5639:(V,h,e)=>{e.d(h,{u:()=>u});var t=e(5e3),v=e(685),M=e(1912),C=e(3618),z=e(5017);function f(p,n){1&p&&(t.TgZ(0,"span"),t._uU(1," You must be logged in to view this page. "),t.qZA())}function O(p,n){1&p&&t._UZ(0,"cvc-login-button")}function l(p,n){1&p&&(t.TgZ(0,"nz-typography",4),t._UZ(1,"i",5),t.qZA())}let u=(()=>{class p{}return p.\u0275fac=function(y){return new(y||p)},p.\u0275cmp=t.Xpm({type:p,selectors:[["cvc-login-prompt"]],decls:7,vars:3,consts:[[3,"nzNotFoundImage","nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["emptyImage",""],["nzType","secondary"],["nz-icon","","nzType","login","nzTheme","outline",2,"font-size","50pt"]],template:function(y,P){if(1&y&&(t.TgZ(0,"nz-empty",0),t.YNc(1,f,2,0,"ng-template",null,1,t.W1O),t.YNc(3,O,1,0,"ng-template",null,2,t.W1O),t.qZA(),t.YNc(5,l,2,0,"ng-template",null,3,t.W1O)),2&y){const A=t.MAs(2),b=t.MAs(4),T=t.MAs(6);t.Q6J("nzNotFoundImage",T)("nzNotFoundContent",A)("nzNotFoundFooter",b)}},directives:[v.p9,M.s,C.ZU,z.Ls],styles:["[_nghost-%COMP%]{display:inline-block}"]}),p})()},9386:(V,h,e)=>{e.d(h,{a:()=>O});var t=e(9808),v=e(1844),M=e(685),C=e(5017),z=e(3618),f=e(5e3);let O=(()=>{class l{}return l.\u0275fac=function(p){return new(p||l)},l.\u0275mod=f.oAB({type:l}),l.\u0275inj=f.cJS({imports:[[t.ez,v.B,M.Xo,C.PV,z.ZJ]]}),l})()},8227:(V,h,e)=>{e.d(h,{q:()=>R});var t=e(5e3),v=e(8929),M=e(4850),C=e(373),z=e(2994),f=e(7625),O=e(1793),l=e(9350),u=e(9808),p=e(6042),n=e(2683),y=e(2643),P=e(3677),A=e(8144),b=e(6699),T=e(4219),I=e(6949);function L(i,m){1&i&&t.Hsn(0)}function G(i,m){1&i&&t.GkF(0)}function B(i,m){if(1&i&&(t.ynx(0),t.YNc(1,G,1,0,"ng-container",5),t.BQk()),2&i){t.oxw(2);const a=t.MAs(1);t.xp6(1),t.Q6J("ngTemplateOutlet",a)}}function D(i,m){1&i&&t.GkF(0)}function U(i,m){if(1&i&&(t.ynx(0),t.TgZ(1,"nz-button-group",6),t.YNc(2,D,1,0,"ng-container",5),t.TgZ(3,"button",7),t.ALo(4,"ngrxPush"),t.TgZ(5,"nz-space",8)(6,"span"),t._uU(7,"for"),t.qZA(),t._UZ(8,"nz-avatar",9)(9,"i",10),t.qZA()()(),t.BQk()),2&i){t.oxw();const a=t.MAs(4),d=t.oxw(),S=t.MAs(1);t.xp6(1),t.Q6J("nzSize",d.nzSize),t.xp6(1),t.Q6J("ngTemplateOutlet",S),t.xp6(1),t.Q6J("nzType",d.buttonType)("nzDanger",d.nzDanger)("disabled",t.lcZ(4,10,d.isDisabled$))("nzDropdownMenu",a),t.xp6(2),t.Q6J("nzSize",4),t.xp6(3),t.Q6J("nzSrc",null==d.selectedOrg?null:d.selectedOrg.profileImagePath)("nzSize",10)("nzShape","square")}}function Z(i,m){if(1&i){const a=t.EpF();t.TgZ(0,"li",11),t.NdJ("click",function(){const E=t.CHM(a).$implicit;return t.oxw(2).selectOrg(E)}),t._UZ(1,"nz-avatar",12),t._uU(2),t.qZA()}if(2&i){const a=m.$implicit,d=t.oxw(2);t.Q6J("nzSelected",(null==d.selectedOrg?null:d.selectedOrg.id)===a.id),t.xp6(1),t.Q6J("nzSrc",null==a?null:a.profileImagePath)("nzSize",10)("nzShape","square"),t.xp6(1),t.hij(" ",a.name," ")}}function F(i,m){if(1&i&&(t.ynx(0),t.YNc(1,B,2,1,"ng-container",1),t.YNc(2,U,10,12,"ng-container",1),t.TgZ(3,"nz-dropdown-menu",null,2)(5,"ul",3),t.YNc(6,Z,3,5,"li",4),t.qZA()(),t.BQk()),2&i){const a=m.ngIf;t.xp6(1),t.Q6J("ngIf",a.length<=1),t.xp6(1),t.Q6J("ngIf",a.length>1),t.xp6(4),t.Q6J("ngForOf",a)}}const x=["*"];let R=(()=>{class i{constructor(a){this.viewerService=a,this.selectedOrgChange=new t.vpe,this.buttonType="primary",this.nzDanger=!1,this.nzSize="small",this.destroy$=new v.xQ,this.isDisabled$=new v.xQ}selectOrg(a){this.selectedOrg=a,this.selectedOrgChange.emit(a)}refreshViewer(){setTimeout(()=>{this.viewerService.refetch()},2500)}ngOnInit(){this.organizations$=this.viewerService.viewer$.pipe((0,M.U)(a=>a.organizations)),this.mostRecentOrg$=this.viewerService.viewer$.pipe((0,C.j)("mostRecentOrg"),(0,z.b)(a=>{a&&(this.selectedOrg=a,this.selectedOrgChange.emit(a))})),this.mostRecentOrg$.pipe((0,f.R)(this.destroy$)).subscribe()}ngAfterViewInit(){this.button&&this.button.domChange&&this.button.domChange.pipe((0,f.R)(this.destroy$)).subscribe(a=>{"disabled"===a.type&&"boolean"==typeof a.change&&this.isDisabled$.next(a.change)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(l.a))},i.\u0275cmp=t.Xpm({type:i,selectors:[["cvc-org-selector-btn-group"]],contentQueries:function(a,d,S){if(1&a&&t.Suo(S,O.m,5),2&a){let E;t.iGM(E=t.CRH())&&(d.button=E.first)}},inputs:{selectedOrg:"selectedOrg",buttonType:"buttonType",nzDanger:"nzDanger",nzSize:"nzSize"},outputs:{selectedOrgChange:"selectedOrgChange"},ngContentSelectors:x,decls:4,vars:3,consts:[["submitButton",""],[4,"ngIf"],["orgMenu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"nzSelected","click",4,"ngFor","ngForOf"],[4,"ngTemplateOutlet"],[3,"nzSize"],["type","button","nz-button","","nz-dropdown","",1,"org-dropdown-btn",3,"nzType","nzDanger","disabled","nzDropdownMenu"],["nzDirection","horizontal",3,"nzSize"],[3,"nzSrc","nzSize","nzShape"],["nz-icon","","nzType","down"],["nz-menu-item","",3,"nzSelected","click"],[2,"background-color","#f0f5ff",3,"nzSrc","nzSize","nzShape"]],template:function(a,d){1&a&&(t.F$t(),t.YNc(0,L,1,0,"ng-template",null,0,t.W1O),t.YNc(2,F,7,3,"ng-container",1),t.ALo(3,"async")),2&a&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,d.organizations$)))},directives:[u.O5,u.tP,p.fY,n.w,p.ix,y.dQ,P.wA,P.cm,A.NU,b.Dz,P.RR,T.wO,u.sg,T.r9],pipes:[u.Ov,I.fM],styles:["[_nghost-%COMP%]{display:inline-block}.org-dropdown-btn[_ngcontent-%COMP%]   nz-avatar[_ngcontent-%COMP%]{margin:0 6px}"]}),i})()},885:(V,h,e)=>{e.r(h),e.d(h,{VariantGroupsAddModule:()=>pt});var t=e(9808),v=e(9386),M=e(5630),C=e(6905),z=e(6949),f=e(1894),O=e(5017),l=e(1945),u=e(325),p=e(4850),n=e(5e3),y=e(9350),P=e(8992),A=e(5639),b=e(160);function T(o,s){1&o&&(n.TgZ(0,"div"),n._UZ(1,"router-outlet"),n.qZA())}function I(o,s){1&o&&(n.TgZ(0,"nz-row",7)(1,"div",8),n._UZ(2,"cvc-login-prompt"),n.qZA()())}let L=(()=>{class o{constructor(r){this.viewerService=r}ngOnInit(){this.isSignedIn$=this.viewerService.viewer$.pipe((0,p.U)(r=>r.signedIn))}}return o.\u0275fac=function(r){return new(r||o)(n.Y36(y.a))},o.\u0275cmp=n.Xpm({type:o,selectors:[["cvc-variant-groups-add-view"]],decls:14,vars:7,consts:[["displayName","New"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzTheme","twotone","nzType","civic-variantgroup",3,"nzTwotoneColor"],[1,"content"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["nzSpan","24","nzJustify","center"],["nz-col","","nzSpan","6"]],template:function(r,c){if(1&r&&(n._UZ(0,"cvc-section-navigation",0),n.TgZ(1,"nz-page-header",1)(2,"nz-page-header-title",2),n._UZ(3,"i",3),n.ALo(4,"entityColor"),n._uU(5," Add New Variant Group "),n.qZA(),n.TgZ(6,"nz-page-header-subtitle"),n._uU(7," Submit and review new Variant Groups "),n.qZA(),n.TgZ(8,"nz-page-header-content")(9,"div",4),n.YNc(10,T,2,0,"div",5),n.ALo(11,"ngrxPush"),n.YNc(12,I,3,0,"ng-template",null,6,n.W1O),n.qZA()()()),2&r){const g=n.MAs(13);n.xp6(3),n.Q6J("nzTwotoneColor",n.lcZ(4,3,"VariantGroup")),n.xp6(7),n.Q6J("ngIf",n.lcZ(11,5,c.isSignedIn$))("ngIfElse",g)}},directives:[P.I,l.$O,l.u9,O.Ls,l.yG,l.u5,t.O5,u.lC,f.SK,f.t3,A.u],pipes:[b.a,z.fM],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),o})();var G=e(8776),B=e(7462),D=e(4181),U=e(7055),Z=e(8979),F=e(4623),x=e(3075),R=e(1017),i=e(4546),m=e(2359),a=e(6042),d=e(7525),S=e(7008),E=e(5472),N=e(3773),Q=e(3022),w=e(4889);let K=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[t.ez,x.UX,u.Bz,G.X0,i.U5,m.L,f.Jb,a.sL,d.j,G.X0,B.o,D.O,U.N,Z.N,F.K,S.B,E.r,N.g,D.O,Q.e,w.E,R.s]]}),o})(),$=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[t.ez,K]]}),o})();var W=e(3077),Y=e(6123),j=e(8929),J=e(7625),X=e(7630),H=e(9169),k=e(822);function q(o,s){1&o&&n.GkF(0)}function tt(o,s){if(1&o){const r=n.EpF();n.TgZ(0,"formly-form",4),n.NdJ("modelChange",function(g){return n.CHM(r),n.oxw().formModel=g}),n.qZA()}if(2&o){const r=n.oxw();n.Q6J("form",r.formGroup)("fields",r.formFields)("model",r.formModel)}}function nt(o,s){if(1&o&&(n.TgZ(0,"nz-form-item"),n._UZ(1,"cvc-form-errors-alert",6),n.qZA()),2&o){const r=n.oxw(2);n.xp6(1),n.Q6J("errors",r.errorMessages)}}function et(o,s){if(1&o&&(n.TgZ(0,"p"),n._uU(1,"View "),n.TgZ(2,"a",10),n._uU(3,"its details"),n.qZA(),n._uU(4,"."),n.qZA()),2&o){const r=n.oxw(3);n.xp6(2),n.MGl("routerLink","/variant-groups/",r.newId,"/summary")}}function ot(o,s){if(1&o&&(n.ynx(0),n._UZ(1,"nz-alert",7),n.YNc(2,et,5,1,"ng-template",8,9,n.W1O),n.BQk()),2&o){const r=n.MAs(3);n.xp6(1),n.Q6J("nzDescription",r)}}function rt(o,s){if(1&o&&(n.YNc(0,nt,2,1,"nz-form-item",5),n.YNc(1,ot,4,1,"ng-container",5)),2&o){const r=n.oxw();n.Q6J("ngIf",r.errorMessages.length>0),n.xp6(1),n.Q6J("ngIf",r.success)}}let at=(()=>{class o{constructor(r,c){this.submitVariantGroupGQL=r,this.networkErrorService=c,this.destroy$=new j.xQ,this.formGroup=new x.cw({}),this.success=!1,this.errorMessages=[],this.loading=!1,this.submitVariantGroupMutator=new Y.U(c),this.formFields=[{key:"fields",wrappers:["form-container"],templateOptions:{label:"Add Variant Group Form"},fieldGroup:[{key:"name",type:"input",wrappers:["form-field"],templateOptions:{label:"Variant Group Name",required:!0}},{key:"description",type:"cvc-textarea",templateOptions:{label:"Description",helpText:"A brief description of this new variant group.",placeholder:"No description provided",required:!0}},{key:"sources",type:"multi-field",wrappers:["form-field"],templateOptions:{label:"Source",helpText:"Add any sources upon which your description depends.",addText:"Add a Source"},fieldArray:{type:"source-input",templateOptions:{hideLabel:!0,required:!0}}},{key:"variants",type:"multi-field",wrappers:["form-field"],templateOptions:{label:"Variants",required:!0,helpText:"Specify the variants that comprise this Variant Group.",addText:"Add a Variant "},fieldArray:{type:"variant-input",templateOptions:{hideLabel:!0,required:!0,allowCreate:!1}}},{key:"comment",type:"comment-textarea",templateOptions:{label:"Comment",helpText:"Please provide any additional comments you wish to make about this evidence item. This comment will appear as the first comment in this item's comment thread.",placeholder:"Please enter a comment describing your revision.",required:!0,minLength:10}},{key:"cancel",type:"cancel-button"},{key:"organization",type:"org-submit-button",templateOptions:{submitLabel:"Create Variant Group",submitSize:"large"}}]}]}submitVariantGroup(r){let c=this.toSubmitInput(r);if(c){let g=this.submitVariantGroupMutator.mutate(this.submitVariantGroupGQL,{input:c},{},_=>{this.newId=_.submitVariantGroup.variantGroup.id});g.submitSuccess$.pipe((0,J.R)(this.destroy$)).subscribe(_=>{_&&(this.success=!0)}),g.submitError$.pipe((0,J.R)(this.destroy$)).subscribe(_=>{_&&(this.errorMessages=_,this.success=!1)}),g.isSubmitting$.pipe((0,J.R)(this.destroy$)).subscribe(_=>{this.loading=_})}}toSubmitInput(r){var c;if(r)return{description:r.fields.description,name:r.fields.name,organizationId:null===(c=r.fields.organization)||void 0===c?void 0:c.id,sourceIds:r.fields.sources?r.fields.sources.map(g=>g.id).filter(W.$):[],variantIds:r.fields.variants.map(g=>g.id).filter(W.$)}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.\u0275fac=function(r){return new(r||o)(n.Y36(X.tji),n.Y36(H.Y))},o.\u0275cmp=n.Xpm({type:o,selectors:[["cvc-variant-group-submit-form"]],decls:5,vars:3,consts:[["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[4,"ngTemplateOutlet"],[3,"form","fields","model","modelChange",4,"ngIf"],["formMessages",""],[3,"form","fields","model","modelChange"],[4,"ngIf"],[3,"errors"],["nzType","success","nzMessage","Variant Group Submitted","nzShowIcon","",3,"nzDescription"],["nzSize","small"],["successMessage",""],[3,"routerLink"]],template:function(r,c){if(1&r&&(n.TgZ(0,"form",0),n.NdJ("ngSubmit",function(){return c.submitVariantGroup(c.formModel)}),n.YNc(1,q,1,0,"ng-container",1),n.YNc(2,tt,1,3,"formly-form",2),n.qZA(),n.YNc(3,rt,2,2,"ng-template",null,3,n.W1O)),2&r){const g=n.MAs(4);n.Q6J("formGroup",c.formGroup),n.xp6(1),n.Q6J("ngTemplateOutlet",g),n.xp6(1),n.Q6J("ngIf",!c.success)}},directives:[x._Y,x.JL,i.Lr,x.sg,t.tP,t.O5,G.T7,f.SK,i.Nx,k.V,m.r,u.yS],styles:[""]}),o})();const it=[{path:"",component:L,children:[{path:"",redirectTo:"submit",pathMatch:"full"},{path:"submit",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["cvc-variant-groups-submit-page"]],decls:1,vars:0,template:function(r,c){1&r&&n._UZ(0,"cvc-variant-group-submit-form")},directives:[at],styles:[""]}),o})(),data:{breadcrumb:"Submit New Variant Groups"}}]}];let st=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[u.Bz.forChild(it),$],u.Bz]}),o})(),pt=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[t.ez,st,z.WG,f.Jb,O.PV,l.KJ,v.a,C.s,M.D]]}),o})()}}]);