"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[7717],{3220:(D,E,e)=>{e.d(E,{l:()=>I});var t=e(5e3),M=e(6715),T=e(9808),m=e(8481),d=e(3610);const h=function(r){return{"matched-tag":r}};function g(r,u){if(1&r&&(t.TgZ(0,"div",2),t.TgZ(1,"nz-tag"),t._uU(2),t.qZA(),t.qZA()),2&r){const l=u.$implicit,i=t.oxw();t.Q6J("ngClass",t.VKq(2,h,i.matchingText&&l.toLowerCase().includes(i.matchingText))),t.xp6(2),t.Oqu(l)}}function P(r,u){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&r){const l=t.oxw(2);t.xp6(1),t.hij("",l.matchedHiddenCount," of ")}}function n(r,u){if(1&r){const l=t.EpF();t.TgZ(0,"nz-tag",5),t.NdJ("click",function(){return t.CHM(l),t.oxw().onOverflowClicked()}),t._uU(1," +"),t.YNc(2,P,2,1,"span",6),t._uU(3),t.qZA()}if(2&r){const l=t.oxw(),i=t.MAs(5);t.Q6J("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",i),t.xp6(2),t.Q6J("ngIf",l.matchedHiddenCount>0),t.xp6(1),t.hij("",l.hiddenCount," more ")}}function O(r,u){if(1&r&&(t.TgZ(0,"div",2),t.TgZ(1,"nz-tag"),t._uU(2),t.qZA(),t.qZA()),2&r){const l=u.$implicit,i=t.oxw(2);t.Q6J("ngClass",t.VKq(2,h,i.matchingText&&l.toLowerCase().includes(i.matchingText))),t.xp6(2),t.Oqu(l)}}function p(r,u){if(1&r&&(t.TgZ(0,"cvc-tag-list",0),t.YNc(1,O,3,4,"div",1),t.qZA()),2&r){const l=t.oxw();t.xp6(1),t.Q6J("ngForOf",l.hiddenTags)}}let I=(()=>{class r{constructor(){this.maxDisplayCount=2,this.matchedHiddenCount=0}ngOnInit(){this.calculateDisplayedTags()}calculateDisplayedTags(){var l,i,f,v;if(this.displayedTags=null===(l=this.tags)||void 0===l?void 0:l.slice(0,this.maxDisplayCount),this.hiddenTags=null===(i=this.tags)||void 0===i?void 0:i.slice(this.maxDisplayCount),this.hiddenCount=null===(f=this.hiddenTags)||void 0===f?void 0:f.length,this.matchingText=null===(v=this.matchingText)||void 0===v?void 0:v.toLowerCase(),this.matchingText&&this.hiddenTags){let Z=this.matchingText;this.hiddenTags.forEach(z=>{z.toLowerCase().includes(Z)&&(this.matchedHiddenCount+=1)})}}onOverflowClicked(){var l;this.maxDisplayCount=(null===(l=this.tags)||void 0===l?void 0:l.length)||0,this.calculateDisplayedTags()}}return r.\u0275fac=function(l){return new(l||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["cvc-plain-tag-overflow"]],inputs:{matchingText:"matchingText",tags:"tags",maxDisplayCount:"maxDisplayCount"},decls:6,vars:5,consts:[["size","xs"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["class","overflow-tag","nz-popover","","nzPopoverPlacement","top","nzPopoverTrigger","hover",3,"nzPopoverMouseEnterDelay","nzPopoverContent","click",4,"ngIf"],["additionalTagPopover",""],["nz-popover","","nzPopoverPlacement","top","nzPopoverTrigger","hover",1,"overflow-tag",3,"nzPopoverMouseEnterDelay","nzPopoverContent","click"],[4,"ngIf"]],template:function(l,i){1&l&&(t.TgZ(0,"cvc-tag-list",0),t.YNc(1,g,3,4,"div",1),t.TgZ(2,"div",2),t.YNc(3,n,4,4,"nz-tag",3),t.qZA(),t.YNc(4,p,2,1,"ng-template",null,4,t.W1O),t.qZA()),2&l&&(t.xp6(1),t.Q6J("ngForOf",i.displayedTags),t.xp6(1),t.Q6J("ngClass",t.VKq(3,h,i.matchedHiddenCount>0)),t.xp6(1),t.Q6J("ngIf",i.hiddenCount&&i.hiddenCount>0))},directives:[M.$,T.sg,T.mk,m.j,T.O5,d.lU],styles:[".matched-tag[_ngcontent-%COMP%]{font-weight:700}"]}),r})()},3968:(D,E,e)=>{e.d(E,{T:()=>h});var t=e(9808),M=e(897),T=e(8481),m=e(3610),d=e(5e3);let h=(()=>{class g{}return g.\u0275fac=function(n){return new(n||g)},g.\u0275mod=d.oAB({type:g}),g.\u0275inj=d.cJS({imports:[[t.ez,T.X,m.$6,M.$]]}),g})()},3575:(D,E,e)=>{e.d(E,{d:()=>F});var t=e(712),M=e(3154),T=e(8929),m=e(4850),d=e(373),h=e(1059),g=e(2986),P=e(13),n=e(5e3),O=e(7484),p=e(1132),I=e(404),r=e(647),u=e(2683),l=e(8054),i=e(4182),f=e(2166),v=e(9808),Z=e(6906),z=e(3220),A=e(6949),x=e(6042),U=e(2643),y=e(3618);function L(_,s){if(1&_&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._UZ(2,"cvc-source-tag",20),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._UZ(10,"cvc-plain-tag-overflow",21),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA(),n.TgZ(13,"td"),n._uU(14),n.qZA(),n.TgZ(15,"td",22),n._uU(16),n.qZA(),n.qZA()),2&_){const o=s.$implicit,a=n.oxw();n.xp6(2),n.Q6J("source",o),n.xp6(2),n.hij(" ",o.displayType," "),n.xp6(2),n.hij(" ",o.citationId," "),n.xp6(2),n.hij(" ",o.name," "),n.xp6(2),n.Q6J("tags",o.authors)("matchingText",a.authorInput),n.xp6(2),n.hij(" ",o.publicationYear," "),n.xp6(2),n.hij(" ",o.journal," "),n.xp6(2),n.Oqu(o.evidenceItemCount)}}function S(_,s){if(1&_){const o=n.EpF();n.TgZ(0,"button",26),n.NdJ("click",function(){n.CHM(o);const C=n.oxw(2).ngrxLet;return n.oxw().loadMore(C.endCursor)}),n._uU(1),n.qZA()}if(2&_){const o=n.oxw(3);n.xp6(1),n.hij("Load ",o.pageSize," More")}}function K(_,s){if(1&_&&(n.TgZ(0,"tr"),n.TgZ(1,"td",24),n.YNc(2,S,2,1,"button",25),n.qZA(),n.qZA()),2&_){const o=n.oxw().ngrxLet;n.xp6(2),n.Q6J("ngIf",o.hasNextPage)}}function B(_,s){if(1&_&&(n.ynx(0),n.YNc(1,K,3,1,"tr",23),n.BQk()),2&_){const o=s.ngrxLet;n.xp6(1),n.Q6J("ngIf",o.hasNextPage)}}function R(_,s){}function W(_,s){if(1&_&&(n.ynx(0),n.YNc(1,R,0,0,"ng-template",30),n.BQk()),2&_){const o=n.oxw(2);n.xp6(1),n.Q6J("ngTemplateOutlet",o.cvcTitleTemplate)}}function b(_,s){if(1&_&&(n.ynx(0),n._uU(1),n.BQk()),2&_){const o=n.oxw(2);n.xp6(1),n.hij(" ",o.cvcTitle," ")}}function J(_,s){if(1&_&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&_){const o=n.oxw().ngIf;n.xp6(1),n.hij(" of ",o," filtered")}}function Q(_,s){if(1&_&&(n.TgZ(0,"span",31),n._uU(1),n.YNc(2,J,2,1,"span",23),n._uU(3,") "),n.qZA()),2&_){const o=s.ngIf,a=n.oxw(2);n.xp6(1),n.AsE(" (",a.totalCount," total, showing ",a.visibleCount,""),n.xp6(1),n.Q6J("ngIf",a.totalCount&&o<a.totalCount)}}function N(_,s){1&_&&(n.TgZ(0,"span",31),n._uU(1," (0 total) "),n.qZA())}function j(_,s){if(1&_&&(n._UZ(0,"i",27),n.YNc(1,W,2,1,"ng-container",23),n.YNc(2,b,2,1,"ng-container",23),n.YNc(3,Q,4,3,"span",28),n.ALo(4,"ngrxPush"),n.YNc(5,N,2,0,"ng-template",null,29,n.W1O)),2&_){const o=n.MAs(6),a=n.oxw();n.xp6(1),n.Q6J("ngIf",a.cvcTitleTemplate),n.xp6(1),n.Q6J("ngIf",a.cvcTitle),n.xp6(1),n.Q6J("ngIf",n.lcZ(4,4,a.filteredCount$))("ngIfElse",o)}}let F=(()=>{class _{constructor(o){this.gql=o,this.debouncedQuery=new T.xQ,this.pageSize=25,this.sortColumns=t.kQl,this.visibleCount=this.pageSize,this.loadedPages=1}ngOnInit(){this.queryRef=this.gql.watch({first:this.pageSize,clinicalTrialId:this.clinicalTrialId}),this.data$=this.queryRef.valueChanges.pipe((0,m.U)(o=>({data:o.data,loading:o.loading,networkStatus:o.networkStatus}))),this.isLoading$=this.data$.pipe((0,d.j)("loading"),(0,h.O)(!0)),this.sources$=this.data$.pipe((0,d.j)("data","browseSources","edges"),(0,m.U)(o=>o.map(a=>a.node))),this.pageInfo$=this.data$.pipe((0,d.j)("data","browseSources","pageInfo")),this.filteredCount$=this.data$.pipe((0,d.j)("data","browseSources","filteredCount")),this.filteredCount$.pipe((0,g.q)(1)).subscribe(o=>this.totalCount=o),this.filteredCount$.subscribe(o=>{o<this.pageSize?this.visibleCount=o:(this.visibleCount=this.pageSize*this.loadedPages,this.visibleCount>o&&(this.visibleCount=o))}),this.debouncedQuery.pipe((0,P.b)(500)).subscribe(o=>this.refresh()),this.textInputCallback=()=>{this.debouncedQuery.next()}}refresh(){var o;this.loadedPages=1,null===(o=this.queryRef)||void 0===o||o.refetch({citationId:this.citationIdInput?+this.citationIdInput:void 0,author:this.authorInput,year:this.yearInput?+this.yearInput:void 0,journal:this.journalInput,name:this.nameInput,sourceType:this.sourceTypeInput})}onSortChanged(o){var a;this.loadedPages=1,null===(a=this.queryRef)||void 0===a||a.refetch({sortBy:(0,M._)(o)})}onModelChanged(){this.debouncedQuery.next()}ngOnDestroy(){this.debouncedQuery.unsubscribe()}loadMore(o){var a;null===(a=this.queryRef)||void 0===a||a.fetchMore({variables:{first:this.pageSize,after:o}}),this.loadedPages+=1}}return _.\u0275fac=function(o){return new(o||_)(n.Y36(t.IZ6))},_.\u0275cmp=n.Xpm({type:_,selectors:[["cvc-sources-table"]],inputs:{clinicalTrialId:"clinicalTrialId",cvcTitleTemplate:"cvcTitleTemplate",cvcTitle:"cvcTitle"},decls:45,vars:36,consts:[[3,"nzTitle"],[3,"nzData","nzLoading","nzFrontPagination","nzShowPagination"],["sourcesTable",""],[3,"nzSortOrderChange"],["nzWidth","15%"],[3,"nzColumnKey","nzSortFn"],["nzWidth","25%",3,"nzColumnKey","nzSortFn"],["nzRight","","nz-tooltip","","nzTooltipTitle","Evidence Count",3,"nzColumnKey","nzSortFn"],["nz-icon","","nzType","civic:evidence"],["nzAllowClear","","nzPlaceHolder","Choose",3,"ngModel","ngModelChange"],["nzValue","PUBMED","nzLabel","PubMed"],["nzValue","ASCO","nzLabel","ASCO"],["placeholderText","ID",3,"inputModel","onInputChanged","inputModelChange"],["placeholderText","Name",3,"inputModel","onInputChanged","inputModelChange"],["placeholderText","Authors",3,"inputModel","onInputChanged","inputModelChange"],["placeholderText","Year",3,"inputModel","onInputChanged","inputModelChange"],["placeholderText","Journal",3,"inputModel","onInputChanged","inputModelChange"],[4,"ngFor","ngForOf"],[4,"ngrxLet"],["titleTemplate",""],[3,"source"],[3,"tags","matchingText"],["nzRight",""],[4,"ngIf"],["colspan","8"],["nz-button","","nzBlock","",3,"click",4,"ngIf"],["nz-button","","nzBlock","",3,"click"],["nz-icon","","nzType","civic:source"],["nz-typography","","nzType","secondary",4,"ngIf","ngIfElse"],["noData",""],[3,"ngTemplateOutlet"],["nz-typography","","nzType","secondary"]],template:function(o,a){if(1&o&&(n.TgZ(0,"nz-card",0),n.TgZ(1,"nz-table",1,2),n.ALo(3,"ngrxPush"),n.ALo(4,"ngrxPush"),n.TgZ(5,"thead",3),n.NdJ("nzSortOrderChange",function(c){return a.onSortChanged(c)}),n.TgZ(6,"tr"),n.TgZ(7,"th",4),n._uU(8," Citation "),n.qZA(),n.TgZ(9,"th",5),n._uU(10," Source Type "),n.qZA(),n.TgZ(11,"th",5),n._uU(12," ID "),n.qZA(),n.TgZ(13,"th",6),n._uU(14," Name "),n.qZA(),n.TgZ(15,"th",5),n._uU(16," Authors "),n.qZA(),n.TgZ(17,"th",5),n._uU(18," Year "),n.qZA(),n.TgZ(19,"th",5),n._uU(20," Journal "),n.qZA(),n.TgZ(21,"th",7),n._UZ(22,"i",8),n.qZA(),n.qZA(),n.TgZ(23,"tr"),n._UZ(24,"th"),n.TgZ(25,"th"),n.TgZ(26,"nz-select",9),n.NdJ("ngModelChange",function(){return a.onModelChanged()})("ngModelChange",function(c){return a.sourceTypeInput=c}),n._UZ(27,"nz-option",10),n._UZ(28,"nz-option",11),n.qZA(),n.qZA(),n.TgZ(29,"th"),n.TgZ(30,"cvc-clearable-input-filter",12),n.NdJ("inputModelChange",function(c){return a.citationIdInput=c}),n.qZA(),n.qZA(),n.TgZ(31,"th"),n.TgZ(32,"cvc-clearable-input-filter",13),n.NdJ("inputModelChange",function(c){return a.nameInput=c}),n.qZA(),n.qZA(),n.TgZ(33,"th"),n.TgZ(34,"cvc-clearable-input-filter",14),n.NdJ("inputModelChange",function(c){return a.authorInput=c}),n.qZA(),n.qZA(),n.TgZ(35,"th"),n.TgZ(36,"cvc-clearable-input-filter",15),n.NdJ("inputModelChange",function(c){return a.yearInput=c}),n.qZA(),n.qZA(),n.TgZ(37,"th"),n.TgZ(38,"cvc-clearable-input-filter",16),n.NdJ("inputModelChange",function(c){return a.journalInput=c}),n.qZA(),n.qZA(),n._UZ(39,"th"),n.qZA(),n.qZA(),n.TgZ(40,"tbody"),n.YNc(41,L,17,9,"tr",17),n.YNc(42,B,2,1,"ng-container",18),n.qZA(),n.qZA(),n.qZA(),n.YNc(43,j,7,6,"ng-template",null,19,n.W1O)),2&o){const C=n.MAs(2),c=n.MAs(44);n.Q6J("nzTitle",c),n.xp6(1),n.Q6J("nzData",n.lcZ(3,32,a.sources$))("nzLoading",n.lcZ(4,34,a.isLoading$))("nzFrontPagination",!1)("nzShowPagination",!1),n.xp6(8),n.Q6J("nzColumnKey",a.sortColumns.SourceType)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",a.sortColumns.CitationId)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",a.sortColumns.Name)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",a.sortColumns.Authors)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",a.sortColumns.Year)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",a.sortColumns.Journal)("nzSortFn",!0),n.xp6(2),n.Q6J("nzColumnKey",a.sortColumns.EvidenceCount)("nzSortFn",!0),n.xp6(5),n.Q6J("ngModel",a.sourceTypeInput),n.xp6(4),n.Q6J("inputModel",a.citationIdInput)("onInputChanged",a.textInputCallback),n.xp6(2),n.Q6J("inputModel",a.nameInput)("onInputChanged",a.textInputCallback),n.xp6(2),n.Q6J("inputModel",a.authorInput)("onInputChanged",a.textInputCallback),n.xp6(2),n.Q6J("inputModel",a.yearInput)("onInputChanged",a.textInputCallback),n.xp6(2),n.Q6J("inputModel",a.journalInput)("onInputChanged",a.textInputCallback),n.xp6(3),n.Q6J("ngForOf",C.data),n.xp6(1),n.Q6J("ngrxLet",a.pageInfo$)}},directives:[O.bd,p.N8,p.Om,p.$Z,p.Uo,p._C,p.qD,p.qn,I.SY,r.Ls,u.w,l.Vq,i.JJ,i.On,l.Ip,f.p,p.p0,v.sg,Z.T,z.l,A.eJ,v.O5,x.ix,U.dQ,v.tP,y.ZU],pipes:[A.fM],styles:["[_nghost-%COMP%]{display:block}"]}),_})()},7279:(D,E,e)=>{e.d(E,{h:()=>l});var t=e(9808),M=e(1132),T=e(8054),m=e(4125),d=e(4182),h=e(9779),g=e(6949),P=e(3968),n=e(6042),O=e(647),p=e(3618),I=e(7484),r=e(404),u=e(5e3);let l=(()=>{class i{}return i.\u0275fac=function(v){return new(v||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[t.ez,d.u5,g.WG,M.HQ,T.LV,O.PV,p.ZJ,I.vh,n.sL,r.cg,m.k,h.s,P.T]]}),i})()}}]);