"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[8245],{1834:(K,Q,e)=>{e.d(Q,{m:()=>Y});var t=e(5879),f=e(6814),o=e(5695),n=e(551),T=e(3488),S=e(270),B=e(4786),x=e(9408),A=e(5959),E=e(4121),$=e(356),z=e(215),Z=e(2606);function L(_,u){if(1&_&&(t.ynx(0),t._UZ(1,"span",2),t.BQk()),2&_){const r=t.oxw().$implicit;t.xp6(1),t.Q6J("innerHtml",r.text,t.oJD)}}function M(_,u){if(1&_&&(t.ynx(0),t._UZ(1,"cvc-user-tag",3),t.BQk()),2&_){const r=t.oxw().$implicit;t.xp6(1),t.Q6J("user",r)}}const P=function(_,u,r,W){return{id:_,name:u,link:r,revisionSetId:W}};function F(_,u){if(1&_&&(t.TgZ(0,"span"),t._UZ(1,"cvc-revision-tag",6),t.qZA()),2&_){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("revision",t.l5B(1,P,r.entityId,r.displayName,r.link,r.revisionSetId))}}const R=function(_,u,r){return{id:_,name:u,link:r}};function O(_,u){if(1&_&&(t.TgZ(0,"span"),t._UZ(1,"cvc-gene-tag",7),t.qZA()),2&_){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("gene",t.kEZ(1,R,r.entityId,r.displayName,r.link))}}const I=function(_,u,r,W){return{id:_,name:u,link:r,deprecated:W}};function D(_,u){if(1&_&&(t.TgZ(0,"span"),t._UZ(1,"cvc-variant-tag",8),t.qZA()),2&_){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("variant",t.l5B(1,I,r.entityId,r.displayName,r.link,r.deprecated))}}function U(_,u){if(1&_&&(t.TgZ(0,"span"),t._UZ(1,"cvc-variant-group-tag",9),t.qZA()),2&_){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("variantgroup",t.kEZ(1,R,r.entityId,r.displayName,r.link))}}const J=function(_,u,r,W){return{id:_,name:u,status:r,link:W}};function v(_,u){if(1&_&&(t.TgZ(0,"span"),t._UZ(1,"cvc-evidence-tag",10),t.qZA()),2&_){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("evidence",t.l5B(1,J,r.entityId,r.displayName,r.status,r.link))}}function h(_,u){if(1&_&&(t.TgZ(0,"span"),t._UZ(1,"cvc-assertion-tag",11),t.qZA()),2&_){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("assertion",t.l5B(1,J,r.entityId,r.displayName,r.status,r.link))}}const i=function(_,u){return{id:_,name:u}};function a(_,u){if(1&_&&(t.TgZ(0,"span"),t._UZ(1,"cvc-organization-tag",12),t.qZA()),2&_){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("org",t.WLB(1,i,r.entityId,r.displayName))}}function s(_,u){if(1&_&&(t.TgZ(0,"span"),t._UZ(1,"cvc-molecular-profile-tag",13),t.qZA()),2&_){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("molecularProfile",t.l5B(1,I,r.entityId,r.displayName,r.link,r.deprecated))}}function g(_,u){if(1&_&&(t.TgZ(0,"span")(1,"nz-tag"),t._UZ(2,"i",14),t._uU(3),t.qZA()()),2&_){const r=t.oxw(2).$implicit;t.xp6(2),t.MGl("nzType","civic-",r.displayName.slice(0,-1),""),t.xp6(1),t.hij(" ",r.displayName,"")}}function C(_,u){if(1&_&&(t.ynx(0)(1,4),t.YNc(2,F,2,6,"span",5),t.YNc(3,O,2,5,"span",5),t.YNc(4,D,2,6,"span",5),t.YNc(5,U,2,5,"span",5),t.YNc(6,v,2,6,"span",5),t.YNc(7,h,2,6,"span",5),t.YNc(8,a,2,4,"span",5),t.YNc(9,s,2,6,"span",5),t.YNc(10,g,4,2,"span",5),t.BQk()()),2&_){const r=t.oxw().$implicit;t.xp6(1),t.Q6J("ngSwitch",r.tagType),t.xp6(1),t.Q6J("ngSwitchCase","REVISION"),t.xp6(1),t.Q6J("ngSwitchCase","GENE"),t.xp6(1),t.Q6J("ngSwitchCase","VARIANT"),t.xp6(1),t.Q6J("ngSwitchCase","VARIANT_GROUP"),t.xp6(1),t.Q6J("ngSwitchCase","EVIDENCE_ITEM"),t.xp6(1),t.Q6J("ngSwitchCase","ASSERTION"),t.xp6(1),t.Q6J("ngSwitchCase","ORGANIZATION"),t.xp6(1),t.Q6J("ngSwitchCase","MOLECULAR_PROFILE"),t.xp6(1),t.Q6J("ngSwitchCase","ROLE")}}function N(_,u){if(1&_&&(t.ynx(0),t.YNc(1,L,2,1,"ng-container",1),t.YNc(2,M,2,1,"ng-container",1),t.YNc(3,C,11,10,"ng-container",1),t.BQk()),2&_){const r=u.$implicit;t.xp6(1),t.Q6J("ngIf","CommentTextSegment"==r.__typename),t.xp6(1),t.Q6J("ngIf","User"==r.__typename),t.xp6(1),t.Q6J("ngIf","CommentTagSegment"==r.__typename)}}let Y=(()=>{class _{ngOnInit(){if(void 0===this.commentBodySegments)throw new Error("Must pass a list of comment body segments into comment body component.")}}return _.\u0275fac=function(r){return new(r||_)},_.\u0275cmp=t.Xpm({type:_,selectors:[["cvc-comment-body"]],inputs:{commentBodySegments:"commentBodySegments"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"innerHtml"],[3,"user"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"revision"],[3,"gene"],[3,"variant"],[3,"variantgroup"],[3,"evidence"],[3,"assertion"],[3,"org"],[3,"molecularProfile"],["nz-icon","","nzTheme","twotone","nzTwotoneColor","#A0D8F5",3,"nzType"]],template:function(r,W){1&r&&t.YNc(0,N,4,3,"ng-container",0),2&r&&t.Q6J("ngForOf",W.commentBodySegments)},dependencies:[f.sg,f.O5,f.RF,f.n9,o.j,n.Ls,T.p,S.w,B.O,x.I,A.u,E.H,$.I,z.m,Z.p],encapsulation:2}),_})()},800:(K,Q,e)=>{e.d(Q,{D:()=>pn});var t=e(313),f=e(7398),o=e(4223),n=e(5879),T=e(6814),S=e(2840),B=e(855),x=e(95),A=e(2962),E=e(6976),$=e(551),z=e(6928),Z=e(2574),L=e(8645),M=e(9773),P=e(2024),F=e(951),R=e(7473),O=e(6223),I=e(1958),D=e(3599),U=e(2669),J=e(3903),v=e(4755),h=e(5805),i=e(2257),a=e(3764),s=e(1889);function g(c,d){if(1&c){const m=n.EpF();n.TgZ(0,"nz-alert",7),n.NdJ("nzOnClose",function(){n.CHM(m);const p=n.oxw();return n.KtG(p.onSuccessBannerClose())}),n.qZA()}}function C(c,d){if(1&c&&(n.TgZ(0,"nz-form-item"),n._UZ(1,"cvc-form-errors-alert",8),n.qZA()),2&c){const m=n.oxw();n.xp6(1),n.Q6J("errors",m.errorMessages)}}let N=(()=>{class c{constructor(m,l,p){this.viewerService=m,this.addCommentGql=l,this.networkErrorService=p,this.commentAddedEvent=new n.vpe,this.destroy$=new L.x,this.success=!1,this.errorMessages=[],this.loading=!1,this.viewerService.viewer$.pipe((0,M.R)(this.destroy$)).subscribe(y=>{this.organizations=y.organizations,this.mostRecentOrg=y.mostRecentOrg}),this.addCommentMutator=new P.U(p)}selectOrg(m){this.mostRecentOrg=m}submitComment(){if(this.commentText){this.errorMessages=[];let l=this.addCommentMutator.mutate(this.addCommentGql,{input:{body:this.commentText,subject:this.subject,organizationId:void 0===this.mostRecentOrg?void 0:this.mostRecentOrg.id}});l.submitSuccess$.pipe((0,M.R)(this.destroy$)).subscribe(p=>{p&&(this.resetForm(),this.success=!0)}),l.submitError$.pipe((0,M.R)(this.destroy$)).subscribe(p=>{p&&(this.errorMessages=p,this.success=!1)}),l.isSubmitting$.pipe((0,M.R)(this.destroy$)).subscribe(p=>{this.loading=p})}}resetForm(){this.commentText="",this.commentAddedEvent.emit()}onSuccessBannerClose(){this.resetForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return c.\u0275fac=function(m){return new(m||c)(n.Y36(F.a),n.Y36(t.iGM),n.Y36(R.Y))},c.\u0275cmp=n.Xpm({type:c,selectors:[["cvc-comment-add-form"]],inputs:{subject:"subject"},outputs:{commentAddedEvent:"commentAddedEvent"},decls:12,vars:6,consts:[["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[4,"ngIf"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[3,"selectedOrg","selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"],["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose"],[3,"errors"]],template:function(m,l){1&m&&(n.TgZ(0,"nz-card"),n.YNc(1,g,1,0,"nz-alert",0),n.TgZ(2,"form",1),n.NdJ("ngSubmit",function(){return l.submitComment()}),n.YNc(3,C,2,1,"nz-form-item",2),n.TgZ(4,"cvc-comment-input-form",3),n.NdJ("commentChange",function(y){return l.commentText=y}),n.qZA(),n.TgZ(5,"nz-spin",4)(6,"nz-form-item")(7,"nz-form-control")(8,"cvc-form-buttons")(9,"cvc-org-selector-btn-group",5),n.NdJ("selectedOrgChange",function(y){return l.mostRecentOrg=y}),n.TgZ(10,"button",6),n._uU(11," Add Comment "),n.qZA()()()()()()()()),2&m&&(n.xp6(1),n.Q6J("ngIf",l.success),n.xp6(2),n.Q6J("ngIf",l.errorMessages.length>0),n.xp6(1),n.Q6J("comment",l.commentText),n.xp6(1),n.Q6J("nzSpinning",l.loading),n.xp6(4),n.Q6J("selectedOrg",l.mostRecentOrg),n.xp6(1),n.Q6J("disabled",l.loading||!(void 0!==l.commentText&&l.commentText.length>=10)))},dependencies:[T.O5,O._Y,O.JL,S.ix,B.w,I.dQ,A.bd,x.t3,x.SK,D.Lr,D.Nx,D.Fd,U.W,J.r,O.F,v.V,h.m,i.q,a.Z,s.b],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2}),c})();var Y=e(6794),_=e(1320),u=e(1834),r=e(5573);function W(c,d){if(1&c&&n._UZ(0,"nz-avatar",4),2&c){const m=n.oxw();n.Q6J("nzSrc",m.comment.commenter.profileImagePath)}}function G(c,d){1&c&&n._UZ(0,"nz-avatar",5)}let j=(()=>{class c{ngOnInit(){if(void 0===this.comment)throw new Error("Must pass a comment into comment display component.")}}return c.\u0275fac=function(m){return new(m||c)},c.\u0275cmp=n.Xpm({type:c,selectors:[["cvc-comment-display"]],inputs:{comment:"comment"},decls:7,vars:7,consts:[[3,"nzAuthor","nzDatetime"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],[3,"commentBodySegments"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","","nzIcon","civic:curator"]],template:function(m,l){if(1&m&&(n.TgZ(0,"nz-comment",0),n.ALo(1,"timeAgo"),n.YNc(2,W,1,1,"nz-avatar",1),n.YNc(3,G,1,0,"ng-template",null,2,n.W1O),n.TgZ(5,"nz-comment-content"),n._UZ(6,"cvc-comment-body",3),n.qZA()()),2&m){const p=n.MAs(4);n.Q6J("nzAuthor",l.comment.commenter.displayName)("nzDatetime",n.lcZ(1,5,l.comment.createdAt)),n.xp6(2),n.Q6J("ngIf",l.comment.commenter.profileImagePath)("ngIfElse",p),n.xp6(4),n.Q6J("commentBodySegments",l.comment.parsedComment)}},dependencies:[T.O5,_.WE,_.DA,_.Y4,z.Dz,u.m,r.x],encapsulation:2}),c})();var H=e(8091),V=e(6116);function b(c,d){if(1&c){const m=n.EpF();n.TgZ(0,"div",18)(1,"button",19),n.NdJ("click",function(){n.CHM(m);const p=n.oxw().ngIf,y=n.oxw(3);return n.KtG(y.onLoadMore(p.startCursor))}),n._uU(2," Load older comments "),n.qZA()()}}function X(c,d){if(1&c&&(n.TgZ(0,"nz-list-header"),n.YNc(1,b,3,0,"div",17),n.qZA()),2&c){const m=d.ngIf;n.xp6(1),n.Q6J("ngIf",m.hasPreviousPage)}}function q(c,d){if(1&c&&(n.TgZ(0,"nz-list-item"),n._UZ(1,"cvc-comment-display",20),n.qZA()),2&c){const m=d.$implicit;n.xp6(1),n.Q6J("comment",m)}}function k(c,d){if(1&c&&(n.TgZ(0,"nz-card",13)(1,"nz-list",14),n.ALo(2,"ngrxPush"),n.ALo(3,"ngrxPush"),n.YNc(4,X,2,1,"nz-list-header",15),n.ALo(5,"ngrxPush"),n.YNc(6,q,2,1,"ng-template",null,16,n.W1O),n.qZA()()),2&c){const m=n.MAs(7),l=n.oxw(2);n.xp6(1),n.Q6J("nzDataSource",n.lcZ(2,4,l.comments$))("nzLoading",n.lcZ(3,6,l.loading$))("nzRenderItem",m),n.xp6(3),n.Q6J("ngIf",n.lcZ(5,8,l.pageInfo$))}}function nn(c,d){if(1&c){const m=n.EpF();n.TgZ(0,"cvc-comment-add-form",21),n.NdJ("commentAddedEvent",function(){n.CHM(m);const p=n.oxw(2);return n.KtG(p.refreshList())}),n.qZA()}if(2&c){const m=n.oxw(2);n.Q6J("subject",m.commentable)}}function tn(c,d){if(1&c&&n._UZ(0,"nz-avatar",24),2&c){const m=n.oxw().$implicit;n.Q6J("nzSrc",m.profileImagePath)}}function en(c,d){if(1&c&&(n._UZ(0,"nz-avatar",25),n.ALo(1,"uppercase")),2&c){const m=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,m.displayName.charAt(0)))}}function on(c,d){if(1&c&&(n.YNc(0,tn,1,1,"nz-avatar",22),n.YNc(1,en,2,3,"ng-template",null,23,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&c){const m=d.$implicit,l=n.MAs(2);n.Q6J("ngIf",m.profileImagePath)("ngIfElse",l),n.xp6(4),n.Oqu(m.displayName)}}function mn(c,d){if(1&c&&n._UZ(0,"nz-avatar",24),2&c){const m=n.oxw().$implicit;n.Q6J("nzSrc",m.profileImagePath)}}function cn(c,d){if(1&c&&(n._UZ(0,"nz-avatar",25),n.ALo(1,"uppercase")),2&c){const m=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,m.displayName.charAt(0)))}}function an(c,d){if(1&c&&(n.YNc(0,mn,1,1,"nz-avatar",22),n.YNc(1,cn,2,3,"ng-template",null,23,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&c){const m=d.$implicit,l=n.MAs(2);n.Q6J("ngIf",m.profileImagePath)("ngIfElse",l),n.xp6(4),n.Oqu(m.displayName)}}function sn(c,d){if(1&c&&(n._UZ(0,"nz-avatar",26),n.TgZ(1,"span"),n._uU(2),n.qZA()),2&c){const m=d.$implicit;n.MGl("nzIcon","civic-",m.tag.displayName,""),n.xp6(2),n.hij("",m.tag.displayName,"s")}}function rn(c,d){if(1&c&&(n._UZ(0,"i",27),n.ALo(1,"iconNameForSubscribableEntity"),n.TgZ(2,"span"),n._uU(3),n.qZA()),2&c){const m=d.$implicit;n.Q6J("nzType",n.lcZ(1,2,m.tag.tagType)),n.xp6(3),n.Oqu(m.tag.displayName)}}const w=function(){return[]};function _n(c,d){if(1&c){const m=n.EpF();n.ynx(0),n.TgZ(1,"nz-row",2)(2,"nz-col",3)(3,"nz-space",4),n.YNc(4,k,8,10,"nz-card",5),n.YNc(5,nn,1,1,"cvc-comment-add-form",6),n.qZA()(),n.TgZ(6,"nz-col",7)(7,"cvc-participant-list",8),n.NdJ("participantSelectedEvent",function(p){n.CHM(m);const y=n.oxw();return n.KtG(y.onCommenterSelected(p))}),n.ALo(8,"ngrxPush"),n.YNc(9,on,5,3,"ng-template",null,9,n.W1O),n.qZA(),n.TgZ(11,"cvc-participant-list",10),n.NdJ("participantSelectedEvent",function(p){n.CHM(m);const y=n.oxw();return n.KtG(y.onMentionedUserSelected(p))}),n.ALo(12,"ngrxPush"),n.YNc(13,an,5,3,"ng-template",null,9,n.W1O),n.qZA(),n.TgZ(15,"cvc-participant-list",11),n.NdJ("participantSelectedEvent",function(p){n.CHM(m);const y=n.oxw();return n.KtG(y.onMentionedRoleSelected(p))}),n.ALo(16,"ngrxPush"),n.YNc(17,sn,3,2,"ng-template",null,9,n.W1O),n.qZA(),n.TgZ(19,"cvc-participant-list",12),n.NdJ("participantSelectedEvent",function(p){n.CHM(m);const y=n.oxw();return n.KtG(y.onMentionedEntitySelected(p))}),n.ALo(20,"ngrxPush"),n.YNc(21,rn,4,4,"ng-template",null,9,n.W1O),n.qZA()()(),n.BQk()}if(2&c){const m=n.oxw();n.xp6(1),n.Q6J("nzGutter",16),n.xp6(6),n.Q6J("participantList",n.lcZ(8,5,m.commenters$)||n.DdM(13,w)),n.xp6(4),n.Q6J("participantList",n.lcZ(12,7,m.mentionedUsers$)||n.DdM(14,w)),n.xp6(4),n.Q6J("participantList",n.lcZ(16,9,m.mentionedRoles$)||n.DdM(15,w)),n.xp6(4),n.Q6J("participantList",n.lcZ(20,11,m.mentionedEntities$)||n.DdM(16,w))}}function ln(c,d){if(1&c){const m=n.EpF();n.TgZ(0,"cvc-comment-add-form",21),n.NdJ("commentAddedEvent",function(){n.CHM(m);const p=n.oxw();return n.KtG(p.refreshList())}),n.qZA()}if(2&c){const m=n.oxw();n.Q6J("subject",m.commentable)}}let pn=(()=>{class c{constructor(m){this.gql=m,this.pageSize=5}ngOnInit(){this.queryRef$=this.gql.watch({subject:this.commentable,last:this.pageSize,sortBy:{column:t.h01.Created,direction:t.SrV.Asc}});let m=this.queryRef$.valueChanges;this.pageInfo$=m.pipe((0,f.U)(({data:l})=>l.comments.pageInfo)),this.loading$=m.pipe((0,f.U)(({loading:l})=>l)),this.comments$=m.pipe((0,f.U)(({data:l})=>l.comments.edges.map(p=>p.node))),this.commenters$=m.pipe((0,f.U)(({data:l})=>l.comments.uniqueCommenters)),this.mentionedUsers$=m.pipe((0,f.U)(({data:l})=>l.comments.mentionedUsers)),this.mentionedRoles$=m.pipe((0,f.U)(({data:l})=>l.comments.mentionedRoles.map(p=>({id:`${p.entityId}-${p.tagType}`,tag:p})))),this.mentionedEntities$=m.pipe((0,f.U)(({data:l})=>l.comments.mentionedEntities.map(p=>({id:`${p.entityId}-${p.tagType}`,tag:p})))),this.unfilteredCount$=m.pipe((0,o.j)("data","comments","unfilteredCountForSubject"))}onLoadMore(m){this.queryRef$.fetchMore({variables:{last:this.pageSize,before:m}})}onCommenterSelected(m){this.queryRef$.refetch({originatingUserId:m?.id})}onMentionedUserSelected(m){this.queryRef$.refetch({mentionedUserId:m?.id})}onMentionedRoleSelected(m){if(m){let l=t.i44[m.tag.displayName[0].toUpperCase()+m.tag.displayName.slice(1)];this.queryRef$.refetch({mentionedRole:l})}else this.queryRef$.refetch({mentionedRole:void 0})}onMentionedEntitySelected(m){this.queryRef$.refetch(m?{mentionedEntity:{entityType:m.tag.tagType,id:m.tag.entityId}}:{mentionedEntity:void 0})}refreshList(){this.queryRef$.refetch()}}return c.\u0275fac=function(m){return new(m||c)(n.Y36(t.iST))},c.\u0275cmp=n.Xpm({type:c,selectors:[["cvc-comment-list"]],inputs:{commentable:"commentable"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noComments",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical",2,"width","100%"],["nzTitle","Comments",4,"nzSpaceItem"],["id","addComment",3,"subject","commentAddedEvent",4,"nzSpaceItem"],["nzSpan","6"],["listTitle","Commenters",3,"participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Mentioned Users",3,"participantList","participantSelectedEvent"],["listTitle","Mentioned Roles",3,"participantList","participantSelectedEvent"],["listTitle","Mentioned Entities",3,"participantList","participantSelectedEvent"],["nzTitle","Comments"],["nzSize","small","nzItemLayout","horizontal",3,"nzDataSource","nzLoading","nzRenderItem"],[4,"ngIf"],["comment",""],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","link","nzSize","small","nzBlock","",3,"click"],[3,"comment"],["id","addComment",3,"subject","commentAddedEvent"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],[3,"nzIcon"],["nz-icon","",3,"nzType"]],template:function(m,l){if(1&m&&(n.YNc(0,_n,23,17,"ng-container",0),n.ALo(1,"ngrxPush"),n.YNc(2,ln,1,1,"ng-template",null,1,n.W1O)),2&m){const p=n.MAs(3);n.Q6J("ngIf",n.lcZ(1,2,l.unfilteredCount$))("ngIfElse",p)}},dependencies:[T.O5,S.ix,B.w,x.t3,x.SK,A.bd,E.n_,E.t4,E.AA,$.Ls,z.Dz,Z.NU,Z.$1,N,Y.l,j,T.gd,H.fM,V.j],styles:["[_nghost-%COMP%]{display:block}nz-list-header[_ngcontent-%COMP%]{padding:0;margin:0}nz-list-header[_ngcontent-%COMP%]   [nz-list-load-more][_ngcontent-%COMP%]{margin-top:-.5em;padding-bottom:.5em}"]}),c})()},1830:(K,Q,e)=>{e.d(Q,{l:()=>g});var t=e(6814),f=e(95),o=e(2962),n=e(6976),T=e(6928),S=e(2574),B=e(4139),x=e(1595),A=e(1320),E=e(4758),$=e(2524),z=e(5879);let Z=(()=>{class C{}return C.\u0275fac=function(Y){return new(Y||C)},C.\u0275mod=z.oAB({type:C}),C.\u0275inj=z.cJS({imports:[t.ez,A.YM,T.Rt,E.m,$.s]}),C})();var L=e(6223),M=e(5545),P=e(3599),F=e(3394),R=e(6294),O=e(845),I=e(2840),D=e(9560),U=e(9382),J=e(2669),v=e(6513),h=e(3378),i=e(3903);let a=(()=>{class C{}return C.\u0275fac=function(Y){return new(Y||C)},C.\u0275mod=z.oAB({type:C}),C.\u0275inj=z.cJS({imports:[t.ez,L.UX,I.sL,o.vh,U.we,P.U5,J.j,v.Gl,i.L,L.u5,M.X0,F.B,R.A,O.R,E.m,D.K,h.w]}),C})();var s=e(551);let g=(()=>{class C{}return C.\u0275fac=function(Y){return new(Y||C)},C.\u0275mod=z.oAB({type:C}),C.\u0275inj=z.cJS({imports:[t.ez,I.sL,f.Jb,o.vh,n.Ph,s.PV,$.s,T.Rt,S.zf,B.H0,a,x.N,Z]}),C})()},1889:(K,Q,e)=>{e.d(Q,{b:()=>J});var t=e(5879),f=e(8645),o=e(313),n=e(2181),T=e(9773),S=e(7398),B=e(7921),x=e(4223),A=e(5676),E=e(951),$=e(6814),z=e(6223),Z=e(8091),L=e(9382),M=e(2669),P=e(6513),F=e(1834);function R(v,h){if(1&v&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.BQk()),2&v){const i=h.$implicit;t.xp6(2),t.Oqu(i.displayName)}}function O(v,h){1&v&&(t.ynx(0),t._UZ(1,"nz-spin",8),t.BQk())}function I(v,h){if(1&v&&(t.ynx(0),t._UZ(1,"cvc-comment-body",9),t.BQk()),2&v){const i=h.ngIf;t.xp6(1),t.Q6J("commentBodySegments",i)}}const D=function(){return["#","@","$"]};function U(v,h){if(1&v){const i=t.EpF();t.ynx(0),t.TgZ(1,"nz-tabset",1)(2,"nz-tab",2)(3,"nz-mention",3),t.NdJ("nzOnSearchChange",function(s){t.CHM(i);const g=t.oxw();return t.KtG(g.onSearchChange(s))})("nzOnSelect",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.suggestions=[])}),t.TgZ(4,"textarea",4),t.NdJ("ngModelChange",function(s){t.CHM(i);const g=t.oxw();return t.KtG(g.commentText=s)})("ngModelChange",function(s){t.CHM(i);const g=t.oxw();return t.KtG(g.onCommentChanged(s))}),t.qZA(),t.YNc(5,R,3,1,"ng-container",5),t.qZA()(),t.TgZ(6,"nz-tab",6),t.NdJ("nzClick",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.onPreviewButtonClicked())}),t.YNc(7,O,2,0,"ng-container",7),t.ALo(8,"ngrxPush"),t.YNc(9,I,2,1,"ng-container",7),t.ALo(10,"ngrxPush"),t.qZA()(),t.BQk()}if(2&v){const i=h.ngrxLet,a=t.oxw();t.xp6(1),t.Q6J("nzAnimated",!1),t.xp6(2),t.Q6J("nzSuggestions",a.suggestions)("nzPrefix",t.DdM(13,D))("nzValueWith",a.autoCompleteValueFor),t.xp6(1),t.Q6J("placeholder",i&&i.canCurate?"Enter comment (minimum length 10. Use @ to mention users; # to link entities)":"Please sign in")("ngModel",a.commentText),t.uIk("disabled",!i||!i.canCurate||null),t.xp6(3),t.Q6J("ngIf",t.lcZ(8,9,a.previewLoading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(10,11,a.previewComment$))}}let J=(()=>{class v{constructor(i,a,s,g){this.previewCommentGql=i,this.userTypeaheadGql=a,this.entityTypeaheadGql=s,this.viewerService=g,this.commentChange=new t.vpe,this.destroy$=new f.x,this.suggestions=[],this.roleSuggestions=[{displayName:"admins",value:"admins"},{displayName:"editors",value:"editors"}]}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.commentText=this.comment,this.userTypeaheadQueryRef$=this.userTypeaheadGql.watch({queryTerm:""}),this.userTypeaheadQueryRef$.valueChanges.pipe((0,x.j)("data","userTypeahead"),(0,n.h)(A.ep),(0,T.R)(this.destroy$)).subscribe(i=>this.suggestions=i.map(a=>({displayName:a.username,value:a.username}))),this.entityTypeaheadQueryRef$=this.entityTypeaheadGql.watch({queryTerm:""}),this.entityTypeaheadQueryRef$.valueChanges.pipe((0,x.j)("data","entityTypeahead"),(0,n.h)(A.ep),(0,T.R)(this.destroy$)).subscribe(i=>this.suggestions=i.map(a=>({displayName:a.displayName,value:this.tagForEntityTypeAndId(a.tagType,a.entityId)})))}ngOnChanges(){this.commentText=this.comment}autoCompleteValueFor(i){return i.value}tagForEntityTypeAndId(i,a){switch(i){case o.mpB.Gene:return`GID${a}`;case o.mpB.Variant:return`VID${a}`;case o.mpB.VariantGroup:return`VGID${a}`;case o.mpB.EvidenceItem:return`EID${a}`;case o.mpB.Assertion:return`AID${a}`;case o.mpB.Revision:return`RID${a}`;case o.mpB.MolecularProfile:return`MPID${a}`;case o.mpB.Role:return Object.keys(o.i44)[a]}}resetForm(){this.commentText=""}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreviewButtonClicked(){this.commentText&&(this.previewComment$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,x.j)("data","previewCommentText"),(0,n.h)(A.ep)),this.previewLoading$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,S.U)(({loading:i})=>i),(0,B.O)(!0)))}onSearchChange({value:i,prefix:a}){"@"===a?this.userTypeaheadQueryRef$.refetch({queryTerm:i}):"$"==a?this.suggestions=this.roleSuggestions.filter(s=>s.value.startsWith(i)):this.entityTypeaheadQueryRef$.refetch({queryTerm:i})}onCommentChanged(i){this.commentChange.emit(i)}}return v.\u0275fac=function(i){return new(i||v)(t.Y36(o.mII),t.Y36(o.vMt),t.Y36(o.GYx),t.Y36(E.a))},v.\u0275cmp=t.Xpm({type:v,selectors:[["cvc-comment-input-form"]],inputs:{comment:"comment"},outputs:{commentChange:"commentChange"},features:[t.TTD],decls:1,vars:1,consts:[[4,"ngrxLet"],[3,"nzAnimated"],["nzTitle","Write"],["nzNotFoundContent","No matches...",3,"nzSuggestions","nzPrefix","nzValueWith","nzOnSearchChange","nzOnSelect"],["nzMentionTrigger","","nz-input","","rows","4",2,"width","100%",3,"placeholder","ngModel","ngModelChange"],[4,"nzMentionSuggestion"],["nzTitle","Preview",3,"nzClick"],[4,"ngIf"],["nzTip","Loading..."],[3,"commentBodySegments"]],template:function(i,a){1&i&&t.YNc(0,U,11,14,"ng-container",0),2&i&&t.Q6J("ngrxLet",a.viewer$)},dependencies:[$.O5,z.Fj,z.JJ,Z.eJ,L.xH,L.xw,M.W,P.YW,P.jO,P.O3,z.On,F.m,Z.fM],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2}),v})()},1320:(K,Q,e)=>{e.d(Q,{DA:()=>O,WE:()=>J,Y4:()=>I,YM:()=>h});var t=e(9388),f=e(6814),o=e(5879),n=e(8324),T=e(8484),S=e(8645),B=e(9773);function x(i,a){1&i&&o.Hsn(0)}const A=["*"];function E(i,a){if(1&i&&(o.ynx(0),o._uU(1),o.BQk()),2&i){const s=o.oxw(2);o.xp6(1),o.Oqu(s.nzAuthor)}}function $(i,a){if(1&i&&(o.TgZ(0,"span",8),o.YNc(1,E,2,1,"ng-container",9),o.qZA()),2&i){const s=o.oxw();o.xp6(1),o.Q6J("nzStringTemplateOutlet",s.nzAuthor)}}function z(i,a){if(1&i&&(o.ynx(0),o._uU(1),o.BQk()),2&i){const s=o.oxw(2);o.xp6(1),o.Oqu(s.nzDatetime)}}function Z(i,a){if(1&i&&(o.TgZ(0,"span",10),o.YNc(1,z,2,1,"ng-container",9),o.qZA()),2&i){const s=o.oxw();o.xp6(1),o.Q6J("nzStringTemplateOutlet",s.nzDatetime)}}function L(i,a){}function M(i,a){if(1&i&&(o.TgZ(0,"li")(1,"span"),o.YNc(2,L,0,0,"ng-template",13),o.qZA()()),2&i){const s=a.$implicit;o.xp6(2),o.Q6J("nzCommentActionHost",s.content)}}function P(i,a){if(1&i&&(o.TgZ(0,"ul",11),o.YNc(1,M,3,1,"li",12),o.qZA()),2&i){const s=o.oxw();o.xp6(1),o.Q6J("ngForOf",s.actions)}}const F=[[["nz-avatar","nz-comment-avatar",""]],[["nz-comment-content"]],"*"],R=["nz-avatar[nz-comment-avatar]","nz-comment-content","*"];let O=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275dir=o.lG2({type:i,selectors:[["nz-avatar","nz-comment-avatar",""]],exportAs:["nzCommentAvatar"]}),i})(),I=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275dir=o.lG2({type:i,selectors:[["nz-comment-content"],["","nz-comment-content",""]],hostAttrs:[1,"ant-comment-content-detail"],exportAs:["nzCommentContent"]}),i})(),D=(()=>{class i extends T.Pl{constructor(s,g){super(s,g)}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}ngAfterViewInit(){this.attach(this.nzCommentActionHost)}}return i.\u0275fac=function(s){return new(s||i)(o.Y36(o._Vd),o.Y36(o.s_b))},i.\u0275dir=o.lG2({type:i,selectors:[["","nzCommentActionHost",""]],inputs:{nzCommentActionHost:"nzCommentActionHost"},exportAs:["nzCommentActionHost"],features:[o.qOj]}),i})(),U=(()=>{class i{get content(){return this.contentPortal}constructor(s){this.viewContainerRef=s,this.contentPortal=null}ngOnInit(){this.contentPortal=new T.UE(this.implicitContent,this.viewContainerRef)}}return i.\u0275fac=function(s){return new(s||i)(o.Y36(o.s_b))},i.\u0275cmp=o.Xpm({type:i,selectors:[["nz-comment-action"]],viewQuery:function(s,g){if(1&s&&o.Gf(o.Rgc,7),2&s){let C;o.iGM(C=o.CRH())&&(g.implicitContent=C.first)}},exportAs:["nzCommentAction"],ngContentSelectors:A,decls:1,vars:0,template:function(s,g){1&s&&(o.F$t(),o.YNc(0,x,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),i})(),J=(()=>{class i{constructor(s,g){this.cdr=s,this.directionality=g,this.dir="ltr",this.destroy$=new S.x}ngOnInit(){this.directionality.change?.pipe((0,B.R)(this.destroy$)).subscribe(s=>{this.dir=s,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(s){return new(s||i)(o.Y36(o.sBO),o.Y36(t.Is,8))},i.\u0275cmp=o.Xpm({type:i,selectors:[["nz-comment"]],contentQueries:function(s,g,C){if(1&s&&o.Suo(C,U,4),2&s){let N;o.iGM(N=o.CRH())&&(g.actions=N)}},hostVars:4,hostBindings:function(s,g){2&s&&o.ekj("ant-comment",!0)("ant-comment-rtl","rtl"===g.dir)},inputs:{nzAuthor:"nzAuthor",nzDatetime:"nzDatetime"},exportAs:["nzComment"],ngContentSelectors:R,decls:11,vars:3,consts:[[1,"ant-comment-inner"],[1,"ant-comment-avatar"],[1,"ant-comment-content"],[1,"ant-comment-content-author"],["class","ant-comment-content-author-name",4,"ngIf"],["class","ant-comment-content-author-time",4,"ngIf"],["class","ant-comment-actions",4,"ngIf"],[1,"ant-comment-nested"],[1,"ant-comment-content-author-name"],[4,"nzStringTemplateOutlet"],[1,"ant-comment-content-author-time"],[1,"ant-comment-actions"],[4,"ngFor","ngForOf"],[3,"nzCommentActionHost"]],template:function(s,g){1&s&&(o.F$t(F),o.TgZ(0,"div",0)(1,"div",1),o.Hsn(2),o.qZA(),o.TgZ(3,"div",2)(4,"div",3),o.YNc(5,$,2,1,"span",4),o.YNc(6,Z,2,1,"span",5),o.qZA(),o.Hsn(7,1),o.YNc(8,P,2,1,"ul",6),o.qZA()(),o.TgZ(9,"div",7),o.Hsn(10,2),o.qZA()),2&s&&(o.xp6(5),o.Q6J("ngIf",g.nzAuthor),o.xp6(1),o.Q6J("ngIf",g.nzDatetime),o.xp6(2),o.Q6J("ngIf",null==g.actions?null:g.actions.length))},dependencies:[f.sg,f.O5,n.f,D],encapsulation:2,changeDetection:0}),i})(),h=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[t.vT,f.ez,n.T]}),i})()}}]);