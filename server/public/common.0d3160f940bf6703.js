"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[8592],{7525:(A,C,e)=>{e.d(C,{h:()=>I});var p=e(6814),u=e(551),E=e(5879);let I=(()=>{class m{}return m.\u0275fac=function(y){return new(y||m)},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({imports:[p.ez,u.PV]}),m})()},4140:(A,C,e)=>{e.d(C,{r:()=>h});var p=e(6814),u=e(6223),E=e(5956),I=e(7856),m=e(9154),v=e(2966),y=e(2989),g=e(7950),n=e(2524),_=e(9175),c=e(4742),i=e(9312),o=e(2840),l=e(2962),S=e(3599),R=e(551),F=e(824),O=e(3740),L=e(5695),T=e(6109),P=e(2392),M=e(5879);let h=(()=>{class f{}return f.\u0275fac=function(s){return new(s||f)},f.\u0275mod=M.oAB({type:f}),f.\u0275inj=M.cJS({imports:[p.ez,u.u5,o.sL,l.vh,S.U5,R.PV,F.o7,O.HQ,L.X,T.cg,P.ZJ,_.n,c.c,I.k,E.U,m.y,v.T,n.s,y.T,i.w,g.x]}),f})()},8178:(A,C,e)=>{e.d(C,{u:()=>n});var p=e(5879),u=e(9512),E=e(804),I=e(551),m=e(2392);function v(_,c){1&_&&(p.TgZ(0,"span"),p._uU(1," You must be logged in to view this page. "),p.qZA())}function y(_,c){1&_&&p._UZ(0,"cvc-login-button")}function g(_,c){1&_&&(p.TgZ(0,"nz-typography",4),p._UZ(1,"i",5),p.qZA())}let n=(()=>{class _{}return _.\u0275fac=function(i){return new(i||_)},_.\u0275cmp=p.Xpm({type:_,selectors:[["cvc-login-prompt"]],decls:7,vars:3,consts:[[3,"nzNotFoundImage","nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["emptyImage",""],["nzType","secondary"],["nz-icon","","nzType","login","nzTheme","outline",2,"font-size","50pt"]],template:function(i,o){if(1&i&&(p.TgZ(0,"nz-empty",0),p.YNc(1,v,2,0,"ng-template",null,1,p.W1O),p.YNc(3,y,1,0,"ng-template",null,2,p.W1O),p.qZA(),p.YNc(5,g,2,0,"ng-template",null,3,p.W1O)),2&i){const l=p.MAs(2),S=p.MAs(4),R=p.MAs(6);p.Q6J("nzNotFoundImage",R)("nzNotFoundContent",l)("nzNotFoundFooter",S)}},dependencies:[u.s,E.p9,I.Ls,m.ZU],styles:["[_nghost-%COMP%]{display:inline-block}"]}),_})()},8603:(A,C,e)=>{e.d(C,{a:()=>y});var p=e(6814),u=e(5163),E=e(804),I=e(551),m=e(2392),v=e(5879);let y=(()=>{class g{}return g.\u0275fac=function(_){return new(_||g)},g.\u0275mod=v.oAB({type:g}),g.\u0275inj=v.cJS({imports:[p.ez,u.B,E.Xo,I.PV,m.ZJ]}),g})()},1689:(A,C,e)=>{e.d(C,{u:()=>P});var p=e(655),u=e(6223),E=e(2024),I=e(5884),m=e(5710),v=e(9442),y=e(1791);const _=(0,e(7745).Z)([{wrappers:["form-layout"],props:{submitLabel:"Submit Assertion",showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{title:"New Assertion"},fieldGroup:[{key:"molecularProfileId",type:"molecular-profile-select",props:{required:!0,tooltip:"A single variant (Simple Molecular Profile) or a combination of variants (Complex Molecular Profile) relevant to the curated assertion.",watchVariantMolecularProfileId:!0,colSpan:16}},{key:"assertionType",type:"type-select",props:{required:!0,colSpan:8}},{key:"assertionDirection",type:"direction-select",props:{required:!0,colSpan:8}},{key:"significance",type:"significance-select",props:{required:!0,colSpan:8}},{key:"diseaseId",type:"disease-select",props:{colSpan:8}},{key:"therapyIds",type:"therapy-multi-select",props:{}},{key:"therapyInteractionType",type:"interaction-select",props:{}},{key:"variantOrigin",type:"origin-select",props:{required:!0}},{key:"phenotypeIds",type:"phenotype-multi-select",props:{}},{key:"ampLevel",type:"amp-category-select",props:{colSpan:8}},{key:"acmgCodeIds",type:"acmg-code-multi-select",props:{colSpan:8}},{key:"clingenCodeIds",type:"clingen-code-multi-select",props:{colSpan:8}},{key:"nccnGuidelineId",type:"nccn-guideline-select",props:{}},{key:"nccnGuidelineVersion",type:"nccn-guideline-version-input",props:{}},{key:"fdaRegulatoryApproval",type:"fda-regulatory-approval-checkbox",props:{}},{key:"fdaCompanionTest",type:"fda-companion-test-checkbox",props:{}},{key:"evidenceItemIds",type:"evidence-multi-select",props:{required:!0,isMultiSelect:!0,colSpan:24}},{key:"summary",type:"textarea",wrappers:["form-field"],props:{tooltip:"A short, one sentence summary of the Assertion",placeholder:"Enter an Assertion Summary",label:"Assertion Summary",required:!0,colSpan:24}},{key:"description",type:"textarea",wrappers:["form-field"],props:{tooltip:"A complete, original description of this Assertion. Limited to one paragraph.",placeholder:"Enter an Assertion Statement",label:"Assertion Statement",required:!0,rows:5,colSpan:24}}]},{wrappers:["form-footer"],fieldGroup:[{key:"comment",type:"textarea",props:{label:"Comment"}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Assertion"}}]}]}],I.J);var O,c=e(5879),i=e(313),o=e(7473),l=e(3599),S=e(4190),R=e(5545),F=e(4634);const L=function(M){return["/assertions",M,"summary"]};function T(M,h){if(1&M&&(c._uU(0," View your submitted Assertion "),c.TgZ(1,"a",4),c._uU(2,"here"),c.qZA(),c._uU(3,". You will be redirected shortly. ")),2&M){const f=c.oxw();c.xp6(1),c.Q6J("routerLink",c.VKq(1,L,f.newAssertionId))}}let P=((O=class{constructor(h,f){this.submitAssertionGQL=h,this.networkErrorService=f,this.form=new u.nJ({}),this.model=I.J,this.fields=_,this.state=new m._,this.options={formState:this.state},this.submitAssertionMutator=new E.U(f)}onSubmit(h){let f=(0,v.XU)(h);f&&(this.mutationState=this.submitAssertionMutator.mutate(this.submitAssertionGQL,{input:f},void 0,d=>{this.newAssertionId=d.submitAssertion?.assertion.id,this.newAssertionUrl=`/assertions/${this.newAssertionId}/summary`}))}ngAfterViewInit(){this.state.formReady$.next(!0)}ngOnDestroy(){this.options.formState.onDestroy()}}).\u0275fac=function(h){return new(h||O)(c.Y36(i.LLl),c.Y36(o.Y))},O.\u0275cmp=c.Xpm({type:O,selectors:[["cvc-assertion-submit-form"]],decls:5,vars:8,consts:[["entityType","Assertion",3,"mutationState","redirectUrl","successMessage"],["success",""],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[3,"form","fields","model","options","modelChange"],[3,"routerLink"]],template:function(h,f){if(1&h&&(c.TgZ(0,"cvc-form-submission-status-display",0),c.YNc(1,T,4,3,"ng-template",null,1,c.W1O),c.TgZ(3,"form",2),c.NdJ("ngSubmit",function(){return f.onSubmit(f.model)}),c.TgZ(4,"formly-form",3),c.NdJ("modelChange",function(s){return f.model=s}),c.qZA()()()),2&h){const d=c.MAs(2);c.Q6J("mutationState",f.mutationState)("redirectUrl",f.newAssertionUrl)("successMessage",d),c.xp6(3),c.Q6J("formGroup",f.form),c.xp6(1),c.Q6J("form",f.form)("fields",f.fields)("model",f.model)("options",f.options)}},dependencies:[l.Lr,S.rH,u._Y,u.JL,u.sg,R.T7,F.F],encapsulation:2,changeDetection:0}),O);P=(0,p.gn)([(0,y.c)()],P)},4975:(A,C,e)=>{e.d(C,{E:()=>n});var p=e(6814),u=e(3599),E=e(2840),I=e(6683),m=e(279),v=e(5106),y=e(4190),g=e(5879);let n=(()=>{class _{}return _.\u0275fac=function(i){return new(i||_)},_.\u0275mod=g.oAB({type:_}),_.\u0275inj=g.cJS({imports:[p.ez,u.U5,E.sL,y.Bz,I.S,v.g,m.s]}),_})()},7471:(A,C,e)=>{e.d(C,{A:()=>g});var p=e(6814),u=e(3599),E=e(2840),I=e(6683),m=e(279),v=e(5106),y=e(5879);let g=(()=>{class n{}return n.\u0275fac=function(c){return new(c||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[p.ez,u.U5,E.sL,I.S,v.g,m.s]}),n})()},9958:(A,C,e)=>{e.d(C,{r:()=>h});var p=e(655),u=e(6223),E=e(2024),I=e(3684),m=e(1565),v=e(1791);const c=(0,e(7745).Z)([{wrappers:["form-layout"],props:{submitLabel:"Revise Evidence Item",showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{title:"Revise Evidence Item"},fieldGroup:[{key:"molecularProfileId",type:"molecular-profile-select",props:{required:!0}},{key:"sourceId",type:"source-select",props:{required:!0}},{key:"evidenceType",type:"type-select",props:{required:!0}},{key:"evidenceDirection",type:"direction-select",props:{required:!0,formMode:"revise"}},{key:"significance",type:"significance-select",props:{required:!0,formMode:"revise"}},{key:"diseaseId",type:"disease-select",props:{}},{key:"therapyIds",type:"therapy-multi-select",props:{}},{key:"therapyInteractionType",type:"interaction-select",props:{}},{key:"evidenceLevel",type:"level-select",props:{required:!0}},{key:"rating",type:"rating",props:{required:!0}},{key:"variantOrigin",type:"origin-select",props:{required:!0}},{key:"phenotypeIds",type:"phenotype-multi-select",props:{}},{key:"description",type:"textarea",wrappers:["form-field"],props:{tooltip:"Your original description of evidence from published literature detailing the association or lack of association between a variant and its predictive, prognostic, diagnostic, predisposing, functional or oncogenic value. ",placeholder:"Enter an Evidence Statement",extraType:"description",description:'Data constituting personal or identifying information should not be entered (e.g. <a href="https://www.hipaajournal.com/what-is-protected-health-information/" target="_blank">protected health information (PHI) as defined by HIPAA</a> in the U.S. and/or comparable laws in your jurisdiction).',label:"Evidence Statement",required:!0,colSpan:24}}]},{wrappers:["form-footer"],fieldGroup:[{key:"comment",type:"textarea",props:{label:"Comment",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Evidence Item Revisions"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{geneId:void 0,variantId:void 0,significance:void 0,description:void 0,diseaseId:void 0,drugIds:[],therapyInteractionType:void 0,evidenceDirection:void 0,evidenceLevel:void 0,evidenceType:void 0,molecularProfileId:void 0,phenotypeIds:[],rating:void 0,sourceId:void 0,variantOrigin:void 0},comment:void 0,organizationId:void 0});var L,i=e(5879),o=e(313),l=e(7473),S=e(6814),R=e(3599),F=e(5545),O=e(4634);function T(f,d){if(1&f&&(i._uU(0," Revision(s) submitted! You will be redirected to the Revisions page or you can view them "),i.TgZ(1,"a",4),i._uU(2,"here."),i.qZA()),2&f){const s=i.oxw();i.xp6(1),i.s9C("href",s.url,i.LSH)}}function P(f,d){if(1&f){const s=i.EpF();i.TgZ(0,"form",5),i.NdJ("ngSubmit",function(){i.CHM(s);const r=i.oxw();return i.KtG(r.onSubmit(r.model))}),i.TgZ(1,"formly-form",6),i.NdJ("modelChange",function(r){i.CHM(s);const a=i.oxw();return i.KtG(a.model=r)}),i.qZA()()}if(2&f){const s=i.oxw();i.Q6J("formGroup",s.form),i.xp6(1),i.Q6J("form",s.form)("fields",s.fields)("model",s.model)("options",s.options)}}function M(f,d){1&f&&i._uU(0," Loading Evidence Item... ")}let h=((L=class{constructor(d,s,t,r){this.revisableFieldsGQL=d,this.submitRevisionsGQL=s,this.networkErrorService=t,this.cdr=r,this.form=new u.nJ({}),this.fields=c,this.state=new I._,this.options={formState:this.state},this.reviseEvidenceMutator=new E.U(t)}ngOnInit(){this.url=`/evidence/${this.evidenceId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({evidenceId:this.evidenceId}).pipe((0,v.t)(this)).subscribe({next:({data:{evidenceItem:d}})=>{d&&(this.model={id:d.id,fields:(0,m.ux)(d)},this.cdr.detectChanges())},error:d=>{console.error("Error retrieving evidenceItem."),console.error(d)},complete:()=>{this.state.formReady$.next(!0),console.log("evidence item retrieved.")}})}onSubmit(d){if(!this.evidenceId)return;let s=(0,m.Ct)(this.evidenceId,d);s&&(this.mutationState=this.reviseEvidenceMutator.mutate(this.submitRevisionsGQL,{input:s}))}ngOnDestroy(){this.options.formState.onDestroy()}}).\u0275fac=function(d){return new(d||L)(i.Y36(o.h_Y),i.Y36(o.F1Y),i.Y36(l.Y),i.Y36(i.sBO))},L.\u0275cmp=i.Xpm({type:L,selectors:[["cvc-evidence-revise-form"]],inputs:{evidenceId:"evidenceId"},decls:6,vars:5,consts:[["entityType","Evidence Item",3,"mutationState","successMessage","redirectUrl"],["success",""],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["loadingModel",""],[3,"href"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[3,"form","fields","model","options","modelChange"]],template:function(d,s){if(1&d&&(i.TgZ(0,"cvc-form-submission-status-display",0),i.YNc(1,T,3,1,"ng-template",null,1,i.W1O),i.YNc(3,P,2,5,"form",2),i.YNc(4,M,1,0,"ng-template",null,3,i.W1O),i.qZA()),2&d){const t=i.MAs(2),r=i.MAs(5);i.Q6J("mutationState",s.mutationState)("successMessage",t)("redirectUrl",s.url),i.xp6(3),i.Q6J("ngIf",s.model)("ngIfElse",r)}},dependencies:[S.O5,R.Lr,u._Y,u.JL,u.sg,F.T7,O.F],encapsulation:2,changeDetection:0}),L);h=(0,p.gn)([(0,v.c)()],h)},296:(A,C,e)=>{e.d(C,{C:()=>g});var p=e(6814),u=e(3599),E=e(2840),I=e(6683),m=e(279),v=e(5106),y=e(5879);let g=(()=>{class n{}return n.\u0275fac=function(c){return new(c||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[p.ez,u.U5,E.sL,I.S,v.g,m.s]}),n})()},1858:(A,C,e)=>{e.d(C,{$:()=>d});var p=e(655),u=e(6223),E=e(1791),I=e(2024),m=e(2701);const i=(0,e(7745).Z)([{wrappers:["form-layout"],props:{submitLabel:"Revise Gene",showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{title:"Revise Evidence Item"},fieldGroup:[{key:"description",type:"textarea",wrappers:["form-field"],props:{tooltip:"User-defined summary of the clinical relevance of this Gene.",placeholder:"Enter a Gene Summary",label:"Gene Summary",required:!1,rows:5}},{key:"sourceIds",type:"source-multi-select",wrappers:["form-field"],props:{}}]},{wrappers:["form-footer"],fieldGroup:[{key:"comment",type:"textarea",props:{label:"Comment",placeholder:"Please enter a comment describing your revisions.",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Gene Revisions"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{description:void 0,sourceIds:void 0},comment:void 0,organizationId:void 0});var T,o=e(5879),l=e(313),S=e(7473),R=e(6814),F=e(3599),O=e(5545),L=e(4634);function P(s,t){if(1&s&&(o._uU(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),o.TgZ(1,"a",4),o._uU(2,"here."),o.qZA()),2&s){const r=o.oxw();o.xp6(1),o.s9C("href",r.url,o.LSH)}}const M=function(){return{}};function h(s,t){if(1&s){const r=o.EpF();o.TgZ(0,"form",5),o.NdJ("ngSubmit",function(){o.CHM(r);const D=o.oxw();return o.KtG(D.onSubmit(D.model))}),o.TgZ(1,"formly-form",6),o.NdJ("modelChange",function(D){o.CHM(r);const b=o.oxw();return o.KtG(b.model=D)}),o.qZA()()}if(2&s){const r=o.oxw();o.Q6J("formGroup",r.form),o.xp6(1),o.Q6J("form",r.form)("fields",r.fields)("model",r.model)("options",o.DdM(5,M))}}function f(s,t){1&s&&o._uU(0," Loading Gene... ")}let d=((T=class{constructor(t,r,a,D){this.revisableFieldsGQL=t,this.submitRevisionsGQL=r,this.networkErrorService=a,this.cdr=D,this.form=new u.nJ({}),this.fields=i,this.reviseEvidenceMutator=new I.U(a)}ngOnInit(){this.url=`/genes/${this.geneId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({geneId:this.geneId}).pipe((0,E.t)(this)).subscribe({next:({data:{gene:t}})=>{var s;t&&(this.model={id:t.id,fields:(s=t,{description:s.description,sourceIds:s.sources.map(t=>t.id)})},this.cdr.detectChanges())},error:t=>{console.error("Error retrieving Gene."),console.error(t)},complete:()=>{}})}onSubmit(t){if(!this.geneId)return;let r=function y(s,t){const r=t.fields;if(t.comment)return{id:s,fields:{description:m.xt(r.description),sourceIds:r.sourceIds||[]},organizationId:t.organizationId,comment:t.comment}}(this.geneId,t);r&&(this.mutationState=this.reviseEvidenceMutator.mutate(this.submitRevisionsGQL,{input:r}))}}).\u0275fac=function(t){return new(t||T)(o.Y36(l.FOU),o.Y36(l.D9L),o.Y36(S.Y),o.Y36(o.sBO))},T.\u0275cmp=o.Xpm({type:T,selectors:[["cvc-gene-revise-form"]],inputs:{geneId:"geneId"},decls:6,vars:5,consts:[["entityType","Gene",3,"redirectUrl","mutationState","successMessage"],["success",""],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["loadingModel",""],[3,"href"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[3,"form","fields","model","options","modelChange"]],template:function(t,r){if(1&t&&(o.TgZ(0,"cvc-form-submission-status-display",0),o.YNc(1,P,3,1,"ng-template",null,1,o.W1O),o.YNc(3,h,2,6,"form",2),o.YNc(4,f,1,0,"ng-template",null,3,o.W1O),o.qZA()),2&t){const a=o.MAs(2),D=o.MAs(5);o.Q6J("redirectUrl",r.url)("mutationState",r.mutationState)("successMessage",a),o.xp6(3),o.Q6J("ngIf",r.model)("ngIfElse",D)}},dependencies:[R.O5,F.Lr,u._Y,u.JL,u.sg,O.T7,L.F],encapsulation:2,changeDetection:0}),T);d=(0,p.gn)([(0,E.c)()],d)},9934:(A,C,e)=>{e.d(C,{i:()=>g});var p=e(6814),u=e(3599),E=e(2840),I=e(6683),m=e(279),v=e(5106),y=e(5879);let g=(()=>{class n{}return n.\u0275fac=function(c){return new(c||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[p.ez,u.U5,E.sL,I.S,v.g,m.s]}),n})()},3610:(A,C,e)=>{e.d(C,{R:()=>f});var p=e(655),u=e(6223),E=e(1791),I=e(2024),m=e(2701);const i=(0,e(7745).Z)([{wrappers:["form-layout"],props:{submitLabel:"Revise Molecular Profile",showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{title:"Revise Evidence Item"},fieldGroup:[{key:"description",type:"textarea",wrappers:["form-field"],props:{placeholder:"Enter a Molecular Profile Description",label:"Molecular Profile Description",description:"Provide a summary of the clinical relevance of this Molecular Profile. The Molecular Profile Summary should be a synthesis of the existing Evidence Statements for this profile. Basic information on recurrence rates and biological/functional impact of the variants may be included, but the focus should be on the clinical impact (i.e. predictive, prognostic, diagnostic, or predisposing relevance).",extraType:"prompt",required:!1,rows:5,colSpan:24}},{key:"aliases",type:"tag-multi-input",wrappers:["form-field"],props:{label:"Aliases",description:"List any aliases commonly used to refer to this Molecular Profile",extraType:"prompt"}},{key:"sourceIds",type:"source-multi-select",wrappers:["form-field"],props:{}}]},{wrappers:["form-footer"],fieldGroup:[{key:"comment",type:"textarea",props:{label:"Comment",placeholder:"Please enter a comment describing your revisions.",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Molecular Profile Revisions"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{description:void 0,sourceIds:void 0,aliases:void 0},comment:void 0,organizationId:void 0});var T,o=e(5879),l=e(313),S=e(7473),R=e(6814),F=e(3599),O=e(5545),L=e(4634);function P(d,s){if(1&d&&(o._uU(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),o.TgZ(1,"a",4),o._uU(2,"here."),o.qZA()),2&d){const t=o.oxw();o.xp6(1),o.s9C("href",t.url,o.LSH)}}function M(d,s){if(1&d){const t=o.EpF();o.TgZ(0,"form",5),o.NdJ("ngSubmit",function(){o.CHM(t);const a=o.oxw();return o.KtG(a.onSubmit(a.model))}),o.TgZ(1,"formly-form",6),o.NdJ("modelChange",function(a){o.CHM(t);const D=o.oxw();return o.KtG(D.model=a)}),o.qZA()()}if(2&d){const t=o.oxw();o.Q6J("formGroup",t.form),o.xp6(1),o.Q6J("form",t.form)("fields",t.fields)("model",t.model)("options",t.options)}}function h(d,s){1&d&&o._uU(0," Loading Molecular Profile... ")}let f=((T=class{constructor(s,t,r,a){this.revisableFieldsGQL=s,this.submitRevisionsGQL=t,this.cdr=r,this.form=new u.nJ({}),this.options={formState:{isSimpleMp:void 0}};const D=i[0]?.fieldGroup?.find(b=>"fields"==b.key)?.fieldGroup?.find(b=>"aliases"==b.key);if(D){const b=D.props?.description;D.expressions={"props.disabled":U=>U.options?.formState.isSimpleMp,"props.description":U=>U.options?.formState.isSimpleMp?"Simple Molecular Profiles inherit their Aliases from the corresponding Variant.":b}}this.fields=i,this.reviseEvidenceMutator=new I.U(a)}ngOnInit(){this.url=`/molecular-profiles/${this.molecularProfileId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({molecularProfileId:this.molecularProfileId}).pipe((0,E.t)(this)).subscribe({next:({data:{molecularProfile:s}})=>{var d;s&&(this.options.formState.isSimpleMp=!s.isComplex,this.model={id:s.id,fields:(d=s,{description:d.description,sourceIds:d.sources.map(s=>s.id),aliases:d.molecularProfileAliases})},this.cdr.detectChanges())},error:s=>{console.error("Error retrieving MolecularProfile."),console.error(s)},complete:()=>{}})}onSubmit(s){if(!this.molecularProfileId)return;let t=function y(d,s){const t=s.fields;if(s.comment)return{id:d,fields:{description:m.xt(t.description),sourceIds:t.sourceIds||[],aliases:t.aliases||[]},organizationId:s.organizationId,comment:s.comment}}(this.molecularProfileId,s);t&&(this.mutationState=this.reviseEvidenceMutator.mutate(this.submitRevisionsGQL,{input:t}))}}).\u0275fac=function(s){return new(s||T)(o.Y36(l.pR8),o.Y36(l.T1I),o.Y36(o.sBO),o.Y36(S.Y))},T.\u0275cmp=o.Xpm({type:T,selectors:[["cvc-mp-revise-form"]],inputs:{molecularProfileId:"molecularProfileId"},decls:6,vars:5,consts:[["entityType","Molecular Profile",3,"redirectUrl","mutationState","successMessage"],["success",""],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["loadingModel",""],[3,"href"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[3,"form","fields","model","options","modelChange"]],template:function(s,t){if(1&s&&(o.TgZ(0,"cvc-form-submission-status-display",0),o.YNc(1,P,3,1,"ng-template",null,1,o.W1O),o.YNc(3,M,2,5,"form",2),o.YNc(4,h,1,0,"ng-template",null,3,o.W1O),o.qZA()),2&s){const r=o.MAs(2),a=o.MAs(5);o.Q6J("redirectUrl",t.url)("mutationState",t.mutationState)("successMessage",r),o.xp6(3),o.Q6J("ngIf",t.model)("ngIfElse",a)}},dependencies:[R.O5,F.Lr,u._Y,u.JL,u.sg,O.T7,L.F],encapsulation:2,changeDetection:0}),T);f=(0,p.gn)([(0,E.c)()],f)},1351:(A,C,e)=>{e.d(C,{K:()=>g});var p=e(6814),u=e(3599),E=e(2840),I=e(6683),m=e(279),v=e(5106),y=e(5879);let g=(()=>{class n{}return n.\u0275fac=function(c){return new(c||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[p.ez,u.U5,E.sL,I.S,v.g,m.s]}),n})()},9230:(A,C,e)=>{e.d(C,{J:()=>s});var p=e(655),u=e(6223),E=e(1791),I=e(2024),m=e(2701);const _=(0,e(7745).Z)([{wrappers:["form-layout"],props:{submitLabel:"Revise Variant",showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{title:"Revise Variant"},fieldGroup:[{key:"geneId",type:"gene-select",props:{description:"Enter an Entrez Gene for this Variant"}},{key:"name",type:"input",wrappers:["form-field"],props:{placeholder:"Enter a name for this Variant",description:"Enter the name of the Variant according to the <a href='https://civic.readthedocs.io/en/latest/model/variants/name.html#curating-variant-names' target='blank'>Variant Curation SOP</a>",extraType:"prompt",label:"Name",required:!0,rows:1}},{key:"aliases",type:"tag-multi-input",wrappers:["form-field"],props:{label:"Aliases",description:"List any aliases commonly used to refer to this Variant",extraType:"prompt",placeholder:"Enter Alias and hit return"}},{key:"hgvsDescriptions",type:"tag-multi-input",wrappers:["form-field"],props:{label:"HGVS Descriptions",description:"HGVS Descriptions",extraType:"prompt",placeholder:"Enter HGVS and hit return"}},{key:"clinvarIds",type:"clinvar-multi-input",wrappers:["form-field"],props:{label:"ClinVar IDs",description:"Specify if Clinvar IDs exist, or if they are not applicable for this variant."}},{key:"variantTypeIds",type:"variant-type-multi-select",wrappers:["form-field"]},{template:"<h4><u>Primary (5') Coordinates</u></h4>",props:{colSpan:24}},{key:"referenceBuild",type:"reference-build-select"},{key:"ensemblVersion",type:"input",wrappers:["form-field"],validators:{nccnVersionNumber:{expression:t=>!t.value||/^\d{2,3}$/.test(t.value),message:(t,r)=>`"${r.formControl?.value}" does not appear to be an Ensembl version number`}},props:{label:"Ensembl Version",description:"Enter a valid Ensembl database version (e.g. 75)"}},{key:"referenceBases",type:"input",wrappers:["form-field"],validators:{nccnVersionNumber:{expression:t=>!t.value||/^[ACTG\\]+$/.test(t.value),message:(t,r)=>`"${r.formControl?.value}" contains invalid characters.`}},props:{label:"Reference Bases",description:"The nucleotide(s) of the reference genome affected by the variant. Only used for SNVs and Indels (otherwise leave blank)"}},{key:"variantBases",type:"input",wrappers:["form-field"],validators:{nccnVersionNumber:{expression:t=>!t.value||/^[ACTG\\]+$/.test(t.value),message:(t,r)=>`"${r.formControl?.value}" contains invalid characters.`}},props:{label:"Variant Bases",description:"The nucleotide(s) of the variant allele. Only used for SNVs and Indels (otherwise leave blank)"}},{key:"chromosome",type:"select",wrappers:["form-field"],props:{label:"Chromosome",options:m.aP,description:"Specify the chromosome in which this variant occurs (e.g. 17)."}},{key:"start",type:"input",wrappers:["form-field"],validators:{isNumeric:{expression:t=>!t.value||/^\d+$/.test(t.value),message:(t,r)=>"Start coordinate must be numeric"}},props:{label:"Start",description:"Enter the left/first coordinate of this variant. Must be \u2264 the Stop coordinate. Coordinate must be compatible with the selected reference build."}},{key:"stop",type:"input",wrappers:["form-field"],validators:{isNumeric:{expression:t=>!t.value||/^\d+$/.test(t.value),message:(t,r)=>"Stop coordinate must be numeric"}},props:{label:"Stop",description:"Provide the right/second coordinate of this variant. Must be \u2265 the Start coordinate. Coordinate must be compatible with the selected reference build."}},{key:"representativeTranscript",type:"input",wrappers:["form-field"],props:{label:"Representative Transcript",description:"Specify a transcript ID, including version number (e.g. ENST00000348159.4, the canonical transcript defined by Ensembl)."}},{template:"<h4><u>Secondary (3') Coordinates</u></h4>",props:{colSpan:24}},{key:"chromosome2",type:"select",wrappers:["form-field"],props:{label:"Chromosome",options:m.aP,description:"If this variant is a fusion (e.g. BCR-ABL1), specify the chromosome name, coordinates, and representative transcript for the 3-prime partner."}},{key:"start2",type:"input",wrappers:["form-field"],validators:{isNumeric:{expression:t=>!t.value||/^\d+$/.test(t.value),message:(t,r)=>"Start coordinate must be numeric"}},props:{label:"Start",description:"Enter the left/first coordinate of this 3-prime partner fusion variant. Must be \u2264 the Stop coordinate. Coordinate must be compatible with the selected reference build."}},{key:"stop2",type:"input",wrappers:["form-field"],validators:{isNumeric:{expression:t=>!t.value||/^\d+$/.test(t.value),message:(t,r)=>"Stop coordinate must be numeric"}},props:{label:"Stop",description:"Provide the right/second coordinate of this 3-prime partner fusion variant. Must be \u2265 the Start coordinate. Coordinate must be compatible with the selected reference build."}},{key:"representativeTranscript2",type:"input",wrappers:["form-field"],props:{label:"Representative Transcript",description:"Specify a transcript ID, including version number (e.g. ENST00000348159.4, the canonical transcript defined by Ensembl)."}}]},{wrappers:["form-footer"],fieldGroup:[{key:"comment",type:"textarea",props:{label:"Comment",placeholder:"Please enter a comment describing your revisions.",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Variant Revisions"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{name:void 0,aliases:void 0,hgvsDescriptions:void 0,clinvarIds:void 0,variantTypeIds:void 0,referenceBuild:void 0,ensemblVersion:void 0,chromosome:void 0,start:void 0,stop:void 0,representativeTranscript:void 0,chromosome2:void 0,start2:void 0,stop2:void 0,representativeTranscript2:void 0,geneId:void 0,referenceBases:void 0,variantBases:void 0},comment:void 0,organizationId:void 0});let o=t=>"NONE FOUND"==t[0]?{noneFound:!0}:"NA"==t[0]?{notApplicable:!0}:{ids:t.map(r=>+r)};var P,l=e(5879),S=e(313),R=e(7473),F=e(6814),O=e(3599),L=e(5545),T=e(4634);function M(t,r){if(1&t&&(l._uU(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),l.TgZ(1,"a",4),l._uU(2,"here."),l.qZA()),2&t){const a=l.oxw();l.xp6(1),l.s9C("href",a.url,l.LSH)}}const h=function(){return{}};function f(t,r){if(1&t){const a=l.EpF();l.TgZ(0,"form",5),l.NdJ("ngSubmit",function(){l.CHM(a);const b=l.oxw();return l.KtG(b.onSubmit(b.model))}),l.TgZ(1,"formly-form",6),l.NdJ("modelChange",function(b){l.CHM(a);const U=l.oxw();return l.KtG(U.model=b)}),l.qZA()()}if(2&t){const a=l.oxw();l.Q6J("formGroup",a.form),l.xp6(1),l.Q6J("form",a.form)("fields",a.fields)("model",a.model)("options",l.DdM(5,h))}}function d(t,r){1&t&&l._uU(0," Loading Variant... ")}let s=((P=class{constructor(r,a,D,b){this.revisableFieldsGQL=r,this.submitRevisionsGQL=a,this.networkErrorService=D,this.cdr=b,this.form=new u.nJ({}),this.fields=_,this.reviseVariantMutator=new I.U(D)}ngOnInit(){this.url=`/variants/${this.variantId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({variantId:this.variantId}).pipe((0,E.t)(this)).subscribe({next:({data:{variant:r}})=>{var t;r&&(this.model={id:r.id,fields:(t=r,{name:t.name,aliases:t.variantAliases,hgvsDescriptions:t.hgvsDescriptions,clinvarIds:t.clinvarIds,variantTypeIds:t.variantTypes.map(r=>r.id),referenceBuild:t.referenceBuild,ensemblVersion:t.ensemblVersion,chromosome:t.primaryCoordinates?.chromosome,start:t.primaryCoordinates?.start,stop:t.primaryCoordinates?.stop,representativeTranscript:t.primaryCoordinates?.representativeTranscript,chromosome2:t.secondaryCoordinates?.chromosome,start2:t.secondaryCoordinates?.start,stop2:t.secondaryCoordinates?.stop,representativeTranscript2:t.secondaryCoordinates?.representativeTranscript,geneId:t.gene.id,referenceBases:t.referenceBases,variantBases:t.variantBases})},this.cdr.detectChanges())},error:r=>{console.error("Error retrieving Variant."),console.error(r)},complete:()=>{}})}onSubmit(r){if(!this.variantId)return;let a=function i(t,r){const a=r.fields;if(r.comment&&a.name&&a.geneId)return{id:t,fields:{name:a.name,aliases:a.aliases||[],hgvsDescriptions:a.hgvsDescriptions||[],clinvarIds:o(a.clinvarIds||[]),variantTypeIds:a.variantTypeIds||[],referenceBuild:m.uP(a.referenceBuild),ensemblVersion:m.uP(a.ensemblVersion?+a.ensemblVersion:void 0),primaryCoordinates:{chromosome:a.chromosome,start:a.start?+a.start:void 0,stop:a.stop?+a.stop:void 0,representativeTranscript:a.representativeTranscript},secondaryCoordinates:{chromosome:a.chromosome2,start:a.start2?+a.start2:void 0,stop:a.stop2?+a.stop2:void 0,representativeTranscript:a.representativeTranscript2},geneId:a.geneId,referenceBases:m.xt(a.referenceBases),variantBases:m.xt(a.variantBases)},organizationId:r.organizationId,comment:r.comment}}(this.variantId,r);a&&(this.mutationState=this.reviseVariantMutator.mutate(this.submitRevisionsGQL,{input:a}))}}).\u0275fac=function(r){return new(r||P)(l.Y36(S.nnL),l.Y36(S.Xft),l.Y36(R.Y),l.Y36(l.sBO))},P.\u0275cmp=l.Xpm({type:P,selectors:[["cvc-variant-revise-form"]],inputs:{variantId:"variantId"},decls:6,vars:5,consts:[["entityType","Variant",3,"redirectUrl","mutationState","successMessage"],["success",""],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["loadingModel",""],[3,"href"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[3,"form","fields","model","options","modelChange"]],template:function(r,a){if(1&r&&(l.TgZ(0,"cvc-form-submission-status-display",0),l.YNc(1,M,3,1,"ng-template",null,1,l.W1O),l.YNc(3,f,2,6,"form",2),l.YNc(4,d,1,0,"ng-template",null,3,l.W1O),l.qZA()),2&r){const D=l.MAs(2),b=l.MAs(5);l.Q6J("redirectUrl",a.url)("mutationState",a.mutationState)("successMessage",D),l.xp6(3),l.Q6J("ngIf",a.model)("ngIfElse",b)}},dependencies:[F.O5,O.Lr,u._Y,u.JL,u.sg,L.T7,T.F],encapsulation:2,changeDetection:0}),P);s=(0,p.gn)([(0,E.c)()],s)},4706:(A,C,e)=>{e.d(C,{A:()=>y});var p=e(6814),u=e(3599),E=e(2840),I=e(6683),m=e(5106),v=e(5879);let y=(()=>{class g{}return g.\u0275fac=function(_){return new(_||g)},g.\u0275mod=v.oAB({type:g}),g.\u0275inj=v.cJS({imports:[p.ez,u.U5,E.sL,I.S,m.g]}),g})()},9439:(A,C,e)=>{e.d(C,{L:()=>T});var p=e(655),u=e(6223),E=e(2024),I=e(2784),m=e(1791),v=e(8645);const g=[{wrappers:["form-layout"],props:{submitLabel:"Revise Variant Group",showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{title:"Revise Variant Group"},fieldGroup:[{key:"name",type:"input",props:{label:"Variant Group Name",required:!0,colSpan:24}},{key:"description",type:"textarea",wrappers:["form-field"],props:{tooltip:"User-defined summary of the clinical relevance of this Variant Group.",placeholder:"Enter a Variant Group Summary",label:"Variant Group Summary",required:!0,rows:5}},{key:"sourceIds",type:"source-multi-select",wrappers:["form-field"],props:{required:!1}},{key:"variantIds",type:"variant-multi-select",props:{label:"Variants",required:!0,colSpan:24,requireGene:!1,showManagerBtn:!0}}]},{wrappers:["form-footer"],fieldGroup:[{key:"comment",type:"textarea",props:{label:"Comment",required:!0}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Variant Group Revision"}}]}]}];var R,n=e(5879),_=e(313),c=e(7473),i=e(6814),o=e(3599),l=e(5545),S=e(4634);function F(P,M){if(1&P&&(n._uU(0," Revision(s) submitted! You will be redirected to the Revisions page or you may view them "),n.TgZ(1,"a",4),n._uU(2,"here."),n.qZA()),2&P){const h=n.oxw();n.xp6(1),n.s9C("href",h.url,n.LSH)}}function O(P,M){if(1&P){const h=n.EpF();n.TgZ(0,"form",5),n.NdJ("ngSubmit",function(){n.CHM(h);const d=n.oxw();return n.KtG(d.onSubmit(d.model))}),n.TgZ(1,"formly-form",6),n.NdJ("modelChange",function(d){n.CHM(h);const s=n.oxw();return n.KtG(s.model=d)}),n.qZA()()}if(2&P){const h=n.oxw();n.Q6J("formGroup",h.form),n.xp6(1),n.Q6J("form",h.form)("fields",h.fields)("model",h.model)("options",h.options)}}function L(P,M){1&P&&n._uU(0," Loading Variant Group... ")}let T=((R=class{constructor(M,h,f,d){this.revisableFieldsGQL=M,this.submitRevisionsGQL=h,this.networkErrorService=f,this.cdr=d,this.form=new u.nJ({}),this.fields=g,this.state={formReady$:new v.x},this.options={formState:this.state},this.reviseAssertionMutator=new E.U(f)}onSubmit(M){console.log("------ Variant Group Suggestion Added ------"),console.log(M)}ngOnInit(){this.url=`/variant-groups/${this.variantGroupId}/revisions`}ngOnDestroy(){}ngAfterViewInit(){this.revisableFieldsGQL.fetch({variantGroupId:this.variantGroupId}).pipe((0,m.t)(this)).subscribe({next:({data:{variantGroup:M}})=>{M&&(this.model={id:M.id,fields:(0,I.ND)(M)},this.cdr.detectChanges())},error:M=>{console.error("Error retrieving variantgroupItem."),console.error(M)},complete:()=>{this.state.formReady$.next(!0)}})}}).\u0275fac=function(M){return new(M||R)(n.Y36(_.Y6e),n.Y36(_.eJ3),n.Y36(c.Y),n.Y36(n.sBO))},R.\u0275cmp=n.Xpm({type:R,selectors:[["cvc-variantgroup-revise-form"]],inputs:{variantGroupId:"variantGroupId"},decls:6,vars:5,consts:[["entityType","Evidence Item",3,"mutationState","redirectUrl","successMessage"],["success",""],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["loadingModel",""],[3,"href"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[3,"form","fields","model","options","modelChange"]],template:function(M,h){if(1&M&&(n.TgZ(0,"cvc-form-submission-status-display",0),n.YNc(1,F,3,1,"ng-template",null,1,n.W1O),n.YNc(3,O,2,5,"form",2),n.YNc(4,L,1,0,"ng-template",null,3,n.W1O),n.qZA()),2&M){const f=n.MAs(2),d=n.MAs(5);n.Q6J("mutationState",h.mutationState)("redirectUrl",h.url)("successMessage",f),n.xp6(3),n.Q6J("ngIf",h.model)("ngIfElse",d)}},dependencies:[i.O5,o.Lr,u._Y,u.JL,u.sg,l.T7,S.F]}),R);T=(0,p.gn)([(0,m.c)()],T)},2784:(A,C,e)=>{function u(m){return{description:m.description,sourceIds:m.sources.map(v=>v.id),variantIds:m.variants.nodes.map(v=>v.id),name:m.name}}function I(m){const v=m.fields;if(![v.name,m.comment].find(g=>void 0===g))return{description:v.description,sourceIds:v.sourceIds||[],name:v.name,variantIds:v.variantIds||[],organizationId:m.organizationId}}e.d(C,{ND:()=>u,t3:()=>I}),e(2701)}}]);