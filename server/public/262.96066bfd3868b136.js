"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[262],{9365:(Z,k,e)=>{e.d(k,{T:()=>A});var n=e(73664),f=e(48728),v=e(72200),t=e(25703),m=e(12617),E=e(41951),G=e(50513),R=e(16389),M=e(25930);const I=["itemTemplate"],N=C=>({$implicit:C});function b(C,x){if(1&C){const u=n.RV6();n.j41(0,"nz-list-item",5),n.bIt("click",function(){f.eBV(u);const y=n.XpG().$implicit,W=n.XpG(2);return f.Njj(W.onParticipantSelected(y))}),n.eu8(1,6),n.k0s()}if(2&C){const u=n.XpG().$implicit,h=n.XpG(2);n.AVh("selected-participant",u.id==(null==h.selectedItem?null:h.selectedItem.id)),n.R7$(),n.Y8G("ngTemplateOutlet",h.itemTemplateRef||null)("ngTemplateOutletContext",n.eq3(4,N,u))}}function $(C,x){if(1&C&&(n.qex(0),n.DNE(1,b,2,6,"nz-list-item",4),n.bVm()),2&C){const u=x.index,h=n.XpG(2);n.R7$(),n.Y8G("ngIf",u+1<=h.defaultListSize)}}function U(C,x){if(1&C){const u=n.RV6();n.j41(0,"button",7),n.bIt("click",function(){f.eBV(u);const y=n.XpG(2);return f.Njj(y.onExpandClicked())}),n.nrm(1,"i",8),n.EFF(2," Expand "),n.k0s()}}function K(C,x){if(1&C){const u=n.RV6();n.j41(0,"button",7),n.bIt("click",function(){f.eBV(u);const y=n.XpG(2);return f.Njj(y.onCollapseClicked())}),n.nrm(1,"i",9),n.EFF(2," Collapse "),n.k0s()}}function V(C,x){if(1&C&&(n.qex(0),n.j41(1,"nz-card",1)(2,"nz-list"),n.DNE(3,$,2,1,"ng-container",2),n.k0s(),n.DNE(4,U,3,0,"button",3)(5,K,3,0,"button",3),n.k0s(),n.bVm()),2&C){const u=n.XpG();n.R7$(),n.Y8G("nzTitle",u.listTitle),n.R7$(2),n.Y8G("ngForOf",u.participantList),n.R7$(),n.Y8G("ngIf",u.participantList.length>u.defaultListSize),n.R7$(),n.Y8G("ngIf",u.isExpanded)}}let A=(()=>{class C{constructor(){this.defaultListSize=5,this.participantSelectedEvent=new n.bkB,this.isExpanded=!1}ngOnInit(){this.preselectedOption&&(this.selectedItem=this.preselectedOption)}onParticipantSelected(u){this.selectedItem=u.id==this.selectedItem?.id?void 0:u,this.participantSelectedEvent.emit(this.selectedItem)}onExpandClicked(){this.originalDefaultListSize=this.defaultListSize,this.defaultListSize=this.participantList.length,this.isExpanded=!0}onCollapseClicked(){this.originalDefaultListSize&&(this.defaultListSize=this.originalDefaultListSize,this.isExpanded=!1)}static#t=this.\u0275fac=function(h){return new(h||C)};static#n=this.\u0275cmp=n.VBU({type:C,selectors:[["cvc-participant-list"]],contentQueries:function(h,y,W){if(1&h&&n.wni(W,I,5),2&h){let X;n.mGM(X=n.lsd())&&(y.itemTemplateRef=X.first)}},inputs:{participantList:"participantList",listTitle:"listTitle",defaultListSize:"defaultListSize",preselectedOption:"preselectedOption"},outputs:{participantSelectedEvent:"participantSelectedEvent"},standalone:!1,decls:1,vars:1,consts:[[4,"ngIf"],["nz-type","inner",2,"margin-bottom","1em",3,"nzTitle"],[4,"ngFor","ngForOf"],["nz-button","","nzType","default","nzSize","small",3,"click",4,"ngIf"],["nzSize","small","class","participant-list-item",3,"selected-participant","click",4,"ngIf"],["nzSize","small",1,"participant-list-item",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-button","","nzType","default","nzSize","small",3,"click"],["nz-icon","","nzType","vertical-align-bottom"],["nz-icon","","nzType","vertical-align-top"]],template:function(h,y){1&h&&n.DNE(0,V,6,4,"ng-container",0),2&h&&n.Y8G("ngIf",y.participantList&&y.participantList.length>0)},dependencies:[v.Sq,v.bT,v.T3,t.cK,m.eE,m.lQ,E.Dn,G.a,R.c,M.p],styles:[".participant-list-item[_ngcontent-%COMP%]:hover{border:1px solid #40a9ff;cursor:pointer}.participant-list-item[_ngcontent-%COMP%]{padding:2px;margin:2px}.selected-participant[_ngcontent-%COMP%]{background:#40a9ff;color:#fff}"]})}return C})()},14873:(Z,k,e)=>{e.d(k,{A:()=>L});var n=e(72200),f=e(97529),v=e(25703),t=e(12617),m=e(29438),E=e(97685),G=e(61912),R=e(72968),M=e(86864),I=e(77169),N=e(64917),b=e(7391),$=e(41951),U=e(35154),K=e(72874),V=e(73664),A=e(48728);let C=(()=>{class B{static#t=this.\u0275fac=function(j){return new(j||B)};static#n=this.\u0275mod=V.$C({type:B});static#e=this.\u0275inj=A.G2t({imports:[n.MD,M.sC,m.Yb,b.kT,$.Y3,U.Qt,K.g9,I.W,N.i]})}return B})();var x=e(84341),u=e(56506),h=e(38927),y=e(34308),W=e(23842),X=e(68492),Y=e(25128),r=e(23617),z=e(50513),d=e(3069),c=e(1177),s=e(37131);let g=(()=>{class B{static#t=this.\u0275fac=function(j){return new(j||B)};static#n=this.\u0275mod=V.$C({type:B});static#e=this.\u0275inj=A.G2t({imports:[n.MD,x.X1,z.Z,v.Ti,s.hM,h.PQ,c.V,d.$f,r.$,U.Qt,x.YN,u.qy,X.M,W.k,I.W,Y.K,y.I]})}return B})(),L=(()=>{class B{static#t=this.\u0275fac=function(j){return new(j||B)};static#n=this.\u0275mod=V.$C({type:B});static#e=this.\u0275inj=A.G2t({imports:[n.MD,z.Z,f.f3,v.Ti,t.rD,$.Y3,N.i,m.Yb,E.pc,G.i3,g,R.K,C]})}return B})()},20664:(Z,k,e)=>{e.d(k,{D:()=>At});var n=e(69145),f=e(96354),v=e(24608),t=e(73664),m=e(48728),E=e(72200),G=e(50513),R=e(16389),M=e(97529),I=e(25703),N=e(12617),b=e(41951),$=e(29438),U=e(97685),K=e(31635),V=e(71226),A=e(49894),C=e(41305),x=e(74222),u=e(84341),h=e(25930),y=e(38927),W=e(1177),X=e(23617),Y=e(35154),r=e(19449),z=e(41939),d=e(65566);function c(i,l){if(1&i){const o=t.RV6();t.j41(0,"nz-alert",6),t.bIt("nzOnClose",function(){m.eBV(o);const _=t.XpG();return m.Njj(_.onSuccessBannerClose())}),t.k0s()}}function s(i,l){if(1&i&&(t.j41(0,"nz-form-item"),t.nrm(1,"cvc-form-errors-alert",7),t.k0s()),2&i){const o=t.XpG();t.R7$(),t.Y8G("errors",o.errorMessages)}}let g=class nt{constructor(l,o,a){this.viewerService=l,this.addCommentGql=o,this.networkErrorService=a,this.commentAddedEvent=new t.bkB,this.success=!1,this.errorMessages=[],this.loading=!1,this.viewerService.viewer$.pipe((0,A.s)(this)).subscribe(_=>{this.mostRecentOrg=_.mostRecentOrg}),this.addCommentMutator=new V.E(this.networkErrorService)}submitComment(){if(this.commentText){this.errorMessages=[];let o=this.addCommentMutator.mutate(this.addCommentGql,{input:{body:this.commentText,subject:this.subject,organizationId:void 0===this.mostRecentOrg?void 0:this.mostRecentOrg.id}});o.submitSuccess$.pipe((0,A.s)(this)).subscribe(a=>{a&&(this.resetForm(),this.success=!0)}),o.submitError$.pipe((0,A.s)(this)).subscribe(a=>{a&&(this.errorMessages=a,this.success=!1)}),o.isSubmitting$.pipe((0,A.s)(this)).subscribe(a=>{this.loading=a})}}resetForm(){this.commentText="",this.commentAddedEvent.emit()}onSuccessBannerClose(){this.resetForm()}static#t=this.\u0275fac=function(o){return new(o||nt)(t.rXU(C.q),t.rXU(n.hj),t.rXU(x.N))};static#n=this.\u0275cmp=t.VBU({type:nt,selectors:[["cvc-comment-add-form"]],inputs:{subject:"subject"},outputs:{commentAddedEvent:"commentAddedEvent"},standalone:!1,decls:11,vars:7,consts:[["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[4,"ngIf"],[3,"commentChange","comment"],["nzTip","Submitting",3,"nzSpinning"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small","nz-tooltip","",3,"disabled","nzTooltipTrigger","nzTooltipTitle"],["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose"],[3,"errors"]],template:function(o,a){1&o&&(t.j41(0,"nz-card"),t.DNE(1,c,1,0,"nz-alert",0),t.j41(2,"form",1),t.bIt("ngSubmit",function(){return a.submitComment()}),t.DNE(3,s,2,1,"nz-form-item",2),t.j41(4,"cvc-comment-input-form",3),t.mxI("commentChange",function(O){return t.DH7(a.commentText,O)||(a.commentText=O),O}),t.k0s(),t.j41(5,"nz-spin",4)(6,"nz-form-item")(7,"nz-form-control")(8,"cvc-form-buttons")(9,"button",5),t.EFF(10," Add Comment "),t.k0s()()()()()()()),2&o&&(t.R7$(),t.Y8G("ngIf",a.success),t.R7$(2),t.Y8G("ngIf",a.errorMessages.length>0),t.R7$(),t.R50("comment",a.commentText),t.R7$(),t.Y8G("nzSpinning",a.loading),t.R7$(4),t.Y8G("disabled",a.loading||!(void 0!==a.commentText&&a.commentText.length>=10))("nzTooltipTrigger",a.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==a.mostRecentOrg?null:a.mostRecentOrg.name)))},dependencies:[E.bT,u.qT,u.cb,G.a,R.c,h.p,I.cK,M.Uq,M.e,y.CA,y.Ls,y.zS,W.a,X.Y,Y.LH,u.cV,r.j,z.l,d.K],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2})};g=(0,K.Cg)([(0,A.d)()],g);var L=e(9365),B=e(17705),w=e(86864),T=e(7391),j=e(72874),D=e(61774),p=e(4126),P=e(8139);function F(i,l){if(1&i&&t.nrm(0,"nz-avatar",5),2&i){const o=t.XpG().ngrxLet;t.Y8G("nzSrc",o.commenter.profileImagePath)}}function H(i,l){1&i&&t.nrm(0,"nz-avatar",6)}function q(i,l){if(1&i){const o=t.RV6();t.j41(0,"nz-comment-action")(1,"span",7),t.bIt("nzOnConfirm",function(){m.eBV(o);const _=t.XpG().ngrxLet,O=t.XpG(),ot=t.r8f(0);return m.Njj(O.deleteComment(_.id,null==ot.mostRecentOrg?null:ot.mostRecentOrg.id))}),t.k0s()()}}function Q(i,l){1&i&&(t.j41(0,"span",4)(1,"i"),t.EFF(2," This comment has been deleted. "),t.k0s()())}function S(i,l){1&i&&(t.j41(0,"span",4)(1,"i"),t.EFF(2,"No Comment Provided"),t.k0s()())}function J(i,l){if(1&i&&t.nrm(0,"cvc-comment-body",8),2&i){const o=t.XpG(2).ngrxLet;t.Y8G("commentBodySegments",o.parsedComment)}}function it(i,l){if(1&i&&t.nVh(0,S,3,0,"span",4)(1,J,1,1,"cvc-comment-body",8),2&i){const o=t.XpG().ngrxLet;t.vxM(0==o.parsedComment.length?0:1)}}function at(i,l){if(1&i&&(t.j41(0,"nz-comment",2),t.nI1(1,"timeAgo"),t.DNE(2,F,1,1,"nz-avatar",3)(3,H,1,0,"ng-template",null,0,t.C5r),t.nVh(5,q,2,0,"nz-comment-action"),t.j41(6,"nz-comment-content"),t.nVh(7,Q,3,0,"span",4)(8,it,2,1),t.k0s()()),2&i){const o=l.ngrxLet,a=t.sdS(4),_=t.XpG(),O=t.r8f(0);t.Y8G("nzAuthor",o.commenter.displayName)("nzDatetime",t.bMT(1,6,o.createdAt)),t.R7$(2),t.Y8G("ngIf",o.commenter.profileImagePath)("ngIfElse",a),t.R7$(3),t.vxM(O&&O.signedIn&&(null==O.user?null:O.user.id)==o.commenter.id&&o.id&&!o.deleted&&_.canDelete()?5:-1),t.R7$(2),t.vxM(o.deleted?7:8)}}let ct=(()=>{class i{constructor(o,a,_){this.viewerService=o,this.networkErrorService=a,this.deleteCommentGql=_,this.comment=B.hFB.required(),this.canDelete=(0,B.hFB)(!0),this.viewer$=this.viewerService.viewer$}ngOnInit(){if(void 0===this.comment)throw new Error("Must pass a comment into comment display component.")}deleteComment(o,a){new V.E(this.networkErrorService).mutate(this.deleteCommentGql,{input:{commentId:o,organizationId:a}})}static#t=this.\u0275fac=function(a){return new(a||i)(t.rXU(C.q),t.rXU(x.N),t.rXU(n.hGs))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["cvc-comment-display"]],inputs:{comment:[1,"comment"],canDelete:[1,"canDelete"]},standalone:!1,decls:3,vars:4,consts:[["noAvatar",""],[3,"nzAuthor","nzDatetime",4,"ngrxLet"],[3,"nzAuthor","nzDatetime"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["nz-typography","","nzType","secondary"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","","nzIcon","civic:curator"],["nz-tooltip","","nz-popconfirm","","nzPopconfirmPlacement","right","nzPopconfirmTitle","Delete This Comment?","nzTooltipTitle","Delete","nz-icon","","nzType","delete",3,"nzOnConfirm"],[3,"commentBodySegments"]],template:function(a,_){1&a&&(t.SS7(0),t.nI1(1,"ngrxPush"),t.DNE(2,at,9,8,"nz-comment",1)),2&a&&(t.bH3(t.bMT(1,1,_.viewer$)),t.R7$(2),t.Y8G("ngrxLet",_.comment()))},dependencies:[E.bT,w.fL,w.sf,w.OW,w.fS,$.PM,T.Di,b.Dn,Y.LH,j.PV,D.Nj,p.p,D.L9,P.N],encapsulation:2})}return i})();var rt=e(14493);const tt=()=>[];function st(i,l){if(1&i&&(t.j41(0,"nz-card",10),t.nrm(1,"cvc-comment-display",11),t.k0s()),2&i){const o=t.XpG(2);t.R7$(),t.Y8G("comment",o.creationComment)("canDelete",!1)}}function mt(i,l){1&i&&(t.qex(0),t.j41(1,"nz-row",6)(2,"nz-col",7)(3,"nz-space",8),t.DNE(4,st,2,2,"nz-card",9),t.k0s()()(),t.bVm()),2&i&&(t.R7$(),t.Y8G("nzGutter",16))}function lt(i,l){if(1&i){const o=t.RV6();t.j41(0,"div",24)(1,"button",25),t.bIt("click",function(){m.eBV(o);const _=t.XpG().ngIf,O=t.XpG(3);return m.Njj(O.onLoadMore(_.startCursor))}),t.EFF(2," Load older comments "),t.k0s()()}}function _t(i,l){if(1&i&&(t.j41(0,"nz-list-header"),t.DNE(1,lt,3,0,"div",23),t.k0s()),2&i){const o=l.ngIf;t.R7$(),t.Y8G("ngIf",o.hasPreviousPage)}}function pt(i,l){if(1&i&&(t.j41(0,"nz-list-item"),t.nrm(1,"cvc-comment-display",26),t.k0s()),2&i){const o=l.$implicit;t.R7$(),t.Y8G("comment",o)}}function dt(i,l){if(1&i&&(t.j41(0,"nz-card",21)(1,"nz-list",22),t.nI1(2,"ngrxPush"),t.nI1(3,"ngrxPush"),t.DNE(4,_t,2,1,"nz-list-header",4),t.nI1(5,"ngrxPush"),t.DNE(6,pt,2,1,"ng-template",null,1,t.C5r),t.k0s()()),2&i){const o=t.sdS(7),a=t.XpG(2);t.R7$(),t.Y8G("nzDataSource",t.bMT(2,4,a.comments$))("nzLoading",t.bMT(3,6,a.loading$))("nzRenderItem",o),t.R7$(3),t.Y8G("ngIf",t.bMT(5,8,a.pageInfo$))}}function ut(i,l){if(1&i){const o=t.RV6();t.j41(0,"cvc-comment-add-form",27),t.bIt("commentAddedEvent",function(){m.eBV(o);const _=t.XpG(2);return m.Njj(_.refreshList())}),t.k0s()}if(2&i){const o=t.XpG(2);t.Y8G("subject",o.commentable)}}function Ct(i,l){if(1&i&&t.nrm(0,"nz-avatar",30),2&i){const o=t.XpG().$implicit;t.Y8G("nzSrc",o.profileImagePath)}}function zt(i,l){if(1&i&&(t.nrm(0,"nz-avatar",31),t.nI1(1,"uppercase")),2&i){const o=t.XpG().$implicit;t.Y8G("nzText",t.bMT(1,1,o.displayName.charAt(0)))}}function ft(i,l){if(1&i&&(t.DNE(0,Ct,1,1,"nz-avatar",29)(1,zt,2,3,"ng-template",null,3,t.C5r),t.j41(3,"span"),t.EFF(4),t.k0s()),2&i){const o=l.$implicit,a=t.sdS(2);t.Y8G("ngIf",o.profileImagePath)("ngIfElse",a),t.R7$(4),t.JRh(o.displayName)}}function gt(i,l){if(1&i){const o=t.RV6();t.j41(0,"cvc-participant-list",28),t.nI1(1,"ngrxPush"),t.bIt("participantSelectedEvent",function(_){m.eBV(o);const O=t.XpG(2);return m.Njj(O.onCommenterSelected(_))}),t.DNE(2,ft,5,3,"ng-template",null,2,t.C5r),t.k0s()}if(2&i){const o=t.XpG(2);t.Y8G("participantList",t.bMT(1,1,o.commenters$)||t.lJ4(3,tt))}}function vt(i,l){if(1&i&&t.nrm(0,"nz-avatar",30),2&i){const o=t.XpG().$implicit;t.Y8G("nzSrc",o.profileImagePath)}}function ht(i,l){if(1&i&&(t.nrm(0,"nz-avatar",31),t.nI1(1,"uppercase")),2&i){const o=t.XpG().$implicit;t.Y8G("nzText",t.bMT(1,1,o.displayName.charAt(0)))}}function Tt(i,l){if(1&i&&(t.DNE(0,vt,1,1,"nz-avatar",29)(1,ht,2,3,"ng-template",null,3,t.C5r),t.j41(3,"span"),t.EFF(4),t.k0s()),2&i){const o=l.$implicit,a=t.sdS(2);t.Y8G("ngIf",o.profileImagePath)("ngIfElse",a),t.R7$(4),t.JRh(o.displayName)}}function Et(i,l){if(1&i){const o=t.RV6();t.j41(0,"cvc-participant-list",32),t.nI1(1,"ngrxPush"),t.bIt("participantSelectedEvent",function(_){m.eBV(o);const O=t.XpG(2);return m.Njj(O.onMentionedUserSelected(_))}),t.DNE(2,Tt,5,3,"ng-template",null,2,t.C5r),t.k0s()}if(2&i){const o=t.XpG(2);t.Y8G("participantList",t.bMT(1,1,o.mentionedUsers$)||t.lJ4(3,tt))}}function Pt(i,l){if(1&i&&(t.nrm(0,"nz-avatar",34),t.j41(1,"span"),t.EFF(2),t.k0s()),2&i){const o=l.$implicit;t.Y8G("nzIcon",t.VkB("civic-",o.tag.displayName)),t.R7$(2),t.SpI("",o.tag.displayName,"s")}}function yt(i,l){if(1&i){const o=t.RV6();t.j41(0,"cvc-participant-list",33),t.nI1(1,"ngrxPush"),t.bIt("participantSelectedEvent",function(_){m.eBV(o);const O=t.XpG(2);return m.Njj(O.onMentionedRoleSelected(_))}),t.DNE(2,Pt,3,3,"ng-template",null,2,t.C5r),t.k0s()}if(2&i){const o=t.XpG(2);t.Y8G("participantList",t.bMT(1,1,o.mentionedRoles$)||t.lJ4(3,tt))}}function Dt(i,l){if(1&i&&(t.nrm(0,"i",36),t.nI1(1,"iconNameForSubscribableEntity"),t.j41(2,"span"),t.EFF(3),t.k0s()),2&i){const o=l.$implicit;t.Y8G("nzType",t.bMT(1,2,o.tag.tagType)),t.R7$(3),t.JRh(o.tag.displayName)}}function Ot(i,l){if(1&i){const o=t.RV6();t.j41(0,"cvc-participant-list",35),t.nI1(1,"ngrxPush"),t.bIt("participantSelectedEvent",function(_){m.eBV(o);const O=t.XpG(2);return m.Njj(O.onMentionedEntitySelected(_))}),t.DNE(2,Dt,4,4,"ng-template",null,2,t.C5r),t.k0s()}if(2&i){const o=t.XpG(2);t.Y8G("participantList",t.bMT(1,1,o.mentionedEntities$)||t.lJ4(3,tt))}}function Mt(i,l){1&i&&(t.qex(0),t.j41(1,"nz-row",6)(2,"nz-col",12)(3,"nz-space",8),t.DNE(4,dt,8,10,"nz-card",13)(5,ut,1,1,"cvc-comment-add-form",14),t.k0s()(),t.j41(6,"nz-col",15)(7,"nz-space",16),t.DNE(8,gt,4,4,"cvc-participant-list",17)(9,Et,4,4,"cvc-participant-list",18)(10,yt,4,4,"cvc-participant-list",19)(11,Ot,4,4,"cvc-participant-list",20),t.k0s()()(),t.bVm()),2&i&&(t.R7$(),t.Y8G("nzGutter",16))}function It(i,l){if(1&i){const o=t.RV6();t.j41(0,"cvc-comment-add-form",27),t.bIt("commentAddedEvent",function(){m.eBV(o);const _=t.XpG();return m.Njj(_.refreshList())}),t.k0s()}if(2&i){const o=t.XpG();t.Y8G("subject",o.commentable)}}let At=(()=>{class i{constructor(o){this.gql=o,this.pageSize=5}ngOnInit(){this.queryRef$=this.gql.watch({subject:this.commentable,last:this.pageSize,sortBy:{column:n.G_G.Created,direction:n.UEL.Asc}});let o=this.queryRef$.valueChanges;this.pageInfo$=o.pipe((0,f.T)(({data:a})=>a.comments.pageInfo)),this.loading$=o.pipe((0,f.T)(({loading:a})=>a)),this.comments$=o.pipe((0,f.T)(({data:a})=>a.comments.edges.map(_=>_.node))),this.commenters$=o.pipe((0,f.T)(({data:a})=>a.comments.uniqueCommenters)),this.mentionedUsers$=o.pipe((0,f.T)(({data:a})=>a.comments.mentionedUsers)),this.mentionedRoles$=o.pipe((0,f.T)(({data:a})=>a.comments.mentionedRoles.map(_=>({id:`${_.entityId}-${_.tagType}`,tag:_})))),this.mentionedEntities$=o.pipe((0,f.T)(({data:a})=>a.comments.mentionedEntities.map(_=>({id:`${_.entityId}-${_.tagType}`,tag:_})))),this.unfilteredCount$=o.pipe((0,v.E)("data","comments","unfilteredCountForSubject"))}onLoadMore(o){this.queryRef$.fetchMore({variables:{last:this.pageSize,before:o}})}onCommenterSelected(o){this.queryRef$.refetch({originatingUserId:o?.id})}onMentionedUserSelected(o){this.queryRef$.refetch({mentionedUserId:o?.id})}onMentionedRoleSelected(o){if(o){let a=n.gG1[o.tag.displayName[0].toUpperCase()+o.tag.displayName.slice(1)];this.queryRef$.refetch({mentionedRole:a})}else this.queryRef$.refetch({mentionedRole:void 0})}onMentionedEntitySelected(o){this.queryRef$.refetch(o?{mentionedEntity:{entityType:o.tag.tagType,id:o.tag.entityId}}:{mentionedEntity:void 0})}refreshList(){this.queryRef$.refetch()}static#t=this.\u0275fac=function(a){return new(a||i)(t.rXU(n.y5X))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["cvc-comment-list"]],inputs:{commentable:"commentable",creationComment:"creationComment"},standalone:!1,decls:5,vars:5,consts:[["noComments",""],["comment",""],["itemTemplate",""],["noAvatar",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"nzGutter"],["nzSpan","24"],["nzDirection","vertical",2,"width","100%"],["nzTitle","Submission Comment",4,"nzSpaceItem"],["nzTitle","Submission Comment"],[3,"comment","canDelete"],["nzSpan","18"],["nzTitle","Comments",4,"nzSpaceItem"],["id","addComment",3,"subject","commentAddedEvent",4,"nzSpaceItem"],["nzSpan","6"],["nzDirection","vertical"],["listTitle","Commenters",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Mentioned Users",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Mentioned Roles",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Mentioned Entities",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["nzTitle","Comments"],["nzSize","small","nzItemLayout","horizontal",3,"nzDataSource","nzLoading","nzRenderItem"],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","link","nzSize","small","nzBlock","",3,"click"],[3,"comment"],["id","addComment",3,"commentAddedEvent","subject"],["listTitle","Commenters",3,"participantSelectedEvent","participantList"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["listTitle","Mentioned Users",3,"participantSelectedEvent","participantList"],["listTitle","Mentioned Roles",3,"participantSelectedEvent","participantList"],[3,"nzIcon"],["listTitle","Mentioned Entities",3,"participantSelectedEvent","participantList"],["nz-icon","",3,"nzType"]],template:function(a,_){if(1&a&&(t.DNE(0,mt,5,1,"ng-container",4)(1,Mt,12,1,"ng-container",5),t.nI1(2,"ngrxPush"),t.DNE(3,It,1,1,"ng-template",null,0,t.C5r)),2&a){const O=t.sdS(4);t.Y8G("ngIf",_.creationComment),t.R7$(),t.Y8G("ngIf",t.bMT(2,3,_.unfilteredCount$))("ngIfElse",O)}},dependencies:[E.bT,G.a,R.c,M.Uq,M.e,I.cK,N.eE,N.Xo,N.lQ,b.Dn,$.PM,U.U5,U.Dq,g,L.T,ct,E.Pc,D.L9,rt.g],styles:["[_nghost-%COMP%]{display:block}nz-list-header[_ngcontent-%COMP%]{padding:0;margin:0}nz-list-header[_ngcontent-%COMP%]   [nz-list-load-more][_ngcontent-%COMP%]{margin-top:-.5em;padding-bottom:.5em}"]})}return i})()},65566:(Z,k,e)=>{e.d(k,{K:()=>r});var n=e(73664),f=e(21413),v=e(69145),t=e(5964),m=e(56977),E=e(96354),G=e(99172),R=e(24608),M=e(69199),I=e(48728),N=e(41305),b=e(72200),$=e(84341),U=e(61774),K=e(37131),V=e(1177),A=e(3069),C=e(21011),x=e(4126);const u=()=>["#","@","$"],h=()=>({minRows:4,maxRows:100});function y(z,d){if(1&z&&(n.qex(0),n.j41(1,"span"),n.EFF(2),n.k0s(),n.bVm()),2&z){const c=d.$implicit;n.R7$(2),n.JRh(c.displayName)}}function W(z,d){1&z&&(n.qex(0),n.nrm(1,"nz-spin",8),n.bVm())}function X(z,d){if(1&z&&(n.qex(0),n.nrm(1,"cvc-comment-body",9),n.bVm()),2&z){const c=d.ngIf;n.R7$(),n.Y8G("commentBodySegments",c)}}function Y(z,d){if(1&z){const c=n.RV6();n.qex(0),n.j41(1,"nz-tabs",1)(2,"nz-tab",2)(3,"nz-mention",3),n.bIt("nzOnSearchChange",function(g){I.eBV(c);const L=n.XpG();return I.Njj(L.onSearchChange(g))})("nzOnSelect",function(){I.eBV(c);const g=n.XpG();return I.Njj(g.suggestions=[])}),n.j41(4,"textarea",4),n.mxI("ngModelChange",function(g){I.eBV(c);const L=n.XpG();return n.DH7(L.commentText,g)||(L.commentText=g),I.Njj(g)}),n.bIt("ngModelChange",function(g){I.eBV(c);const L=n.XpG();return I.Njj(L.onCommentChanged(g))}),n.k0s(),n.DNE(5,y,3,1,"ng-container",5),n.k0s()(),n.j41(6,"nz-tab",6),n.bIt("nzClick",function(){I.eBV(c);const g=n.XpG();return I.Njj(g.onPreviewButtonClicked())}),n.DNE(7,W,2,0,"ng-container",7),n.nI1(8,"ngrxPush"),n.DNE(9,X,2,1,"ng-container",7),n.nI1(10,"ngrxPush"),n.k0s()(),n.bVm()}if(2&z){const c=d.ngrxLet,s=n.XpG();n.R7$(),n.Y8G("nzAnimated",!1),n.R7$(2),n.Y8G("nzSuggestions",s.suggestions)("nzPrefix",n.lJ4(14,u))("nzValueWith",s.autoCompleteValueFor),n.R7$(),n.Y8G("placeholder",c&&c.canCurate?"Enter comment (minimum length 10. Use @ to mention users; # to link entities)":"Please sign in")("nzAutosize",n.lJ4(15,h)),n.R50("ngModel",s.commentText),n.BMQ("disabled",!c||!c.canCurate||null),n.R7$(3),n.Y8G("ngIf",n.bMT(8,10,s.previewLoading$)),n.R7$(2),n.Y8G("ngIf",n.bMT(10,12,s.previewComment$))}}let r=(()=>{class z{constructor(c,s,g,L){this.previewCommentGql=c,this.userTypeaheadGql=s,this.entityTypeaheadGql=g,this.viewerService=L,this.commentChange=new n.bkB,this.destroy$=new f.B,this.suggestions=[],this.roleSuggestions=[{displayName:"admins",value:"admins"},{displayName:"editors",value:"editors"}]}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.commentText=this.comment,this.userTypeaheadQueryRef$=this.userTypeaheadGql.watch({queryTerm:""}),this.userTypeaheadQueryRef$.valueChanges.pipe((0,R.E)("data","userTypeahead"),(0,t.p)(M.kP),(0,m.Q)(this.destroy$)).subscribe(c=>this.suggestions=c.map(s=>({displayName:s.username,value:s.username}))),this.entityTypeaheadQueryRef$=this.entityTypeaheadGql.watch({queryTerm:""}),this.entityTypeaheadQueryRef$.valueChanges.pipe((0,R.E)("data","entityTypeahead"),(0,t.p)(M.kP),(0,m.Q)(this.destroy$)).subscribe(c=>this.suggestions=c.map(s=>({displayName:s.displayName,value:this.tagForEntityTypeAndId(s.tagType,s.entityId)})))}ngOnChanges(){this.commentText=this.comment}autoCompleteValueFor(c){return c.value}tagForEntityTypeAndId(c,s){switch(c){case v.lBA.Feature:return`FID${s}`;case v.lBA.Variant:return`VID${s}`;case v.lBA.VariantGroup:return`VGID${s}`;case v.lBA.EvidenceItem:return`EID${s}`;case v.lBA.Assertion:return`AID${s}`;case v.lBA.Revision:return`RID${s}`;case v.lBA.MolecularProfile:return`MPID${s}`;case v.lBA.Role:return Object.keys(v.gG1)[s]}}resetForm(){this.commentText=""}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreviewButtonClicked(){this.commentText&&(this.previewComment$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,R.E)("data","previewCommentText"),(0,t.p)(M.kP)),this.previewLoading$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,E.T)(({loading:c})=>c),(0,G.Z)(!0)))}onSearchChange({value:c,prefix:s}){"@"===s?this.userTypeaheadQueryRef$.refetch({queryTerm:c}):"$"==s?this.suggestions=this.roleSuggestions.filter(g=>g.value.startsWith(c)):this.entityTypeaheadQueryRef$.refetch({queryTerm:c})}onCommentChanged(c){this.commentChange.emit(c)}static#t=this.\u0275fac=function(s){return new(s||z)(n.rXU(v.WGp),n.rXU(v.bPL),n.rXU(v.paL),n.rXU(N.q))};static#n=this.\u0275cmp=n.VBU({type:z,selectors:[["cvc-comment-input-form"]],inputs:{comment:"comment"},outputs:{commentChange:"commentChange"},standalone:!1,features:[n.OA$],decls:1,vars:1,consts:[[4,"ngrxLet"],[3,"nzAnimated"],["nzTitle","Write"],["nzNotFoundContent","No matches...",3,"nzOnSearchChange","nzOnSelect","nzSuggestions","nzPrefix","nzValueWith"],["nzMentionTrigger","","nz-input","",2,"width","100%",3,"ngModelChange","placeholder","nzAutosize","ngModel"],[4,"nzMentionSuggestion"],["nzTitle","Preview",3,"nzClick"],[4,"ngIf"],["nzTip","Loading..."],[3,"commentBodySegments"]],template:function(s,g){1&s&&n.DNE(0,Y,11,16,"ng-container",0),2&s&&n.Y8G("ngrxLet",g.viewer$)},dependencies:[b.bT,$.me,$.BC,U.Nj,K.eG,K.rE,V.a,A.O2,A.sJ,A.yZ,C.Sy,C.c9,$.vS,x.p,U.L9],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2})}return z})()},72874:(Z,k,e)=>{e.d(k,{PV:()=>L,g9:()=>w});var n=e(31635),f=e(74281),v=e(1384),t=e(73664),m=e(48728),E=e(17705),G=e(23597),R=e(89079),M=e(21413),I=e(5964),N=e(61594),b=e(70980),$=e(50513),U=e(40713),K=e(66376),V=e(26841),A=e(57806),C=e(65463),x=e(25701),u=e(59965),h=e(41951),y=e(35154),W=e(16389),X=e(25930);const Y=["okBtn"],r=["cancelBtn"];function z(T,j){1&T&&(t.j41(0,"div",6),t.nrm(1,"span",14),t.k0s())}function d(T,j){if(1&T&&(t.qex(0),t.j41(1,"span",17),t.nrm(2,"nz-icon",18),t.k0s(),t.bVm()),2&T){const D=j.$implicit;t.R7$(2),t.Y8G("nzType",D||"exclamation-circle")}}function c(T,j){if(1&T&&(t.qex(0),t.DNE(1,d,3,1,"ng-container",15),t.j41(2,"div",16),t.EFF(3),t.k0s(),t.bVm()),2&T){const D=t.XpG(2);t.R7$(),t.Y8G("nzStringTemplateOutlet",D.nzIcon),t.R7$(2),t.JRh(D.nzTitle)}}function s(T,j){if(1&T){const D=t.RV6();t.j41(0,"div",4)(1,"div",5),t.nVh(2,z,2,0,"div",6),t.j41(3,"div",7)(4,"div")(5,"div",8)(6,"div",9),t.DNE(7,c,4,2,"ng-container",10),t.k0s(),t.j41(8,"div",11)(9,"button",12,1),t.bIt("click",function(){m.eBV(D);const P=t.XpG();return m.Njj(P.onCancel())}),t.SS7(11),t.nI1(12,"nzI18n"),t.EFF(13),t.k0s(),t.j41(14,"button",13,2),t.bIt("click",function(){m.eBV(D);const P=t.XpG();return m.Njj(P.onConfirm())}),t.SS7(16),t.nI1(17,"nzI18n"),t.EFF(18),t.k0s()()()()()()()}if(2&T){let D;const p=t.XpG();t.Aen(p.nzOverlayStyle),t.HbH(p._classMap),t.AVh("ant-popover-rtl","rtl"===p.dir),t.Y8G("cdkTrapFocusAutoCapture",null!==p.nzAutoFocus)("@.disabled",!(null==p.noAnimation||!p.noAnimation.nzNoAnimation))("nzNoAnimation",null==p.noAnimation?null:p.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),t.R7$(2),t.vxM(p.nzPopconfirmShowArrow?2:-1),t.R7$(5),t.Y8G("nzStringTemplateOutlet",p.nzTitle)("nzStringTemplateOutletContext",p.nzTitleContext),t.R7$(2),t.Y8G("nzSize","small")("disabled",null==(D=p.nzCancelButtonProps())?null:D.nzDisabled),t.BMQ("cdkFocusInitial","cancel"===p.nzAutoFocus||null);const P=p.nzCancelText()||t.bMT(12,24,"Modal.cancelText");t.R7$(4),t.SpI(" ",P," "),t.R7$(),t.Y8G("nzSize","small")("nzType",p.nzOkButtonProps().nzType)("nzDanger",p.nzOkButtonProps().nzDanger)("nzLoading",p.confirmLoading)("disabled",p.nzOkButtonProps().nzDisabled),t.BMQ("cdkFocusInitial","ok"===p.nzAutoFocus||null);const F=p.nzOkText()||t.bMT(17,26,"Modal.okText");t.R7$(4),t.SpI(" ",F," ")}}let L=(()=>{let j,P,T=y.ME,D=[],p=[],F=[],H=[];return class et extends T{static#t=(()=>{const Q="function"==typeof Symbol&&Symbol.metadata?Object.create(T[Symbol.metadata]??null):void 0;j=[(0,K.H4)()],P=[(0,K.H4)()],(0,n.G4)(null,null,j,{kind:"field",name:"nzPopconfirmBackdrop",static:!1,private:!1,access:{has:S=>"nzPopconfirmBackdrop"in S,get:S=>S.nzPopconfirmBackdrop,set:(S,J)=>{S.nzPopconfirmBackdrop=J}},metadata:Q},D,p),(0,n.G4)(null,null,P,{kind:"field",name:"nzAutofocus",static:!1,private:!1,access:{has:S=>"nzAutofocus"in S,get:S=>S.nzAutofocus,set:(S,J)=>{S.nzAutofocus=J}},metadata:Q},F,H),Q&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Q})})();_nzModuleName="popconfirm";arrowPointAtCenter;title;titleContext=null;directiveTitle;trigger="click";placement="top";origin;mouseEnterDelay;mouseLeaveDelay;overlayClassName;overlayStyle;visible;nzBeforeConfirm;nzIcon;nzCondition=!1;nzPopconfirmShowArrow=!0;nzPopconfirmBackdrop=(0,n.zF)(this,D,!1);nzAutofocus=((0,n.zF)(this,p),(0,n.zF)(this,F,null));nzOkText=((0,n.zF)(this,H),(0,E.hFB)(null));nzOkType=(0,E.hFB)("primary");nzCancelText=(0,E.hFB)(null);nzOkButtonProps=(0,E.hFB)(null);nzCancelButtonProps=(0,E.hFB)(null);nzOkDisabled=(0,E.hFB)(!1,{transform:E.L39});nzOkDanger=(0,E.hFB)(!1,{transform:E.L39});okButtonProps=(0,G.EW)(()=>({...this.nzOkButtonProps(),nzType:this.nzOkButtonProps()?.nzType||"danger"===this.nzOkType()?"primary":this.nzOkType(),nzDanger:this.nzOkDanger()||this.nzOkButtonProps()?.nzDanger||"danger"===this.nzOkType(),nzDisabled:this.nzOkDisabled()||this.nzOkButtonProps()?.nzDisabled}));cancelButtonProps=(0,G.EW)(()=>({...this.nzCancelButtonProps()}));directiveContent=null;content=null;overlayClickable;visibleChange=new t.bkB;nzOnCancel=new t.bkB;nzOnConfirm=new t.bkB;getProxyPropertyMap(){return{nzOkText:["nzOkText",()=>this.nzOkText],nzCancelText:["nzCancelText",()=>this.nzCancelText],nzOkButtonProps:["nzOkButtonProps",()=>this.okButtonProps],nzCancelButtonProps:["nzCancelButtonProps",()=>this.cancelButtonProps],nzBeforeConfirm:["nzBeforeConfirm",()=>this.nzBeforeConfirm],nzCondition:["nzCondition",()=>this.nzCondition],nzIcon:["nzIcon",()=>this.nzIcon],nzPopconfirmShowArrow:["nzPopconfirmShowArrow",()=>this.nzPopconfirmShowArrow],nzPopconfirmBackdrop:["nzBackdrop",()=>this.nzPopconfirmBackdrop],nzPopconfirmContext:["nzTitleContext",()=>this.titleContext],nzAutoFocus:["nzAutoFocus",()=>this.nzAutofocus],...super.getProxyPropertyMap()}}constructor(){super(B)}createComponent(){super.createComponent(),this.component.nzOnCancel.pipe((0,R.pQ)(this.destroyRef)).subscribe(()=>{this.nzOnCancel.emit()}),this.component.nzOnConfirm.pipe((0,R.pQ)(this.destroyRef)).subscribe(()=>{this.nzOnConfirm.emit()})}static \u0275fac=function(S){return new(S||et)};static \u0275dir=t.FsC({type:et,selectors:[["","nz-popconfirm",""]],hostVars:2,hostBindings:function(S,J){2&S&&t.AVh("ant-popover-open",J.visible)},inputs:{arrowPointAtCenter:[2,"nzPopconfirmArrowPointAtCenter","arrowPointAtCenter",E.L39],title:[0,"nzPopconfirmTitle","title"],titleContext:[0,"nzPopconfirmTitleContext","titleContext"],directiveTitle:[0,"nz-popconfirm","directiveTitle"],trigger:[0,"nzPopconfirmTrigger","trigger"],placement:[0,"nzPopconfirmPlacement","placement"],origin:[0,"nzPopconfirmOrigin","origin"],mouseEnterDelay:[0,"nzPopconfirmMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:[0,"nzPopconfirmMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:[0,"nzPopconfirmOverlayClassName","overlayClassName"],overlayStyle:[0,"nzPopconfirmOverlayStyle","overlayStyle"],visible:[0,"nzPopconfirmVisible","visible"],nzBeforeConfirm:"nzBeforeConfirm",nzIcon:"nzIcon",nzCondition:[2,"nzCondition","nzCondition",E.L39],nzPopconfirmShowArrow:[2,"nzPopconfirmShowArrow","nzPopconfirmShowArrow",E.L39],nzPopconfirmBackdrop:"nzPopconfirmBackdrop",nzAutofocus:"nzAutofocus",nzOkText:[1,"nzOkText"],nzOkType:[1,"nzOkType"],nzCancelText:[1,"nzCancelText"],nzOkButtonProps:[1,"nzOkButtonProps"],nzCancelButtonProps:[1,"nzCancelButtonProps"],nzOkDisabled:[1,"nzOkDisabled"],nzOkDanger:[1,"nzOkDanger"]},outputs:{visibleChange:"nzPopconfirmVisibleChange",nzOnCancel:"nzOnCancel",nzOnConfirm:"nzOnConfirm"},exportAs:["nzPopconfirm"],features:[t.Vt3]})}})(),B=(()=>{class T extends y.VJ{okBtn;cancelBtn;nzCondition=!1;nzPopconfirmShowArrow=!0;nzIcon;nzAutoFocus=null;nzBeforeConfirm=null;nzOkText=(0,m.vPA)(null);nzCancelText=(0,m.vPA)(null);nzOkButtonProps=(0,m.vPA)({nzType:"primary"});nzCancelButtonProps=(0,m.vPA)(null);nzOnCancel=new M.B;nzOnConfirm=new M.B;_trigger="click";elementFocusedBeforeModalWasOpened=null;document=(0,m.WQX)(m.qQL);_prefix="ant-popover";confirmLoading=!1;constructor(){super(),this.destroyRef.onDestroy(()=>{this.nzVisibleChange.complete()})}show(){this.nzCondition?this.onConfirm():(this.capturePreviouslyFocusedElement(),super.show())}hide(){super.hide(),this.restoreFocus()}handleConfirm(){this.nzOnConfirm.next(),super.hide()}onCancel(){this.nzOnCancel.next(),super.hide()}onConfirm(){this.nzBeforeConfirm?(this.confirmLoading=!0,this.cdr.markForCheck(),(0,x.cG)(this.nzBeforeConfirm()).pipe((0,N.$)(),(0,I.p)(Boolean),(0,b.j)(()=>{this.confirmLoading=!1,this.cdr.markForCheck()})).subscribe(()=>this.handleConfirm())):this.handleConfirm()}capturePreviouslyFocusedElement(){this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement)}restoreFocus(){const D=this.elementFocusedBeforeModalWasOpened;if(D&&"function"==typeof D.focus){const p=this.document.activeElement,P=this.elementRef.nativeElement;(!p||p===this.document.body||p===P||P.contains(p))&&D.focus()}}static \u0275fac=function(p){return new(p||T)};static \u0275cmp=t.VBU({type:T,selectors:[["nz-popconfirm"]],viewQuery:function(p,P){if(1&p&&(t.GBs(Y,5,t.aKT),t.GBs(r,5,t.aKT)),2&p){let F;t.mGM(F=t.lsd())&&(P.okBtn=F),t.mGM(F=t.lsd())&&(P.cancelBtn=F)}},exportAs:["nzPopconfirmComponent"],features:[t.Vt3],decls:2,vars:6,consts:[["overlay","cdkConnectedOverlay"],["cancelBtn",""],["okBtn",""],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"overlayOutsideClick","detach","positionChange","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","nzArrowPointAtCenter"],["cdkTrapFocus","",1,"ant-popover",3,"cdkTrapFocusAutoCapture","nzNoAnimation"],[1,"ant-popover-content"],[1,"ant-popover-arrow"],[1,"ant-popover-inner"],[1,"ant-popover-inner-content"],[1,"ant-popover-message"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[1,"ant-popover-buttons"],["nz-button","",3,"click","nzSize","disabled"],["nz-button","",3,"click","nzSize","nzType","nzDanger","nzLoading","disabled"],[1,"ant-popover-arrow-content"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-message-title"],[1,"ant-popover-message-icon"],["nzTheme","fill",3,"nzType"]],template:function(p,P){if(1&p){const F=t.RV6();t.DNE(0,s,19,28,"ng-template",3,0,t.C5r),t.bIt("overlayOutsideClick",function(q){return m.eBV(F),m.Njj(P.onClickOutside(q))})("detach",function(){return m.eBV(F),m.Njj(P.hide())})("positionChange",function(q){return m.eBV(F),m.Njj(P.onPositionChange(q))})}2&p&&t.Y8G("cdkConnectedOverlayHasBackdrop",P.nzBackdrop)("cdkConnectedOverlayOrigin",P.origin)("cdkConnectedOverlayPositions",P._positions)("cdkConnectedOverlayOpen",P._visible)("cdkConnectedOverlayPush",P.cdkConnectedOverlayPush)("nzArrowPointAtCenter",P.nzArrowPointAtCenter)},dependencies:[v.t,v.b,C.$_,C.vT,f.A,f.C,V.z,A.C,A.m,h.Y3,h.Dn,$.Z,$.a,W.c,X.p,u.bP,u.Vc],encapsulation:2,data:{animation:[U.uX]},changeDetection:0})}return T})(),w=(()=>{class T{static \u0275fac=function(p){return new(p||T)};static \u0275mod=t.$C({type:T});static \u0275inj=m.G2t({imports:[B]})}return T})()},72968:(Z,k,e)=>{e.d(k,{K:()=>R});var n=e(72200),f=e(25703),v=e(12617),t=e(41951),m=e(50513),E=e(73664),G=e(48728);let R=(()=>{class M{static#t=this.\u0275fac=function(b){return new(b||M)};static#n=this.\u0275mod=E.$C({type:M});static#e=this.\u0275inj=G.G2t({imports:[n.MD,f.Ti,v.rD,t.Y3,m.Z]})}return M})()},86864:(Z,k,e)=>{e.d(k,{OW:()=>u,fL:()=>W,fS:()=>y,sC:()=>Y,sf:()=>x});var n=e(73664),f=e(48728),v=e(17705),t=e(76939),m=e(40372),E=e(89079),G=e(57806);const R=["*"];function M(r,z){1&r&&n.SdG(0)}const I=[[["nz-avatar","nz-comment-avatar",""]],[["nz-comment-content"]],"*"],N=["nz-avatar[nz-comment-avatar]","nz-comment-content","*"];function b(r,z){if(1&r&&(n.qex(0),n.EFF(1),n.bVm()),2&r){const d=n.XpG(2);n.R7$(),n.JRh(d.nzAuthor)}}function $(r,z){if(1&r&&(n.j41(0,"span",4),n.DNE(1,b,2,1,"ng-container",8),n.k0s()),2&r){const d=n.XpG();n.R7$(),n.Y8G("nzStringTemplateOutlet",d.nzAuthor)}}function U(r,z){if(1&r&&(n.qex(0),n.EFF(1),n.bVm()),2&r){const d=n.XpG(2);n.R7$(),n.JRh(d.nzDatetime)}}function K(r,z){if(1&r&&(n.j41(0,"span",5),n.DNE(1,U,2,1,"ng-container",8),n.k0s()),2&r){const d=n.XpG();n.R7$(),n.Y8G("nzStringTemplateOutlet",d.nzDatetime)}}function V(r,z){}function A(r,z){if(1&r&&(n.j41(0,"li")(1,"span"),n.DNE(2,V,0,0,"ng-template",9),n.k0s()()),2&r){const d=z.$implicit;n.R7$(2),n.Y8G("nzCommentActionHost",d.content)}}function C(r,z){if(1&r&&(n.j41(0,"ul",6),n.Z7z(1,A,3,1,"li",null,n.fX1),n.k0s()),2&r){const d=n.XpG();n.R7$(),n.Dyx(d.actions)}}let x=(()=>{class r{static \u0275fac=function(c){return new(c||r)};static \u0275dir=n.FsC({type:r,selectors:[["nz-avatar","nz-comment-avatar",""]],exportAs:["nzCommentAvatar"]})}return r})(),u=(()=>{class r{static \u0275fac=function(c){return new(c||r)};static \u0275dir=n.FsC({type:r,selectors:[["nz-comment-content"],["","nz-comment-content",""]],hostAttrs:[1,"ant-comment-content-detail"],exportAs:["nzCommentContent"]})}return r})(),h=(()=>{class r extends t.I3{nzCommentActionHost;ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}ngAfterViewInit(){this.attach(this.nzCommentActionHost)}static \u0275fac=(()=>{let d;return function(s){return(d||(d=n.xGo(r)))(s||r)}})();static \u0275dir=n.FsC({type:r,selectors:[["","nzCommentActionHost",""]],inputs:{nzCommentActionHost:"nzCommentActionHost"},exportAs:["nzCommentActionHost"],features:[n.Vt3]})}return r})(),y=(()=>{class r{implicitContent;viewContainerRef=(0,f.WQX)(n.c1b);contentPortal=null;get content(){return this.contentPortal}ngOnInit(){this.contentPortal=new t.VA(this.implicitContent,this.viewContainerRef)}static \u0275fac=function(c){return new(c||r)};static \u0275cmp=n.VBU({type:r,selectors:[["nz-comment-action"]],viewQuery:function(c,s){if(1&c&&n.GBs(n.C4Q,7),2&c){let g;n.mGM(g=n.lsd())&&(s.implicitContent=g.first)}},exportAs:["nzCommentAction"],ngContentSelectors:R,decls:1,vars:0,template:function(c,s){1&c&&(n.NAR(),n.DNE(0,M,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}return r})(),W=(()=>{class r{destroyRef=(0,f.WQX)(f.abz);cdr=(0,f.WQX)(v.gRc);directionality=(0,f.WQX)(m.D);nzAuthor;nzDatetime;dir="ltr";actions;ngOnInit(){this.directionality.change?.pipe((0,E.pQ)(this.destroyRef)).subscribe(d=>{this.dir=d,this.cdr.detectChanges()}),this.dir=this.directionality.value}static \u0275fac=function(c){return new(c||r)};static \u0275cmp=n.VBU({type:r,selectors:[["nz-comment"]],contentQueries:function(c,s,g){if(1&c&&n.wni(g,y,4),2&c){let L;n.mGM(L=n.lsd())&&(s.actions=L)}},hostVars:4,hostBindings:function(c,s){2&c&&n.AVh("ant-comment",!0)("ant-comment-rtl","rtl"===s.dir)},inputs:{nzAuthor:"nzAuthor",nzDatetime:"nzDatetime"},exportAs:["nzComment"],ngContentSelectors:N,decls:11,vars:3,consts:[[1,"ant-comment-inner"],[1,"ant-comment-avatar"],[1,"ant-comment-content"],[1,"ant-comment-content-author"],[1,"ant-comment-content-author-name"],[1,"ant-comment-content-author-time"],[1,"ant-comment-actions"],[1,"ant-comment-nested"],[4,"nzStringTemplateOutlet"],[3,"nzCommentActionHost"]],template:function(c,s){1&c&&(n.NAR(I),n.j41(0,"div",0)(1,"div",1),n.SdG(2),n.k0s(),n.j41(3,"div",2)(4,"div",3),n.nVh(5,$,2,1,"span",4),n.nVh(6,K,2,1,"span",5),n.k0s(),n.SdG(7,1),n.nVh(8,C,3,0,"ul",6),n.k0s()(),n.j41(9,"div",7),n.SdG(10,2),n.k0s()),2&c&&(n.R7$(5),n.vxM(s.nzAuthor?5:-1),n.R7$(),n.vxM(s.nzDatetime?6:-1),n.R7$(2),n.vxM(null!=s.actions&&s.actions.length?8:-1))},dependencies:[G.C,G.m,h],encapsulation:2,changeDetection:0})}return r})(),Y=(()=>{class r{static \u0275fac=function(c){return new(c||r)};static \u0275mod=n.$C({type:r});static \u0275inj=f.G2t({imports:[W]})}return r})()}}]);