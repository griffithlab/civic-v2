"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[7598],{8616:(x,v,n)=>{n.d(v,{u:()=>t});var a=n(5e3),g=n(685),l=n(1912),m=n(3618),f=n(647);function c(r,_){1&r&&(a.TgZ(0,"span"),a._uU(1," You must be logged in to view this page. "),a.qZA())}function y(r,_){1&r&&a._UZ(0,"cvc-login-button")}function p(r,_){1&r&&(a.TgZ(0,"nz-typography",4),a._UZ(1,"i",5),a.qZA())}let t=(()=>{class r{}return r.\u0275fac=function(d){return new(d||r)},r.\u0275cmp=a.Xpm({type:r,selectors:[["cvc-login-prompt"]],decls:7,vars:3,consts:[[3,"nzNotFoundImage","nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["emptyImage",""],["nzType","secondary"],["nz-icon","","nzType","login","nzTheme","outline",2,"font-size","50pt"]],template:function(d,u){if(1&d&&(a.TgZ(0,"nz-empty",0),a.YNc(1,c,2,0,"ng-template",null,1,a.W1O),a.YNc(3,y,1,0,"ng-template",null,2,a.W1O),a.qZA(),a.YNc(5,p,2,0,"ng-template",null,3,a.W1O)),2&d){const T=a.MAs(2),z=a.MAs(4),C=a.MAs(6);a.Q6J("nzNotFoundImage",C)("nzNotFoundContent",T)("nzNotFoundFooter",z)}},directives:[g.p9,l.s,m.ZU,f.Ls],styles:["[_nghost-%COMP%]{display:inline-block}"]}),r})()},9386:(x,v,n)=>{n.d(v,{a:()=>y});var a=n(9808),g=n(1844),l=n(685),m=n(647),f=n(3618),c=n(5e3);let y=(()=>{class p{}return p.\u0275fac=function(r){return new(r||p)},p.\u0275mod=c.oAB({type:p}),p.\u0275inj=c.cJS({imports:[[a.ez,g.B,l.Xo,m.PV,f.ZJ]]}),p})()},8926:(x,v,n)=>{n.d(v,{A:()=>l});var a=n(5e3),g=n(2313);let l=(()=>{class m{constructor(c){this.sanitizer=c}transform(c,y){if(!y||""==y)return c;const p=new RegExp(y,"gi"),t=c.match(p);if(!t)return c;let r=c.replace(p,`<span class='typeahead-match'>${t[0]}</span>`);return this.sanitizer.bypassSecurityTrustHtml(r)}}return m.\u0275fac=function(c){return new(c||m)(a.Y36(g.H7,16))},m.\u0275pipe=a.Yjl({name:"highlightTypeahead",type:m,pure:!0}),m})()},3077:(x,v,n)=>{function a(g){return void 0!==g}n.d(v,{$:()=>a})},7462:(x,v,n)=>{n.d(v,{o:()=>p});var a=n(9808),g=n(8776),l=n(5e3),m=n(1047),f=n(4182);const y={name:"cvc-textarea",component:(()=>{class t extends g.fS{constructor(){super(...arguments),this.defaultOptions={templateOptions:{autosize:{minRows:2,maxRows:20}}}}}return t.\u0275fac=function(){let r;return function(d){return(r||(r=l.n5z(t)))(d||t)}}(),t.\u0275cmp=l.Xpm({type:t,selectors:[["cvc-textarea-base-type"]],features:[l.qOj],decls:1,vars:3,consts:[["nz-input","",3,"nzAutosize","formControl","formlyAttributes"]],template:function(_,d){1&_&&l._UZ(0,"textarea",0),2&_&&l.Q6J("nzAutosize",d.to.autosize)("formControl",d.formControl)("formlyAttributes",d.field)},directives:[m.Zp,m.rh,f.Fj,f.JJ,f.oH,g.VQ],styles:[""],changeDetection:0}),t})(),wrappers:["form-field"]};let p=(()=>{class t{}return t.\u0275fac=function(_){return new(_||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[a.ez,f.u5,f.UX,g.X0.forChild({types:[y]}),m.o7]]}),t})()},4181:(x,v,n)=>{n.d(v,{O:()=>H});var a=n(9808),g=n(6123),l=n(8776),m=n(8929),f=n(591),c=n(373),y=n(4850),p=n(7625),t=n(5e3),r=n(712),_=n(9169),d=n(8054),u=n(4182),T=n(8664),z=n(822),C=n(6042),L=n(2643),S=n(2683),E=n(647),V=n(6949),F=n(8926);function B(e,h){if(1&e&&(t.TgZ(0,"nz-option",6),t._UZ(1,"span",7),t.ALo(2,"highlightTypeahead"),t.qZA()),2&e){const o=h.$implicit,s=t.oxw(2);t.Q6J("nzValue",o.variant),t.xp6(1),t.Q6J("innerHtml",t.xi3(2,2,o.label,s.to.searchString),t.oJD)}}function D(e,h){1&e&&t._uU(0," No variant found in CIViC that matches the string provided. ")}function U(e,h){if(1&e){const o=t.EpF();t.ynx(0),t.TgZ(1,"nz-select",3),t.NdJ("nzOnSearch",function(i){return t.CHM(o),t.oxw().to.onSearch(i)}),t.YNc(2,B,3,5,"nz-option",4),t.ALo(3,"ngrxPush"),t.qZA(),t.YNc(4,D,1,0,"ng-template",null,5,t.W1O),t.BQk()}if(2&e){const o=t.MAs(5),s=t.oxw(),i=t.MAs(4);t.xp6(1),t.Q6J("formControl",s.formControl)("formlyAttributes",s.field)("nzPlaceHolder",s.to.placeholder?s.to.placeholder:null)("nzDropdownRender",s.to.allowCreate?i:null)("nzNotFoundContent",o)("nzShowArrow",s.to.showArrow),t.xp6(1),t.Q6J("ngForOf",t.lcZ(3,7,s.variants$))}}function Z(e,h){if(1&e&&t._UZ(0,"cvc-variant-tag",8),2&e){const o=t.oxw();t.Q6J("variant",o.formControl.value)}}function W(e,h){if(1&e&&t._UZ(0,"cvc-form-errors-alert",12),2&e){const o=t.oxw(4);t.Q6J("errors",o.errorMessages)}}function J(e,h){if(1&e){const o=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(4);return i.addVariant(i.to.searchString)}),t._UZ(1,"i",14),t._uU(2,"No Existing CIViC Variant\xa0"),t.TgZ(3,"strong"),t._uU(4),t.qZA(),t._uU(5,"\xa0found. Create A New Variant? "),t.qZA()}if(2&e){const o=t.oxw(4);t.Q6J("nzLoading",o.loading),t.xp6(4),t.Oqu(o.to.searchString)}}function Q(e,h){if(1&e&&(t.ynx(0),t.YNc(1,W,1,1,"cvc-form-errors-alert",10),t.YNc(2,J,6,2,"button",11),t.BQk()),2&e){const o=t.oxw(3);t.xp6(1),t.Q6J("ngIf",o.errorMessages.length>0),t.xp6(1),t.Q6J("ngIf",0==o.errorMessages.length)}}function R(e,h){if(1&e&&(t.ynx(0),t.YNc(1,Q,3,2,"ng-container",9),t.BQk()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",""!==o.to.searchString)}}function N(e,h){if(1&e&&(t.YNc(0,R,2,1,"ng-container",9),t.ALo(1,"ngrxPush")),2&e){const o=t.oxw();t.Q6J("ngIf",t.lcZ(1,1,o.displayAdd$))}}const Y={name:"variant-input",component:(()=>{class e extends l.fS{constructor(o,s,i){super(),this.variantTypeaheadQuery=o,this.networkErrorService=s,this.addVariantGQL=i,this.destroy$=new m.xQ,this.success=!1,this.errorMessages=[],this.loading=!1,this.displayAdd$=new f.X(!1),this.addVariantMutator=new g.U(s),this.defaultOptions={templateOptions:{placeholder:"Search Variants",showArrow:!1,onSearch:()=>{},minLengthSearch:1,optionList:[],allowCreate:!0},expressionProperties:{"templateOptions.geneId":(I,w,A)=>{var O,P;let M=null===(P=null===(O=null==A?void 0:A.parent)||void 0===O?void 0:O.parent)||void 0===P?void 0:P.model;if(M&&M.gene&&M.gene[0])return M.gene[0].id}}}}ngOnInit(){this.queryRef=this.variantTypeaheadQuery.watch({name:"zzzz"}),this.variants$=this.queryRef.valueChanges.pipe((0,c.j)("data","variants","nodes"),(0,y.U)(o=>o.map(i=>({value:i.id,label:i.name,variant:i}))))}ngAfterViewInit(){this.to.onSearch=o=>{o.length<this.to.minLengthSearch||(this.to.searchString=o,this.errorMessages=[],this.queryRef.refetch({name:o,geneId:this.to.geneId}).then(s=>{this.displayAdd$.next(0==s.data.variants.nodes.filter(i=>i.name.toUpperCase()==o.toUpperCase()).length)}))}}addVariant(o){if(o&&""!=o&&this.to.geneId){let s=this.addVariantMutator.mutate(this.addVariantGQL,{name:o,geneId:this.to.geneId},i=>{var I;null===(I=this.field.formControl)||void 0===I||I.setValue({id:i.addVariant.variant.id,name:i.addVariant.variant.name}),this.to.searchString="",this.to.searchLength=0});s.submitSuccess$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{i&&(this.success=!0)}),s.submitError$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{i&&(this.errorMessages=i,this.success=!1)}),s.isSubmitting$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.loading=i})}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.displayAdd$.complete()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(r._eC),t.Y36(_.Y),t.Y36(r.LUc))},e.\u0275cmp=t.Xpm({type:e,selectors:[["cvc-variant-input-type"]],features:[t.qOj],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["variantListItem",""],["addVariantTmpl",""],["nzShowSearch","","nzServerSearch","",3,"formControl","formlyAttributes","nzPlaceHolder","nzDropdownRender","nzNotFoundContent","nzShowArrow","nzOnSearch"],["nzCustomContent","",3,"nzValue",4,"ngFor","ngForOf"],["sourceLoader",""],["nzCustomContent","",3,"nzValue"],[3,"innerHtml"],[3,"variant"],[4,"ngIf"],[3,"errors",4,"ngIf"],["nz-button","","nzSize","small",3,"nzLoading","click",4,"ngIf"],[3,"errors"],["nz-button","","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","plus","nzTheme","outline"]],template:function(o,s){if(1&o&&(t.YNc(0,U,6,9,"ng-container",0),t.YNc(1,Z,1,1,"ng-template",null,1,t.W1O),t.YNc(3,N,2,3,"ng-template",null,2,t.W1O)),2&o){const i=t.MAs(2);t.Q6J("ngIf",!(null!=s.formControl.value&&s.formControl.value.id))("ngIfElse",i)}},directives:[a.O5,d.Vq,u.JJ,u.oH,l.VQ,a.sg,d.Ip,T.I,z.V,C.ix,L.dQ,S.w,E.Ls],pipes:[V.fM,F.A],styles:[""],changeDetection:0}),e})()};var $=n(4867),K=n(7008),j=n(9444);let H=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[a.ez,u.UX,V.WG,l.X0.forChild({types:[Y]}),d.LV,C.sL,E.PV,$.Q,K.B,j.s]]}),e})()},5472:(x,v,n)=>{n.d(v,{r:()=>d});var a=n(9808),g=n(6949),l=n(8776),m=n(7484),f=n(5482),c=n(1894),y=n(5109),p=n(6789),t=n(5e3);const _={wrappers:[{name:"form-container",component:(()=>{class u extends l.n2{}return u.\u0275fac=function(){let T;return function(C){return(T||(T=t.n5z(u)))(C||u)}}(),u.\u0275cmp=t.Xpm({type:u,selectors:[["cvc-form-container-wrapper"]],features:[t.qOj],decls:5,vars:1,consts:[["nzSpan","24"],["nzSize","default",3,"nzTitle"],["fieldComponent",""]],template:function(z,C){1&z&&(t.TgZ(0,"nz-row"),t.TgZ(1,"nz-col",0),t.TgZ(2,"nz-card",1),t.GkF(3,null,2),t.qZA(),t.qZA(),t.qZA()),2&z&&(t.xp6(2),t.Q6J("nzTitle",C.to.label))},directives:[c.SK,c.t3,m.bd],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),u})()}]};let d=(()=>{class u{}return u.\u0275fac=function(z){return new(z||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[[a.ez,g.WG,l.X0.forChild(_),c.Jb,m.vh,f.cD,p._,y.s]]}),u})()}}]);