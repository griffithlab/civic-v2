"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[9600],{1360:(I,u,n)=>{n.d(u,{I:()=>h});var f=n(6814),d=n(3599),m=n(2840),v=n(9208),i=n(279),C=n(1227),c=n(9212);let h=(()=>{class o{}return o.\u0275fac=function(y){return new(y||o)},o.\u0275mod=c.oAB({type:o}),o.\u0275inj=c.cJS({imports:[f.ez,d.U5,m.sL,v.S,C.g,i.s]}),o})()},6555:(I,u,n)=>{n.d(u,{F:()=>b});var f=n(655),d=n(6223),m=n(1791),v=n(2024),i=n(1022);const g=(0,n(7570).Z)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Variant"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{xs:24,md:12,lg:8},{xs:24,md:12,lg:8},{xs:24,lg:8}]}},fieldGroup:[{key:"featureId",type:"feature-select",props:{description:"Enter an Entrez Gene for this Variant",required:!0,canChangeFeatureType:!1}},{key:"name",type:"base-input",props:{placeholder:"Enter a name for this Variant",description:"Enter the name of the Variant according to the <a href='https://civic.readthedocs.io/en/latest/model/variants/name.html#curating-variant-names' target='blank'>Variant Curation SOP</a>",label:"Name",required:!0,rows:1}},{key:"aliases",type:"tag-multi-input",props:{label:"Aliases",description:"List any aliases commonly used to refer to this Variant",placeholder:"Enter Alias and hit return"}}]},{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{xs:24,lg:12,xl:6,xxl:8},{xs:24,lg:12,xl:6,xxl:8},{xs:24,xl:12,xxl:8}]}},fieldGroup:[{key:"hgvsDescriptions",type:"tag-multi-input",props:{label:"HGVS Descriptions",description:"Enter any HGVS nomenclature descriptions of this Variant",tooltip:"Human Genome Variation Society nomenclature descriptions",placeholder:"Enter HGVS and hit return"}},{key:"variantTypeIds",type:"variant-type-multi-select"},{key:"clinvarIds",type:"clinvar-multi-input",wrappers:["form-field"],props:{label:"ClinVar IDs"}}]},{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{wrappers:["form-card"],props:{formCardOptions:{title:"Primary (5') Coordinates",size:"small"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{responsive:{xs:24,md:12,lg:8,xxl:6}}},fieldGroup:[{key:"referenceBuild",type:"reference-build-select"},{key:"ensemblVersion",type:"base-input",validators:{nccnVersionNumber:{expression:e=>!e.value||/^\d{2,3}$/.test(e.value),message:(e,s)=>`"${s.formControl?.value}" does not appear to be an Ensembl version number`}},props:{label:"Ensembl Version",description:"Enter a valid Ensembl database version (e.g. 75)"}},{key:"referenceBases",type:"base-input",validators:{nccnVersionNumber:{expression:e=>!e.value||/^[ACTG\\]+$/.test(e.value),message:(e,s)=>`"${s.formControl?.value}" contains invalid characters.`}},props:{label:"Reference Bases",description:"The nucleotide(s) of the reference genome affected by the variant. Only used for SNVs and Indels (otherwise leave blank)"}},{key:"variantBases",type:"base-input",validators:{nccnVersionNumber:{expression:e=>!e.value||/^[ACTG\\]+$/.test(e.value),message:(e,s)=>`"${s.formControl?.value}" contains invalid characters.`}},props:{label:"Variant Bases",description:"The nucleotide(s) of the variant allele. Only used for SNVs and Indels (otherwise leave blank)"}},{key:"chromosome",type:"base-select",props:{label:"Chromosome",options:i.aP,description:"Specify the chromosome in which this variant occurs (e.g. 17)."}},{key:"start",type:"base-input",validators:{isNumeric:{expression:e=>!e.value||/^\d+$/.test(e.value),message:(e,s)=>"Start coordinate must be numeric"}},props:{label:"Start",description:"Enter the left/first coordinate of this variant. Must be \u2264 the Stop coordinate. Coordinate must be compatible with the selected reference build."}},{key:"stop",type:"base-input",validators:{isNumeric:{expression:e=>!e.value||/^\d+$/.test(e.value),message:(e,s)=>"Stop coordinate must be numeric"}},props:{label:"Stop",description:"Provide the right/second coordinate of this variant. Must be \u2265 the Start coordinate. Coordinate must be compatible with the selected reference build."}},{key:"representativeTranscript",type:"base-input",props:{label:"Representative Transcript",description:"Specify a transcript ID, including version number (e.g. ENST00000348159.4, the canonical transcript defined by Ensembl)."}}]}]},{wrappers:["form-card"],props:{formCardOptions:{title:"Secondary (3') Coordinates",size:"small"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{responsive:{xs:24,md:12,lg:8,xxl:6}}},fieldGroup:[{key:"chromosome2",type:"base-select",props:{label:"Chromosome",options:i.aP,description:"If this variant is a fusion (e.g. BCR-ABL1), specify the chromosome name, coordinates, and representative transcript for the 3-prime partner."}},{key:"start2",type:"base-input",validators:{isNumeric:{expression:e=>!e.value||/^\d+$/.test(e.value),message:(e,s)=>"Start coordinate must be numeric"}},props:{label:"Start",description:"Enter the left/first coordinate of this 3-prime partner fusion variant. Must be \u2264 the Stop coordinate. Coordinate must be compatible with the selected reference build."}},{key:"stop2",type:"base-input",validators:{isNumeric:{expression:e=>!e.value||/^\d+$/.test(e.value),message:(e,s)=>"Stop coordinate must be numeric"}},props:{label:"Stop",description:"Provide the right/second coordinate of this 3-prime partner fusion variant. Must be \u2265 the Start coordinate. Coordinate must be compatible with the selected reference build."}},{key:"representativeTranscript2",type:"base-input",props:{label:"Representative Transcript",description:"Specify a transcript ID, including version number (e.g. ENST00000348159.4, the canonical transcript defined by Ensembl)."}}]}]}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",placeholder:"Please enter a comment describing your revisions.",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Variant Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{name:void 0,aliases:void 0,hgvsDescriptions:void 0,clinvarIds:void 0,variantTypeIds:void 0,referenceBuild:void 0,ensemblVersion:void 0,chromosome:void 0,start:void 0,stop:void 0,representativeTranscript:void 0,chromosome2:void 0,start2:void 0,stop2:void 0,representativeTranscript2:void 0,featureId:void 0,referenceBases:void 0,variantBases:void 0},comment:void 0,organizationId:void 0});let x=e=>"NONE FOUND"==e[0]?{noneFound:!0}:"N/A"==e[0]?{notApplicable:!0}:{ids:e.map(s=>+s)};var l,r=n(9212),_=n(313),T=n(7473),E=n(6814),R=n(3599),G=n(5545),S=n(9928);function M(e,s){if(1&e&&(r._uU(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),r.TgZ(1,"a",4),r._uU(2,"here."),r.qZA()),2&e){const t=r.oxw();r.xp6(),r.s9C("href",t.url,r.LSH)}}const O=()=>({});function B(e,s){if(1&e){const t=r.EpF();r.TgZ(0,"form",5),r.NdJ("ngSubmit",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.onSubmit(a.model))}),r.TgZ(1,"formly-form",6),r.NdJ("modelChange",function(a){r.CHM(t);const D=r.oxw();return r.KtG(D.model=a)}),r.qZA()()}if(2&e){const t=r.oxw();r.Q6J("formGroup",t.form),r.xp6(),r.Q6J("form",t.form)("fields",t.fields)("model",t.model)("options",r.DdM(5,O))}}function w(e,s){1&e&&r._uU(0," Loading Variant... ")}let b=((l=class{constructor(s,t,p,a){this.revisableFieldsGQL=s,this.submitRevisionsGQL=t,this.networkErrorService=p,this.cdr=a,this.form=new d.nJ({}),this.fields=g,this.reviseVariantMutator=new v.U(p)}ngOnInit(){this.url=`/variants/${this.variantId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({variantId:this.variantId}).pipe((0,m.t)(this)).subscribe({next:({data:{variant:s}})=>{var e;s&&"GeneVariant"==s.__typename&&(this.model={id:s.id,fields:(e=s,{name:e.name,aliases:e.variantAliases,hgvsDescriptions:e.hgvsDescriptions,clinvarIds:e.clinvarIds,variantTypeIds:e.variantTypes.map(s=>s.id),referenceBuild:e.referenceBuild,ensemblVersion:e.ensemblVersion,chromosome:e.primaryCoordinates?.chromosome,start:e.primaryCoordinates?.start,stop:e.primaryCoordinates?.stop,representativeTranscript:e.primaryCoordinates?.representativeTranscript,chromosome2:e.secondaryCoordinates?.chromosome,start2:e.secondaryCoordinates?.start,stop2:e.secondaryCoordinates?.stop,representativeTranscript2:e.secondaryCoordinates?.representativeTranscript,featureId:e.feature.id,referenceBases:e.referenceBases,variantBases:e.variantBases})},this.cdr.detectChanges())},error:s=>{console.error("Error retrieving Variant."),console.error(s)},complete:()=>{}})}onSubmit(s){if(!this.variantId)return;let t=function V(e,s){const t=s.fields;if(s.comment&&t.name&&t.featureId)return{id:e,fields:{name:t.name,aliases:t.aliases||[],hgvsDescriptions:t.hgvsDescriptions||[],clinvarIds:x(t.clinvarIds||[]),variantTypeIds:t.variantTypeIds||[],referenceBuild:i.uP(t.referenceBuild),ensemblVersion:i.uP(t.ensemblVersion?+t.ensemblVersion:void 0),primaryCoordinates:{chromosome:t.chromosome,start:t.start?+t.start:void 0,stop:t.stop?+t.stop:void 0,representativeTranscript:t.representativeTranscript},secondaryCoordinates:{chromosome:t.chromosome2,start:t.start2?+t.start2:void 0,stop:t.stop2?+t.stop2:void 0,representativeTranscript:t.representativeTranscript2},featureId:t.featureId,referenceBases:i.xt(t.referenceBases),variantBases:i.xt(t.variantBases)},organizationId:s.organizationId,comment:s.comment}}(this.variantId,s);t&&(this.mutationState=this.reviseVariantMutator.mutate(this.submitRevisionsGQL,{input:t}))}}).\u0275fac=function(s){return new(s||l)(r.Y36(_.g_T),r.Y36(_.Oaf),r.Y36(T.Y),r.Y36(r.sBO))},l.\u0275cmp=r.Xpm({type:l,selectors:[["cvc-gene-variant-revise-form"]],inputs:{variantId:"variantId"},decls:6,vars:5,consts:[["entityType","Variant",3,"redirectUrl","mutationState","successMessage"],["success",""],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["loadingModel",""],[3,"href"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[3,"form","fields","model","options","modelChange"]],template:function(s,t){if(1&s&&(r.TgZ(0,"cvc-form-submission-status-display",0),r.YNc(1,M,3,1,"ng-template",null,1,r.W1O)(3,B,2,6,"form",2)(4,w,1,0,"ng-template",null,3,r.W1O),r.qZA()),2&s){const p=r.MAs(2),a=r.MAs(5);r.Q6J("redirectUrl",t.url)("mutationState",t.mutationState)("successMessage",p),r.xp6(3),r.Q6J("ngIf",t.model)("ngIfElse",a)}},dependencies:[E.O5,R.Lr,d._Y,d.JL,d.sg,G.T7,S.F],encapsulation:2,changeDetection:0}),l);b=(0,f.gn)([(0,m.c)()],b)}}]);