"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[5244],{25128:(j,C,t)=>{t.d(C,{K:()=>v});var l=t(72200),y=t(56506),p=t(73664),u=t(84341),E=t(21011);const R={name:"comment-textarea",component:(()=>{var m;class a extends y.PU{constructor(){super(...arguments),this.defaultOptions={defaultValue:"",validation:{messages:{minlength:(g,d)=>`Comments must be at least ${d.templateOptions?.minLength} characters in length.`}},templateOptions:{rows:4}}}static#e=m=()=>(this.\u0275fac=(()=>{let g;return function(e){return(g||(g=p.xGo(a)))(e||a)}})(),this.\u0275cmp=p.VBU({type:a,selectors:[["comment-textarea-type"]],standalone:!1,features:[p.Vt3],decls:1,vars:2,consts:[["nz-input","",3,"formControl","formlyAttributes"]],template:function(d,e){1&d&&p.nrm(0,"textarea",0),2&d&&p.Y8G("formControl",e.formControl)("formlyAttributes",e.field)},dependencies:[u.me,u.BC,u.l_,y.cU,E.Sy],encapsulation:2,changeDetection:0}))}return m(),a})(),wrappers:["form-field"]};var x=t(38927),h=t(2615);let v=(()=>{var m;class a{static#e=m=()=>(this.\u0275fac=function(d){return new(d||a)},this.\u0275mod=p.$C({type:a}),this.\u0275inj=h.G2t({imports:[l.MD,u.X1,y.qy.forChild({types:[R]}),x.PQ,E.j]}))}return m(),a})()},25244:(j,C,t)=>{t.r(C),t.d(C,{EvidenceReviseModule:()=>xe});var l=t(72200),y=t(13688),p=t(14124),u=t(64917),E=t(25128),I=t(97529),R=t(60996),x=t(41951),h=t(3062),v=t(97685),m=t(7391),a=t(38132),V=t(99172),g=t(96354),d=t(24608),e=t(73664),T=t(69145),b=t(56609),w=t(41305),B=t(5473),U=t(29765),X=t(12261),Y=t(61774),L=t(83075);function N(i,n){if(1&i&&(e.j41(0,"span",12)(1,"strong"),e.EFF(2),e.k0s(),e.EFF(3," Parents:"),e.k0s()),2&i){const s=e.XpG(2).ngIf;e.R7$(2),e.JRh(s.name)}}function A(i,n){if(1&i&&(e.j41(0,"span",13),e.nrm(1,"cvc-molecular-profile-tag",14),e.k0s()),2&i){const s=e.XpG(2).ngIf;e.R7$(),e.Y8G("molecularProfile",s.molecularProfile)("enablePopover",!1)}}function Q(i,n){1&i&&(e.j41(0,"nz-space",9),e.DNE(1,N,4,1,"span",10)(2,A,2,2,"span",11),e.k0s())}function J(i,n){1&i&&(e.j41(0,"div"),e.nrm(1,"router-outlet"),e.k0s())}function Z(i,n){1&i&&(e.j41(0,"nz-row",15)(1,"div",16),e.nrm(2,"cvc-login-prompt"),e.k0s()())}function k(i,n){if(1&i&&(e.qex(0),e.nrm(1,"cvc-section-navigation",3),e.DNE(2,Q,3,0,"ng-template",null,0,e.C5r),e.j41(4,"nz-page-header",4)(5,"nz-page-header-title",5),e.EFF(6," REVISE "),e.nrm(7,"i",6),e.nI1(8,"entityColor"),e.EFF(9),e.k0s(),e.j41(10,"nz-page-header-content")(11,"div",7),e.DNE(12,J,2,0,"div",8),e.nI1(13,"ngrxPush"),e.DNE(14,Z,3,0,"ng-template",null,1,e.C5r),e.k0s()()(),e.bVm()),2&i){const s=n.ngIf,r=e.sdS(3),o=e.sdS(15),c=e.XpG();e.R7$(),e.Y8G("displayName",s.name)("relationsTpl",r),e.R7$(6),e.Y8G("nzTwotoneColor",e.bMT(8,6,"EvidenceItem")),e.R7$(2),e.SpI(" ",s.name," "),e.R7$(3),e.Y8G("ngIf",e.bMT(13,8,c.isSignedIn$))("ngIfElse",o)}}let H=(()=>{var i;class n{constructor(r,o,c){this.gql=r,this.route=o,this.viewerService=c,this.routeSub=this.route.params.subscribe(P=>{let D=this.gql.watch({evidenceId:+P.evidenceId}).valueChanges;this.loading$=D.pipe((0,d.E)("loading"),(0,V.Z)(!0)),this.evidence$=D.pipe((0,d.E)("data","evidenceItem")),this.commentsTotal$=this.evidence$.pipe((0,d.E)("comments","totalCount")),this.flagsTotal$=this.evidence$.pipe((0,d.E)("flags","totalCount")),this.revisionsTotal$=this.evidence$.pipe((0,d.E)("revisions","totalCount"))})}ngOnInit(){this.isSignedIn$=this.viewerService.viewer$.pipe((0,g.T)(r=>r.signedIn))}ngOnDestroy(){this.routeSub.unsubscribe()}static#e=i=()=>(this.\u0275fac=function(o){return new(o||n)(e.rXU(T.fQd),e.rXU(b.nX),e.rXU(w.q))},this.\u0275cmp=e.VBU({type:n,selectors:[["cvc-evidence-revise"]],standalone:!1,decls:2,vars:3,consts:[["evidenceRelations",""],["notSignedIn",""],[4,"ngIf"],[3,"displayName","relationsTpl"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzTheme","twotone","nzType","civic-evidence",3,"nzTwotoneColor"],[1,"content"],[4,"ngIf","ngIfElse"],["nzDirection","horizontal"],["nz-typography","","class","label",4,"nzSpaceItem"],["class","tags",4,"nzSpaceItem"],["nz-typography","",1,"label"],[1,"tags"],[3,"molecularProfile","enablePopover"],["nzSpan","24","nzJustify","center"],["nz-col","","nzSpan","6"]],template:function(o,c){1&o&&(e.DNE(0,k,16,10,"ng-container",2),e.nI1(1,"async")),2&o&&e.Y8G("ngIf",e.bMT(1,1,c.evidence$))},dependencies:[l.bT,b.n3,h.WB,h.k9,h.zR,v.U5,v.Dq,I.Uq,I.e,x.Dn,m.Di,B.z,U.n,X.h,l.Jj,Y.L9,L.R],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}))}return i(),n})();var K=t(25703),W=t(61912),F=t(38927),_=t(50513),q=t(66026),ee=t(70776),te=t(55316),f=t(2615);let ne=(()=>{var i;class n{static#e=i=()=>(this.\u0275fac=function(o){return new(o||n)},this.\u0275mod=e.$C({type:n}),this.\u0275inj=f.G2t({imports:[l.MD,F.PQ,_.Z,q.m,te.P,ee.s]}))}return i(),n})(),ie=(()=>{var i;class n{static#e=i=()=>(this.\u0275fac=function(o){return new(o||n)},this.\u0275mod=e.$C({type:n}),this.\u0275inj=f.G2t({imports:[l.MD,I.f3,K.Ti,W.i3,v.pc,ne]}))}return i(),n})();var oe=t(31635),z=t(84341),se=t(71226),re=t(29447),G=t(45540),O=t(49894);const le=(0,t(87480).A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Evidence Item"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"molecularProfileId",type:"molecular-profile-select",props:{required:!0,tooltip:"A single variant (Simple Molecular Profile) or a combination of variants (Complex Molecular Profile) relevant to the curated evidence.",watchVariantMolecularProfileId:!0}},{key:"sourceId",type:"source-select",props:{required:!0}}]},{wrappers:["form-row"],props:{formRowOptions:{responsive:{xs:24,lg:12,xl:8,xxl:6}}},fieldGroup:[{key:"evidenceType",type:"type-select",props:{required:!0}},{key:"evidenceDirection",type:"direction-select",props:{required:!0}},{key:"significance",type:"significance-select",props:{required:!0}},{key:"diseaseId",type:"disease-select",props:{}},{key:"therapyIds",type:"therapy-multi-select",props:{}},{key:"therapyInteractionType",type:"interaction-select",props:{}},{key:"evidenceLevel",type:"level-select",props:{required:!0}},{key:"rating",type:"rating",props:{required:!0}},{key:"variantOrigin",type:"origin-select",props:{required:!0}},{key:"phenotypeIds",type:"phenotype-multi-select",props:{}}]},{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"description",type:"base-textarea",props:{tooltip:"Your original description of evidence from published literature detailing the association or lack of association between a variant and its predictive, prognostic, diagnostic, predisposing, functional or oncogenic value. ",placeholder:"Enter an Evidence Statement",extraType:"description",description:'Data constituting personal or identifying information should not be entered (e.g. <a href="https://www.hipaajournal.com/what-is-protected-health-information/" target="_blank">protected health information (PHI) as defined by HIPAA</a> in the U.S. and/or comparable laws in your jurisdiction).',label:"Evidence Statement",required:!0,colSpan:24}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"base-textarea",props:{label:"Comment",required:!0,minLength:10}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Evidence Item Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{featureId:void 0,variantId:void 0,significance:void 0,description:void 0,diseaseId:void 0,drugIds:[],therapyInteractionType:void 0,evidenceDirection:void 0,evidenceLevel:void 0,evidenceType:void 0,molecularProfileId:void 0,phenotypeIds:[],rating:void 0,sourceId:void 0,variantOrigin:void 0},comment:void 0,organizationId:void 0});var $,pe=t(17705),me=t(74222),fe=t(56506),ve=t(68721);function ge(i,n){if(1&i&&(e.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or you can view them "),e.j41(1,"a",4),e.EFF(2,"here."),e.k0s()),2&i){const s=e.XpG();e.R7$(),e.Y8G("href",e.mNQ(s.url),e.B4B)}}function ue(i,n){if(1&i){const s=e.RV6();e.j41(0,"form",5),e.bIt("ngSubmit",function(){f.eBV(s);const o=e.XpG();return f.Njj(o.onSubmit(o.model))}),e.j41(1,"formly-form",6),e.bIt("modelChange",function(o){f.eBV(s);const c=e.XpG();return f.Njj(c.model=o)}),e.k0s()()}if(2&i){const s=e.XpG();e.Y8G("formGroup",s.form),e.R7$(),e.Y8G("form",s.form)("fields",s.fields)("model",s.model)("options",s.options)}}function he(i,n){1&i&&e.EFF(0," Loading Evidence Item... ")}let M=(class S{constructor(n,s,r,o){this.revisableFieldsGQL=n,this.submitRevisionsGQL=s,this.networkErrorService=r,this.cdr=o,this.form=new z.J3({}),this.fields=le,this.state=new re.D,this.state.formMode="revise",this.options={formState:this.state},this.reviseEvidenceMutator=new se.E(r)}ngOnInit(){this.url=`/evidence/${this.evidenceId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({evidenceId:this.evidenceId}).pipe((0,O.s)(this)).subscribe({next:({data:{evidenceItem:n}})=>{n&&(this.model={id:n.id,fields:(0,G.LC)(n)},this.cdr.detectChanges())},error:n=>{console.error("Error retrieving evidenceItem."),console.error(n)},complete:()=>{this.state.formReady$.next(!0),console.log("evidence item retrieved.")}})}onSubmit(n){if(!this.evidenceId)return;let s=(0,G.ep)(this.evidenceId,n);s&&(this.mutationState=this.reviseEvidenceMutator.mutate(this.submitRevisionsGQL,{input:s}))}ngOnDestroy(){this.options.formState.onDestroy()}static#e=$=()=>(this.\u0275fac=function(s){return new(s||S)(e.rXU(T.V1_),e.rXU(T.m7j),e.rXU(me.N),e.rXU(pe.gRc))},this.\u0275cmp=e.VBU({type:S,selectors:[["cvc-evidence-revise-form"]],inputs:{evidenceId:"evidenceId"},standalone:!1,decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Evidence Item",3,"mutationState","successMessage","redirectUrl"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(s,r){if(1&s&&(e.j41(0,"cvc-form-submission-status-display",2),e.DNE(1,ge,3,2,"ng-template",null,0,e.C5r)(3,ue,2,5,"form",3)(4,he,1,0,"ng-template",null,1,e.C5r),e.k0s()),2&s){const o=e.sdS(2),c=e.sdS(5);e.Y8G("mutationState",r.mutationState)("successMessage",o)("redirectUrl",r.url),e.R7$(3),e.Y8G("ngIf",r.model)("ngIfElse",c)}},dependencies:[l.bT,F.CA,z.qT,z.cb,z.j4,fe.JA,ve.G],encapsulation:2,changeDetection:0}),this)},$());function ye(i,n){if(1&i&&(e.qex(0),e.nrm(1,"cvc-evidence-revise-form",2),e.bVm()),2&i){const s=e.XpG();e.R7$(),e.Y8G("evidenceId",s.evidenceId)}}function Ie(i,n){1&i&&e.EFF(0,"Loading Evidence...")}M=(0,oe.Cg)([(0,O.d)()],M);const Ce=[{path:"",component:H,data:{breadcrumb:"Revise"},children:[{path:"",redirectTo:"suggest",pathMatch:"full"},{path:"suggest",component:(()=>{var i;class n{constructor(r){this.route=r,this.routeParams$=this.route.params.subscribe(o=>{this.evidenceId=+o.evidenceId})}ngOnDestroy(){this.routeParams$.unsubscribe()}static#e=i=()=>(this.\u0275fac=function(o){return new(o||n)(e.rXU(b.nX))},this.\u0275cmp=e.VBU({type:n,selectors:[["cvc-evidence-suggest"]],standalone:!1,decls:3,vars:2,consts:[["loadingEvidence",""],[4,"ngIf","ngIfElse"],[3,"evidenceId"]],template:function(o,c){if(1&o&&e.DNE(0,ye,2,1,"ng-container",1)(1,Ie,1,0,"ng-template",null,0,e.C5r),2&o){const P=e.sdS(2);e.Y8G("ngIf",c.evidenceId)("ngIfElse",P)}},dependencies:[l.bT,M],encapsulation:2}))}return i(),n})(),data:{breadcrumb:"Suggest Revision"}}]}];let Ee=(()=>{var i;class n{static#e=i=()=>(this.\u0275fac=function(o){return new(o||n)},this.\u0275mod=e.$C({type:n}),this.\u0275inj=f.G2t({imports:[a.iI.forChild(Ce),ie,a.iI]}))}return i(),n})(),xe=(()=>{var i;class n{static#e=i=()=>(this.\u0275fac=function(o){return new(o||n)},this.\u0275mod=e.$C({type:n}),this.\u0275inj=f.G2t({imports:[l.MD,Ee,h.ZJ,v.pc,I.f3,x.Y3,m.kT,v.pc,R.o,u.i,p.C,E.K,y.A]}))}return i(),n})()}}]);