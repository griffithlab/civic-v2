"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[2278],{21653:(D,f,e)=>{e.d(f,{$h:()=>v,Mw:()=>u,fR:()=>t});var c=e(25741);function u(i){return{acmgCodeIds:i.acmgCodes.map(n=>n.id),ampLevel:i.ampLevel,assertionDirection:i.assertionDirection,assertionType:i.assertionType,clingenCodeIds:i.clingenCodes.map(n=>n.id),significance:i.significance,description:i.description,diseaseId:i.disease?.id,therapyIds:i.therapies.map(n=>n.id),therapyInteractionType:i.therapyInteractionType,evidenceItemIds:i.evidenceItems.map(n=>n.id),fdaCompanionTest:i.fdaCompanionTest,fdaRegulatoryApproval:i.regulatoryApproval,molecularProfileId:i.molecularProfile.id,nccnGuidelineId:i.nccnGuideline?.id,nccnGuidelineVersion:i.nccnGuidelineVersion,phenotypeIds:i.phenotypes.map(n=>n.id),summary:i.summary,variantOrigin:i.variantOrigin}}function t(i){const n=i.fields;if(![n.assertionDirection,n.assertionType,n.significance,n.variantOrigin,n.molecularProfileId,i.comment].find(p=>void 0===p))return{fields:{acmgCodeIds:n.acmgCodeIds||[],ampLevel:c.pz(n.ampLevel),assertionDirection:n.assertionDirection,assertionType:n.assertionType,clingenCodeIds:n.clingenCodeIds||[],significance:n.significance,description:c.q2(n.description),diseaseId:c.pz(n.diseaseId),therapyIds:n.therapyIds||[],therapyInteractionType:c.pz(n.therapyInteractionType),evidenceItemIds:n.evidenceItemIds||[],fdaCompanionTest:c.pz(n.fdaCompanionTest),fdaRegulatoryApproval:c.pz(n.fdaRegulatoryApproval),molecularProfileId:n.molecularProfileId,nccnGuidelineId:c.pz(n.nccnGuidelineId),nccnGuidelineVersion:c.q2(n.nccnGuidelineVersion),phenotypeIds:n.phenotypeIds||[],summary:c.q2(n.summary),variantOrigin:n.variantOrigin},organizationId:i.organizationId,comment:i.comment}}function v(i,n){let s=t(n);if(s)return{id:i,comment:s.comment,organizationId:s.organizationId,fields:s.fields}}},35493:(D,f,e)=>{e.d(f,{G:()=>g});var c=e(72200),u=e(38132),t=e(75699),v=e(25703),i=e(37054),n=e(62e3),s=e(41951),p=e(64917),_=e(73664),I=e(48728);let C=(()=>{class E{static#e=this.\u0275fac=function(P){return new(P||E)};static#t=this.\u0275mod=_.$C({type:E});static#n=this.\u0275inj=I.G2t({imports:[c.MD,s.Y3,v.Ti,n.WF,p.i,i.L]})}return E})();var o=e(1236);let g=(()=>{class E{static#e=this.\u0275fac=function(P){return new(P||E)};static#t=this.\u0275mod=_.$C({type:E});static#n=this.\u0275inj=I.G2t({imports:[c.MD,u.iI,s.Y3,t.T,o.MC,C]})}return E})()},39045:(D,f,e)=>{e.d(f,{J:()=>G});var c=e(40505),u=e(1236),t=e(73664),v=e(48728),i=e(72200),n=e(38132),s=e(75699),p=e(41951),_=e(88011),I=e(12387),C=e(83075);const o=(r,y,a)=>({rejected:r,submitted:y,accepted:a});function g(r,y){}function E(r,y){if(1&r&&(t.qex(0),t.j41(1,"a",5),t.DNE(2,g,0,0,"ng-template",6),t.k0s(),t.bVm()),2&r){const a=t.XpG(),l=t.sdS(2);t.R7$(),t.Y8G("routerLink",a.evidence.link),t.R7$(),t.Y8G("ngTemplateOutlet",l)}}function M(r,y){}function O(r,y){if(1&r){const a=t.RV6();t.j41(0,"cvc-evidence-popover",8),t.bIt("contentRendered",function(){v.eBV(a);const m=t.XpG(2);return v.Njj(m.updatePopoverPosition())}),t.k0s()}if(2&r){const a=t.XpG(2);t.Y8G("evidenceId",a.evidence.id)}}function P(r,y){if(1&r&&(t.j41(0,"nz-tag",7),t.DNE(1,M,0,0,"ng-template",6),t.k0s(),t.DNE(2,O,1,1,"ng-template",null,3,t.C5r)),2&r){const a=t.sdS(3),l=t.XpG(),m=t.sdS(6);t.Y8G("ngClass",t.sMw(5,o,"REJECTED"===l.evidence.status,"SUBMITTED"===l.evidence.status,"ACCEPTED"===l.evidence.status))("nzPopoverPlacement",l.popoverPlacement)("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",l.enablePopover?a:void 0),t.R7$(),t.Y8G("ngTemplateOutlet",m)}}function R(r,y){}function A(r,y){if(1&r&&t.DNE(0,R,0,0,"ng-template",6),2&r){t.XpG();const a=t.sdS(2);t.Y8G("ngTemplateOutlet",a)}}function L(r,y){if(1&r&&(t.j41(0,"cvc-icon-badges",9),t.nrm(1,"i",10),t.nI1(2,"entityColor"),t.nI1(3,"entityColor"),t.k0s(),t.EFF(4)),2&r){const a=t.XpG();t.Y8G("flagged",a.evidence.flagged)("entityColor",a.iconColor),t.R7$(),t.Y8G("nzTwotoneColor","REJECTED"===a.evidence.status?t.bMT(2,4,"Rejected"):t.bMT(3,6,"EvidenceItem")),t.R7$(3),t.SpI(" ",a.evidence.name,"\n")}}let G=(()=>{class r{set evidence(a){if(!a)throw new Error("cvc-evidence-tag evidence input requires LinkableEvidence.");this._evidence=a}get evidence(){return this._evidence}constructor(){this.linked=!0,this.enablePopover=!0,this.popoverPlacement="top",this.iconColor=(0,c.P)("EvidenceItem")}idFunction(){return this.evidence.id}updatePopoverPosition(){this.popover&&this.popover.updatePosition()}ngAfterViewInit(){this.popoverList.length>0?this.popover=this.popoverList.first:console.warn("NzPopoverDirective not found in tag view")}static#e=this.\u0275fac=function(l){return new(l||r)};static#t=this.\u0275cmp=t.VBU({type:r,selectors:[["cvc-evidence-tag"]],viewQuery:function(l,m){if(1&l&&t.GBs(u.L_,5),2&l){let d;t.mGM(d=t.lsd())&&(m.popoverList=d)}},inputs:{evidence:"evidence",linked:"linked",enablePopover:"enablePopover",popoverPlacement:"popoverPlacement"},standalone:!1,decls:7,vars:2,consts:[["tag",""],["unlinked",""],["tagContent",""],["popoverContent",""],[4,"ngIf","ngIfElse"],[3,"routerLink"],[3,"ngTemplateOutlet"],["nz-popover","",3,"ngClass","nzPopoverPlacement","nzPopoverMouseEnterDelay","nzPopoverContent"],[3,"contentRendered","evidenceId"],[3,"flagged","entityColor"],["nz-icon","","nzType","civic-evidence","nzTheme","twotone",3,"nzTwotoneColor"]],template:function(l,m){if(1&l&&t.DNE(0,E,3,2,"ng-container",4)(1,P,4,9,"ng-template",null,0,t.C5r)(3,A,1,1,"ng-template",null,1,t.C5r)(5,L,5,8,"ng-template",null,2,t.C5r),2&l){const d=t.sdS(4);t.Y8G("ngIf",m.linked)("ngIfElse",d)}},dependencies:[i.YU,i.bT,i.T3,n.Wk,s.s,u.L_,p.Dn,_.S,I.N,C.R],styles:["[_nghost-%COMP%]     nz-tag.rejected, [_nghost-%COMP%]     nz-tag.submitted, [_nghost-%COMP%]     nz-tag.accepted, [_nghost-%COMP%]     nz-tag.deprecated{border-right-width:2px}[_nghost-%COMP%]     nz-tag.rejected, [_nghost-%COMP%]     nz-tag.deprecated{border-color:#e6e6e6;background-color:#fff;color:#999999d9}[_nghost-%COMP%]     nz-tag.submitted{border-color:#ffe58f}[_nghost-%COMP%]     nz-tag.accepted{border-color:#b7eb8f}[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}return r})()},45847:(D,f,e)=>{e.d(f,{Z:()=>a});var c=e(31635),u=e(84341),t=e(71226),v=e(19974),i=e(49894);const I=(0,e(87480).A)([{wrappers:["form-layout"],props:{showDevPanel:!1},fieldGroup:[{key:"clientMutationId",props:{hidden:!0}},{key:"fields",wrappers:["form-card"],props:{formCardOptions:{title:"Revise Assertion"}},fieldGroup:[{wrappers:["form-row"],props:{formRowOptions:{span:24}},fieldGroup:[{key:"molecularProfileId",type:"molecular-profile-select",props:{required:!0,watchVariantMolecularProfileId:!0}}]},{wrappers:["form-row"],props:{formRowOptions:{responsive:{xs:24,lg:12,xl:8,xxl:6}}},fieldGroup:[{key:"assertionType",type:"type-select",props:{required:!0}},{key:"assertionDirection",type:"direction-select",props:{required:!0}},{key:"significance",type:"significance-select",props:{required:!0}},{key:"diseaseId",type:"disease-select",props:{}},{key:"therapyIds",type:"therapy-multi-select",props:{}},{key:"therapyInteractionType",type:"interaction-select",props:{}},{key:"variantOrigin",type:"origin-select",props:{required:!0}},{key:"phenotypeIds",type:"phenotype-multi-select",props:{}},{key:"ampLevel",type:"amp-category-select",props:{}},{key:"acmgCodeIds",type:"acmg-code-multi-select",props:{}},{key:"clingenCodeIds",type:"clingen-code-multi-select",props:{}},{key:"nccnGuidelineId",type:"nccn-guideline-select",props:{}},{key:"nccnGuidelineVersion",type:"nccn-guideline-version-input",props:{}},{key:"fdaRegulatoryApproval",type:"fda-regulatory-approval-checkbox",props:{}},{key:"fdaCompanionTest",type:"fda-companion-test-checkbox",props:{}}]},{wrappers:["form-row"],props:{formRowOptions:{responsiveIndexed:[{xs:24},{md:24,lg:8},{md:24,lg:16}]}},fieldGroup:[{key:"evidenceItemIds",type:"evidence-multi-select",props:{required:!0,isMultiSelect:!0}},{key:"summary",type:"base-textarea",props:{tooltip:"A short, one sentence summary of the Assertion",placeholder:"Enter an Assertion Summary",label:"Assertion Summary",required:!0}},{key:"description",type:"base-textarea",props:{tooltip:"A complete, original description of this Assertion. Limited to one paragraph.",placeholder:"Enter an Assertion Statement",label:"Assertion Statement",required:!0,rows:5}}]}]},{wrappers:["form-row"],props:{formRowOptions:{spanIndexed:[24,12,12]}},fieldGroup:[{key:"comment",type:"textarea",props:{label:"Comment",required:!0}},{type:"cvc-cancel-button"},{key:"organizationId",type:"org-submit-button",props:{submitLabel:"Submit Revisions",align:"right"}}]}]}],{id:void 0,clientMutationId:void 0,fields:{molecularProfileId:void 0,acmgCodeIds:[],ampLevel:void 0,assertionDirection:void 0,assertionType:void 0,clingenCodeIds:[],significance:void 0,description:void 0,diseaseId:void 0,therapyIds:[],therapyInteractionType:void 0,evidenceItemIds:[],fdaCompanionTest:void 0,fdaRegulatoryApproval:void 0,nccnGuidelineId:void 0,nccnGuidelineVersion:void 0,phenotypeIds:[],summary:void 0,variantOrigin:void 0},comment:void 0,organizationId:void 0});var C=e(21653),o=e(73664),g=e(48728),E=e(17705),M=e(69145),O=e(74222),P=e(72200),R=e(38927),A=e(56506),L=e(68721);function G(l,m){if(1&l&&(o.EFF(0," Revision(s) submitted! You will be redirected to the Revisions page or can view them "),o.j41(1,"a",4),o.EFF(2,"here."),o.k0s()),2&l){const d=o.XpG();o.R7$(),o.Y8G("href",o.mNQ(d.url),o.B4B)}}function r(l,m){if(1&l){const d=o.RV6();o.j41(0,"form",5),o.bIt("ngSubmit",function(){g.eBV(d);const T=o.XpG();return g.Njj(T.onSubmit(T.model))}),o.j41(1,"formly-form",6),o.bIt("modelChange",function(T){g.eBV(d);const z=o.XpG();return g.Njj(z.model=T)}),o.k0s()()}if(2&l){const d=o.XpG();o.Y8G("formGroup",d.form),o.R7$(),o.Y8G("form",d.form)("fields",d.fields)("model",d.model)("options",d.options)}}function y(l,m){1&l&&o.EFF(0," Loading Assertion... ")}let a=class U{constructor(m,d,h,T){this.revisableFieldsGQL=m,this.submitRevisionsGQL=d,this.networkErrorService=h,this.cdr=T,this.form=new u.J3({}),this.fields=I,this.state=new v.o,this.state.formMode="revise",this.options={formState:this.state},this.reviseAssertionMutator=new t.E(h)}onSubmit(m){if(!this.assertionId)return;let d=(0,C.$h)(this.assertionId,m);d&&(this.mutationState=this.reviseAssertionMutator.mutate(this.submitRevisionsGQL,{input:d}))}ngOnInit(){this.url=`/assertions/${this.assertionId}/revisions`}ngAfterViewInit(){this.revisableFieldsGQL.fetch({assertionId:this.assertionId}).pipe((0,i.s)(this)).subscribe({next:({data:{assertion:m}})=>{m&&(this.model={id:m.id,fields:(0,C.Mw)(m)},this.cdr.detectChanges())},error:m=>{console.log("Error retrieving Assertion"),console.log(m)},complete:()=>{this.state.formReady$.next(!0)}})}ngOnDestroy(){this.options.formState.onDestroy()}static#e=this.\u0275fac=function(d){return new(d||U)(o.rXU(M.VV8),o.rXU(M.wkS),o.rXU(O.N),o.rXU(E.gRc))};static#t=this.\u0275cmp=o.VBU({type:U,selectors:[["cvc-assertion-revise-form"]],inputs:{assertionId:"assertionId"},standalone:!1,decls:6,vars:5,consts:[["success",""],["loadingModel",""],["entityType","Evidence Item",3,"mutationState","successMessage","redirectUrl"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"href"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],[3,"modelChange","form","fields","model","options"]],template:function(d,h){if(1&d&&(o.j41(0,"cvc-form-submission-status-display",2),o.DNE(1,G,3,2,"ng-template",null,0,o.C5r)(3,r,2,5,"form",3)(4,y,1,0,"ng-template",null,1,o.C5r),o.k0s()),2&d){const T=o.sdS(2),z=o.sdS(5);o.Y8G("mutationState",h.mutationState)("successMessage",T)("redirectUrl",h.url),o.R7$(3),o.Y8G("ngIf",h.model)("ngIfElse",z)}},dependencies:[P.bT,R.CA,u.qT,u.cb,u.j4,A.JA,L.G],encapsulation:2,changeDetection:0})};a=(0,c.Cg)([(0,i.d)()],a)},86936:(D,f,e)=>{e.d(f,{G:()=>o});var c=e(72200),u=e(38132),t=e(75699),v=e(1236),i=e(41951),n=e(54666),s=e(64917),p=e(53146),_=e(34994),I=e(73664),C=e(48728);let o=(()=>{class g{static#e=this.\u0275fac=function(O){return new(O||g)};static#t=this.\u0275mod=I.$C({type:g});static#n=this.\u0275inj=C.G2t({imports:[c.MD,u.iI,p.W2,t.T,v.MC,i.Y3,n.v,s.i,_.a]})}return g})()},87480:(D,f,e)=>{function c(u,t){const v=(n,s)=>{let p;for(let _ of n)if(_.fieldGroup)p=v(_.fieldGroup,s);else if(_.key===s){p=_;break}return p},i=(n,s)=>{for(let p of Object.keys(s))if(s[p]instanceof Object&&!Array.isArray(s[p]))i(n,s[p]);else{const _=v(n,p);_&&(_.defaultValue=s[p])}return n};return i(u,t)}e.d(f,{A:()=>c})},89374:(D,f,e)=>{e.d(f,{r:()=>E});var c=e(72200),u=e(22142),t=e(75699),v=e(1236),i=e(824),n=e(98920),s=e(87051),p=e(89802),_=e(35493),I=e(56912),C=e(47086),o=e(73664),g=e(48728);let E=(()=>{class M{static#e=this.\u0275fac=function(R){return new(R||M)};static#t=this.\u0275mod=o.$C({type:M});static#n=this.\u0275inj=g.G2t({imports:[c.MD,t.T,v.MC,u.x,p._,i.J,n.U,I.l,s.U,_.G,C.C]})}return M})()},92090:(D,f,e)=>{e.d(f,{B:()=>p});var c=e(72200),u=e(38927),t=e(50513),v=e(68553),i=e(55316),n=e(73664),s=e(48728);let p=(()=>{class _{static#e=this.\u0275fac=function(o){return new(o||_)};static#t=this.\u0275mod=n.$C({type:_});static#n=this.\u0275inj=s.G2t({imports:[c.MD,u.PQ,t.Z,v.m,i.P]})}return _})()}}]);