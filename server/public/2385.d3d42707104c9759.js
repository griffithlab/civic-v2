"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[2385],{22385:(H,R,i)=>{i.d(R,{p:()=>X});var m=i(72200),E=i(69543),D=i(61774),g=i(25703),p=i(41951),x=i(38927),f=i(84341),T=i(17481),C=i(97529),y=i(1997),v=i(42172),h=i(50513),n=i(64917),r=i(97685),z=i(72968),M=i(29438),P=i(11672),I=i(1177),O=i(53146),F=i(35154),a=i(73664),G=i(48728),u=i(16389),$=i(25930),S=i(27120),A=i(68573),c=i(69145);let j=(()=>{class _{transform(t){switch(t){case c.H1z.Commented:case c.H1z.CommentDeleted:return"civic-comment";case c.H1z.RevisionSuggested:case c.H1z.RevisionAccepted:case c.H1z.RevisionRejected:case c.H1z.RevisionSuperseded:return"civic-revision";case c.H1z.Flagged:case c.H1z.FlagResolved:return"civic-flag";case c.H1z.AssertionSubmitted:case c.H1z.AssertionAccepted:case c.H1z.AssertionRejected:return"civic-assertion";case c.H1z.Submitted:case c.H1z.Accepted:case c.H1z.Rejected:return"civic-evidence";case c.H1z.PublicationSuggested:case c.H1z.CuratedSourceSuggestion:case c.H1z.RejectedSourceSuggestion:case c.H1z.RequeuedSourceSuggestion:return"file-add";case c.H1z.Reverted:return"civic-evidence";case c.H1z.AssertionReverted:return"civic-assertion";case c.H1z.DeprecatedVariant:return"civic-variant";case c.H1z.DeprecatedFeature:case c.H1z.FeatureCreated:return"civic-feature";case c.H1z.DeprecatedMolecularProfile:case c.H1z.ComplexMolecularProfileCreated:return"civic-molecularprofile";case c.H1z.VariantCreated:return"civic-variant";default:return t}}static#n=this.\u0275fac=function(e){return new(e||_)};static#t=this.\u0275pipe=a.EJ8({name:"iconNameForEventAction",type:_,pure:!0,standalone:!1})}return _})();function L(_,o){if(1&_&&(a.nrm(0,"i",6),a.nI1(1,"iconNameForEventAction")),2&_){const t=a.XpG(2).$implicit;a.Y8G("nzType",a.bMT(1,1,t.action))}}function B(_,o){if(1&_&&(a.j41(0,"nz-timeline-item",4),a.DNE(1,L,2,3,"ng-template",null,0,a.C5r),a.nrm(3,"cvc-event-timeline-item",5),a.k0s()),2&_){const t=a.sdS(2),e=a.XpG().$implicit,s=a.XpG(2);a.Y8G("nzDot",t),a.R7$(3),a.Y8G("event",e)("tagDisplay",s.tagDisplay)}}function N(_,o){if(1&_&&(a.qex(0),a.DNE(1,B,4,3,"nz-timeline-item",3),a.bVm()),2&_){const t=o.$implicit;a.R7$(),a.Y8G("ngIf",t)}}function U(_,o){if(1&_&&(a.j41(0,"nz-timeline"),a.DNE(1,N,2,1,"ng-container",2),a.k0s()),2&_){const t=a.XpG();a.R7$(),a.Y8G("ngForOf",t.events)}}let K=(()=>{class _{constructor(){this.tagDisplay="displayAll"}ngOnInit(){if(void 0===this.events)throw new Error("cvc-feed-item component requires array of EventFeedNodeFragment input.")}static#n=this.\u0275fac=function(e){return new(e||_)};static#t=this.\u0275cmp=a.VBU({type:_,selectors:[["cvc-event-timeline"]],inputs:{events:"events",tagDisplay:"tagDisplay"},standalone:!1,decls:1,vars:1,consts:[["timelineDotTemplate",""],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"nzDot",4,"ngIf"],[3,"nzDot"],[3,"event","tagDisplay"],["nz-icon","","nzTheme","twotone",1,"item-icon",3,"nzType"]],template:function(e,s){1&e&&a.DNE(0,U,2,1,"nz-timeline",1),2&e&&a.Y8G("ngIf",null==s.events?null:s.events.length)},dependencies:[m.Sq,m.bT,u.c,p.Dn,S.SO,S.XJ,A.O,j],styles:["[_nghost-%COMP%]{display:block}.item-icon[_ngcontent-%COMP%]{font-size:18px}.timeline-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .timeline-item[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{margin-top:2px}.timeline-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-left:4px}nz-timeline[_ngcontent-%COMP%]     ul li:last-child{padding-bottom:0}nz-timeline[_ngcontent-%COMP%]     ul li:last-child .ant-timeline-item-content{min-height:0;padding-bottom:8px}.timestamp[_ngcontent-%COMP%]{text-align:right}.comment-title[_ngcontent-%COMP%]{padding-right:24px}.comment-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400}.comment-card[_ngcontent-%COMP%]{width:100%}"]})}return _})();var W=i(9365),Y=i(27793);let X=(()=>{class _{static#n=this.\u0275fac=function(e){return new(e||_)};static#t=this.\u0275mod=a.$C({type:_});static#e=this.\u0275inj=G.G2t({imports:[m.MD,f.YN,h.Z,g.Ti,p.Y3,x.PQ,y.DH,T.$,C.f3,r.pc,P._v,M.Yb,I.V,O.W2,F.Qt,v.a,n.i,z.K,n.i]})}return _})();a.wjB(E.e,[m.bT,f.BC,f.vS,D.Nj,h.a,u.c,$.p,g.cK,C.Uq,C.e,T.u,r.U5,r.Dq,P.RW,M.PM,I.a,O.dz,F.LH,K,W.T],[m.Pc,D.L9,Y.s])},42172:(H,R,i)=>{i.d(R,{a:()=>G});var m=i(72200),E=i(41951),D=i(22839),g=i(7391),p=i(64917),x=i(89238),f=i(69269),T=i(93988),C=i(86936),y=i(87051),v=i(98920),h=i(35154),n=i(27120),r=i(97529),z=i(24415),M=i(50513),P=i(51209),I=i(65023),O=i(56912),F=i(73664),a=i(48728);let G=(()=>{class u{static#n=this.\u0275fac=function(A){return new(A||u)};static#t=this.\u0275mod=F.$C({type:u});static#e=this.\u0275inj=a.G2t({imports:[m.MD,M.Z,E.Y3,h.Qt,g.kT,n.ki,r.f3,z.O,D.m,p.i,x.e,f.P,O.l,T.e,C.G,y.U,v.U,P.k,I.J]})}return u})()},69543:(H,R,i)=>{i.d(R,{e:()=>_});var m=i(31635),E=i(69145),D=i(21413),g=i(5964),p=i(96354),x=i(56977),f=i(89085),T=i(23294),C=i(96697),y=i(45312),v=i(69199),h=i(49894),n=i(73664),r=i(48728);const z=()=>[];function M(o,t){if(1&o&&(n.qex(0),n.nrm(1,"cvc-event-timeline",15),n.bVm()),2&o){const e=n.XpG().ngIf,s=n.XpG(3);n.R7$(),n.Y8G("events",e)("tagDisplay",s.tagDisplay)}}function P(o,t){if(1&o){const e=n.RV6();n.j41(0,"div",17)(1,"button",18),n.bIt("click",function(){r.eBV(e);const l=n.XpG().ngIf,d=n.XpG(4);return r.Njj(d.fetchMore(l.endCursor))}),n.EFF(2," Load More "),n.k0s()()}}function I(o,t){if(1&o&&(n.qex(0),n.DNE(1,P,3,0,"div",16),n.bVm()),2&o){const e=t.ngIf;n.R7$(),n.Y8G("ngIf",e.hasNextPage&&e.endCursor)}}function O(o,t){if(1&o&&(n.qex(0),n.j41(1,"nz-row",6)(2,"nz-col",14),n.DNE(3,M,2,2,"ng-container",5)(4,I,2,1,"ng-container",13),n.nI1(5,"ngrxPush"),n.k0s()(),n.bVm()),2&o){const e=t.ngIf,s=n.XpG(3),l=n.sdS(5);n.R7$(),n.Y8G("nzGutter",16),n.R7$(2),n.Y8G("ngIf",e.length)("ngIfElse",l),n.R7$(),n.Y8G("ngIf",n.bMT(5,4,s.pageInfo$))}}function F(o,t){if(1&o){const e=n.RV6();n.j41(0,"nz-badge",21)(1,"button",22),n.bIt("click",function(){r.eBV(e);const l=n.XpG(6);return r.Njj(l.refresh())}),n.EFF(2," New Event(s) "),n.k0s()()}if(2&o){const e=n.XpG().ngrxLet,s=n.XpG(5);n.Y8G("nzCount",e-s.originalEventCount)}}function a(o,t){if(1&o&&(n.qex(0),n.DNE(1,F,3,1,"nz-badge",20),n.bVm()),2&o){const e=t.ngrxLet,s=n.XpG(5);n.R7$(),n.Y8G("ngIf",e&&e>s.originalEventCount)}}function G(o,t){if(1&o&&(n.qex(0),n.DNE(1,a,2,1,"ng-container",19),n.bVm()),2&o){const e=n.XpG(4);n.R7$(),n.Y8G("ngrxLet",e.newEventCount$)}}function u(o,t){if(1&o&&n.DNE(0,G,2,1,"ng-container",13),2&o){const e=n.XpG(3);n.Y8G("ngIf",e.pollForNewEvents&&e.originalEventCount)}}function $(o,t){if(1&o&&(n.j41(0,"nz-card",12),n.DNE(1,O,6,6,"ng-container",13),n.nI1(2,"ngrxPush"),n.DNE(3,u,1,1,"ng-template",null,1,n.C5r),n.k0s()),2&o){const e=n.sdS(4),s=n.XpG(2);n.Y8G("nzTitle",s.showFilters?"Events":void 0)("nzExtra",e),n.R7$(),n.Y8G("ngIf",n.bMT(2,3,s.events$))}}function S(o,t){if(1&o){const e=n.RV6();n.j41(0,"span"),n.EFF(1," Show Child Events "),n.j41(2,"nz-switch",24),n.mxI("ngModelChange",function(l){r.eBV(e);const d=n.XpG(3);return n.DH7(d.showChildren,l)||(d.showChildren=l),r.Njj(l)}),n.bIt("ngModelChange",function(){r.eBV(e);const l=n.XpG(3);return r.Njj(l.onShowChildrenToggle())}),n.k0s()()}if(2&o){const e=n.XpG(3);n.R7$(2),n.R50("ngModel",e.showChildren)}}function A(o,t){1&o&&(n.EFF(0),n.nI1(1,"eventVerbiage")),2&o&&n.SpI(" ",n.i5U(1,1,t.$implicit.id,"action-filter")," ")}function c(o,t){if(1&o&&n.nrm(0,"nz-avatar",30),2&o){const e=n.XpG().$implicit;n.Y8G("nzSrc",e.profileImagePath)}}function j(o,t){if(1&o&&(n.nrm(0,"nz-avatar",31),n.nI1(1,"uppercase")),2&o){const e=n.XpG().$implicit;n.Y8G("nzText",n.bMT(1,1,e.displayName.charAt(0)))}}function L(o,t){if(1&o&&(n.DNE(0,c,1,1,"nz-avatar",29)(1,j,2,3,"ng-template",null,3,n.C5r),n.j41(3,"span"),n.EFF(4),n.k0s()),2&o){const e=t.$implicit,s=n.sdS(2);n.Y8G("ngIf",e.profileImagePath)("ngIfElse",s),n.R7$(4),n.JRh(e.displayName)}}function B(o,t){if(1&o){const e=n.RV6();n.j41(0,"cvc-participant-list",28),n.nI1(1,"ngrxPush"),n.bIt("participantSelectedEvent",function(l){r.eBV(e);const d=n.XpG(4);return r.Njj(d.onOriginatingUserSelected(l))}),n.DNE(2,L,5,3,"ng-template",null,2,n.C5r),n.k0s()}if(2&o){const e=n.XpG(4);n.Y8G("participantList",n.bMT(1,1,e.participants$)||n.lJ4(3,z))}}function N(o,t){if(1&o&&(n.j41(0,"nz-col"),n.EFF(1),n.k0s()),2&o){const e=t.$implicit;n.R7$(),n.SpI(" ",e.name," ")}}function U(o,t){if(1&o){const e=n.RV6();n.j41(0,"cvc-participant-list",32),n.nI1(1,"ngrxPush"),n.bIt("participantSelectedEvent",function(l){r.eBV(e);const d=n.XpG(4);return r.Njj(d.onOrganizationSelected(l))}),n.DNE(2,N,2,1,"ng-template",null,2,n.C5r),n.k0s()}if(2&o){const e=n.XpG(4);n.Y8G("participantList",n.bMT(1,1,e.organizations$)||n.lJ4(3,z))}}function K(o,t){if(1&o){const e=n.RV6();n.qex(0),n.j41(1,"cvc-participant-list",25),n.nI1(2,"ngrxPush"),n.bIt("participantSelectedEvent",function(l){r.eBV(e);const d=n.XpG(3);return r.Njj(d.onActionSelected(l))}),n.DNE(3,A,2,4,"ng-template",null,2,n.C5r),n.k0s(),n.DNE(5,B,4,4,"cvc-participant-list",26)(6,U,4,4,"cvc-participant-list",27),n.bVm()}if(2&o){const e=n.XpG(3);n.R7$(),n.Y8G("participantList",n.bMT(2,3,e.actions$)||n.lJ4(5,z)),n.R7$(4),n.Y8G("ngIf",!e.userId),n.R7$(),n.Y8G("ngIf",!e.organizationId)}}function W(o,t){1&o&&(n.j41(0,"nz-space",8),n.DNE(1,S,3,1,"span",23)(2,K,7,6,"ng-container",23),n.k0s())}function Y(o,t){if(1&o&&(n.qex(0),n.j41(1,"nz-row",6)(2,"nz-col",7)(3,"nz-space",8),n.DNE(4,$,5,5,"nz-card",9),n.k0s()(),n.j41(5,"nz-col",10),n.DNE(6,W,3,0,"nz-space",11),n.k0s()(),n.bVm()),2&o){const e=n.XpG();n.R7$(),n.Y8G("nzGutter",16),n.R7$(),n.Y8G("nzSpan",e.showFilters?"18":"24"),n.R7$(4),n.Y8G("ngIf",e.showFilters)}}function X(o,t){1&o&&n.nrm(0,"nz-empty",33)}let _=class V{constructor(t,e){this.gql=t,this.eventCountGql=e,this.tagDisplay="displayAll",this.mode=E.Qt1.Subject,this.showFilters=!0,this.pageSize=15,this.pollForNewEvents=!0,this.includeAutomatedEvents=!0,this.destroy$=new D.B,this.showChildren=!1}ngOnInit(){this.initialQueryVars={subject:this.subscribable,organizationId:this.organizationId,originatingUserId:this.userId,first:this.pageSize,mode:this.mode,showFilters:this.showFilters,includeAutomatedEvents:this.includeAutomatedEvents},this.queryRef=this.gql.watch(this.initialQueryVars),this.pollForNewEvents&&y.c.production&&(this.newEventCount$=this.eventCountGql.watch(this.initialQueryVars,{fetchPolicy:"no-cache",pollInterval:3e4}).valueChanges.pipe((0,g.p)(v.kP),(0,p.T)(({data:t})=>t?.events?.unfilteredCount),(0,x.Q)(this.destroy$))),this.results$=this.queryRef.valueChanges,this.pageInfo$=this.results$.pipe((0,p.T)(({data:t})=>t.events.pageInfo)),this.events$=this.results$.pipe((0,f.E)("data","events","edges"),(0,g.p)(v.kP),(0,p.T)(t=>t.map(e=>e.node))),this.loading$=this.results$.pipe((0,p.T)(({loading:t})=>t),(0,T.F)()),this.unfilteredCount$=this.results$.pipe((0,p.T)(t=>t.data),(0,g.p)(v.kP),(0,p.T)(({events:t})=>t.unfilteredCount)),this.unfilteredCount$.pipe((0,C.s)(1),(0,h.s)(this)).subscribe(t=>this.originalEventCount=t),this.showFilters&&(this.participants$=this.results$.pipe((0,g.p)(v.kP),(0,p.T)(({data:t})=>t.events.uniqueParticipants)),this.organizations$=this.results$.pipe((0,g.p)(v.kP),(0,p.T)(({data:t})=>t.events.participatingOrganizations)),this.actions$=this.results$.pipe((0,g.p)(v.kP),(0,p.T)(({data:t})=>t.events?.eventTypes?.map(e=>({id:e}))||[])))}fetchMore(t){this.queryRef.fetchMore({variables:{first:this.pageSize,after:t}})}onOrganizationSelected(t){this.queryRef.refetch({organizationId:t?.id,showFilters:this.showFilters})}onActionSelected(t){this.queryRef.refetch({eventType:t?t.id:void 0,showFilters:this.showFilters})}onOriginatingUserSelected(t){this.queryRef.refetch({originatingUserId:t?.id,showFilters:this.showFilters})}refresh(){this.queryRef.refetch().then(({data:t})=>{this.originalEventCount=t.events.unfilteredCount})}onShowChildrenToggle(){let t;this.subscribable?(t={id:this.subscribable.id,entityType:this.subscribable.entityType,includeChildren:this.showChildren},this.tagDisplay=this.showChildren?"displayAll":"hideSubject"):t=void 0,this.queryRef.refetch({...this.initialQueryVars,subject:t,showFilters:this.showFilters})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}static#n=this.\u0275fac=function(e){return new(e||V)(n.rXU(E.XxZ),n.rXU(E.Ei5))};static#t=this.\u0275cmp=n.VBU({type:V,selectors:[["cvc-event-feed"]],inputs:{subscribable:"subscribable",subscribableName:"subscribableName",organizationId:"organizationId",userId:"userId",tagDisplay:"tagDisplay",mode:"mode",showFilters:"showFilters",pageSize:"pageSize",pollForNewEvents:"pollForNewEvents",includeAutomatedEvents:"includeAutomatedEvents"},standalone:!1,decls:6,vars:7,consts:[["noEvents",""],["refreshFeed",""],["itemTemplate",""],["noAvatar",""],["nzTip","Loading",3,"nzSpinning"],[4,"ngIf","ngIfElse"],[3,"nzGutter"],[3,"nzSpan"],["nzDirection","vertical",2,"width","100%"],[3,"nzTitle","nzExtra",4,"nzSpaceItem"],["nzSpan","6"],["nzDirection","vertical","style","width: 100%",4,"ngIf"],[3,"nzTitle","nzExtra"],[4,"ngIf"],["nzSpan","24",1,"timeline"],[3,"events","tagDisplay"],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","default","nzSize","small","nzBlock","",3,"click"],[4,"ngrxLet"],[3,"nzCount",4,"ngIf"],[3,"nzCount"],["nz-button","","nz-tooltip","Click to Refresh",3,"click"],[4,"nzSpaceItem"],["nzSize","small",3,"ngModelChange","ngModel"],["listTitle","Action",3,"participantSelectedEvent","participantList"],["listTitle","Curator",3,"participantList","participantSelectedEvent",4,"ngIf"],["listTitle","Organization",3,"participantList","participantSelectedEvent",4,"ngIf"],["listTitle","Curator",3,"participantSelectedEvent","participantList"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["listTitle","Organization",3,"participantSelectedEvent","participantList"],["nzNotFoundImage","simple","nzNotFoundContent","No Events"]],template:function(e,s){if(1&e&&(n.j41(0,"nz-spin",4),n.nI1(1,"ngrxPush"),n.DNE(2,Y,7,3,"ng-container",5),n.nI1(3,"ngrxPush"),n.DNE(4,X,1,0,"ng-template",null,0,n.C5r),n.k0s()),2&e){const l=n.sdS(5);n.Y8G("nzSpinning",n.bMT(1,3,s.loading$)),n.R7$(2),n.Y8G("ngIf",n.bMT(3,5,s.unfilteredCount$))("ngIfElse",l)}},styles:["[_nghost-%COMP%]{display:block}.timeline[_ngcontent-%COMP%]{padding-top:6px;padding-left:6px}#event-filters[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]:last-child{margin-right:0}#event-filters[_ngcontent-%COMP%]   #participant-filter[_ngcontent-%COMP%]{width:200px}#event-filters[_ngcontent-%COMP%]   #organization-filter[_ngcontent-%COMP%]{width:250px}"]})};_=(0,m.Cg)([(0,h.d)()],_)}}]);