"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[4355],{7036:(w,M,o)=>{o.d(M,{L:()=>pn});var r=o(7630),c=o(9300),L=o(4004),h=o(6579),n=o(3240),t=o(4650),d=o(6895),y=o(2635),O=o(6616),R=o(7044),F=o(1664),b=o(3679),I=o(6123),N=o(7579),E=o(2722),Q=o(9350),Z=o(9169),f=o(4006),u=o(6704),v=o(1971),J=o(9597),P=o(7570),K=o(5681),$=o(1793),B=o(8227),z=o(9180),C=o(9383),A=o(2338);function Y(_,l){if(1&_){const a=t.EpF();t.TgZ(0,"nz-alert",8),t.NdJ("nzOnClose",function(){t.CHM(a);const x=t.oxw();return t.KtG(x.onSuccessBannerClose())}),t.qZA()}}function q(_,l){if(1&_&&t._UZ(0,"nz-alert",9),2&_){t.oxw();const a=t.MAs(4);t.Q6J("nzDescription",a)}}function nn(_,l){if(1&_&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&_){const a=l.$implicit;t.xp6(1),t.Oqu(a)}}function tn(_,l){if(1&_&&(t.TgZ(0,"ul"),t.YNc(1,nn,2,1,"li",10),t.qZA()),2&_){const a=t.oxw();t.xp6(1),t.Q6J("ngForOf",a.errorMessages)}}function en(_,l){}function V(_,l){1&_&&t.YNc(0,en,0,0,"ng-template")}function on(_,l){if(1&_&&(t.ynx(0),t.YNc(1,V,1,0,null,15),t.BQk()),2&_){t.oxw();const a=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",a)}}function j(_,l){}function sn(_,l){1&_&&t.YNc(0,j,0,0,"ng-template")}function an(_,l){if(1&_&&(t.TgZ(0,"span",16),t.YNc(1,sn,1,0,null,15),t.qZA()),2&_){t.oxw();const a=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",a)}}function W(_,l){if(1&_&&(t.TgZ(0,"button",17),t._uU(1),t.ALo(2,"enumToTitle"),t.qZA()),2&_){const a=t.oxw().ngrxLet,m=t.oxw();t.Q6J("disabled",!(void 0!==m.comment&&m.comment.length>=10&&a.signedIn)),t.xp6(1),t.hij(" Flag ",t.lcZ(2,2,m.flaggable.entityType)," ")}}function G(_,l){if(1&_){const a=t.EpF();t.ynx(0),t.TgZ(1,"cvc-form-buttons")(2,"cvc-org-selector-btn-group",11),t.NdJ("selectedOrgChange",function(x){t.CHM(a);const S=t.oxw();return t.KtG(S.onOrgSelected(x))}),t.YNc(3,on,2,1,"ng-container",12),t.YNc(4,an,2,1,"ng-template",null,13,t.W1O),t.YNc(6,W,3,4,"ng-template",null,14,t.W1O),t.qZA()(),t.BQk()}if(2&_){const a=l.ngrxLet,m=t.MAs(5);t.xp6(3),t.Q6J("ngIf",a.signedIn)("ngIfElse",m)}}class U{constructor(l,a,m){this.gql=l,this.viewerService=a,this.networkErrorService=m,this.errorMessages=[],this.success=!1,this.loading=!1,this.comment="",this.destroy$=new N.x,this.addFlagMutator=new I.U(m),this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(x=>{this.selectedOrg=x.mostRecentOrg})}ngOnInit(){if(void 0===this.flaggable)throw new Error("Must pass a flagggable into flag add component")}onOrgSelected(l){this.selectedOrg=l}submitFlag(){this.errorMessages=[];let a=this.addFlagMutator.mutate(this.gql,{input:{comment:this.comment,subject:this.flaggable,organizationId:this.selectedOrg?.id}});a.submitSuccess$.pipe((0,E.R)(this.destroy$)).subscribe(m=>{m&&(this.flagAddedCallback&&this.flagAddedCallback(),this.success=!0,this.comment="")}),a.submitError$.pipe((0,E.R)(this.destroy$)).subscribe(m=>{m.length>0&&(this.errorMessages=m)}),a.isSubmitting$.pipe((0,E.R)(this.destroy$)).subscribe(m=>{this.loading=m})}onSuccessBannerClose(){this.success=!1}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}U.\u0275fac=function(l){return new(l||U)(t.Y36(r.B0s),t.Y36(Q.a),t.Y36(Z.Y))},U.\u0275cmp=t.Xpm({type:U,selectors:[["cvc-flag-add-form"]],inputs:{flaggable:"flaggable",flagAddedCallback:"flagAddedCallback"},decls:11,vars:5,consts:[["nzType","inner"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription",4,"ngIf"],["errorContents",""],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[4,"ngrxLet"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription"],[4,"ngFor","ngForOf"],[3,"selectedOrgChange"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to flag entity."],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"]],template:function(l,a){1&l&&(t.TgZ(0,"nz-card",0),t.YNc(1,Y,1,0,"nz-alert",1),t.YNc(2,q,1,1,"nz-alert",2),t.YNc(3,tn,2,1,"ng-template",null,3,t.W1O),t.TgZ(5,"form",4),t.NdJ("ngSubmit",function(){return a.submitFlag()}),t.TgZ(6,"cvc-comment-input-form",5),t.NdJ("commentChange",function(x){return a.comment=x}),t.qZA(),t.TgZ(7,"nz-spin",6)(8,"nz-form-item")(9,"nz-form-control"),t.YNc(10,G,8,2,"ng-container",7),t.qZA()()()()()),2&l&&(t.xp6(1),t.Q6J("ngIf",a.success),t.xp6(1),t.Q6J("ngIf",a.errorMessages.length>0),t.xp6(4),t.Q6J("comment",a.comment),t.xp6(1),t.Q6J("nzSpinning",a.loading),t.xp6(3),t.Q6J("ngrxLet",a.viewer$))},dependencies:[d.sg,d.O5,d.tP,f._Y,f.JL,f.F,y.eJ,b.t3,b.SK,u.Lr,u.Nx,u.Fd,O.ix,R.w,F.dQ,v.bd,J.r,P.SY,K.W,$.m,B.q,z.Z,C.b,A.I],encapsulation:2});var D=o(6903),H=o(8823),vn=o(4788),zn=o(2577),dn=o(1102),Cn=o(125),xn=o(4590),Tn=o(6581);function hn(_,l){if(1&_){const a=t.EpF();t.TgZ(0,"nz-alert",4),t.NdJ("nzOnClose",function(){t.CHM(a);const x=t.oxw();return t.KtG(x.onSuccessBannerClose())}),t.qZA()}}function yn(_,l){}function Rn(_,l){1&_&&t.YNc(0,yn,0,0,"ng-template")}function On(_,l){if(1&_&&(t.ynx(0),t.YNc(1,Rn,1,0,null,9),t.BQk()),2&_){t.oxw(2);const a=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",a)}}function An(_,l){if(1&_&&(t.ynx(0),t.YNc(1,On,2,1,"ng-container",5),t.BQk()),2&_){const a=t.oxw().ngrxLet,m=t.MAs(5),x=t.oxw();t.xp6(1),t.Q6J("ngIf",a.isEditor||a.isAdmin||x.flag.flaggingUser.id===a.id)("ngIfElse",m)}}function Zn(_,l){}function Ln(_,l){1&_&&t.YNc(0,Zn,0,0,"ng-template")}function bn(_,l){if(1&_&&(t.TgZ(0,"span",10),t.YNc(1,Ln,1,0,null,9),t.qZA()),2&_){t.oxw();const a=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",a)}}function Fn(_,l){}function Mn(_,l){1&_&&t.YNc(0,Fn,0,0,"ng-template")}function En(_,l){if(1&_&&(t.TgZ(0,"span",11),t.YNc(1,Mn,1,0,null,9),t.qZA()),2&_){t.oxw();const a=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",a)}}function Nn(_,l){if(1&_){const a=t.EpF();t.TgZ(0,"button",13),t.NdJ("nzPopoverVisibleChange",function(x){t.CHM(a);const S=t.oxw(3);return t.KtG(S.flagResolvePopoverVisible=x)})("click",function(){t.CHM(a);const x=t.oxw(3);return t.KtG(x.flagResolvePopoverVisible=!x.flagResolvePopoverVisible)}),t._uU(1," Resolve Flag "),t._UZ(2,"i",14),t.qZA()}if(2&_){const a=t.oxw(2).ngrxLet,m=t.oxw(),x=t.MAs(3),S=t.MAs(5);t.Q6J("nzPopoverTitle",x)("nzPopoverVisible",m.flagResolvePopoverVisible)("nzPopoverContent",S)("nzPopoverTrigger",void 0)("disabled",!a.signedIn||a.isCurator&&m.flag.flaggingUser.id!=a.id)}}function _n(_,l){if(1&_&&t.YNc(0,Nn,3,5,"button",12),2&_){const a=t.oxw(2);t.Q6J("ngIf",!a.success)}}function Qn(_,l){if(1&_&&(t.ynx(0),t.YNc(1,An,2,2,"ng-container",5),t.YNc(2,bn,2,1,"ng-template",null,6,t.W1O),t.YNc(4,En,2,1,"ng-template",null,7,t.W1O),t.YNc(6,_n,1,1,"ng-template",null,8,t.W1O),t.BQk()),2&_){const a=l.ngrxLet,m=t.MAs(3);t.xp6(1),t.Q6J("ngIf",a.signedIn)("ngIfElse",m)}}const Sn=function(){return{float:"right"}};function cn(_,l){if(1&_){const a=t.EpF();t._uU(0," Resolve Flag "),t.TgZ(1,"span",15)(2,"i",16),t.NdJ("click",function(){t.CHM(a);const x=t.oxw();return x.flagResolvePopoverVisible=!1,t.KtG(x.errorMessages=[])}),t.qZA()()}2&_&&(t.xp6(1),t.Q6J("ngStyle",t.DdM(1,Sn)))}function In(_,l){if(1&_&&t._UZ(0,"nz-alert",25),2&_){t.oxw();const a=t.MAs(2);t.Q6J("nzDescription",a)}}function Jn(_,l){if(1&_&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&_){const a=l.$implicit;t.xp6(1),t.Oqu(a)}}function Pn(_,l){if(1&_&&(t.TgZ(0,"ul"),t.YNc(1,Jn,2,1,"li",26),t.qZA()),2&_){const a=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",a.errorMessages)}}function Yn(_,l){if(1&_){const a=t.EpF();t.YNc(0,In,1,1,"nz-alert",17),t.YNc(1,Pn,2,1,"ng-template",null,18,t.W1O),t.TgZ(3,"nz-card",19)(4,"form",20),t.NdJ("ngSubmit",function(){t.CHM(a);const x=t.oxw();return t.KtG(x.resolveFlag())}),t.TgZ(5,"cvc-comment-input-form",21),t.NdJ("commentChange",function(x){t.CHM(a);const S=t.oxw();return t.KtG(S.comment=x)}),t.qZA(),t.TgZ(6,"nz-spin",22)(7,"nz-form-item")(8,"nz-form-control")(9,"cvc-form-buttons")(10,"cvc-org-selector-btn-group",23),t.NdJ("selectedOrgChange",function(x){t.CHM(a);const S=t.oxw();return t.KtG(S.onOrgSelected(x))}),t.TgZ(11,"button",24),t._uU(12," Resolve "),t.qZA()()()()()()()()}if(2&_){const a=t.oxw();t.Q6J("ngIf",a.errorMessages.length>0),t.xp6(5),t.Q6J("comment",a.comment),t.xp6(1),t.Q6J("nzSpinning",a.loading),t.xp6(5),t.Q6J("disabled",!(void 0!==a.comment&&a.comment.length>=10))}}class ln{constructor(l,a,m){this.gql=l,this.viewerService=a,this.networkErrorService=m,this.errorMessages=[],this.loading=!1,this.success=!1,this.flagResolvePopoverVisible=!1,this.destroy$=new N.x,this.resolveFlagMutator=new I.U(m),this.viewer$=this.viewerService.viewer$}ngOnInit(){if(void 0===this.flag)throw new Error("Must pass a Flag in to resolve component.");this.viewerService.viewer$.subscribe(l=>{this.selectedOrg=l.mostRecentOrg})}onOrgSelected(l){this.selectedOrg=l}resolveFlag(){if(this.comment){this.errorMessages=[];let l=this.resolveFlagMutator.mutate(this.gql,{input:{id:this.flag.id,comment:this.comment,organizationId:this.selectedOrg?.id}});l.submitSuccess$.pipe((0,E.R)(this.destroy$)).subscribe(a=>{a&&(this.flagResolvePopoverVisible=!1,this.success=!0,this.flagResolvedCallback&&this.flagResolvedCallback())}),l.submitError$.pipe((0,E.R)(this.destroy$)).subscribe(a=>{a.length>0&&(this.success=!1,this.errorMessages=a)}),l.isSubmitting$.pipe((0,E.R)(this.destroy$)).subscribe(a=>{this.loading=a})}}onSuccessBannerClose(){this.success=!1,this.flagResolvedCallback&&this.flagResolvedCallback()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}ln.\u0275fac=function(l){return new(l||ln)(t.Y36(r.EwB),t.Y36(Q.a),t.Y36(Z.Y))},ln.\u0275cmp=t.Xpm({type:ln,selectors:[["cvc-flag-resolve-form"]],inputs:{flag:"flag",flagResolvedCallback:"flagResolvedCallback"},decls:6,vars:2,consts:[["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],[4,"ngrxLet"],["flagResolvePopoverTitleTemplate",""],["flagResolvePopoverContentTemplate",""],["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["noPermissions",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to resolve flag."],["nz-tooltip","","nzTooltipTitle","If you are not an editor, you can only resolve flags you opened."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click",4,"ngIf"],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click"],["nz-icon","","nzType","caret-down","nzTheme","outline"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription",4,"ngIf"],["errorContents",""],["nzType","inner",2,"width","300px"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[3,"selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription"],[4,"ngFor","ngForOf"]],template:function(l,a){1&l&&(t.YNc(0,hn,1,0,"nz-alert",0),t.YNc(1,Qn,8,2,"ng-container",1),t.YNc(2,cn,3,2,"ng-template",null,2,t.W1O),t.YNc(4,Yn,13,4,"ng-template",null,3,t.W1O)),2&l&&(t.Q6J("ngIf",a.success),t.xp6(1),t.Q6J("ngrxLet",a.viewer$))},dependencies:[d.sg,d.O5,d.tP,d.PC,f._Y,f.JL,y.eJ,O.ix,R.w,F.dQ,b.t3,b.SK,u.Lr,u.Nx,u.Fd,f.F,J.r,v.bd,Tn.lU,dn.Ls,P.SY,K.W,C.b,z.Z,$.m,B.q],encapsulation:2});var Un=o(7948),Dn=o(160),$n=o(5083);function Bn(_,l){if(1&_){const a=t.EpF();t.TgZ(0,"nz-alert",5),t.NdJ("nzOnClose",function(){const S=t.CHM(a).$implicit,zt=t.oxw();return t.KtG(zt.onErrorBannerClose(S))}),t.qZA()}2&_&&t.Q6J("nzMessage",l.$implicit)}function wn(_,l){if(1&_){const a=t.EpF();t.TgZ(0,"nz-alert",6),t.NdJ("nzOnClose",function(){t.CHM(a);const x=t.oxw();return t.KtG(x.onSuccessBannerClose())}),t.qZA()}if(2&_){const a=t.oxw();t.MGl("nzMessage","Revision(s) successfully ",a.success,".")}}function jn(_,l){if(1&_&&t._UZ(0,"cvc-comment-body",15),2&_){const a=t.oxw(2).$implicit;t.Q6J("commentBodySegments",a.openComment.parsedComment)}}function un(_,l){if(1&_&&(t.ynx(0),t._UZ(1,"cvc-flag-resolve-form",16),t.BQk()),2&_){const a=t.oxw(2).$implicit,m=t.oxw(2);t.xp6(1),t.Q6J("flag",a)("flagResolvedCallback",m.flagResolvedCallback)}}function Wn(_,l){if(1&_&&(t.ynx(0),t._UZ(1,"cvc-comment-body",15),t.BQk()),2&_){const a=t.oxw(3).$implicit;t.xp6(1),t.Q6J("commentBodySegments",a.resolutionComment.parsedComment)}}function Gn(_,l){if(1&_&&t._UZ(0,"cvc-user-tag",21),2&_){const a=t.oxw(3).$implicit;t.Q6J("user",a.resolvingUser)}}function Kn(_,l){if(1&_&&(t.TgZ(0,"nz-row")(1,"nz-col",17),t.YNc(2,Wn,2,1,"ng-container",18),t.qZA(),t.TgZ(3,"nz-col",19),t._uU(4," Resolved By "),t.YNc(5,Gn,1,1,"cvc-user-tag",20),t._uU(6),t.ALo(7,"timeAgo"),t.qZA()()),2&_){const a=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngIf",a.resolutionComment),t.xp6(3),t.Q6J("ngIf",void 0!==a.resolvingUser),t.xp6(1),t.hij(" ",t.lcZ(7,3,a.resolvedAt)," ")}}function Vn(_,l){if(1&_&&(t._UZ(0,"i",22),t.ALo(1,"entityColor"),t._uU(2)),2&_){const a=t.oxw(2).$implicit;t.Q6J("nzTwotoneColor",t.lcZ(1,2,"Flag")),t.xp6(2),t.hij(" FID",a.id," ")}}function Hn(_,l){if(1&_&&(t.TgZ(0,"span")(1,"span",26),t._uU(2,"Flagged By"),t.qZA(),t._UZ(3,"cvc-user-tag",21),t.TgZ(4,"span",26),t._uU(5),t.ALo(6,"timeAgo"),t.qZA()()),2&_){const a=t.oxw(3).$implicit;t.xp6(3),t.Q6J("user",a.flaggingUser),t.xp6(2),t.Oqu(t.lcZ(6,2,a.createdAt))}}function kn(_,l){if(1&_&&t._UZ(0,"cvc-status-tag",27),2&_){const a=t.oxw(3).$implicit;t.Q6J("status",a.state)}}function k(_,l){1&_&&(t.TgZ(0,"nz-space",23),t.YNc(1,Hn,7,4,"span",24),t.YNc(2,kn,1,1,"cvc-status-tag",25),t.qZA())}function qn(_,l){if(1&_&&(t.TgZ(0,"nz-card",10),t.YNc(1,jn,1,1,"cvc-comment-body",11),t._UZ(2,"nz-divider"),t.YNc(3,un,2,2,"ng-container",3),t.YNc(4,Kn,8,5,"ng-template",null,12,t.W1O),t.YNc(6,Vn,3,4,"ng-template",null,13,t.W1O),t.YNc(8,k,3,0,"ng-template",null,14,t.W1O),t.qZA()),2&_){const a=t.MAs(5),m=t.MAs(7),x=t.MAs(9),S=t.oxw().$implicit;t.Q6J("nzTitle",m)("nzExtra",x),t.xp6(1),t.Q6J("ngIf",S.openComment),t.xp6(2),t.Q6J("ngIf","OPEN"==S.state)("ngIfElse",a)}}function Xn(_,l){1&_&&(t.ynx(0),t.YNc(1,qn,10,5,"nz-card",9),t.BQk())}function nt(_,l){if(1&_&&(t.ynx(0),t.TgZ(1,"nz-space",7),t.YNc(2,Xn,2,0,"ng-container",8),t.qZA(),t.BQk()),2&_){const a=t.oxw();t.xp6(2),t.Q6J("ngForOf",a.flags)}}function tt(_,l){1&_&&t._UZ(0,"nz-empty",28)}class rn{constructor(l){this.viewerService=l,this.isLoading=!1,this.success=!1,this.destroy$=new N.x}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(l=>{this.mostRecentOrg=l.mostRecentOrg})}setupMutationResultHandlers(l,a){l.submitSuccess$.pipe((0,E.R)(this.destroy$)).subscribe(m=>{m&&(this.isLoading=!1,this.errors=void 0,this.success=a)}),l.submitError$.pipe((0,E.R)(this.destroy$)).subscribe(m=>{m.length>0&&(this.isLoading=!1,this.success=!1,this.errors=m)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(l){this.errors=this.errors?.filter(a=>a!=l)}onSuccessBannerClose(){this.success=!1}}rn.\u0275fac=function(l){return new(l||rn)(t.Y36(Q.a))},rn.\u0275cmp=t.Xpm({type:rn,selectors:[["cvc-flag-list"]],inputs:{flags:"flags",flagResolvedCallback:"flagResolvedCallback"},decls:6,vars:4,consts:[["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],["nzTitle","Flags",1,"card-list"],[4,"ngIf","ngIfElse"],["noFlags",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose"],["nzDirection","vertical"],[4,"ngFor","ngForOf"],["nzType","inner",3,"nzTitle","nzExtra",4,"nzSpaceItem"],["nzType","inner",3,"nzTitle","nzExtra"],[3,"commentBodySegments",4,"ngIf"],["flagResolved",""],["flagCardHeaderTitle",""],["flagCardHeaderExtra",""],[3,"commentBodySegments"],[3,"flag","flagResolvedCallback"],["nzSpan","16"],[4,"ngIf"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"user"],["nz-icon","","nzTheme","twotone","nzType","civic-flag",3,"nzTwotoneColor"],["nzSize","small"],[4,"nzSpaceItem"],[3,"status",4,"nzSpaceItem"],["nz-typography","","nzType","secondary"],[3,"status"],["nzNotFoundImage","simple","nzNotFoundContent","No Flags matching filters"]],template:function(l,a){if(1&l&&(t.YNc(0,Bn,1,1,"nz-alert",0),t.YNc(1,wn,1,1,"nz-alert",1),t.TgZ(2,"nz-card",2),t.YNc(3,nt,3,1,"ng-container",3),t.YNc(4,tt,1,0,"ng-template",null,4,t.W1O),t.qZA()),2&l){const m=t.MAs(5);t.Q6J("ngForOf",a.errors),t.xp6(1),t.Q6J("ngIf",a.success),t.xp6(2),t.Q6J("ngIf",a.flags&&a.flags.length>0)("ngIfElse",m)}},dependencies:[d.sg,d.O5,b.t3,b.SK,v.bd,D.NU,D.$1,H.ZU,vn.p9,zn.g,dn.Ls,Cn.I,xn.h,R.w,J.r,ln,Un.m,Dn.a,$n.x],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]});var et=o(8747),it=o(4383);const gn=function(){return[]};function ot(_,l){if(1&_&&(t._UZ(0,"cvc-flag-list",13),t.ALo(1,"ngrxPush")),2&_){const a=t.oxw(2);t.Q6J("flags",t.lcZ(1,2,a.flags$)||t.DdM(4,gn))("flagResolvedCallback",a.refresh)}}function st(_,l){if(1&_){const a=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(a);const x=t.oxw(2).ngrxLet,S=t.oxw(2);return t.KtG(S.loadMore(null==x?null:x.endCursor))}),t._uU(1," Load More "),t.qZA()}}function at(_,l){1&_&&(t.ynx(0),t.YNc(1,st,2,0,"button",15),t.BQk())}function _t(_,l){if(1&_&&(t.ynx(0),t.YNc(1,at,2,0,"ng-container",14),t.BQk()),2&_){const a=l.ngrxLet;t.xp6(1),t.Q6J("ngIf",a&&(null==a?null:a.hasNextPage)&&a.endCursor)}}function ct(_,l){if(1&_&&t._UZ(0,"cvc-flag-add-form",17),2&_){const a=t.oxw(2);t.Q6J("flaggable",a.flaggable)("flagAddedCallback",a.refresh)}}function lt(_,l){if(1&_&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&_){const a=l.$implicit;t.xp6(1),t.Oqu(a.displayName)}}function rt(_,l){if(1&_&&t._UZ(0,"nz-avatar",20),2&_){const a=t.oxw().$implicit;t.Q6J("nzSrc",a.profileImagePath)}}function pt(_,l){if(1&_&&(t._UZ(0,"nz-avatar",21),t.ALo(1,"uppercase")),2&_){const a=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,a.username.charAt(0)))}}function gt(_,l){if(1&_&&(t.YNc(0,rt,1,1,"nz-avatar",18),t.YNc(1,pt,2,3,"ng-template",null,19,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&_){const a=l.$implicit,m=t.MAs(2);t.Q6J("ngIf",a.profileImagePath)("ngIfElse",m),t.xp6(4),t.Oqu(a.username)}}function mt(_,l){if(1&_&&t._UZ(0,"nz-avatar",20),2&_){const a=t.oxw().$implicit;t.Q6J("nzSrc",a.profileImagePath)}}function ft(_,l){if(1&_&&(t._UZ(0,"nz-avatar",21),t.ALo(1,"uppercase")),2&_){const a=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,a.username.charAt(0)))}}function dt(_,l){if(1&_&&(t.YNc(0,mt,1,1,"nz-avatar",18),t.YNc(1,ft,2,3,"ng-template",null,19,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&_){const a=l.$implicit,m=t.MAs(2);t.Q6J("ngIf",a.profileImagePath)("ngIfElse",m),t.xp6(4),t.Oqu(a.username)}}function ut(_,l){if(1&_){const a=t.EpF();t.ynx(0),t.TgZ(1,"nz-row",2)(2,"nz-col",3)(3,"nz-space",4),t.YNc(4,ot,2,5,"cvc-flag-list",5),t.YNc(5,_t,2,1,"ng-container",6),t.YNc(6,ct,1,2,"cvc-flag-add-form",7),t.qZA()(),t.TgZ(7,"nz-col",8)(8,"cvc-participant-list",9),t.NdJ("participantSelectedEvent",function(x){t.CHM(a);const S=t.oxw();return t.KtG(S.onStateSelected(x))}),t.YNc(9,lt,2,1,"ng-template",null,10,t.W1O),t.qZA(),t.TgZ(11,"cvc-participant-list",11),t.NdJ("participantSelectedEvent",function(x){t.CHM(a);const S=t.oxw();return t.KtG(S.onFlaggingUsersSelected(x))}),t.ALo(12,"ngrxPush"),t.YNc(13,gt,5,3,"ng-template",null,10,t.W1O),t.qZA(),t.TgZ(15,"cvc-participant-list",12),t.NdJ("participantSelectedEvent",function(x){t.CHM(a);const S=t.oxw();return t.KtG(S.onResolvingUsersSelected(x))}),t.ALo(16,"ngrxPush"),t.YNc(17,dt,5,3,"ng-template",null,10,t.W1O),t.qZA()()(),t.BQk()}if(2&_){const a=t.oxw();t.xp6(1),t.Q6J("nzGutter",16),t.xp6(4),t.Q6J("ngrxLet",a.pageInfo$),t.xp6(3),t.Q6J("preselectedOption",a.selectableStates[0])("participantList",a.selectableStates),t.xp6(3),t.Q6J("participantList",t.lcZ(12,6,a.uniqueFlaggingUsers$)||t.DdM(10,gn)),t.xp6(4),t.Q6J("participantList",t.lcZ(16,8,a.uniqueResolvingUsers$)||t.DdM(11,gn))}}function vt(_,l){if(1&_&&t._UZ(0,"cvc-flag-add-form",17),2&_){const a=t.oxw();t.Q6J("flaggable",a.flaggable)("flagAddedCallback",a.refresh)}}class pn{constructor(l){this.gql=l,this.defaultPageSize=5,this.selectableStates=[{id:1,displayName:"Open",value:r.BQZ.Open},{id:2,displayName:"Resolved",value:r.BQZ.Resolved}]}ngOnInit(){if(null==this.flaggable)throw new Error("Must pass a flaggable into flag list");this.queryRef=this.gql.watch({first:this.defaultPageSize,flaggable:this.flaggable,state:r.BQZ.Open}),this.refresh=()=>{this.queryRef.refetch()},this.results$=this.queryRef.valueChanges,this.flags$=this.results$.pipe((0,h.j)("data","flags","edges"),(0,c.h)(n.ep),(0,L.U)(l=>l.map(a=>a.node))),this.pageInfo$=this.results$.pipe((0,h.j)("data","flags","pageInfo")),this.unfilteredCount$=this.results$.pipe((0,h.j)("data","flags","unfilteredCountForSubject")),this.uniqueFlaggingUsers$=this.results$.pipe((0,L.U)(({data:l})=>l.flags?.uniqueFlaggingUsers)),this.uniqueResolvingUsers$=this.results$.pipe((0,L.U)(({data:l})=>l.flags?.uniqueResolvingUsers))}onFlaggingUsersSelected(l){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},flaggingUserId:l?l.id:void 0})}onResolvingUsersSelected(l){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},resolvingUserId:l?l.id:void 0})}onStateSelected(l){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},state:l?l.value:void 0})}loadMore(l){this.queryRef?.fetchMore({variables:{first:this.defaultPageSize,after:l}})}}pn.\u0275fac=function(l){return new(l||pn)(t.Y36(r.rzy))},pn.\u0275cmp=t.Xpm({type:pn,selectors:[["cvc-flag-list-and-filter"]],inputs:{flaggable:"flaggable"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noFlags",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"flags","flagResolvedCallback",4,"nzSpaceItem"],[4,"ngrxLet"],[3,"flaggable","flagAddedCallback",4,"nzSpaceItem"],["nzSpan","6"],["listTitle","Flag State",3,"preselectedOption","participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Flagging Users",3,"participantList","participantSelectedEvent"],["listTitle","Resolving Users",3,"participantList","participantSelectedEvent"],[3,"flags","flagResolvedCallback"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[3,"flaggable","flagAddedCallback"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"]],template:function(l,a){if(1&l&&(t.YNc(0,ut,19,12,"ng-container",0),t.ALo(1,"ngrxPush"),t.YNc(2,vt,1,2,"ng-template",null,1,t.W1O)),2&l){const m=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,a.unfilteredCount$))("ngIfElse",m)}},dependencies:[d.O5,y.eJ,O.ix,R.w,F.dQ,b.t3,b.SK,U,rn,et.l,it.Dz,D.NU,D.$1,d.gd,y.fM],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]})},4271:(w,M,o)=>{o.d(M,{M:()=>U});var r=o(6895),c=o(2635),L=o(8521),h=o(7345),n=o(1971),t=o(6704),d=o(6152),y=o(4006),O=o(1825),R=o(6616),F=o(4375),b=o(9597),I=o(7570),N=o(9444),E=o(4509),Q=o(5681),Z=o(4650);class f{}f.\u0275fac=function(H){return new(H||f)},f.\u0275mod=Z.oAB({type:f}),f.\u0275inj=Z.cJS({imports:[r.ez,y.u5,y.UX,c._N,c.pP,t.U5,R.sL,n.vh,b.L,I.cg,Q.j,O.A,F.R,N.s,E.w]});var u=o(8909),v=o(8845),J=o(3973),P=o(592),K=o(2811),$=o(701),B=o(8645),z=o(7043),C=o(6581),A=o(1102);class Y{}Y.\u0275fac=function(H){return new(H||Y)},Y.\u0275mod=Z.oAB({type:Y}),Y.\u0275inj=Z.cJS({imports:[r.ez,y.UX,c._N,c.pP,R.sL,t.U5,y.u5,b.L,n.vh,C.$6,A.PV,I.cg,Q.j,E.w,F.R,O.A]});var q=o(4383),nn=o(8213),tn=o(2577),en=o(4788),V=o(3679),on=o(5635),j=o(6903),sn=o(6672),an=o(8823);class W{}W.\u0275fac=function(H){return new(H||W)},W.\u0275mod=Z.oAB({type:W}),W.\u0275inj=Z.cJS({imports:[r.ez,V.Jb,d.Ph,n.vh,j.zf,sn.X,an.ZJ,q.Rt,en.Xo,nn.Wr,tn.S,I.cg,d.Ph,C.$6,A.PV,on.o7,y.u5,O.A,K.s,h.W,v.Q,$.N,J.y,z.Q,B.M,P.x,N.s,R.sL,b.L,c._N,c.pP,Y,tn.S,u.m]});var G=o(1150);class U{}U.\u0275fac=function(H){return new(H||U)},U.\u0275mod=Z.oAB({type:U}),U.\u0275inj=Z.cJS({imports:[r.ez,y.u5,c._N,c.pP,R.sL,t.U5,L.aF,R.sL,h.W,d.Ph,n.vh,f,W,en.Xo,G.N,q.Rt,j.zf,N.s]})},8168:(w,M,o)=>{o.d(M,{Y:()=>c});var r=o(4650);class c{constructor(){}}c.\u0275fac=function(h){return new(h||c)},c.\u0275dir=r.lG2({type:c,selectors:[["","cvcFlaggableOptions",""]]})},5623:(w,M,o)=>{o.d(M,{o:()=>Z});var r=o(4650),c=o(8168),L=o(6895),h=o(9116),n=o(1102),t=o(48),d=o(7570);function O(f,u){1&f&&r.Hsn(0)}function R(f,u){1&f&&r.GkF(0)}function F(f,u){if(1&f&&(r.ynx(0),r.YNc(1,R,1,0,"ng-container",2),r.BQk()),2&f){r.oxw();const v=r.MAs(1);r.xp6(1),r.Q6J("ngTemplateOutlet",v)}}function b(f,u){if(1&f&&(r.TgZ(0,"a",6),r._UZ(1,"i",7),r.qZA()),2&f){r.oxw();const v=r.MAs(5);r.xp6(1),r.Q6J("nzTooltipTitle",v)}}function I(f,u){if(1&f&&r._uU(0),2&f){const v=r.oxw(2);r.hij(" ",v.flags," open flags ")}}function N(f,u){1&f&&r.GkF(0)}function E(f,u){if(1&f&&(r.ynx(0),r.TgZ(1,"nz-ribbon",3),r.YNc(2,b,2,1,"ng-template",null,4,r.W1O),r.YNc(4,I,1,1,"ng-template",null,5,r.W1O),r.YNc(6,N,1,0,"ng-container",2),r.qZA(),r.BQk()),2&f){const v=r.MAs(3);r.oxw();const J=r.MAs(1);r.xp6(1),r.Q6J("nzText",v),r.xp6(5),r.Q6J("ngTemplateOutlet",J)}}class Z{constructor(u){this.renderer=u}ngOnChanges(){this.flags&&0===this.flags?this.removeFlagged():this.addFlagged()}ngAfterViewInit(){this.flags&&0===this.flags?this.removeFlagged():this.addFlagged()}addFlagged(){this.flaggedChild&&this.renderer.addClass(this.flaggedChild.nativeElement,"flaggedChild")}removeFlagged(){this.flaggedChild&&this.renderer.removeClass(this.flaggedChild.nativeElement,"flaggedChild")}}Z.\u0275fac=function(u){return new(u||Z)(r.Y36(r.Qsj))},Z.\u0275cmp=r.Xpm({type:Z,selectors:[["","cvcFlaggable",""]],contentQueries:function(u,v,J){if(1&u&&r.Suo(J,c.Y,5,r.SBq),2&u){let P;r.iGM(P=r.CRH())&&(v.flaggedChild=P.first)}},inputs:{flags:"flags",entity:"entity"},features:[r.TTD],attrs:["cvcFlaggable",""],ngContentSelectors:["*"],decls:4,vars:2,consts:[["flaggedContent",""],[4,"ngIf"],[4,"ngTemplateOutlet"],["nzPlacement","start","nzColor","#ff3333",3,"nzText"],["flaggedText",""],["flaggedTooltip",""],["routerLink","flags",2,"color","#fff"],["nz-icon","","nzType","flag","nzTheme","fill","nz-tooltip","","nzTooltipPlacement","top","nzTooltipColor","#FF3333",3,"nzTooltipTitle"]],template:function(u,v){1&u&&(r.F$t(),r.YNc(0,O,1,0,"ng-template",null,0,r.W1O),r.YNc(2,F,2,1,"ng-container",1),r.YNc(3,E,7,2,"ng-container",1)),2&u&&(r.xp6(2),r.Q6J("ngIf",0===v.flags),r.xp6(1),r.Q6J("ngIf",v.flags))},dependencies:[L.O5,L.tP,h.rH,n.Ls,t.F9,d.SY],encapsulation:2})},4682:(w,M,o)=>{o.d(M,{m:()=>y});var r=o(6895),c=o(7570),L=o(8823),h=o(48),n=o(1102),t=o(9116),d=o(4650);class y{}y.\u0275fac=function(R){return new(R||y)},y.\u0275mod=d.oAB({type:y}),y.\u0275inj=d.cJS({imports:[r.ez,t.Bz,n.PV,h.mS,c.cg,L.ZJ]})},6059:(w,M,o)=>{o.d(M,{i:()=>G});var r=o(6895),c=o(1971),L=o(6152),h=o(3679),n=o(4650);class t{}t.\u0275fac=function(D){return new(D||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[r.ez,h.Jb]});var d=o(2322),y=o(2811),O=o(6903),R=o(1825),F=o(6672),b=o(8823),I=o(4383),N=o(7345),E=o(8845),Q=o(3973),Z=o(7043),f=o(8645),u=o(9054),v=o(4788),J=o(592),P=o(8213),K=o(2577),$=o(7570),B=o(6616),z=o(9597),C=o(2635),A=o(1102),Y=o(6581),q=o(5635),nn=o(4006),tn=o(9444),en=o(9194),V=o(4509),on=o(8909),j=o(9460),sn=o(701),an=o(4126),W=o(1229);class G{}G.\u0275fac=function(D){return new(D||G)},G.\u0275mod=n.oAB({type:G}),G.\u0275inj=n.cJS({imports:[r.ez,h.Jb,L.Ph,c.vh,O.zf,F.X,b.ZJ,I.Rt,v.Xo,P.Wr,K.S,$.cg,L.Ph,Y.$6,A.PV,q.o7,en.q6,K.S,nn.u5,R.A,d.C,W.U,y.s,t,N.W,E.Q,sn.N,Q.y,Z.Q,j.i,f.M,J.x,V.w,an.u,tn.s,on.m,u.cD,B.sL,z.L,C._N,C.pP]})},3770:(w,M,o)=>{o.d(M,{a:()=>fn});var r=o(7630),c=o(4004),L=o(8675),h=o(6579),n=o(4650),t=o(9116),d=o(6895),y=o(2635),O=o(3679),R=o(6903),F=o(6672),b=o(4383),I=o(4788),N=o(6616),E=o(7044),Q=o(1664),Z=o(1102),f=o(8747),u=o(7579),v=o(6123),J=o(2722),P=o(9350),K=o(9169),$=o(6152),B=o(1971),z=o(8823),C=o(8213),A=o(2577),Y=o(7570),q=o(6581),nn=o(9194),tn=o(1793),en=o(8227);class V{transform(s){return s?s.replace(/([a-z])([A-Z])/g,"$1 $2"):""}}V.\u0275fac=function(s){return new(s||V)},V.\u0275pipe=n.Yjl({name:"camelToWords",type:V,pure:!0});const on=["itemTemplate"],j=function(e){return{$implicit:e}};function sn(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,p=n.oxw();n.xp6(2),n.Q6J("ngTemplateOutlet",p.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,j,i))}}function an(e,s){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function W(e,s){if(1&e&&(n.TgZ(0,"nz-list-item",9),n.YNc(1,sn,3,4,"ng-container",10),n.YNc(2,an,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=s.$implicit,p=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",p)}}function G(e,s){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw();n.MGl("nzNoResult","No ",i.entityType,"")}}function U(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,p=n.oxw(3);n.xp6(2),n.Q6J("ngTemplateOutlet",p.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,j,i))}}function D(e,s){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function H(e,s){if(1&e&&(n.TgZ(0,"nz-list-item",17),n.YNc(1,U,3,4,"ng-container",10),n.YNc(2,D,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=s.$implicit,p=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",p)}}function vn(e,s){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw(3);n.MGl("nzNoResult","No ",i.entityType," Removed")}}function zn(e,s){if(1&e&&(n.TgZ(0,"nz-list",2),n.YNc(1,H,4,2,"nz-list-item",16),n.YNc(2,vn,1,1,"nz-list-empty",4),n.qZA()),2&e){const i=n.oxw(2);n.MGl("nzHeader","Removed ",i.entityType,""),n.xp6(1),n.Q6J("ngForOf",i.diffObject.removedObjects),n.xp6(1),n.Q6J("ngIf",0===i.diffObject.removedObjects.length)}}function dn(e,s){1&e&&(n.ynx(0),n.YNc(1,zn,3,3,"nz-list",7),n.BQk())}function Cn(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,p=n.oxw(2);n.xp6(2),n.Q6J("ngTemplateOutlet",p.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,j,i))}}function xn(e,s){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function Tn(e,s){if(1&e&&(n.TgZ(0,"nz-list-item",19),n.YNc(1,Cn,3,4,"ng-container",10),n.YNc(2,xn,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=s.$implicit,p=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",p)}}function hn(e,s){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw(2);n.MGl("nzNoResult","No ",i.entityType," Added")}}function yn(e,s){if(1&e&&(n.TgZ(0,"nz-list",2),n.YNc(1,Tn,4,2,"nz-list-item",18),n.YNc(2,hn,1,1,"nz-list-empty",4),n.qZA()),2&e){const i=n.oxw();n.MGl("nzHeader","Added ",i.entityType,""),n.xp6(1),n.Q6J("ngForOf",i.diffObject.addedObjects),n.xp6(1),n.Q6J("ngIf",0===i.diffObject.addedObjects.length)}}function Rn(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,p=n.oxw(3);n.xp6(2),n.Q6J("ngTemplateOutlet",p.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,j,i))}}function On(e,s){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function An(e,s){if(1&e&&(n.TgZ(0,"nz-list-item",21),n.YNc(1,Rn,3,4,"ng-container",10),n.YNc(2,On,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=s.$implicit,p=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",p)}}function Zn(e,s){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw(3);n.MGl("nzNoResult","No ",i.entityType," Kept")}}function Ln(e,s){if(1&e&&(n.TgZ(0,"nz-list",2),n.YNc(1,An,4,2,"nz-list-item",20),n.YNc(2,Zn,1,1,"nz-list-empty",4),n.qZA()),2&e){const i=n.oxw(2);n.MGl("nzHeader","Kept ",i.entityType,""),n.xp6(1),n.Q6J("ngForOf",i.diffObject.keptObjects),n.xp6(1),n.Q6J("ngIf",0===i.diffObject.keptObjects.length)}}function bn(e,s){1&e&&(n.ynx(0),n.YNc(1,Ln,3,3,"nz-list",7),n.BQk())}function Fn(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,p=n.oxw();n.xp6(2),n.Q6J("ngTemplateOutlet",p.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,j,i))}}function Mn(e,s){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function En(e,s){if(1&e&&(n.TgZ(0,"nz-list-item",22),n.YNc(1,Fn,3,4,"ng-container",10),n.YNc(2,Mn,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=s.$implicit,p=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",p)}}function Nn(e,s){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw();n.MGl("nzNoResult","No ",i.entityType,"")}}class _n{constructor(){}ngOnInit(){if(void 0===this.diffObject)throw new Error("Must specify a diffObject.");if(void 0===this.entityType)throw new Error("Must specify an entityType.")}}_n.\u0275fac=function(s){return new(s||_n)},_n.\u0275cmp=n.Xpm({type:_n,selectors:[["cvc-revision-list-diff"]],contentQueries:function(s,i,p){if(1&s&&n.Suo(p,on,5),2&s){let g;n.iGM(g=n.CRH())&&(i.itemTemplateRef=g.first)}},inputs:{diffObject:"diffObject",entityType:"entityType"},decls:14,vars:12,consts:[[3,"nzGutter"],[3,"nzSpan"],["nzBordered","","nzType","inner","nzSize","small",3,"nzHeader"],["ngClass","current",4,"ngFor","ngForOf"],[3,"nzNoResult",4,"ngIf"],["nzDirection","vertical"],[4,"ngIf"],["nzBordered","","nzType","inner","nzSize","small",3,"nzHeader",4,"nzSpaceItem"],["ngClass","suggested",4,"ngFor","ngForOf"],["ngClass","current"],[4,"ngIf","ngIfElse"],["deleted",""],["nz-typography",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nzColor","error"],[3,"nzNoResult"],["ngClass","removed",4,"ngFor","ngForOf"],["ngClass","removed"],["ngClass","added",4,"ngFor","ngForOf"],["ngClass","added"],["ngClass","kept",4,"ngFor","ngForOf"],["ngClass","kept"],["ngClass","suggested"]],template:function(s,i){1&s&&(n.TgZ(0,"nz-row",0)(1,"nz-col",1)(2,"nz-list",2),n.YNc(3,W,4,2,"nz-list-item",3),n.YNc(4,G,1,1,"nz-list-empty",4),n.qZA()(),n.TgZ(5,"nz-col",1)(6,"nz-space",5),n.YNc(7,dn,2,0,"ng-container",6),n.YNc(8,yn,3,3,"nz-list",7),n.YNc(9,bn,2,0,"ng-container",6),n.qZA()(),n.TgZ(10,"nz-col",1)(11,"nz-list",2),n.YNc(12,En,4,2,"nz-list-item",8),n.YNc(13,Nn,1,1,"nz-list-empty",4),n.qZA()()()),2&s&&(n.Q6J("nzGutter",16),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(1),n.MGl("nzHeader","Original ",i.entityType," List"),n.xp6(1),n.Q6J("ngForOf",i.diffObject.currentObjects),n.xp6(1),n.Q6J("ngIf",0===i.diffObject.currentObjects.length),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.Q6J("ngIf",i.diffObject.currentObjects.length>0),n.xp6(2),n.Q6J("ngIf",i.diffObject.currentObjects.length>0),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(1),n.MGl("nzHeader","Revised ",i.entityType," List"),n.xp6(1),n.Q6J("ngForOf",i.diffObject.suggestedObjects),n.xp6(1),n.Q6J("ngIf",0===i.diffObject.suggestedObjects.length))},dependencies:[d.mk,d.sg,d.O5,d.tP,$.n_,$.I2,$.AA,O.t3,O.SK,F.j,R.NU,R.$1,V],styles:["[_nghost-%COMP%]{display:block}nz-list[_ngcontent-%COMP%]   .kept[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{background-color:#f6ffed;color:#135200}nz-list[_ngcontent-%COMP%]   .removed[_ngcontent-%COMP%]{background-color:#fff1f0;color:#820014}nz-list[_ngcontent-%COMP%]   .suggested[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-space[_ngcontent-%COMP%]{width:100%}"]});var Qn=o(3965),Sn=o(783);class cn{constructor(){}ngOnInit(){if(void 0===this.left)throw new Error("Must provide a left side of the diff.");if(void 0===this.right)throw new Error("Must provide a right side of the diff.");if(void 0===this.entityType)throw new Error("Must provide a diff.")}}cn.\u0275fac=function(s){return new(s||cn)},cn.\u0275cmp=n.Xpm({type:cn,selectors:[["cvc-revision-value-diff"]],inputs:{currentValue:"currentValue",suggestedValue:"suggestedValue",left:"left",right:"right",entityType:"entityType"},decls:15,vars:10,consts:[[3,"nzGutter"],[3,"nzSpan"],[3,"innerHtml"],[1,"diff","suggested"],[1,"background"]],template:function(s,i){1&s&&(n.TgZ(0,"nz-row",0)(1,"nz-col",1)(2,"h4"),n._uU(3),n.qZA(),n._UZ(4,"div",2),n.qZA(),n.TgZ(5,"nz-col",1)(6,"h4"),n._uU(7),n.qZA(),n._UZ(8,"div",2),n.qZA(),n.TgZ(9,"nz-col",1)(10,"h4"),n._uU(11),n.qZA(),n.TgZ(12,"div",3)(13,"div",4),n._uU(14),n.qZA()()()()),2&s&&(n.Q6J("nzGutter",16),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.hij("Original ",i.entityType,""),n.xp6(1),n.Q6J("innerHtml",i.left,n.oJD),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.hij("",i.entityType," Diff"),n.xp6(1),n.Q6J("innerHtml",i.right,n.oJD),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.hij("Revised ",i.entityType,""),n.xp6(3),n.hij(" ",i.suggestedValue," "))},dependencies:[O.t3,O.SK],styles:[":host{display:block}.diff{overflow:auto;width:100%}.diff .background{padding:4px 8px}.diff.insertions .background{background:#f6ffed;color:#237804}.diff.deletions .background{background:#fff1f0;color:#a8071a}.diff.suggested .background,.diff.original .background{background:#f0f5ff;color:#10239e}.diff del,.diff ins{text-decoration:none}.diff del strong{font-weight:400;background:#fcc}.diff ins strong{font-weight:400;background:#9f9}.diff .del{font-weight:400;background:#fee;color:#b00}.diff .ins{font-weight:400;background:#dfd;color:#080}ul{list-style:none}\n"],encapsulation:2});var In=o(125),Jn=o(7491),Pn=o(5797),Yn=o(3172),ln=o(5457),Un=o(2268),Dn=o(7701),$n=o(4590),Bn=o(9383),wn=o(5105),jn=o(7948),un=o(9054),Wn=o(9597),Gn=o(2338),Kn=o(160),Vn=o(5083);function Hn(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"nz-alert",4),n.NdJ("nzOnClose",function(){const T=n.CHM(i).$implicit,X=n.oxw();return n.KtG(X.onErrorBannerClose(T))}),n.qZA()}2&e&&n.Q6J("nzMessage",s.$implicit)}function kn(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"nz-alert",5),n.NdJ("nzOnClose",function(){n.CHM(i);const g=n.oxw();return n.KtG(g.onSuccessBannerClose())}),n.qZA()}if(2&e){const i=n.oxw();n.MGl("nzMessage","Revision(s) successfully ",i.success,".")}}const k=function(e,s,i){return{id:e,name:s,link:i}};function qn(e,s){if(1&e&&n._UZ(0,"cvc-gene-tag",20),2&e){const i=s.$implicit;n.Q6J("gene",n.kEZ(1,k,i.id,i.displayName,i.link))}}function Xn(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",18),n.YNc(2,qn,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function nt(e,s){1&e&&n._UZ(0,"cvc-source-tag",22),2&e&&n.Q6J("source",s.$implicit)}function tt(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",21),n.YNc(2,nt,1,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function rn(e,s){if(1&e&&n._UZ(0,"cvc-disease-tag",24),2&e){const i=s.$implicit;n.Q6J("disease",n.kEZ(1,k,i.id,i.displayName,i.link))}}function et(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",23),n.YNc(2,rn,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function it(e,s){if(1&e&&n._UZ(0,"cvc-molecular-profile-tag",26),2&e){const i=s.$implicit;n.Q6J("molecularProfile",n.kEZ(1,k,i.id,i.displayName,i.link))}}function gn(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",25),n.YNc(2,it,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function ot(e,s){if(1&e&&n._UZ(0,"cvc-therapy-tag",28),2&e){const i=s.$implicit;n.Q6J("therapy",n.kEZ(1,k,i.id,i.displayName,i.link))}}function st(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",27),n.YNc(2,ot,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function at(e,s){if(1&e&&n._UZ(0,"cvc-therapy-tag",28),2&e){const i=s.$implicit;n.Q6J("therapy",n.kEZ(1,k,i.id,i.displayName,i.link))}}function _t(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",27),n.YNc(2,at,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function ct(e,s){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function lt(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",29),n.YNc(2,ct,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function rt(e,s){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function pt(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",30),n.YNc(2,rt,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function gt(e,s){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function mt(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",31),n.YNc(2,gt,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function ft(e,s){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function dt(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",32),n.YNc(2,ft,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function ut(e,s){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function vt(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",33),n.YNc(2,ut,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function pn(e,s){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function _(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",34),n.YNc(2,pn,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function l(e,s){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function a(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",35),n.YNc(2,l,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function m(e,s){if(1&e&&n._UZ(0,"cvc-variant-type-tag",37),2&e){const i=s.$implicit;n.Q6J("variantType",n.kEZ(1,k,i.id,i.displayName,i.link))}}function x(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",36),n.YNc(2,m,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function S(e,s){if(1&e&&n._UZ(0,"cvc-phenotype-tag",39),2&e){const i=s.$implicit;n.Q6J("phenotype",n.kEZ(1,k,i.id,i.displayName,i.link))}}function zt(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",38),n.YNc(2,S,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function Tt(e,s){if(1&e&&n._UZ(0,"cvc-variant-tag",41),2&e){const i=s.$implicit;n.Q6J("variant",n.kEZ(1,k,i.id,i.displayName,i.link))}}function ht(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",40),n.YNc(2,Tt,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function yt(e,s){if(1&e&&n._UZ(0,"cvc-variant-tag",41),2&e){const i=s.$implicit;n.Q6J("variant",n.kEZ(1,k,i.id,i.displayName,i.link))}}function Rt(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",42),n.YNc(2,yt,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function Ot(e,s){1&e&&n._UZ(0,"cvc-source-tag",22),2&e&&n.Q6J("source",s.$implicit)}function At(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",43),n.YNc(2,Ot,1,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}const Zt=function(e,s,i,p){return{id:e,name:s,link:i,status:p}};function Lt(e,s){if(1&e&&n._UZ(0,"cvc-evidence-tag",45),2&e){const i=s.$implicit;n.Q6J("evidence",n.l5B(1,Zt,i.id,i.displayName,i.link,i.status))}}function bt(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",44),n.YNc(2,Lt,1,6,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function Ft(e,s){if(1&e&&(n.ynx(0),n._UZ(1,"cvc-revision-value-diff",46),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("currentValue",i.currentValue)("suggestedValue",i.suggestedValue)("left",i.linkoutData.diffValue.left)("right",i.linkoutData.diffValue.right)("entityType",i.linkoutData.name)}}function Mt(e,s){if(1&e&&(n.ynx(0),n._UZ(1,"cvc-comment-body",50),n.BQk()),2&e){const i=n.oxw(2).$implicit;n.xp6(1),n.Q6J("commentBodySegments",i.resolutionComment.parsedComment)}}function Et(e,s){if(1&e&&n._UZ(0,"cvc-user-tag",51),2&e){const i=n.oxw(2).$implicit;n.Q6J("user",i.resolver)}}function Nt(e,s){if(1&e&&(n.ynx(0),n._UZ(1,"nz-divider"),n.TgZ(2,"nz-row")(3,"nz-col",47),n.YNc(4,Mt,2,1,"ng-container",15),n.qZA(),n.TgZ(5,"nz-col",48),n._uU(6),n.ALo(7,"enumToTitle"),n.YNc(8,Et,1,1,"cvc-user-tag",49),n._uU(9),n.ALo(10,"timeAgo"),n.qZA()(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(4),n.Q6J("ngIf",i.resolutionComment),n.xp6(2),n.hij(" ",n.lcZ(7,4,i.status)," By "),n.xp6(2),n.Q6J("ngIf",void 0!==i.resolver),n.xp6(1),n.hij(" ",n.lcZ(10,6,i.resolvedAt)," ")}}function Qt(e,s){if(1&e&&(n.TgZ(0,"span"),n._UZ(1,"i",53),n.ALo(2,"entityColor"),n._uU(3),n.TgZ(4,"span"),n._uU(5),n.qZA()()),2&e){const i=n.oxw(2).$implicit;n.xp6(1),n.Q6J("nzTwotoneColor",n.lcZ(2,3,"Revision")),n.xp6(2),n.hij(" RID",i.id," "),n.xp6(2),n.hij("",i.linkoutData.name," Updated")}}function St(e,s){if(1&e&&n._UZ(0,"i",56),2&e){n.oxw();const i=n.MAs(3);n.Q6J("nzPopoverContent",i)}}function It(e,s){if(1&e&&n._UZ(0,"cvc-comment-body",50),2&e){const i=n.oxw(3).$implicit;n.Q6J("commentBodySegments",i.creationComment.parsedComment)}}function Jt(e,s){1&e&&(n.ynx(0),n.YNc(1,St,1,1,"i",54),n.YNc(2,It,1,1,"ng-template",null,55,n.W1O),n.BQk())}function Pt(e,s){if(1&e&&(n.TgZ(0,"nz-space"),n.YNc(1,Qt,6,5,"span",52),n.YNc(2,Jt,4,0,"ng-container",15),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(2),n.Q6J("ngIf",i.creationComment)}}function Yt(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"span",63),n._uU(2,"Submitted By"),n.qZA(),n._UZ(3,"cvc-user-tag",51),n.BQk()),2&e){const i=n.oxw(3).$implicit;n.xp6(3),n.Q6J("user",i.revisor)}}function Ut(e,s){1&e&&(n.TgZ(0,"span",63),n._uU(1,"Submitted"),n.qZA())}function Dt(e,s){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,Yt,4,1,"ng-container",61),n.YNc(2,Ut,2,0,"ng-template",null,62,n.W1O),n.TgZ(4,"span",63),n._uU(5),n.ALo(6,"timeAgo"),n.qZA()()),2&e){const i=n.MAs(3),p=n.oxw(2).$implicit;n.xp6(1),n.Q6J("ngIf",p.revisor)("ngIfElse",i),n.xp6(4),n.Oqu(n.lcZ(6,3,p.createdAt))}}function $t(e,s){if(1&e&&n._UZ(0,"cvc-status-tag",64),2&e){const i=n.oxw(2).$implicit;n.Q6J("status",i.status)}}function Bt(e,s){1&e&&n._UZ(0,"nz-divider",65)}function wt(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"a",66),n.NdJ("click",function(){n.CHM(i);const g=n.oxw(2).$implicit,T=n.oxw(3);return n.KtG(T.onChangesetSelected(g.revisionsetId))}),n._uU(1,"Show Group"),n.qZA()}}function jt(e,s){1&e&&n._UZ(0,"nz-divider",65)}function Wt(e,s){1&e&&n._UZ(0,"label",69),2&e&&n.Q6J("nzDisabled",!0)}function Gt(e,s){1&e&&n._UZ(0,"label",72),2&e&&n.Q6J("nzDisabled",!0)}function Kt(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"label",73),n.NdJ("nzCheckedChange",function(g){n.CHM(i);const T=n.oxw(5).$implicit,X=n.oxw(3);return n.KtG(X.onRevisionCheckboxClicked(g,T.id))}),n.qZA()}}function Vt(e,s){if(1&e&&(n.YNc(0,Gt,1,1,"label",70),n.YNc(1,Kt,1,0,"ng-template",null,71,n.W1O)),2&e){const i=n.MAs(2),p=n.oxw(4).$implicit,g=n.oxw(2).ngrxLet;n.Q6J("ngIf",g.isCurator&&g.id!=(null==p.revisor?null:p.revisor.id))("ngIfElse",i)}}function Ht(e,s){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,Wt,1,1,"label",67),n.YNc(2,Vt,3,2,"ng-template",null,68,n.W1O),n.qZA()),2&e){const i=n.MAs(3),p=n.oxw(5).ngrxLet;n.xp6(1),n.Q6J("ngIf",!p.signedIn)("ngIfElse",i)}}function kt(e,s){1&e&&(n.ynx(0),n.YNc(1,jt,1,0,"nz-divider",59),n.YNc(2,Ht,4,2,"span",52),n.BQk())}function qt(e,s){if(1&e&&(n.TgZ(0,"nz-space",57),n.NdJ("click",function(p){return p.stopPropagation()}),n.YNc(1,Dt,7,5,"span",52),n.YNc(2,$t,1,1,"cvc-status-tag",58),n.YNc(3,Bt,1,0,"nz-divider",59),n.YNc(4,wt,2,0,"a",60),n.YNc(5,kt,3,0,"ng-container",15),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(5),n.Q6J("ngIf","NEW"===i.status)}}function Xt(e,s){if(1&e&&(n.TgZ(0,"nz-collapse-panel",11),n.ynx(1,12),n.YNc(2,Xn,4,1,"ng-container",13),n.YNc(3,tt,4,1,"ng-container",13),n.YNc(4,et,4,1,"ng-container",13),n.YNc(5,gn,4,1,"ng-container",13),n.YNc(6,st,4,1,"ng-container",13),n.YNc(7,_t,4,1,"ng-container",13),n.YNc(8,lt,4,1,"ng-container",13),n.YNc(9,pt,4,1,"ng-container",13),n.YNc(10,mt,4,1,"ng-container",13),n.YNc(11,dt,4,1,"ng-container",13),n.YNc(12,vt,4,1,"ng-container",13),n.YNc(13,_,4,1,"ng-container",13),n.YNc(14,a,4,1,"ng-container",13),n.YNc(15,x,4,1,"ng-container",13),n.YNc(16,zt,4,1,"ng-container",13),n.YNc(17,ht,4,1,"ng-container",13),n.YNc(18,Rt,4,1,"ng-container",13),n.YNc(19,At,4,1,"ng-container",13),n.YNc(20,bt,4,1,"ng-container",13),n.YNc(21,Ft,2,5,"ng-container",14),n.BQk(),n.YNc(22,Nt,11,8,"ng-container",15),n.YNc(23,Pt,3,1,"ng-template",null,16,n.W1O),n.YNc(25,qt,6,1,"ng-template",null,17,n.W1O),n.qZA()),2&e){const i=s.$implicit,p=n.MAs(24),g=n.MAs(26);n.Q6J("nzHeader",p)("nzExtra",g)("nzActive",!0),n.xp6(1),n.Q6J("ngSwitch",i.fieldName),n.xp6(1),n.Q6J("ngSwitchCase","gene_id"),n.xp6(1),n.Q6J("ngSwitchCase","source_ids"),n.xp6(1),n.Q6J("ngSwitchCase","disease_id"),n.xp6(1),n.Q6J("ngSwitchCase","molecular_profile_id"),n.xp6(1),n.Q6J("ngSwitchCase","drug_ids"),n.xp6(1),n.Q6J("ngSwitchCase","therapy_ids"),n.xp6(1),n.Q6J("ngSwitchCase","variant_alias_ids"),n.xp6(1),n.Q6J("ngSwitchCase","molecular_profile_alias_ids"),n.xp6(1),n.Q6J("ngSwitchCase","clinvar_entry_ids"),n.xp6(1),n.Q6J("ngSwitchCase","clingen_code_ids"),n.xp6(1),n.Q6J("ngSwitchCase","acmg_code_ids"),n.xp6(1),n.Q6J("ngSwitchCase","nccn_guideline_id"),n.xp6(1),n.Q6J("ngSwitchCase","hgvs_description_ids"),n.xp6(1),n.Q6J("ngSwitchCase","variant_type_ids"),n.xp6(1),n.Q6J("ngSwitchCase","phenotype_ids"),n.xp6(1),n.Q6J("ngSwitchCase","variant_id"),n.xp6(1),n.Q6J("ngSwitchCase","variant_ids"),n.xp6(1),n.Q6J("ngSwitchCase","source_id"),n.xp6(1),n.Q6J("ngSwitchCase","evidence_item_ids"),n.xp6(2),n.Q6J("ngIf","NEW"!==i.status)}}function ne(e,s){if(1&e&&(n.TgZ(0,"nz-collapse",9),n.YNc(1,Xt,27,24,"nz-collapse-panel",10),n.qZA()),2&e){const i=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",i.untypedRevisons)}}function te(e,s){1&e&&n._UZ(0,"nz-empty",74)}function ee(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"nz-card",6),n.YNc(2,ne,2,1,"nz-collapse",7),n.YNc(3,te,1,0,"ng-template",null,8,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.MAs(4),p=n.oxw(),g=n.MAs(4);n.xp6(1),n.Q6J("nzExtra",g),n.xp6(1),n.Q6J("ngIf",p.revisions&&p.revisions.length>0)("ngIfElse",i)}}function ie(e,s){}function oe(e,s){1&e&&n.YNc(0,ie,0,0,"ng-template")}function se(e,s){if(1&e&&(n.ynx(0),n.YNc(1,oe,1,0,null,83),n.BQk()),2&e){n.oxw();const i=n.MAs(5);n.xp6(1),n.Q6J("ngTemplateOutlet",i)}}function ae(e,s){}function _e(e,s){1&e&&n.YNc(0,ae,0,0,"ng-template")}function ce(e,s){if(1&e&&(n.TgZ(0,"span",84),n.YNc(1,_e,1,0,null,83),n.qZA()),2&e){n.oxw();const i=n.MAs(5);n.xp6(1),n.Q6J("ngTemplateOutlet",i)}}function le(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"button",85),n.NdJ("nzPopoverVisibleChange",function(g){n.CHM(i);const T=n.oxw(7);return n.KtG(T.validationPopoverVisible=g)})("click",function(){n.CHM(i);const g=n.oxw(7);return n.KtG(g.validationPopoverVisible=!g.validationPopoverVisible)}),n._uU(1," Review Selected Revisions "),n._UZ(2,"i",86),n.qZA()}if(2&e){const i=n.oxw(2).ngrxLet,p=n.MAs(7),g=n.MAs(9),T=n.oxw(5);n.Q6J("nzPopoverTitle",p)("nzPopoverVisible",T.validationPopoverVisible)("nzPopoverContent",g)("nzPopoverTrigger",void 0)("disabled",0===T.selectedRevisionIds.length||!i.signedIn)}}function re(e,s){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,se,2,1,"ng-container",61),n.YNc(2,ce,2,1,"ng-template",null,81,n.W1O),n.YNc(4,le,3,5,"ng-template",null,82,n.W1O),n.qZA()),2&e){const i=n.MAs(3),p=n.oxw().ngrxLet;n.xp6(1),n.Q6J("ngIf",p.signedIn)("ngIfElse",i)}}function pe(e,s){if(1&e&&n._UZ(0,"i",88),2&e){n.oxw(4);const i=n.MAs(3);n.Q6J("nzPopoverContent",i)}}function ge(e,s){1&e&&(n.ynx(0),n.YNc(1,pe,1,1,"i",87),n.BQk())}const me=function(){return{float:"right"}};function fe(e,s){if(1&e){const i=n.EpF();n._uU(0," Review Selected Revisions "),n.TgZ(1,"span",89)(2,"i",90),n.NdJ("click",function(){n.CHM(i);const g=n.oxw(6);return n.KtG(g.validationPopoverVisible=!1)}),n.qZA()()}2&e&&(n.xp6(1),n.Q6J("ngStyle",n.DdM(1,me)))}function de(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"cvc-comment-input-form",93),n.NdJ("commentChange",function(g){n.CHM(i);const T=n.oxw(7);return n.KtG(T.revisionComment=g)}),n.qZA()}if(2&e){const i=n.oxw(7);n.Q6J("comment",i.revisionComment)}}function ue(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"span")(1,"cvc-org-selector-btn-group",94),n.NdJ("selectedOrgChange",function(g){n.CHM(i);const T=n.oxw(8);return n.KtG(T.mostRecentOrg=g)}),n.TgZ(2,"button",95),n.NdJ("click",function(){n.CHM(i);const g=n.oxw(8);return n.KtG(g.onRejectRevisionsClicked())}),n._uU(3," Reject Revision "),n.qZA()()()}if(2&e){const i=n.oxw(8);n.xp6(1),n.Q6J("selectedOrg",i.mostRecentOrg),n.xp6(1),n.Q6J("nzLoading",i.isLoading)("disabled",void 0===i.revisionComment||i.revisionComment.length<10)}}function ve(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"span")(1,"cvc-org-selector-btn-group",94),n.NdJ("selectedOrgChange",function(g){n.CHM(i);const T=n.oxw(8);return n.KtG(T.mostRecentOrg=g)}),n.TgZ(2,"button",96),n.NdJ("click",function(){n.CHM(i);const g=n.oxw(8);return n.KtG(g.onAcceptRevisionClicked())}),n._uU(3," Accept Revision "),n.qZA()()()}if(2&e){const i=n.oxw(4).ngrxLet,p=n.oxw(4);n.xp6(1),n.Q6J("selectedOrg",p.mostRecentOrg),n.xp6(1),n.Q6J("nzLoading",p.isLoading)("disabled",!(0==i&&(void 0===p.revisionComment||""===p.revisionComment||p.revisionComment.length>=10)))}}function ze(e,s){if(1&e&&n._UZ(0,"i",98),2&e){n.oxw(6);const i=n.MAs(3);n.Q6J("nzPopoverContent",i)}}function Ce(e,s){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,ze,1,1,"i",97),n.qZA()),2&e){const i=n.oxw(4).ngrxLet;n.xp6(1),n.Q6J("ngIf",i&&i>0)}}function xe(e,s){1&e&&(n.TgZ(0,"span")(1,"nz-space"),n.YNc(2,ue,4,3,"span",52),n.YNc(3,ve,4,3,"span",52),n.YNc(4,Ce,2,1,"span",52),n.qZA()())}function Te(e,s){1&e&&(n.TgZ(0,"nz-space",91),n.YNc(1,de,1,1,"cvc-comment-input-form",92),n.YNc(2,xe,5,0,"span",52),n.qZA())}function he(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"div",76)(2,"div",77)(3,"nz-space",78),n.YNc(4,re,6,2,"span",52),n.YNc(5,ge,2,0,"ng-container",15),n.qZA(),n.YNc(6,fe,3,2,"ng-template",null,79,n.W1O),n.YNc(8,Te,3,0,"ng-template",null,80,n.W1O),n.qZA()(),n.BQk()),2&e){const i=n.oxw().ngrxLet;n.xp6(5),n.Q6J("ngIf",i&&i>0)}}function ye(e,s){if(1&e&&(n.ynx(0),n.YNc(1,he,10,1,"ng-container",2),n.BQk()),2&e){const i=n.oxw(4);n.xp6(1),n.Q6J("ngrxLet",i.viewer$)}}function Re(e,s){if(1&e&&(n.TgZ(0,"nz-list-item"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.Oqu(i)}}function Oe(e,s){if(1&e&&(n.TgZ(0,"nz-card",100)(1,"nz-list",101),n.YNc(2,Re,2,1,"nz-list-item",102),n.qZA()()),2&e){const i=n.oxw(3).ngrxLet;n.xp6(2),n.Q6J("ngForOf",i)}}function Ae(e,s){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,Oe,3,1,"nz-card",99),n.qZA()),2&e){const i=n.oxw(2).ngrxLet;n.xp6(1),n.Q6J("ngIf",i&&i.length>0)}}function Ze(e,s){if(1&e&&(n.TgZ(0,"nz-descriptions-item",107),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.Q6J("nzTitle",i.fieldName),n.xp6(1),n.Oqu(i.error)}}function Le(e,s){if(1&e&&(n.TgZ(0,"nz-card",104)(1,"nz-descriptions",105),n.YNc(2,Ze,2,2,"nz-descriptions-item",106),n.qZA()()),2&e){const i=n.oxw(4).ngrxLet;n.xp6(2),n.Q6J("ngForOf",i)}}function be(e,s){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,Le,3,1,"nz-card",103),n.qZA()),2&e){const i=n.oxw(3).ngrxLet;n.xp6(1),n.Q6J("ngIf",i&&i.length>0)}}function Fe(e,s){1&e&&(n.TgZ(0,"nz-space",91),n.YNc(1,Ae,2,1,"span",52),n.YNc(2,be,2,1,"span",52),n.qZA())}function Me(e,s){if(1&e&&(n.ynx(0),n.YNc(1,ye,2,1,"ng-container",2),n.YNc(2,Fe,3,0,"ng-template",null,75,n.W1O),n.BQk()),2&e){const i=n.oxw(3);n.xp6(1),n.Q6J("ngrxLet",i.totalErrorCount$)}}function Ee(e,s){if(1&e&&(n.ynx(0),n.YNc(1,Me,4,1,"ng-container",2),n.BQk()),2&e){const i=n.oxw(2);n.xp6(1),n.Q6J("ngrxLet",i.genericErrors$)}}function Ne(e,s){if(1&e&&n.YNc(0,Ee,2,1,"ng-container",2),2&e){const i=n.oxw();n.Q6J("ngrxLet",i.validationErrors$)}}class mn{constructor(s,i,p,g,T){this.viewerService=s,this.networkErrorService=i,this.acceptRevisionsGql=p,this.rejectRevisionsGql=g,this.validationGql=T,this.refetchQueries=[],this.selectedRevisionIds=[],this.isLoading=!1,this.success=!1,this.validationPopoverVisible=!1,this.destroy$=new u.x,this.revisionSetSelectedEvent=new n.vpe,this.revisionMutationCompleted=new n.vpe,this.acceptRevisionsMutator=new v.U(i),this.rejectRevisionsMutator=new v.U(i),this.viewer$=this.viewerService.viewer$}ngOnChanges(s){this.untypedRevisons=this.revisions,this.selectedRevisionIds=[],this.queryRef&&this.queryRef.refetch({ids:this.selectedRevisionIds})}ngOnInit(){this.viewerService.viewer$.subscribe(s=>{this.mostRecentOrg=s.mostRecentOrg}),this.queryRef=this.validationGql.watch({ids:[]}),this.genericErrors$=this.queryRef.valueChanges.pipe((0,c.U)(({data:s})=>s.validateRevisionsForAcceptance.genericErrors)),this.validationErrors$=this.queryRef.valueChanges.pipe((0,c.U)(({data:s})=>s.validateRevisionsForAcceptance.validationErrors)),this.totalErrorCount$=this.queryRef.valueChanges.pipe((0,c.U)(({data:s})=>s.validateRevisionsForAcceptance.genericErrors.length+s.validateRevisionsForAcceptance.validationErrors.length),(0,L.O)(0)),this.untypedRevisons=this.revisions}onChangesetSelected(s){this.revisionSetSelectedEvent.emit(s)}onRevisionCheckboxClicked(s,i){s?this.selectedRevisionIds.push(i):this.selectedRevisionIds=this.selectedRevisionIds.filter(p=>p!=i),this.queryRef.refetch({ids:this.selectedRevisionIds})}setupMutationResultHandlers(s,i){s.submitSuccess$.pipe((0,J.R)(this.destroy$)).subscribe(p=>{p&&(this.isLoading=!1,this.revisionMutationCompleted.emit(),this.errors=void 0,this.success=i,this.validationPopoverVisible=!1,this.selectedRevisionIds=[])}),s.submitError$.pipe((0,J.R)(this.destroy$)).subscribe(p=>{p.length>0&&(this.isLoading=!1,this.success=!1,this.errors=p,this.validationPopoverVisible=!1,this.selectedRevisionIds=[])})}onRejectRevisionsClicked(){if(this.revisionComment&&""!==this.revisionComment){this.isLoading=!0;let s=this.rejectRevisionsMutator.mutate(this.rejectRevisionsGql,{input:{ids:this.selectedRevisionIds,organizationId:this.mostRecentOrg?.id,comment:this.revisionComment}},{refetchQueries:this.refetchQueries});this.setupMutationResultHandlers(s,"rejected")}}onAcceptRevisionClicked(){this.isLoading=!0;let s=this.acceptRevisionsMutator.mutate(this.acceptRevisionsGql,{input:{ids:this.selectedRevisionIds,organizationId:this.mostRecentOrg?.id,comment:""===this.revisionComment?void 0:this.revisionComment}},{refetchQueries:this.refetchQueries});this.setupMutationResultHandlers(s,"accepted")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(s){this.errors=this.errors?.filter(i=>i!=s)}onSuccessBannerClose(){this.success=!1}}function Qe(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"cvc-revision-list",14),n.NdJ("revisionSetSelectedEvent",function(g){n.CHM(i);const T=n.oxw(2);return n.KtG(T.onRevisionSetSelected(g))})("revisionMutationCompleted",function(){n.CHM(i);const g=n.oxw(2);return n.KtG(g.refresh())}),n.ALo(1,"ngrxPush"),n.qZA()}if(2&e){const i=n.oxw(2);n.Q6J("revisions",n.lcZ(1,2,i.revisions$))("refetchQueries",i.refetchQueries)}}function Se(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"button",17),n.NdJ("click",function(){n.CHM(i);const g=n.oxw(2).ngrxLet,T=n.oxw(2);return n.KtG(T.loadMore(null==g?null:g.endCursor))}),n._uU(1," Load More "),n.qZA()}}function Ie(e,s){1&e&&(n.ynx(0),n.YNc(1,Se,2,0,"button",16),n.BQk())}function Je(e,s){if(1&e&&(n.ynx(0),n.YNc(1,Ie,2,0,"ng-container",15),n.BQk()),2&e){const i=s.ngrxLet;n.xp6(1),n.Q6J("ngIf",i&&(null==i?null:i.hasNextPage)&&i.endCursor)}}function Pe(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"nz-row")(1,"nz-tag",19),n.NdJ("nzOnClose",function(){n.CHM(i);const g=n.oxw(3);return n.KtG(g.onSetFilterClearClicked())}),n._uU(2),n.qZA()()}if(2&e){const i=n.oxw(3);n.xp6(2),n.hij("Group: ",i.filteredSet,"")}}function Ye(e,s){1&e&&(n.TgZ(0,"nz-space",4),n.YNc(1,Pe,3,1,"nz-row",18),n.qZA())}function Ue(e,s){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.Oqu(i.displayName)}}function De(e,s){if(1&e&&n._UZ(0,"nz-avatar",22),2&e){const i=n.oxw().$implicit;n.Q6J("nzSrc",i.profileImagePath)}}function $e(e,s){if(1&e&&(n._UZ(0,"nz-avatar",23),n.ALo(1,"uppercase")),2&e){const i=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,i.username.charAt(0)))}}function Be(e,s){if(1&e&&(n.YNc(0,De,1,1,"nz-avatar",20),n.YNc(1,$e,2,3,"ng-template",null,21,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&e){const i=s.$implicit,p=n.MAs(2);n.Q6J("ngIf",i.profileImagePath)("ngIfElse",p),n.xp6(4),n.Oqu(i.username)}}function we(e,s){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.Oqu(i.displayName)}}function je(e,s){if(1&e&&n._UZ(0,"nz-avatar",22),2&e){const i=n.oxw().$implicit;n.Q6J("nzSrc",i.profileImagePath)}}function We(e,s){if(1&e&&(n._UZ(0,"nz-avatar",23),n.ALo(1,"uppercase")),2&e){const i=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,i.username.charAt(0)))}}function Ge(e,s){if(1&e&&(n.YNc(0,je,1,1,"nz-avatar",20),n.YNc(1,We,2,3,"ng-template",null,21,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&e){const i=s.$implicit,p=n.MAs(2);n.Q6J("ngIf",i.profileImagePath)("ngIfElse",p),n.xp6(4),n.Oqu(i.username)}}mn.\u0275fac=function(s){return new(s||mn)(n.Y36(P.a),n.Y36(K.Y),n.Y36(r.ti),n.Y36(r.VZq),n.Y36(r.Qzn))},mn.\u0275cmp=n.Xpm({type:mn,selectors:[["cvc-revision-list"]],inputs:{revisions:"revisions",refetchQueries:"refetchQueries"},outputs:{revisionSetSelectedEvent:"revisionSetSelectedEvent",revisionMutationCompleted:"revisionMutationCompleted"},features:[n.TTD],decls:5,vars:3,consts:[["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],[4,"ngrxLet"],["moderationButtons",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose"],["nzTitle","Revisions",1,"card-list",3,"nzExtra"],["class","revision-list",4,"ngIf","ngIfElse"],["noRevisions",""],[1,"revision-list"],[3,"nzHeader","nzExtra","nzActive",4,"ngFor","ngForOf"],[3,"nzHeader","nzExtra","nzActive"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"],["revCardHeaderTitle",""],["revCardHeaderExtra",""],["entityType","Gene",3,"diffObject"],["itemTemplate",""],[3,"gene"],["entityType","Sources",3,"diffObject"],[3,"source"],["entityType","Disease",3,"diffObject"],[3,"disease"],["entityType","Molecular Profile",3,"diffObject"],[3,"molecularProfile"],["entityType","Therapies",3,"diffObject"],[3,"therapy"],["entityType","Variant Aliases",3,"diffObject"],["entityType","Molecular Profile Aliases",3,"diffObject"],["entityType","ClinVar Entries",3,"diffObject"],["entityType","ClinGen/CGC/VICC Code(s)",3,"diffObject"],["entityType","ACMG/AMP Code(s)",3,"diffObject"],["entityType","NCCN Guideline",3,"diffObject"],["entityType","HGVS Descriptions",3,"diffObject"],["entityType","Variant Types",3,"diffObject"],[3,"variantType"],["entityType","Phenotypes",3,"diffObject"],[3,"phenotype"],["entityType","Variant",3,"diffObject"],[3,"variant"],["entityType","Variants",3,"diffObject"],["entityType","Source",3,"diffObject"],["entityType","Evidence",3,"diffObject"],[3,"evidence"],[3,"currentValue","suggestedValue","left","right","entityType"],["nzSpan","16"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"commentBodySegments"],[3,"user"],[4,"nzSpaceItem"],["nz-icon","","nzTheme","twotone","nzType","civic-revision",3,"nzTwotoneColor"],["nz-popover","","nz-icon","","nzType","comment","nzTheme","outline",3,"nzPopoverContent",4,"nzSpaceItem"],["creationCommentTemplate",""],["nz-popover","","nz-icon","","nzType","comment","nzTheme","outline",3,"nzPopoverContent"],["nzSize","small",3,"click"],[3,"status",4,"nzSpaceItem"],["nzType","vertical",4,"nzSpaceItem"],["nz-button","","nzType","link",3,"click",4,"nzSpaceItem"],[4,"ngIf","ngIfElse"],["noRevisor",""],["nz-typography","","nzType","secondary"],[3,"status"],["nzType","vertical"],["nz-button","","nzType","link",3,"click"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions.",3,"nzDisabled",4,"ngIf","ngIfElse"],["loggedIn",""],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions.",3,"nzDisabled"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Curators may only reject their own revisions.",3,"nzDisabled",4,"ngIf","ngIfElse"],["canRevise",""],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Curators may only reject their own revisions.",3,"nzDisabled"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Select Revision for Acceptance/Rejection",3,"nzCheckedChange"],["nzNotFoundImage","simple","nzNotFoundContent","No Revisions matching filters"],["validationErrorTemplate",""],["nz-row","",2,"margin-top","1em"],["nz-col","","nzSpan","24",2,"text-align","right"],["nzDirection","horizontal"],["validationPopoverTitleTemplate",""],["validationPopoverContentTemplate",""],["notSignedIn",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click"],["nz-icon","","nzType","caret-down","nzTheme","outline"],["nz-icon","","nzType","exclamation-circle","nzTheme","twotone","nzTwotoneColor","red","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent",4,"nzSpaceItem"],["nz-icon","","nzType","exclamation-circle","nzTheme","twotone","nzTwotoneColor","red","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzDirection","vertical"],[3,"comment","commentChange",4,"nzSpaceItem"],[3,"comment","commentChange"],[3,"selectedOrg","selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzSize","small","nzDanger","",3,"nzLoading","disabled","click"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzSize","small",3,"nzLoading","disabled","click"],["nz-icon","","nzTwotoneColor","red","nzType","exclamation-circle","nzTheme","twotone","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent",4,"ngIf"],["nz-icon","","nzTwotoneColor","red","nzType","exclamation-circle","nzTheme","twotone","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent"],["nzTitle","Errors",4,"ngIf"],["nzTitle","Errors"],["nzSize","small"],[4,"ngFor","ngForOf"],["nzTitle","Validation Errors",4,"ngIf"],["nzTitle","Validation Errors"],["nzBordered",""],[3,"nzTitle",4,"ngFor","ngForOf"],[3,"nzTitle"]],template:function(s,i){1&s&&(n.YNc(0,Hn,1,1,"nz-alert",0),n.YNc(1,kn,1,1,"nz-alert",1),n.YNc(2,ee,5,3,"ng-container",2),n.YNc(3,Ne,1,1,"ng-template",null,3,n.W1O)),2&s&&(n.Q6J("ngForOf",i.errors),n.xp6(1),n.Q6J("ngIf",i.success),n.xp6(1),n.Q6J("ngrxLet",i.viewer$))},dependencies:[d.sg,d.O5,d.tP,d.PC,d.RF,d.n9,d.ED,O.t3,O.SK,$.n_,$.AA,B.bd,R.NU,R.$1,F.j,z.ZU,I.p9,C.Ie,A.g,Y.SY,q.lU,Z.Ls,nn.R7,nn.uj,tn.m,en.q,_n,Qn.H,Sn.T,cn,In.I,Jn.n,Pn.T,Yn.i,ln.I,Un.O,Dn.j,$n.h,Bn.b,wn.p,jn.m,un.Zv,un.yH,N.ix,E.w,Q.dQ,Wn.r,y.eJ,Gn.I,Kn.a,Vn.x],styles:["[_nghost-%COMP%]{display:block}nz-list[_ngcontent-%COMP%]   .kept[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{background-color:#f6ffed;color:#135200}nz-list[_ngcontent-%COMP%]   .removed[_ngcontent-%COMP%]{background-color:#fff1f0;color:#820014}nz-list[_ngcontent-%COMP%]   .suggested[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}"]});const Ct=function(){return[]};function Ke(e,s){if(1&e){const i=n.EpF();n.ynx(0),n.TgZ(1,"nz-row",2)(2,"nz-col",3)(3,"nz-space",4),n.YNc(4,Qe,2,4,"cvc-revision-list",5),n.YNc(5,Je,2,1,"ng-container",6),n.qZA()(),n.TgZ(6,"nz-col",7),n.YNc(7,Ye,2,0,"nz-space",8),n.TgZ(8,"cvc-participant-list",9),n.NdJ("participantSelectedEvent",function(g){n.CHM(i);const T=n.oxw();return n.KtG(T.onStatusSelected(g))}),n.YNc(9,Ue,2,1,"ng-template",null,10,n.W1O),n.qZA(),n.TgZ(11,"cvc-participant-list",11),n.NdJ("participantSelectedEvent",function(g){n.CHM(i);const T=n.oxw();return n.KtG(T.onRevisorSelected(g))}),n.ALo(12,"ngrxPush"),n.YNc(13,Be,5,3,"ng-template",null,10,n.W1O),n.qZA(),n.TgZ(15,"cvc-participant-list",12),n.NdJ("participantSelectedEvent",function(g){n.CHM(i);const T=n.oxw();return n.KtG(T.onFieldNameSelected(g))}),n.ALo(16,"ngrxPush"),n.YNc(17,we,2,1,"ng-template",null,10,n.W1O),n.qZA(),n.TgZ(19,"cvc-participant-list",13),n.NdJ("participantSelectedEvent",function(g){n.CHM(i);const T=n.oxw();return n.KtG(T.onResolverSelected(g))}),n.ALo(20,"ngrxPush"),n.YNc(21,Ge,5,3,"ng-template",null,10,n.W1O),n.qZA()()(),n.BQk()}if(2&e){const i=n.oxw();n.xp6(1),n.Q6J("nzGutter",16),n.xp6(4),n.Q6J("ngrxLet",i.pageInfo$),n.xp6(2),n.Q6J("ngIf",i.filteredSet),n.xp6(1),n.Q6J("preselectedOption",i.preselectedRevisionStatus)("participantList",i.selectableStatuses),n.xp6(3),n.Q6J("participantList",n.lcZ(12,8,i.uniqueRevisors$)||n.DdM(14,Ct)),n.xp6(4),n.Q6J("participantList",n.lcZ(16,10,i.revisionFields$)||n.DdM(15,Ct)),n.xp6(4),n.Q6J("participantList",n.lcZ(20,12,i.uniqueResolvers$)||n.DdM(16,Ct))}}function Ve(e,s){1&e&&(n.ynx(0),n.TgZ(1,"nz-row",25),n._UZ(2,"i",26),n.qZA(),n.BQk())}function He(e,s){1&e&&n._UZ(0,"nz-empty",27)}function ke(e,s){if(1&e&&(n.YNc(0,Ve,3,0,"ng-container",0),n.ALo(1,"ngrxPush"),n.YNc(2,He,1,0,"ng-template",null,24,n.W1O)),2&e){const i=n.MAs(3),p=n.oxw();n.Q6J("ngIf",n.lcZ(1,2,p.isLoading$))("ngIfElse",i)}}class fn{constructor(s,i,p,g,T,X,xt,qe,Xe,ni,ti,ei,ii,oi){this.gql=s,this.route=i,this.variantDetailGql=p,this.variantSummaryGql=g,this.variantGroupDetailGql=T,this.variantGroupSummaryGql=X,this.assertionDetailGql=xt,this.assertionSummaryGql=qe,this.geneDetailGql=Xe,this.geneSummaryGql=ni,this.evidenceDetailGql=ti,this.evidenceSummaryGql=ei,this.molecularProfileDetailGql=ii,this.molecularProfileSummaryGql=oi,this.filteredSet=void 0,this.selectableStatuses=[{id:4,displayName:"New",value:r.FJi.New},{id:1,displayName:"Accepted",value:r.FJi.Accepted},{id:2,displayName:"Rejected",value:r.FJi.Rejected},{id:3,displayName:"Superseded",value:r.FJi.Superseded}],this.preselectedRevisionStatus=this.selectableStatuses[0],this.defaultPageSize=10,this.refetchQueries=[]}ngOnInit(){switch(this.routeSub=this.route.params.subscribe(s=>{this.queryParamsSub=this.route.queryParams.subscribe(i=>{let p={first:this.defaultPageSize,subject:{id:this.id,entityType:this.entityType},status:r.FJi.New};i.revisionsetId&&(this.filteredSet=i.revisionsetId,this.preselectedRevisionStatus=void 0,p.status=void 0,p.revisionsetId=i.revisionsetId),this.queryRef=this.gql.watch(p);let g=this.queryRef.valueChanges;this.revisions$=g.pipe((0,h.j)("data","revisions","edges"),(0,c.U)(T=>T.map(X=>X.node))),this.isLoading$=g.pipe((0,c.U)(T=>T.loading),(0,L.O)(!0)),this.pageInfo$=g.pipe((0,h.j)("data","revisions","pageInfo")),this.uniqueRevisors$=g.pipe((0,c.U)(({data:T})=>T.revisions?.uniqueRevisors)),this.uniqueResolvers$=g.pipe((0,c.U)(({data:T})=>T.revisions?.uniqueResolvers)),this.revisionFields$=g.pipe((0,c.U)(({data:T})=>T.revisions?.revisedFieldNames.map((X,xt)=>({...X,id:xt})))),this.unfilteredCount$=g.pipe((0,h.j)("data","revisions","unfilteredCountForSubject"))})}),this.entityType){case r.oRL.Variant:return this.refetchQueries.push({query:this.variantDetailGql.document,variables:{variantId:this.id}}),void this.refetchQueries.push({query:this.variantSummaryGql.document,variables:{variantId:this.id}});case r.oRL.Assertion:return this.refetchQueries.push({query:this.assertionDetailGql.document,variables:{assertionId:this.id}}),void this.refetchQueries.push({query:this.assertionSummaryGql.document,variables:{assertionId:this.id}});case r.oRL.EvidenceItem:return this.refetchQueries.push({query:this.evidenceDetailGql.document,variables:{evidenceId:this.id}}),void this.refetchQueries.push({query:this.evidenceSummaryGql.document,variables:{evidenceId:this.id}});case r.oRL.Gene:return this.refetchQueries.push({query:this.geneDetailGql.document,variables:{geneId:this.id}}),void this.refetchQueries.push({query:this.geneSummaryGql.document,variables:{geneId:this.id}});case r.oRL.VariantGroup:return this.refetchQueries.push({query:this.variantGroupDetailGql.document,variables:{variantGroupId:this.id}}),void this.refetchQueries.push({query:this.variantGroupSummaryGql.document,variables:{variantGroupId:this.id}});case r.oRL.MolecularProfile:return this.refetchQueries.push({query:this.molecularProfileDetailGql.document,variables:{molecularProfileId:this.id}}),void this.refetchQueries.push({query:this.molecularProfileSummaryGql.document,variables:{molecularProfileId:this.id}})}}ngOnDestroy(){this.routeSub?.unsubscribe(),this.queryParamsSub?.unsubscribe()}onFieldNameSelected(s){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},fieldName:s?s.name:void 0})}onRevisorSelected(s){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},originatingUserId:s?s.id:void 0})}onResolverSelected(s){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},resolvingUserId:s?s.id:void 0})}onStatusSelected(s){this.preselectedRevisionStatus=s,this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},status:s?s.value:void 0})}onRevisionSetSelected(s){this.filteredSet=s,this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},revisionsetId:s||void 0})}onSetFilterClearClicked(){this.filteredSet=void 0,this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},revisionsetId:void 0})}refresh(){this.queryRef.refetch()}loadMore(s){this.queryRef?.fetchMore({variables:{first:this.defaultPageSize,after:s}})}}fn.\u0275fac=function(s){return new(s||fn)(n.Y36(r.L5n),n.Y36(t.gz),n.Y36(r.iJT),n.Y36(r.Bo4),n.Y36(r.Qtd),n.Y36(r.q1D),n.Y36(r.A94),n.Y36(r.ejK),n.Y36(r.TNk),n.Y36(r.cCu),n.Y36(r.pHu),n.Y36(r.sBY),n.Y36(r.AMF),n.Y36(r.Tg0))},fn.\u0275cmp=n.Xpm({type:fn,selectors:[["cvc-revisions-list-and-filter"]],inputs:{id:"id",entityType:"entityType"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noRevisions",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"revisions","refetchQueries","revisionSetSelectedEvent","revisionMutationCompleted",4,"nzSpaceItem"],[4,"ngrxLet"],["nzSpan","6"],["nzDirection","vertical",4,"ngIf"],["listTitle","Filter by Revision Status",3,"preselectedOption","participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Filter by Revisor",3,"participantList","participantSelectedEvent"],["listTitle","Filter by Field",3,"participantList","participantSelectedEvent"],["listTitle","Filter by Resolver",3,"participantList","participantSelectedEvent"],[3,"revisions","refetchQueries","revisionSetSelectedEvent","revisionMutationCompleted"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[4,"nzSpaceItem"],["nzMode","closeable",3,"nzOnClose"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["noneFound",""],["nzJustify","center"],["nz-icon","","nzType","loading",2,"font-size","32px"],["nzNotFoundImage","simple","nzNotFoundContent","Entity has no Revisions"]],template:function(s,i){if(1&s&&(n.YNc(0,Ke,23,17,"ng-container",0),n.ALo(1,"ngrxPush"),n.YNc(2,ke,4,4,"ng-template",null,1,n.W1O)),2&s){const p=n.MAs(3);n.Q6J("ngIf",n.lcZ(1,2,i.unfilteredCount$))("ngIfElse",p)}},dependencies:[d.O5,y.eJ,O.t3,O.SK,R.NU,R.$1,F.j,b.Dz,I.p9,N.ix,E.w,Q.dQ,Z.Ls,f.l,mn,d.gd,y.fM],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]})},2914:(w,M,o)=>{o.d(M,{A:()=>Q});var r=o(6895),c=o(2635),L=o(3679),h=o(6152),n=o(1971),t=o(6903),d=o(6672),y=o(8823),O=o(1150),R=o(4383),F=o(6059),b=o(4788),I=o(6616),N=o(1102),E=o(4650);class Q{}Q.\u0275fac=function(f){return new(f||Q)},Q.\u0275mod=E.oAB({type:Q}),Q.\u0275inj=E.cJS({imports:[r.ez,c._N,c.pP,L.Jb,h.Ph,n.vh,t.zf,d.X,y.ZJ,R.Rt,b.Xo,I.sL,N.PV,O.N,F.i]})},759:(w,M,o)=>{o.d(M,{N:()=>B});var r=o(6579),c=o(4650),L=o(7630),h=o(6895),n=o(8823),t=o(9116),d=o(4383),y=o(6581),O=o(9194),R=o(6265),F=o(2937);function b(z,C){1&z&&(c.ynx(0),c._uU(1,", "),c.BQk())}function I(z,C){if(1&z&&(c.ynx(0),c._uU(1),c.ALo(2,"eventVerbiage"),c.YNc(3,b,2,0,"ng-container",12),c.BQk()),2&z){const A=C.$implicit,Y=C.last;c.xp6(1),c.hij(" ",c.Dn7(2,2,A.action,"contributor-card",A.count)," "),c.xp6(2),c.Q6J("ngIf",!Y)}}function N(z,C){if(1&z&&(c.TgZ(0,"nz-descriptions",8)(1,"nz-descriptions-item",9),c.YNc(2,I,4,6,"ng-container",10),c.qZA(),c.TgZ(3,"nz-descriptions-item",11),c._uU(4),c.ALo(5,"date"),c.qZA()()),2&z){const A=c.oxw(2).$implicit;c.Q6J("nzColumn",1),c.xp6(2),c.Q6J("ngForOf",A.uniqueActions),c.xp6(2),c.hij(" ",c.lcZ(5,3,A.lastActionDate)," ")}}function E(z,C){if(1&z&&(c.TgZ(0,"cvc-user-popover",6),c.YNc(1,N,6,5,"ng-template",null,7,c.W1O),c.qZA()),2&z){const A=c.oxw().$implicit;c.Q6J("userId",A.user.id)}}function Q(z,C){if(1&z&&(c.TgZ(0,"a",3),c._UZ(1,"nz-avatar",4),c.YNc(2,E,3,1,"ng-template",null,5,c.W1O),c.qZA()),2&z){const A=C.$implicit,Y=c.MAs(3);c.MGl("routerLink","/users/",A.user.id,""),c.xp6(1),c.Q6J("nzSize",14)("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",Y)("nzSrc",A.user.profileImagePath)}}function Z(z,C){if(1&z&&(c.ynx(0),c.YNc(1,Q,4,5,"a",2),c.BQk()),2&z){const A=c.oxw();c.xp6(1),c.Q6J("ngForOf",A.sortedContributors)}}function f(z,C){1&z&&c._uU(0," None ")}class u{ngOnInit(){if(void 0===this.contributors)throw new Error("Must pass a list of contributors into the contributor stack");this.sortedContributors=this.contributors.slice(),this.sortedContributors.sort((C,A)=>A.totalActionCount-C.totalActionCount)}}u.\u0275fac=function(C){return new(C||u)},u.\u0275cmp=c.Xpm({type:u,selectors:[["cvc-contributor-stack"]],inputs:{contributors:"contributors"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noContributors",""],["class","avatar",3,"routerLink",4,"ngFor","ngForOf"],[1,"avatar",3,"routerLink"],["nz-popover","","nzPopoverTrigger","hover","nzPopoverPlacement","bottomRight","nzIcon","user","nzSize","small",3,"nzSize","nzPopoverMouseEnterDelay","nzPopoverContent","nzSrc"],["curatorPopover",""],[3,"userId"],["additionalMetadata",""],["nzBordered","","nzTitle","Activity","nzSize","small",3,"nzColumn"],["nzTitle","Contributions"],[4,"ngFor","ngForOf"],["nzTitle","Last Contribution"],[4,"ngIf"]],template:function(C,A){if(1&C&&(c.YNc(0,Z,2,1,"ng-container",0),c.YNc(1,f,1,0,"ng-template",null,1,c.W1O)),2&C){const Y=c.MAs(2);c.Q6J("ngIf",A.sortedContributors&&A.sortedContributors.length>0)("ngIfElse",Y)}},dependencies:[h.sg,h.O5,t.rH,d.Dz,y.lU,O.R7,O.uj,R.q,h.uU,F.R],encapsulation:2});var v=o(2635);function J(z,C){if(1&z&&(c.ynx(0),c._UZ(1,"cvc-contributor-stack",5),c.BQk()),2&z){const A=C.ngIf;c.xp6(1),c.Q6J("contributors",A)}}function P(z,C){1&z&&c._uU(0," None ")}function K(z,C){if(1&z&&(c.ynx(0),c._UZ(1,"cvc-contributor-stack",5),c.BQk()),2&z){const A=C.ngIf;c.xp6(1),c.Q6J("contributors",A)}}function $(z,C){1&z&&c._uU(0," None ")}class B{constructor(C){this.gql=C}ngOnInit(){if(void 0===this.subscribable)throw new Error("Must pass a subscribable into ContributorAvatars component.");let C=this.gql.watch({subscribable:this.subscribable}).valueChanges;this.curators$=C.pipe((0,r.j)("data","contributors","curators")),this.editors$=C.pipe((0,r.j)("data","contributors","editors"))}}B.\u0275fac=function(C){return new(C||B)(c.Y36(L.kQf))},B.\u0275cmp=c.Xpm({type:B,selectors:[["cvc-contributor-avatars"]],inputs:{subscribable:"subscribable"},decls:14,vars:8,consts:[["nz-typography","","nzType","secondary",1,"role-group-label"],[1,"role-group"],[4,"ngIf","ngIfElse"],["noCurators",""],["noEditors",""],[3,"contributors"]],template:function(C,A){if(1&C&&(c.TgZ(0,"span",0),c._uU(1,"Curators:"),c.qZA(),c.TgZ(2,"div",1),c.YNc(3,J,2,1,"ng-container",2),c.ALo(4,"ngrxPush"),c.YNc(5,P,1,0,"ng-template",null,3,c.W1O),c.qZA(),c.TgZ(7,"span",0),c._uU(8,"Editors:"),c.qZA(),c.TgZ(9,"div",1),c.YNc(10,K,2,1,"ng-container",2),c.ALo(11,"ngrxPush"),c.YNc(12,$,1,0,"ng-template",null,4,c.W1O),c.qZA()),2&C){const Y=c.MAs(6),q=c.MAs(13);c.xp6(3),c.Q6J("ngIf",c.lcZ(4,4,A.curators$))("ngIfElse",Y),c.xp6(7),c.Q6J("ngIf",c.lcZ(11,6,A.editors$))("ngIfElse",q)}},dependencies:[h.O5,n.ZU,u,v.fM],styles:["[_nghost-%COMP%]{display:inline-block}.role-group-label[_ngcontent-%COMP%]{margin-left:12px}.role-group[_ngcontent-%COMP%]{display:inline-block}.role-group[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{display:inline-block;margin-left:2px}"]})},5750:(w,M,o)=>{o.d(M,{Z:()=>b});var r=o(6895),c=o(2635),L=o(8823),h=o(9116),n=o(4383),t=o(6581),d=o(9444),y=o(6081),O=o(9194),R=o(4650);class F{}F.\u0275fac=function(N){return new(N||F)},F.\u0275mod=R.oAB({type:F}),F.\u0275inj=R.cJS({imports:[r.ez,h.Bz,n.Rt,t.$6,O.q6,d.s,y.J]});class b{}b.\u0275fac=function(N){return new(N||b)},b.\u0275mod=R.oAB({type:b}),b.\u0275inj=R.cJS({imports:[r.ez,c._N,c.pP,L.ZJ,F]})},9077:(w,M,o)=>{o.d(M,{Q:()=>Z});var r=o(6123),c=o(7630),L=o(7579),h=o(4004),n=o(2722),t=o(4650),d=o(9169),y=o(6895),O=o(6616),R=o(7044),F=o(1664),b=o(1102),I=o(7570),N=o(2635);function E(f,u){if(1&f){const v=t.EpF();t.ynx(0),t.TgZ(1,"button",2),t.NdJ("click",function(){t.CHM(v);const P=t.oxw();return t.KtG(P.unsubscribe())}),t._UZ(2,"i",3),t.qZA(),t.BQk()}if(2&f){const v=t.oxw();t.xp6(1),t.Q6J("nzLoading",v.isSubmitting)}}function Q(f,u){if(1&f){const v=t.EpF();t.TgZ(0,"button",4),t.NdJ("click",function(){t.CHM(v);const P=t.oxw();return t.KtG(P.subscribe())}),t._UZ(1,"i",5),t.qZA()}if(2&f){const v=t.oxw();t.Q6J("nzLoading",v.isSubmitting)}}class Z{constructor(u,v,J,P){this.isSubscribedGQL=u,this.unsubscribeMutation=v,this.subscribeMutation=J,this.networkErrorService=P,this.isSubmitting=!1,this.destroy$=new L.x,this.unsubscribeMutator=new r.U(P),this.subscribeMutator=new r.U(P)}ngOnInit(){if(void 0===this.viewer)throw new Error("Must pass in a viewer to the CvcEntitySubscriptionButtonComponent");if(void 0===this.typename)throw new Error("Must pass in a typename to the CvcEntitySubscriptionButtonComponent");if(void 0===this.subscribableId)throw new Error("Must pass in a subscribableId to the CvcEntitySubscriptionButtonComponent");this.subscribable={id:this.subscribableId,entityType:c.o71[this.typename]},this.queryRef=this.isSubscribedGQL.watch({subscribable:this.subscribable}),this.existingSubscription$=this.queryRef.valueChanges.pipe((0,h.U)(({data:v})=>v.subscriptionForEntity))}subscribe(){this.subscribable&&(this.isSubmitting=!0,this.subscribeMutator.mutate(this.subscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,n.R)(this.destroy$)).subscribe(v=>{v&&(this.queryRef?.refetch(),this.isSubmitting=!1)}))}unsubscribe(){this.subscribable&&(this.isSubmitting=!0,this.unsubscribeMutator.mutate(this.unsubscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,n.R)(this.destroy$)).subscribe(v=>{v&&(this.queryRef?.refetch(),this.isSubmitting=!1)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}Z.\u0275fac=function(u){return new(u||Z)(t.Y36(c.A4J),t.Y36(c.m$d),t.Y36(c.jMx),t.Y36(d.Y))},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["cvc-entity-subscription-button"]],inputs:{viewer:"viewer",typename:"typename",subscribableId:"subscribableId"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noSub",""],["nz-button","","nz-tooltip","Unsubscribe","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","bell","nzTheme","fill"],["nz-button","","nz-tooltip","Subscribe","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","bell","nzTheme","outline"]],template:function(u,v){if(1&u&&(t.YNc(0,E,3,1,"ng-container",0),t.ALo(1,"ngrxPush"),t.YNc(2,Q,2,1,"ng-template",null,1,t.W1O)),2&u){const J=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,v.existingSubscription$))("ngIfElse",J)}},dependencies:[y.O5,O.ix,R.w,F.dQ,b.Ls,I.SY,N.fM],styles:["[_nghost-%COMP%]{display:block}"]})},4609:(w,M,o)=>{o.d(M,{g:()=>d});var r=o(6895),c=o(6616),L=o(2635),h=o(1102),n=o(7570),t=o(4650);class d{}d.\u0275fac=function(O){return new(O||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[r.ez,c.sL,h.PV,n.cg,L._N,L.pP]})},2338:(w,M,o)=>{o.d(M,{I:()=>c});var r=o(4650);class c{transform(h){if(h){let t=h.toLowerCase().replace(/_/g," ").split(" ");for(var n=0;n<t.length;n++)t[n]=t[n].charAt(0).toUpperCase()+t[n].slice(1);return t.join(" ")}return""}}c.\u0275fac=function(h){return new(h||c)},c.\u0275pipe=r.Yjl({name:"enumToTitle",type:c,pure:!0})}}]);