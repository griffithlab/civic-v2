"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[8885],{8616:(I,u,t)=>{t.d(u,{u:()=>n});var r=t(5e3),_=t(685),m=t(1912),d=t(3618),y=t(647);function s(l,z){1&l&&(r.TgZ(0,"span"),r._uU(1," You must be logged in to view this page. "),r.qZA())}function h(l,z){1&l&&r._UZ(0,"cvc-login-button")}function p(l,z){1&l&&(r.TgZ(0,"nz-typography",4),r._UZ(1,"i",5),r.qZA())}let n=(()=>{class l{}return l.\u0275fac=function(f){return new(f||l)},l.\u0275cmp=r.Xpm({type:l,selectors:[["cvc-login-prompt"]],decls:7,vars:3,consts:[[3,"nzNotFoundImage","nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["emptyImage",""],["nzType","secondary"],["nz-icon","","nzType","login","nzTheme","outline",2,"font-size","50pt"]],template:function(f,c){if(1&f&&(r.TgZ(0,"nz-empty",0),r.YNc(1,s,2,0,"ng-template",null,1,r.W1O),r.YNc(3,h,1,0,"ng-template",null,2,r.W1O),r.qZA(),r.YNc(5,p,2,0,"ng-template",null,3,r.W1O)),2&f){const v=r.MAs(2),C=r.MAs(4),T=r.MAs(6);r.Q6J("nzNotFoundImage",T)("nzNotFoundContent",v)("nzNotFoundFooter",C)}},directives:[_.p9,m.s,d.ZU,y.Ls],styles:["[_nghost-%COMP%]{display:inline-block}"]}),l})()},9386:(I,u,t)=>{t.d(u,{a:()=>h});var r=t(9808),_=t(1844),m=t(685),d=t(647),y=t(3618),s=t(5e3);let h=(()=>{class p{}return p.\u0275fac=function(l){return new(l||p)},p.\u0275mod=s.oAB({type:p}),p.\u0275inj=s.cJS({imports:[[r.ez,_.B,m.Xo,d.PV,y.ZJ]]}),p})()},8926:(I,u,t)=>{t.d(u,{A:()=>m});var r=t(5e3),_=t(2313);let m=(()=>{class d{constructor(s){this.sanitizer=s}transform(s,h){if(!h||""==h)return s;const p=new RegExp(h,"gi"),n=s.match(p);if(!n)return s;let l=s.replace(p,`<span class='typeahead-match'>${n[0]}</span>`);return this.sanitizer.bypassSecurityTrustHtml(l)}}return d.\u0275fac=function(s){return new(s||d)(r.Y36(_.H7,16))},d.\u0275pipe=r.Yjl({name:"highlightTypeahead",type:d,pure:!0}),d})()},3077:(I,u,t)=>{function r(_){return void 0!==_}t.d(u,{$:()=>r})},4181:(I,u,t)=>{t.d(u,{O:()=>j});var r=t(9808),_=t(6123),m=t(8776),d=t(8929),y=t(591),s=t(373),h=t(4850),p=t(7625),n=t(5e3),l=t(712),z=t(9169),f=t(8054),c=t(4182),v=t(8664),C=t(822),T=t(6042),L=t(2643),S=t(2683),E=t(647),V=t(6949),D=t(8926);function F(e,g){if(1&e&&(n.TgZ(0,"nz-option",6),n._UZ(1,"span",7),n.ALo(2,"highlightTypeahead"),n.qZA()),2&e){const o=g.$implicit,i=n.oxw(2);n.Q6J("nzValue",o.variant),n.xp6(1),n.Q6J("innerHtml",n.xi3(2,2,o.label,i.to.searchString),n.oJD)}}function U(e,g){1&e&&n._uU(0," No variant found in CIViC that matches the string provided. ")}function W(e,g){if(1&e){const o=n.EpF();n.ynx(0),n.TgZ(1,"nz-select",3),n.NdJ("nzOnSearch",function(a){return n.CHM(o),n.oxw().to.onSearch(a)}),n.YNc(2,F,3,5,"nz-option",4),n.ALo(3,"ngrxPush"),n.qZA(),n.YNc(4,U,1,0,"ng-template",null,5,n.W1O),n.BQk()}if(2&e){const o=n.MAs(5),i=n.oxw(),a=n.MAs(4);n.xp6(1),n.Q6J("formControl",i.formControl)("formlyAttributes",i.field)("nzPlaceHolder",i.to.placeholder?i.to.placeholder:null)("nzDropdownRender",i.to.allowCreate?a:null)("nzNotFoundContent",o)("nzShowArrow",i.to.showArrow),n.xp6(1),n.Q6J("ngForOf",n.lcZ(3,7,i.variants$))}}function Z(e,g){if(1&e&&n._UZ(0,"cvc-variant-tag",8),2&e){const o=n.oxw();n.Q6J("variant",o.formControl.value)}}function Q(e,g){if(1&e&&n._UZ(0,"cvc-form-errors-alert",12),2&e){const o=n.oxw(4);n.Q6J("errors",o.errorMessages)}}function J(e,g){if(1&e){const o=n.EpF();n.TgZ(0,"button",13),n.NdJ("click",function(){n.CHM(o);const a=n.oxw(4);return a.addVariant(a.to.searchString)}),n._UZ(1,"i",14),n._uU(2,"No Existing CIViC Variant\xa0"),n.TgZ(3,"strong"),n._uU(4),n.qZA(),n._uU(5,"\xa0found. Create A New Variant? "),n.qZA()}if(2&e){const o=n.oxw(4);n.Q6J("nzLoading",o.loading),n.xp6(4),n.Oqu(o.to.searchString)}}function B(e,g){if(1&e&&(n.ynx(0),n.YNc(1,Q,1,1,"cvc-form-errors-alert",10),n.YNc(2,J,6,2,"button",11),n.BQk()),2&e){const o=n.oxw(3);n.xp6(1),n.Q6J("ngIf",o.errorMessages.length>0),n.xp6(1),n.Q6J("ngIf",0==o.errorMessages.length)}}function N(e,g){if(1&e&&(n.ynx(0),n.YNc(1,B,3,2,"ng-container",9),n.BQk()),2&e){const o=n.oxw(2);n.xp6(1),n.Q6J("ngIf",""!==o.to.searchString)}}function R(e,g){if(1&e&&(n.YNc(0,N,2,1,"ng-container",9),n.ALo(1,"ngrxPush")),2&e){const o=n.oxw();n.Q6J("ngIf",n.lcZ(1,1,o.displayAdd$))}}const Y={name:"variant-input",component:(()=>{class e extends m.fS{constructor(o,i,a){super(),this.variantTypeaheadQuery=o,this.networkErrorService=i,this.addVariantGQL=a,this.destroy$=new d.xQ,this.success=!1,this.errorMessages=[],this.loading=!1,this.displayAdd$=new y.X(!1),this.addVariantMutator=new _.U(i),this.defaultOptions={templateOptions:{placeholder:"Search Variants",showArrow:!1,onSearch:()=>{},minLengthSearch:1,optionList:[],allowCreate:!0},expressionProperties:{"templateOptions.geneId":(x,X,A)=>{var O,P;let M=null===(P=null===(O=null==A?void 0:A.parent)||void 0===O?void 0:O.parent)||void 0===P?void 0:P.model;if(M&&M.gene&&M.gene[0])return M.gene[0].id}}}}ngOnInit(){this.queryRef=this.variantTypeaheadQuery.watch({name:"zzzz"}),this.variants$=this.queryRef.valueChanges.pipe((0,s.j)("data","variants","nodes"),(0,h.U)(o=>o.map(a=>({value:a.id,label:a.name,variant:a}))))}ngAfterViewInit(){this.to.onSearch=o=>{o.length<this.to.minLengthSearch||(this.to.searchString=o,this.errorMessages=[],this.queryRef.refetch({name:o,geneId:this.to.geneId}).then(i=>{this.displayAdd$.next(0==i.data.variants.nodes.filter(a=>a.name.toUpperCase()==o.toUpperCase()).length)}))}}addVariant(o){if(o&&""!=o&&this.to.geneId){let i=this.addVariantMutator.mutate(this.addVariantGQL,{name:o,geneId:this.to.geneId},a=>{var x;null===(x=this.field.formControl)||void 0===x||x.setValue({id:a.addVariant.variant.id,name:a.addVariant.variant.name}),this.to.searchString="",this.to.searchLength=0});i.submitSuccess$.pipe((0,p.R)(this.destroy$)).subscribe(a=>{a&&(this.success=!0)}),i.submitError$.pipe((0,p.R)(this.destroy$)).subscribe(a=>{a&&(this.errorMessages=a,this.success=!1)}),i.isSubmitting$.pipe((0,p.R)(this.destroy$)).subscribe(a=>{this.loading=a})}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.displayAdd$.complete()}}return e.\u0275fac=function(o){return new(o||e)(n.Y36(l._eC),n.Y36(z.Y),n.Y36(l.LUc))},e.\u0275cmp=n.Xpm({type:e,selectors:[["cvc-variant-input-type"]],features:[n.qOj],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["variantListItem",""],["addVariantTmpl",""],["nzShowSearch","","nzServerSearch","",3,"formControl","formlyAttributes","nzPlaceHolder","nzDropdownRender","nzNotFoundContent","nzShowArrow","nzOnSearch"],["nzCustomContent","",3,"nzValue",4,"ngFor","ngForOf"],["sourceLoader",""],["nzCustomContent","",3,"nzValue"],[3,"innerHtml"],[3,"variant"],[4,"ngIf"],[3,"errors",4,"ngIf"],["nz-button","","nzSize","small",3,"nzLoading","click",4,"ngIf"],[3,"errors"],["nz-button","","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","plus","nzTheme","outline"]],template:function(o,i){if(1&o&&(n.YNc(0,W,6,9,"ng-container",0),n.YNc(1,Z,1,1,"ng-template",null,1,n.W1O),n.YNc(3,R,2,3,"ng-template",null,2,n.W1O)),2&o){const a=n.MAs(2);n.Q6J("ngIf",!(null!=i.formControl.value&&i.formControl.value.id))("ngIfElse",a)}},directives:[r.O5,f.Vq,c.JJ,c.oH,m.VQ,r.sg,f.Ip,v.I,C.V,T.ix,L.dQ,S.w,E.Ls],pipes:[V.fM,D.A],styles:[""],changeDetection:0}),e})()};var $=t(4867),K=t(7008),H=t(9444);let j=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[r.ez,c.UX,V.WG,m.X0.forChild({types:[Y]}),f.LV,T.sL,E.PV,$.Q,K.B,H.s]]}),e})()},5472:(I,u,t)=>{t.d(u,{r:()=>f});var r=t(9808),_=t(6949),m=t(8776),d=t(7484),y=t(5482),s=t(1894),h=t(5109),p=t(6789),n=t(5e3);const z={wrappers:[{name:"form-container",component:(()=>{class c extends m.n2{}return c.\u0275fac=function(){let v;return function(T){return(v||(v=n.n5z(c)))(T||c)}}(),c.\u0275cmp=n.Xpm({type:c,selectors:[["cvc-form-container-wrapper"]],features:[n.qOj],decls:5,vars:1,consts:[["nzSpan","24"],["nzSize","default",3,"nzTitle"],["fieldComponent",""]],template:function(C,T){1&C&&(n.TgZ(0,"nz-row"),n.TgZ(1,"nz-col",0),n.TgZ(2,"nz-card",1),n.GkF(3,null,2),n.qZA(),n.qZA(),n.qZA()),2&C&&(n.xp6(2),n.Q6J("nzTitle",T.to.label))},directives:[s.SK,s.t3,d.bd],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),c})()}]};let f=(()=>{class c{}return c.\u0275fac=function(C){return new(C||c)},c.\u0275mod=n.oAB({type:c}),c.\u0275inj=n.cJS({imports:[[r.ez,_.WG,m.X0.forChild(z),s.Jb,d.vh,y.cD,p._,h.s]]}),c})()}}]);