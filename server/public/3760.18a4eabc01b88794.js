"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[3760],{5639:(I,M,e)=>{e.d(M,{u:()=>_});var i=e(5e3),n=e(685),O=e(1912),z=e(3618),y=e(5017);function f(d,t){1&d&&(i.TgZ(0,"span"),i._uU(1," You must be logged in to view this page. "),i.qZA())}function x(d,t){1&d&&i._UZ(0,"cvc-login-button")}function g(d,t){1&d&&(i.TgZ(0,"nz-typography",4),i._UZ(1,"i",5),i.qZA())}let _=(()=>{class d{}return d.\u0275fac=function(C){return new(C||d)},d.\u0275cmp=i.Xpm({type:d,selectors:[["cvc-login-prompt"]],decls:7,vars:3,consts:[[3,"nzNotFoundImage","nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["emptyImage",""],["nzType","secondary"],["nz-icon","","nzType","login","nzTheme","outline",2,"font-size","50pt"]],template:function(C,G){if(1&C&&(i.TgZ(0,"nz-empty",0),i.YNc(1,f,2,0,"ng-template",null,1,i.W1O),i.YNc(3,x,1,0,"ng-template",null,2,i.W1O),i.qZA(),i.YNc(5,g,2,0,"ng-template",null,3,i.W1O)),2&C){const E=i.MAs(2),P=i.MAs(4),A=i.MAs(6);i.Q6J("nzNotFoundImage",A)("nzNotFoundContent",E)("nzNotFoundFooter",P)}},directives:[n.p9,O.s,z.ZU,y.Ls],styles:["[_nghost-%COMP%]{display:inline-block}"]}),d})()},9386:(I,M,e)=>{e.d(M,{a:()=>x});var i=e(9808),n=e(1844),O=e(685),z=e(5017),y=e(3618),f=e(5e3);let x=(()=>{class g{}return g.\u0275fac=function(d){return new(d||g)},g.\u0275mod=f.oAB({type:g}),g.\u0275inj=f.cJS({imports:[[i.ez,n.B,O.Xo,z.PV,y.ZJ]]}),g})()},8227:(I,M,e)=>{e.d(M,{q:()=>h});var i=e(655),n=e(5e3),O=e(4987),z=e(8929),y=e(591),f=e(4850),x=e(373),g=e(2994),_=e(6612),d=e(9350),t=e(9808),C=e(6042),G=e(2683),E=e(2643),P=e(3677),A=e(6699),D=e(4219),L=e(6949);function S(s,a){1&s&&n.Hsn(0)}function B(s,a){1&s&&n.GkF(0)}function V(s,a){if(1&s&&(n.ynx(0),n.YNc(1,B,1,0,"ng-container",5),n.BQk()),2&s){n.oxw(2);const c=n.MAs(1);n.xp6(1),n.Q6J("ngTemplateOutlet",c)}}function U(s,a){1&s&&n.GkF(0)}function Z(s,a){if(1&s&&(n.ynx(0),n.TgZ(1,"nz-button-group"),n.YNc(2,U,1,0,"ng-container",5),n.TgZ(3,"button",6),n.ALo(4,"ngrxPush"),n.ALo(5,"ngrxPush"),n.ALo(6,"ngrxPush"),n.TgZ(7,"span"),n._uU(8,"for"),n.qZA(),n._UZ(9,"nz-avatar",7)(10,"i",8),n.qZA()(),n.BQk()),2&s){n.oxw();const c=n.MAs(4),m=n.oxw(),T=n.MAs(1);n.xp6(2),n.Q6J("ngTemplateOutlet",T),n.xp6(1),n.Q6J("ngClass",n.lcZ(4,8,m.buttonClass$))("hidden",n.lcZ(5,10,m.isHidden$))("disabled",n.lcZ(6,12,m.isDisabled$))("nzDropdownMenu",c),n.xp6(6),n.Q6J("nzSrc",null==m.selectedOrg?null:m.selectedOrg.profileImagePath)("nzSize",10)("nzShape","square")}}function F(s,a){if(1&s){const c=n.EpF();n.TgZ(0,"li",9),n.NdJ("click",function(){const W=n.CHM(c).$implicit;return n.oxw(2).selectOrg(W)}),n._UZ(1,"nz-avatar",10),n._uU(2),n.qZA()}if(2&s){const c=a.$implicit,m=n.oxw(2);n.Q6J("nzSelected",(null==m.selectedOrg?null:m.selectedOrg.id)===c.id),n.xp6(1),n.Q6J("nzSrc",null==c?null:c.profileImagePath)("nzSize",10)("nzShape","square"),n.xp6(1),n.hij(" ",c.name," ")}}function b(s,a){if(1&s&&(n.ynx(0),n.YNc(1,V,2,1,"ng-container",1),n.YNc(2,Z,11,14,"ng-container",1),n.TgZ(3,"nz-dropdown-menu",null,2)(5,"ul",3),n.YNc(6,F,3,5,"li",4),n.qZA()(),n.BQk()),2&s){const c=a.ngIf;n.xp6(1),n.Q6J("ngIf",c.length<=1),n.xp6(1),n.Q6J("ngIf",c.length>1),n.xp6(4),n.Q6J("ngForOf",c)}}let h=class{constructor(a){this.viewerService=a,this.selectedOrgChange=new n.vpe,this.baseButtonClass="org-dropdown-btn",this.isDisabled$=new z.xQ,this.isHidden$=new z.xQ,this.buttonClass$=new y.X("")}selectOrg(a){this.selectedOrg=a,this.selectedOrgChange.emit(a)}refreshViewer(){setTimeout(()=>{this.viewerService.refetch()},2500)}ngOnInit(){this.organizations$=this.viewerService.viewer$.pipe((0,f.U)(a=>a.organizations)),this.mostRecentOrg$=this.viewerService.viewer$.pipe((0,x.j)("mostRecentOrg"),(0,g.b)(a=>{a&&(this.selectedOrg=a,this.selectedOrgChange.emit(a))})),this.mostRecentOrg$.pipe((0,O.t)(this)).subscribe()}ngAfterViewInit(){this.button&&this.button.domChange&&this.button.domChange.pipe((0,O.t)(this)).subscribe(a=>{"class"===a.type&&"string"==typeof a.change?this.buttonClass$.next(`${this.baseButtonClass} ${a.change}`):"disabled"===a.type&&"boolean"==typeof a.change?this.isDisabled$.next(a.change):"hidden"===a.type&&"boolean"==typeof a.change&&this.isHidden$.next(a.change)})}};h.\u0275fac=function(a){return new(a||h)(n.Y36(d.a))},h.\u0275cmp=n.Xpm({type:h,selectors:[["cvc-org-selector-btn-group"]],contentQueries:function(a,c,m){if(1&a&&n.Suo(m,_.m,5),2&a){let T;n.iGM(T=n.CRH())&&(c.button=T.first)}},inputs:{selectedOrg:"selectedOrg"},outputs:{selectedOrgChange:"selectedOrgChange"},ngContentSelectors:["*"],decls:4,vars:3,consts:[["submitButton",""],[4,"ngIf"],["orgMenu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"nzSelected","click",4,"ngFor","ngForOf"],[4,"ngTemplateOutlet"],["type","button","nz-button","","nz-dropdown","",3,"ngClass","hidden","disabled","nzDropdownMenu"],[3,"nzSrc","nzSize","nzShape"],["nz-icon","","nzType","down"],["nz-menu-item","",3,"nzSelected","click"],[2,"background-color","#f0f5ff",3,"nzSrc","nzSize","nzShape"]],template:function(a,c){1&a&&(n.F$t(),n.YNc(0,S,1,0,"ng-template",null,0,n.W1O),n.YNc(2,b,7,3,"ng-container",1),n.ALo(3,"async")),2&a&&(n.xp6(2),n.Q6J("ngIf",n.lcZ(3,1,c.organizations$)))},directives:[t.O5,t.tP,C.fY,G.w,C.ix,E.dQ,P.wA,P.cm,t.mk,A.Dz,P.RR,D.wO,t.sg,D.r9],pipes:[t.Ov,L.fM],styles:["[_nghost-%COMP%]{display:inline-block}[_nghost-%COMP%]     .ant-btn-dangerous.ant-btn-primary:first-child:not(:last-child){border-right-color:#ff4d4f}[_nghost-%COMP%]     .ant-btn-dangerous.ant-btn-primary:hover, [_nghost-%COMP%]     .ant-btn-dangerous.ant-btn-primary:focus{border-right-color:#fd7978}.org-dropdown-btn[_ngcontent-%COMP%]   nz-avatar[_ngcontent-%COMP%]{margin:0 6px}.org-dropdown-btn.ant-btn-dangerous[_ngcontent-%COMP%]:last-child:not(:first-child), .org-dropdown-btn[_ngcontent-%COMP%]   .ant-btn-dangerous[_ngcontent-%COMP%] + .ant-btn-dangerous[_ngcontent-%COMP%]{border-left-color:#fd7978}"]}),h=(0,i.gn)([(0,O.c)()],h)},885:(I,M,e)=>{e.r(M),e.d(M,{VariantGroupsAddModule:()=>ct});var i=e(9808),n=e(9386),O=e(5630),z=e(6905),y=e(6949),f=e(1894),x=e(5017),g=e(1945),_=e(325),d=e(4850),t=e(5e3),C=e(9350),G=e(8992),E=e(5639),P=e(160);function A(o,p){1&o&&(t.TgZ(0,"div"),t._UZ(1,"router-outlet"),t.qZA())}function D(o,p){1&o&&(t.TgZ(0,"nz-row",7)(1,"div",8),t._UZ(2,"cvc-login-prompt"),t.qZA()())}let L=(()=>{class o{constructor(r){this.viewerService=r}ngOnInit(){this.isSignedIn$=this.viewerService.viewer$.pipe((0,d.U)(r=>r.signedIn))}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(C.a))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-variant-groups-add-view"]],decls:14,vars:7,consts:[["displayName","New"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzTheme","twotone","nzType","civic-variantgroup",3,"nzTwotoneColor"],[1,"content"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["nzSpan","24","nzJustify","center"],["nz-col","","nzSpan","6"]],template:function(r,l){if(1&r&&(t._UZ(0,"cvc-section-navigation",0),t.TgZ(1,"nz-page-header",1)(2,"nz-page-header-title",2),t._UZ(3,"i",3),t.ALo(4,"entityColor"),t._uU(5," Add New Variant Group "),t.qZA(),t.TgZ(6,"nz-page-header-subtitle"),t._uU(7," Submit and review new Variant Groups "),t.qZA(),t.TgZ(8,"nz-page-header-content")(9,"div",4),t.YNc(10,A,2,0,"div",5),t.ALo(11,"ngrxPush"),t.YNc(12,D,3,0,"ng-template",null,6,t.W1O),t.qZA()()()),2&r){const u=t.MAs(13);t.xp6(3),t.Q6J("nzTwotoneColor",t.lcZ(4,3,"VariantGroup")),t.xp6(7),t.Q6J("ngIf",t.lcZ(11,5,l.isSignedIn$))("ngIfElse",u)}},directives:[G.I,g.$O,g.u9,x.Ls,g.yG,g.u5,i.O5,_.lC,f.SK,f.t3,E.u],pipes:[P.a,y.fM],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{flex-wrap:nowrap;background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),o})();var S=e(8776),B=e(7462),V=e(4181),U=e(8390),Z=e(8979),F=e(4623),b=e(3075),R=e(1017),h=e(4546),s=e(2359),a=e(6042),c=e(7525),m=e(7008),T=e(5472),W=e(3773),J=e(3022),K=e(4889);let Q=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[i.ez,b.UX,_.Bz,S.X0,h.U5,s.L,f.Jb,a.sL,c.j,S.X0,B.o,V.O,U.N,Z.N,F.K,m.B,T.r,W.g,V.O,J.e,K.E,R.s]]}),o})(),Y=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[i.ez,Q]]}),o})();var $=e(3077),j=e(6123),X=e(8929),w=e(7625),H=e(7630),k=e(9169),q=e(822);function tt(o,p){1&o&&t.GkF(0)}function nt(o,p){if(1&o){const r=t.EpF();t.TgZ(0,"formly-form",4),t.NdJ("modelChange",function(u){return t.CHM(r),t.oxw().formModel=u}),t.qZA()}if(2&o){const r=t.oxw();t.Q6J("form",r.formGroup)("fields",r.formFields)("model",r.formModel)}}function et(o,p){if(1&o&&(t.TgZ(0,"nz-form-item"),t._UZ(1,"cvc-form-errors-alert",6),t.qZA()),2&o){const r=t.oxw(2);t.xp6(1),t.Q6J("errors",r.errorMessages)}}function ot(o,p){if(1&o&&(t.TgZ(0,"p"),t._uU(1,"View "),t.TgZ(2,"a",10),t._uU(3,"its details"),t.qZA(),t._uU(4,"."),t.qZA()),2&o){const r=t.oxw(3);t.xp6(2),t.MGl("routerLink","/variant-groups/",r.newId,"/summary")}}function rt(o,p){if(1&o&&(t.ynx(0),t._UZ(1,"nz-alert",7),t.YNc(2,ot,5,1,"ng-template",8,9,t.W1O),t.BQk()),2&o){const r=t.MAs(3);t.xp6(1),t.Q6J("nzDescription",r)}}function at(o,p){if(1&o&&(t.YNc(0,et,2,1,"nz-form-item",5),t.YNc(1,rt,4,1,"ng-container",5)),2&o){const r=t.oxw();t.Q6J("ngIf",r.errorMessages.length>0),t.xp6(1),t.Q6J("ngIf",r.success)}}let it=(()=>{class o{constructor(r,l){this.submitVariantGroupGQL=r,this.networkErrorService=l,this.destroy$=new X.xQ,this.formGroup=new b.cw({}),this.success=!1,this.errorMessages=[],this.loading=!1,this.submitVariantGroupMutator=new j.U(l),this.formFields=[{key:"fields",wrappers:["form-container"],templateOptions:{label:"Add Variant Group Form"},fieldGroup:[{key:"name",type:"input",wrappers:["form-field"],templateOptions:{label:"Variant Group Name",required:!0}},{key:"description",type:"cvc-textarea",templateOptions:{label:"Description",helpText:"A brief description of this new variant group.",placeholder:"No description provided",required:!0}},{key:"sources",type:"multi-field",wrappers:["form-field"],templateOptions:{label:"Source",helpText:"Add any sources upon which your description depends.",addText:"Add a Source"},fieldArray:{type:"source-input",templateOptions:{hideLabel:!0,required:!0}}},{key:"variants",type:"multi-field",wrappers:["form-field"],templateOptions:{label:"Variants",required:!0,helpText:"Specify the variants that comprise this Variant Group.",addText:"Add a Variant "},fieldArray:{type:"variant-input",templateOptions:{hideLabel:!0,required:!0,allowCreate:!1}}},{key:"comment",type:"comment-textarea",templateOptions:{label:"Comment",helpText:"Please provide any additional comments you wish to make about this evidence item. This comment will appear as the first comment in this item's comment thread.",placeholder:"Please enter a comment describing your revision.",required:!0,minLength:10}},{key:"cancel",type:"cancel-button"},{key:"organization",type:"org-submit-button",templateOptions:{submitLabel:"Create Variant Group",submitSize:"large"}}]}]}submitVariantGroup(r){let l=this.toSubmitInput(r);if(l){let u=this.submitVariantGroupMutator.mutate(this.submitVariantGroupGQL,{input:l},{},v=>{var N;this.newId=null===(N=v.submitVariantGroup)||void 0===N?void 0:N.variantGroup.id});u.submitSuccess$.pipe((0,w.R)(this.destroy$)).subscribe(v=>{v&&(this.success=!0)}),u.submitError$.pipe((0,w.R)(this.destroy$)).subscribe(v=>{v&&(this.errorMessages=v,this.success=!1)}),u.isSubmitting$.pipe((0,w.R)(this.destroy$)).subscribe(v=>{this.loading=v})}}toSubmitInput(r){var l;if(r)return{description:r.fields.description,name:r.fields.name,organizationId:null===(l=r.fields.organization)||void 0===l?void 0:l.id,sourceIds:r.fields.sources?r.fields.sources.map(u=>u.id).filter($.$):[],variantIds:r.fields.variants.map(u=>u.id).filter($.$)}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(H.tji),t.Y36(k.Y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-variant-group-submit-form"]],decls:5,vars:3,consts:[["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[4,"ngTemplateOutlet"],[3,"form","fields","model","modelChange",4,"ngIf"],["formMessages",""],[3,"form","fields","model","modelChange"],[4,"ngIf"],[3,"errors"],["nzType","success","nzMessage","Variant Group Submitted","nzShowIcon","",3,"nzDescription"],["nzSize","small"],["successMessage",""],[3,"routerLink"]],template:function(r,l){if(1&r&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return l.submitVariantGroup(l.formModel)}),t.YNc(1,tt,1,0,"ng-container",1),t.YNc(2,nt,1,3,"formly-form",2),t.qZA(),t.YNc(3,at,2,2,"ng-template",null,3,t.W1O)),2&r){const u=t.MAs(4);t.Q6J("formGroup",l.formGroup),t.xp6(1),t.Q6J("ngTemplateOutlet",u),t.xp6(1),t.Q6J("ngIf",!l.success)}},directives:[b._Y,b.JL,h.Lr,b.sg,i.tP,i.O5,S.T7,f.SK,h.Nx,q.V,s.r,_.yS],styles:[""]}),o})();const st=[{path:"",component:L,children:[{path:"",redirectTo:"submit",pathMatch:"full"},{path:"submit",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["cvc-variant-groups-submit-page"]],decls:1,vars:0,template:function(r,l){1&r&&t._UZ(0,"cvc-variant-group-submit-form")},directives:[it],styles:[""]}),o})(),data:{breadcrumb:"Submit New Variant Groups"}}]}];let pt=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[_.Bz.forChild(st),Y],_.Bz]}),o})(),ct=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[i.ez,pt,y.WG,f.Jb,x.PV,g.KJ,n.a,z.s,O.D]]}),o})()}}]);