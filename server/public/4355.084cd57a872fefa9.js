"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[4355],{7036:(X,N,o)=>{o.d(N,{L:()=>mt});var p=o(7630),_=o(373),c=o(4850),t=o(5e3),n=o(9808),d=o(1894),T=o(8144),R=o(8929),y=o(7625),Z=o(9350),S=o(2359),D=o(7484),L=o(7948),A=o(5737),I=o(6123),$=o(9169),U=o(6949),v=o(404),M=o(6042),C=o(2643),E=o(2683),J=o(3610),B=o(5017),W=o(3075),G=o(4546),x=o(9383),Q=o(7525),O=o(9180),w=o(8227),K=o(6612);function nn(l,m){if(1&l){const a=t.EpF();t.TgZ(0,"nz-alert",4),t.NdJ("nzOnClose",function(){return t.CHM(a),t.oxw().onSuccessBannerClose()}),t.qZA()}}function on(l,m){}function an(l,m){1&l&&t.YNc(0,on,0,0,"ng-template")}function z(l,m){if(1&l&&(t.ynx(0),t.YNc(1,an,1,0,null,9),t.BQk()),2&l){t.oxw(2);const a=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",a)}}function P(l,m){if(1&l&&(t.ynx(0),t.YNc(1,z,2,1,"ng-container",5),t.BQk()),2&l){const a=t.oxw().ngrxLet,g=t.MAs(5),f=t.oxw();t.xp6(1),t.Q6J("ngIf",a.isEditor||a.isAdmin||f.flag.flaggingUser.id===a.id)("ngIfElse",g)}}function h(l,m){}function V(l,m){1&l&&t.YNc(0,h,0,0,"ng-template")}function q(l,m){if(1&l&&(t.TgZ(0,"span",10),t.YNc(1,V,1,0,null,9),t.qZA()),2&l){t.oxw();const a=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",a)}}function cn(l,m){}function _n(l,m){1&l&&t.YNc(0,cn,0,0,"ng-template")}function rn(l,m){if(1&l&&(t.TgZ(0,"span",11),t.YNc(1,_n,1,0,null,9),t.qZA()),2&l){t.oxw();const a=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",a)}}function j(l,m){if(1&l){const a=t.EpF();t.TgZ(0,"button",13),t.NdJ("nzPopoverVisibleChange",function(f){return t.CHM(a),t.oxw(3).flagResolvePopoverVisible=f})("click",function(){t.CHM(a);const f=t.oxw(3);return f.flagResolvePopoverVisible=!f.flagResolvePopoverVisible}),t._uU(1," Resolve Flag "),t._UZ(2,"i",14),t.qZA()}if(2&l){const a=t.oxw(2).ngrxLet,g=t.oxw(),f=t.MAs(3),Y=t.MAs(5);t.Q6J("nzPopoverTitle",f)("nzPopoverVisible",g.flagResolvePopoverVisible)("nzPopoverContent",Y)("nzPopoverTrigger",void 0)("disabled",!a.signedIn||a.isCurator&&g.flag.flaggingUser.id!=a.id)}}function sn(l,m){if(1&l&&t.YNc(0,j,3,5,"button",12),2&l){const a=t.oxw(2);t.Q6J("ngIf",!a.success)}}function b(l,m){if(1&l&&(t.ynx(0),t.YNc(1,P,2,2,"ng-container",5),t.YNc(2,q,2,1,"ng-template",null,6,t.W1O),t.YNc(4,rn,2,1,"ng-template",null,7,t.W1O),t.YNc(6,sn,1,1,"ng-template",null,8,t.W1O),t.BQk()),2&l){const a=m.ngrxLet,g=t.MAs(3);t.xp6(1),t.Q6J("ngIf",a.signedIn)("ngIfElse",g)}}const tn=function(){return{float:"right"}};function en(l,m){if(1&l){const a=t.EpF();t._uU(0," Resolve Flag "),t.TgZ(1,"span",15)(2,"i",16),t.NdJ("click",function(){t.CHM(a);const f=t.oxw();return f.flagResolvePopoverVisible=!1,f.errorMessages=[]}),t.qZA()()}2&l&&(t.xp6(1),t.Q6J("ngStyle",t.DdM(1,tn)))}function vn(l,m){if(1&l&&t._UZ(0,"nz-alert",25),2&l){t.oxw();const a=t.MAs(2);t.Q6J("nzDescription",a)}}function zn(l,m){if(1&l&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&l){const a=m.$implicit;t.xp6(1),t.hij(" ",a," ")}}function Cn(l,m){if(1&l&&(t.TgZ(0,"ul"),t.YNc(1,zn,2,1,"li",26),t.qZA()),2&l){const a=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",a.errorMessages)}}function xn(l,m){if(1&l){const a=t.EpF();t.YNc(0,vn,1,1,"nz-alert",17),t.YNc(1,Cn,2,1,"ng-template",null,18,t.W1O),t.TgZ(3,"nz-card",19)(4,"form",20),t.NdJ("ngSubmit",function(){return t.CHM(a),t.oxw().resolveFlag()}),t.TgZ(5,"cvc-comment-input-form",21),t.NdJ("commentChange",function(f){return t.CHM(a),t.oxw().comment=f}),t.qZA(),t.TgZ(6,"nz-spin",22)(7,"nz-form-item")(8,"nz-form-control")(9,"cvc-form-buttons")(10,"cvc-org-selector-btn-group",23),t.NdJ("selectedOrgChange",function(f){return t.CHM(a),t.oxw().onOrgSelected(f)}),t.TgZ(11,"button",24),t._uU(12," Resolve "),t.qZA()()()()()()()()}if(2&l){const a=t.oxw();t.Q6J("ngIf",a.errorMessages.length>0),t.xp6(5),t.Q6J("comment",a.comment),t.xp6(1),t.Q6J("nzSpinning",a.loading),t.xp6(5),t.Q6J("disabled",!(void 0!==a.comment&&a.comment.length>=10))}}let Tn=(()=>{class l{constructor(a,g,f){this.gql=a,this.viewerService=g,this.networkErrorService=f,this.errorMessages=[],this.loading=!1,this.success=!1,this.flagResolvePopoverVisible=!1,this.destroy$=new R.xQ,this.resolveFlagMutator=new I.U(f)}ngOnInit(){if(void 0===this.flag)throw new Error("Must pass a Flag in to resolve component.");this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(a=>{this.selectedOrg=a.mostRecentOrg})}onOrgSelected(a){this.selectedOrg=a}resolveFlag(){var a;if(this.comment){this.errorMessages=[];let g=this.resolveFlagMutator.mutate(this.gql,{input:{id:this.flag.id,comment:this.comment,organizationId:null===(a=this.selectedOrg)||void 0===a?void 0:a.id}});g.submitSuccess$.pipe((0,y.R)(this.destroy$)).subscribe(f=>{f&&(this.flagResolvePopoverVisible=!1,this.success=!0,this.flagResolvedCallback&&this.flagResolvedCallback())}),g.submitError$.pipe((0,y.R)(this.destroy$)).subscribe(f=>{f.length>0&&(this.success=!1,this.errorMessages=f)}),g.isSubmitting$.pipe((0,y.R)(this.destroy$)).subscribe(f=>{this.loading=f})}}onSuccessBannerClose(){this.success=!1,this.flagResolvedCallback&&this.flagResolvedCallback()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return l.\u0275fac=function(a){return new(a||l)(t.Y36(p.EwB),t.Y36(Z.a),t.Y36($.Y))},l.\u0275cmp=t.Xpm({type:l,selectors:[["cvc-flag-resolve-form"]],inputs:{flag:"flag",flagResolvedCallback:"flagResolvedCallback"},decls:6,vars:2,consts:[["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],[4,"ngrxLet"],["flagResolvePopoverTitleTemplate",""],["flagResolvePopoverContentTemplate",""],["nzBanner","","nzMessage","Flag resolved.","nzType","success","nzCloseable","",3,"nzOnClose"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["noPermissions",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to resolve flag."],["nz-tooltip","","nzTooltipTitle","If you are not an editor, you can only resolve flags you opened."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click",4,"ngIf"],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click"],["nz-icon","","nzType","caret-down","nzTheme","outline"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription",4,"ngIf"],["errorContents",""],["nzType","inner",2,"width","300px"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[3,"selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"],["nzType","error","nzShowIcon","","nzMessage","Error Resolving Flag",3,"nzDescription"],[4,"ngFor","ngForOf"]],template:function(a,g){1&a&&(t.YNc(0,nn,1,0,"nz-alert",0),t.YNc(1,b,8,2,"ng-container",1),t.YNc(2,en,3,2,"ng-template",null,2,t.W1O),t.YNc(4,xn,13,4,"ng-template",null,3,t.W1O)),2&a&&(t.Q6J("ngIf",g.success),t.xp6(1),t.Q6J("ngrxLet",g.viewer$))},directives:[n.O5,S.r,U.eJ,n.tP,v.SY,M.ix,C.dQ,E.w,J.lU,B.Ls,n.PC,n.sg,D.bd,W._Y,W.JL,W.F,G.Lr,x.b,Q.W,d.SK,G.Nx,d.t3,G.Fd,O.Z,w.q,K.m],styles:[""]}),l})();var hn=o(3618),yn=o(125),On=o(4590),Rn=o(685),An=o(8625),Zn=o(160);function Ln(l,m){if(1&l){const a=t.EpF();t.TgZ(0,"nz-alert",5),t.NdJ("nzOnClose",function(){const Y=t.CHM(a).$implicit;return t.oxw().onErrorBannerClose(Y)}),t.qZA()}2&l&&t.Q6J("nzMessage",m.$implicit)}function Fn(l,m){if(1&l){const a=t.EpF();t.TgZ(0,"nz-alert",6),t.NdJ("nzOnClose",function(){return t.CHM(a),t.oxw().onSuccessBannerClose()}),t.qZA()}if(2&l){const a=t.oxw();t.MGl("nzMessage","Revision(s) successfully ",a.success,".")}}function Mn(l,m){if(1&l&&t._UZ(0,"cvc-comment-body",15),2&l){const a=t.oxw(2).$implicit;t.Q6J("commentBodySegments",a.openComment.parsedComment)}}function bn(l,m){if(1&l&&(t.ynx(0),t._UZ(1,"cvc-flag-resolve-form",16),t.BQk()),2&l){const a=t.oxw(2).$implicit,g=t.oxw(2);t.xp6(1),t.Q6J("flag",a)("flagResolvedCallback",g.flagResolvedCallback)}}function En(l,m){if(1&l&&(t.ynx(0),t._UZ(1,"cvc-comment-body",15),t.BQk()),2&l){const a=t.oxw(3).$implicit;t.xp6(1),t.Q6J("commentBodySegments",a.resolutionComment.parsedComment)}}function pn(l,m){if(1&l&&t._UZ(0,"cvc-user-tag",21),2&l){const a=t.oxw(3).$implicit;t.Q6J("user",a.resolvingUser)}}function gn(l,m){if(1&l&&(t.TgZ(0,"nz-row")(1,"nz-col",17),t.YNc(2,En,2,1,"ng-container",18),t.qZA(),t.TgZ(3,"nz-col",19),t._uU(4," Resolved By "),t.YNc(5,pn,1,1,"cvc-user-tag",20),t._uU(6),t.ALo(7,"timeago"),t.qZA()()),2&l){const a=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngIf",a.resolutionComment),t.xp6(3),t.Q6J("ngIf",void 0!==a.resolvingUser),t.xp6(1),t.hij(" ",t.lcZ(7,3,a.resolvedAt)," ")}}function Qn(l,m){if(1&l&&(t._UZ(0,"i",22),t.ALo(1,"entityColor"),t._uU(2)),2&l){const a=t.oxw(2).$implicit;t.Q6J("nzTwotoneColor",t.lcZ(1,2,"Flag")),t.xp6(2),t.hij(" FID",a.id," ")}}function Sn(l,m){if(1&l&&(t.TgZ(0,"span")(1,"span",26),t._uU(2,"Flagged By"),t.qZA(),t._UZ(3,"cvc-user-tag",21),t.TgZ(4,"span",26),t._uU(5),t.ALo(6,"timeago"),t.qZA()()),2&l){const a=t.oxw(3).$implicit;t.xp6(3),t.Q6J("user",a.flaggingUser),t.xp6(2),t.Oqu(t.lcZ(6,2,a.createdAt))}}function mn(l,m){if(1&l&&t._UZ(0,"cvc-status-tag",27),2&l){const a=t.oxw(3).$implicit;t.Q6J("status",a.state)}}function Nn(l,m){1&l&&(t.TgZ(0,"nz-space",23),t.YNc(1,Sn,7,4,"span",24),t.YNc(2,mn,1,1,"cvc-status-tag",25),t.qZA())}function In(l,m){if(1&l&&(t.TgZ(0,"nz-card",10),t.YNc(1,Mn,1,1,"cvc-comment-body",11),t._UZ(2,"nz-divider"),t.YNc(3,bn,2,2,"ng-container",3),t.YNc(4,gn,8,5,"ng-template",null,12,t.W1O),t.YNc(6,Qn,3,4,"ng-template",null,13,t.W1O),t.YNc(8,Nn,3,0,"ng-template",null,14,t.W1O),t.qZA()),2&l){const a=t.MAs(5),g=t.MAs(7),f=t.MAs(9),Y=t.oxw().$implicit;t.Q6J("nzTitle",g)("nzExtra",f),t.xp6(1),t.Q6J("ngIf",Y.openComment),t.xp6(2),t.Q6J("ngIf","OPEN"==Y.state)("ngIfElse",a)}}function dn(l,m){1&l&&(t.ynx(0),t.YNc(1,In,10,5,"nz-card",9),t.BQk())}function fn(l,m){if(1&l&&(t.ynx(0),t.TgZ(1,"nz-space",7),t.YNc(2,dn,2,0,"ng-container",8),t.qZA(),t.BQk()),2&l){const a=t.oxw();t.xp6(2),t.Q6J("ngForOf",a.flags)}}function Pn(l,m){1&l&&t._UZ(0,"nz-empty",28)}let Jn=(()=>{class l{constructor(a){this.viewerService=a,this.isLoading=!1,this.success=!1,this.destroy$=new R.xQ}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(a=>{this.mostRecentOrg=a.mostRecentOrg})}setupMutationResultHandlers(a,g){a.submitSuccess$.pipe((0,y.R)(this.destroy$)).subscribe(f=>{f&&(this.isLoading=!1,this.errors=void 0,this.success=g)}),a.submitError$.pipe((0,y.R)(this.destroy$)).subscribe(f=>{f.length>0&&(this.isLoading=!1,this.success=!1,this.errors=f)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(a){var g;this.errors=null===(g=this.errors)||void 0===g?void 0:g.filter(f=>f!=a)}onSuccessBannerClose(){this.success=!1}}return l.\u0275fac=function(a){return new(a||l)(t.Y36(Z.a))},l.\u0275cmp=t.Xpm({type:l,selectors:[["cvc-flag-list"]],inputs:{flags:"flags",flagResolvedCallback:"flagResolvedCallback"},decls:6,vars:4,consts:[["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],["nzTitle","Flags",1,"card-list"],[4,"ngIf","ngIfElse"],["noFlags",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose"],["nzDirection","vertical"],[4,"ngFor","ngForOf"],["nzType","inner",3,"nzTitle","nzExtra",4,"nzSpaceItem"],["nzType","inner",3,"nzTitle","nzExtra"],[3,"commentBodySegments",4,"ngIf"],["flagResolved",""],["flagCardHeaderTitle",""],["flagCardHeaderExtra",""],[3,"commentBodySegments"],[3,"flag","flagResolvedCallback"],["nzSpan","16"],[4,"ngIf"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"user"],["nz-icon","","nzTheme","twotone","nzType","civic-flag",3,"nzTwotoneColor"],["nzSize","small"],[4,"nzSpaceItem"],[3,"status",4,"nzSpaceItem"],["nz-typography","","nzType","secondary"],[3,"status"],["nzNotFoundImage","simple","nzNotFoundContent","No Flags matching filters"]],template:function(a,g){if(1&a&&(t.YNc(0,Ln,1,1,"nz-alert",0),t.YNc(1,Fn,1,1,"nz-alert",1),t.TgZ(2,"nz-card",2),t.YNc(3,fn,3,1,"ng-container",3),t.YNc(4,Pn,1,0,"ng-template",null,4,t.W1O),t.qZA()),2&a){const f=t.MAs(5);t.Q6J("ngForOf",g.errors),t.xp6(1),t.Q6J("ngIf",g.success),t.xp6(2),t.Q6J("ngIf",g.flags&&g.flags.length>0)("ngIfElse",f)}},directives:[n.sg,S.r,n.O5,D.bd,T.NU,T.$1,L.m,A.g,Tn,d.SK,d.t3,hn.ZU,yn.I,B.Ls,E.w,On.h,Rn.p9],pipes:[An.wr,Zn.a],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}),l})();var Yn=o(1243);function un(l,m){if(1&l){const a=t.EpF();t.TgZ(0,"nz-alert",8),t.NdJ("nzOnClose",function(){return t.CHM(a),t.oxw().onSuccessBannerClose()}),t.qZA()}}function Un(l,m){if(1&l&&t._UZ(0,"nz-alert",9),2&l){t.oxw();const a=t.MAs(4);t.Q6J("nzDescription",a)}}function Dn(l,m){if(1&l&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&l){const a=m.$implicit;t.xp6(1),t.hij(" ",a," ")}}function $n(l,m){if(1&l&&(t.TgZ(0,"ul"),t.YNc(1,Dn,2,1,"li",10),t.qZA()),2&l){const a=t.oxw();t.xp6(1),t.Q6J("ngForOf",a.errorMessages)}}function Bn(l,m){}function wn(l,m){1&l&&t.YNc(0,Bn,0,0,"ng-template")}function jn(l,m){if(1&l&&(t.ynx(0),t.YNc(1,wn,1,0,null,15),t.BQk()),2&l){t.oxw();const a=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",a)}}function Wn(l,m){}function ln(l,m){1&l&&t.YNc(0,Wn,0,0,"ng-template")}function Vn(l,m){if(1&l&&(t.TgZ(0,"span",16),t.YNc(1,ln,1,0,null,15),t.qZA()),2&l){t.oxw();const a=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",a)}}function Gn(l,m){if(1&l&&(t.TgZ(0,"button",17),t._uU(1),t.ALo(2,"enumToTitle"),t.qZA()),2&l){const a=t.oxw().ngrxLet,g=t.oxw();t.Q6J("disabled",!(void 0!==g.comment&&g.comment.length>=10&&a.signedIn)),t.xp6(1),t.hij(" Flag ",t.lcZ(2,2,g.flaggable.entityType)," ")}}function Kn(l,m){if(1&l){const a=t.EpF();t.ynx(0),t.TgZ(1,"cvc-form-buttons")(2,"cvc-org-selector-btn-group",11),t.NdJ("selectedOrgChange",function(f){return t.CHM(a),t.oxw().onOrgSelected(f)}),t.YNc(3,jn,2,1,"ng-container",12),t.YNc(4,Vn,2,1,"ng-template",null,13,t.W1O),t.YNc(6,Gn,3,4,"ng-template",null,14,t.W1O),t.qZA()(),t.BQk()}if(2&l){const a=m.ngrxLet,g=t.MAs(5);t.xp6(3),t.Q6J("ngIf",a.signedIn)("ngIfElse",g)}}let Hn=(()=>{class l{constructor(a,g,f){this.gql=a,this.viewerService=g,this.networkErrorService=f,this.errorMessages=[],this.success=!1,this.loading=!1,this.comment="",this.destroy$=new R.xQ,this.addFlagMutator=new I.U(f)}ngOnInit(){if(this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(a=>{this.selectedOrg=a.mostRecentOrg}),void 0===this.flaggable)throw new Error("Must pass a flagggable into flag add component")}onOrgSelected(a){this.selectedOrg=a}submitFlag(){var a;this.errorMessages=[];let g={comment:this.comment,subject:this.flaggable,organizationId:null===(a=this.selectedOrg)||void 0===a?void 0:a.id},f=this.addFlagMutator.mutate(this.gql,{input:g});f.submitSuccess$.pipe((0,y.R)(this.destroy$)).subscribe(Y=>{Y&&(this.flagAddedCallback&&this.flagAddedCallback(),this.success=!0,this.comment="")}),f.submitError$.pipe((0,y.R)(this.destroy$)).subscribe(Y=>{Y.length>0&&(this.errorMessages=Y)}),f.isSubmitting$.pipe((0,y.R)(this.destroy$)).subscribe(Y=>{this.loading=Y})}onSuccessBannerClose(){this.success=!1}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return l.\u0275fac=function(a){return new(a||l)(t.Y36(p.B0s),t.Y36(Z.a),t.Y36($.Y))},l.\u0275cmp=t.Xpm({type:l,selectors:[["cvc-flag-add-form"]],inputs:{flaggable:"flaggable",flagAddedCallback:"flagAddedCallback"},decls:11,vars:5,consts:[["nzType","inner"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription",4,"ngIf"],["errorContents",""],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[3,"comment","commentChange"],["nzTip","Submitting",3,"nzSpinning"],[4,"ngrxLet"],["nzBanner","","nzMessage","Flag submitted","nzType","success","nzCloseable","",3,"nzOnClose"],["nzType","error","nzShowIcon","","nzMessage","Error Adding Flag",3,"nzDescription"],[4,"ngFor","ngForOf"],[3,"selectedOrgChange"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to flag entity."],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small",3,"disabled"]],template:function(a,g){1&a&&(t.TgZ(0,"nz-card",0),t.YNc(1,un,1,0,"nz-alert",1),t.YNc(2,Un,1,1,"nz-alert",2),t.YNc(3,$n,2,1,"ng-template",null,3,t.W1O),t.TgZ(5,"form",4),t.NdJ("ngSubmit",function(){return g.submitFlag()}),t.TgZ(6,"cvc-comment-input-form",5),t.NdJ("commentChange",function(Y){return g.comment=Y}),t.qZA(),t.TgZ(7,"nz-spin",6)(8,"nz-form-item")(9,"nz-form-control"),t.YNc(10,Kn,8,2,"ng-container",7),t.qZA()()()()()),2&a&&(t.xp6(1),t.Q6J("ngIf",g.success),t.xp6(1),t.Q6J("ngIf",g.errorMessages.length>0),t.xp6(4),t.Q6J("comment",g.comment),t.xp6(1),t.Q6J("nzSpinning",g.loading),t.xp6(3),t.Q6J("ngrxLet",g.viewer$))},directives:[D.bd,n.O5,S.r,n.sg,W._Y,W.JL,W.F,G.Lr,x.b,Q.W,d.SK,G.Nx,d.t3,G.Fd,U.eJ,O.Z,w.q,n.tP,v.SY,M.ix,C.dQ,K.m,E.w],pipes:[Yn.I],styles:[""]}),l})();var kn=o(8747),Xn=o(6699);function qn(l,m){if(1&l&&(t._UZ(0,"cvc-flag-list",13),t.ALo(1,"ngrxPush")),2&l){const a=t.oxw(2);t.Q6J("flags",t.lcZ(1,2,a.flags$))("flagResolvedCallback",a.refresh)}}function nt(l,m){if(1&l){const a=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(a);const f=t.oxw(2).ngrxLet;return t.oxw(2).loadMore(null==f?null:f.endCursor)}),t._uU(1,"Load More"),t.qZA()}}function tt(l,m){1&l&&(t.ynx(0),t.YNc(1,nt,2,0,"button",15),t.BQk())}function et(l,m){if(1&l&&(t.ynx(0),t.YNc(1,tt,2,0,"ng-container",14),t.BQk()),2&l){const a=m.ngrxLet;t.xp6(1),t.Q6J("ngIf",null==a?null:a.hasNextPage)}}function it(l,m){if(1&l&&t._UZ(0,"cvc-flag-add-form",17),2&l){const a=t.oxw(2);t.Q6J("flaggable",a.flaggable)("flagAddedCallback",a.refresh)}}function ot(l,m){if(1&l&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&l){const a=m.$implicit;t.xp6(1),t.Oqu(a.displayName)}}function at(l,m){if(1&l&&t._UZ(0,"nz-avatar",20),2&l){const a=t.oxw().$implicit;t.Q6J("nzSrc",a.profileImagePath)}}function st(l,m){if(1&l&&(t._UZ(0,"nz-avatar",21),t.ALo(1,"uppercase")),2&l){const a=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,a.username.charAt(0)))}}function lt(l,m){if(1&l&&(t.YNc(0,at,1,1,"nz-avatar",18),t.YNc(1,st,2,3,"ng-template",null,19,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&l){const a=m.$implicit,g=t.MAs(2);t.Q6J("ngIf",a.profileImagePath)("ngIfElse",g),t.xp6(4),t.Oqu(a.username)}}function ct(l,m){if(1&l&&t._UZ(0,"nz-avatar",20),2&l){const a=t.oxw().$implicit;t.Q6J("nzSrc",a.profileImagePath)}}function _t(l,m){if(1&l&&(t._UZ(0,"nz-avatar",21),t.ALo(1,"uppercase")),2&l){const a=t.oxw().$implicit;t.Q6J("nzText",t.lcZ(1,1,a.username.charAt(0)))}}function rt(l,m){if(1&l&&(t.YNc(0,ct,1,1,"nz-avatar",18),t.YNc(1,_t,2,3,"ng-template",null,19,t.W1O),t.TgZ(3,"span"),t._uU(4),t.qZA()),2&l){const a=m.$implicit,g=t.MAs(2);t.Q6J("ngIf",a.profileImagePath)("ngIfElse",g),t.xp6(4),t.Oqu(a.username)}}function pt(l,m){if(1&l){const a=t.EpF();t.ynx(0),t.TgZ(1,"nz-row",2)(2,"nz-col",3)(3,"nz-space",4),t.YNc(4,qn,2,4,"cvc-flag-list",5),t.YNc(5,et,2,1,"ng-container",6),t.YNc(6,it,1,2,"cvc-flag-add-form",7),t.qZA()(),t.TgZ(7,"nz-col",8)(8,"cvc-participant-list",9),t.NdJ("participantSelectedEvent",function(f){return t.CHM(a),t.oxw().onStateSelected(f)}),t.YNc(9,ot,2,1,"ng-template",null,10,t.W1O),t.qZA(),t.TgZ(11,"cvc-participant-list",11),t.NdJ("participantSelectedEvent",function(f){return t.CHM(a),t.oxw().onFlaggingUsersSelected(f)}),t.ALo(12,"ngrxPush"),t.YNc(13,lt,5,3,"ng-template",null,10,t.W1O),t.qZA(),t.TgZ(15,"cvc-participant-list",12),t.NdJ("participantSelectedEvent",function(f){return t.CHM(a),t.oxw().onResolvingUsersSelected(f)}),t.ALo(16,"ngrxPush"),t.YNc(17,rt,5,3,"ng-template",null,10,t.W1O),t.qZA()()(),t.BQk()}if(2&l){const a=t.oxw();t.xp6(1),t.Q6J("nzGutter",16),t.xp6(4),t.Q6J("ngrxLet",a.pageInfo$),t.xp6(3),t.Q6J("preselectedOption",a.selectableStates[0])("participantList",a.selectableStates),t.xp6(3),t.Q6J("participantList",t.lcZ(12,6,a.uniqueFlaggingUsers$)),t.xp6(4),t.Q6J("participantList",t.lcZ(16,8,a.uniqueResolvingUsers$))}}function gt(l,m){if(1&l&&t._UZ(0,"cvc-flag-add-form",17),2&l){const a=t.oxw();t.Q6J("flaggable",a.flaggable)("flagAddedCallback",a.refresh)}}let mt=(()=>{class l{constructor(a){this.gql=a,this.defaultPageSize=5,this.selectableStates=[{id:1,displayName:"Open",value:p.BQZ.Open},{id:2,displayName:"Resolved",value:p.BQZ.Resolved}]}ngOnInit(){if(null==this.flaggable)throw new Error("Must pass a flaggable into flag list");this.queryRef=this.gql.watch({first:this.defaultPageSize,flaggable:this.flaggable,state:p.BQZ.Open}),this.refresh=()=>{this.queryRef.refetch()},this.results$=this.queryRef.valueChanges,this.flags$=this.results$.pipe((0,_.j)("data","flags","edges"),(0,c.U)(a=>a.map(g=>g.node))),this.pageInfo$=this.results$.pipe((0,_.j)("data","flags","pageInfo")),this.unfilteredCount$=this.results$.pipe((0,_.j)("data","flags","unfilteredCountForSubject")),this.uniqueFlaggingUsers$=this.results$.pipe((0,c.U)(({data:a})=>{var g;return null===(g=a.flags)||void 0===g?void 0:g.uniqueFlaggingUsers})),this.uniqueResolvingUsers$=this.results$.pipe((0,c.U)(({data:a})=>{var g;return null===(g=a.flags)||void 0===g?void 0:g.uniqueResolvingUsers}))}onFlaggingUsersSelected(a){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},flaggingUserId:a?a.id:void 0})}onResolvingUsersSelected(a){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},resolvingUserId:a?a.id:void 0})}onStateSelected(a){this.queryRef.refetch({flaggable:{id:this.flaggable.id,entityType:this.flaggable.entityType},state:a?a.value:void 0})}loadMore(a){var g;null===(g=this.queryRef)||void 0===g||g.fetchMore({variables:{first:this.defaultPageSize,after:a}})}}return l.\u0275fac=function(a){return new(a||l)(t.Y36(p.rzy))},l.\u0275cmp=t.Xpm({type:l,selectors:[["cvc-flag-list-and-filter"]],inputs:{flaggable:"flaggable"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noFlags",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"flags","flagResolvedCallback",4,"nzSpaceItem"],[4,"ngrxLet"],[3,"flaggable","flagAddedCallback",4,"nzSpaceItem"],["nzSpan","6"],["listTitle","Flag State",3,"preselectedOption","participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Flagging Users",3,"participantList","participantSelectedEvent"],["listTitle","Resolving Users",3,"participantList","participantSelectedEvent"],[3,"flags","flagResolvedCallback"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[3,"flaggable","flagAddedCallback"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"]],template:function(a,g){if(1&a&&(t.YNc(0,pt,19,10,"ng-container",0),t.ALo(1,"ngrxPush"),t.YNc(2,gt,1,2,"ng-template",null,1,t.W1O)),2&a){const f=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,g.unfilteredCount$))("ngIfElse",f)}},directives:[n.O5,d.SK,d.t3,T.NU,T.$1,Jn,U.eJ,M.ix,C.dQ,E.w,Hn,kn.l,Xn.Dz],pipes:[U.fM,n.gd],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}),l})()},4271:(X,N,o)=>{o.d(N,{M:()=>sn});var p=o(9808),_=o(6949),c=o(3868),t=o(7345),n=o(7484),d=o(4546),T=o(3762),R=o(8625),y=o(3075),Z=o(1825),S=o(6042),D=o(4375),L=o(2359),A=o(404),I=o(6905),$=o(4509),U=o(7525),v=o(5e3);let M=(()=>{class b{}return b.\u0275fac=function(en){return new(en||b)},b.\u0275mod=v.oAB({type:b}),b.\u0275inj=v.cJS({imports:[[p.ez,y.u5,y.UX,_.WG,d.U5,S.sL,n.vh,L.L,A.cg,U.j,Z.A,D.R,I.s,$.w]]}),b})();var C=o(8909),E=o(3580),J=o(6286),B=o(592),W=o(9779),G=o(717),x=o(8645),Q=o(4867),O=o(7026),w=o(3610),K=o(5017);let nn=(()=>{class b{}return b.\u0275fac=function(en){return new(en||b)},b.\u0275mod=v.oAB({type:b}),b.\u0275inj=v.cJS({imports:[[p.ez,y.UX,_.WG,S.sL,d.U5,y.u5,L.L,n.vh,w.$6,K.PV,A.cg,U.j,$.w,D.R,Z.A]]}),b})();var on=o(6699),an=o(6114),z=o(5737),P=o(685),h=o(1894),V=o(1047),q=o(8144),cn=o(8481),_n=o(3618);let rn=(()=>{class b{}return b.\u0275fac=function(en){return new(en||b)},b.\u0275mod=v.oAB({type:b}),b.\u0275inj=v.cJS({imports:[[p.ez,h.Jb,T.Ph,n.vh,q.zf,cn.X,_n.ZJ,on.Rt,P.Xo,an.Wr,z.S,A.cg,T.Ph,w.$6,K.PV,V.o7,y.u5,R.$L.forChild({formatter:{useClass:O.x,provide:R.KP}}),Z.A,W.s,t.W,E.Q,G.N,J.y,Q.Q,x.M,B.x,I.s,S.sL,L.L,_.WG,nn,z.S,C.m]]}),b})();var j=o(1150);let sn=(()=>{class b{}return b.\u0275fac=function(en){return new(en||b)},b.\u0275mod=v.oAB({type:b}),b.\u0275inj=v.cJS({imports:[[p.ez,y.u5,_.WG,R.$L.forChild({formatter:{useClass:O.x,provide:R.KP}}),S.sL,d.U5,c.aF,S.sL,t.W,T.Ph,n.vh,M,rn,P.Xo,j.N,on.Rt,q.zf]]}),b})()},8168:(X,N,o)=>{o.d(N,{Y:()=>_});var p=o(5e3);let _=(()=>{class c{constructor(){}}return c.\u0275fac=function(n){return new(n||c)},c.\u0275dir=p.lG2({type:c,selectors:[["","cvcFlaggableOptions",""]]}),c})()},5623:(X,N,o)=>{o.d(N,{o:()=>U});var p=o(5e3),_=o(8168),c=o(9808),t=o(4401),n=o(325),d=o(5017),T=o(404);const R=["cvcFlaggable",""];function y(v,M){1&v&&p.Hsn(0)}function Z(v,M){1&v&&p.GkF(0)}function S(v,M){if(1&v&&(p.ynx(0),p.YNc(1,Z,1,0,"ng-container",2),p.BQk()),2&v){p.oxw();const C=p.MAs(1);p.xp6(1),p.Q6J("ngTemplateOutlet",C)}}function D(v,M){if(1&v&&(p.TgZ(0,"a",6),p._UZ(1,"i",7),p.qZA()),2&v){p.oxw();const C=p.MAs(5);p.xp6(1),p.Q6J("nzTooltipTitle",C)}}function L(v,M){if(1&v&&p._uU(0),2&v){const C=p.oxw(2);p.hij(" ",C.flags," open flags ")}}function A(v,M){1&v&&p.GkF(0)}function I(v,M){if(1&v&&(p.ynx(0),p.TgZ(1,"nz-ribbon",3),p.YNc(2,D,2,1,"ng-template",null,4,p.W1O),p.YNc(4,L,1,1,"ng-template",null,5,p.W1O),p.YNc(6,A,1,0,"ng-container",2),p.qZA(),p.BQk()),2&v){const C=p.MAs(3);p.oxw();const E=p.MAs(1);p.xp6(1),p.Q6J("nzText",C),p.xp6(5),p.Q6J("ngTemplateOutlet",E)}}const $=["*"];let U=(()=>{class v{constructor(C){this.renderer=C}ngOnChanges(){this.flags&&0===this.flags?this.removeFlagged():this.addFlagged()}ngAfterViewInit(){this.flags&&0===this.flags?this.removeFlagged():this.addFlagged()}addFlagged(){this.flaggedChild&&this.renderer.addClass(this.flaggedChild.nativeElement,"flaggedChild")}removeFlagged(){this.flaggedChild&&this.renderer.removeClass(this.flaggedChild.nativeElement,"flaggedChild")}}return v.\u0275fac=function(C){return new(C||v)(p.Y36(p.Qsj))},v.\u0275cmp=p.Xpm({type:v,selectors:[["","cvcFlaggable",""]],contentQueries:function(C,E,J){if(1&C&&p.Suo(J,_.Y,5,p.SBq),2&C){let B;p.iGM(B=p.CRH())&&(E.flaggedChild=B.first)}},inputs:{flags:"flags",entity:"entity"},features:[p.TTD],attrs:R,ngContentSelectors:$,decls:4,vars:2,consts:[["flaggedContent",""],[4,"ngIf"],[4,"ngTemplateOutlet"],["nzPlacement","start","nzColor","#ff3333",3,"nzText"],["flaggedText",""],["flaggedTooltip",""],["routerLink","flags",2,"color","#FFF"],["nz-icon","","nzType","flag","nzTheme","fill","nz-tooltip","","nzTooltipPlacement","top","nzTooltipColor","#FF3333",3,"nzTooltipTitle"]],template:function(C,E){1&C&&(p.F$t(),p.YNc(0,y,1,0,"ng-template",null,0,p.W1O),p.YNc(2,S,2,1,"ng-container",1),p.YNc(3,I,7,2,"ng-container",1)),2&C&&(p.xp6(2),p.Q6J("ngIf",0===E.flags),p.xp6(1),p.Q6J("ngIf",E.flags))},directives:[c.O5,c.tP,t.F9,n.yS,d.Ls,T.SY],styles:[""]}),v})()},4682:(X,N,o)=>{o.d(N,{m:()=>R});var p=o(9808),_=o(404),c=o(3618),t=o(4401),n=o(5017),d=o(325),T=o(5e3);let R=(()=>{class y{}return y.\u0275fac=function(S){return new(S||y)},y.\u0275mod=T.oAB({type:y}),y.\u0275inj=T.cJS({imports:[[p.ez,d.Bz,n.PV,t.mS,_.cg,c.ZJ]]}),y})()},6059:(X,N,o)=>{o.d(N,{i:()=>rn});var p=o(9808),_=o(7484),c=o(3762),t=o(1894),n=o(5e3);let d=(()=>{class j{}return j.\u0275fac=function(b){return new(b||j)},j.\u0275mod=n.oAB({type:j}),j.\u0275inj=n.cJS({imports:[[p.ez,t.Jb]]}),j})();var T=o(2322),R=o(9779),y=o(8144),Z=o(1825),S=o(8481),D=o(3618),L=o(6699),A=o(8625),I=o(7345),$=o(3580),U=o(6286),v=o(4867),M=o(8645),C=o(5482),E=o(685),J=o(592),B=o(6114),W=o(5737),G=o(404),x=o(6042),Q=o(2359),O=o(6949),w=o(5017),K=o(3610),nn=o(1047),on=o(3075),an=o(6905),z=o(3098),P=o(7026),h=o(4509),V=o(8909),q=o(209),cn=o(717),_n=o(2467);let rn=(()=>{class j{}return j.\u0275fac=function(b){return new(b||j)},j.\u0275mod=n.oAB({type:j}),j.\u0275inj=n.cJS({imports:[[p.ez,t.Jb,c.Ph,_.vh,y.zf,S.X,D.ZJ,L.Rt,E.Xo,B.Wr,W.S,G.cg,c.Ph,K.$6,w.PV,nn.o7,z.q6,W.S,on.u5,A.$L.forChild({formatter:{useClass:P.x,provide:A.KP}}),Z.A,T.C,R.s,d,I.W,$.Q,cn.N,U.y,v.Q,q.i,M.M,J.x,h.w,_n.u,an.s,V.m,C.cD,x.sL,Q.L,O.WG]]}),j})()},1365:(X,N,o)=>{o.d(N,{a:()=>Ve});var p=o(7630),_=o(373),c=o(4850),t=o(1059),n=o(5e3),d=o(325),T=o(9808),R=o(1894),y=o(8144),Z=o(8929),S=o(6123),D=o(7625),L=o(9350),A=o(9169),I=o(2359),$=o(6949),U=o(7484),v=o(5482),M=o(3762),C=o(8481);let E=(()=>{class e{transform(i){return i?i.replace(/([a-z])([A-Z])/g,"$1 $2"):""}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=n.Yjl({name:"camelToWords",type:e,pure:!0}),e})();const J=["itemTemplate"],B=function(e){return{$implicit:e}};function W(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,r=n.oxw();n.xp6(2),n.Q6J("ngTemplateOutlet",r.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,B,i))}}function G(e,s){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function x(e,s){if(1&e&&(n.TgZ(0,"nz-list-item",9),n.YNc(1,W,3,4,"ng-container",10),n.YNc(2,G,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=s.$implicit,r=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",r)}}function Q(e,s){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw();n.MGl("nzNoResult","No ",i.entityType,"")}}function O(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,r=n.oxw(3);n.xp6(2),n.Q6J("ngTemplateOutlet",r.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,B,i))}}function w(e,s){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function K(e,s){if(1&e&&(n.TgZ(0,"nz-list-item",17),n.YNc(1,O,3,4,"ng-container",10),n.YNc(2,w,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=s.$implicit,r=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",r)}}function nn(e,s){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw(3);n.MGl("nzNoResult","No ",i.entityType," Removed")}}function on(e,s){if(1&e&&(n.TgZ(0,"nz-list",2),n.YNc(1,K,4,2,"nz-list-item",16),n.YNc(2,nn,1,1,"nz-list-empty",4),n.qZA()),2&e){const i=n.oxw(2);n.MGl("nzHeader","Removed ",i.entityType,""),n.xp6(1),n.Q6J("ngForOf",i.diffObject.removedObjects),n.xp6(1),n.Q6J("ngIf",0===i.diffObject.removedObjects.length)}}function an(e,s){1&e&&(n.ynx(0),n.YNc(1,on,3,3,"nz-list",7),n.BQk())}function z(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,r=n.oxw(2);n.xp6(2),n.Q6J("ngTemplateOutlet",r.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,B,i))}}function P(e,s){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function h(e,s){if(1&e&&(n.TgZ(0,"nz-list-item",19),n.YNc(1,z,3,4,"ng-container",10),n.YNc(2,P,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=s.$implicit,r=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",r)}}function V(e,s){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw(2);n.MGl("nzNoResult","No ",i.entityType," Added")}}function q(e,s){if(1&e&&(n.TgZ(0,"nz-list",2),n.YNc(1,h,4,2,"nz-list-item",18),n.YNc(2,V,1,1,"nz-list-empty",4),n.qZA()),2&e){const i=n.oxw();n.MGl("nzHeader","Added ",i.entityType,""),n.xp6(1),n.Q6J("ngForOf",i.diffObject.addedObjects),n.xp6(1),n.Q6J("ngIf",0===i.diffObject.addedObjects.length)}}function cn(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,r=n.oxw(3);n.xp6(2),n.Q6J("ngTemplateOutlet",r.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,B,i))}}function _n(e,s){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function rn(e,s){if(1&e&&(n.TgZ(0,"nz-list-item",21),n.YNc(1,cn,3,4,"ng-container",10),n.YNc(2,_n,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=s.$implicit,r=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",r)}}function j(e,s){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw(3);n.MGl("nzNoResult","No ",i.entityType," Kept")}}function sn(e,s){if(1&e&&(n.TgZ(0,"nz-list",2),n.YNc(1,rn,4,2,"nz-list-item",20),n.YNc(2,j,1,1,"nz-list-empty",4),n.qZA()),2&e){const i=n.oxw(2);n.MGl("nzHeader","Kept ",i.entityType,""),n.xp6(1),n.Q6J("ngForOf",i.diffObject.keptObjects),n.xp6(1),n.Q6J("ngIf",0===i.diffObject.keptObjects.length)}}function b(e,s){1&e&&(n.ynx(0),n.YNc(1,sn,3,3,"nz-list",7),n.BQk())}function tn(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"span",12),n.GkF(2,13),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit,r=n.oxw();n.xp6(2),n.Q6J("ngTemplateOutlet",r.itemTemplateRef||null)("ngTemplateOutletContext",n.VKq(2,B,i))}}function en(e,s){if(1&e&&(n.TgZ(0,"nz-tag",14),n._uU(1),n.ALo(2,"camelToWords"),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.AsE("Deleted ",n.lcZ(2,2,i.entityType)," ",i.id,"")}}function vn(e,s){if(1&e&&(n.TgZ(0,"nz-list-item",22),n.YNc(1,tn,3,4,"ng-container",10),n.YNc(2,en,3,4,"ng-template",null,11,n.W1O),n.qZA()),2&e){const i=s.$implicit,r=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.deleted)("ngIfElse",r)}}function zn(e,s){if(1&e&&n._UZ(0,"nz-list-empty",15),2&e){const i=n.oxw();n.MGl("nzNoResult","No ",i.entityType,"")}}let Cn=(()=>{class e{constructor(){}ngOnInit(){if(void 0===this.diffObject)throw new Error("Must specify a diffObject.");if(void 0===this.entityType)throw new Error("Must specify an entityType.")}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["cvc-revision-list-diff"]],contentQueries:function(i,r,u){if(1&i&&n.Suo(u,J,5),2&i){let F;n.iGM(F=n.CRH())&&(r.itemTemplateRef=F.first)}},inputs:{diffObject:"diffObject",entityType:"entityType"},decls:14,vars:12,consts:[[3,"nzGutter"],[3,"nzSpan"],["nzBordered","","nzType","inner","nzSize","small",3,"nzHeader"],["ngClass","current",4,"ngFor","ngForOf"],[3,"nzNoResult",4,"ngIf"],["nzDirection","vertical"],[4,"ngIf"],["nzBordered","","nzType","inner","nzSize","small",3,"nzHeader",4,"nzSpaceItem"],["ngClass","suggested",4,"ngFor","ngForOf"],["ngClass","current"],[4,"ngIf","ngIfElse"],["deleted",""],["nz-typography",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nzColor","error"],[3,"nzNoResult"],["ngClass","removed",4,"ngFor","ngForOf"],["ngClass","removed"],["ngClass","added",4,"ngFor","ngForOf"],["ngClass","added"],["ngClass","kept",4,"ngFor","ngForOf"],["ngClass","kept"],["ngClass","suggested"]],template:function(i,r){1&i&&(n.TgZ(0,"nz-row",0)(1,"nz-col",1)(2,"nz-list",2),n.YNc(3,x,4,2,"nz-list-item",3),n.YNc(4,Q,1,1,"nz-list-empty",4),n.qZA()(),n.TgZ(5,"nz-col",1)(6,"nz-space",5),n.YNc(7,an,2,0,"ng-container",6),n.YNc(8,q,3,3,"nz-list",7),n.YNc(9,b,2,0,"ng-container",6),n.qZA()(),n.TgZ(10,"nz-col",1)(11,"nz-list",2),n.YNc(12,vn,4,2,"nz-list-item",8),n.YNc(13,zn,1,1,"nz-list-empty",4),n.qZA()()()),2&i&&(n.Q6J("nzGutter",16),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(1),n.MGl("nzHeader","Original ",r.entityType," List"),n.xp6(1),n.Q6J("ngForOf",r.diffObject.currentObjects),n.xp6(1),n.Q6J("ngIf",0===r.diffObject.currentObjects.length),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.Q6J("ngIf",r.diffObject.currentObjects.length>0),n.xp6(2),n.Q6J("ngIf",r.diffObject.currentObjects.length>0),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(1),n.MGl("nzHeader","Revised ",r.entityType," List"),n.xp6(1),n.Q6J("ngForOf",r.diffObject.suggestedObjects),n.xp6(1),n.Q6J("ngIf",0===r.diffObject.suggestedObjects.length))},directives:[R.SK,R.t3,M.n_,T.sg,M.AA,T.mk,T.O5,T.tP,C.j,M.I2,y.NU,y.$1],pipes:[E],styles:["[_nghost-%COMP%]{display:block}nz-list[_ngcontent-%COMP%]   .kept[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{background-color:#f6ffed;color:#135200}nz-list[_ngcontent-%COMP%]   .removed[_ngcontent-%COMP%]{background-color:#fff1f0;color:#820014}nz-list[_ngcontent-%COMP%]   .suggested[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-space[_ngcontent-%COMP%]{width:100%}"]}),e})();var xn=o(6906),Tn=o(4022),hn=o(8511),yn=o(1275),On=o(7701),Rn=o(7956),An=o(8664),Zn=o(9001);let Ln=(()=>{class e{constructor(){}ngOnInit(){if(void 0===this.left)throw new Error("Must provide a left side of the diff.");if(void 0===this.right)throw new Error("Must provide a right side of the diff.");if(void 0===this.entityType)throw new Error("Must provide a diff.")}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["cvc-revision-value-diff"]],inputs:{currentValue:"currentValue",suggestedValue:"suggestedValue",left:"left",right:"right",entityType:"entityType"},decls:15,vars:10,consts:[[3,"nzGutter"],[3,"nzSpan"],[3,"innerHtml"],[1,"diff","suggested"],[1,"background"]],template:function(i,r){1&i&&(n.TgZ(0,"nz-row",0)(1,"nz-col",1)(2,"h4"),n._uU(3),n.qZA(),n._UZ(4,"div",2),n.qZA(),n.TgZ(5,"nz-col",1)(6,"h4"),n._uU(7),n.qZA(),n._UZ(8,"div",2),n.qZA(),n.TgZ(9,"nz-col",1)(10,"h4"),n._uU(11),n.qZA(),n.TgZ(12,"div",3)(13,"div",4),n._uU(14),n.qZA()()()()),2&i&&(n.Q6J("nzGutter",16),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.hij("Original ",r.entityType,""),n.xp6(1),n.Q6J("innerHtml",r.left,n.oJD),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.hij("",r.entityType," Diff"),n.xp6(1),n.Q6J("innerHtml",r.right,n.oJD),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(2),n.hij("Revised ",r.entityType,""),n.xp6(3),n.hij(" ",r.suggestedValue," "))},directives:[R.SK,R.t3],styles:[":host{display:block}.diff{overflow:auto;width:100%}.diff .background{padding:4px 8px}.diff.insertions .background{background:#f6ffed;color:#237804}.diff.deletions .background{background:#fff1f0;color:#a8071a}.diff.suggested .background,.diff.original .background{background:#f0f5ff;color:#10239e}.diff del,.diff ins{text-decoration:none}.diff del strong{font-weight:400;background:#fcc}.diff ins strong{font-weight:400;background:#9f9}.diff .del{font-weight:400;background:#fee;color:#b00}.diff .ins{font-weight:400;background:#dfd;color:#080}ul{list-style:none}\n"],encapsulation:2}),e})();var Fn=o(5737),Mn=o(7948),bn=o(3618),En=o(125),pn=o(5017),gn=o(2683),Qn=o(3610),Sn=o(4590),mn=o(6042),Nn=o(6114),In=o(404),dn=o(685),fn=o(2643),Pn=o(9383),Jn=o(8227),Yn=o(6612),un=o(3098),Un=o(1243),Dn=o(8625),$n=o(160);function Bn(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"nz-alert",4),n.NdJ("nzOnClose",function(){const F=n.CHM(i).$implicit;return n.oxw().onErrorBannerClose(F)}),n.qZA()}2&e&&n.Q6J("nzMessage",s.$implicit)}function wn(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"nz-alert",5),n.NdJ("nzOnClose",function(){return n.CHM(i),n.oxw().onSuccessBannerClose()}),n.qZA()}if(2&e){const i=n.oxw();n.MGl("nzMessage","Revision(s) successfully ",i.success,".")}}function jn(e,s){1&e&&n._UZ(0,"cvc-source-tag",20),2&e&&n.Q6J("source",s.$implicit)}function Wn(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",18),n.YNc(2,jn,1,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}const ln=function(e,s,i){return{id:e,name:s,link:i}};function Vn(e,s){if(1&e&&n._UZ(0,"cvc-disease-tag",22),2&e){const i=s.$implicit;n.Q6J("disease",n.kEZ(1,ln,i.id,i.displayName,i.link))}}function Gn(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",21),n.YNc(2,Vn,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function Kn(e,s){if(1&e&&n._UZ(0,"cvc-molecular-profile-tag",24),2&e){const i=s.$implicit;n.Q6J("molecularProfile",n.kEZ(1,ln,i.id,i.displayName,i.link))}}function Hn(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",23),n.YNc(2,Kn,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function kn(e,s){if(1&e&&n._UZ(0,"cvc-therapy-tag",26),2&e){const i=s.$implicit;n.Q6J("therapy",n.kEZ(1,ln,i.id,i.displayName,i.link))}}function Xn(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",25),n.YNc(2,kn,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function qn(e,s){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function nt(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",27),n.YNc(2,qn,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function tt(e,s){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function et(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",28),n.YNc(2,tt,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function it(e,s){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function ot(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",29),n.YNc(2,it,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function at(e,s){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function st(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",30),n.YNc(2,at,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function lt(e,s){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function ct(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",31),n.YNc(2,lt,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function _t(e,s){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function rt(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",32),n.YNc(2,_t,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function pt(e,s){if(1&e&&(n.TgZ(0,"nz-tag"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.hij(" ",i.displayName," ")}}function gt(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",33),n.YNc(2,pt,2,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function mt(e,s){if(1&e&&n._UZ(0,"cvc-variant-type-tag",35),2&e){const i=s.$implicit;n.Q6J("variantType",n.kEZ(1,ln,i.id,i.displayName,i.link))}}function l(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",34),n.YNc(2,mt,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function m(e,s){if(1&e&&n._UZ(0,"cvc-phenotype-tag",37),2&e){const i=s.$implicit;n.Q6J("phenotype",n.kEZ(1,ln,i.id,i.displayName,i.link))}}function a(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",36),n.YNc(2,m,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function g(e,s){if(1&e&&n._UZ(0,"cvc-variant-tag",39),2&e){const i=s.$implicit;n.Q6J("variant",n.kEZ(1,ln,i.id,i.displayName,i.link))}}function f(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",38),n.YNc(2,g,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function Y(e,s){if(1&e&&n._UZ(0,"cvc-variant-tag",39),2&e){const i=s.$implicit;n.Q6J("variant",n.kEZ(1,ln,i.id,i.displayName,i.link))}}function ut(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",40),n.YNc(2,Y,1,5,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function vt(e,s){1&e&&n._UZ(0,"cvc-source-tag",20),2&e&&n.Q6J("source",s.$implicit)}function zt(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",41),n.YNc(2,vt,1,1,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}const Ct=function(e,s,i,r){return{id:e,name:s,link:i,status:r}};function xt(e,s){if(1&e&&n._UZ(0,"cvc-evidence-tag",43),2&e){const i=s.$implicit;n.Q6J("evidence",n.l5B(1,Ct,i.id,i.displayName,i.link,i.status))}}function Tt(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"cvc-revision-list-diff",42),n.YNc(2,xt,1,6,"ng-template",null,19,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("diffObject",i.linkoutData.diffValue)}}function ht(e,s){if(1&e&&(n.ynx(0),n._UZ(1,"cvc-revision-value-diff",44),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(1),n.Q6J("currentValue",i.currentValue)("suggestedValue",i.suggestedValue)("left",i.linkoutData.diffValue.left)("right",i.linkoutData.diffValue.right)("entityType",i.linkoutData.name)}}function yt(e,s){if(1&e&&(n.ynx(0),n._UZ(1,"cvc-comment-body",48),n.BQk()),2&e){const i=n.oxw(2).$implicit;n.xp6(1),n.Q6J("commentBodySegments",i.resolutionComment.parsedComment)}}function Ot(e,s){if(1&e&&n._UZ(0,"cvc-user-tag",49),2&e){const i=n.oxw(2).$implicit;n.Q6J("user",i.resolver)}}function Rt(e,s){if(1&e&&(n.ynx(0),n._UZ(1,"nz-divider"),n.TgZ(2,"nz-row")(3,"nz-col",45),n.YNc(4,yt,2,1,"ng-container",15),n.qZA(),n.TgZ(5,"nz-col",46),n._uU(6),n.ALo(7,"enumToTitle"),n.YNc(8,Ot,1,1,"cvc-user-tag",47),n._uU(9),n.ALo(10,"timeago"),n.qZA()(),n.BQk()),2&e){const i=n.oxw().$implicit;n.xp6(4),n.Q6J("ngIf",i.resolutionComment),n.xp6(2),n.hij(" ",n.lcZ(7,4,i.status)," By "),n.xp6(2),n.Q6J("ngIf",void 0!==i.resolver),n.xp6(1),n.hij(" ",n.lcZ(10,6,i.resolvedAt)," ")}}function At(e,s){if(1&e&&(n.TgZ(0,"span"),n._UZ(1,"i",51),n.ALo(2,"entityColor"),n._uU(3),n.TgZ(4,"span"),n._uU(5),n.qZA()()),2&e){const i=n.oxw(2).$implicit;n.xp6(1),n.Q6J("nzTwotoneColor",n.lcZ(2,3,"Revision")),n.xp6(2),n.hij(" RID",i.id," "),n.xp6(2),n.hij("",i.linkoutData.name," Updated")}}function Zt(e,s){if(1&e&&n._UZ(0,"i",54),2&e){n.oxw();const i=n.MAs(3);n.Q6J("nzPopoverContent",i)}}function Lt(e,s){if(1&e&&n._UZ(0,"cvc-comment-body",48),2&e){const i=n.oxw(3).$implicit;n.Q6J("commentBodySegments",i.creationComment.parsedComment)}}function Ft(e,s){1&e&&(n.ynx(0),n.YNc(1,Zt,1,1,"i",52),n.YNc(2,Lt,1,1,"ng-template",null,53,n.W1O),n.BQk())}function Mt(e,s){if(1&e&&(n.TgZ(0,"nz-space"),n.YNc(1,At,6,5,"span",50),n.YNc(2,Ft,4,0,"ng-container",15),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(2),n.Q6J("ngIf",i.creationComment)}}function bt(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"span",61),n._uU(2,"Submitted By"),n.qZA(),n._UZ(3,"cvc-user-tag",49),n.BQk()),2&e){const i=n.oxw(3).$implicit;n.xp6(3),n.Q6J("user",i.revisor)}}function Et(e,s){1&e&&(n.TgZ(0,"span",61),n._uU(1,"Submitted"),n.qZA())}function Qt(e,s){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,bt,4,1,"ng-container",59),n.YNc(2,Et,2,0,"ng-template",null,60,n.W1O),n.TgZ(4,"span",61),n._uU(5),n.ALo(6,"timeago"),n.qZA()()),2&e){const i=n.MAs(3),r=n.oxw(2).$implicit;n.xp6(1),n.Q6J("ngIf",r.revisor)("ngIfElse",i),n.xp6(4),n.Oqu(n.lcZ(6,3,r.createdAt))}}function St(e,s){if(1&e&&n._UZ(0,"cvc-status-tag",62),2&e){const i=n.oxw(2).$implicit;n.Q6J("status",i.status)}}function Nt(e,s){1&e&&n._UZ(0,"nz-divider",63)}function It(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"a",64),n.NdJ("click",function(){n.CHM(i);const u=n.oxw(2).$implicit;return n.oxw(3).onChangesetSelected(u.revisionsetId)}),n._uU(1,"Show Group"),n.qZA()}}function Pt(e,s){1&e&&n._UZ(0,"nz-divider",63)}function Jt(e,s){1&e&&n._UZ(0,"label",67),2&e&&n.Q6J("nzDisabled",!0)}function Yt(e,s){1&e&&n._UZ(0,"label",70),2&e&&n.Q6J("nzDisabled",!0)}function Ut(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"label",71),n.NdJ("nzCheckedChange",function(u){n.CHM(i);const F=n.oxw(5).$implicit;return n.oxw(3).onRevisionCheckboxClicked(u,F.id)}),n.qZA()}}function Dt(e,s){if(1&e&&(n.YNc(0,Yt,1,1,"label",68),n.YNc(1,Ut,1,0,"ng-template",null,69,n.W1O)),2&e){const i=n.MAs(2),r=n.oxw(4).$implicit,u=n.oxw(2).ngrxLet;n.Q6J("ngIf",u.isCurator&&u.id!=(null==r.revisor?null:r.revisor.id))("ngIfElse",i)}}function $t(e,s){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,Jt,1,1,"label",65),n.YNc(2,Dt,3,2,"ng-template",null,66,n.W1O),n.qZA()),2&e){const i=n.MAs(3),r=n.oxw(5).ngrxLet;n.xp6(1),n.Q6J("ngIf",!r.signedIn)("ngIfElse",i)}}function Bt(e,s){1&e&&(n.ynx(0),n.YNc(1,Pt,1,0,"nz-divider",57),n.YNc(2,$t,4,2,"span",50),n.BQk())}function wt(e,s){if(1&e&&(n.TgZ(0,"nz-space",55),n.NdJ("click",function(r){return r.stopPropagation()}),n.YNc(1,Qt,7,5,"span",50),n.YNc(2,St,1,1,"cvc-status-tag",56),n.YNc(3,Nt,1,0,"nz-divider",57),n.YNc(4,It,2,0,"a",58),n.YNc(5,Bt,3,0,"ng-container",15),n.qZA()),2&e){const i=n.oxw().$implicit;n.xp6(5),n.Q6J("ngIf","NEW"===i.status)}}function jt(e,s){if(1&e&&(n.TgZ(0,"nz-collapse-panel",11),n.ynx(1,12),n.YNc(2,Wn,4,1,"ng-container",13),n.YNc(3,Gn,4,1,"ng-container",13),n.YNc(4,Hn,4,1,"ng-container",13),n.YNc(5,Xn,4,1,"ng-container",13),n.YNc(6,nt,4,1,"ng-container",13),n.YNc(7,et,4,1,"ng-container",13),n.YNc(8,ot,4,1,"ng-container",13),n.YNc(9,st,4,1,"ng-container",13),n.YNc(10,ct,4,1,"ng-container",13),n.YNc(11,rt,4,1,"ng-container",13),n.YNc(12,gt,4,1,"ng-container",13),n.YNc(13,l,4,1,"ng-container",13),n.YNc(14,a,4,1,"ng-container",13),n.YNc(15,f,4,1,"ng-container",13),n.YNc(16,ut,4,1,"ng-container",13),n.YNc(17,zt,4,1,"ng-container",13),n.YNc(18,Tt,4,1,"ng-container",13),n.YNc(19,ht,2,5,"ng-container",14),n.BQk(),n.YNc(20,Rt,11,8,"ng-container",15),n.YNc(21,Mt,3,1,"ng-template",null,16,n.W1O),n.YNc(23,wt,6,1,"ng-template",null,17,n.W1O),n.qZA()),2&e){const i=s.$implicit,r=n.MAs(22),u=n.MAs(24);n.Q6J("nzHeader",r)("nzExtra",u)("nzActive",!0),n.xp6(1),n.Q6J("ngSwitch",i.fieldName),n.xp6(1),n.Q6J("ngSwitchCase","source_ids"),n.xp6(1),n.Q6J("ngSwitchCase","disease_id"),n.xp6(1),n.Q6J("ngSwitchCase","molecular_profile_id"),n.xp6(1),n.Q6J("ngSwitchCase","drug_ids"),n.xp6(1),n.Q6J("ngSwitchCase","variant_alias_ids"),n.xp6(1),n.Q6J("ngSwitchCase","molecular_profile_alias_ids"),n.xp6(1),n.Q6J("ngSwitchCase","clinvar_entry_ids"),n.xp6(1),n.Q6J("ngSwitchCase","clingen_code_ids"),n.xp6(1),n.Q6J("ngSwitchCase","acmg_code_ids"),n.xp6(1),n.Q6J("ngSwitchCase","nccn_guideline_id"),n.xp6(1),n.Q6J("ngSwitchCase","hgvs_expression_ids"),n.xp6(1),n.Q6J("ngSwitchCase","variant_type_ids"),n.xp6(1),n.Q6J("ngSwitchCase","phenotype_ids"),n.xp6(1),n.Q6J("ngSwitchCase","variant_id"),n.xp6(1),n.Q6J("ngSwitchCase","variant_ids"),n.xp6(1),n.Q6J("ngSwitchCase","source_id"),n.xp6(1),n.Q6J("ngSwitchCase","evidence_item_ids"),n.xp6(2),n.Q6J("ngIf","NEW"!==i.status)}}function Wt(e,s){if(1&e&&(n.TgZ(0,"nz-collapse",9),n.YNc(1,jt,25,22,"nz-collapse-panel",10),n.qZA()),2&e){const i=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",i.untypedRevisons)}}function Vt(e,s){1&e&&n._UZ(0,"nz-empty",72)}function Gt(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"nz-card",6),n.YNc(2,Wt,2,1,"nz-collapse",7),n.YNc(3,Vt,1,0,"ng-template",null,8,n.W1O),n.qZA(),n.BQk()),2&e){const i=n.MAs(4),r=n.oxw(),u=n.MAs(4);n.xp6(1),n.Q6J("nzExtra",u),n.xp6(1),n.Q6J("ngIf",r.revisions&&r.revisions.length>0)("ngIfElse",i)}}function Kt(e,s){}function Ht(e,s){1&e&&n.YNc(0,Kt,0,0,"ng-template")}function kt(e,s){if(1&e&&(n.ynx(0),n.YNc(1,Ht,1,0,null,81),n.BQk()),2&e){n.oxw();const i=n.MAs(5);n.xp6(1),n.Q6J("ngTemplateOutlet",i)}}function Xt(e,s){}function qt(e,s){1&e&&n.YNc(0,Xt,0,0,"ng-template")}function ne(e,s){if(1&e&&(n.TgZ(0,"span",82),n.YNc(1,qt,1,0,null,81),n.qZA()),2&e){n.oxw();const i=n.MAs(5);n.xp6(1),n.Q6J("ngTemplateOutlet",i)}}function te(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"button",83),n.NdJ("nzPopoverVisibleChange",function(u){return n.CHM(i),n.oxw(7).validationPopoverVisible=u})("click",function(){n.CHM(i);const u=n.oxw(7);return u.validationPopoverVisible=!u.validationPopoverVisible}),n._uU(1," Review Selected Revisions "),n._UZ(2,"i",84),n.qZA()}if(2&e){const i=n.oxw(2).ngrxLet,r=n.MAs(7),u=n.MAs(9),F=n.oxw(5);n.Q6J("nzPopoverTitle",r)("nzPopoverVisible",F.validationPopoverVisible)("nzPopoverContent",u)("nzPopoverTrigger",void 0)("disabled",0===F.selectedRevisionIds.length||!i.signedIn)}}function ee(e,s){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,kt,2,1,"ng-container",59),n.YNc(2,ne,2,1,"ng-template",null,79,n.W1O),n.YNc(4,te,3,5,"ng-template",null,80,n.W1O),n.qZA()),2&e){const i=n.MAs(3),r=n.oxw().ngrxLet;n.xp6(1),n.Q6J("ngIf",r.signedIn)("ngIfElse",i)}}function ie(e,s){if(1&e&&n._UZ(0,"i",86),2&e){n.oxw(4);const i=n.MAs(3);n.Q6J("nzPopoverContent",i)}}function oe(e,s){1&e&&(n.ynx(0),n.YNc(1,ie,1,1,"i",85),n.BQk())}const ae=function(){return{float:"right"}};function se(e,s){if(1&e){const i=n.EpF();n._uU(0," Review Selected Revisions "),n.TgZ(1,"span",87)(2,"i",88),n.NdJ("click",function(){return n.CHM(i),n.oxw(6).validationPopoverVisible=!1}),n.qZA()()}2&e&&(n.xp6(1),n.Q6J("ngStyle",n.DdM(1,ae)))}function le(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"cvc-comment-input-form",91),n.NdJ("commentChange",function(u){return n.CHM(i),n.oxw(7).revisionComment=u}),n.qZA()}if(2&e){const i=n.oxw(7);n.Q6J("comment",i.revisionComment)}}function ce(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"span")(1,"cvc-org-selector-btn-group",92),n.NdJ("selectedOrgChange",function(u){return n.CHM(i),n.oxw(8).mostRecentOrg=u}),n.TgZ(2,"button",93),n.NdJ("click",function(){return n.CHM(i),n.oxw(8).onRejectRevisionsClicked()}),n._uU(3," Reject Revision "),n.qZA()()()}if(2&e){const i=n.oxw(8);n.xp6(1),n.Q6J("selectedOrg",i.mostRecentOrg),n.xp6(1),n.Q6J("nzLoading",i.isLoading)("disabled",void 0===i.revisionComment||i.revisionComment.length<10)}}function _e(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"span")(1,"cvc-org-selector-btn-group",92),n.NdJ("selectedOrgChange",function(u){return n.CHM(i),n.oxw(8).mostRecentOrg=u}),n.TgZ(2,"button",94),n.NdJ("click",function(){return n.CHM(i),n.oxw(8).onAcceptRevisionClicked()}),n._uU(3," Accept Revision "),n.qZA()()()}if(2&e){const i=n.oxw(4).ngrxLet,r=n.oxw(4);n.xp6(1),n.Q6J("selectedOrg",r.mostRecentOrg),n.xp6(1),n.Q6J("nzLoading",r.isLoading)("disabled",!(0==i&&(void 0===r.revisionComment||""===r.revisionComment||r.revisionComment.length>=10)))}}function re(e,s){if(1&e&&n._UZ(0,"i",96),2&e){n.oxw(6);const i=n.MAs(3);n.Q6J("nzPopoverContent",i)}}function pe(e,s){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,re,1,1,"i",95),n.qZA()),2&e){const i=n.oxw(4).ngrxLet;n.xp6(1),n.Q6J("ngIf",i>0)}}function ge(e,s){1&e&&(n.TgZ(0,"span")(1,"nz-space"),n.YNc(2,ce,4,3,"span",50),n.YNc(3,_e,4,3,"span",50),n.YNc(4,pe,2,1,"span",50),n.qZA()())}function me(e,s){1&e&&(n.TgZ(0,"nz-space",89),n.YNc(1,le,1,1,"cvc-comment-input-form",90),n.YNc(2,ge,5,0,"span",50),n.qZA())}function de(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"div",74)(2,"div",75)(3,"nz-space",76),n.YNc(4,ee,6,2,"span",50),n.YNc(5,oe,2,0,"ng-container",15),n.qZA(),n.YNc(6,se,3,2,"ng-template",null,77,n.W1O),n.YNc(8,me,3,0,"ng-template",null,78,n.W1O),n.qZA()(),n.BQk()),2&e){const i=n.oxw().ngrxLet;n.xp6(5),n.Q6J("ngIf",i>0)}}function fe(e,s){if(1&e&&(n.ynx(0),n.YNc(1,de,10,1,"ng-container",2),n.BQk()),2&e){const i=n.oxw(4);n.xp6(1),n.Q6J("ngrxLet",i.viewer$)}}function ue(e,s){if(1&e&&(n.TgZ(0,"nz-list-item"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.Oqu(i)}}function ve(e,s){if(1&e&&(n.TgZ(0,"nz-card",98)(1,"nz-list",99),n.YNc(2,ue,2,1,"nz-list-item",100),n.qZA()()),2&e){const i=n.oxw(3).ngrxLet;n.xp6(2),n.Q6J("ngForOf",i)}}function ze(e,s){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,ve,3,1,"nz-card",97),n.qZA()),2&e){const i=n.oxw(2).ngrxLet;n.xp6(1),n.Q6J("ngIf",i.length>0)}}function Ce(e,s){if(1&e&&(n.TgZ(0,"nz-descriptions-item",105),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.Q6J("nzTitle",i.fieldName),n.xp6(1),n.Oqu(i.error)}}function xe(e,s){if(1&e&&(n.TgZ(0,"nz-card",102)(1,"nz-descriptions",103),n.YNc(2,Ce,2,2,"nz-descriptions-item",104),n.qZA()()),2&e){const i=n.oxw(4).ngrxLet;n.xp6(2),n.Q6J("ngForOf",i)}}function Te(e,s){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,xe,3,1,"nz-card",101),n.qZA()),2&e){const i=n.oxw(3).ngrxLet;n.xp6(1),n.Q6J("ngIf",i.length>0)}}function he(e,s){1&e&&(n.TgZ(0,"nz-space",89),n.YNc(1,ze,2,1,"span",50),n.YNc(2,Te,2,1,"span",50),n.qZA())}function ye(e,s){if(1&e&&(n.ynx(0),n.YNc(1,fe,2,1,"ng-container",2),n.YNc(2,he,3,0,"ng-template",null,73,n.W1O),n.BQk()),2&e){const i=n.oxw(3);n.xp6(1),n.Q6J("ngrxLet",i.totalErrorCount$)}}function Oe(e,s){if(1&e&&(n.ynx(0),n.YNc(1,ye,4,1,"ng-container",2),n.BQk()),2&e){const i=n.oxw(2);n.xp6(1),n.Q6J("ngrxLet",i.genericErrors$)}}function Re(e,s){if(1&e&&n.YNc(0,Oe,2,1,"ng-container",2),2&e){const i=n.oxw();n.Q6J("ngrxLet",i.validationErrors$)}}let Ae=(()=>{class e{constructor(i,r,u,F,H){this.viewerService=i,this.networkErrorService=r,this.acceptRevisionsGql=u,this.rejectRevisionsGql=F,this.validationGql=H,this.refetchQueries=[],this.selectedRevisionIds=[],this.isLoading=!1,this.success=!1,this.validationPopoverVisible=!1,this.destroy$=new Z.xQ,this.revisionSetSelectedEvent=new n.vpe,this.revisionMutationCompleted=new n.vpe,this.acceptRevisionsMutator=new S.U(r),this.rejectRevisionsMutator=new S.U(r)}ngOnChanges(i){this.untypedRevisons=this.revisions,this.selectedRevisionIds=[],this.queryRef&&this.queryRef.refetch({ids:this.selectedRevisionIds})}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.viewerService.viewer$.subscribe(i=>{this.mostRecentOrg=i.mostRecentOrg}),this.queryRef=this.validationGql.watch({ids:[]}),this.genericErrors$=this.queryRef.valueChanges.pipe((0,c.U)(({data:i})=>i.validateRevisionsForAcceptance.genericErrors)),this.validationErrors$=this.queryRef.valueChanges.pipe((0,c.U)(({data:i})=>i.validateRevisionsForAcceptance.validationErrors)),this.totalErrorCount$=this.queryRef.valueChanges.pipe((0,c.U)(({data:i})=>i.validateRevisionsForAcceptance.genericErrors.length+i.validateRevisionsForAcceptance.validationErrors.length),(0,t.O)(0)),this.untypedRevisons=this.revisions}onChangesetSelected(i){this.revisionSetSelectedEvent.emit(i)}onRevisionCheckboxClicked(i,r){i?this.selectedRevisionIds.push(r):this.selectedRevisionIds=this.selectedRevisionIds.filter(u=>u!=r),this.queryRef.refetch({ids:this.selectedRevisionIds})}setupMutationResultHandlers(i,r){i.submitSuccess$.pipe((0,D.R)(this.destroy$)).subscribe(u=>{u&&(this.isLoading=!1,this.revisionMutationCompleted.emit(),this.errors=void 0,this.success=r,this.validationPopoverVisible=!1,this.selectedRevisionIds=[])}),i.submitError$.pipe((0,D.R)(this.destroy$)).subscribe(u=>{u.length>0&&(this.isLoading=!1,this.success=!1,this.errors=u,this.validationPopoverVisible=!1,this.selectedRevisionIds=[])})}onRejectRevisionsClicked(){var i;if(this.revisionComment&&""!==this.revisionComment){this.isLoading=!0;let r=this.rejectRevisionsMutator.mutate(this.rejectRevisionsGql,{input:{ids:this.selectedRevisionIds,organizationId:null===(i=this.mostRecentOrg)||void 0===i?void 0:i.id,comment:this.revisionComment}},{refetchQueries:this.refetchQueries});this.setupMutationResultHandlers(r,"rejected")}}onAcceptRevisionClicked(){var i;this.isLoading=!0;let r=this.acceptRevisionsMutator.mutate(this.acceptRevisionsGql,{input:{ids:this.selectedRevisionIds,organizationId:null===(i=this.mostRecentOrg)||void 0===i?void 0:i.id,comment:""===this.revisionComment?void 0:this.revisionComment}},{refetchQueries:this.refetchQueries});this.setupMutationResultHandlers(r,"accepted")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onErrorBannerClose(i){var r;this.errors=null===(r=this.errors)||void 0===r?void 0:r.filter(u=>u!=i)}onSuccessBannerClose(){this.success=!1}}return e.\u0275fac=function(i){return new(i||e)(n.Y36(L.a),n.Y36(A.Y),n.Y36(p.ti),n.Y36(p.VZq),n.Y36(p.Qzn))},e.\u0275cmp=n.Xpm({type:e,selectors:[["cvc-revision-list"]],inputs:{revisions:"revisions",refetchQueries:"refetchQueries"},outputs:{revisionSetSelectedEvent:"revisionSetSelectedEvent",revisionMutationCompleted:"revisionMutationCompleted"},features:[n.TTD],decls:5,vars:3,consts:[["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngFor","ngForOf"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose",4,"ngIf"],[4,"ngrxLet"],["moderationButtons",""],["nzBanner","","nzType","error","nzCloseable","",3,"nzMessage","nzOnClose"],["nzBanner","","nzType","success","nzCloseable","",3,"nzMessage","nzOnClose"],["nzTitle","Revisions",1,"card-list",3,"nzExtra"],["class","revision-list",4,"ngIf","ngIfElse"],["noRevisions",""],[1,"revision-list"],[3,"nzHeader","nzExtra","nzActive",4,"ngFor","ngForOf"],[3,"nzHeader","nzExtra","nzActive"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"],["revCardHeaderTitle",""],["revCardHeaderExtra",""],["entityType","Sources",3,"diffObject"],["itemTemplate",""],[3,"source"],["entityType","Disease",3,"diffObject"],[3,"disease"],["entityType","Molecular Profile",3,"diffObject"],[3,"molecularProfile"],["entityType","Therapies",3,"diffObject"],[3,"therapy"],["entityType","Variant Aliases",3,"diffObject"],["entityType","Molecular Profile Aliases",3,"diffObject"],["entityType","ClinVar Entries",3,"diffObject"],["entityType","ClinGen/CGC/VICC Code(s)",3,"diffObject"],["entityType","ACMG/AMP Code(s)",3,"diffObject"],["entityType","NCCN Guideline",3,"diffObject"],["entityType","HGVS Expressions",3,"diffObject"],["entityType","Variant Types",3,"diffObject"],[3,"variantType"],["entityType","Phenotypes",3,"diffObject"],[3,"phenotype"],["entityType","Variant",3,"diffObject"],[3,"variant"],["entityType","Variants",3,"diffObject"],["entityType","Source",3,"diffObject"],["entityType","Evidence",3,"diffObject"],[3,"evidence"],[3,"currentValue","suggestedValue","left","right","entityType"],["nzSpan","16"],["nzSpan","8","nz-typography","","nzType","secondary",2,"text-align","right"],[3,"user",4,"ngIf"],[3,"commentBodySegments"],[3,"user"],[4,"nzSpaceItem"],["nz-icon","","nzTheme","twotone","nzType","civic-revision",3,"nzTwotoneColor"],["nz-popover","","nz-icon","","nzType","comment","nzTheme","outline",3,"nzPopoverContent",4,"nzSpaceItem"],["creationCommentTemplate",""],["nz-popover","","nz-icon","","nzType","comment","nzTheme","outline",3,"nzPopoverContent"],["nzSize","small",3,"click"],[3,"status",4,"nzSpaceItem"],["nzType","vertical",4,"nzSpaceItem"],["nz-button","","nzType","link",3,"click",4,"nzSpaceItem"],[4,"ngIf","ngIfElse"],["noRevisor",""],["nz-typography","","nzType","secondary"],[3,"status"],["nzType","vertical"],["nz-button","","nzType","link",3,"click"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions.",3,"nzDisabled",4,"ngIf","ngIfElse"],["loggedIn",""],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions.",3,"nzDisabled"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Curators may only reject their own revisions.",3,"nzDisabled",4,"ngIf","ngIfElse"],["canRevise",""],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Curators may only reject their own revisions.",3,"nzDisabled"],["nz-checkbox","","nz-tooltip","","nzTooltipTitle","Select Revision for Acceptance/Rejection",3,"nzCheckedChange"],["nzNotFoundImage","simple","nzNotFoundContent","No Revisions matching filters"],["validationErrorTemplate",""],["nz-row","",2,"margin-top","1em"],["nz-col","","nzSpan","24",2,"text-align","right"],["nzDirection","horizontal"],["validationPopoverTitleTemplate",""],["validationPopoverContentTemplate",""],["notSignedIn",""],["submitButton",""],[4,"ngTemplateOutlet"],["nz-tooltip","","nzTooltipTitle","Must be signed in to manage revisions."],["nz-button","","nz-popover","","nzSize","small","nzPopoverPlacement","bottom",3,"nzPopoverTitle","nzPopoverVisible","nzPopoverContent","nzPopoverTrigger","disabled","nzPopoverVisibleChange","click"],["nz-icon","","nzType","caret-down","nzTheme","outline"],["nz-icon","","nzType","exclamation-circle","nzTheme","twotone","nzTwotoneColor","red","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent",4,"nzSpaceItem"],["nz-icon","","nzType","exclamation-circle","nzTheme","twotone","nzTwotoneColor","red","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent"],[3,"ngStyle"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nzDirection","vertical"],[3,"comment","commentChange",4,"nzSpaceItem"],[3,"comment","commentChange"],[3,"selectedOrg","selectedOrgChange"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzSize","small","nzDanger","",3,"nzLoading","disabled","click"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzSize","small",3,"nzLoading","disabled","click"],["nz-icon","","nzTwotoneColor","red","nzType","exclamation-circle","nzTheme","twotone","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent",4,"ngIf"],["nz-icon","","nzTwotoneColor","red","nzType","exclamation-circle","nzTheme","twotone","nz-popover","","nzPopoverTitle","Selected Revisions would result in an invalid entity",3,"nzPopoverContent"],["nzTitle","Errors",4,"ngIf"],["nzTitle","Errors"],["nzSize","small"],[4,"ngFor","ngForOf"],["nzTitle","Validation Errors",4,"ngIf"],["nzTitle","Validation Errors"],["nzBordered",""],[3,"nzTitle",4,"ngFor","ngForOf"],[3,"nzTitle"]],template:function(i,r){1&i&&(n.YNc(0,Bn,1,1,"nz-alert",0),n.YNc(1,wn,1,1,"nz-alert",1),n.YNc(2,Gt,5,3,"ng-container",2),n.YNc(3,Re,1,1,"ng-template",null,3,n.W1O)),2&i&&(n.Q6J("ngForOf",r.errors),n.xp6(1),n.Q6J("ngIf",r.success),n.xp6(1),n.Q6J("ngrxLet",r.viewer$))},directives:[T.sg,I.r,T.O5,$.eJ,U.bd,v.yH,v.Zv,T.RF,T.n9,Cn,xn.T,Tn.n,hn.p,yn.T,C.j,On.j,Rn.i,An.I,Zn.O,T.ED,Ln,Fn.g,R.SK,R.t3,Mn.m,bn.ZU,En.I,y.NU,y.$1,pn.Ls,gn.w,Qn.lU,Sn.h,mn.ix,Nn.Ie,In.SY,dn.p9,T.tP,fn.dQ,T.PC,Pn.b,Jn.q,Yn.m,M.n_,M.AA,un.R7,un.uj],pipes:[Un.I,Dn.wr,$n.a],styles:["[_nghost-%COMP%]{display:block}nz-list[_ngcontent-%COMP%]   .kept[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{background-color:#f6ffed;color:#135200}nz-list[_ngcontent-%COMP%]   .removed[_ngcontent-%COMP%]{background-color:#fff1f0;color:#820014}nz-list[_ngcontent-%COMP%]   .suggested[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}nz-list[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#f0f5ff;color:#061178}"]}),e})();var Ze=o(8747),Le=o(6699);function Fe(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"cvc-revision-list",14),n.NdJ("revisionSetSelectedEvent",function(u){return n.CHM(i),n.oxw(2).onRevisionSetSelected(u)})("revisionMutationCompleted",function(){return n.CHM(i),n.oxw(2).refresh()}),n.ALo(1,"ngrxPush"),n.qZA()}if(2&e){const i=n.oxw(2);n.Q6J("revisions",n.lcZ(1,2,i.revisions$))("refetchQueries",i.refetchQueries)}}function Me(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"button",17),n.NdJ("click",function(){n.CHM(i);const u=n.oxw(2).ngrxLet;return n.oxw(2).loadMore(null==u?null:u.endCursor)}),n._uU(1,"Load More"),n.qZA()}}function be(e,s){1&e&&(n.ynx(0),n.YNc(1,Me,2,0,"button",16),n.BQk())}function Ee(e,s){if(1&e&&(n.ynx(0),n.YNc(1,be,2,0,"ng-container",15),n.BQk()),2&e){const i=s.ngrxLet;n.xp6(1),n.Q6J("ngIf",null==i?null:i.hasNextPage)}}function Qe(e,s){if(1&e){const i=n.EpF();n.TgZ(0,"nz-row")(1,"nz-tag",19),n.NdJ("nzOnClose",function(){return n.CHM(i),n.oxw(3).onSetFilterClearClicked()}),n._uU(2),n.qZA()()}if(2&e){const i=n.oxw(3);n.xp6(2),n.hij("Group: ",i.filteredSet,"")}}function Se(e,s){1&e&&(n.TgZ(0,"nz-space",4),n.YNc(1,Qe,3,1,"nz-row",18),n.qZA())}function Ne(e,s){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.Oqu(i.displayName)}}function Ie(e,s){if(1&e&&n._UZ(0,"nz-avatar",22),2&e){const i=n.oxw().$implicit;n.Q6J("nzSrc",i.profileImagePath)}}function Pe(e,s){if(1&e&&(n._UZ(0,"nz-avatar",23),n.ALo(1,"uppercase")),2&e){const i=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,i.username.charAt(0)))}}function Je(e,s){if(1&e&&(n.YNc(0,Ie,1,1,"nz-avatar",20),n.YNc(1,Pe,2,3,"ng-template",null,21,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&e){const i=s.$implicit,r=n.MAs(2);n.Q6J("ngIf",i.profileImagePath)("ngIfElse",r),n.xp6(4),n.Oqu(i.username)}}function Ye(e,s){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const i=s.$implicit;n.xp6(1),n.Oqu(i.displayName)}}function Ue(e,s){if(1&e&&n._UZ(0,"nz-avatar",22),2&e){const i=n.oxw().$implicit;n.Q6J("nzSrc",i.profileImagePath)}}function De(e,s){if(1&e&&(n._UZ(0,"nz-avatar",23),n.ALo(1,"uppercase")),2&e){const i=n.oxw().$implicit;n.Q6J("nzText",n.lcZ(1,1,i.username.charAt(0)))}}function $e(e,s){if(1&e&&(n.YNc(0,Ue,1,1,"nz-avatar",20),n.YNc(1,De,2,3,"ng-template",null,21,n.W1O),n.TgZ(3,"span"),n._uU(4),n.qZA()),2&e){const i=s.$implicit,r=n.MAs(2);n.Q6J("ngIf",i.profileImagePath)("ngIfElse",r),n.xp6(4),n.Oqu(i.username)}}function Be(e,s){if(1&e){const i=n.EpF();n.ynx(0),n.TgZ(1,"nz-row",2)(2,"nz-col",3)(3,"nz-space",4),n.YNc(4,Fe,2,4,"cvc-revision-list",5),n.YNc(5,Ee,2,1,"ng-container",6),n.qZA()(),n.TgZ(6,"nz-col",7),n.YNc(7,Se,2,0,"nz-space",8),n.TgZ(8,"cvc-participant-list",9),n.NdJ("participantSelectedEvent",function(u){return n.CHM(i),n.oxw().onStatusSelected(u)}),n.YNc(9,Ne,2,1,"ng-template",null,10,n.W1O),n.qZA(),n.TgZ(11,"cvc-participant-list",11),n.NdJ("participantSelectedEvent",function(u){return n.CHM(i),n.oxw().onRevisorSelected(u)}),n.ALo(12,"ngrxPush"),n.YNc(13,Je,5,3,"ng-template",null,10,n.W1O),n.qZA(),n.TgZ(15,"cvc-participant-list",12),n.NdJ("participantSelectedEvent",function(u){return n.CHM(i),n.oxw().onFieldNameSelected(u)}),n.ALo(16,"ngrxPush"),n.YNc(17,Ye,2,1,"ng-template",null,10,n.W1O),n.qZA(),n.TgZ(19,"cvc-participant-list",13),n.NdJ("participantSelectedEvent",function(u){return n.CHM(i),n.oxw().onResolverSelected(u)}),n.ALo(20,"ngrxPush"),n.YNc(21,$e,5,3,"ng-template",null,10,n.W1O),n.qZA()()(),n.BQk()}if(2&e){const i=n.oxw();n.xp6(1),n.Q6J("nzGutter",16),n.xp6(4),n.Q6J("ngrxLet",i.pageInfo$),n.xp6(2),n.Q6J("ngIf",i.filteredSet),n.xp6(1),n.Q6J("preselectedOption",i.preselectedRevisionStatus)("participantList",i.selectableStatuses),n.xp6(3),n.Q6J("participantList",n.lcZ(12,8,i.uniqueRevisors$)),n.xp6(4),n.Q6J("participantList",n.lcZ(16,10,i.revisionFields$)),n.xp6(4),n.Q6J("participantList",n.lcZ(20,12,i.uniqueResolvers$))}}function we(e,s){1&e&&(n.ynx(0),n.TgZ(1,"nz-row",25),n._UZ(2,"i",26),n.qZA(),n.BQk())}function je(e,s){1&e&&n._UZ(0,"nz-empty",27)}function We(e,s){if(1&e&&(n.YNc(0,we,3,0,"ng-container",0),n.ALo(1,"ngrxPush"),n.YNc(2,je,1,0,"ng-template",null,24,n.W1O)),2&e){const i=n.MAs(3),r=n.oxw();n.Q6J("ngIf",n.lcZ(1,2,r.isLoading$))("ngIfElse",i)}}let Ve=(()=>{class e{constructor(i,r,u,F,H,k,dt,ft,Ge,Ke,He,ke,Xe,qe){this.gql=i,this.route=r,this.variantDetailGql=u,this.variantSummaryGql=F,this.variantGroupDetailGql=H,this.variantGroupSummaryGql=k,this.assertionDetailGql=dt,this.assertionSummaryGql=ft,this.geneDetailGql=Ge,this.geneSummaryGql=Ke,this.evidenceDetailGql=He,this.evidenceSummaryGql=ke,this.molecularProfileDetailGql=Xe,this.molecularProfileSummaryGql=qe,this.filteredSet=void 0,this.selectableStatuses=[{id:4,displayName:"New",value:p.FJi.New},{id:1,displayName:"Accepted",value:p.FJi.Accepted},{id:2,displayName:"Rejected",value:p.FJi.Rejected},{id:3,displayName:"Superseded",value:p.FJi.Superseded}],this.preselectedRevisionStatus=this.selectableStatuses[0],this.defaultPageSize=10,this.refetchQueries=[]}ngOnInit(){switch(this.routeSub=this.route.params.subscribe(i=>{this.queryParamsSub=this.route.queryParams.subscribe(r=>{let u={first:this.defaultPageSize,subject:{id:this.id,entityType:this.entityType},status:p.FJi.New};r.revisionsetId&&(this.filteredSet=r.revisionsetId,this.preselectedRevisionStatus=void 0,u.status=void 0,u.revisionsetId=r.revisionsetId),this.queryRef=this.gql.watch(u);let F=this.queryRef.valueChanges;this.revisions$=F.pipe((0,_.j)("data","revisions","edges"),(0,c.U)(H=>H.map(k=>k.node))),this.isLoading$=F.pipe((0,c.U)(H=>H.loading),(0,t.O)(!0)),this.pageInfo$=F.pipe((0,_.j)("data","revisions","pageInfo")),this.uniqueRevisors$=F.pipe((0,c.U)(({data:H})=>{var k;return null===(k=H.revisions)||void 0===k?void 0:k.uniqueRevisors})),this.uniqueResolvers$=F.pipe((0,c.U)(({data:H})=>{var k;return null===(k=H.revisions)||void 0===k?void 0:k.uniqueResolvers})),this.revisionFields$=F.pipe((0,c.U)(({data:H})=>{var k;return null===(k=H.revisions)||void 0===k?void 0:k.revisedFieldNames.map((dt,ft)=>Object.assign(Object.assign({},dt),{id:ft}))})),this.unfilteredCount$=F.pipe((0,_.j)("data","revisions","unfilteredCountForSubject"))})}),this.entityType){case p.oRL.Variant:return this.refetchQueries.push({query:this.variantDetailGql.document,variables:{variantId:this.id}}),void this.refetchQueries.push({query:this.variantSummaryGql.document,variables:{variantId:this.id}});case p.oRL.Assertion:return this.refetchQueries.push({query:this.assertionDetailGql.document,variables:{assertionId:this.id}}),void this.refetchQueries.push({query:this.assertionSummaryGql.document,variables:{assertionId:this.id}});case p.oRL.EvidenceItem:return this.refetchQueries.push({query:this.evidenceDetailGql.document,variables:{evidenceId:this.id}}),void this.refetchQueries.push({query:this.evidenceSummaryGql.document,variables:{evidenceId:this.id}});case p.oRL.Gene:return this.refetchQueries.push({query:this.geneDetailGql.document,variables:{geneId:this.id}}),void this.refetchQueries.push({query:this.geneSummaryGql.document,variables:{geneId:this.id}});case p.oRL.VariantGroup:return this.refetchQueries.push({query:this.variantGroupDetailGql.document,variables:{variantGroupId:this.id}}),void this.refetchQueries.push({query:this.variantGroupSummaryGql.document,variables:{variantGroupId:this.id}});case p.oRL.MolecularProfile:return this.refetchQueries.push({query:this.molecularProfileDetailGql.document,variables:{molecularProfileId:this.id}}),void this.refetchQueries.push({query:this.molecularProfileSummaryGql.document,variables:{molecularProfileId:this.id}})}}ngOnDestroy(){var i,r;null===(i=this.routeSub)||void 0===i||i.unsubscribe(),null===(r=this.queryParamsSub)||void 0===r||r.unsubscribe()}onFieldNameSelected(i){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},fieldName:i?i.name:void 0})}onRevisorSelected(i){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},originatingUserId:i?i.id:void 0})}onResolverSelected(i){this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},resolvingUserId:i?i.id:void 0})}onStatusSelected(i){this.preselectedRevisionStatus=i,this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},status:i?i.value:void 0})}onRevisionSetSelected(i){this.filteredSet=i,this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},revisionsetId:i||void 0})}onSetFilterClearClicked(){this.filteredSet=void 0,this.queryRef.refetch({subject:{id:this.id,entityType:this.entityType},revisionsetId:void 0})}refresh(){this.queryRef.refetch()}loadMore(i){var r;null===(r=this.queryRef)||void 0===r||r.fetchMore({variables:{first:this.defaultPageSize,after:i}})}}return e.\u0275fac=function(i){return new(i||e)(n.Y36(p.L5n),n.Y36(d.gz),n.Y36(p.iJT),n.Y36(p.Bo4),n.Y36(p.Qtd),n.Y36(p.q1D),n.Y36(p.A94),n.Y36(p.ejK),n.Y36(p.TNk),n.Y36(p.cCu),n.Y36(p.pHu),n.Y36(p.sBY),n.Y36(p.AMF),n.Y36(p.Tg0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["cvc-revisions-list-and-filter"]],inputs:{id:"id",entityType:"entityType"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noRevisions",""],[3,"nzGutter"],["nzSpan","18"],["nzDirection","vertical"],[3,"revisions","refetchQueries","revisionSetSelectedEvent","revisionMutationCompleted",4,"nzSpaceItem"],[4,"ngrxLet"],["nzSpan","6"],["nzDirection","vertical",4,"ngIf"],["listTitle","Revision Status",3,"preselectedOption","participantList","participantSelectedEvent"],["itemTemplate",""],["listTitle","Revisors",3,"participantList","participantSelectedEvent"],["listTitle","Fields Revised",3,"participantList","participantSelectedEvent"],["listTitle","Resolvers",3,"participantList","participantSelectedEvent"],[3,"revisions","refetchQueries","revisionSetSelectedEvent","revisionMutationCompleted"],[4,"ngIf"],["nz-button","","nzBlock","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzBlock","","nzType","default",3,"click"],[4,"nzSpaceItem"],["nzMode","closeable",3,"nzOnClose"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["noAvatar",""],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["noneFound",""],["nzJustify","center"],["nz-icon","","nzType","loading",2,"font-size","32px"],["nzNotFoundImage","simple","nzNotFoundContent","Entity has no Revisions"]],template:function(i,r){if(1&i&&(n.YNc(0,Be,23,14,"ng-container",0),n.ALo(1,"ngrxPush"),n.YNc(2,We,4,4,"ng-template",null,1,n.W1O)),2&i){const u=n.MAs(3);n.Q6J("ngIf",n.lcZ(1,2,r.unfilteredCount$))("ngIfElse",u)}},directives:[T.O5,R.SK,R.t3,y.NU,y.$1,Ae,$.eJ,mn.ix,fn.dQ,gn.w,C.j,Ze.l,Le.Dz,pn.Ls,dn.p9],pipes:[$.fM,T.gd],styles:["[_nghost-%COMP%]{display:block}nz-space[_ngcontent-%COMP%]{width:100%}"]}),e})()},2914:(X,N,o)=>{o.d(N,{A:()=>$});var p=o(9808),_=o(6949),c=o(1894),t=o(3762),n=o(7484),d=o(8144),T=o(8481),R=o(3618),y=o(1150),Z=o(6699),S=o(6059),D=o(685),L=o(6042),A=o(5017),I=o(5e3);let $=(()=>{class U{}return U.\u0275fac=function(M){return new(M||U)},U.\u0275mod=I.oAB({type:U}),U.\u0275inj=I.cJS({imports:[[p.ez,_.WG,c.Jb,t.Ph,n.vh,d.zf,T.X,R.ZJ,Z.Rt,D.Xo,L.sL,A.PV,y.N,S.i]]}),U})()},759:(X,N,o)=>{o.d(N,{N:()=>G});var p=o(373),_=o(5e3),c=o(7630),t=o(3618),n=o(9808),d=o(325),T=o(6699),R=o(3610),y=o(6265),Z=o(3098),S=o(2937);function D(x,Q){1&x&&(_.ynx(0),_._uU(1,", "),_.BQk())}function L(x,Q){if(1&x&&(_.ynx(0),_._uU(1),_.ALo(2,"eventVerbiage"),_.YNc(3,D,2,0,"ng-container",12),_.BQk()),2&x){const O=Q.$implicit,w=Q.last;_.xp6(1),_.hij(" ",_.Dn7(2,2,O.action,"contributor-card",O.count)," "),_.xp6(2),_.Q6J("ngIf",!w)}}function A(x,Q){if(1&x&&(_.TgZ(0,"nz-descriptions",8)(1,"nz-descriptions-item",9),_.YNc(2,L,4,6,"ng-container",10),_.qZA(),_.TgZ(3,"nz-descriptions-item",11),_._uU(4),_.ALo(5,"date"),_.qZA()()),2&x){const O=_.oxw(2).$implicit;_.Q6J("nzColumn",1),_.xp6(2),_.Q6J("ngForOf",O.uniqueActions),_.xp6(2),_.hij(" ",_.lcZ(5,3,O.lastActionDate)," ")}}function I(x,Q){if(1&x&&(_.TgZ(0,"cvc-user-popover",6),_.YNc(1,A,6,5,"ng-template",null,7,_.W1O),_.qZA()),2&x){const O=_.oxw().$implicit;_.Q6J("userId",O.user.id)}}function $(x,Q){if(1&x&&(_.TgZ(0,"a",3),_._UZ(1,"nz-avatar",4),_.YNc(2,I,3,1,"ng-template",null,5,_.W1O),_.qZA()),2&x){const O=Q.$implicit,w=_.MAs(3);_.MGl("routerLink","/users/",O.user.id,""),_.xp6(1),_.Q6J("nzSize",14)("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",w)("nzSrc",O.user.profileImagePath)}}function U(x,Q){if(1&x&&(_.ynx(0),_.YNc(1,$,4,5,"a",2),_.BQk()),2&x){const O=_.oxw();_.xp6(1),_.Q6J("ngForOf",O.sortedContributors)}}function v(x,Q){1&x&&_._uU(0," None\n")}let M=(()=>{class x{ngOnInit(){if(void 0===this.contributors)throw new Error("Must pass a list of contributors into the contributor stack");this.sortedContributors=this.contributors.slice(),this.sortedContributors.sort((O,w)=>w.totalActionCount-O.totalActionCount)}}return x.\u0275fac=function(O){return new(O||x)},x.\u0275cmp=_.Xpm({type:x,selectors:[["cvc-contributor-stack"]],inputs:{contributors:"contributors"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noContributors",""],["class","avatar",3,"routerLink",4,"ngFor","ngForOf"],[1,"avatar",3,"routerLink"],["nz-popover","","nzPopoverTrigger","hover","nzPopoverPlacement","bottomRight","nzIcon","user","nzSize","small",3,"nzSize","nzPopoverMouseEnterDelay","nzPopoverContent","nzSrc"],["curatorPopover",""],[3,"userId"],["additionalMetadata",""],["nzBordered","","nzTitle","Activity","nzSize","small",3,"nzColumn"],["nzTitle","Contributions"],[4,"ngFor","ngForOf"],["nzTitle","Last Contribution"],[4,"ngIf"]],template:function(O,w){if(1&O&&(_.YNc(0,U,2,1,"ng-container",0),_.YNc(1,v,1,0,"ng-template",null,1,_.W1O)),2&O){const K=_.MAs(2);_.Q6J("ngIf",w.sortedContributors&&w.sortedContributors.length>0)("ngIfElse",K)}},directives:[n.O5,n.sg,d.yS,T.Dz,R.lU,y.q,Z.R7,Z.uj],pipes:[S.R,n.uU],styles:[""]}),x})();var C=o(6949);function E(x,Q){if(1&x&&(_.ynx(0),_._UZ(1,"cvc-contributor-stack",5),_.BQk()),2&x){const O=Q.ngIf;_.xp6(1),_.Q6J("contributors",O)}}function J(x,Q){1&x&&_._uU(0," None ")}function B(x,Q){if(1&x&&(_.ynx(0),_._UZ(1,"cvc-contributor-stack",5),_.BQk()),2&x){const O=Q.ngIf;_.xp6(1),_.Q6J("contributors",O)}}function W(x,Q){1&x&&_._uU(0," None ")}let G=(()=>{class x{constructor(O){this.gql=O}ngOnInit(){if(void 0===this.subscribable)throw new Error("Must pass a subscribable into ContributorAvatars component.");let O=this.gql.watch({subscribable:this.subscribable}).valueChanges;this.curators$=O.pipe((0,p.j)("data","contributors","curators")),this.editors$=O.pipe((0,p.j)("data","contributors","editors"))}}return x.\u0275fac=function(O){return new(O||x)(_.Y36(c.kQf))},x.\u0275cmp=_.Xpm({type:x,selectors:[["cvc-contributor-avatars"]],inputs:{subscribable:"subscribable"},decls:14,vars:8,consts:[["nz-typography","","nzType","secondary",1,"role-group-label"],[1,"role-group"],[4,"ngIf","ngIfElse"],["noCurators",""],["noEditors",""],[3,"contributors"]],template:function(O,w){if(1&O&&(_.TgZ(0,"span",0),_._uU(1,"Curators:"),_.qZA(),_.TgZ(2,"div",1),_.YNc(3,E,2,1,"ng-container",2),_.ALo(4,"ngrxPush"),_.YNc(5,J,1,0,"ng-template",null,3,_.W1O),_.qZA(),_.TgZ(7,"span",0),_._uU(8,"Editors:"),_.qZA(),_.TgZ(9,"div",1),_.YNc(10,B,2,1,"ng-container",2),_.ALo(11,"ngrxPush"),_.YNc(12,W,1,0,"ng-template",null,4,_.W1O),_.qZA()),2&O){const K=_.MAs(6),nn=_.MAs(13);_.xp6(3),_.Q6J("ngIf",_.lcZ(4,4,w.curators$))("ngIfElse",K),_.xp6(7),_.Q6J("ngIf",_.lcZ(11,6,w.editors$))("ngIfElse",nn)}},directives:[t.ZU,n.O5,M],pipes:[C.fM],styles:["[_nghost-%COMP%]{display:inline-block}.role-group-label[_ngcontent-%COMP%]{margin-left:12px}.role-group[_ngcontent-%COMP%]{display:inline-block}.role-group[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{display:inline-block;margin-left:2px}"]}),x})()},5750:(X,N,o)=>{o.d(N,{Z:()=>D});var p=o(9808),_=o(6949),c=o(3618),t=o(325),n=o(6699),d=o(3610),T=o(6905),R=o(6081),y=o(3098),Z=o(5e3);let S=(()=>{class L{}return L.\u0275fac=function(I){return new(I||L)},L.\u0275mod=Z.oAB({type:L}),L.\u0275inj=Z.cJS({imports:[[p.ez,t.Bz,n.Rt,d.$6,y.q6,T.s,R.J]]}),L})(),D=(()=>{class L{}return L.\u0275fac=function(I){return new(I||L)},L.\u0275mod=Z.oAB({type:L}),L.\u0275inj=Z.cJS({imports:[[p.ez,_.WG,c.ZJ,S]]}),L})()},9077:(X,N,o)=>{o.d(N,{Q:()=>U});var p=o(6123),_=o(7630),c=o(8929),t=o(4850),n=o(7625),d=o(5e3),T=o(9169),R=o(9808),y=o(6042),Z=o(2643),S=o(2683),D=o(404),L=o(5017),A=o(6949);function I(v,M){if(1&v){const C=d.EpF();d.ynx(0),d.TgZ(1,"button",2),d.NdJ("click",function(){return d.CHM(C),d.oxw().unsubscribe()}),d._UZ(2,"i",3),d.qZA(),d.BQk()}if(2&v){const C=d.oxw();d.xp6(1),d.Q6J("nzLoading",C.isSubmitting)}}function $(v,M){if(1&v){const C=d.EpF();d.TgZ(0,"button",4),d.NdJ("click",function(){return d.CHM(C),d.oxw().subscribe()}),d._UZ(1,"i",5),d.qZA()}if(2&v){const C=d.oxw();d.Q6J("nzLoading",C.isSubmitting)}}let U=(()=>{class v{constructor(C,E,J,B){this.isSubscribedGQL=C,this.unsubscribeMutation=E,this.subscribeMutation=J,this.networkErrorService=B,this.isSubmitting=!1,this.destroy$=new c.xQ,this.unsubscribeMutator=new p.U(B),this.subscribeMutator=new p.U(B)}ngOnInit(){if(void 0===this.viewer)throw new Error("Must pass in a viewer to the CvcEntitySubscriptionButtonComponent");if(void 0===this.typename)throw new Error("Must pass in a typename to the CvcEntitySubscriptionButtonComponent");if(void 0===this.subscribableId)throw new Error("Must pass in a subscribableId to the CvcEntitySubscriptionButtonComponent");this.subscribable={id:this.subscribableId,entityType:_.o71[this.typename]},this.queryRef=this.isSubscribedGQL.watch({subscribable:this.subscribable}),this.existingSubscription$=this.queryRef.valueChanges.pipe((0,t.U)(({data:E})=>E.subscriptionForEntity))}subscribe(){this.subscribable&&(this.isSubmitting=!0,this.subscribeMutator.mutate(this.subscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,n.R)(this.destroy$)).subscribe(E=>{var J;E&&(null===(J=this.queryRef)||void 0===J||J.refetch(),this.isSubmitting=!1)}))}unsubscribe(){this.subscribable&&(this.isSubmitting=!0,this.unsubscribeMutator.mutate(this.unsubscribeMutation,{input:{subscribables:[this.subscribable]}}).submitSuccess$.pipe((0,n.R)(this.destroy$)).subscribe(E=>{var J;E&&(null===(J=this.queryRef)||void 0===J||J.refetch(),this.isSubmitting=!1)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return v.\u0275fac=function(C){return new(C||v)(d.Y36(_.A4J),d.Y36(_.m$d),d.Y36(_.jMx),d.Y36(T.Y))},v.\u0275cmp=d.Xpm({type:v,selectors:[["cvc-entity-subscription-button"]],inputs:{viewer:"viewer",typename:"typename",subscribableId:"subscribableId"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noSub",""],["nz-button","","nz-tooltip","Unsubscribe","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","bell","nzTheme","fill"],["nz-button","","nz-tooltip","Subscribe","nzSize","small",3,"nzLoading","click"],["nz-icon","","nzType","bell","nzTheme","outline"]],template:function(C,E){if(1&C&&(d.YNc(0,I,3,1,"ng-container",0),d.ALo(1,"ngrxPush"),d.YNc(2,$,2,1,"ng-template",null,1,d.W1O)),2&C){const J=d.MAs(3);d.Q6J("ngIf",d.lcZ(1,2,E.existingSubscription$))("ngIfElse",J)}},directives:[R.O5,y.ix,Z.dQ,S.w,D.SY,L.Ls],pipes:[A.fM],styles:["[_nghost-%COMP%]{display:block}"]}),v})()},4609:(X,N,o)=>{o.d(N,{g:()=>T});var p=o(9808),_=o(6042),c=o(6949),t=o(5017),n=o(404),d=o(5e3);let T=(()=>{class R{}return R.\u0275fac=function(Z){return new(Z||R)},R.\u0275mod=d.oAB({type:R}),R.\u0275inj=d.cJS({imports:[[p.ez,_.sL,t.PV,n.cg,c.WG]]}),R})()},7701:(X,N,o)=>{o.d(N,{j:()=>an});var p=o(6654),_=o(9771),c=o(5e3),t=o(9808),n=o(325),d=o(8481),T=o(3610),R=o(4850),y=o(2198),Z=o(3240),S=o(7630),D=o(7484),L=o(5017),A=o(6550),I=o(3098),$=o(6949),U=o(160);function v(z,P){if(1&z&&(c._UZ(0,"i",7),c.ALo(1,"entityColor"),c._uU(2)),2&z){const h=c.oxw().ngIf;c.Q6J("nzTwotoneColor",c.lcZ(1,2,"VariantType")),c.xp6(2),c.hij(" ",h.name," ")}}function M(z,P){if(1&z&&(c.TgZ(0,"cvc-link-tag",9),c._uU(1),c.qZA()),2&z){const h=c.oxw(2).ngIf;c.Q6J("href",h.url),c.xp6(1),c.hij(" ",h.soid," ")}}function C(z,P){if(1&z&&c.YNc(0,M,2,2,"cvc-link-tag",8),2&z){const h=c.oxw().ngIf;c.Q6J("ngIf","N/A"!=h.soid)}}function E(z,P){if(1&z&&(c.ynx(0),c.TgZ(1,"nz-card",2),c.YNc(2,v,3,4,"ng-template",null,3,c.W1O),c.YNc(4,C,1,1,"ng-template",null,4,c.W1O),c.TgZ(6,"nz-descriptions",5)(7,"nz-descriptions-item",6),c._uU(8),c.qZA()()(),c.BQk()),2&z){const h=P.ngIf,V=c.MAs(3),q=c.MAs(5);c.xp6(1),c.Q6J("nzTitle",V)("nzExtra",q),c.xp6(5),c.Q6J("nzColumn",2),c.xp6(2),c.hij(" ",h.variantCount," ")}}let J=(()=>{class z{constructor(h){this.gql=h}ngOnInit(){if(null==this.variantTypeId)throw new Error("cvc-variant-type-popover requires valid variantTypeId input.");this.variantType$=this.gql.watch({variantTypeId:this.variantTypeId}).valueChanges.pipe((0,R.U)(({data:h})=>null==h?void 0:h.variantTypePopover),(0,y.h)(Z.ep))}}return z.\u0275fac=function(h){return new(h||z)(c.Y36(S.tw_))},z.\u0275cmp=c.Xpm({type:z,selectors:[["cvc-variant-type-popover"]],inputs:{variantTypeId:"variantTypeId"},decls:3,vars:3,consts:[["id","popover-content"],[4,"ngIf"],["nzBordered","false","id","card-content",3,"nzTitle","nzExtra"],["cardTitle",""],["linkout",""],["nzSize","small","nzBordered","true",3,"nzColumn"],["nzTitle","Variants","nzSpan","2"],["nz-icon","","nzTheme","twotone","nzType","civic-varianttype",3,"nzTwotoneColor"],["tooltip","View on SequenceOntology.org",3,"href",4,"ngIf"],["tooltip","View on SequenceOntology.org",3,"href"]],template:function(h,V){1&h&&(c.TgZ(0,"div",0),c.YNc(1,E,9,4,"ng-container",1),c.ALo(2,"ngrxPush"),c.qZA()),2&h&&(c.xp6(1),c.Q6J("ngIf",c.lcZ(2,1,V.variantType$)))},directives:[t.O5,D.bd,L.Ls,A.l,I.R7,I.uj],pipes:[$.fM,U.a],styles:["[_nghost-%COMP%]{display:block;margin:-8px -12px}[_nghost-%COMP%]     .ant-card-body{padding:0;margin-top:1px}[_nghost-%COMP%]     .ant-descriptions-view{border:none}[_nghost-%COMP%]     #entity-child-counts{border-top:1px solid #f0f0f0;padding:8px}[_nghost-%COMP%]     #entity-child-counts nz-space{width:100%}[_nghost-%COMP%]     #entity-child-counts nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     #entity-child-counts nz-space-item:last-child nz-tag{margin-right:0}.popover-text[_ngcontent-%COMP%]{width:100%;padding:8px;border-bottom:1px solid #f0f0f0}#popover-content[_ngcontent-%COMP%]{min-width:350px;max-width:500px;min-height:125px}"]}),z})();function B(z,P){}function W(z,P){if(1&z&&(c.ynx(0),c.TgZ(1,"a",5),c.YNc(2,B,0,0,"ng-template",6),c.qZA(),c.BQk()),2&z){const h=c.oxw(),V=c.MAs(2);c.xp6(1),c.Q6J("routerLink",h.variantType.link),c.xp6(1),c.Q6J("ngTemplateOutlet",V)}}function G(z,P){}function x(z,P){if(1&z&&c._UZ(0,"cvc-variant-type-popover",9),2&z){const h=c.oxw(2);c.Q6J("variantTypeId",h.variantType.id)}}function Q(z,P){if(1&z&&(c.TgZ(0,"nz-tag",7),c.YNc(1,G,0,0,"ng-template",6),c.qZA(),c.YNc(2,x,1,1,"ng-template",null,8,c.W1O)),2&z){const h=c.MAs(3),V=c.oxw(),q=c.MAs(8);c.Q6J("nzPopoverMouseEnterDelay",.5)("nzPopoverContent",h)("nzPopoverTrigger",V.enablePopover?"hover":null),c.xp6(1),c.Q6J("ngTemplateOutlet",q)}}function O(z,P){}function w(z,P){if(1&z&&c.YNc(0,O,0,0,"ng-template",6),2&z){c.oxw();const h=c.MAs(2);c.Q6J("ngTemplateOutlet",h)}}function K(z,P){}function nn(z,P){if(1&z&&(c.TgZ(0,"nz-tag"),c.YNc(1,K,0,0,"ng-template",6),c.qZA()),2&z){c.oxw();const h=c.MAs(8);c.xp6(1),c.Q6J("ngTemplateOutlet",h)}}function on(z,P){if(1&z&&(c._UZ(0,"i",10),c._uU(1)),2&z){const h=c.oxw();c.Q6J("nzTwotoneColor",h.iconColor),c.xp6(1),c.hij(" ",h.variantType.name,"\n")}}let an=(()=>{class z extends p.a{constructor(){super(),this.linked=!0,this.enablePopover=!0,this.iconColor=(0,_.f)("VariantType")}set variantType(h){if(!h)throw new Error("variant-type-tag variantType Input requires LinkableVariantType.");this._variantType=h}get variantType(){return this._variantType}idFunction(){return this.variantType.id}}return z.\u0275fac=function(h){return new(h||z)},z.\u0275cmp=c.Xpm({type:z,selectors:[["cvc-variant-type-tag"]],inputs:{variantType:"variantType",linked:"linked",enablePopover:"enablePopover"},features:[c.qOj],decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["tag",""],["unlinked",""],["noPopover",""],["tagContent",""],[3,"routerLink"],[3,"ngTemplateOutlet"],["nz-popover","","nzPopoverPlacement","right",3,"nzPopoverMouseEnterDelay","nzPopoverContent","nzPopoverTrigger"],["variantTypePopover",""],[3,"variantTypeId"],["nz-icon","","nzType","civic-varianttype","nzTheme","twotone",3,"nzTwotoneColor"]],template:function(h,V){if(1&h&&(c.YNc(0,W,3,2,"ng-container",0),c.YNc(1,Q,4,4,"ng-template",null,1,c.W1O),c.YNc(3,w,1,1,"ng-template",null,2,c.W1O),c.YNc(5,nn,2,1,"ng-template",null,3,c.W1O),c.YNc(7,on,2,2,"ng-template",null,4,c.W1O)),2&h){const q=c.MAs(4);c.Q6J("ngIf",V.linked)("ngIfElse",q)}},directives:[t.O5,n.yS,t.tP,d.j,T.lU,J,L.Ls],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),z})()},8645:(X,N,o)=>{o.d(N,{M:()=>L});var p=o(9808),_=o(325),c=o(8481),t=o(7484),n=o(4989),d=o(3098),T=o(6949),R=o(5017),y=o(6905),Z=o(5e3);let S=(()=>{class A{}return A.\u0275fac=function($){return new($||A)},A.\u0275mod=Z.oAB({type:A}),A.\u0275inj=Z.cJS({imports:[[p.ez,T.WG,R.PV,t.vh,d.q6,y.s,n.X]]}),A})();var D=o(3610);let L=(()=>{class A{}return A.\u0275fac=function($){return new($||A)},A.\u0275mod=Z.oAB({type:A}),A.\u0275inj=Z.cJS({imports:[[p.ez,_.Bz,R.PV,c.X,D.$6,S]]}),A})()},1243:(X,N,o)=>{o.d(N,{I:()=>_});var p=o(5e3);let _=(()=>{class c{transform(n){if(n){let T=n.toLowerCase().replace(/_/g," ").split(" ");for(var d=0;d<T.length;d++)T[d]=T[d].charAt(0).toUpperCase()+T[d].slice(1);return T.join(" ")}return""}}return c.\u0275fac=function(n){return new(n||c)},c.\u0275pipe=p.Yjl({name:"enumToTitle",type:c,pure:!0}),c})()}}]);