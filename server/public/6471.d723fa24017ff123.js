"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[6471],{8909:(I,O,t)=>{t.d(O,{m:()=>g});var d=t(9808),c=t(9401),u=t(8369),n=t(209),v=t(4867),l=t(7677),h=t(3309),s=t(7345),a=t(9476),E=t(8481),P=t(647),f=t(5e3);let g=(()=>{class p{}return p.\u0275fac=function(A){return new(A||p)},p.\u0275mod=f.oAB({type:p}),p.\u0275inj=f.cJS({imports:[[d.ez,E.X,P.PV,c.y,u.W,n.i,v.Q,l.G,h.U,s.W,a.L]]}),p})()},4271:(I,O,t)=>{t.d(O,{M:()=>y});var d=t(9808),c=t(6949),u=t(3868),n=t(7345),v=t(7484),l=t(4546),h=t(3762),s=t(8625),a=t(4182),E=t(1825),P=t(6042),f=t(4375),g=t(2359),p=t(404),D=t(9444),A=t(4509),C=t(7525),T=t(5e3);let W=(()=>{class _{}return _.\u0275fac=function(B){return new(B||_)},_.\u0275mod=T.oAB({type:_}),_.\u0275inj=T.cJS({imports:[[d.ez,a.u5,a.UX,c.WG,l.U5,P.sL,v.vh,g.L,p.cg,C.j,E.A,f.R,D.s,A.w]]}),_})();var V=t(9779),S=t(8144),J=t(1894),j=t(8481),Y=t(3618),F=t(6699),G=t(3580),X=t(8018),H=t(6286),U=t(4867),R=t(8645),L=t(685),$=t(3172),K=t(6114),x=t(5737),Z=t(647),N=t(3610),i=t(1047);let M=(()=>{class _{}return _.\u0275fac=function(B){return new(B||_)},_.\u0275mod=T.oAB({type:_}),_.\u0275inj=T.cJS({imports:[[d.ez,a.UX,c.WG,P.sL,l.U5,a.u5,g.L,v.vh,N.$6,Z.PV,p.cg,C.j,A.w,f.R,E.A]]}),_})();var o=t(7026),e=t(8909);let r=(()=>{class _{}return _.\u0275fac=function(B){return new(B||_)},_.\u0275mod=T.oAB({type:_}),_.\u0275inj=T.cJS({imports:[[d.ez,J.Jb,h.Ph,v.vh,S.zf,j.X,Y.ZJ,F.Rt,L.Xo,K.Wr,x.S,p.cg,h.Ph,N.$6,Z.PV,i.o7,a.u5,s.$L.forChild({formatter:{useClass:o.x,provide:s.KP}}),E.A,V.s,n.W,G.Q,X.e,H.y,U.Q,R.M,$.x,P.sL,g.L,c.WG,M,x.S,e.m]]}),_})();var m=t(1150);let y=(()=>{class _{}return _.\u0275fac=function(B){return new(B||_)},_.\u0275mod=T.oAB({type:_}),_.\u0275inj=T.cJS({imports:[[d.ez,a.u5,c.WG,s.$L.forChild({formatter:{useClass:o.x,provide:s.KP}}),P.sL,l.U5,u.aF,P.sL,n.W,h.Ph,v.vh,W,r,L.Xo,m.N,F.Rt,S.zf]]}),_})()},4682:(I,O,t)=>{t.d(O,{m:()=>h});var d=t(9808),c=t(404),u=t(3618),n=t(4401),v=t(647),l=t(5e3);let h=(()=>{class s{}return s.\u0275fac=function(E){return new(E||s)},s.\u0275mod=l.oAB({type:s}),s.\u0275inj=l.cJS({imports:[[d.ez,v.PV,n.mS,c.cg,u.ZJ]]}),s})()},9401:(I,O,t)=>{t.d(O,{y:()=>h});var d=t(9808),c=t(8481),u=t(647),n=t(325),v=t(9444),l=t(5e3);let h=(()=>{class s{}return s.\u0275fac=function(E){return new(E||s)},s.\u0275mod=l.oAB({type:s}),s.\u0275inj=l.cJS({imports:[[d.ez,n.Bz,v.s,c.X,u.PV]]}),s})()},1150:(I,O,t)=>{t.d(O,{N:()=>h});var d=t(9808),c=t(7484),u=t(3762),n=t(647),v=t(6042),l=t(5e3);let h=(()=>{class s{}return s.\u0275fac=function(E){return new(E||s)},s.\u0275mod=l.oAB({type:s}),s.\u0275inj=l.cJS({imports:[[d.ez,c.vh,u.Ph,n.PV,v.sL]]}),s})()},3172:(I,O,t)=>{t.d(O,{x:()=>v});var d=t(9808),c=t(8481),u=t(647),n=t(5e3);let v=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=n.oAB({type:l}),l.\u0275inj=n.cJS({imports:[[d.ez,c.X,u.PV]]}),l})()},6081:(I,O,t)=>{t.d(O,{J:()=>f});var d=t(9808),c=t(3630),u=t(3098),n=t(7484),v=t(6949),l=t(897),h=t(9476),s=t(5473),a=t(5737),E=t(1894),P=t(5e3);let f=(()=>{class g{}return g.\u0275fac=function(D){return new(D||g)},g.\u0275mod=P.oAB({type:g}),g.\u0275inj=P.cJS({imports:[[d.ez,v.WG,E.Jb,n.vh,u.q6,a.S,c.X,l.$,h.L,s.H]]}),g})()},7345:(I,O,t)=>{t.d(O,{W:()=>s});var d=t(9808),c=t(325),u=t(3610),n=t(8481),v=t(647),l=t(6081),h=t(5e3);let s=(()=>{class a{}return a.\u0275fac=function(P){return new(P||a)},a.\u0275mod=h.oAB({type:a}),a.\u0275inj=h.cJS({imports:[[d.ez,c.Bz,l.J,u.$6,n.X,v.PV]]}),a})()},8645:(I,O,t)=>{t.d(O,{M:()=>f});var d=t(9808),c=t(325),u=t(8481),n=t(7484),v=t(3630),l=t(3098),h=t(6949),s=t(647),a=t(5e3);let E=(()=>{class g{}return g.\u0275fac=function(D){return new(D||g)},g.\u0275mod=a.oAB({type:g}),g.\u0275inj=a.cJS({imports:[[d.ez,h.WG,s.PV,n.vh,l.q6,v.X]]}),g})();var P=t(3610);let f=(()=>{class g{}return g.\u0275fac=function(D){return new(D||g)},g.\u0275mod=a.oAB({type:g}),g.\u0275inj=a.cJS({imports:[[d.ez,c.Bz,s.PV,u.X,P.$6,E]]}),g})()},4509:(I,O,t)=>{t.d(O,{w:()=>A});var d=t(9808),c=t(4182),u=t(7484),n=t(4546),v=t(7008),l=t(1825),h=t(4375),s=t(6042),a=t(4623),E=t(868),P=t(6949),f=t(8909),g=t(7525),p=t(4921),D=t(5e3);let A=(()=>{class C{}return C.\u0275fac=function(W){return new(W||C)},C.\u0275mod=D.oAB({type:C}),C.\u0275inj=D.cJS({imports:[[d.ez,c.UX,P.WG,s.sL,u.vh,E.we,n.U5,g.j,p.Gl,c.u5,v.B,l.A,h.R,f.m,a.K]]}),C})()},4921:(I,O,t)=>{t.d(O,{YW:()=>x,Gl:()=>N,O3:()=>U,jO:()=>K});var d=t(226),c=t(2845),u=t(9808),n=t(5e3),v=t(4182),l=t(647),h=t(8929),s=t(2916),a=t(6787),E=t(3753),P=t(655),f=t(1159),g=t(7429),p=t(1059),D=t(7545),A=t(6950),C=t(1721);const T=["items"];function W(i,M){1&i&&n.GkF(0)}const V=function(i){return{$implicit:i}};function S(i,M){if(1&i&&(n.ynx(0),n.YNc(1,W,1,0,"ng-container",8),n.BQk()),2&i){const o=n.oxw().$implicit,e=n.oxw(2);n.xp6(1),n.Q6J("ngTemplateOutlet",e.suggestionTemplate)("ngTemplateOutletContext",n.VKq(2,V,o))}}function J(i,M){if(1&i&&n._uU(0),2&i){const o=n.oxw().$implicit,e=n.oxw(2);n.Oqu(e.nzValueWith(o))}}function j(i,M){if(1&i){const o=n.EpF();n.TgZ(0,"li",4,5),n.NdJ("click",function(){const m=n.CHM(o).$implicit;return n.oxw(2).selectSuggestion(m)}),n.YNc(2,S,2,4,"ng-container",6),n.YNc(3,J,1,1,"ng-template",null,7,n.W1O),n.qZA()}if(2&i){const o=M.index,e=n.MAs(4),r=n.oxw(2);n.ekj("focus",o===r.activeIndex),n.xp6(2),n.Q6J("ngIf",r.suggestionTemplate)("ngIfElse",e)}}function Y(i,M){1&i&&(n.TgZ(0,"span"),n._UZ(1,"i",11),n.qZA())}function F(i,M){if(1&i&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&i){const o=n.oxw(3);n.xp6(1),n.Oqu(o.nzNotFoundContent)}}function G(i,M){if(1&i&&(n.TgZ(0,"li",9),n.YNc(1,Y,2,0,"span",10),n.YNc(2,F,2,1,"span",10),n.qZA()),2&i){const o=n.oxw(2);n.xp6(1),n.Q6J("ngIf",o.nzLoading),n.xp6(1),n.Q6J("ngIf",!o.nzLoading)}}function X(i,M){if(1&i&&(n.TgZ(0,"ul",1),n.YNc(1,j,5,4,"li",2),n.YNc(2,G,3,2,"li",3),n.qZA()),2&i){const o=n.oxw();n.xp6(1),n.Q6J("ngForOf",o.filteredSuggestions),n.xp6(1),n.Q6J("ngIf",0===o.filteredSuggestions.length)}}const H=["*"];let U=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275dir=n.lG2({type:i,selectors:[["","nzMentionSuggestion",""]],exportAs:["nzMentionSuggestion"]}),i})();let L=(()=>{class i{constructor(){this.triggerChange$=new h.xQ}triggerChanged(){return this.triggerChange$.asObservable()}registerTrigger(o){this.trigger!==o&&(this.trigger=o,this.triggerChange$.next(o))}ngOnDestroy(){this.triggerChange$.complete()}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=n.Yz7({token:i,factory:i.\u0275fac}),i})();const $={provide:v.JU,useExisting:(0,n.Gpc)(()=>K),multi:!0};let K=(()=>{class i{constructor(o,e){this.el=o,this.nzMentionService=e,this.onChange=()=>{},this.onTouched=()=>{},this.onFocusin=new n.vpe,this.onBlur=new n.vpe,this.onInput=new n.vpe,this.onKeydown=new n.vpe,this.onClick=new n.vpe}completeEvents(){this.onFocusin.complete(),this.onBlur.complete(),this.onInput.complete(),this.onKeydown.complete(),this.onClick.complete()}focus(o){this.el.nativeElement.focus(),this.el.nativeElement.setSelectionRange(o,o)}insertMention(o){const e=this.el.nativeElement.value,r=`${o.mention} `,m=[e.slice(0,o.startPos+1),r,e.slice(o.endPos,e.length)].join("");this.el.nativeElement.value=m,this.focus(o.startPos+r.length+1),this.onChange(m),this.value=m}writeValue(o){this.value=o,this.el.nativeElement.value="string"==typeof o?o:""}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}ngAfterViewInit(){this.nzMentionService.registerTrigger(this)}ngOnDestroy(){this.completeEvents()}}return i.\u0275fac=function(o){return new(o||i)(n.Y36(n.SBq),n.Y36(L))},i.\u0275dir=n.lG2({type:i,selectors:[["input","nzMentionTrigger",""],["textarea","nzMentionTrigger",""]],hostAttrs:["autocomplete","off"],hostBindings:function(o,e){1&o&&n.NdJ("focusin",function(){return e.onFocusin.emit()})("blur",function(){return e.onBlur.emit()})("input",function(m){return e.onInput.emit(m)})("keydown",function(m){return e.onKeydown.emit(m)})("click",function(m){return e.onClick.emit(m)})},exportAs:["nzMentionTrigger"],features:[n._Bn([$])]}),i})(),x=(()=>{class i{constructor(o,e,r,m,y,_){this.ngZone=o,this.ngDocument=e,this.cdr=r,this.overlay=m,this.viewContainerRef=y,this.nzMentionService=_,this.nzValueWith=z=>z,this.nzPrefix="@",this.nzLoading=!1,this.nzNotFoundContent="\u65e0\u5339\u914d\u7ed3\u679c\uff0c\u8f7b\u6572\u7a7a\u683c\u5b8c\u6210\u8f93\u5165",this.nzPlacement="bottom",this.nzSuggestions=[],this.nzOnSelect=new n.vpe,this.nzOnSearchChange=new n.vpe,this.isOpen=!1,this.filteredSuggestions=[],this.suggestionTemplate=null,this.activeIndex=-1,this.previousValue=null,this.cursorMention=null,this.overlayRef=null}set suggestionChild(o){o&&(this.suggestionTemplate=o)}get triggerNativeElement(){return this.trigger.el.nativeElement}get focusItemElement(){var o;const e=null===(o=this.items)||void 0===o?void 0:o.toArray();return e&&e[this.activeIndex]?e[this.activeIndex].nativeElement:null}ngOnInit(){this.nzMentionService.triggerChanged().subscribe(o=>{this.trigger=o,this.bindTriggerEvents(),this.closeDropdown(),this.overlayRef=null})}ngOnChanges(o){o.hasOwnProperty("nzSuggestions")&&this.isOpen&&(this.previousValue=null,this.activeIndex=-1,this.resetDropdown(!1))}ngAfterViewInit(){this.items.changes.pipe((0,p.O)(this.items),(0,D.w)(()=>{const o=this.items.toArray();return new s.y(e=>this.ngZone.runOutsideAngular(()=>(0,a.T)(...o.map(r=>(0,E.R)(r.nativeElement,"mousedown"))).subscribe(e)))})).subscribe(o=>{o.preventDefault()})}ngOnDestroy(){this.closeDropdown()}closeDropdown(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.overlayRef.detach(),this.overlayOutsideClickSubscription.unsubscribe(),this.isOpen=!1,this.cdr.markForCheck())}openDropdown(){this.attachOverlay(),this.isOpen=!0,this.cdr.markForCheck()}getMentions(){return this.trigger?(0,C.qR)(this.trigger.value,this.nzPrefix):[]}selectSuggestion(o){const e=this.nzValueWith(o);this.trigger.insertMention({mention:e,startPos:this.cursorMentionStart,endPos:this.cursorMentionEnd}),this.nzOnSelect.emit(o),this.closeDropdown(),this.activeIndex=-1}handleInput(o){const e=o.target;this.trigger.onChange(e.value),this.trigger.value=e.value,this.resetDropdown()}handleKeydown(o){const e=o.keyCode;if(this.isOpen&&e===f.K5&&-1!==this.activeIndex&&this.filteredSuggestions.length)this.selectSuggestion(this.filteredSuggestions[this.activeIndex]),o.preventDefault();else if(e===f.oh||e===f.SV)this.resetDropdown(),o.stopPropagation();else{if(this.isOpen&&(e===f.Mf||e===f.hY))return void this.closeDropdown();this.isOpen&&e===f.LH&&(this.setPreviousItemActive(),o.preventDefault(),o.stopPropagation()),this.isOpen&&e===f.JH&&(this.setNextItemActive(),o.preventDefault(),o.stopPropagation())}}handleClick(){this.resetDropdown()}bindTriggerEvents(){this.trigger.onInput.subscribe(o=>this.handleInput(o)),this.trigger.onKeydown.subscribe(o=>this.handleKeydown(o)),this.trigger.onClick.subscribe(()=>this.handleClick())}suggestionsFilter(o,e){const r=o.substring(1);if(this.previousValue===o&&o!==this.cursorMention[0])return;this.previousValue=o,e&&this.nzOnSearchChange.emit({value:this.cursorMention.substring(1),prefix:this.cursorMention[0]});const m=r.toLowerCase();this.filteredSuggestions=this.nzSuggestions.filter(y=>this.nzValueWith(y).toLowerCase().includes(m))}resetDropdown(o=!0){if(this.resetCursorMention(),"string"!=typeof this.cursorMention||!this.canOpen())return void this.closeDropdown();this.suggestionsFilter(this.cursorMention,o);const e=this.filteredSuggestions.indexOf(this.cursorMention.substring(1));this.activeIndex=e>=0?e:0,this.openDropdown()}setNextItemActive(){this.activeIndex=this.activeIndex+1<=this.filteredSuggestions.length-1?this.activeIndex+1:0,this.cdr.markForCheck(),this.scrollToFocusItem()}setPreviousItemActive(){this.activeIndex=this.activeIndex-1<0?this.filteredSuggestions.length-1:this.activeIndex-1,this.cdr.markForCheck(),this.scrollToFocusItem()}scrollToFocusItem(){this.focusItemElement&&this.focusItemElement.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}canOpen(){const o=this.triggerNativeElement;return!o.readOnly&&!o.disabled}resetCursorMention(){const o=this.triggerNativeElement.value.replace(/[\r\n]/g," ")||"",e=this.triggerNativeElement.selectionStart,r="string"==typeof this.nzPrefix?[this.nzPrefix]:this.nzPrefix;let m=r.length;for(;m>=0;){const y=o.lastIndexOf(r[m],e),_=o.indexOf(" ",e)>-1?o.indexOf(" ",e):o.length,z=o.substring(y,_);if(!(y>0&&" "!==o[y-1]||y<0||z.includes(r[m],1)||z.includes(" ")))return this.cursorMention=z,this.cursorMentionStart=y,void(this.cursorMentionEnd=_);this.cursorMention=null,this.cursorMentionStart=-1,this.cursorMentionEnd=-1,m--}}updatePositions(){const o=(0,C.Ly)(this.triggerNativeElement,this.cursorMentionStart),e=o.top-this.triggerNativeElement.getBoundingClientRect().height-this.triggerNativeElement.scrollTop+("bottom"===this.nzPlacement?o.height-6:-6);this.positionStrategy.withDefaultOffsetX(o.left-this.triggerNativeElement.scrollLeft).withDefaultOffsetY(e),"bottom"===this.nzPlacement&&this.positionStrategy.withPositions([...A.fG]),"top"===this.nzPlacement&&this.positionStrategy.withPositions([...A.A7]),this.positionStrategy.apply()}subscribeOverlayOutsideClick(){return(0,a.T)(this.overlayRef.outsidePointerEvents(),(0,E.R)(this.ngDocument,"touchend")).subscribe(o=>{var e;const r=o.target;this.isOpen&&r!==this.trigger.el.nativeElement&&!(null===(e=this.overlayRef)||void 0===e?void 0:e.overlayElement.contains(r))&&this.closeDropdown()})}attachOverlay(){this.overlayRef||(this.portal=new g.UE(this.suggestionsTemp,this.viewContainerRef),this.overlayRef=this.overlay.create(this.getOverlayConfig())),this.overlayRef&&!this.overlayRef.hasAttached()&&(this.overlayRef.attach(this.portal),this.overlayOutsideClickSubscription=this.subscribeOverlayOutsideClick()),this.updatePositions()}getOverlayConfig(){return new c.X_({positionStrategy:this.getOverlayPosition(),scrollStrategy:this.overlay.scrollStrategies.reposition(),disposeOnNavigation:!0})}getOverlayPosition(){const o=[new c.tR({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new c.tR({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"})];return this.positionStrategy=this.overlay.position().flexibleConnectedTo(this.trigger.el).withPositions(o).withFlexibleDimensions(!1).withPush(!1),this.positionStrategy}}return i.\u0275fac=function(o){return new(o||i)(n.Y36(n.R0b),n.Y36(u.K0,8),n.Y36(n.sBO),n.Y36(c.aV),n.Y36(n.s_b),n.Y36(L))},i.\u0275cmp=n.Xpm({type:i,selectors:[["nz-mention"]],contentQueries:function(o,e,r){if(1&o&&n.Suo(r,U,5,n.Rgc),2&o){let m;n.iGM(m=n.CRH())&&(e.suggestionChild=m.first)}},viewQuery:function(o,e){if(1&o&&(n.Gf(n.Rgc,5),n.Gf(T,5,n.SBq)),2&o){let r;n.iGM(r=n.CRH())&&(e.suggestionsTemp=r.first),n.iGM(r=n.CRH())&&(e.items=r)}},inputs:{nzValueWith:"nzValueWith",nzPrefix:"nzPrefix",nzLoading:"nzLoading",nzNotFoundContent:"nzNotFoundContent",nzPlacement:"nzPlacement",nzSuggestions:"nzSuggestions"},outputs:{nzOnSelect:"nzOnSelect",nzOnSearchChange:"nzOnSearchChange"},exportAs:["nzMention"],features:[n._Bn([L]),n.TTD],ngContentSelectors:H,decls:3,vars:0,consts:[["suggestions",""],[1,"ant-mention-dropdown"],["class","ant-mention-dropdown-item",3,"focus","click",4,"ngFor","ngForOf"],["class","ant-mention-dropdown-notfound ant-mention-dropdown-item",4,"ngIf"],[1,"ant-mention-dropdown-item",3,"click"],["items",""],[4,"ngIf","ngIfElse"],["defaultSuggestion",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-mention-dropdown-notfound","ant-mention-dropdown-item"],[4,"ngIf"],["nz-icon","","nzType","loading"]],template:function(o,e){1&o&&(n.F$t(),n.Hsn(0),n.YNc(1,X,3,2,"ng-template",null,0,n.W1O))},directives:[u.sg,u.O5,u.tP,l.Ls],encapsulation:2,changeDetection:0}),(0,P.gn)([(0,C.yF)()],i.prototype,"nzLoading",void 0),i})(),N=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[d.vT,u.ez,v.u5,c.U8,l.PV]]}),i})()}}]);