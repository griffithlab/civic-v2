"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[3407],{3180:(b,f,e)=>{e.d(f,{B:()=>K});var u,E=e(655),x=e(4632),d=e(313),c=e(1791),T=e(5619),h=e(8645),C=e(5676),M=e(3997),O=e(812),D=e(836),g=e(2181),m=e(7398),z=e(3620),A=e(2460),s=e(4223),t=e(9212),p=e(6814),I=e(855),v=e(2962),U=e(551),r=e(3740),Z=e(5695),L=e(6109),R=e(6753),W=e(4764),y=e(8516),B=e(3489),S=e(1835),N=e(9857),$=e(4997),J=e(4527),Q=e(2606),w=e(8091),j=e(1233);function H(l,o){}function F(l,o){if(1&l&&(t.ynx(0),t.TgZ(1,"nz-card",5),t.YNc(2,H,0,0,"ng-template",6),t.qZA(),t.BQk()),2&l){t.oxw();const n=t.MAs(6),_=t.MAs(8),a=t.MAs(4);t.xp6(),t.Q6J("nzTitle",n)("nzExtra",_),t.xp6(),t.Q6J("ngTemplateOutlet",a)}}function G(l,o){}const Y=l=>({height:l});function V(l,o){if(1&l&&(t.TgZ(0,"div",7)(1,"nz-card",8),t.YNc(2,G,0,0,"ng-template",6),t.qZA()()),2&l){const n=t.oxw(),_=t.MAs(6),a=t.MAs(8),i=t.MAs(4);t.Q6J("ngStyle",t.VKq(4,Y,n.cvcHeight)),t.xp6(),t.Q6J("nzTitle",_)("nzExtra",a),t.xp6(),t.Q6J("ngTemplateOutlet",i)}}function X(l,o){if(1&l&&(t.TgZ(0,"tr",30)(1,"td",31),t._UZ(2,"cvc-molecular-profile-tag",32),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"cvc-plain-tag-overflow",33),t.ALo(5,"pluck"),t.qZA(),t.TgZ(6,"td"),t._UZ(7,"cvc-tag-overflow",34),t.qZA(),t.TgZ(8,"td"),t._UZ(9,"cvc-tag-overflow",35),t.qZA(),t.TgZ(10,"td"),t._UZ(11,"cvc-tag-overflow",36),t.qZA(),t.TgZ(12,"td",37),t._uU(13),t.ALo(14,"number"),t.qZA(),t.TgZ(15,"td",37),t._uU(16),t.ALo(17,"number"),t.qZA(),t.TgZ(18,"td",37),t._uU(19),t.ALo(20,"number"),t.qZA(),t.TgZ(21,"td",37),t._uU(22),t.ALo(23,"number"),t.qZA()()),2&l){const n=o.$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("molecularProfile",n)("truncateLongName",!0),t.xp6(2),t.Q6J("maxDisplayCount",1)("tags",t.xi3(5,19,n.aliases,"name"))("maxDisplayCount",1)("matchingText",_.aliasInput),t.xp6(3),t.Q6J("tags",n.variants)("maxDisplayCount",2)("matchingText",_.variantNameInput),t.xp6(2),t.Q6J("tags",n.diseases)("maxDisplayCount",1)("matchingText",_.diseaseNameInput),t.xp6(2),t.Q6J("tags",n.therapies)("maxDisplayCount",1)("matchingText",_.therapyNameInput),t.xp6(2),t.hij(" ",t.lcZ(14,22,n.molecularProfileScore)," "),t.xp6(3),t.hij(" ",t.lcZ(17,24,n.evidenceItemCount)," "),t.xp6(3),t.hij(" ",t.lcZ(20,26,n.assertionCount)," "),t.xp6(3),t.hij(" ",t.lcZ(23,28,n.variantCount)," ")}}const q=()=>[],k=()=>({x:"680px",y:"800px"}),P=()=>["descend","ascend",null];function tt(l,o){if(1&l){const n=t.EpF();t.TgZ(0,"nz-table",9,10),t.NdJ("cvcTableScrollOnScroll",function(a){t.CHM(n);const i=t.oxw();return t.KtG(i.scrollEvent$.next(a))}),t.ALo(2,"ngrxPush"),t.ALo(3,"ngrxPush"),t.ALo(4,"ngrxPush"),t.ALo(5,"ngrxPush"),t.TgZ(6,"thead",11),t.NdJ("nzSortOrderChange",function(a){t.CHM(n);const i=t.oxw();return t.KtG(i.sortChange$.next(a))}),t.TgZ(7,"tr",12)(8,"th",13),t._uU(9," Name "),t.qZA(),t.TgZ(10,"th",14),t._uU(11,"Aliases"),t.qZA(),t.TgZ(12,"th",15),t._uU(13,"Variants"),t.qZA(),t.TgZ(14,"th",16),t._uU(15,"Diseases"),t.qZA(),t.TgZ(16,"th",17),t._uU(17,"Therapies"),t.qZA(),t.TgZ(18,"th",18),t._UZ(19,"i",19),t._uU(20," Score "),t.qZA(),t.TgZ(21,"th",20),t._UZ(22,"i",21),t._uU(23," Count "),t.qZA(),t.TgZ(24,"th",22),t._UZ(25,"i",23),t._uU(26," Count "),t.qZA(),t.TgZ(27,"th",24),t._UZ(28,"i",25),t._uU(29," Count "),t.qZA()(),t.TgZ(30,"tr",26)(31,"th",13)(32,"cvc-clearable-input-filter",27),t.NdJ("inputModelChange",function(a){t.CHM(n);const i=t.oxw();return t.KtG(i.mpNameInput=a)})("inputModelChange",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.filterChange$.next())}),t.qZA()(),t.TgZ(33,"th",14)(34,"cvc-clearable-input-filter",27),t.NdJ("inputModelChange",function(a){t.CHM(n);const i=t.oxw();return t.KtG(i.aliasInput=a)})("inputModelChange",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.filterChange$.next())}),t.qZA()(),t.TgZ(35,"th",15)(36,"cvc-clearable-input-filter",27),t.NdJ("inputModelChange",function(a){t.CHM(n);const i=t.oxw();return t.KtG(i.variantNameInput=a)})("inputModelChange",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.filterChange$.next())}),t.qZA()(),t.TgZ(37,"th",16)(38,"cvc-clearable-input-filter",27),t.NdJ("inputModelChange",function(a){t.CHM(n);const i=t.oxw();return t.KtG(i.diseaseNameInput=a)})("inputModelChange",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.filterChange$.next())}),t.qZA()(),t.TgZ(39,"th",17)(40,"cvc-clearable-input-filter",27),t.NdJ("inputModelChange",function(a){t.CHM(n);const i=t.oxw();return t.KtG(i.therapyNameInput=a)})("inputModelChange",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.filterChange$.next())}),t.qZA()(),t._UZ(41,"th",28)(42,"th",28)(43,"th",28)(44,"th",28),t.qZA()(),t.TgZ(45,"tbody"),t.YNc(46,X,24,30,"ng-template",29),t.qZA()()}if(2&l){const n=t.oxw();t.Q6J("nzData",t.lcZ(2,28,n.row$)||t.DdM(36,q))("nzLoading",t.lcZ(3,30,n.initialLoading$))("cvcAutoHeightTable",25)("nzVirtualItemSize",29)("cvcTableScrollQueryRef",n.queryRef)("cvcTableScrollPageInfo",t.lcZ(4,32,n.pageInfo$))("cvcTableScrollToIndex",t.lcZ(5,34,n.scrollIndex$))("nzVirtualForTrackBy",n.trackByIndex)("nzScroll",t.DdM(37,k))("nzFrontPagination",!1)("nzShowPagination",!1),t.xp6(18),t.Q6J("nzSortFn",!0)("nzSortDirections",t.DdM(38,P))("nzColumnKey",n.sortColumns.MolecularProfileScore),t.xp6(3),t.Q6J("nzColumnKey",n.sortColumns.EvidenceItemCount)("nzSortFn",!0)("nzSortDirections",t.DdM(39,P)),t.xp6(3),t.Q6J("nzColumnKey",n.sortColumns.AssertionCount)("nzSortFn",!0)("nzSortDirections",t.DdM(40,P)),t.xp6(3),t.Q6J("nzColumnKey",n.sortColumns.VariantCount)("nzSortFn",!0)("nzSortDirections",t.DdM(41,P)),t.xp6(5),t.Q6J("inputModel",n.mpNameInput),t.xp6(2),t.Q6J("inputModel",n.aliasInput),t.xp6(2),t.Q6J("inputModel",n.variantNameInput),t.xp6(2),t.Q6J("inputModel",n.diseaseNameInput),t.xp6(2),t.Q6J("inputModel",n.therapyNameInput)}}function nt(l,o){}function et(l,o){if(1&l&&(t.ynx(0),t.YNc(1,nt,0,0,"ng-template",6),t.BQk()),2&l){const n=t.oxw(2);t.xp6(),t.Q6J("ngTemplateOutlet",n.cvcTitleTemplate)}}function ot(l,o){if(1&l&&(t.ynx(0),t._uU(1),t.BQk()),2&l){const n=t.oxw(2);t.xp6(),t.hij(" ",n.cvcTitle," ")}}function lt(l,o){if(1&l&&(t.YNc(0,et,2,1,"ng-container",38)(1,ot,2,1,"ng-container",38),t.TgZ(2,"span",39),t._UZ(3,"cvc-table-counts",40),t.qZA()),2&l){const n=t.oxw();t.Q6J("ngIf",n.cvcTitleTemplate),t.xp6(),t.Q6J("ngIf",n.cvcTitle),t.xp6(2),t.Q6J("cvcTableCountsConnection",n.connection$)}}function at(l,o){1&l&&(t.TgZ(0,"nz-tag",43),t._UZ(1,"i",44),t.TgZ(2,"span"),t._uU(3,"Loading\u2026"),t.qZA()())}function _t(l,o){if(1&l&&(t.YNc(0,at,4,0,"nz-tag",41),t.ALo(1,"ngrxPush"),t._UZ(2,"cvc-no-more-rows",42),t.ALo(3,"ngrxPush")),2&l){const n=t.oxw();t.Q6J("ngIf",t.lcZ(1,2,n.moreLoading$)),t.xp6(2),t.Q6J("cvcShowTag",t.lcZ(3,4,n.noMoreRows$))}}let K=((u=class{set initialUserFilters(o){o&&Object.assign(this,o)}constructor(o,n){this.gql=o,this.cdr=n,this.initialPageSize=35,this.isScrolling=!1,this.sortColumns=d.FNv,this.noMoreRows$=new T.X(!1),this.scrollEvent$=new T.X("stop"),this.sortChange$=new h.x,this.filterChange$=new h.x,this.scrollIndex$=new h.x}ngOnInit(){this.initialQueryArgs={first:this.initialPageSize,variantId:this.variantId},this.queryRef=this.gql.watch(this.initialQueryArgs),this.result$=this.queryRef.valueChanges,this.initialLoading$=this.result$.pipe((0,s.j)("loading"),(0,M.x)(),(0,O.o)(o=>!1!==o,!0)),this.moreLoading$=this.result$.pipe((0,s.j)("loading"),(0,M.x)(),(0,D.T)(2)),this.connection$=this.result$.pipe((0,s.j)("data","browseMolecularProfiles"),(0,g.h)(C.ep)),this.row$=this.connection$.pipe((0,s.j)("edges"),(0,g.h)(C.ep),(0,m.U)(o=>o.map(n=>n.node))),this.pageInfo$=this.connection$.pipe((0,s.j)("pageInfo"),(0,g.h)(C.ep)),this.sortChange$.pipe((0,c.t)(this)).subscribe(o=>{this.queryRef.refetch({sortBy:(0,x._)(o)})}),this.filterChange$.pipe((0,z.b)(500),(0,c.t)(this)).subscribe(()=>{this.refresh()}),this.scrollEvent$.pipe((0,m.U)(o=>"stop"!==o),(0,M.x)(),(0,c.t)(this)).subscribe(o=>{this.isScrolling=o,this.cdr.detectChanges()}),this.scrollEvent$.pipe((0,g.h)(o=>"bottom"===o),(0,A.M)(this.pageInfo$),(0,m.U)(([o,n])=>n),(0,c.t)(this)).subscribe(o=>{o.hasNextPage||(this.noMoreRows$.next(!0),this.cdr.detectChanges(),setInterval(()=>this.noMoreRows$.next(!1)))})}refresh(){this.queryRef.refetch({molecularProfileName:this.mpNameInput,diseaseName:this.diseaseNameInput,therapyName:this.therapyNameInput,variantName:this.variantNameInput?this.variantNameInput:void 0,molecularProfileAlias:this.aliasInput?this.aliasInput:void 0}).then(()=>this.scrollIndex$.next(0)),this.cdr.detectChanges()}trackByIndex(o,n){return n?.id}}).\u0275fac=function(o){return new(o||u)(t.Y36(d.q9q),t.Y36(t.sBO))},u.\u0275cmp=t.Xpm({type:u,selectors:[["cvc-molecular-profiles-table"]],inputs:{cvcHeight:"cvcHeight",cvcTitleTemplate:"cvcTitleTemplate",cvcTitle:"cvcTitle",initialPageSize:"initialPageSize",variantId:"variantId",initialUserFilters:"initialUserFilters"},decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["setHeightCard",""],["table",""],["titleTemplate",""],["extraTemplate",""],["nzSize","small","cvcAutoHeightCard","","cvcAutoHeightTarget","viewport",3,"nzTitle","nzExtra"],[3,"ngTemplateOutlet"],[1,"card-container",3,"ngStyle"],["cvcAutoHeightCard","","nzSize","small",3,"nzTitle","nzExtra"],["nzSize","small","cvcTableScroll","",3,"nzData","nzLoading","cvcAutoHeightTable","nzVirtualItemSize","cvcTableScrollQueryRef","cvcTableScrollPageInfo","cvcTableScrollToIndex","nzVirtualForTrackBy","nzScroll","nzFrontPagination","nzShowPagination","cvcTableScrollOnScroll"],["virtualTable",""],[3,"nzSortOrderChange"],[1,"col-header-row"],["nzWidth","200px","nzLeft",""],["nzWidth","110px"],["nzWidth","350px"],["nzWidth","250px"],["nzWidth","180px"],["nzWidth","75px","nzRight","","nzAlign","right","nz-tooltip","","nzTooltipTitle","Molecular Profile Score",3,"nzSortFn","nzSortDirections","nzColumnKey"],["nz-icon","","nzType","civic-molecularprofile"],["nzWidth","75px","nzRight","","nzAlign","right","nz-tooltip","","nzTooltipTitle","Evidence Count",3,"nzColumnKey","nzSortFn","nzSortDirections"],["nz-icon","","nzType","civic-evidence"],["nzWidth","75px","nzRight","","nzAlign","right","nz-tooltip","","nzTooltipTitle","Assertion Count",3,"nzColumnKey","nzSortFn","nzSortDirections"],["nz-icon","","nzType","civic-assertion"],["nzWidth","75px","nzRight","","nzAlign","right","nz-tooltip","","nzTooltipTitle","Variant Count",3,"nzColumnKey","nzSortFn","nzSortDirections"],["nz-icon","","nzType","civic-variant"],[1,"filter-row"],[3,"inputModel","inputModelChange"],["nzWidth","75px","nzRight",""],["nz-virtual-scroll",""],[1,"data-row"],["nzLeft",""],[3,"molecularProfile","truncateLongName"],[3,"maxDisplayCount","tags","matchingText"],["tagType","variant-feature",3,"tags","maxDisplayCount","matchingText"],["tagType","disease",3,"tags","maxDisplayCount","matchingText"],["tagType","therapy",3,"tags","maxDisplayCount","matchingText"],["nzRight","","nzAlign","right"],[4,"ngIf"],[1,"table-info"],[3,"cvcTableCountsConnection"],["nzColor","processing",4,"ngIf"],[3,"cvcShowTag"],["nzColor","processing"],["nz-icon","","nzType","sync","nzSpin",""]],template:function(o,n){if(1&o&&t.YNc(0,F,3,3,"ng-container",0)(1,V,3,6,"ng-template",null,1,t.W1O)(3,tt,47,42,"ng-template",null,2,t.W1O)(5,lt,4,3,"ng-template",null,3,t.W1O)(7,_t,4,6,"ng-template",null,4,t.W1O),2&o){const _=t.MAs(2);t.Q6J("ngIf",!n.cvcHeight)("ngIfElse",_)}},dependencies:[p.O5,p.tP,p.PC,I.w,v.bd,U.Ls,r.N8,r.qD,r.Uo,r._C,r.Om,r.p0,r.$Z,r.zu,r.qn,r.UX,Z.j,L.SY,R.D,W.q,y.p,B.H,S.l,N.B,$.y,J.T,Q.p,p.JJ,w.fM,j.F],styles:["[_nghost-%COMP%]{display:block}nz-card[_ngcontent-%COMP%]:first-of-type     .ant-card-body{padding:0;margin-top:1px}.table-info[_ngcontent-%COMP%]{margin-left:.5rem}tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]{white-space:nowrap}tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell.align-right[_ngcontent-%COMP%]     .ant-table-column-title{text-align:right}tr.filter-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]{padding:3px 4px}tr.filter-row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   nz-filter-trigger[_ngcontent-%COMP%]     span.ant-dropdown-trigger{margin-left:0;padding-right:12px}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]{white-space:nowrap}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]   .anticon.attribute-icon[_ngcontent-%COMP%]{color:#595959}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell.overflow-ellipsis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell.button-cell[_ngcontent-%COMP%]{padding:0}tr.data-row[_ngcontent-%COMP%]   td.align-right[_ngcontent-%COMP%], tr.col-header-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%], tr.data-row[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%], tr.filter-row[_ngcontent-%COMP%]   th.ant-table-cell[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%]{text-align:right}"],changeDetection:0}),u);K=(0,E.gn)([(0,c.c)()],K)},6610:(b,f,e)=>{e.d(f,{I:()=>U});var E=e(6814),x=e(7856),d=e(9154),c=e(2966),T=e(2989),h=e(7950),C=e(2524),M=e(9175),O=e(4742),D=e(9312),g=e(2840),m=e(2962),z=e(551),A=e(3740),s=e(5695),t=e(6109),p=e(2392),I=e(8527),v=e(9212);let U=(()=>{class r{}return r.\u0275fac=function(L){return new(L||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[E.ez,g.sL,m.vh,z.PV,A.HQ,s.X,t.cg,p.ZJ,M.n,O.c,x.k,d.y,C.s,c.T,T.T,D.w,h.x,I.u,c.T]}),r})()}}]);