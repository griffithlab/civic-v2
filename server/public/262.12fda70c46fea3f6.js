"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[262],{9365:(w,k,e)=>{e.d(k,{T:()=>x});var t=e(73664),i=e(2615),T=e(72200),n=e(25703),o=e(12617),y=e(41951),S=e(50513),G=e(16389),A=e(25930);const D=["itemTemplate"],b=f=>({$implicit:f});function W(f,I){if(1&f){const v=t.RV6();t.j41(0,"nz-list-item",5),t.bIt("click",function(){i.eBV(v);const E=t.XpG().$implicit,$=t.XpG(2);return i.Njj($.onParticipantSelected(E))}),t.eu8(1,6),t.k0s()}if(2&f){const v=t.XpG().$implicit,O=t.XpG(2);t.AVh("selected-participant",v.id==(null==O.selectedItem?null:O.selectedItem.id)),t.R7$(),t.Y8G("ngTemplateOutlet",O.itemTemplateRef||null)("ngTemplateOutletContext",t.eq3(4,b,v))}}function L(f,I){if(1&f&&(t.qex(0),t.DNE(1,W,2,6,"nz-list-item",4),t.bVm()),2&f){const v=I.index,O=t.XpG(2);t.R7$(),t.Y8G("ngIf",v+1<=O.defaultListSize)}}function U(f,I){if(1&f){const v=t.RV6();t.j41(0,"button",7),t.bIt("click",function(){i.eBV(v);const E=t.XpG(2);return i.Njj(E.onExpandClicked())}),t.nrm(1,"i",8),t.EFF(2," Expand "),t.k0s()}}function K(f,I){if(1&f){const v=t.RV6();t.j41(0,"button",7),t.bIt("click",function(){i.eBV(v);const E=t.XpG(2);return i.Njj(E.onCollapseClicked())}),t.nrm(1,"i",9),t.EFF(2," Collapse "),t.k0s()}}function V(f,I){if(1&f&&(t.qex(0),t.j41(1,"nz-card",1)(2,"nz-list"),t.DNE(3,L,2,1,"ng-container",2),t.k0s(),t.DNE(4,U,3,0,"button",3)(5,K,3,0,"button",3),t.k0s(),t.bVm()),2&f){const v=t.XpG();t.R7$(),t.Y8G("nzTitle",v.listTitle),t.R7$(2),t.Y8G("ngForOf",v.participantList),t.R7$(),t.Y8G("ngIf",v.participantList.length>v.defaultListSize),t.R7$(),t.Y8G("ngIf",v.isExpanded)}}let x=(()=>{var f;class I{constructor(){this.defaultListSize=5,this.participantSelectedEvent=new t.bkB,this.isExpanded=!1}ngOnInit(){this.preselectedOption&&(this.selectedItem=this.preselectedOption)}onParticipantSelected(O){this.selectedItem=O.id==this.selectedItem?.id?void 0:O,this.participantSelectedEvent.emit(this.selectedItem)}onExpandClicked(){this.originalDefaultListSize=this.defaultListSize,this.defaultListSize=this.participantList.length,this.isExpanded=!0}onCollapseClicked(){this.originalDefaultListSize&&(this.defaultListSize=this.originalDefaultListSize,this.isExpanded=!1)}static#n=f=()=>(this.\u0275fac=function(E){return new(E||I)},this.\u0275cmp=t.VBU({type:I,selectors:[["cvc-participant-list"]],contentQueries:function(E,$,Q){if(1&E&&t.wni(Q,D,5),2&E){let X;t.mGM(X=t.lsd())&&($.itemTemplateRef=X.first)}},inputs:{participantList:"participantList",listTitle:"listTitle",defaultListSize:"defaultListSize",preselectedOption:"preselectedOption"},outputs:{participantSelectedEvent:"participantSelectedEvent"},standalone:!1,decls:1,vars:1,consts:[[4,"ngIf"],["nz-type","inner",2,"margin-bottom","1em",3,"nzTitle"],[4,"ngFor","ngForOf"],["nz-button","","nzType","default","nzSize","small",3,"click",4,"ngIf"],["nzSize","small","class","participant-list-item",3,"selected-participant","click",4,"ngIf"],["nzSize","small",1,"participant-list-item",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-button","","nzType","default","nzSize","small",3,"click"],["nz-icon","","nzType","vertical-align-bottom"],["nz-icon","","nzType","vertical-align-top"]],template:function(E,$){1&E&&t.DNE(0,V,6,4,"ng-container",0),2&E&&t.Y8G("ngIf",$.participantList&&$.participantList.length>0)},dependencies:[T.Sq,T.bT,T.T3,n.cK,o.eE,o.lQ,y.Dn,S.a,G.c,A.p],styles:[".participant-list-item[_ngcontent-%COMP%]:hover{border:1px solid #40a9ff;cursor:pointer}.participant-list-item[_ngcontent-%COMP%]{padding:2px;margin:2px}.selected-participant[_ngcontent-%COMP%]{background:#40a9ff;color:#fff}"]}))}return f(),I})()},14873:(w,k,e)=>{e.d(k,{A:()=>B});var t=e(72200),i=e(97529),T=e(25703),n=e(12617),o=e(29438),y=e(97685),S=e(61912),G=e(72968),A=e(86864),D=e(77169),b=e(64917),W=e(7391),L=e(41951),U=e(35154),K=e(72874),V=e(73664),x=e(2615);let f=(()=>{var j;class R{static#n=j=()=>(this.\u0275fac=function(h){return new(h||R)},this.\u0275mod=V.$C({type:R}),this.\u0275inj=x.G2t({imports:[t.MD,A.sC,o.Yb,W.kT,L.Y3,U.Qt,K.g9,D.W,b.i]}))}return j(),R})();var I=e(84341),v=e(56506),O=e(38927),E=e(34308),$=e(23842),Q=e(68492),X=e(25128),s=e(23617),g=e(50513),u=e(3069),d=e(1177),_=e(25725);let p=(()=>{var j;class R{static#n=j=()=>(this.\u0275fac=function(h){return new(h||R)},this.\u0275mod=V.$C({type:R}),this.\u0275inj=x.G2t({imports:[t.MD,I.X1,g.Z,T.Ti,_.hM,O.PQ,d.V,u.$f,s.$,U.Qt,I.YN,v.qy,Q.M,$.k,D.W,X.K,E.I]}))}return j(),R})(),B=(()=>{var j;class R{static#n=j=()=>(this.\u0275fac=function(h){return new(h||R)},this.\u0275mod=V.$C({type:R}),this.\u0275inj=x.G2t({imports:[t.MD,g.Z,i.f3,T.Ti,n.rD,L.Y3,b.i,o.Yb,y.pc,S.i3,p,G.K,f]}))}return j(),R})()},20664:(w,k,e)=>{e.d(k,{D:()=>xn});var d,t=e(69145),i=e(96354),T=e(24608),n=e(73664),o=e(2615),y=e(72200),S=e(50513),G=e(16389),A=e(97529),D=e(25703),b=e(12617),W=e(41951),L=e(29438),U=e(97685),K=e(31635),V=e(71226),x=e(49894),f=e(41305),I=e(74222),v=e(84341),O=e(25930),E=e(38927),$=e(1177),Q=e(23617),X=e(35154),s=e(19449),g=e(41939),u=e(65566);function _(a,m){if(1&a){const c=n.RV6();n.j41(0,"nz-alert",6),n.bIt("nzOnClose",function(){o.eBV(c);const l=n.XpG();return o.Njj(l.onSuccessBannerClose())}),n.k0s()}}function p(a,m){if(1&a&&(n.j41(0,"nz-form-item"),n.nrm(1,"cvc-form-errors-alert",7),n.k0s()),2&a){const c=n.XpG();n.R7$(),n.Y8G("errors",c.errorMessages)}}let B=(class en{constructor(m,c,r){this.viewerService=m,this.addCommentGql=c,this.networkErrorService=r,this.commentAddedEvent=new n.bkB,this.success=!1,this.errorMessages=[],this.loading=!1,this.viewerService.viewer$.pipe((0,x.s)(this)).subscribe(l=>{this.mostRecentOrg=l.mostRecentOrg}),this.addCommentMutator=new V.E(this.networkErrorService)}submitComment(){if(this.commentText){this.errorMessages=[];let c=this.addCommentMutator.mutate(this.addCommentGql,{input:{body:this.commentText,subject:this.subject,organizationId:void 0===this.mostRecentOrg?void 0:this.mostRecentOrg.id}});c.submitSuccess$.pipe((0,x.s)(this)).subscribe(r=>{r&&(this.resetForm(),this.success=!0)}),c.submitError$.pipe((0,x.s)(this)).subscribe(r=>{r&&(this.errorMessages=r,this.success=!1)}),c.isSubmitting$.pipe((0,x.s)(this)).subscribe(r=>{this.loading=r})}}resetForm(){this.commentText="",this.commentAddedEvent.emit()}onSuccessBannerClose(){this.resetForm()}static#n=d=()=>(this.\u0275fac=function(c){return new(c||en)(n.rXU(f.q),n.rXU(t.hj),n.rXU(I.N))},this.\u0275cmp=n.VBU({type:en,selectors:[["cvc-comment-add-form"]],inputs:{subject:"subject"},outputs:{commentAddedEvent:"commentAddedEvent"},standalone:!1,decls:11,vars:7,consts:[["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose",4,"ngIf"],["nz-form","","nzLayout","vertical",3,"ngSubmit"],[4,"ngIf"],[3,"commentChange","comment"],["nzTip","Submitting",3,"nzSpinning"],["type","submit","nz-button","","cvcOrgSelectorBtn","","nzType","primary","nzSize","small","nz-tooltip","",3,"disabled","nzTooltipTrigger","nzTooltipTitle"],["nzBanner","","nzMessage","Comment submitted","nzType","success","nzCloseable","",3,"nzOnClose"],[3,"errors"]],template:function(c,r){1&c&&(n.j41(0,"nz-card"),n.DNE(1,_,1,0,"nz-alert",0),n.j41(2,"form",1),n.bIt("ngSubmit",function(){return r.submitComment()}),n.DNE(3,p,2,1,"nz-form-item",2),n.j41(4,"cvc-comment-input-form",3),n.mxI("commentChange",function(C){return n.DH7(r.commentText,C)||(r.commentText=C),C}),n.k0s(),n.j41(5,"nz-spin",4)(6,"nz-form-item")(7,"nz-form-control")(8,"cvc-form-buttons")(9,"button",5),n.EFF(10," Add Comment "),n.k0s()()()()()()()),2&c&&(n.R7$(),n.Y8G("ngIf",r.success),n.R7$(2),n.Y8G("ngIf",r.errorMessages.length>0),n.R7$(),n.R50("comment",r.commentText),n.R7$(),n.Y8G("nzSpinning",r.loading),n.R7$(4),n.Y8G("disabled",r.loading||!(void 0!==r.commentText&&r.commentText.length>=10))("nzTooltipTrigger",r.mostRecentOrg?"hover":null)("nzTooltipTitle","For "+(null==r.mostRecentOrg?null:r.mostRecentOrg.name)))},dependencies:[y.bT,v.qT,v.cb,S.a,G.c,O.p,D.cK,A.Uq,A.e,E.CA,E.Ls,E.zS,$.a,Q.Y,X.LH,v.cV,s.j,g.l,u.K],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2}),this)},d());B=(0,K.Cg)([(0,x.d)()],B);var j=e(9365),R=e(17705),P=e(86864),Y=e(7391),h=e(72874),z=e(61774),M=e(4126),F=e(8139);function J(a,m){if(1&a&&n.nrm(0,"nz-avatar",5),2&a){const c=n.XpG().ngrxLet;n.Y8G("nzSrc",c.commenter.profileImagePath)}}function nn(a,m){1&a&&n.nrm(0,"nz-avatar",6)}function H(a,m){if(1&a){const c=n.RV6();n.j41(0,"nz-comment-action")(1,"span",7),n.bIt("nzOnConfirm",function(){o.eBV(c);const l=n.XpG().ngrxLet,C=n.XpG(),q=n.r8f(0);return o.Njj(C.deleteComment(l.id,null==q.mostRecentOrg?null:q.mostRecentOrg.id))}),n.k0s()()}}function N(a,m){1&a&&(n.j41(0,"span",4)(1,"i"),n.EFF(2," This comment has been deleted. "),n.k0s()())}function Z(a,m){1&a&&(n.j41(0,"span",4)(1,"i"),n.EFF(2,"No Comment Provided"),n.k0s()())}function an(a,m){if(1&a&&n.nrm(0,"cvc-comment-body",8),2&a){const c=n.XpG(2).ngrxLet;n.Y8G("commentBodySegments",c.parsedComment)}}function cn(a,m){if(1&a&&n.nVh(0,Z,3,0,"span",4)(1,an,1,1,"cvc-comment-body",8),2&a){const c=n.XpG().ngrxLet;n.vxM(0==c.parsedComment.length?0:1)}}function rn(a,m){if(1&a&&(n.j41(0,"nz-comment",2),n.nI1(1,"timeAgo"),n.DNE(2,J,1,1,"nz-avatar",3)(3,nn,1,0,"ng-template",null,0,n.C5r),n.nVh(5,H,2,0,"nz-comment-action"),n.j41(6,"nz-comment-content"),n.nVh(7,N,3,0,"span",4)(8,cn,2,1),n.k0s()()),2&a){const c=m.ngrxLet,r=n.sdS(4),l=n.XpG(),C=n.r8f(0);n.Y8G("nzAuthor",c.commenter.displayName)("nzDatetime",n.bMT(1,6,c.createdAt)),n.R7$(2),n.Y8G("ngIf",c.commenter.profileImagePath)("ngIfElse",r),n.R7$(3),n.vxM(C&&C.signedIn&&(null==C.user?null:C.user.id)==c.commenter.id&&c.id&&!c.deleted&&l.canDelete()?5:-1),n.R7$(2),n.vxM(c.deleted?7:8)}}let sn=(()=>{var a;class m{constructor(r,l,C){this.viewerService=r,this.networkErrorService=l,this.deleteCommentGql=C,this.comment=R.hFB.required(),this.canDelete=(0,R.hFB)(!0),this.viewer$=this.viewerService.viewer$}ngOnInit(){if(void 0===this.comment)throw new Error("Must pass a comment into comment display component.")}deleteComment(r,l){new V.E(this.networkErrorService).mutate(this.deleteCommentGql,{input:{commentId:r,organizationId:l}})}static#n=a=()=>(this.\u0275fac=function(l){return new(l||m)(n.rXU(f.q),n.rXU(I.N),n.rXU(t.hGs))},this.\u0275cmp=n.VBU({type:m,selectors:[["cvc-comment-display"]],inputs:{comment:[1,"comment"],canDelete:[1,"canDelete"]},standalone:!1,decls:3,vars:4,consts:[["noAvatar",""],[3,"nzAuthor","nzDatetime",4,"ngrxLet"],[3,"nzAuthor","nzDatetime"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["nz-typography","","nzType","secondary"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","","nzIcon","civic:curator"],["nz-tooltip","","nz-popconfirm","","nzPopconfirmPlacement","right","nzPopconfirmTitle","Delete This Comment?","nzTooltipTitle","Delete","nz-icon","","nzType","delete",3,"nzOnConfirm"],[3,"commentBodySegments"]],template:function(l,C){1&l&&(n.SS7(0),n.nI1(1,"ngrxPush"),n.DNE(2,rn,9,8,"nz-comment",1)),2&l&&(n.bH3(n.bMT(1,1,C.viewer$)),n.R7$(2),n.Y8G("ngrxLet",C.comment()))},dependencies:[y.bT,P.fL,P.sf,P.OW,P.fS,L.PM,Y.Di,W.Dn,X.LH,h.PV,z.Nj,M.p,z.L9,F.N],encapsulation:2}))}return a(),m})();var mn=e(14493);const tn=()=>[];function ln(a,m){if(1&a&&(n.j41(0,"nz-card",10),n.nrm(1,"cvc-comment-display",11),n.k0s()),2&a){const c=n.XpG(2);n.R7$(),n.Y8G("comment",c.creationComment)("canDelete",!1)}}function _n(a,m){1&a&&(n.qex(0),n.j41(1,"nz-row",6)(2,"nz-col",7)(3,"nz-space",8),n.DNE(4,ln,2,2,"nz-card",9),n.k0s()()(),n.bVm()),2&a&&(n.R7$(),n.Y8G("nzGutter",16))}function pn(a,m){if(1&a){const c=n.RV6();n.j41(0,"div",24)(1,"button",25),n.bIt("click",function(){o.eBV(c);const l=n.XpG().ngIf,C=n.XpG(3);return o.Njj(C.onLoadMore(l.startCursor))}),n.EFF(2," Load older comments "),n.k0s()()}}function dn(a,m){if(1&a&&(n.j41(0,"nz-list-header"),n.DNE(1,pn,3,0,"div",23),n.k0s()),2&a){const c=m.ngIf;n.R7$(),n.Y8G("ngIf",c.hasPreviousPage)}}function un(a,m){if(1&a&&(n.j41(0,"nz-list-item"),n.nrm(1,"cvc-comment-display",26),n.k0s()),2&a){const c=m.$implicit;n.R7$(),n.Y8G("comment",c)}}function zn(a,m){if(1&a&&(n.j41(0,"nz-card",21)(1,"nz-list",22),n.nI1(2,"ngrxPush"),n.nI1(3,"ngrxPush"),n.DNE(4,dn,2,1,"nz-list-header",4),n.nI1(5,"ngrxPush"),n.DNE(6,un,2,1,"ng-template",null,1,n.C5r),n.k0s()()),2&a){const c=n.sdS(7),r=n.XpG(2);n.R7$(),n.Y8G("nzDataSource",n.bMT(2,4,r.comments$))("nzLoading",n.bMT(3,6,r.loading$))("nzRenderItem",c),n.R7$(3),n.Y8G("ngIf",n.bMT(5,8,r.pageInfo$))}}function Cn(a,m){if(1&a){const c=n.RV6();n.j41(0,"cvc-comment-add-form",27),n.bIt("commentAddedEvent",function(){o.eBV(c);const l=n.XpG(2);return o.Njj(l.refreshList())}),n.k0s()}if(2&a){const c=n.XpG(2);n.Y8G("subject",c.commentable)}}function fn(a,m){if(1&a&&n.nrm(0,"nz-avatar",30),2&a){const c=n.XpG().$implicit;n.Y8G("nzSrc",c.profileImagePath)}}function vn(a,m){if(1&a&&(n.nrm(0,"nz-avatar",31),n.nI1(1,"uppercase")),2&a){const c=n.XpG().$implicit;n.Y8G("nzText",n.bMT(1,1,c.displayName.charAt(0)))}}function gn(a,m){if(1&a&&(n.DNE(0,fn,1,1,"nz-avatar",29)(1,vn,2,3,"ng-template",null,3,n.C5r),n.j41(3,"span"),n.EFF(4),n.k0s()),2&a){const c=m.$implicit,r=n.sdS(2);n.Y8G("ngIf",c.profileImagePath)("ngIfElse",r),n.R7$(4),n.JRh(c.displayName)}}function hn(a,m){if(1&a){const c=n.RV6();n.j41(0,"cvc-participant-list",28),n.nI1(1,"ngrxPush"),n.bIt("participantSelectedEvent",function(l){o.eBV(c);const C=n.XpG(2);return o.Njj(C.onCommenterSelected(l))}),n.DNE(2,gn,5,3,"ng-template",null,2,n.C5r),n.k0s()}if(2&a){const c=n.XpG(2);n.Y8G("participantList",n.bMT(1,1,c.commenters$)||n.lJ4(3,tn))}}function Tn(a,m){if(1&a&&n.nrm(0,"nz-avatar",30),2&a){const c=n.XpG().$implicit;n.Y8G("nzSrc",c.profileImagePath)}}function En(a,m){if(1&a&&(n.nrm(0,"nz-avatar",31),n.nI1(1,"uppercase")),2&a){const c=n.XpG().$implicit;n.Y8G("nzText",n.bMT(1,1,c.displayName.charAt(0)))}}function Pn(a,m){if(1&a&&(n.DNE(0,Tn,1,1,"nz-avatar",29)(1,En,2,3,"ng-template",null,3,n.C5r),n.j41(3,"span"),n.EFF(4),n.k0s()),2&a){const c=m.$implicit,r=n.sdS(2);n.Y8G("ngIf",c.profileImagePath)("ngIfElse",r),n.R7$(4),n.JRh(c.displayName)}}function yn(a,m){if(1&a){const c=n.RV6();n.j41(0,"cvc-participant-list",32),n.nI1(1,"ngrxPush"),n.bIt("participantSelectedEvent",function(l){o.eBV(c);const C=n.XpG(2);return o.Njj(C.onMentionedUserSelected(l))}),n.DNE(2,Pn,5,3,"ng-template",null,2,n.C5r),n.k0s()}if(2&a){const c=n.XpG(2);n.Y8G("participantList",n.bMT(1,1,c.mentionedUsers$)||n.lJ4(3,tn))}}function Dn(a,m){if(1&a&&(n.nrm(0,"nz-avatar",34),n.j41(1,"span"),n.EFF(2),n.k0s()),2&a){const c=m.$implicit;n.Y8G("nzIcon",n.VkB("civic-",c.tag.displayName)),n.R7$(2),n.SpI("",c.tag.displayName,"s")}}function On(a,m){if(1&a){const c=n.RV6();n.j41(0,"cvc-participant-list",33),n.nI1(1,"ngrxPush"),n.bIt("participantSelectedEvent",function(l){o.eBV(c);const C=n.XpG(2);return o.Njj(C.onMentionedRoleSelected(l))}),n.DNE(2,Dn,3,3,"ng-template",null,2,n.C5r),n.k0s()}if(2&a){const c=n.XpG(2);n.Y8G("participantList",n.bMT(1,1,c.mentionedRoles$)||n.lJ4(3,tn))}}function Mn(a,m){if(1&a&&(n.nrm(0,"i",36),n.nI1(1,"iconNameForSubscribableEntity"),n.j41(2,"span"),n.EFF(3),n.k0s()),2&a){const c=m.$implicit;n.Y8G("nzType",n.bMT(1,2,c.tag.tagType)),n.R7$(3),n.JRh(c.tag.displayName)}}function In(a,m){if(1&a){const c=n.RV6();n.j41(0,"cvc-participant-list",35),n.nI1(1,"ngrxPush"),n.bIt("participantSelectedEvent",function(l){o.eBV(c);const C=n.XpG(2);return o.Njj(C.onMentionedEntitySelected(l))}),n.DNE(2,Mn,4,4,"ng-template",null,2,n.C5r),n.k0s()}if(2&a){const c=n.XpG(2);n.Y8G("participantList",n.bMT(1,1,c.mentionedEntities$)||n.lJ4(3,tn))}}function Bn(a,m){1&a&&(n.qex(0),n.j41(1,"nz-row",6)(2,"nz-col",12)(3,"nz-space",8),n.DNE(4,zn,8,10,"nz-card",13)(5,Cn,1,1,"cvc-comment-add-form",14),n.k0s()(),n.j41(6,"nz-col",15)(7,"nz-space",16),n.DNE(8,hn,4,4,"cvc-participant-list",17)(9,yn,4,4,"cvc-participant-list",18)(10,On,4,4,"cvc-participant-list",19)(11,In,4,4,"cvc-participant-list",20),n.k0s()()(),n.bVm()),2&a&&(n.R7$(),n.Y8G("nzGutter",16))}function An(a,m){if(1&a){const c=n.RV6();n.j41(0,"cvc-comment-add-form",27),n.bIt("commentAddedEvent",function(){o.eBV(c);const l=n.XpG();return o.Njj(l.refreshList())}),n.k0s()}if(2&a){const c=n.XpG();n.Y8G("subject",c.commentable)}}let xn=(()=>{var a;class m{constructor(r){this.gql=r,this.pageSize=5}ngOnInit(){this.queryRef$=this.gql.watch({subject:this.commentable,last:this.pageSize,sortBy:{column:t.G_G.Created,direction:t.UEL.Asc}});let r=this.queryRef$.valueChanges;this.pageInfo$=r.pipe((0,i.T)(({data:l})=>l.comments.pageInfo)),this.loading$=r.pipe((0,i.T)(({loading:l})=>l)),this.comments$=r.pipe((0,i.T)(({data:l})=>l.comments.edges.map(C=>C.node))),this.commenters$=r.pipe((0,i.T)(({data:l})=>l.comments.uniqueCommenters)),this.mentionedUsers$=r.pipe((0,i.T)(({data:l})=>l.comments.mentionedUsers)),this.mentionedRoles$=r.pipe((0,i.T)(({data:l})=>l.comments.mentionedRoles.map(C=>({id:`${C.entityId}-${C.tagType}`,tag:C})))),this.mentionedEntities$=r.pipe((0,i.T)(({data:l})=>l.comments.mentionedEntities.map(C=>({id:`${C.entityId}-${C.tagType}`,tag:C})))),this.unfilteredCount$=r.pipe((0,T.E)("data","comments","unfilteredCountForSubject"))}onLoadMore(r){this.queryRef$.fetchMore({variables:{last:this.pageSize,before:r}})}onCommenterSelected(r){this.queryRef$.refetch({originatingUserId:r?.id})}onMentionedUserSelected(r){this.queryRef$.refetch({mentionedUserId:r?.id})}onMentionedRoleSelected(r){if(r){let l=t.gG1[r.tag.displayName[0].toUpperCase()+r.tag.displayName.slice(1)];this.queryRef$.refetch({mentionedRole:l})}else this.queryRef$.refetch({mentionedRole:void 0})}onMentionedEntitySelected(r){this.queryRef$.refetch(r?{mentionedEntity:{entityType:r.tag.tagType,id:r.tag.entityId}}:{mentionedEntity:void 0})}refreshList(){this.queryRef$.refetch()}static#n=a=()=>(this.\u0275fac=function(l){return new(l||m)(n.rXU(t.y5X))},this.\u0275cmp=n.VBU({type:m,selectors:[["cvc-comment-list"]],inputs:{commentable:"commentable",creationComment:"creationComment"},standalone:!1,decls:5,vars:5,consts:[["noComments",""],["comment",""],["itemTemplate",""],["noAvatar",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"nzGutter"],["nzSpan","24"],["nzDirection","vertical",2,"width","100%"],["nzTitle","Submission Comment",4,"nzSpaceItem"],["nzTitle","Submission Comment"],[3,"comment","canDelete"],["nzSpan","18"],["nzTitle","Comments",4,"nzSpaceItem"],["id","addComment",3,"subject","commentAddedEvent",4,"nzSpaceItem"],["nzSpan","6"],["nzDirection","vertical"],["listTitle","Commenters",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Mentioned Users",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Mentioned Roles",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["listTitle","Mentioned Entities",3,"participantList","participantSelectedEvent",4,"nzSpaceItem"],["nzTitle","Comments"],["nzSize","small","nzItemLayout","horizontal",3,"nzDataSource","nzLoading","nzRenderItem"],["nz-list-load-more","",4,"ngIf"],["nz-list-load-more",""],["nz-button","","nzType","link","nzSize","small","nzBlock","",3,"click"],[3,"comment"],["id","addComment",3,"commentAddedEvent","subject"],["listTitle","Commenters",3,"participantSelectedEvent","participantList"],["nz-comment-avatar","",3,"nzSrc",4,"ngIf","ngIfElse"],["nz-comment-avatar","",3,"nzSrc"],["nz-comment-avatar","",3,"nzText"],["listTitle","Mentioned Users",3,"participantSelectedEvent","participantList"],["listTitle","Mentioned Roles",3,"participantSelectedEvent","participantList"],[3,"nzIcon"],["listTitle","Mentioned Entities",3,"participantSelectedEvent","participantList"],["nz-icon","",3,"nzType"]],template:function(l,C){if(1&l&&(n.DNE(0,_n,5,1,"ng-container",4)(1,Bn,12,1,"ng-container",5),n.nI1(2,"ngrxPush"),n.DNE(3,An,1,1,"ng-template",null,0,n.C5r)),2&l){const q=n.sdS(4);n.Y8G("ngIf",C.creationComment),n.R7$(),n.Y8G("ngIf",n.bMT(2,3,C.unfilteredCount$))("ngIfElse",q)}},dependencies:[y.bT,S.a,G.c,A.Uq,A.e,D.cK,b.eE,b.Xo,b.lQ,W.Dn,L.PM,U.U5,U.Dq,B,j.T,sn,y.Pc,z.L9,mn.g],styles:["[_nghost-%COMP%]{display:block}nz-list-header[_ngcontent-%COMP%]{padding:0;margin:0}nz-list-header[_ngcontent-%COMP%]   [nz-list-load-more][_ngcontent-%COMP%]{margin-top:-.5em;padding-bottom:.5em}"]}))}return a(),m})()},65566:(w,k,e)=>{e.d(k,{K:()=>s});var t=e(73664),i=e(21413),T=e(69145),n=e(5964),o=e(96354),y=e(99172),S=e(56977),G=e(24608),A=e(69199),D=e(2615),b=e(41305),W=e(72200),L=e(84341),U=e(61774),K=e(25725),V=e(1177),x=e(3069),f=e(21011),I=e(4126);const v=()=>["#","@","$"],O=()=>({minRows:4,maxRows:100});function E(g,u){if(1&g&&(t.qex(0),t.j41(1,"span"),t.EFF(2),t.k0s(),t.bVm()),2&g){const d=u.$implicit;t.R7$(2),t.JRh(d.displayName)}}function $(g,u){1&g&&(t.qex(0),t.nrm(1,"nz-spin",8),t.bVm())}function Q(g,u){if(1&g&&(t.qex(0),t.nrm(1,"cvc-comment-body",9),t.bVm()),2&g){const d=u.ngIf;t.R7$(),t.Y8G("commentBodySegments",d)}}function X(g,u){if(1&g){const d=t.RV6();t.qex(0),t.j41(1,"nz-tabs",1)(2,"nz-tab",2)(3,"nz-mention",3),t.bIt("nzOnSearchChange",function(p){D.eBV(d);const B=t.XpG();return D.Njj(B.onSearchChange(p))})("nzOnSelect",function(){D.eBV(d);const p=t.XpG();return D.Njj(p.suggestions=[])}),t.j41(4,"textarea",4),t.mxI("ngModelChange",function(p){D.eBV(d);const B=t.XpG();return t.DH7(B.commentText,p)||(B.commentText=p),D.Njj(p)}),t.bIt("ngModelChange",function(p){D.eBV(d);const B=t.XpG();return D.Njj(B.onCommentChanged(p))}),t.k0s(),t.DNE(5,E,3,1,"ng-container",5),t.k0s()(),t.j41(6,"nz-tab",6),t.bIt("nzClick",function(){D.eBV(d);const p=t.XpG();return D.Njj(p.onPreviewButtonClicked())}),t.DNE(7,$,2,0,"ng-container",7),t.nI1(8,"ngrxPush"),t.DNE(9,Q,2,1,"ng-container",7),t.nI1(10,"ngrxPush"),t.k0s()(),t.bVm()}if(2&g){const d=u.ngrxLet,_=t.XpG();t.R7$(),t.Y8G("nzAnimated",!1),t.R7$(2),t.Y8G("nzSuggestions",_.suggestions)("nzPrefix",t.lJ4(14,v))("nzValueWith",_.autoCompleteValueFor),t.R7$(),t.Y8G("placeholder",d&&d.canCurate?"Enter comment (minimum length 10. Use @ to mention users; # to link entities)":"Please sign in")("nzAutosize",t.lJ4(15,O)),t.R50("ngModel",_.commentText),t.BMQ("disabled",!d||!d.canCurate||null),t.R7$(3),t.Y8G("ngIf",t.bMT(8,10,_.previewLoading$)),t.R7$(2),t.Y8G("ngIf",t.bMT(10,12,_.previewComment$))}}let s=(()=>{var g;class u{constructor(_,p,B,j){this.previewCommentGql=_,this.userTypeaheadGql=p,this.entityTypeaheadGql=B,this.viewerService=j,this.commentChange=new t.bkB,this.destroy$=new i.B,this.suggestions=[],this.roleSuggestions=[{displayName:"admins",value:"admins"},{displayName:"editors",value:"editors"}]}ngOnInit(){this.viewer$=this.viewerService.viewer$,this.commentText=this.comment,this.userTypeaheadQueryRef$=this.userTypeaheadGql.watch({queryTerm:""}),this.userTypeaheadQueryRef$.valueChanges.pipe((0,G.E)("data","userTypeahead"),(0,n.p)(A.kP),(0,S.Q)(this.destroy$)).subscribe(_=>this.suggestions=_.map(p=>({displayName:p.username,value:p.username}))),this.entityTypeaheadQueryRef$=this.entityTypeaheadGql.watch({queryTerm:""}),this.entityTypeaheadQueryRef$.valueChanges.pipe((0,G.E)("data","entityTypeahead"),(0,n.p)(A.kP),(0,S.Q)(this.destroy$)).subscribe(_=>this.suggestions=_.map(p=>({displayName:p.displayName,value:this.tagForEntityTypeAndId(p.tagType,p.entityId)})))}ngOnChanges(){this.commentText=this.comment}autoCompleteValueFor(_){return _.value}tagForEntityTypeAndId(_,p){switch(_){case T.lBA.Feature:return`FID${p}`;case T.lBA.Variant:return`VID${p}`;case T.lBA.VariantGroup:return`VGID${p}`;case T.lBA.EvidenceItem:return`EID${p}`;case T.lBA.Assertion:return`AID${p}`;case T.lBA.Revision:return`RID${p}`;case T.lBA.MolecularProfile:return`MPID${p}`;case T.lBA.Role:return Object.keys(T.gG1)[p]}}resetForm(){this.commentText=""}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreviewButtonClicked(){this.commentText&&(this.previewComment$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,G.E)("data","previewCommentText"),(0,n.p)(A.kP)),this.previewLoading$=this.previewCommentGql.watch({commentText:this.commentText}).valueChanges.pipe((0,o.T)(({loading:_})=>_),(0,y.Z)(!0)))}onSearchChange({value:_,prefix:p}){"@"===p?this.userTypeaheadQueryRef$.refetch({queryTerm:_}):"$"==p?this.suggestions=this.roleSuggestions.filter(B=>B.value.startsWith(_)):this.entityTypeaheadQueryRef$.refetch({queryTerm:_})}onCommentChanged(_){this.commentChange.emit(_)}static#n=g=()=>(this.\u0275fac=function(p){return new(p||u)(t.rXU(T.WGp),t.rXU(T.bPL),t.rXU(T.paL),t.rXU(b.q))},this.\u0275cmp=t.VBU({type:u,selectors:[["cvc-comment-input-form"]],inputs:{comment:"comment"},outputs:{commentChange:"commentChange"},standalone:!1,features:[t.OA$],decls:1,vars:1,consts:[[4,"ngrxLet"],[3,"nzAnimated"],["nzTitle","Write"],["nzNotFoundContent","No matches...",3,"nzOnSearchChange","nzOnSelect","nzSuggestions","nzPrefix","nzValueWith"],["nzMentionTrigger","","nz-input","",2,"width","100%",3,"ngModelChange","placeholder","nzAutosize","ngModel"],[4,"nzMentionSuggestion"],["nzTitle","Preview",3,"nzClick"],[4,"ngIf"],["nzTip","Loading..."],[3,"commentBodySegments"]],template:function(p,B){1&p&&t.DNE(0,X,11,16,"ng-container",0),2&p&&t.Y8G("ngrxLet",B.viewer$)},dependencies:[W.bT,L.me,L.BC,U.Nj,K.eG,K.rE,V.a,x.O2,x.sJ,x.yZ,f.Sy,f.c9,L.vS,I.p,U.L9],styles:[":host{display:block}nz-space{width:100%}nz-form-item:last-of-type{margin-bottom:0}\n"],encapsulation:2}))}return g(),u})()},72874:(w,k,e)=>{e.d(k,{PV:()=>B,g9:()=>R});var t=e(31635),i=e(85188),T=e(82833),n=e(2615),o=e(73664),y=e(17705),S=e(59295),G=e(89079),A=e(21413),D=e(5964),b=e(70980),W=e(61594),L=e(50513),U=e(40713),K=e(66376),V=e(26841),x=e(57806),f=e(65463),I=e(25701),v=e(59965),O=e(41951),E=e(35154),$=e(16389),Q=e(25930);const X=["okBtn"],s=["cancelBtn"];function g(P,Y){1&P&&(o.j41(0,"div",6),o.nrm(1,"span",14),o.k0s())}function u(P,Y){if(1&P&&(o.qex(0),o.j41(1,"span",17),o.nrm(2,"nz-icon",18),o.k0s(),o.bVm()),2&P){const h=Y.$implicit;o.R7$(2),o.Y8G("nzType",h||"exclamation-circle")}}function d(P,Y){if(1&P&&(o.qex(0),o.DNE(1,u,3,1,"ng-container",15),o.j41(2,"div",16),o.EFF(3),o.k0s(),o.bVm()),2&P){const h=o.XpG(2);o.R7$(),o.Y8G("nzStringTemplateOutlet",h.nzIcon),o.R7$(2),o.JRh(h.nzTitle)}}function _(P,Y){if(1&P){const h=o.RV6();o.j41(0,"div",4)(1,"div",5),o.nVh(2,g,2,0,"div",6),o.j41(3,"div",7)(4,"div")(5,"div",8)(6,"div",9),o.DNE(7,d,4,2,"ng-container",10),o.k0s(),o.j41(8,"div",11)(9,"button",12,1),o.bIt("click",function(){n.eBV(h);const M=o.XpG();return n.Njj(M.onCancel())}),o.SS7(11),o.nI1(12,"nzI18n"),o.EFF(13),o.k0s(),o.j41(14,"button",13,2),o.bIt("click",function(){n.eBV(h);const M=o.XpG();return n.Njj(M.onConfirm())}),o.SS7(16),o.nI1(17,"nzI18n"),o.EFF(18),o.k0s()()()()()()()}if(2&P){let h;const z=o.XpG();o.Aen(z.nzOverlayStyle),o.HbH(z._classMap),o.AVh("ant-popover-rtl","rtl"===z.dir),o.Y8G("cdkTrapFocusAutoCapture",null!==z.nzAutoFocus)("@.disabled",!(null==z.noAnimation||!z.noAnimation.nzNoAnimation))("nzNoAnimation",null==z.noAnimation?null:z.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),o.R7$(2),o.vxM(z.nzPopconfirmShowArrow?2:-1),o.R7$(5),o.Y8G("nzStringTemplateOutlet",z.nzTitle)("nzStringTemplateOutletContext",z.nzTitleContext),o.R7$(2),o.Y8G("nzSize","small")("disabled",null==(h=z.nzCancelButtonProps())?null:h.nzDisabled),o.BMQ("cdkFocusInitial","cancel"===z.nzAutoFocus||null);const M=z.nzCancelText()||o.bMT(12,24,"Modal.cancelText");o.R7$(4),o.SpI(" ",M," "),o.R7$(),o.Y8G("nzSize","small")("nzType",z.nzOkButtonProps().nzType)("nzDanger",z.nzOkButtonProps().nzDanger)("nzLoading",z.confirmLoading)("disabled",z.nzOkButtonProps().nzDisabled),o.BMQ("cdkFocusInitial","ok"===z.nzAutoFocus||null);const F=z.nzOkText()||o.bMT(17,26,"Modal.okText");o.R7$(4),o.SpI(" ",F," ")}}let B=(()=>{let Y,M,P=E.ME,h=[],z=[],F=[],J=[];return class on extends P{_nzModuleName="popconfirm";arrowPointAtCenter;title;titleContext=null;directiveTitle;trigger="click";placement="top";origin;mouseEnterDelay;mouseLeaveDelay;overlayClassName;overlayStyle;visible;nzBeforeConfirm;nzIcon;nzCondition=!1;nzPopconfirmShowArrow=!0;nzPopconfirmBackdrop=(0,t.zF)(this,h,!1);nzAutofocus=((0,t.zF)(this,z),(0,t.zF)(this,F,null));nzOkText=((0,t.zF)(this,J),(0,y.hFB)(null));nzOkType=(0,y.hFB)("primary");nzCancelText=(0,y.hFB)(null);nzOkButtonProps=(0,y.hFB)(null);nzCancelButtonProps=(0,y.hFB)(null);nzOkDisabled=(0,y.hFB)(!1,{transform:y.L39});nzOkDanger=(0,y.hFB)(!1,{transform:y.L39});okButtonProps=(0,S.EW)(()=>({...this.nzOkButtonProps(),nzType:this.nzOkButtonProps()?.nzType||"danger"===this.nzOkType()?"primary":this.nzOkType(),nzDanger:this.nzOkDanger()||this.nzOkButtonProps()?.nzDanger||"danger"===this.nzOkType(),nzDisabled:this.nzOkDisabled()||this.nzOkButtonProps()?.nzDisabled}));cancelButtonProps=(0,S.EW)(()=>({...this.nzCancelButtonProps()}));directiveContent=null;content=null;overlayClickable;visibleChange=new o.bkB;nzOnCancel=new o.bkB;nzOnConfirm=new o.bkB;getProxyPropertyMap(){return{nzOkText:["nzOkText",()=>this.nzOkText],nzCancelText:["nzCancelText",()=>this.nzCancelText],nzOkButtonProps:["nzOkButtonProps",()=>this.okButtonProps],nzCancelButtonProps:["nzCancelButtonProps",()=>this.cancelButtonProps],nzBeforeConfirm:["nzBeforeConfirm",()=>this.nzBeforeConfirm],nzCondition:["nzCondition",()=>this.nzCondition],nzIcon:["nzIcon",()=>this.nzIcon],nzPopconfirmShowArrow:["nzPopconfirmShowArrow",()=>this.nzPopconfirmShowArrow],nzPopconfirmBackdrop:["nzBackdrop",()=>this.nzPopconfirmBackdrop],nzPopconfirmContext:["nzTitleContext",()=>this.titleContext],nzAutoFocus:["nzAutoFocus",()=>this.nzAutofocus],...super.getProxyPropertyMap()}}constructor(){super(j)}createComponent(){super.createComponent(),this.component.nzOnCancel.pipe((0,G.pQ)(this.destroyRef)).subscribe(()=>{this.nzOnCancel.emit()}),this.component.nzOnConfirm.pipe((0,G.pQ)(this.destroyRef)).subscribe(()=>{this.nzOnConfirm.emit()})}static \u0275fac=((()=>{const H="function"==typeof Symbol&&Symbol.metadata?Object.create(P[Symbol.metadata]??null):void 0;Y=[(0,K.H4)()],M=[(0,K.H4)()],(0,t.G4)(null,null,Y,{kind:"field",name:"nzPopconfirmBackdrop",static:!1,private:!1,access:{has:N=>"nzPopconfirmBackdrop"in N,get:N=>N.nzPopconfirmBackdrop,set:(N,Z)=>{N.nzPopconfirmBackdrop=Z}},metadata:H},h,z),(0,t.G4)(null,null,M,{kind:"field",name:"nzAutofocus",static:!1,private:!1,access:{has:N=>"nzAutofocus"in N,get:N=>N.nzAutofocus,set:(N,Z)=>{N.nzAutofocus=Z}},metadata:H},F,J),H&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:H})})(),function(N){return new(N||on)});static \u0275dir=o.FsC({type:on,selectors:[["","nz-popconfirm",""]],hostVars:2,hostBindings:function(N,Z){2&N&&o.AVh("ant-popover-open",Z.visible)},inputs:{arrowPointAtCenter:[2,"nzPopconfirmArrowPointAtCenter","arrowPointAtCenter",y.L39],title:[0,"nzPopconfirmTitle","title"],titleContext:[0,"nzPopconfirmTitleContext","titleContext"],directiveTitle:[0,"nz-popconfirm","directiveTitle"],trigger:[0,"nzPopconfirmTrigger","trigger"],placement:[0,"nzPopconfirmPlacement","placement"],origin:[0,"nzPopconfirmOrigin","origin"],mouseEnterDelay:[0,"nzPopconfirmMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:[0,"nzPopconfirmMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:[0,"nzPopconfirmOverlayClassName","overlayClassName"],overlayStyle:[0,"nzPopconfirmOverlayStyle","overlayStyle"],visible:[0,"nzPopconfirmVisible","visible"],nzBeforeConfirm:"nzBeforeConfirm",nzIcon:"nzIcon",nzCondition:[2,"nzCondition","nzCondition",y.L39],nzPopconfirmShowArrow:[2,"nzPopconfirmShowArrow","nzPopconfirmShowArrow",y.L39],nzPopconfirmBackdrop:"nzPopconfirmBackdrop",nzAutofocus:"nzAutofocus",nzOkText:[1,"nzOkText"],nzOkType:[1,"nzOkType"],nzCancelText:[1,"nzCancelText"],nzOkButtonProps:[1,"nzOkButtonProps"],nzCancelButtonProps:[1,"nzCancelButtonProps"],nzOkDisabled:[1,"nzOkDisabled"],nzOkDanger:[1,"nzOkDanger"]},outputs:{visibleChange:"nzPopconfirmVisibleChange",nzOnCancel:"nzOnCancel",nzOnConfirm:"nzOnConfirm"},exportAs:["nzPopconfirm"],features:[o.Vt3]})}})(),j=(()=>{class P extends E.VJ{okBtn;cancelBtn;nzCondition=!1;nzPopconfirmShowArrow=!0;nzIcon;nzAutoFocus=null;nzBeforeConfirm=null;nzOkText=(0,n.vPA)(null);nzCancelText=(0,n.vPA)(null);nzOkButtonProps=(0,n.vPA)({nzType:"primary"});nzCancelButtonProps=(0,n.vPA)(null);nzOnCancel=new A.B;nzOnConfirm=new A.B;_trigger="click";elementFocusedBeforeModalWasOpened=null;document=(0,n.WQX)(n.qQL);_prefix="ant-popover";confirmLoading=!1;constructor(){super(),this.destroyRef.onDestroy(()=>{this.nzVisibleChange.complete()})}show(){this.nzCondition?this.onConfirm():(this.capturePreviouslyFocusedElement(),super.show())}hide(){super.hide(),this.restoreFocus()}handleConfirm(){this.nzOnConfirm.next(),super.hide()}onCancel(){this.nzOnCancel.next(),super.hide()}onConfirm(){this.nzBeforeConfirm?(this.confirmLoading=!0,this.cdr.markForCheck(),(0,I.cG)(this.nzBeforeConfirm()).pipe((0,W.$)(),(0,D.p)(Boolean),(0,b.j)(()=>{this.confirmLoading=!1,this.cdr.markForCheck()})).subscribe(()=>this.handleConfirm())):this.handleConfirm()}capturePreviouslyFocusedElement(){this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement)}restoreFocus(){const h=this.elementFocusedBeforeModalWasOpened;if(h&&"function"==typeof h.focus){const z=this.document.activeElement,M=this.elementRef.nativeElement;(!z||z===this.document.body||z===M||M.contains(z))&&h.focus()}}static \u0275fac=function(z){return new(z||P)};static \u0275cmp=o.VBU({type:P,selectors:[["nz-popconfirm"]],viewQuery:function(z,M){if(1&z&&(o.GBs(X,5,o.aKT),o.GBs(s,5,o.aKT)),2&z){let F;o.mGM(F=o.lsd())&&(M.okBtn=F),o.mGM(F=o.lsd())&&(M.cancelBtn=F)}},exportAs:["nzPopconfirmComponent"],features:[o.Vt3],decls:2,vars:6,consts:[["overlay","cdkConnectedOverlay"],["cancelBtn",""],["okBtn",""],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"overlayOutsideClick","detach","positionChange","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","nzArrowPointAtCenter"],["cdkTrapFocus","",1,"ant-popover",3,"cdkTrapFocusAutoCapture","nzNoAnimation"],[1,"ant-popover-content"],[1,"ant-popover-arrow"],[1,"ant-popover-inner"],[1,"ant-popover-inner-content"],[1,"ant-popover-message"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[1,"ant-popover-buttons"],["nz-button","",3,"click","nzSize","disabled"],["nz-button","",3,"click","nzSize","nzType","nzDanger","nzLoading","disabled"],[1,"ant-popover-arrow-content"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-message-title"],[1,"ant-popover-message-icon"],["nzTheme","fill",3,"nzType"]],template:function(z,M){if(1&z){const F=o.RV6();o.DNE(0,_,19,28,"ng-template",3,0,o.C5r),o.bIt("overlayOutsideClick",function(nn){return n.eBV(F),n.Njj(M.onClickOutside(nn))})("detach",function(){return n.eBV(F),n.Njj(M.hide())})("positionChange",function(nn){return n.eBV(F),n.Njj(M.onPositionChange(nn))})}2&z&&o.Y8G("cdkConnectedOverlayHasBackdrop",M.nzBackdrop)("cdkConnectedOverlayOrigin",M.origin)("cdkConnectedOverlayPositions",M._positions)("cdkConnectedOverlayOpen",M._visible)("cdkConnectedOverlayPush",M.cdkConnectedOverlayPush)("nzArrowPointAtCenter",M.nzArrowPointAtCenter)},dependencies:[T.z_,T.WB,f.$_,f.vT,i.Pd,i.kB,V.z,x.C,x.m,O.Y3,O.Dn,L.Z,L.a,$.c,Q.p,v.bP,v.Vc],encapsulation:2,data:{animation:[U.uX]},changeDetection:0})}return P})(),R=(()=>{class P{static \u0275fac=function(z){return new(z||P)};static \u0275mod=o.$C({type:P});static \u0275inj=n.G2t({imports:[j]})}return P})()},72968:(w,k,e)=>{e.d(k,{K:()=>G});var t=e(72200),i=e(25703),T=e(12617),n=e(41951),o=e(50513),y=e(2615),S=e(73664);let G=(()=>{var A;class D{static#n=A=()=>(this.\u0275fac=function(L){return new(L||D)},this.\u0275mod=S.$C({type:D}),this.\u0275inj=y.G2t({imports:[t.MD,i.Ti,T.rD,n.Y3,o.Z]}))}return A(),D})()},86864:(w,k,e)=>{e.d(k,{OW:()=>v,fL:()=>$,fS:()=>E,sC:()=>X,sf:()=>I});var t=e(2615),i=e(73664),T=e(17705),n=e(76939),o=e(61577),y=e(89079),S=e(57806);const G=["*"];function A(s,g){1&s&&i.SdG(0)}const D=[[["nz-avatar","nz-comment-avatar",""]],[["nz-comment-content"]],"*"],b=["nz-avatar[nz-comment-avatar]","nz-comment-content","*"];function W(s,g){if(1&s&&(i.qex(0),i.EFF(1),i.bVm()),2&s){const u=i.XpG(2);i.R7$(),i.JRh(u.nzAuthor)}}function L(s,g){if(1&s&&(i.j41(0,"span",4),i.DNE(1,W,2,1,"ng-container",8),i.k0s()),2&s){const u=i.XpG();i.R7$(),i.Y8G("nzStringTemplateOutlet",u.nzAuthor)}}function U(s,g){if(1&s&&(i.qex(0),i.EFF(1),i.bVm()),2&s){const u=i.XpG(2);i.R7$(),i.JRh(u.nzDatetime)}}function K(s,g){if(1&s&&(i.j41(0,"span",5),i.DNE(1,U,2,1,"ng-container",8),i.k0s()),2&s){const u=i.XpG();i.R7$(),i.Y8G("nzStringTemplateOutlet",u.nzDatetime)}}function V(s,g){}function x(s,g){if(1&s&&(i.j41(0,"li")(1,"span"),i.DNE(2,V,0,0,"ng-template",9),i.k0s()()),2&s){const u=g.$implicit;i.R7$(2),i.Y8G("nzCommentActionHost",u.content)}}function f(s,g){if(1&s&&(i.j41(0,"ul",6),i.Z7z(1,x,3,1,"li",null,i.fX1),i.k0s()),2&s){const u=i.XpG();i.R7$(),i.Dyx(u.actions)}}let I=(()=>{class s{static \u0275fac=function(d){return new(d||s)};static \u0275dir=i.FsC({type:s,selectors:[["nz-avatar","nz-comment-avatar",""]],exportAs:["nzCommentAvatar"]})}return s})(),v=(()=>{class s{static \u0275fac=function(d){return new(d||s)};static \u0275dir=i.FsC({type:s,selectors:[["nz-comment-content"],["","nz-comment-content",""]],hostAttrs:[1,"ant-comment-content-detail"],exportAs:["nzCommentContent"]})}return s})(),O=(()=>{class s extends n.I3{nzCommentActionHost;ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}ngAfterViewInit(){this.attach(this.nzCommentActionHost)}static \u0275fac=(()=>{let u;return function(_){return(u||(u=i.xGo(s)))(_||s)}})();static \u0275dir=i.FsC({type:s,selectors:[["","nzCommentActionHost",""]],inputs:{nzCommentActionHost:"nzCommentActionHost"},exportAs:["nzCommentActionHost"],features:[i.Vt3]})}return s})(),E=(()=>{class s{implicitContent;viewContainerRef=(0,t.WQX)(i.c1b);contentPortal=null;get content(){return this.contentPortal}ngOnInit(){this.contentPortal=new n.VA(this.implicitContent,this.viewContainerRef)}static \u0275fac=function(d){return new(d||s)};static \u0275cmp=i.VBU({type:s,selectors:[["nz-comment-action"]],viewQuery:function(d,_){if(1&d&&i.GBs(i.C4Q,7),2&d){let p;i.mGM(p=i.lsd())&&(_.implicitContent=p.first)}},exportAs:["nzCommentAction"],ngContentSelectors:G,decls:1,vars:0,template:function(d,_){1&d&&(i.NAR(),i.PeT(0,A,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}return s})(),$=(()=>{class s{destroyRef=(0,t.WQX)(t.abz);cdr=(0,t.WQX)(T.gRc);directionality=(0,t.WQX)(o.dS);nzAuthor;nzDatetime;dir="ltr";actions;ngOnInit(){this.directionality.change?.pipe((0,y.pQ)(this.destroyRef)).subscribe(u=>{this.dir=u,this.cdr.detectChanges()}),this.dir=this.directionality.value}static \u0275fac=function(d){return new(d||s)};static \u0275cmp=i.VBU({type:s,selectors:[["nz-comment"]],contentQueries:function(d,_,p){if(1&d&&i.wni(p,E,4),2&d){let B;i.mGM(B=i.lsd())&&(_.actions=B)}},hostVars:4,hostBindings:function(d,_){2&d&&i.AVh("ant-comment",!0)("ant-comment-rtl","rtl"===_.dir)},inputs:{nzAuthor:"nzAuthor",nzDatetime:"nzDatetime"},exportAs:["nzComment"],ngContentSelectors:b,decls:11,vars:3,consts:[[1,"ant-comment-inner"],[1,"ant-comment-avatar"],[1,"ant-comment-content"],[1,"ant-comment-content-author"],[1,"ant-comment-content-author-name"],[1,"ant-comment-content-author-time"],[1,"ant-comment-actions"],[1,"ant-comment-nested"],[4,"nzStringTemplateOutlet"],[3,"nzCommentActionHost"]],template:function(d,_){1&d&&(i.NAR(D),i.j41(0,"div",0)(1,"div",1),i.SdG(2),i.k0s(),i.j41(3,"div",2)(4,"div",3),i.nVh(5,L,2,1,"span",4),i.nVh(6,K,2,1,"span",5),i.k0s(),i.SdG(7,1),i.nVh(8,f,3,0,"ul",6),i.k0s()(),i.j41(9,"div",7),i.SdG(10,2),i.k0s()),2&d&&(i.R7$(5),i.vxM(_.nzAuthor?5:-1),i.R7$(),i.vxM(_.nzDatetime?6:-1),i.R7$(2),i.vxM(null!=_.actions&&_.actions.length?8:-1))},dependencies:[S.C,S.m,O],encapsulation:2,changeDetection:0})}return s})(),X=(()=>{class s{static \u0275fac=function(d){return new(d||s)};static \u0275mod=i.$C({type:s});static \u0275inj=t.G2t({imports:[$]})}return s})()}}]);