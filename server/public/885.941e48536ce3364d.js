"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[885],{5639:(P,c,e)=>{e.d(c,{u:()=>u});var r=e(5e3),v=e(685),y=e(1912),z=e(3618),g=e(5017);function m(s,t){1&s&&(r.TgZ(0,"span"),r._uU(1," You must be logged in to view this page. "),r.qZA())}function f(s,t){1&s&&r._UZ(0,"cvc-login-button")}function p(s,t){1&s&&(r.TgZ(0,"nz-typography",4),r._UZ(1,"i",5),r.qZA())}let u=(()=>{class s{}return s.\u0275fac=function(h){return new(h||s)},s.\u0275cmp=r.Xpm({type:s,selectors:[["cvc-login-prompt"]],decls:7,vars:3,consts:[[3,"nzNotFoundImage","nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["emptyImage",""],["nzType","secondary"],["nz-icon","","nzType","login","nzTheme","outline",2,"font-size","50pt"]],template:function(h,V){if(1&h&&(r.TgZ(0,"nz-empty",0),r.YNc(1,m,2,0,"ng-template",null,1,r.W1O),r.YNc(3,f,1,0,"ng-template",null,2,r.W1O),r.qZA(),r.YNc(5,p,2,0,"ng-template",null,3,r.W1O)),2&h){const _=r.MAs(2),x=r.MAs(4),O=r.MAs(6);r.Q6J("nzNotFoundImage",O)("nzNotFoundContent",_)("nzNotFoundFooter",x)}},directives:[v.p9,y.s,z.ZU,g.Ls],styles:["[_nghost-%COMP%]{display:inline-block}"]}),s})()},9386:(P,c,e)=>{e.d(c,{a:()=>f});var r=e(9808),v=e(1844),y=e(685),z=e(5017),g=e(3618),m=e(5e3);let f=(()=>{class p{}return p.\u0275fac=function(s){return new(s||p)},p.\u0275mod=m.oAB({type:p}),p.\u0275inj=m.cJS({imports:[[r.ez,v.B,y.Xo,z.PV,g.ZJ]]}),p})()},885:(P,c,e)=>{e.r(c),e.d(c,{VariantGroupsAddModule:()=>pt});var r=e(9808),v=e(9386),y=e(5630),z=e(6905),g=e(6949),m=e(1894),f=e(5017),p=e(1945),u=e(325),s=e(4850),t=e(5e3),h=e(9350),V=e(8992),_=e(5639),x=e(160);function O(n,a){1&n&&(t.TgZ(0,"div"),t._UZ(1,"router-outlet"),t.qZA())}function Z(n,a){1&n&&(t.TgZ(0,"nz-row",7)(1,"div",8),t._UZ(2,"cvc-login-prompt"),t.qZA()())}let E=(()=>{class n{constructor(o){this.viewerService=o}ngOnInit(){this.isSignedIn$=this.viewerService.viewer$.pipe((0,s.U)(o=>o.signedIn))}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(h.a))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cvc-variant-groups-add-view"]],decls:14,vars:7,consts:[["displayName","New"],[1,"site-page-header"],["cvcFlaggableOptions",""],["nz-icon","","nzTheme","twotone","nzType","civic-variantgroup",3,"nzTwotoneColor"],[1,"content"],[4,"ngIf","ngIfElse"],["notSignedIn",""],["nzSpan","24","nzJustify","center"],["nz-col","","nzSpan","6"]],template:function(o,i){if(1&o&&(t._UZ(0,"cvc-section-navigation",0),t.TgZ(1,"nz-page-header",1)(2,"nz-page-header-title",2),t._UZ(3,"i",3),t.ALo(4,"entityColor"),t._uU(5," Add New Variant Group "),t.qZA(),t.TgZ(6,"nz-page-header-subtitle"),t._uU(7," Submit and review new Variant Groups "),t.qZA(),t.TgZ(8,"nz-page-header-content")(9,"div",4),t.YNc(10,O,2,0,"div",5),t.ALo(11,"ngrxPush"),t.YNc(12,Z,3,0,"ng-template",null,6,t.W1O),t.qZA()()()),2&o){const d=t.MAs(13);t.xp6(3),t.Q6J("nzTwotoneColor",t.lcZ(4,3,"VariantGroup")),t.xp6(7),t.Q6J("ngIf",t.lcZ(11,5,i.isSignedIn$))("ngIfElse",d)}},directives:[V.I,p.$O,p.u9,f.Ls,p.yG,p.u5,r.O5,u.lC,m.SK,m.t3,_.u],pipes:[x.a,g.fM],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     nz-page-header:first-of-type{background-color:#fff;border-radius:8px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content{background-color:#f0f0f0;border-top-left-radius:8px;border-top-right-radius:8px;margin:-12px -16px 16px;border-bottom:1px solid #bfbfbf}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon{padding:12px 0 12px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-icon i   svg{width:100%;height:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description{padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description h2{color:#262626;margin:-8px 0 0;font-weight:500}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-description p{color:#262626;margin:-2px 0 0;padding:0;font-size:95%;line-height:1.5em}[_nghost-%COMP%]     nz-page-header:first-of-type .header-content .header-links{text-align:right;padding:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card{width:100%}[_nghost-%COMP%]     nz-page-header:first-of-type .card-list nz-card .card-grid-cell{width:50%}[_nghost-%COMP%]     nz-page-header:first-of-type nz-page-header-title.flagged{padding-left:.75em}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-content{padding-top:0;padding-bottom:12px}[_nghost-%COMP%]     nz-page-header:first-of-type .ant-page-header-heading-extra nz-space-item:last-child{margin-right:0!important}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs{margin:0 -16px 12px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap{padding-left:16px;padding-right:16px;line-height:24px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab{padding:1px 8px}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-nav-wrap .ant-tabs-tab .anticon{margin-right:0}[_nghost-%COMP%]     nz-page-header:first-of-type #section-tabs .ant-tabs-extra-content{margin-right:16px}"]}),n})();var b=e(8776),F=e(7462),T=e(4181),I=e(7055),L=e(8979),U=e(4623),M=e(3075),N=e(1017),C=e(4546),A=e(2359),D=e(6042),J=e(7525),B=e(7008),W=e(5472),R=e(3773),Y=e(3022),w=e(4889);let K=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[r.ez,M.UX,u.Bz,b.X0,C.U5,A.L,m.Jb,D.sL,J.j,b.X0,F.o,T.O,I.N,L.N,U.K,B.B,W.r,R.g,T.O,Y.e,w.E,N.s]]}),n})(),Q=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[r.ez,K]]}),n})();var S=e(3077),$=e(6123),j=e(8929),G=e(7625),X=e(7630),H=e(9169),k=e(822);function q(n,a){1&n&&t.GkF(0)}function tt(n,a){if(1&n){const o=t.EpF();t.TgZ(0,"formly-form",4),t.NdJ("modelChange",function(d){return t.CHM(o),t.oxw().formModel=d}),t.qZA()}if(2&n){const o=t.oxw();t.Q6J("form",o.formGroup)("fields",o.formFields)("model",o.formModel)}}function nt(n,a){if(1&n&&(t.TgZ(0,"nz-form-item"),t._UZ(1,"cvc-form-errors-alert",6),t.qZA()),2&n){const o=t.oxw(2);t.xp6(1),t.Q6J("errors",o.errorMessages)}}function et(n,a){if(1&n&&(t.TgZ(0,"p"),t._uU(1,"View "),t.TgZ(2,"a",10),t._uU(3,"its details"),t.qZA(),t._uU(4,"."),t.qZA()),2&n){const o=t.oxw(3);t.xp6(2),t.MGl("routerLink","/variant-groups/",o.newId,"/summary")}}function ot(n,a){if(1&n&&(t.ynx(0),t._UZ(1,"nz-alert",7),t.YNc(2,et,5,1,"ng-template",8,9,t.W1O),t.BQk()),2&n){const o=t.MAs(3);t.xp6(1),t.Q6J("nzDescription",o)}}function rt(n,a){if(1&n&&(t.YNc(0,nt,2,1,"nz-form-item",5),t.YNc(1,ot,4,1,"ng-container",5)),2&n){const o=t.oxw();t.Q6J("ngIf",o.errorMessages.length>0),t.xp6(1),t.Q6J("ngIf",o.success)}}let at=(()=>{class n{constructor(o,i){this.submitVariantGroupGQL=o,this.networkErrorService=i,this.destroy$=new j.xQ,this.formGroup=new M.cw({}),this.success=!1,this.errorMessages=[],this.loading=!1,this.submitVariantGroupMutator=new $.U(i),this.formFields=[{key:"fields",wrappers:["form-container"],templateOptions:{label:"Add Variant Group Form"},fieldGroup:[{key:"name",type:"input",wrappers:["form-field"],templateOptions:{label:"Variant Group Name",required:!0}},{key:"description",type:"cvc-textarea",templateOptions:{label:"Description",helpText:"A brief description of this new variant group.",placeholder:"No description provided",required:!0}},{key:"sources",type:"multi-field",wrappers:["form-field"],templateOptions:{label:"Source",helpText:"Add any sources upon which your description depends.",addText:"Add a Source"},fieldArray:{type:"source-input",templateOptions:{hideLabel:!0,required:!0}}},{key:"variants",type:"multi-field",wrappers:["form-field"],templateOptions:{label:"Variants",required:!0,helpText:"Specify the variants that comprise this Variant Group.",addText:"Add a Variant "},fieldArray:{type:"variant-input",templateOptions:{hideLabel:!0,required:!0,allowCreate:!1}}},{key:"comment",type:"comment-textarea",templateOptions:{label:"Comment",helpText:"Please provide any additional comments you wish to make about this evidence item. This comment will appear as the first comment in this item's comment thread.",placeholder:"Please enter a comment describing your revision.",required:!0,minLength:10}},{key:"cancel",type:"cancel-button"},{key:"organization",type:"org-submit-button",templateOptions:{submitLabel:"Create Variant Group",submitSize:"large"}}]}]}submitVariantGroup(o){let i=this.toSubmitInput(o);if(i){let d=this.submitVariantGroupMutator.mutate(this.submitVariantGroupGQL,{input:i},{},l=>{this.newId=l.submitVariantGroup.variantGroup.id});d.submitSuccess$.pipe((0,G.R)(this.destroy$)).subscribe(l=>{l&&(this.success=!0)}),d.submitError$.pipe((0,G.R)(this.destroy$)).subscribe(l=>{l&&(this.errorMessages=l,this.success=!1)}),d.isSubmitting$.pipe((0,G.R)(this.destroy$)).subscribe(l=>{this.loading=l})}}toSubmitInput(o){var i;if(o)return{description:o.fields.description,name:o.fields.name,organizationId:null===(i=o.fields.organization)||void 0===i?void 0:i.id,sourceIds:o.fields.sources?o.fields.sources.map(d=>d.id).filter(S.$):[],variantIds:o.fields.variants.map(d=>d.id).filter(S.$)}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(X.tji),t.Y36(H.Y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cvc-variant-group-submit-form"]],decls:5,vars:3,consts:[["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[4,"ngTemplateOutlet"],[3,"form","fields","model","modelChange",4,"ngIf"],["formMessages",""],[3,"form","fields","model","modelChange"],[4,"ngIf"],[3,"errors"],["nzType","success","nzMessage","Variant Group Submitted","nzShowIcon","",3,"nzDescription"],["nzSize","small"],["successMessage",""],[3,"routerLink"]],template:function(o,i){if(1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return i.submitVariantGroup(i.formModel)}),t.YNc(1,q,1,0,"ng-container",1),t.YNc(2,tt,1,3,"formly-form",2),t.qZA(),t.YNc(3,rt,2,2,"ng-template",null,3,t.W1O)),2&o){const d=t.MAs(4);t.Q6J("formGroup",i.formGroup),t.xp6(1),t.Q6J("ngTemplateOutlet",d),t.xp6(1),t.Q6J("ngIf",!i.success)}},directives:[M._Y,M.JL,C.Lr,M.sg,r.tP,r.O5,b.T7,m.SK,C.Nx,k.V,A.r,u.yS],styles:[""]}),n})();const it=[{path:"",component:E,children:[{path:"",redirectTo:"submit",pathMatch:"full"},{path:"submit",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["cvc-variant-groups-submit-page"]],decls:1,vars:0,template:function(o,i){1&o&&t._UZ(0,"cvc-variant-group-submit-form")},directives:[at],styles:[""]}),n})(),data:{breadcrumb:"Submit New Variant Groups"}}]}];let st=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.Bz.forChild(it),Q],u.Bz]}),n})(),pt=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[r.ez,st,g.WG,m.Jb,f.PV,p.KJ,v.a,z.s,y.D]]}),n})()}}]);